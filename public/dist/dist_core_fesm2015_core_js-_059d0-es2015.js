var to=Math.pow;(self.webpackChunkshell=self.webpackChunkshell||[]).push([["dist_core_fesm2015_core_js-_059d0"],{87170:function(e,t,n){"use strict";n.r(t),n.d(t,{ActionBarUiComponent:function(){return jo},ActionBarUiModule:function(){return Fo},ActionGroupMenuComponent:function(){return us},ActionGroupMenuModule:function(){return vs},ActionMenuComponent:function(){return py},ActionMenuModule:function(){return hy},ActionNameMapper:function(){return kl},AppMetadataStore:function(){return zp},AppStateStore:function(){return no},AsyncActionHandler:function(){return _g},AsyncActionService:function(){return Ng},AsyncProcessLineAction:function(){return Qy},AsyncProcessRecordAction:function(){return Tw},AsyncProcessSubpanelAction:function(){return Tg},AsyncProcessSubpanelLineAction:function(){return yC},AttributeBuilder:function(){return bu},AuthGuard:function(){return uw},AuthService:function(){return Kp},BaseActionManager:function(){return Ia},BaseActionsAdapter:function(){return Xy},BaseBooleanComponent:function(){return _l},BaseChartComponent:function(){return ws},BaseChartModule:function(){return xs},BaseComposite:function(){return Eu},BaseDateTimeComponent:function(){return Qa},BaseEnumComponent:function(){return Ba},BaseFavoritesComponent:function(){return fm},BaseFieldComponent:function(){return Ta},BaseFieldGridComponent:function(){return xa},BaseFieldModule:function(){return tw},BaseFieldRegistry:function(){return jd},BaseGroupedMenuItemComponent:function(){return $f},BaseHomeMenuItemComponent:function(){return qm},BaseLineActionsAdapter:function(){return tb},BaseLineItemsComponent:function(){return Tu},BaseMenuFavoritesComponent:function(){return bm},BaseMenuItemComponent:function(){return kf},BaseMenuItemLinkComponent:function(){return Qh},BaseMenuItemsListComponent:function(){return rf},BaseMenuRecentlyViewedComponent:function(){return dm},BaseMetadataResolver:function(){return gw},BaseMobileGroupedMenuComponent:function(){return Fm},BaseMobileMenuComponent:function(){return Km},BaseMobileModuleMenuComponent:function(){return nm},BaseModuleResolver:function(){return vw},BaseMultiEnumComponent:function(){return $a},BaseNameComponent:function(){return Za},BaseNavbarComponent:function(){return lg},BaseNumberComponent:function(){return nl},BaseRecordActionsAdapter:function(){return eb},BaseRecordContainerStore:function(){return Ub},BaseRecordResolver:function(){return bw},BaseRelateComponent:function(){return xc},BaseSaveRecordMapper:function(){return Qv},BaseSubMenuFavoritesComponent:function(){return Sf},BaseSubMenuRecentlyViewedComponent:function(){return pf},BaseWidgetComponent:function(){return AS},BaseWidgetModule:function(){return ew},BooleanDetailFieldComponent:function(){return Ml},BooleanDetailFieldModule:function(){return Zc},BooleanEditFieldComponent:function(){return zc},BooleanEditFieldModule:function(){return Uc},BooleanFilterFieldComponent:function(){return Gl},BooleanFilterFieldModule:function(){return Wl},BottomWidgetAdapter:function(){return ex},BulkActionMenuComponent:function(){return bs},BulkActionMenuModule:function(){return Ss},BulkActionsAdapter:function(){return Ux},BulkActionsAdapterFactory:function(){return Kx},ButtonComponent:function(){return Vo},ButtonGroupComponent:function(){return ls},ButtonGroupModule:function(){return gs},ButtonLoadingDirective:function(){return fo},ButtonLoadingUiModule:function(){return ko},ButtonModule:function(){return fs},ButtonUtils:function(){return Cs},CancelCreateAction:function(){return Rw},CancelRecordPanelAction:function(){return $x},ChangelogAsyncAction:function(){return Ag},ChartComponent:function(){return Gs},ChartDataStore:function(){return OS},ChartDataStoreFactory:function(){return DS},ChartMessageAreaComponent:function(){return Es},ChartMessageAreaModule:function(){return Ds},ChartModule:function(){return Hs},ChartRegistry:function(){return zs},ChartSidebarWidgetComponent:function(){return zS},ChartSidebarWidgetModule:function(){return US},ClassicModalComponent:function(){return Dg},ClassicModalModule:function(){return Xg},ClassicViewResolver:function(){return Mw},ClassicViewUiComponent:function(){return Ew},ClassicViewUiModule:function(){return _w},CloseButtonComponent:function(){return qs},CloseButtonModule:function(){return Qs},CollectionGQL:function(){return Gr},ColumnChooserComponent:function(){return oa},ColumnChooserModule:function(){return aa},CompositeComponent:function(){return Fu},CompositeModule:function(){return Ou},ConfirmationModalService:function(){return sy},CreateRecordComponent:function(){return gx},CreateRecordModule:function(){return xx},CreateRelatedLineAction:function(){return qy},CreateViewStore:function(){return jw},CurrencyDetailFieldComponent:function(){return rl},CurrencyDetailFieldModule:function(){return ol},CurrencyFormatter:function(){return fa},CurrencyService:function(){return Oa},CurrencyUnitConverter:function(){return MS},CurrencyValidator:function(){return qd},DataTypeFormatter:function(){return ya},DataTypeSeriesMapper:function(){return kS},DataTypeUnitConverter:function(){return jS},DateAdapter:function(){return hl},DateDetailFieldComponent:function(){return Xa},DateDetailFieldModule:function(){return Ja},DateEditFieldComponent:function(){return Kl},DateEditFieldModule:function(){return Pc},DateFilterFieldComponent:function(){return ml},DateFilterFieldModule:function(){return nd},DateFormatter:function(){return ga},DateParserFormatter:function(){return pl},DateTimeDetailFieldComponent:function(){return vl},DateTimeDetailFieldModule:function(){return yl},DateTimeEditFieldComponent:function(){return dl},DateTimeEditFieldModule:function(){return ul},DateTimeFilterFieldComponent:function(){return Sl},DateTimeFilterFieldModule:function(){return Cl},DateTimeModel:function(){return ll},DateTimeValidator:function(){return Jd},DateValidator:function(){return Yd},DatetimeFormatter:function(){return ma},DisplayTypeAction:function(){return _a},DropdownButtonComponent:function(){return ns},DropdownButtonModule:function(){return ms},DropdownEnumDetailFieldComponent:function(){return ld},DropdownEnumDetailFieldModule:function(){return cd},DropdownEnumEditFieldComponent:function(){return sd},DropdownEnumEditFieldModule:function(){return ad},DropdownSubmenuComponent:function(){return Ho},DropdownSubmenuModule:function(){return ps},DuplicateEmailValidator:function(){return fu},DynamicEnumDetailFieldComponent:function(){return nw},DynamicEnumDetailFieldModule:function(){return iw},DynamicEnumEditFieldComponent:function(){return ow},DynamicEnumEditFieldModule:function(){return sw},DynamicFieldComponent:function(){return Pd},DynamicFieldModule:function(){return Gd},DynamicLabelComponent:function(){return Ca},DynamicLabelModule:function(){return wa},DynamicLabelService:function(){return ba},EmailDetailFieldsComponent:function(){return aw},EmailDetailFieldsModule:function(){return lw},EmailFormatter:function(){return ru},EmailListFieldsComponent:function(){return Al},EmailListFieldsModule:function(){return Nl},EmailPrimarySelectAction:function(){return Ma},EmailValidator:function(){return su},EntityGQL:function(){return Zr},EntityMutationGQL:function(){return ro},EnumDetailFieldComponent:function(){return Ua},EnumDetailFieldModule:function(){return Ka},EnumEditFieldComponent:function(){return El},EnumEditFieldModule:function(){return Tl},ErrorInterceptor:function(){return pw},ExportAsyncAction:function(){return jg},ExtensionLoader:function(){return fw},FavoriteToggleComponent:function(){return lb},FavoriteToggleModule:function(){return cb},FavoritesService:function(){return rb},FieldBuilder:function(){return vu},FieldComponent:function(){return Ju},FieldGridComponent:function(){return dp},FieldGridModule:function(){return hp},FieldLayoutComponent:function(){return Ep},FieldLayoutModule:function(){return _p},FieldLogicActionHandler:function(){return Ea},FieldLogicManager:function(){return Ra},FieldManager:function(){return xu},FieldModule:function(){return pp},FieldRegistry:function(){return Ru},FilterAdapter:function(){return Zx},FilterAttributeBuilder:function(){return Cu},FilterFieldBuilder:function(){return Su},FilterListStore:function(){return ry},FilterListStoreFactory:function(){return oy},FilterUiComponent:function(){return Dp},FilterUiModule:function(){return Ap},FiltersListGQL:function(){return iy},FloatDetailFieldComponent:function(){return Vl},FloatDetailFieldModule:function(){return Ul},FloatValidator:function(){return tu},FooterUiComponent:function(){return Wp},FooterUiModule:function(){return qp},FormControlUtils:function(){return pa},FormatCurrencyModule:function(){return tl},FormatCurrencyPipe:function(){return el},FormatNumberModule:function(){return zl},FormatNumberPipe:function(){return Bl},FullNameDetailFieldsComponent:function(){return Ga},FullNameDetailFieldsModule:function(){return Ha},FullPageSpinnerComponent:function(){return Qp},FullPageSpinnerModule:function(){return Yp},GlobalSearch:function(){return mo},GridWidgetComponent:function(){return bh},GridWidgetModule:function(){return Rh},GroupFieldBuilder:function(){return yu},GroupFieldComponent:function(){return Zd},GroupFieldModule:function(){return Hd},GroupedMenuItemComponent:function(){return Kf},GroupedMenuItemRegistry:function(){return Vf},HistorySidebarWidgetComponent:function(){return tC},HistorySidebarWidgetModule:function(){return nC},HistoryTimelineAdapter:function(){return GS},HistoryTimelineAdapterFactory:function(){return HS},HistoryTimelineStore:function(){return KS},HistoryTimelineStoreFactory:function(){return ZS},HomeMenuItemComponent:function(){return Jm},HomeMenuItemRegistry:function(){return Qm},HomeUiComponent:function(){return Th},HomeUiModule:function(){return mg},HomeUiRoutes:function(){return Ph},HtmlDetailFieldComponent:function(){return fd},HtmlDetailFieldModule:function(){return gd},HtmlSanitizeModule:function(){return dw},HtmlSanitizePipe:function(){return cw},IframePageChangeObserver:function(){return Fg},IframeResizeHandlerHandler:function(){return Lg},ImageComponent:function(){return Eo},ImageModule:function(){return Lo},ImmediateDebounce:function(){return ob},InlineLoadingSpinnerComponent:function(){return Lc},InlineLoadingSpinnerModule:function(){return Fc},InstallAction:function(){return Ex},InstallActionManager:function(){return _x},InstallActionsAdapter:function(){return kx},InstallAuthGuard:function(){return hw},InstallContainerComponent:function(){return Fx},InstallContainerModule:function(){return Ox},InstallContentAdapter:function(){return Lx},InstallErrorModalComponent:function(){return wg},InstallErrorModalModule:function(){return xg},InstallHeaderComponent:function(){return Ax},InstallHeaderModule:function(){return Nx},InstallViewActionHandler:function(){return Ix},InstallViewComponent:function(){return Tx},InstallViewModule:function(){return Px},InstallViewStore:function(){return jx},IntDetailFieldComponent:function(){return Yc},IntDetailFieldModule:function(){return Jc},IntValidator:function(){return iu},LabelComponent:function(){return To},LabelModule:function(){return hs},LanguageStore:function(){return ho},LineActionActionHandler:function(){return Wy},LineActionActionManager:function(){return Yy},LineActionMenuComponent:function(){return Vg},LineActionModule:function(){return zg},LineActionsAdapter:function(){return Gx},LineChartComponent:function(){return Ps},LineChartModule:function(){return Bs},LineItemBuilder:function(){return wu},LineItemsComponent:function(){return qu},LineItemsModule:function(){return up},LinkModel:function(){return iv},LinkTarget:function(){return $h},ListComponent:function(){return uI},ListContainerComponent:function(){return nI},ListContainerModule:function(){return iI},ListFilterComponent:function(){return Ab},ListFilterModule:function(){return Nb},ListFilterStore:function(){return wb},ListFilterStoreFactory:function(){return Eb},ListGQL:function(){return Xl},ListHeaderComponent:function(){return lI},ListHeaderModule:function(){return cI},ListModule:function(){return pI},ListViewRecordPanelActionAdapterFactory:function(){return Wx},ListViewRecordPanelActionHandler:function(){return Bx},ListViewRecordPanelActionsAdapter:function(){return Hx},ListViewSidebarWidgetAdapter:function(){return Qx},ListViewStore:function(){return dy},LoadingBuffer:function(){return Yr},LoadingBufferFactory:function(){return Xr},LoadingSpinnerComponent:function(){return Ug},LoadingSpinnerModule:function(){return Kg},LocalStorageService:function(){return io},LoginAuthGuard:function(){return mw},LoginUiComponent:function(){return xI},LoginUiModule:function(){return EI},LoginUiRoutes:function(){return II},LogoAbstract:function(){return Bh},LogoUiComponent:function(){return Uh},LogoUiModule:function(){return ug},LogoutUiComponent:function(){return Zh},LogoutUiModule:function(){return pg},MaxColumnsCalculator:function(){return fc},MenuFavoritesComponent:function(){return xm},MenuFavoritesRegistry:function(){return Sm},MenuItemComponent:function(){return Df},MenuItemLinkComponent:function(){return em},MenuItemLinkRegistry:function(){return Yh},MenuItemRegistry:function(){return Lf},MenuItemsListComponent:function(){return lf},MenuItemsListRegistry:function(){return of},MenuRecentlyViewedComponent:function(){return mm},MenuRecentlyViewedRegistry:function(){return um},MessageModalComponent:function(){return Ec},MessageModalModule:function(){return ev},MessageService:function(){return Jl},MessageUiComponent:function(){return Qg},MessageUiModule:function(){return Yg},MetadataStore:function(){return pc},MinimiseButtonComponent:function(){return Ch},MinimiseButtonModule:function(){return Dh},MobileGroupedMenuComponent:function(){return Nm},MobileGroupedMenuRegistry:function(){return Om},MobileMenuComponent:function(){return Wm},MobileMenuRegistry:function(){return Zm},MobileModuleMenuComponent:function(){return sm},MobileModuleMenuRegistry:function(){return im},ModalButtonGroupComponent:function(){return Ic},ModalButtonGroupModule:function(){return Jg},ModalComponent:function(){return ta},ModalModule:function(){return sa},ModalRecordFilterAdapter:function(){return Ql},ModalRecordListTableAdapter:function(){return Yl},ModuleNameMapper:function(){return jl},ModuleNavigation:function(){return Fl},ModuleTitleComponent:function(){return tv},ModuleTitleModule:function(){return nv},MultiEnumDetailFieldComponent:function(){return xl},MultiEnumDetailFieldModule:function(){return Pl},MultiEnumEditFieldComponent:function(){return Wc},MultiEnumEditFieldModule:function(){return Xc},MultiEnumFilterFieldComponent:function(){return za},MultiEnumFilterFieldModule:function(){return Bc},NavbarAbstract:function(){return Vh},NavbarRegistry:function(){return cg},NavbarUiComponent:function(){return dg},NavbarUiModule:function(){return hg},NavigationStore:function(){return Pp},NoopAsyncAction:function(){return kg},NumberFormatter:function(){return ha},PaginationComponent:function(){return sv},PaginationModule:function(){return av},PanelComponent:function(){return jh},PanelModule:function(){return Ah},PasswordDetailFieldComponent:function(){return vd},PasswordDetailFieldModule:function(){return yd},PasswordEditFieldComponent:function(){return bd},PasswordEditFieldModule:function(){return Sd},PhoneDetailFieldComponent:function(){return Pa},PhoneDetailFieldModule:function(){return Tc},PhoneFormatter:function(){return va},PhoneValidator:function(){return lu},PieGridChartComponent:function(){return js},PieGridChartModule:function(){return Ns},PrimaryEmailValidator:function(){return hu},ProcessService:function(){return so},RadioEnumDetailFieldComponent:function(){return dd},RadioEnumDetailFieldModule:function(){return ud},RadioEnumEditFieldComponent:function(){return hd},RadioEnumEditFieldModule:function(){return md},RangeValidator:function(){return uu},RecentlyViewedService:function(){return yw},RecordActionHandler:function(){return kw},RecordActionManager:function(){return Pw},RecordActionsAdapter:function(){return Bw},RecordCancelAction:function(){return Lw},RecordComponent:function(){return Cx},RecordContainerComponent:function(){return hx},RecordContainerModule:function(){return vx},RecordContentAdapter:function(){return Xw},RecordContentComponent:function(){return mv},RecordContentModule:function(){return fv},RecordContentSkeletonComponent:function(){return gv},RecordContentSkeletonModule:function(){return vv},RecordCreateAction:function(){return Aw},RecordEditAction:function(){return Dw},RecordFetchGQL:function(){return Gv},RecordFlexboxComponent:function(){return Ov},RecordFlexboxModule:function(){return Dv},RecordGridComponent:function(){return Tv},RecordGridModule:function(){return Pv},RecordHeaderComponent:function(){return Qw},RecordHeaderModule:function(){return yx},RecordListModalComponent:function(){return Cc},RecordListModalModule:function(){return Rb},RecordListModalStore:function(){return hc},RecordListModalStoreFactory:function(){return mc},RecordListStore:function(){return rc},RecordListStoreFactory:function(){return oc},RecordManager:function(){return Iu},RecordModule:function(){return wx},RecordPanelActionHandler:function(){return $b},RecordPanelActionManager:function(){return zx},RecordPanelAdapter:function(){return qx},RecordPanelComponent:function(){return Bb},RecordPanelModule:function(){return Vb},RecordPanelStore:function(){return Kb},RecordPanelStoreFactory:function(){return Zb},RecordSaveAction:function(){return Fw},RecordSaveGQL:function(){return zv},RecordSaveNewAction:function(){return Nw},RecordStore:function(){return qv},RecordStoreFactory:function(){return Yv},RecordStoreList:function(){return Gb},RecordThreadComponent:function(){return CS},RecordThreadItemComponent:function(){return uS},RecordThreadItemModule:function(){return wS},RecordThreadItemStore:function(){return Hb},RecordThreadItemStoreFactory:function(){return Wb},RecordThreadModule:function(){return xS},RecordThreadSidebarWidgetComponent:function(){return oC},RecordThreadSidebarWidgetModule:function(){return sC},RecordThreadStore:function(){return qb},RecordThreadStoreFactory:function(){return Qb},RecordToggleWidgetsAction:function(){return Ow},RecordViewStore:function(){return Jv},RecoverPasswordService:function(){return Sw},RedirectAsyncAction:function(){return Mg},RelateDetailFieldComponent:function(){return ql},RelateDetailFieldsModule:function(){return $c},RelateEditFieldComponent:function(){return kc},RelateEditFieldModule:function(){return Oc},RelateFilterFieldComponent:function(){return Nc},RelateFilterFieldModule:function(){return Vc},RelateService:function(){return wc},RequiredAction:function(){return Fa},RequiredValidator:function(){return La},RouteConverter:function(){return zh},RunBulkActionRecordPanelAction:function(){return Vx},SaveFilterStoreFactory:function(){return Cb},SavedFilterActionAdapterFactory:function(){return Ib},SavedFilterActionHandler:function(){return db},SavedFilterActionManager:function(){return hb},SavedFilterActionsAdapter:function(){return xb},SavedFilterDeleteAction:function(){return pb},SavedFilterRecordStore:function(){return fb},SavedFilterRecordStoreFactory:function(){return gb},SavedFilterSaveAction:function(){return ub},SavedFilterSaveGQL:function(){return bb},SavedFilterStore:function(){return yb},SavedSearchRecordMapper:function(){return Sb},ScreenSize:function(){return Oo},ScreenSizeObserverService:function(){return Do},SelectModalService:function(){return Jy},SeriesMapper:function(){return LS},SeriesStatisticsStore:function(){return ES},SeriesStatisticsStoreFactory:function(){return ww},SeriesTraverser:function(){return _S},SettingsMenuComponent:function(){return gy},SettingsMenuModule:function(){return vy},SidebarWidgetAdapter:function(){return Yw},SidebarWidgetComponent:function(){return fC},SidebarWidgetModule:function(){return gC},SidebarWidgetRegistry:function(){return uC},SingleValueStatisticsStore:function(){return nh},SingleValueStatisticsStoreFactory:function(){return ih},SortButtonComponent:function(){return $v},SortButtonModule:function(){return Vv},StandardFieldRegistry:function(){return kd},StateManager:function(){return Up},StatisticsBatch:function(){return Hv},StatisticsFetchGQL:function(){return Xp},StatisticsSidebarWidgetComponent:function(){return aC},StatisticsSidebarWidgetModule:function(){return lC},StatisticsStore:function(){return eh},StatisticsStoreFactory:function(){return xw},StatisticsTopWidgetComponent:function(){return GC},StatisticsTopWidgetModule:function(){return HC},StatusBarComponent:function(){return ny},StatusBarModule:function(){return yy},SubMenuFavoritesComponent:function(){return If},SubMenuFavoritesRegistry:function(){return Cf},SubMenuRecentlyViewedComponent:function(){return gf},SubMenuRecentlyViewedRegistry:function(){return hf},SubpanelActionHandler:function(){return Ig},SubpanelActionManager:function(){return Pg},SubpanelComponent:function(){return EC},SubpanelContainerComponent:function(){return NC},SubpanelContainerModule:function(){return RC},SubpanelCreateAction:function(){return Eg},SubpanelLineActionHandler:function(){return vC},SubpanelLineActionManager:function(){return bC},SubpanelLineActionsAdapter:function(){return SC},SubpanelLineActionsAdapterFactory:function(){return CC},SubpanelModule:function(){return _C},SubpanelSelectAction:function(){return Rg},SubpanelStore:function(){return Uv},SubpanelStoreFactory:function(){return Kv},SubpanelTableAdapter:function(){return wC},SubpanelTableAdapterFactory:function(){return xC},SystemConfigStore:function(){return Qr},TableAdapter:function(){return Yx},TableBodyComponent:function(){return Ay},TableBodyModule:function(){return Zy},TableComponent:function(){return Uy},TableFooterComponent:function(){return $y},TableFooterModule:function(){return Gy},TableHeaderComponent:function(){return Ty},TableHeaderModule:function(){return Ky},TableModule:function(){return Hy},TextDetailFieldComponent:function(){return sl},TextDetailFieldModule:function(){return Rc},TextEditFieldComponent:function(){return td},TextEditFieldModule:function(){return id},ThemeImagesStore:function(){return So},TinymceDetailFieldComponent:function(){return Cd},TinymceDetailFieldModule:function(){return wd},TinymceEditFieldComponent:function(){return xd},TinymceEditFieldModule:function(){return Id},TopWidgetAdapter:function(){return Jw},TopWidgetComponent:function(){return XC},TopWidgetModule:function(){return JC},UpdateBaseCurrencyAction:function(){return Da},UpdateCurrencyAction:function(){return Aa},UpdateFlexRelateModuleAction:function(){return Na},UrlDetailFieldComponent:function(){return qa},UrlDetailFieldModule:function(){return Gc},UserActionMenuUiComponent:function(){return nb},UserActionMenuUiModule:function(){return ib},UserPreferenceStore:function(){return ua},UserService:function(){return Cw},ValidationManager:function(){return gu},VarcharDetailFieldComponent:function(){return Wa},VarcharDetailFieldModule:function(){return ed},VarcharEditFieldComponent:function(){return al},VarcharEditFieldModule:function(){return Kc},VarcharFilterFieldComponent:function(){return Rl},VarcharFilterFieldModule:function(){return Hl},VerticalBarChartComponent:function(){return Os},VerticalBarChartModule:function(){return As},ViewStore:function(){return Zv},WidgetPanelComponent:function(){return Oh},WidgetPanelModule:function(){return Nh},alertTypes:function(){return Cg},baseFieldComponents:function(){return _d},baseFieldModules:function(){return Ed},baseViewFieldsMap:function(){return Md},booleanRequiredValidator:function(){return ka},chartModules:function(){return $s},chartTypeMap:function(){return Vs},componentTypeMap:function(){return dC},currencyValidator:function(){return Wd},dateTimeValidator:function(){return Xd},dateValidator:function(){return Qd},duplicateEmailValidator:function(){return mu},emailValidator:function(){return ou},fieldComponents:function(){return Au},fieldModules:function(){return Du},floatValidator:function(){return eu},intValidator:function(){return nu},maxValidator:function(){return du},minValidator:function(){return cu},phoneValidator:function(){return au},primaryEmailValidator:function(){return pu},requiredValidator:function(){return ja},sidebarWidgetModules:function(){return cC},topWidgetComponentTypeMap:function(){return qC},topWidgetModules:function(){return WC},viewFieldsMap:function(){return Nu}});var i=n(14468),r=n(71180),o=n(92343),s=n(78193),a=n(34832),l=n.n(a),c=n(4488),d=n(39298),u=n(78510),p=n(1090),h=n(25864),m=n(75545),f=n(92594),g=n(79933),v=n(97637);const y=new Set;let b,S=(()=>{class e{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):C}matchMedia(e){return this._platform.WEBKIT&&function(e){if(!y.has(e))try{b||(b=document.createElement("style"),b.setAttribute("type","text/css"),document.head.appendChild(b)),b.sheet&&(b.sheet.insertRule(`@media ${e} {.fx-query-test{ }}`,0),y.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(v.t4))},e.\u0275prov=(0,i.\u0275\u0275defineInjectable)({factory:function(){return new e((0,i.\u0275\u0275inject)(v.t4))},token:e,providedIn:"root"}),e})();function C(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let w=(()=>{class e{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new r.Subject}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return x((0,g.Eq)(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){const t=x((0,g.Eq)(e)).map(e=>this._registerQuery(e).observable);let n=(0,r.combineLatest)(t);return n=(0,r.concat)(n.pipe((0,o.take)(1)),n.pipe((0,o.skip)(1),(0,o.debounceTime)(0))),n.pipe((0,o.map)(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(({matches:e,query:n})=>{t.matches=t.matches||e,t.breakpoints[n]=e}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e),n={observable:new r.Observable(e=>{const n=t=>this._zone.run(()=>e.next(t));return t.addListener(n),()=>{t.removeListener(n)}}).pipe((0,o.startWith)(t),(0,o.map)(({matches:t})=>({query:e,matches:t})),(0,o.takeUntil)(this._destroySubject)),mql:t};return this._queries.set(e,n),n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(S),i.\u0275\u0275inject(i.NgZone))},e.\u0275prov=(0,i.\u0275\u0275defineInjectable)({factory:function(){return new e((0,i.\u0275\u0275inject)(S),(0,i.\u0275\u0275inject)(i.NgZone))},token:e,providedIn:"root"}),e})();function x(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var I=n(87255),E=n(63424),_=n(26670);const M=new i.InjectionToken("EventArgument",{providedIn:"root",factory:function(){return"$event"}}),j=new i.InjectionToken("DynamicComponentInjector");let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})();function L(e){return new i.SimpleChange(void 0,e,!0)}function F(){}let O=(()=>{class e{constructor(e,t,n){this.differs=e,this.cfr=t,this.eventArgument=n,this.checkInit=this.failInit,this.lastComponentInst=null,this.inputsDiffer=this.differs.find({}).create(),this.compFactory=null,this.outputsShouldDisconnect$=new r.Subject,this.outputsChanged=()=>!1}get compRef(){return this.compInjector.componentRef}get componentInst(){return this.compRef?this.compRef.instance:null}get componentInstChanged(){return this.lastComponentInst!==this.componentInst&&(this.lastComponentInst=this.componentInst,!0)}get compCdr(){return this.compRef?this.compRef.injector.get(i.ChangeDetectorRef):null}ngOnDestroy(){this._disconnectOutputs()}init(e,t={}){if(this.checkInit=e?F:this.failInit,this.compInjector=e,t.trackOutputChanges){const e=this.differs.find({}).create();this.outputsChanged=t=>!!e.diff(t)}}update(e,t,n,i){this.checkInit(),this.updateIO(e,t);const r=this.componentInstChanged;if(r||n){const e=this._getInputsChanges();e&&this._updateInputChanges(e),this.updateInputs(r||!this.lastInputChanges)}(r||i)&&this.bindOutputs()}maybeUpdate(){if(this.checkInit(),this.componentInstChanged)return this.updateInputs(!0),void this.bindOutputs();if(this.outputsChanged(this.outputs)&&this.bindOutputs(),!this.inputs)return;const e=this._getInputsChanges();if(e){const t=!!this.lastInputChanges;this._updateInputChanges(e),t&&this.updateInputs()}}updateIO(e,t){this.inputs=e,this.outputs=t}updateInputs(e=!1){e&&this._updateCompFactory();const t=this.componentInst;let n=this.inputs;!n||!t||(n=this._resolveInputs(n),Object.keys(n).forEach(e=>t[e]=n[e]),this.compCdr&&this.compCdr.markForCheck(),this.notifyOnInputChanges(this.lastInputChanges,e))}bindOutputs(){this._disconnectOutputs();const e=this.componentInst;let t=this.outputs;!t||!e||(t=this._resolveOutputs(t),Object.keys(t).filter(t=>e[t]).forEach(n=>e[n].pipe((0,o.takeUntil)(this.outputsShouldDisconnect$)).subscribe(e=>t[n](e))))}notifyOnInputChanges(e={},t){!this.componentInst.ngOnChanges||(t&&(e=this._collectFirstChanges()),this.componentInst.ngOnChanges(e))}_disconnectOutputs(){this.outputsShouldDisconnect$.next()}_getInputsChanges(){return this.inputsDiffer.diff(this.inputs)}_updateInputChanges(e){this.lastInputChanges=this._collectChangesFromDiffer(e)}_collectFirstChanges(){const e={},t=this.inputs;return Object.keys(t).forEach(n=>e[n]=L(t[n])),this._resolveChanges(e)}_collectChangesFromDiffer(e){const t={};return e.forEachAddedItem(e=>t[e.key]=L(e.currentValue)),e.forEachChangedItem(e=>t[e.key]=function(e,t){return new i.SimpleChange(t,e,!1)}(e.currentValue,e.previousValue)),this._resolveChanges(t)}_resolveCompFactory(){try{try{return this.cfr.resolveComponentFactory(this.compRef.componentType)}catch(e){return this.cfr.resolveComponentFactory(this.compRef.instance.constructor)}}catch(e){return null}}_updateCompFactory(){this.compFactory=this._resolveCompFactory()}_resolveInputs(e){return this.compFactory?this._remapIO(e,this.compFactory.inputs):e}_resolveOutputs(e){return e=this._processOutputs(e),this.compFactory?this._remapIO(e,this.compFactory.outputs):e}_processOutputs(e){const t={};return Object.keys(e).forEach(n=>{const i=e[n];t[n]="function"==typeof i?i:i&&this._processOutputArgs(i)}),t}_processOutputArgs(e){const{handler:t}=e,n="args"in e?e.args||[]:[this.eventArgument];return e=>t(...n.map(t=>t===this.eventArgument?e:t))}_resolveChanges(e){return this.compFactory?this._remapIO(e,this.compFactory.inputs):e}_remapIO(e,t){const n={};return Object.keys(e).forEach(i=>{const r=this._findPropByTplInMapping(i,t)||i;n[r]=e[i]}),n}_findPropByTplInMapping(e,t){for(const n of t)if(n.templateName===e)return n.propName;return null}failInit(){throw Error("IoService: ComponentInjector was not set! Please call init() method!")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(i.KeyValueDiffers),i.\u0275\u0275inject(i.ComponentFactoryResolver),i.\u0275\u0275inject(M))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),D=(()=>{class e{constructor(e,t){this.ioService=e,this.componentInjector=t,this.ioService.init(this.componentInjector)}get inputs(){return this.ndcDynamicInputs||this.ngComponentOutletNdcDynamicInputs}get outputs(){return this.ndcDynamicOutputs||this.ngComponentOutletNdcDynamicOutputs}ngOnChanges(e){this.ioService.update(this.inputs,this.outputs,this.inputsChanged(e),this.outputsChanged(e))}ngDoCheck(){this.ioService.maybeUpdate()}inputsChanged(e){return"ngComponentOutletNdcDynamicInputs"in e||"ndcDynamicInputs"in e}outputsChanged(e){return"ngComponentOutletNdcDynamicOutputs"in e||"ndcDynamicOutputs"in e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(O),i.\u0275\u0275directiveInject(j,8))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","ndcDynamicInputs",""],["","ndcDynamicOutputs",""],["","ngComponentOutletNdcDynamicInputs",""],["","ngComponentOutletNdcDynamicOutputs",""]],inputs:{ndcDynamicInputs:"ndcDynamicInputs",ngComponentOutletNdcDynamicInputs:"ngComponentOutletNdcDynamicInputs",ndcDynamicOutputs:"ndcDynamicOutputs",ngComponentOutletNdcDynamicOutputs:"ngComponentOutletNdcDynamicOutputs"},features:[i.\u0275\u0275ProvidersFeature([O]),i.\u0275\u0275NgOnChangesFeature]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule],k]}),e})(),N=(()=>{class e{constructor(e,t){this.vcr=e,this.cfr=t,this.ndcDynamicCreated=new i.EventEmitter}ngOnChanges(e){e.ndcDynamicComponent&&this.createDynamicComponent()}createDynamicComponent(){this.vcr.clear(),this.componentRef=null,this.ndcDynamicComponent&&(this.componentRef=this.vcr.createComponent(this.cfr.resolveComponentFactory(this.ndcDynamicComponent),0,this._resolveInjector(),this.ndcDynamicContent),this.ndcDynamicCreated.emit(this.componentRef))}_resolveInjector(){let e=this.ndcDynamicInjector||this.vcr.injector;return this.ndcDynamicProviders&&(e=i.Injector.create({providers:this.ndcDynamicProviders,parent:e})),e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(i.ComponentFactoryResolver))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ndc-dynamic"]],inputs:{ndcDynamicComponent:"ndcDynamicComponent",ndcDynamicInjector:"ndcDynamicInjector",ndcDynamicProviders:"ndcDynamicProviders",ndcDynamicContent:"ndcDynamicContent"},outputs:{ndcDynamicCreated:"ndcDynamicCreated"},features:[i.\u0275\u0275ProvidersFeature([{provide:j,useExisting:e}]),i.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,A],A]}),e})();new i.InjectionToken("WindowRef",{providedIn:"root",factory:function(){return window}});var T=n(39996),P=n(99952);function B(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function $(e,t){const n=t?"":"none";B(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function V(e,t){const n=e.style;n.position=t?"":"fixed",n.top=n.opacity=t?"":"0",n.left=t?"":"-999em"}function z(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function U(e,t){return e.getPropertyValue(t).split(",").map(e=>e.trim())}function K(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function Z(e,t,n){const{top:i,bottom:r,left:o,right:s}=e;return n>=i&&n<=r&&t>=o&&t<=s}function G(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function H(e,t,n,i){const{top:r,right:o,bottom:s,left:a,width:l,height:c}=e,d=l*t,u=c*t;return i>r-u&&i<s+u&&n>a-d&&n<o+d}class W{constructor(e,t){this._document=e,this._viewportRuler=t,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:K(e)})})}handleScroll(e){const t=e.target,n=this.positions.get(t);if(!n)return null;const i=t===this._document?t.documentElement:t,r=n.scrollPosition;let o,s;if(t===this._document){const e=this._viewportRuler.getViewportScrollPosition();o=e.top,s=e.left}else o=t.scrollTop,s=t.scrollLeft;const a=r.top-o,l=r.left-s;return this.positions.forEach((e,n)=>{e.clientRect&&t!==n&&i.contains(n)&&G(e.clientRect,a,l)}),r.top=o,r.left=s,{top:a,left:l}}}function q(e){const t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<n.length;r++)n[r].removeAttribute("id");return"canvas"===i?J(e,t):("input"===i||"select"===i||"textarea"===i)&&X(e,t),Q("canvas",e,t,J),Q("input, textarea, select",e,t,X),t}function Q(e,t,n,i){const r=t.querySelectorAll(e);if(r.length){const t=n.querySelectorAll(e);for(let e=0;e<r.length;e++)i(r[e],t[e])}}let Y=0;function X(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${Y++}`)}function J(e,t){const n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(i){}}const ee=(0,v.i$)({passive:!0}),te=(0,v.i$)({passive:!1});class ne{constructor(e,t,n,i,o,s){this._config=t,this._document=n,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new r.Subject,this._pointerMoveSubscription=r.Subscription.EMPTY,this._pointerUpSubscription=r.Subscription.EMPTY,this._scrollSubscription=r.Subscription.EMPTY,this._resizeSubscription=r.Subscription.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new r.Subject,this.started=new r.Subject,this.released=new r.Subject,this.ended=new r.Subject,this.entered=new r.Subject,this.exited=new r.Subject,this.dropped=new r.Subject,this.moved=this._moveEvents,this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const t=this._handles.find(t=>{const n=e.target;return!!n&&(n===t||t.contains(n))});t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{const t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging){if(Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const t=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),n=this._dropContainer;if(!t)return void this._endDragSequence(e);(!n||!n.isDragging()&&!n.isReceiving())&&(e.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),e.preventDefault();const n=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,t);else{const e=this._activeTransform;e.x=n.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=n.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:e,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{this._endDragSequence(e)},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new W(n,o),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=(0,g.Ig)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>$(e,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(e=>(0,g.fI)(e)),this._handles.forEach(e=>$(e,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(e=>{this._handles.indexOf(e)>-1&&t.add(e)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=(0,g.fI)(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,te),t.addEventListener("touchstart",this._pointerDown,ee)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?(0,g.fI)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&oe(this._rootElement),oe(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),$(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),$(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&oe(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&oe(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){!this._dragDropRegistry.isDragging(this)||(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(e){se(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const e=this._rootElement,n=e.parentNode,i=this._preview=this._createPreviewElement(),r=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),s=this._getShadowRoot();n.insertBefore(o,e),V(e,!1),this._document.body.appendChild(n.replaceChild(r,e)),function(e,t){return t||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body}(this._document,s).appendChild(i),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),i=se(t),r=!i&&0!==t.button,o=this._rootElement,s=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),n||r||s)return;this._handles.length&&(this._rootElementTapHighlight=o.style.webkitTapHighlightColor||"",o.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{this._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=K(this._boundaryElement));const a=this._previewTemplate;this._pickupPositionInElement=a&&a.template&&!a.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){V(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),r=this._getDragDistance(this._getPointerPositionOnPage(e)),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:r}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:r}),t.drop(this,n,this._initialIndex,this._initialContainer,o,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:n,y:i}){let r=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,e,t,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(n,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._preview.style.transform=ie(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,n=e?e.template:null;let i;if(n&&e){const t=e.matchSize?this._rootElement.getBoundingClientRect():null,r=e.viewContainer.createEmbeddedView(n,e.context);r.detectChanges(),i=ae(r,this._document),this._previewRef=r,e.matchSize?le(i,t):i.style.transform=ie(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement;i=q(e),le(i,e.getBoundingClientRect())}return B(i.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:`${this._config.zIndex||1e3}`}),$(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(e=>i.classList.add(e)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=ie(e.left,e.top);const t=function(e){const t=getComputedStyle(e),n=U(t,"transition-property"),i=n.find(e=>"transform"===e||"all"===e);if(!i)return 0;const r=n.indexOf(i),o=U(t,"transition-duration"),s=U(t,"transition-delay");return z(o[r])+z(s[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const n=t=>{(!t||t.target===this._preview&&"transform"===t.propertyName)&&(this._preview.removeEventListener("transitionend",n),e(),clearTimeout(i))},i=setTimeout(n,1.5*t);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),n=ae(this._placeholderRef,this._document)):n=q(this._rootElement),n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(e,t){const n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,r=i?i.getBoundingClientRect():n,o=se(t)?t.targetTouches[0]:t,s=this._getViewportScrollPosition();return{x:r.left-n.left+(o.pageX-r.left-s.left),y:r.top-n.top+(o.pageY-r.top-s.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),n=se(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,r=n.pageY-t.top;if(this._ownerSVGElement){const e=this._ownerSVGElement.getScreenCTM();if(e){const t=this._ownerSVGElement.createSVGPoint();return t.x=i,t.y=r,t.matrixTransform(e.inverse())}}return{x:i,y:r}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:i}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:t}=this._pickupPositionInElement,r=this._boundaryRect,o=this._previewRect,s=r.top+t,a=r.bottom-(o.height-t);n=re(n,r.left+e,r.right-(o.width-e)),i=re(i,s,a)}return{x:n,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:n}=e,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-r.x),s=Math.abs(n-r.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>r.x?1:-1,r.x=t),s>this._config.pointerDirectionChangeThreshold&&(i.y=n>r.y?1:-1,r.y=n),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,$(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,te),e.removeEventListener("touchstart",this._pointerDown,ee)}_applyRootElementTransform(e,t){const n=ie(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),i=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===i.width&&0===i.height)return;const r=n.left-i.left,o=i.right-n.right,s=n.top-i.top,a=i.bottom-n.bottom;n.width>i.width?(r>0&&(e+=r),o>0&&(e-=o)):e=0,n.height>i.height?(s>0&&(t+=s),a>0&&(t-=a)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:se(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const n=e.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&G(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,v.kV)(this._rootElement)),this._cachedShadowRoot}}function ie(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function re(e,t,n){return Math.max(t,Math.min(n,e))}function oe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function se(e){return"t"===e.type[0]}function ae(e,t){const n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];const i=t.createElement("div");return n.forEach(e=>i.appendChild(e)),i}function le(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.transform=ie(t.left,t.top)}function ce(e,t,n){const i=de(t,e.length-1),r=de(n,e.length-1);if(i===r)return;const o=e[i],s=r<i?-1:1;for(let a=i;a!==r;a+=s)e[a]=e[a+s];e[r]=o}function de(e,t){return Math.max(0,Math.min(t,e))}class ue{constructor(e,t,n,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new r.Subject,this.entered=new r.Subject,this.exited=new r.Subject,this.dropped=new r.Subject,this.sorted=new r.Subject,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=r.Subscription.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new r.Subject,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,r.interval)(0,r.animationFrameScheduler).pipe((0,o.takeUntil)(this._stopScrollTimers)).subscribe(()=>{const e=this._scrollNode,t=this.autoScrollStep;1===this._verticalScrollDirection?he(e,-t):2===this._verticalScrollDirection&&he(e,t),1===this._horizontalScrollDirection?me(e,-t):2===this._horizontalScrollDirection&&me(e,t)})},this.element=(0,g.fI)(e),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new W(n,s)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,n,i){let r;this._draggingStarted(),null==i?(r=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===r&&(r=this._getItemIndexFromPointerPosition(e,t,n))):r=i;const o=this._activeDraggables,s=o.indexOf(e),a=e.getPlaceholderElement();let l=o[r];if(l===e&&(l=o[r+1]),s>-1&&o.splice(s,1),l&&!this._dragDropRegistry.isDragging(l)){const t=l.getRootElement();t.parentElement.insertBefore(a,t),o.splice(r,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){const t=o[0].getRootElement();t.parentNode.insertBefore(a,t),o.unshift(e)}else(0,g.fI)(this.element).appendChild(a),o.push(e);a.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,i,r,o){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:r,distance:o})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&(t.filter(e=>e.isDragging()).every(t=>-1===e.indexOf(t))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=(0,g.fI)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?pe("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,t=>t.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,i){if(this.sortingDisabled||!this._clientRect||!H(this._clientRect,.05,t,n))return;const r=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,n,i);if(-1===o&&r.length>0)return;const s="horizontal"===this._orientation,a=pe(r,t=>t.drag===e),l=r[o],c=l.clientRect,d=a>o?1:-1,u=this._getItemOffsetPx(r[a].clientRect,c,d),p=this._getSiblingOffsetPx(a,r,d),h=r.slice();ce(r,a,o),this.sorted.next({previousIndex:a,currentIndex:o,container:this,item:e}),r.forEach((t,n)=>{if(h[n]===t)return;const i=t.drag===e,r=i?u:p,o=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=r,s?(o.style.transform=`translate3d(${Math.round(t.offset)}px, 0, 0)`,G(t.clientRect,0,r)):(o.style.transform=`translate3d(0, ${Math.round(t.offset)}px, 0)`,G(t.clientRect,r,0))}),this._previousSwap.overlaps=Z(c,t,n),this._previousSwap.drag=l.drag,this._previousSwap.delta=s?i.x:i.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let n,i=0,r=0;if(this._parentPositions.positions.forEach((o,s)=>{s===this._document||!o.clientRect||n||H(o.clientRect,.05,e,t)&&([i,r]=function(e,t,n,i){const r=fe(t,i),o=ge(t,n);let s=0,a=0;if(r){const t=e.scrollTop;1===r?t>0&&(s=1):e.scrollHeight-t>e.clientHeight&&(s=2)}if(o){const t=e.scrollLeft;1===o?t>0&&(a=1):e.scrollWidth-t>e.clientWidth&&(a=2)}return[s,a]}(s,o.clientRect,e,t),(i||r)&&(n=s))}),!i&&!r){const{width:o,height:s}=this._viewportRuler.getViewportSize(),a={width:o,height:s,top:0,right:o,bottom:s,left:0};i=fe(a,t),r=ge(a,e),n=window}n&&(i!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=r,this._scrollNode=n,(i||r)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=(0,g.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=(0,g.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=e.getVisibleElement();return{drag:e,offset:0,clientRect:K(t)}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const e=(0,g.fI)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{const t=e.getRootElement();t&&(t.style.transform="")}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,n){const i="horizontal"===this._orientation,r=t[e].clientRect,o=t[e+-1*n];let s=r[i?"width":"height"]*n;if(o){const e=i?"left":"top",t=i?"right":"bottom";-1===n?s-=o.clientRect[e]-r[t]:s+=r[e]-o.clientRect[t]}return s}_getItemOffsetPx(e,t,n){const i="horizontal"===this._orientation;let r=i?t.left-e.left:t.top-e.top;return-1===n&&(r+=i?t.width-e.width:t.height-e.height),r}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const r=n[n.length-1].clientRect;return i?e>=r.right:t>=r.bottom}{const r=n[0].clientRect;return i?e<=r.left:t<=r.top}}_getItemIndexFromPointerPosition(e,t,n,i){const r="horizontal"===this._orientation,o=pe(this._itemPositions,({drag:o,clientRect:s},a,l)=>{if(o===e)return l.length<2;if(i){const e=r?i.x:i.y;if(o===this._previousSwap.drag&&this._previousSwap.overlaps&&e===this._previousSwap.delta)return!1}return r?t>=Math.floor(s.left)&&t<Math.floor(s.right):n>=Math.floor(s.top)&&n<Math.floor(s.bottom)});return-1!==o&&this.sortPredicate(o,e,this)?o:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&Z(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(i=>i._canReceive(e,t,n))}_canReceive(e,t,n){if(!this._clientRect||!Z(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;const r=(0,g.fI)(this.element);return i===r||r.contains(i)}_startReceiving(e,t){const n=this._activeSiblings;!n.has(e)&&t.every(e=>this.enterPredicate(e,this)||this._draggables.indexOf(e)>-1)&&(n.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:e})=>{G(e,t.top,t.left)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=(0,v.kV)((0,g.fI)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function pe(e,t){for(let n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function he(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function me(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function fe(e,t){const{top:n,bottom:i,height:r}=e,o=.05*r;return t>=n-o&&t<=n+o?1:t>=i-o&&t<=i+o?2:0}function ge(e,t){const{left:n,right:i,width:r}=e,o=.05*r;return t>=n-o&&t<=n+o?1:t>=i-o&&t<=i+o?2:0}const ve=(0,v.i$)({passive:!1,capture:!0});let ye=(()=>{class e{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=e=>e.isDragging(),this.pointerMove=new r.Subject,this.pointerUp=new r.Subject,this.scroll=new r.Subject,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=e=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,ve)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ve)}startDragging(e,t){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const e=t.type.startsWith("touch");this._globalListeners.set(e?"touchend":"mouseup",{handler:e=>this.pointerUp.next(e),options:!0}).set("scroll",{handler:e=>this.scroll.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ve}),e||this._globalListeners.set("mousemove",{handler:e=>this.pointerMove.next(e),options:ve}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,t)=>{this._document.addEventListener(t,e.handler,e.options)})})}}stopDragging(e){const t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(p.DOCUMENT))},e.\u0275prov=(0,i.\u0275\u0275defineInjectable)({factory:function(){return new e((0,i.\u0275\u0275inject)(i.NgZone),(0,i.\u0275\u0275inject)(p.DOCUMENT))},token:e,providedIn:"root"}),e})();const be={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Se=(()=>{class e{constructor(e,t,n,i){this._document=e,this._ngZone=t,this._viewportRuler=n,this._dragDropRegistry=i}createDrag(e,t=be){return new ne(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new ue(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(p.DOCUMENT),i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(T.rL),i.\u0275\u0275inject(ye))},e.\u0275prov=(0,i.\u0275\u0275defineInjectable)({factory:function(){return new e((0,i.\u0275\u0275inject)(p.DOCUMENT),(0,i.\u0275\u0275inject)(i.NgZone),(0,i.\u0275\u0275inject)(T.rL),(0,i.\u0275\u0275inject)(ye))},token:e,providedIn:"root"}),e})();const Ce=new i.InjectionToken("CDK_DRAG_PARENT"),we=new i.InjectionToken("CdkDropListGroup"),xe=new i.InjectionToken("CDK_DRAG_CONFIG");let Ie=0;const Ee=new i.InjectionToken("CdkDropList");let _e=(()=>{class e{constructor(t,n,o,s,a,l,c){this.element=t,this._changeDetectorRef=o,this._scrollDispatcher=s,this._dir=a,this._group=l,this._destroyed=new r.Subject,this.connectedTo=[],this.id="cdk-drop-list-"+Ie++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new i.EventEmitter,this.entered=new i.EventEmitter,this.exited=new i.EventEmitter,this.sorted=new i.EventEmitter,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(e,t)=>this.enterPredicate(e.data,t.data),this._dropListRef.sortPredicate=(e,t,n)=>this.sortPredicate(e,t.data,n.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),l&&l._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=(0,g.Ig)(e)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,o.startWith)(this._dir.value),(0,o.takeUntil)(this._destroyed)).subscribe(e=>t.withDirection(e)),t.beforeStarted.subscribe(()=>{const n=(0,g.Eq)(this.connectedTo).map(t=>"string"==typeof t?e._dropLists.find(e=>e.id===t):t);if(this._group&&this._group._items.forEach(e=>{-1===n.indexOf(e)&&n.push(e)}),!this._scrollableParentsResolved){const e=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(e=>e.getElementRef().nativeElement);this._dropListRef.withScrollableParents(e),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,g.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,g.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,g.su)(this.autoScrollStep,2),t.connectedTo(n.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:t,draggingDisabled:n,sortingDisabled:i,listAutoScrollDisabled:r,listOrientation:o}=e;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=r&&r,this.orientation=o||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(Se),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(T.mF),i.\u0275\u0275directiveInject(P.Is,8),i.\u0275\u0275directiveInject(we,12),i.\u0275\u0275directiveInject(xe,8))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(i.\u0275\u0275attribute("id",t.id),i.\u0275\u0275classProp("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[i.\u0275\u0275ProvidersFeature([{provide:we,useValue:void 0},{provide:Ee,useExisting:e}])]}),e._dropLists=[],e})();const Me=new i.InjectionToken("CdkDragHandle"),je=new i.InjectionToken("CdkDragPlaceholder"),ke=new i.InjectionToken("CdkDragPreview");let Le=(()=>{class e{constructor(t,n,s,a,l,c,d,u,p,h,m){this.element=t,this.dropContainer=n,this._ngZone=a,this._viewContainerRef=l,this._dir=d,this._changeDetectorRef=p,this._selfHandle=h,this._parentDrag=m,this._destroyed=new r.Subject,this.started=new i.EventEmitter,this.released=new i.EventEmitter,this.ended=new i.EventEmitter,this.entered=new i.EventEmitter,this.exited=new i.EventEmitter,this.dropped=new i.EventEmitter,this.moved=new r.Observable(e=>{const t=this._dragRef.moved.pipe((0,o.map)(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{t.unsubscribe()}}),this._dragRef=u.createDrag(t,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:null==c?void 0:c.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),c&&this._assignDefaults(c),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=(0,g.Ig)(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.pipe((0,o.take)(1),(0,o.takeUntil)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe((0,o.startWith)(this._handles),(0,o.tap)(e=>{const t=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),(0,o.switchMap)(e=>(0,r.merge)(...e.map(e=>e._stateChanges.pipe((0,o.startWith)(e))))),(0,o.takeUntil)(this._destroyed)).subscribe(e=>{const t=this._dragRef,n=e.element.nativeElement;e.disabled?t.disableHandle(n):t.enableHandle(n)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=e._dragInstances.indexOf(this);t>-1&&e._dragInstances.splice(t,1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,t=this.rootElementSelector?Fe(e,this.rootElementSelector):e;this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?Fe(this.element.nativeElement,e):(0,g.fI)(e):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const e=this._dir,n=this.dragStartDelay,i=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,r=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof n&&n?n:(0,g.su)(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(i).withPreviewTemplate(r),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe((0,o.take)(1)).subscribe(()=>{var n,i;if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(null===(n=r.classList)||void 0===n?void 0:n.contains("cdk-drag")){t.withParent((null===(i=e._dragInstances.find(e=>e.element.nativeElement===r))||void 0===i?void 0:i._dragRef)||null);break}r=r.parentElement}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance})})}_assignDefaults(e){const{lockAxis:t,dragStartDelay:n,constrainPosition:i,previewClass:r,boundaryElement:o,draggingDisabled:s,rootElementSelector:a}=e;this.disabled=null!=s&&s,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),r&&(this.previewClass=r),o&&(this.boundaryElement=o),a&&(this.rootElementSelector=a)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(Ee,12),i.\u0275\u0275directiveInject(p.DOCUMENT),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(xe,8),i.\u0275\u0275directiveInject(P.Is,8),i.\u0275\u0275directiveInject(Se),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Me,10),i.\u0275\u0275directiveInject(Ce,12))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){if(1&e&&(i.\u0275\u0275contentQuery(n,ke,5),i.\u0275\u0275contentQuery(n,je,5),i.\u0275\u0275contentQuery(n,Me,5)),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t._previewTemplate=e.first),i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t._placeholderTemplate=e.first),i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t._handles=e)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&i.\u0275\u0275classProp("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[i.\u0275\u0275ProvidersFeature([{provide:Ce,useExisting:e}]),i.\u0275\u0275NgOnChangesFeature]}),e._dragInstances=[],e})();function Fe(e,t){let n=e.parentElement;for(;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}let Oe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[Se],imports:[T.ZD]}),e})();var De=n(61059),Ae=n(82801);function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var Re={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},Te=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(Re)};function Pe(e){return"number"==typeof e}function Be(e){return!(!e||"object"!=typeof e||"function"!=typeof e.constructor)&&(!0===e.isBigNumber&&"object"==typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"==typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function $e(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function Ve(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function ze(e){return e&&!0===e.constructor.prototype.isUnit||!1}function Ue(e){return"string"==typeof e}Ne(Te,Re,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var Ke=Array.isArray;function Ze(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function Ge(e){return Array.isArray(e)||Ze(e)}function He(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function We(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function qe(e){return e&&!0===e.constructor.prototype.isRange||!1}function Qe(e){return e&&!0===e.constructor.prototype.isIndex||!1}function Ye(e){return"boolean"==typeof e}function Xe(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function Je(e){return e&&!0===e.constructor.prototype.isHelp||!1}function et(e){return"function"==typeof e}function tt(e){return e instanceof Date}function nt(e){return e instanceof RegExp}function it(e){return!(!e||"object"!=typeof e||e.constructor!==Object||$e(e)||Ve(e))}function rt(e){return null===e}function ot(e){return void 0===e}function st(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function at(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function lt(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function ct(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function dt(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function ut(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function pt(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function ht(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function mt(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function ft(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function gt(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function vt(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function yt(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function bt(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function St(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function Ct(e){return e&&!0===e.constructor.prototype.isChain||!1}function wt(e){var t=typeof e;return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":Be(e)?"BigNumber":$e(e)?"Complex":Ve(e)?"Fraction":Ze(e)?"Matrix":ze(e)?"Unit":Qe(e)?"Index":qe(e)?"Range":Xe(e)?"ResultSet":ft(e)?e.type:Ct(e)?"Chain":Je(e)?"Help":"Object":"function"===t?"Function":t}function xt(e){var t=typeof e;if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map(function(e){return xt(e)});if(e instanceof Date)return new Date(e.valueOf());if(Be(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return function(e,t){var n={};for(var i in e)_t(e,i)&&(n[i]=t(e[i]));return n}(e,xt)}function It(e,t){for(var n in t)_t(t,n)&&(e[n]=t[n]);return e}function Et(e,t){var n,i,r;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(i=0,r=e.length;i<r;i++)if(!Et(e[i],t[i]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Et(e[n],t[n]))return!1;for(n in t)if(!(n in e)||!Et(e[n],t[n]))return!1;return!0}return e===t}function _t(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Mt(e,t,n,i){function r(i){var r=function(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i],o=e[r];void 0!==o&&(n[r]=o)}return n}(i,t.map(jt));return function(e,t,n){if(!t.filter(e=>!function(e){return e&&"?"===e[0]}(e)).every(e=>void 0!==n[e])){var i=t.filter(e=>void 0===n[e]);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(e=>'"'.concat(e,'"')).join(", "),"."))}}(e,t,i),n(r)}return r.isFactory=!0,r.fn=e,r.dependencies=t.slice().sort(),i&&(r.meta=i),r}function jt(e){return e&&"?"===e[0]?e.slice(1):e}var kt=n(25346);function Lt(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}Math,Math,Math,Math,Math,Math;function Ft(e,t,n){var i={2:"0b",8:"0o",16:"0x"}[t],r="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Lt(n))throw new Error("size must be an integer");if(e>to(2,n-1)-1||e<-to(2,n-1))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Lt(e))throw new Error("Value must be an integer");e<0&&(e+=to(2,n)),r="i".concat(n)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(i).concat(e.toString(t)).concat(r)}function Ot(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var n,i,r="auto";if(t&&(t.notation&&(r=t.notation),Pe(t)?n=t:Pe(t.precision)&&(n=t.precision),t.wordSize&&"number"!=typeof(i=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return At(e,n);case"exponential":return Nt(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Rt(Dt(e),t),i=n.exponent,r=n.coefficients,o=i%3==0?i:i<0?i-3-i%3:i-i%3;if(Pe(t))for(;t>r.length||i-o+1>r.length;)r.push(0);else for(var s=Math.abs(i-o)-(r.length-1),a=0;a<s;a++)r.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var d=r.slice(c).join(""),u=Pe(t)&&d.length||d.match(/[1-9]/)?"."+d:"",p=r.slice(0,c).join("")+u+"e"+(i>=0?"+":"")+o.toString();return n.sign+p}(e,n);case"bin":return Ft(e,2,i);case"oct":return Ft(e,8,i);case"hex":return Ft(e,16,i);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var i=n&&void 0!==n.lowerExp?n.lowerExp:-3,r=n&&void 0!==n.upperExp?n.upperExp:5,o=Dt(e),s=t?Rt(o,t):o;if(s.exponent<i||s.exponent>=r)return Nt(e,t);var a=s.coefficients,l=s.exponent;a.length<t&&(a=a.concat(Tt(t-a.length))),a=a.concat(Tt(l-a.length+1+(a.length<t?t-a.length:0)));var c=l>0?l:0;return c<(a=Tt(-l).concat(a)).length-1&&a.splice(c+1,0,"."),s.sign+a.join("")}(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Dt(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],i=t[2],r=parseFloat(t[4]||"0"),o=i.indexOf(".");r+=-1!==o?o-1:i.length-1;var s=i.replace(".","").replace(/^0*/,function(e){return r-=e.length,""}).replace(/0*$/,"").split("").map(function(e){return parseInt(e)});return 0===s.length&&(s.push(0),r++),{sign:n,coefficients:s,exponent:r}}function At(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Dt(e),i="number"==typeof t?Rt(n,n.exponent+1+t):n,r=i.coefficients,o=i.exponent+1,s=o+(t||0);return r.length<s&&(r=r.concat(Tt(s-r.length))),o<0&&(r=Tt(1-o).concat(r),o=1),o<r.length&&r.splice(o,0,0===o?"0.":"."),i.sign+r.join("")}function Nt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Dt(e),i=t?Rt(n,t):n,r=i.coefficients,o=i.exponent;r.length<t&&(r=r.concat(Tt(t-r.length)));var s=r.shift();return i.sign+s+(r.length>0?"."+r.join(""):"")+"e"+(o>=0?"+":"")+o}function Rt(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=n.coefficients;t<=0;)i.unshift(0),n.exponent++,t++;if(i.length>t&&i.splice(t,i.length-t)[0]>=5){var r=t-1;for(i[r]++;10===i[r];)i.pop(),0===r&&(i.unshift(0),n.exponent++,r++),i[--r]++}return n}function Tt(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}var Pt=Number.EPSILON||2220446049250313e-31;function Bt(e,t,n){if(null==n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var i=Math.abs(e-t);return i<Pt||i<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}Math,Math,Math,Math,Math;var $t=(Math,Mt("Complex",[],()=>(kt.prototype.type="Complex",kt.prototype.isComplex=!0,kt.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},kt.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},kt.prototype.format=function(e){var t=this.im,n=this.re,i=Ot(this.re,e),r=Ot(this.im,e),o=Pe(e)?e:e?e.precision:null;if(null!==o){var s=Math.pow(10,-o);Math.abs(n/t)<s&&(n=0),Math.abs(t/n)<s&&(t=0)}return 0===t?i:0===n?1===t?"i":-1===t?"-i":r+"i":t<0?-1===t?i+" - i":i+" - "+r.substring(1)+"i":1===t?i+" + i":i+" + "+r+"i"},kt.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return kt(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],i=arguments[1];if(Pe(n)){if(ze(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),Pe(i))return new kt({r:n,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},kt.prototype.valueOf=kt.prototype.toString,kt.fromJSON=function(e){return new kt(e)},kt.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},kt),{isClass:!0}));function Vt(e){var t=0,n=1,i=Object.create(null),r=Object.create(null),o=0,s=function(e){var s=r[e];if(s&&(delete i[s],delete r[e],--t,n===s)){if(!t)return o=0,void(n=1);for(;!hasOwnProperty.call(i,++n););}};return e=Math.abs(e),{hit:function(a){var l=r[a],c=++o;if(i[c]=a,r[a]=c,!l)return++t<=e?void 0:(s(a=i[n]),a);if(delete i[l],n===l)for(;!hasOwnProperty.call(i,++n););},delete:s,clear:function(){t=o=0,n=1,i=Object.create(null),r=Object.create(null)}}}function zt(e){var{hasher:t,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=null==n?Number.POSITIVE_INFINITY:n,t=null==t?JSON.stringify:t,function i(){"object"!=typeof i.cache&&(i.cache={values:new Map,lru:Vt(n||Number.POSITIVE_INFINITY)});for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s=t(r);if(i.cache.values.has(s))return i.cache.lru.hit(s),i.cache.values.get(s);var a=e.apply(e,r);return i.cache.values.set(s,a),i.cache.values.delete(i.cache.lru.hit(s)),a}}zt(function(e){return new e(1).exp()},{hasher:Kt}),zt(function(e){return new e(1).plus(new e(5).sqrt()).div(2)},{hasher:Kt});var Ut=zt(function(e){return e.acos(-1)},{hasher:Kt});function Kt(e){return e[0].precision}zt(function(e){return Ut(e).times(2)},{hasher:Kt}),Math,Math,Math;var Zt=n(96641),Gt=Mt("BigNumber",["?on","config"],e=>{var{on:t,config:n}=e,i=Zt.clone({precision:n.precision,modulo:Zt.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(e){return new i(e.value)},t&&t("config",function(e,t){e.precision!==t.precision&&i.config({precision:e.precision})}),i},{isClass:!0}),Ht=Mt("Matrix",[],()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function Wt(e,t){return Mt(e,["config","BigNumber"],e=>{var{config:n,BigNumber:i}=e;return"BigNumber"===n.number?new i(t):t})}Wt("fineStructure",.0072973525693),Wt("weakMixingAngle",.2229),Wt("efimovFactor",22.7),Wt("sackurTetrode",-1.16487052358);var qt=n(9469),Qt=Mt("Fraction",[],()=>(qt.prototype.type="Fraction",qt.prototype.isFraction=!0,qt.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},qt.fromJSON=function(e){return new qt(e)},qt),{isClass:!0});function Yt(e,t,n){var i=new(0,e.constructor)(2),r="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Lt(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),r="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(r);case 8:return"".concat(e.toOctal()).concat(r);case 16:return"".concat(e.toHexadecimal()).concat(r);default:throw new Error("Base ".concat(t," not supported "))}}function Xt(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function Jt(e,t){return"number"==typeof e?Ot(e,t):Be(e)?function(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n,i,r="auto";if(void 0!==t&&(t.notation&&(r=t.notation),"number"==typeof t?n=t:t.precision&&(n=t.precision),t.wordSize&&"number"!=typeof(i=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return function(e,t){return e.toFixed(t)}(e,n);case"exponential":return Xt(e,n);case"engineering":return function(e,t){var n=e.e,i=n%3==0?n:n<0?n-3-n%3:n-n%3,r=e.mul(Math.pow(10,-i)),o=r.toPrecision(t);return-1!==o.indexOf("e")&&(o=r.toString()),o+"e"+(n>=0?"+":"")+i.toString()}(e,n);case"bin":return Yt(e,2,i);case"oct":return Yt(e,8,i);case"hex":return Yt(e,16,i);case"auto":var o=t&&void 0!==t.lowerExp?t.lowerExp:-3,s=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var a=e.toSignificantDigits(n),l=a.e;return(l>=o&&l<s?a.toFixed():Xt(e,n)).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(e,t):function(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?en(e,t):Ue(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"==typeof e?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map(n=>'"'+n+'": '+Jt(e[n],t)).join(", ")+"}":String(e)}function en(e,t){if(Array.isArray(e)){for(var n="[",i=e.length,r=0;r<i;r++)0!==r&&(n+=", "),n+=en(e[r],t);return n+"]"}return Jt(e,t)}function tn(e,t,n){if(!(this instanceof tn))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function nn(e,t,n){if(!(this instanceof nn))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function rn(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function on(e,t,n){var i,r=e.length;if(r!==t[n])throw new tn(r,t[n]);if(n<t.length-1){var o=n+1;for(i=0;i<r;i++){if(!Array.isArray(e[i]))throw new tn(t.length-1,t.length,"<");on(e[i],t,o)}}else for(i=0;i<r;i++)if(Array.isArray(e[i]))throw new tn(t.length+1,t.length,">")}function sn(e,t){if(0===t.length){if(Array.isArray(e))throw new tn(e.length,0)}else on(e,t,0)}function an(e,t){if(!Pe(e)||!Lt(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new nn(e,t)}function ln(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach(function(e){if(!Pe(e)||!Lt(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Jt(t)+")")}),cn(e,t,0,void 0!==n?n:0),e}function cn(e,t,n,i){var r,o,s=t[n],a=Math.min(e.length,s);if(e.length=s,n<t.length-1){var l=n+1;for(r=0;r<a;r++)o=e[r],Array.isArray(o)||(e[r]=o=[o]),cn(o,t,l,i);for(r=a;r<s;r++)e[r]=o=[],cn(o,t,l,i)}else{for(r=0;r<a;r++)for(;Array.isArray(e[r]);)e[r]=e[r][0];for(r=a;r<s;r++)e[r]=i}}function dn(e,t){var n=function(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function e(n){Array.isArray(n)?n.forEach(e):t.push(n)}),t}(e),i=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new tn(0,i,"!=");var r=pn(t=un(t,i));if(i!==r)throw new tn(r,i,"!=");try{return function(e,t){for(var n,i=e,r=t.length-1;r>0;r--){var o=t[r];n=[];for(var s=i.length/o,a=0;a<s;a++)n.push(i.slice(a*o,(a+1)*o));i=n}return i}(n,t)}catch(o){throw o instanceof tn?new tn(r,i,"!="):o}}function un(e,t){var n=pn(e),i=e.slice(),r=e.indexOf(-1);if(e.indexOf(-1,r+1)>=0)throw new Error("More than one wildcard in sizes");if(r>=0){if(t%n!=0)throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);i[r]=-t/n}return i}function pn(e){return e.reduce((e,t)=>e*t,1)}function hn(e,t,n,i){var r=i||rn(e);if(n)for(var o=0;o<n;o++)e=[e],r.unshift(1);for(e=mn(e,t,0);r.length<t;)r.push(1);return e}function mn(e,t,n){var i,r;if(Array.isArray(e)){var o=n+1;for(i=0,r=e.length;i<r;i++)e[i]=mn(e[i],t,o)}else for(var s=n;s<t;s++)e=[e];return e}function fn(e,t){for(var n,i=0,r=0;r<e.length;r++){var o=e[r],s=Array.isArray(o);if(0===r&&s&&(i=o.length),s&&o.length!==i)return;var a=s?fn(o,t):t(o);if(void 0===n)n=a;else if(n!==a)return"mixed"}return n}(tn.prototype=new RangeError).constructor=RangeError,tn.prototype.name="DimensionError",tn.prototype.isDimensionError=!0,(nn.prototype=new RangeError).constructor=RangeError,nn.prototype.name="IndexError",nn.prototype.isIndexError=!0;var gn=Mt("DenseMatrix",["Matrix"],e=>{var{Matrix:t}=e;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Ue(t))throw new Error("Invalid datatype: "+t);if(Ze(e))"DenseMatrix"===e.type?(this._data=xt(e._data),this._size=xt(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&Ke(e.data)&&Ke(e.size))this._data=e.data,this._size=e.size,sn(this._data,this._size),this._datatype=t||e.datatype;else if(Ke(e))this._data=c(e),this._size=rn(this._data),sn(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+wt(e)+")");this._data=[],this._size=[0],this._datatype=t}}function i(e,t){if(!Qe(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var i=t.size();if(i.length!==e._size.length)throw new tn(i.length,e._size.length);for(var o=t.min(),s=t.max(),a=0,l=e._size.length;a<l;a++)an(o[a],e._size[a]),an(s[a],e._size[a]);return new n(r(e._data,t,i.length,0),e._datatype)}function r(e,t,n,i){var o=i===n-1,s=t.dimension(i);return o?s.map(function(t){return an(t,e.length),e[t]}).valueOf():s.map(function(o){return an(o,e.length),r(e[o],t,n,i+1)}).valueOf()}function o(e,t,n,i){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var r,o=t.size(),a=t.isScalar();if(Ze(n)?(r=n.size(),n=n.valueOf()):r=rn(n),a){if(0!==r.length)throw new TypeError("Scalar expected");e.set(t.min(),n,i)}else{if(o.length<e._size.length)throw new tn(o.length,e._size.length,"<");if(r.length<o.length){for(var c=0,d=0;1===o[c]&&1===r[c];)c++;for(;1===o[c];)d++,c++;n=hn(n,o.length,d,r)}if(!Et(o,r))throw new tn(o,r,">");l(e,t.max().map(function(e){return e+1}),i),s(e._data,t,n,o.length,0)}return e}function s(e,t,n,i,r){var o=r===i-1;t.dimension(r).forEach(o?function(t,i){an(t),e[t]=n[i[0]]}:function(o,a){an(o),s(e[o],t,n[a[0]],i,r+1)})}function a(e,t,n){if(0===t.length){for(var i=e._data;Ke(i);)i=i[0];return i}return e._size=t.slice(0),e._data=ln(e._data,e._size,n),e}function l(e,t,n){for(var i=e._size.slice(0),r=!1;i.length<t.length;)i.push(0),r=!0;for(var o=0,s=t.length;o<s;o++)t[o]>i[o]&&(i[o]=t[o],r=!0);r&&a(e,i,n)}function c(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];Ke(i)?e[t]=c(i):i&&!0===i.isMatrix&&(e[t]=c(i.valueOf()))}return e}return(n.prototype=new t).createDenseMatrix=function(e,t){return new n(e,t)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return fn(this._data,wt)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return i(this,e);case 2:case 3:return o(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!Ke(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new tn(e.length,this._size.length);for(var t=0;t<e.length;t++)an(e[t],this._size[t]);for(var n=this._data,i=0,r=e.length;i<r;i++){var o=e[i];an(o,n.length),n=n[o]}return n},n.prototype.set=function(e,t,n){if(!Ke(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new tn(e.length,this._size.length,"<");var i,r,o;l(this,e.map(function(e){return e+1}),n);var s=this._data;for(i=0,r=e.length-1;i<r;i++)an(o=e[i],s.length),s=s[o];return an(o=e[e.length-1],s.length),s[o]=t,this},n.prototype.resize=function(e,t,n){if(!Ge(e))throw new TypeError("Array or Matrix expected");var i=e.valueOf().map(e=>Array.isArray(e)&&1===e.length?e[0]:e);return a(n?this.clone():this,i,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;n._data=dn(n._data,e);var i=n._size.reduce((e,t)=>e*t);return n._size=un(e,i),n},n.prototype.clone=function(){return new n({data:xt(this._data),size:xt(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e){var t=this,i=function n(i,r){return Ke(i)?i.map(function(e,t){return n(e,r.concat(t))}):e(i,r,t)}(this._data,[]);return new n(i,void 0!==this._datatype?fn(i,wt):void 0)},n.prototype.forEach=function(e){var t=this;!function n(i,r){Ke(i)?i.forEach(function(e,t){n(e,r.concat(t))}):e(i,r,t)}(this._data,[])},n.prototype[Symbol.iterator]=function*(){yield*function*e(t,n){if(Ke(t))for(var i=0;i<t.length;i++)yield*e(t[i],n.concat(i));else yield{value:t,index:n}}(this._data,[])},n.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var t=this._data;for(var i of t)e.push(new n([i],this._datatype));return e},n.prototype.columns=function(){var e=this,t=[],i=this.size();if(2!==i.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var r=this._data,o=function(i){var o=r.map(e=>[e[i]]);t.push(new n(o,e._datatype))},s=0;s<i[1];s++)o(s);return t},n.prototype.toArray=function(){return xt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return Jt(this._data,e)},n.prototype.toString=function(){return Jt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(Be(e)&&(e=e.toNumber()),!Pe(e)||!Lt(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,i=e<0?-e:0,r=Math.min(this._size[0]-i,this._size[1]-t),o=[],s=0;s<r;s++)o[s]=this._data[s+i][s+t];return new n({data:o,size:[r],datatype:this._datatype})},n.diagonal=function(e,t,i,r){if(!Ke(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(Be(e)&&(e=e.toNumber()),!Pe(e)||!Lt(e)||e<1)throw new Error("Size values must be positive integers");return e}),i){if(Be(i)&&(i=i.toNumber()),!Pe(i)||!Lt(i))throw new TypeError("The parameter k must be an integer number")}else i=0;var o,s=i>0?i:0,a=i<0?-i:0,l=e[0],c=e[1],d=Math.min(l-a,c-s);if(Ke(t)){if(t.length!==d)throw new Error("Invalid value array length");o=function(e){return t[e]}}else if(Ze(t)){var u=t.size();if(1!==u.length||u[0]!==d)throw new Error("Invalid matrix length");o=function(e){return t.get([e])}}else o=function(){return t};r||(r=Be(o(0))?o(0).mul(0):0);var p=[];if(e.length>0){p=ln(p,e,r);for(var h=0;h<d;h++)p[h+a][h+s]=o(h)}return new n({data:p,size:[l,c]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!(Pe(e)&&Lt(e)&&Pe(t)&&Lt(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return an(e,this._size[0]),an(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var i=n[e];n[e]=n[t],n[t]=i},n},{isClass:!0}),vn=n(11805);function yn(e,t){if(Sn(e)&&bn(e,t))return e[t];throw"function"==typeof e[t]&&function(e,t){return!(null==e||"function"!=typeof e[t]||_t(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)||!_t(wn,t)&&(t in Object.prototype||t in Function.prototype))}(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function bn(e,t){return!(!e||"object"!=typeof e||!_t(Cn,t)&&(t in Object.prototype||t in Function.prototype))}function Sn(e){return"object"==typeof e&&e&&e.constructor===Object}var Cn={length:!0,name:!0},wn={toString:!0,valueOf:!0,toLocaleString:!0};function xn(e){return!!e&&(e instanceof Map||e instanceof class{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return yn(this.wrappedObject,e)}set(e,t){return function(e,t,n){if(Sn(e)&&bn(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}(this.wrappedObject,e,t),this}has(e){return function(e,t){return t in e}(this.wrappedObject,e)}}||"function"==typeof e.set&&"function"==typeof e.get&&"function"==typeof e.keys&&"function"==typeof e.has)}var In=function(){return In=vn.create,vn},En=Mt("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:r}=e,o=In();return o.types=[{name:"number",test:Pe},{name:"Complex",test:$e},{name:"BigNumber",test:Be},{name:"Fraction",test:Ve},{name:"Unit",test:ze},{name:"string",test:Ue},{name:"Chain",test:Ct},{name:"Array",test:Ke},{name:"Matrix",test:Ze},{name:"DenseMatrix",test:He},{name:"SparseMatrix",test:We},{name:"Range",test:qe},{name:"Index",test:Qe},{name:"boolean",test:Ye},{name:"ResultSet",test:Xe},{name:"Help",test:Je},{name:"function",test:et},{name:"Date",test:tt},{name:"RegExp",test:nt},{name:"null",test:rt},{name:"undefined",test:ot},{name:"AccessorNode",test:st},{name:"ArrayNode",test:at},{name:"AssignmentNode",test:lt},{name:"BlockNode",test:ct},{name:"ConditionalNode",test:dt},{name:"ConstantNode",test:ut},{name:"FunctionNode",test:ht},{name:"FunctionAssignmentNode",test:pt},{name:"IndexNode",test:mt},{name:"Node",test:ft},{name:"ObjectNode",test:gt},{name:"OperatorNode",test:vt},{name:"ParenthesisNode",test:yt},{name:"RangeNode",test:bt},{name:"SymbolNode",test:St},{name:"Map",test:xn},{name:"Object",test:it}],o.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||_n(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||Mn(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||Mn(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||Mn(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){r||jn(e);var t=new r(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||_n(e);try{return new t(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){r||jn(e);try{return new r(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||Mn(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||_n(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return r||jn(e),new r(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return i||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new i(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],o});function _n(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Mn(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function jn(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}function kn(e,t,n){return e&&"function"==typeof e.map?e.map(function(e){return kn(e,t,n)}):t(e)}function Ln(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var i=e.minus(t).abs();if(i.isZero())return!0;var r=e.constructor.max(e.abs(),t.abs());return i.lte(r.times(n))}return!1}var Fn="equalScalar",On=Mt(Fn,["typed","config"],e=>{var{typed:t,config:n}=e;return t(Fn,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return Bt(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||Ln(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n){return Bt(e.re,t.re,n)&&Bt(e.im,t.im,n)}(e,t,n.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)}})});Mt(Fn,["typed","config"],e=>{var{typed:t,config:n}=e;return t(Fn,{"number, number":function(e,t){return Bt(e,t,n.epsilon)}})});var Dn=Mt("number",["typed"],e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=function(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return t?{input:e,radix:{"0b":2,"0o":8,"0x":16}[t[1]],integerPart:t[2],fractionalPart:t[3]}:null}(e);if(t)return function(e){for(var t=parseInt(e.integerPart,e.radix),n=0,i=0;i<e.fractionalPart.length;i++)n+=parseInt(e.fractionalPart[i],e.radix)/Math.pow(e.radix,i+1);var r=t+n;if(isNaN(r))throw new SyntaxError('String "'+e.input+'" is no valid number');return r}(t);var n=0,i=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);i&&(n=Number(i[2]),e=i[1]);var r=Number(e);if(isNaN(r))throw new SyntaxError('String "'+e+'" is no valid number');if(i){if(r>to(2,n)-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));r>=to(2,n-1)&&(r-=to(2,n))}return r},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return kn(e,this)}});return n.fromJSON=function(e){return parseFloat(e.value)},n}),An="number",Nn="number, number";function Rn(e){return Math.abs(e)}function Tn(e,t){return e+t}function Pn(e,t){return e*t}function Bn(e){return-e}function $n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(At(e,t))}Rn.signature=An,Tn.signature=Nn,Pn.signature=Nn,Bn.signature=An,$n.signature=Nn;var Vn=Mt("multiplyScalar",["typed"],e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":Pn,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):this(n.value,e),n},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):this(n.value,t),n},"Unit, Unit":function(e,t){return e.multiply(t)}})});Math.pow(2,53),Mt("oct",["typed","format"],e=>{var{typed:t,format:n}=e;return t("oct",{"number | BigNumber":function(e){return n(e,{notation:"oct"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"oct",wordSize:t})}})});n(61396);Date.now();var zn=Mt("fraction",["typed","Fraction"],e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Object:function(e){return new n(e)},"Array | Matrix":function(e){return kn(e,this)}})}),Un="unaryMinus",Kn=Mt(Un,["typed"],e=>{var{typed:t}=e;return t(Un,{number:Bn,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=this(e.value),t},"Array | Matrix":function(e){return kn(e,this,!0)}})}),Zn="addScalar",Gn=Mt(Zn,["typed"],e=>{var{typed:t}=e;return t(Zn,{"number, number":Tn,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n}})}),Hn=Mt("conj",["typed"],e=>{var{typed:t}=e;return t("conj",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return kn(e,this)}})});Mt("bin",["typed","format"],e=>{var{typed:t,format:n}=e;return t("bin",{"number | BigNumber":function(e){return n(e,{notation:"bin"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"bin",wordSize:t})}})});var Wn=Mt("SparseMatrix",["typed","equalScalar","Matrix"],e=>{var{typed:t,equalScalar:n,Matrix:i}=e;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Ue(t))throw new Error("Invalid datatype: "+t);if(Ze(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?xt(t._values):void 0,e._index=xt(t._index),e._ptr=xt(t._ptr),e._size=xt(t._size),e._datatype=n||t._datatype):o(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&Ke(e.index)&&Ke(e.ptr)&&Ke(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(Ke(e))o(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+wt(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function o(e,i,r){e._values=[],e._index=[],e._ptr=[],e._datatype=r;var o=i.length,s=0,a=n,l=0;if(Ue(r)&&(a=t.find(n,[r,r])||n,l=t.convert(0,r)),o>0){var c=0;do{e._ptr.push(e._index.length);for(var d=0;d<o;d++){var u=i[d];if(Ke(u)){if(0===c&&s<u.length&&(s=u.length),c<u.length){var p=u[c];a(p,l)||(e._values.push(p),e._index.push(d))}}else 0===c&&s<1&&(s=1),a(u,l)||(e._values.push(u),e._index.push(d))}c++}while(c<s)}e._ptr.push(e._index.length),e._size=[o,s]}function s(e,t){if(!Qe(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n=t.size();if(n.length!==e._size.length)throw new tn(n.length,e._size.length);var i,o,s,a,l=t.min(),c=t.max();for(i=0,o=e._size.length;i<o;i++)an(l[i],e._size[i]),an(c[i],e._size[i]);var d=e._values,u=e._index,p=e._ptr,h=t.dimension(0),m=t.dimension(1),f=[],g=[];h.forEach(function(e,t){g[e]=t[0],f[e]=!0});var v=d?[]:void 0,y=[],b=[];return m.forEach(function(e){for(b.push(y.length),s=p[e],a=p[e+1];s<a;s++)!0===f[i=u[s]]&&(y.push(g[i]),v&&v.push(d[s]))}),b.push(y.length),new r({values:v,index:y,ptr:b,size:n,datatype:e._datatype})}function a(e,t,n,i){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var r,o=t.size(),s=t.isScalar();if(Ze(n)?(r=n.size(),n=n.toArray()):r=rn(n),s){if(0!==r.length)throw new TypeError("Scalar expected");e.set(t.min(),n,i)}else{if(1!==o.length&&2!==o.length)throw new tn(o.length,e._size.length,"<");if(r.length<o.length){for(var a=0,l=0;1===o[a]&&1===r[a];)a++;for(;1===o[a];)l++,a++;n=hn(n,o.length,l,r)}if(!Et(o,r))throw new tn(o,r,">");for(var c=t.min()[0],d=t.min()[1],u=r[0],p=r[1],h=0;h<u;h++)for(var m=0;m<p;m++)e.set([h+c,m+d],n[h][m],i)}return e}function l(e,t,n,i){if(n-t==0)return n;for(var r=t;r<n;r++)if(i[r]===e)return r;return t}function c(e,t,n,i,r,o,s){r.splice(e,0,i),o.splice(e,0,t);for(var a=n+1;a<s.length;a++)s[a]++}function d(e,i,r,o){var s=o||0,a=n,l=0;Ue(e._datatype)&&(a=t.find(n,[e._datatype,e._datatype])||n,l=t.convert(0,e._datatype),s=t.convert(s,e._datatype));var c,d,u,p=!a(s,l),h=e._size[0],m=e._size[1];if(r>m){for(d=m;d<r;d++)if(e._ptr[d]=e._values.length,p)for(c=0;c<h;c++)e._values.push(s),e._index.push(c);e._ptr[r]=e._values.length}else r<m&&(e._ptr.splice(r+1,m-r),e._values.splice(e._ptr[r],e._values.length),e._index.splice(e._ptr[r],e._index.length));if(m=r,i>h){if(p){var f=0;for(d=0;d<m;d++){e._ptr[d]=e._ptr[d]+f,u=e._ptr[d+1]+f;var g=0;for(c=h;c<i;c++,g++)e._values.splice(u+g,0,s),e._index.splice(u+g,0,c),f++}e._ptr[m]=e._values.length}}else if(i<h){var v=0;for(d=0;d<m;d++){e._ptr[d]=e._ptr[d]-v;var y=e._ptr[d+1]-v;for(u=e._ptr[d];u<y;u++)(c=e._index[u])>i-1&&(e._values.splice(u,1),e._index.splice(u,1),v++)}e._ptr[d]=e._values.length}return e._size[0]=i,e._size[1]=r,e}function u(e,t,n,i,r){var o,s,a=i[0],l=i[1],c=[];for(o=0;o<a;o++)for(c[o]=[],s=0;s<l;s++)c[o][s]=0;for(s=0;s<l;s++)for(var d=n[s+1],u=n[s];u<d;u++)c[o=t[u]][s]=e?r?xt(e[u]):e[u]:1;return c}return(r.prototype=new i).createSparseMatrix=function(e,t){return new r(e,t)},r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return fn(this._values,wt)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(e,t){return new r(e,t)},r.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},r.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,e);case 2:case 3:return a(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(e){if(!Ke(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new tn(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];an(t,this._size[0]),an(n,this._size[1]);var i=l(t,this._ptr[n],this._ptr[n+1],this._index);return i<this._ptr[n+1]&&this._index[i]===t?this._values[i]:0},r.prototype.set=function(e,i,r){if(!Ke(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new tn(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var o=e[0],s=e[1],a=this._size[0],u=this._size[1],p=n,h=0;Ue(this._datatype)&&(p=t.find(n,[this._datatype,this._datatype])||n,h=t.convert(0,this._datatype)),(o>a-1||s>u-1)&&(d(this,Math.max(o+1,a),Math.max(s+1,u),r),a=this._size[0],u=this._size[1]),an(o,a),an(s,u);var m=l(o,this._ptr[s],this._ptr[s+1],this._index);return m<this._ptr[s+1]&&this._index[m]===o?p(i,h)?function(e,t,n,i,r){n.splice(e,1),i.splice(e,1);for(var o=t+1;o<r.length;o++)r[o]--}(m,s,this._values,this._index,this._ptr):this._values[m]=i:c(m,o,s,i,this._values,this._index,this._ptr),this},r.prototype.resize=function(e,t,n){if(!Ge(e))throw new TypeError("Array or Matrix expected");var i=e.valueOf().map(e=>Array.isArray(e)&&1===e.length?e[0]:e);if(2!==i.length)throw new Error("Only two dimensions matrix are supported");return i.forEach(function(e){if(!Pe(e)||!Lt(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Jt(i)+")")}),d(n?this.clone():this,i[0],i[1],t)},r.prototype.reshape=function(e,t){if(!Ke(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");e.forEach(function(t){if(!Pe(t)||!Lt(t)||t<=-2||0===t)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Jt(e)+")")});var n=this._size[0]*this._size[1];if(n!==(e=un(e,n))[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var i=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return i;for(var r=[],o=0;o<i._ptr.length;o++)for(var s=0;s<i._ptr[o+1]-i._ptr[o];s++)r.push(o);for(var a=i._values.slice(),d=i._index.slice(),u=0;u<i._index.length;u++){var p=d[u]*i._size[1]+r[u];r[u]=p%e[1],d[u]=Math.floor(p/e[1])}i._values.length=0,i._index.length=0,i._ptr.length=e[1]+1,i._size=e.slice();for(var h=0;h<i._ptr.length;h++)i._ptr[h]=0;for(var m=0;m<a.length;m++){var f=d[m],g=r[m],v=a[m];c(l(f,i._ptr[g],i._ptr[g+1],i._index),f,g,v,i._values,i._index,i._ptr)}return i},r.prototype.clone=function(){return new r({values:this._values?xt(this._values):void 0,index:xt(this._index),ptr:xt(this._ptr),size:xt(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(e,i){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var o=this;return function(e,i,o,s,a,l,c){var d=[],u=[],p=[],h=n,m=0;Ue(e._datatype)&&(h=t.find(n,[e._datatype,e._datatype])||n,m=t.convert(0,e._datatype));for(var f=function(e,t,n){e=l(e,t,n),h(e,m)||(d.push(e),u.push(t))},g=0;g<=a;g++){p.push(d.length);var v=e._ptr[g],y=e._ptr[g+1];if(c)for(var b=v;b<y;b++){var S=e._index[b];S>=0&&S<=o&&f(e._values[b],S-0,g-0)}else{for(var C={},w=v;w<y;w++)C[e._index[w]]=e._values[w];for(var x=0;x<=o;x++)f(x in C?C[x]:0,x-0,g-0)}}return p.push(d.length),new r({values:d,index:u,ptr:p,size:[o-0+1,a-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,function(t,n,i){return e(t,[n,i],o)},i)},r.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],i=this._size[1],r=0;r<i;r++){var o=this._ptr[r],s=this._ptr[r+1];if(t)for(var a=o;a<s;a++)e(this._values[a],[this._index[a],r],this);else{for(var l={},c=o;c<s;c++)l[this._index[c]]=this._values[c];for(var d=0;d<n;d++)e(d in l?l[d]:0,[d,r],this)}}},r.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var e=this._size[1],t=0;t<e;t++)for(var n=this._ptr[t+1],i=this._ptr[t];i<n;i++){var r=this._index[i];yield{value:this._values[i],index:[r,t]}}},r.prototype.toArray=function(){return u(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return u(this._values,this._index,this._ptr,this._size,!1)},r.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],i=this.density(),r="Sparse Matrix ["+Jt(t,e)+" x "+Jt(n,e)+"] density: "+Jt(i,e)+"\n",o=0;o<n;o++)for(var s=this._ptr[o+1],a=this._ptr[o];a<s;a++)r+="\n    ("+Jt(this._index[a],e)+", "+Jt(o,e)+") ==> "+(this._values?Jt(this._values[a],e):"X");return r},r.prototype.toString=function(){return Jt(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(e){if(e){if(Be(e)&&(e=e.toNumber()),!Pe(e)||!Lt(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,i=this._size[1],o=Math.min(this._size[0]-n,i-t),s=[],a=[],l=[];l[0]=0;for(var c=t;c<i&&s.length<o;c++)for(var d=this._ptr[c+1],u=this._ptr[c];u<d;u++){var p=this._index[u];if(p===c-t+n){s.push(this._values[u]),a[s.length-1]=p-n;break}}return l.push(s.length),new r({values:s,index:a,ptr:l,size:[o,1]})},r.fromJSON=function(e){return new r(e)},r.diagonal=function(e,i,o,s,a){if(!Ke(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(Be(e)&&(e=e.toNumber()),!Pe(e)||!Lt(e)||e<1)throw new Error("Size values must be positive integers");return e}),o){if(Be(o)&&(o=o.toNumber()),!Pe(o)||!Lt(o))throw new TypeError("The parameter k must be an integer number")}else o=0;var l=n,c=0;Ue(a)&&(l=t.find(n,[a,a])||n,c=t.convert(0,a));var d,u=o>0?o:0,p=o<0?-o:0,h=e[0],m=e[1],f=Math.min(h-p,m-u);if(Ke(i)){if(i.length!==f)throw new Error("Invalid value array length");d=function(e){return i[e]}}else if(Ze(i)){var g=i.size();if(1!==g.length||g[0]!==f)throw new Error("Invalid matrix length");d=function(e){return i.get([e])}}else d=function(){return i};for(var v=[],y=[],b=[],S=0;S<m;S++){b.push(v.length);var C=S-u;if(C>=0&&C<f){var w=d(C);l(w,c)||(y.push(C+p),v.push(w))}}return b.push(v.length),new r({values:v,index:y,ptr:b,size:[h,m]})},r.prototype.swapRows=function(e,t){if(!(Pe(e)&&Lt(e)&&Pe(t)&&Lt(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return an(e,this._size[0]),an(t,this._size[0]),r._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(e,t,n,i,r){for(var o=i[e+1],s=i[e];s<o;s++)r(n[s],t[s])},r._swapRows=function(e,t,n,i,r,o){for(var s=0;s<n;s++){var a=o[s],c=o[s+1],d=l(e,a,c,r),u=l(t,a,c,r);if(d<c&&u<c&&r[d]===e&&r[u]===t){if(i){var p=i[d];i[d]=i[u],i[u]=p}}else if(d<c&&r[d]===e&&(u>=c||r[u]!==t)){var h=i?i[d]:void 0;r.splice(u,0,t),i&&i.splice(u,0,h),r.splice(u<=d?d+1:d,1),i&&i.splice(u<=d?d+1:d,1)}else if(u<c&&r[u]===t&&(d>=c||r[d]!==e)){var m=i?i[u]:void 0;r.splice(d,0,e),i&&i.splice(d,0,m),r.splice(d<=u?u+1:u,1),i&&i.splice(d<=u?u+1:u,1)}}},r},{isClass:!0}),qn=Mt("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],e=>{var{typed:t,DenseMatrix:n,SparseMatrix:i}=e;return t("matrix",{"":function(){return r([])},string:function(e){return r([],e)},"string, string":function(e,t){return r([],e,t)},Array:function(e){return r(e)},Matrix:function(e){return r(e,e.storage())},"Array | Matrix, string":r,"Array | Matrix, string, string":r});function r(e,t,r){if("dense"===t||"default"===t||void 0===t)return new n(e,r);if("sparse"===t)return new i(e,r);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}}),Qn=Mt("abs",["typed"],e=>{var{typed:t}=e;return t("abs",{number:Rn,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return kn(e,this,!0)},Unit:function(e){return e.abs()}})}),Yn=Mt("algorithm01",["typed"],e=>{var{typed:t}=e;return function(e,n,i,r){var o=e._data,s=e._size,a=e._datatype,l=n._values,c=n._index,d=n._ptr,u=n._size,p=n._datatype;if(s.length!==u.length)throw new tn(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,m,f=s[0],g=s[1],v="string"==typeof a&&a===p?a:void 0,y=v?t.find(i,[v,v]):i,b=[];for(h=0;h<f;h++)b[h]=[];var S=[],C=[];for(m=0;m<g;m++){for(var w=m+1,x=d[m+1],I=d[m];I<x;I++)S[h=c[I]]=r?y(l[I],o[h][m]):y(o[h][m],l[I]),C[h]=w;for(h=0;h<f;h++)b[h][m]=C[h]===w?S[h]:o[h][m]}return e.createDenseMatrix({data:b,size:[f,g],datatype:v})}}),Xn=Mt("algorithm10",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:n}=e;return function(e,i,r,o){var s=e._values,a=e._index,l=e._ptr,c=e._size,d=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,p=c[0],h=c[1],m=r;"string"==typeof d&&(i=t.convert(i,u=d),m=t.find(r,[u,u]));for(var f=[],g=[],v=[],y=0;y<h;y++){for(var b=y+1,S=l[y+1],C=l[y];C<S;C++){var w=a[C];g[w]=s[C],v[w]=b}for(var x=0;x<p;x++)0===y&&(f[x]=[]),f[x][y]=v[x]===b?o?m(i,g[x]):m(g[x],i):i}return new n({data:f,size:[p,h],datatype:u})}}),Jn=Mt("algorithm13",["typed"],e=>{var{typed:t}=e;return function(e,i,r){var o=e._data,s=e._size,a=e._datatype,l=i._data,c=i._size,d=i._datatype,u=[];if(s.length!==c.length)throw new tn(s.length,c.length);for(var p=0;p<s.length;p++){if(s[p]!==c[p])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");u[p]=s[p]}var h,m=r;"string"==typeof a&&a===d&&(m=t.find(r,[h=a,h]));var f=u.length>0?n(m,0,u,u[0],o,l):[];return e.createDenseMatrix({data:f,size:u,datatype:h})};function n(e,t,i,r,o,s){var a=[];if(t===i.length-1)for(var l=0;l<r;l++)a[l]=e(o[l],s[l]);else for(var c=0;c<r;c++)a[c]=n(e,t+1,i,i[t+1],o[c],s[c]);return a}}),ei=Mt("algorithm14",["typed"],e=>{var{typed:t}=e;return function(e,i,r,o){var s,a=e._data,l=e._size,c=e._datatype,d=r;"string"==typeof c&&(i=t.convert(i,s=c),d=t.find(r,[s,s]));var u=l.length>0?n(d,0,l,l[0],a,i,o):[];return e.createDenseMatrix({data:u,size:xt(l),datatype:s})};function n(e,t,i,r,o,s,a){var l=[];if(t===i.length-1)for(var c=0;c<r;c++)l[c]=a?e(s,o[c]):e(o[c],s);else for(var d=0;d<r;d++)l[d]=n(e,t+1,i,i[t+1],o[d],s,a);return l}}),ti=Mt("algorithm03",["typed"],e=>{var{typed:t}=e;return function(e,n,i,r){var o=e._data,s=e._size,a=e._datatype,l=n._values,c=n._index,d=n._ptr,u=n._size,p=n._datatype;if(s.length!==u.length)throw new tn(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,m=s[0],f=s[1],g=0,v=i;"string"==typeof a&&a===p&&(g=t.convert(0,h=a),v=t.find(i,[h,h]));for(var y=[],b=0;b<m;b++)y[b]=[];for(var S=[],C=[],w=0;w<f;w++){for(var x=w+1,I=d[w+1],E=d[w];E<I;E++){var _=c[E];S[_]=r?v(l[E],o[_][w]):v(o[_][w],l[E]),C[_]=x}for(var M=0;M<m;M++)y[M][w]=C[M]===x?S[M]:r?v(g,o[M][w]):v(o[M][w],g)}return e.createDenseMatrix({data:y,size:[m,f],datatype:h})}}),ni=Mt("algorithm05",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return function(e,i,r){var o=e._values,s=e._index,a=e._ptr,l=e._size,c=e._datatype,d=i._values,u=i._index,p=i._ptr,h=i._size,m=i._datatype;if(l.length!==h.length)throw new tn(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var f,g=l[0],v=l[1],y=n,b=0,S=r;"string"==typeof c&&c===m&&(y=t.find(n,[f=c,f]),b=t.convert(0,f),S=t.find(r,[f,f]));var C,w,x,I,E=o&&d?[]:void 0,_=[],M=[],j=E?[]:void 0,k=E?[]:void 0,L=[],F=[];for(w=0;w<v;w++){M[w]=_.length;var O=w+1;for(x=a[w],I=a[w+1];x<I;x++)_.push(C=s[x]),L[C]=O,j&&(j[C]=o[x]);for(x=p[w],I=p[w+1];x<I;x++)L[C=u[x]]!==O&&_.push(C),F[C]=O,k&&(k[C]=d[x]);if(E)for(x=M[w];x<_.length;){var D=L[C=_[x]],A=F[C];if(D===O||A===O){var N=S(D===O?j[C]:b,A===O?k[C]:b);y(N,b)?_.splice(x,1):(E.push(N),x++)}}}return M[v]=_.length,e.createSparseMatrix({values:E,index:_,ptr:M,size:[g,v],datatype:f})}}),ii=Mt("algorithm11",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return function(e,i,r,o){var s=e._values,a=e._index,l=e._ptr,c=e._size,d=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,p=c[0],h=c[1],m=n,f=0,g=r;"string"==typeof d&&(m=t.find(n,[u=d,u]),f=t.convert(0,u),i=t.convert(i,u),g=t.find(r,[u,u]));for(var v=[],y=[],b=[],S=0;S<h;S++){b[S]=y.length;for(var C=l[S+1],w=l[S];w<C;w++){var x=a[w],I=o?g(i,s[w]):g(s[w],i);m(I,f)||(y.push(x),v.push(I))}}return b[h]=y.length,e.createSparseMatrix({values:v,index:y,ptr:b,size:[p,h],datatype:u})}}),ri=Mt("algorithm12",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:n}=e;return function(e,i,r,o){var s=e._values,a=e._index,l=e._ptr,c=e._size,d=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,p=c[0],h=c[1],m=r;"string"==typeof d&&(i=t.convert(i,u=d),m=t.find(r,[u,u]));for(var f=[],g=[],v=[],y=0;y<h;y++){for(var b=y+1,S=l[y+1],C=l[y];C<S;C++){var w=a[C];g[w]=s[C],v[w]=b}for(var x=0;x<p;x++)0===y&&(f[x]=[]),f[x][y]=v[x]===b?o?m(i,g[x]):m(g[x],i):o?m(i,0):m(0,i)}return new n({data:f,size:[p,h],datatype:u})}}),oi=Mt("algorithm07",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,o){var s=e._size,a=e._datatype,l=r._size,c=r._datatype;if(s.length!==l.length)throw new tn(s.length,l.length);if(s[0]!==l[0]||s[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+l+")");var d,u=s[0],p=s[1],h=0,m=o;"string"==typeof a&&a===c&&(h=t.convert(0,d=a),m=t.find(o,[d,d]));var f,g,v=[];for(f=0;f<u;f++)v[f]=[];var y=[],b=[],S=[],C=[];for(g=0;g<p;g++){var w=g+1;for(i(e,g,S,y,w),i(r,g,C,b,w),f=0;f<u;f++)v[f][g]=m(S[f]===w?y[f]:h,C[f]===w?b[f]:h)}return new n({data:v,size:[u,p],datatype:d})};function i(e,t,n,i,r){for(var o=e._values,s=e._index,a=e._ptr,l=a[t],c=a[t+1];l<c;l++){var d=s[l];n[d]=r,i[d]=o[l]}}}),si="identity",ai=Mt(si,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],e=>{var{typed:t,config:n,matrix:i,BigNumber:r,DenseMatrix:o,SparseMatrix:s}=e;return t(si,{"":function(){return"Matrix"===n.matrix?i([]):[]},string:function(e){return i(e)},"number | BigNumber":function(e){return l(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return l(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return l(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return l(e,t,n)},Array:function(e){return a(e)},"Array, string":function(e,t){return a(e,t)},Matrix:function(e){return a(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){switch(e.length){case 0:return t?i(t):[];case 1:return l(e[0],e[0],t);case 2:return l(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function l(e,t,n){var i=Be(e)||Be(t)?r:null;if(Be(e)&&(e=e.toNumber()),Be(t)&&(t=t.toNumber()),!Lt(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!Lt(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var a=i?new r(1):1,l=i?new i(0):0,c=[e,t];if(n){if("sparse"===n)return s.diagonal(c,a,0,l);if("dense"===n)return o.diagonal(c,a,0,l);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var d=ln([],c,l),u=e<t?e:t,p=0;p<u;p++)d[p][p]=a;return d}});function li(){throw new Error('No "bignumber" implementation available')}function ci(){throw new Error('No "fraction" implementation available')}var di=Mt("size",["typed","config","?matrix"],e=>{var{typed:t,config:n,matrix:i}=e;return t("size",{Matrix:function(e){return e.create(e.size())},Array:rn,string:function(e){return"Array"===n.matrix?[e.length]:i([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:i?i([]):function(){throw new Error('No "matrix" implementation available')}()}})}),ui=Mt("zeros",["typed","config","matrix","BigNumber"],e=>{var{typed:t,config:n,matrix:i,BigNumber:r}=e;return t("zeros",{"":function(){return"Array"===n.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return o(e,t)}return"Array"===n.matrix?o(e):o(e,"default")},Array:o,Matrix:function(e){var t=e.storage();return o(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return o(e.valueOf(),t)}});function o(e,t){var n=function(e){var t=!1;return e.forEach(function(e,n,i){Be(e)&&(t=!0,i[n]=e.toNumber())}),t}(e)?new r(0):0;if(function(e){e.forEach(function(e){if("number"!=typeof e||!Lt(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")})}(e),t){var o=i(t);return e.length>0?o.resize(e,n):o}var s=[];return e.length>0?ln(s,e,n):s}});function pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach(function(t){pi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Mt("hex",["typed","format"],e=>{var{typed:t,format:n}=e;return t("hex",{"number | BigNumber":function(e){return n(e,{notation:"hex"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"hex",wordSize:t})}})});var fi="Number of decimals in function round must be an integer",gi=Mt("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],e=>{var{typed:t,matrix:n,equalScalar:i,zeros:r,BigNumber:o,DenseMatrix:s}=e,a=ii({typed:t,equalScalar:i}),l=ri({typed:t,DenseMatrix:s}),c=ei({typed:t});return t("round",mi(mi({},vi),{},{Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(fi);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(fi);var n=t.toNumber();return e.round(n)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(fi);return new o(e).toDecimalPlaces(t.toNumber())},BigNumber:function(e){return e.toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(fi);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(fi);return e.round(t)},"Array | Matrix":function(e){return kn(e,this,!0)},"SparseMatrix, number | BigNumber":function(e,t){return a(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return c(e,t,this,!1)},"number | Complex | BigNumber, SparseMatrix":function(e,t){return i(e,0)?r(t.size(),t.storage()):l(t,e,this,!0)},"number | Complex | BigNumber, DenseMatrix":function(e,t){return i(e,0)?r(t.size(),t.storage()):c(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return c(n(e),t,this,!1).valueOf()},"number | Complex | BigNumber, Array":function(e,t){return c(n(t),e,this,!0).valueOf()}}))}),vi={number:$n,"number, number":function(e,t){if(!Lt(t))throw new TypeError(fi);if(t<0||t>15)throw new Error("Number of decimals in function round must be in the range of 0-15");return $n(e,t)}},yi="smaller",bi=Mt(yi,["typed","config","matrix","DenseMatrix"],e=>{var{typed:t,config:n,matrix:i,DenseMatrix:r}=e,o=ti({typed:t}),s=oi({typed:t,DenseMatrix:r}),a=ri({typed:t,DenseMatrix:r}),l=Jn({typed:t}),c=ei({typed:t});return t(yi,{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!Bt(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!Ln(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return this(i(e),t)},"Matrix, Array":function(e,t){return this(e,i(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, any":function(e,t){return c(i(e),t,this,!1).valueOf()},"any, Array":function(e,t){return c(i(t),e,this,!0).valueOf()}})}),Si=Mt("larger",["typed","config","matrix","DenseMatrix"],e=>{var{typed:t,config:n,matrix:i,DenseMatrix:r}=e,o=ti({typed:t}),s=oi({typed:t,DenseMatrix:r}),a=ri({typed:t,DenseMatrix:r}),l=Jn({typed:t}),c=ei({typed:t});return t("larger",{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!Bt(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!Ln(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return this(i(e),t)},"Matrix, Array":function(e,t){return this(e,i(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, any":function(e,t){return c(i(e),t,this,!1).valueOf()},"any, Array":function(e,t){return c(i(t),e,this,!0).valueOf()}})}),Ci="unequal",wi=(Mt(Ci,["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return t(Ci,{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})}),Mt("FibonacciHeap",["smaller","larger"],e=>{var{smaller:t,larger:n}=e,i=1/Math.log((1+Math.sqrt(5))/2);function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function o(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function s(e,t){var n=t.parent;!n||(t.mark?(o(e,t,n),s(n)):t.mark=!0)}r.prototype.type="FibonacciHeap",r.prototype.isFibonacciHeap=!0,r.prototype.insert=function(e,n){var i={key:e,value:n,degree:0};if(this._minimum){var r=this._minimum;i.left=r,i.right=r.right,r.right=i,i.right.left=i,t(e,r.key)&&(this._minimum=i)}else i.left=i,i.right=i,this._minimum=i;return this._size++,i},r.prototype.size=function(){return this._size},r.prototype.clear=function(){this._minimum=null,this._size=0},r.prototype.isEmpty=function(){return 0===this._size},r.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var r=this._minimum,o=e.degree,s=e.child;o>0;){var l=s.right;s.left.right=s.right,s.right.left=s.left,s.left=r,s.right=r.right,r.right=s,s.right.left=s,s.parent=null,s=l,o--}return e.left.right=e.right,e.right.left=e.left,r=e===e.right?null:function(e,r){var o,s=Math.floor(Math.log(r)*i)+1,l=new Array(s),c=0,d=e;if(d)for(c++,d=d.right;d!==e;)c++,d=d.right;for(;c>0;){for(var u=d.degree,p=d.right;o=l[u];){if(n(d.key,o.key)){var h=o;o=d,d=h}a(o,d),l[u]=null,u++}l[u]=d,d=p,c--}e=null;for(var m=0;m<s;m++)(o=l[m])&&(e?(o.left.right=o.right,o.right.left=o.left,o.left=e,o.right=e.right,e.right=o,o.right.left=o,t(o.key,e.key)&&(e=o)):e=o);return e}(r=e.right,this._size),this._size--,this._minimum=r,e},r.prototype.remove=function(e){this._minimum=function(e,n,i){n.key=-1;var r=n.parent;return r&&t(n.key,r.key)&&(o(e,n,r),s(e,r)),t(n.key,e.key)&&(e=n),e}(this._minimum,e),this.extractMinimum()};var a=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return r},{isClass:!0})),xi=Mt("dot",["typed","addScalar","multiplyScalar","conj","size"],e=>{var{typed:t,addScalar:n,multiplyScalar:i,conj:r,size:o}=e;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,o){var l=s(e,o),c=Ze(e)?e._data:e,d=Ze(e)?e._datatype:void 0,u=Ze(o)?o._data:o,p=Ze(o)?o._datatype:void 0,h=2===a(e).length,m=2===a(o).length,f=n,g=i;if(d&&p&&d===p&&"string"==typeof d){var v=d;f=t.find(n,[v,v]),g=t.find(i,[v,v])}if(!h&&!m){for(var y=g(r(c[0]),u[0]),b=1;b<l;b++)y=f(y,g(r(c[b]),u[b]));return y}if(!h&&m){for(var S=g(r(c[0]),u[0][0]),C=1;C<l;C++)S=f(S,g(r(c[C]),u[C][0]));return S}if(h&&!m){for(var w=g(r(c[0][0]),u[0]),x=1;x<l;x++)w=f(w,g(r(c[x][0]),u[x]));return w}if(h&&m){for(var I=g(r(c[0][0]),u[0][0]),E=1;E<l;E++)I=f(I,g(r(c[E][0]),u[E][0]));return I}},"SparseMatrix, SparseMatrix":function(e,t){s(e,t);for(var r=e._index,o=e._values,a=t._index,l=t._values,c=0,d=n,u=i,p=0,h=0;p<r.length&&h<a.length;){var m=r[p],f=a[h];m<f?p++:m>f?h++:m===f&&(c=d(c,u(o[p],l[h])),p++,h++)}return c}});function s(e,t){var n,i,r=a(e),o=a(t);if(1===r.length)n=r[0];else{if(2!==r.length||1!==r[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+r.join(", ")+")");n=r[0]}if(1===o.length)i=o[0];else{if(2!==o.length||1!==o[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+o.join(", ")+")");i=o[0]}if(n!==i)throw new RangeError("Vectors must have equal length ("+n+" != "+i+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function a(e){return Ze(e)?e.size():o(e)}}),Ii="multiply",Ei=Mt(Ii,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],e=>{var{typed:t,matrix:n,addScalar:i,multiplyScalar:r,equalScalar:o,dot:s}=e,a=ii({typed:t,equalScalar:o}),l=ei({typed:t});function c(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var d=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var o,s=e._data,a=e._size,l=e._datatype,c=n._data,d=n._datatype,u=a[0],p=a[1],h=i,m=r;l&&d&&l===d&&"string"==typeof l&&(h=t.find(i,[o=l,o]),m=t.find(r,[o,o]));for(var f=[],g=0;g<u;g++){for(var v=s[g],y=m(v[0],c[0]),b=1;b<p;b++)y=h(y,m(v[b],c[b]));f[g]=y}return e.createDenseMatrix({data:f,size:[u],datatype:o})},"SparseMatrix, any":function(e,n){var s=e._values,a=e._index,l=e._ptr,c=e._datatype;if(!s)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var d,u=n._data,p=n._datatype,h=e._size[0],m=n._size[0],f=[],g=[],v=[],y=i,b=r,S=o,C=0;c&&p&&c===p&&"string"==typeof c&&(y=t.find(i,[d=c,d]),b=t.find(r,[d,d]),S=t.find(o,[d,d]),C=t.convert(0,d));var w=[],x=[];v[0]=0;for(var I=0;I<m;I++){var E=u[I];if(!S(E,C))for(var _=l[I+1],M=l[I];M<_;M++){var j=a[M];x[j]?w[j]=y(w[j],b(E,s[M])):(x[j]=!0,g.push(j),w[j]=b(E,s[M]))}}for(var k=g.length,L=0;L<k;L++)f[L]=w[g[L]];return v[1]=g.length,e.createSparseMatrix({values:f,index:g,ptr:v,size:[h,1],datatype:d})}}),u=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var o,s=e._data,a=e._size,l=e._datatype,c=n._data,d=n._datatype,u=a[0],p=a[1],h=n._size[1],m=i,f=r;l&&d&&l===d&&"string"==typeof l&&(m=t.find(i,[o=l,o]),f=t.find(r,[o,o]));for(var g=[],v=0;v<u;v++){var y=s[v];g[v]=[];for(var b=0;b<h;b++){for(var S=f(y[0],c[0][b]),C=1;C<p;C++)S=m(S,f(y[C],c[C][b]));g[v][b]=S}}return e.createDenseMatrix({data:g,size:[u,h],datatype:o})},"DenseMatrix, SparseMatrix":function(e,n){var s=e._data,a=e._size,l=e._datatype,c=n._values,d=n._index,u=n._ptr,p=n._size,h=n._datatype;if(!c)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var m,f=a[0],g=p[1],v=i,y=r,b=o,S=0;l&&h&&l===h&&"string"==typeof l&&(v=t.find(i,[m=l,m]),y=t.find(r,[m,m]),b=t.find(o,[m,m]),S=t.convert(0,m));for(var C=[],w=[],x=[],I=n.createSparseMatrix({values:C,index:w,ptr:x,size:[f,g],datatype:m}),E=0;E<g;E++){x[E]=w.length;var _=u[E],M=u[E+1];if(M>_)for(var j=0,k=0;k<f;k++){for(var L=k+1,F=void 0,O=_;O<M;O++){var D=d[O];j!==L?(F=y(s[k][D],c[O]),j=L):F=v(F,y(s[k][D],c[O]))}j===L&&!b(F,S)&&(w.push(k),C.push(F))}}return x[g]=w.length,I},"SparseMatrix, DenseMatrix":function(e,n){var s=e._values,a=e._index,l=e._ptr,c=e._datatype;if(!s)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var d,u=n._data,p=n._datatype,h=e._size[0],m=n._size[0],f=n._size[1],g=i,v=r,y=o,b=0;c&&p&&c===p&&"string"==typeof c&&(g=t.find(i,[d=c,d]),v=t.find(r,[d,d]),y=t.find(o,[d,d]),b=t.convert(0,d));for(var S=[],C=[],w=[],x=e.createSparseMatrix({values:S,index:C,ptr:w,size:[h,f],datatype:d}),I=[],E=[],_=0;_<f;_++){w[_]=C.length;for(var M=_+1,j=0;j<m;j++){var k=u[j][_];if(!y(k,b))for(var L=l[j+1],F=l[j];F<L;F++){var O=a[F];E[O]!==M?(E[O]=M,C.push(O),I[O]=v(k,s[F])):I[O]=g(I[O],v(k,s[F]))}}for(var D=C.length,A=w[_];A<D;A++)S[A]=I[C[A]]}return w[f]=C.length,x},"SparseMatrix, SparseMatrix":function(e,n){var o,s=e._values,a=e._index,l=e._ptr,c=e._datatype,d=n._values,u=n._index,p=n._ptr,h=n._datatype,m=e._size[0],f=n._size[1],g=s&&d,v=i,y=r;c&&h&&c===h&&"string"==typeof c&&(v=t.find(i,[o=c,o]),y=t.find(r,[o,o]));for(var b,S,C,w,x,I,E=g?[]:void 0,_=[],M=[],j=e.createSparseMatrix({values:E,index:_,ptr:M,size:[m,f],datatype:o}),k=g?[]:void 0,L=[],F=0;F<f;F++){M[F]=_.length;var O=F+1;for(w=p[F+1],C=p[F];C<w;C++)if(I=u[C],g)for(S=l[I+1],b=l[I];b<S;b++)L[x=a[b]]!==O?(L[x]=O,_.push(x),k[x]=y(d[C],s[b])):k[x]=v(k[x],y(d[C],s[b]));else for(S=l[I+1],b=l[I];b<S;b++)L[x=a[b]]!==O&&(L[x]=O,_.push(x));if(g)for(var D=_.length,A=M[F];A<D;A++)E[A]=k[_[A]]}return M[f]=_.length,j}});return t(Ii,It({"Array, Array":function(e,t){c(rn(e),rn(t));var i=this(n(e),n(t));return Ze(i)?i.valueOf():i},"Matrix, Matrix":function(e,n){var o=e.size(),a=n.size();return c(o,a),1===o.length?1===a.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return s(e,t)}(e,n,o[0]):function(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var o,s=e._data,a=e._datatype,l=n._data,c=n._datatype,d=e._size[0],u=n._size[1],p=i,h=r;a&&c&&a===c&&"string"==typeof a&&(p=t.find(i,[o=a,o]),h=t.find(r,[o,o]));for(var m=[],f=0;f<u;f++){for(var g=h(s[0],l[0][f]),v=1;v<d;v++)g=p(g,h(s[v],l[v][f]));m[f]=g}return e.createDenseMatrix({data:m,size:[u],datatype:o})}(e,n)}(e,n):1===a.length?d(e,n):u(e,n)},"Matrix, Array":function(e,t){return this(e,n(t))},"Array, Matrix":function(e,t){return this(n(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return a(e,t,r,!1)},"DenseMatrix, any":function(e,t){return l(e,t,r,!1)},"any, SparseMatrix":function(e,t){return a(t,e,r,!0)},"any, DenseMatrix":function(e,t){return l(t,e,r,!0)},"Array, any":function(e,t){return l(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,r,!0).valueOf()},"any, any":r,"any, any, ...any":function(e,t,n){for(var i=this(e,t),r=0;r<n.length;r++)i=this(i,n[r]);return i}},r.signatures))});function _i(e,t,n,i){if(!(this instanceof _i))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=i,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}(_i.prototype=new Error).constructor=Error,_i.prototype.name="ArgumentsError",_i.prototype.isArgumentsError=!0,n(36137);var Mi=Mt("bignumber",["typed","BigNumber"],e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var i=t[2],r=n(t[1]),o=new n(2).pow(Number(i));if(r.gt(o.sub(1)))throw new SyntaxError('String "'.concat(e,'" is out of range'));var s=new n(2).pow(Number(i)-1);return r.gte(s)?r.sub(o):r}return new n(e)},BigNumber:function(e){return e},Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":function(e){return kn(e,this)}})}),ji=Mt("numeric",["number","?bignumber","?fraction"],e=>{var{number:t,bignumber:n,fraction:i}=e,r={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:e=>t(e),BigNumber:n?e=>n(e):li,Fraction:i?e=>i(e):ci};return function(e,t){var n=wt(e);if(!(n in r))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(r).join(", "));if(!(t in o))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(o).join(", "));return t===n?e:o[t](e)}}),ki="subtract",Li=Mt(ki,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],e=>{var{typed:t,matrix:n,equalScalar:i,addScalar:r,unaryMinus:o,DenseMatrix:s}=e,a=Yn({typed:t}),l=ti({typed:t}),c=ni({typed:t,equalScalar:i}),d=Xn({typed:t,DenseMatrix:s}),u=Jn({typed:t}),p=ei({typed:t});return t(ki,{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return Fi(e,t),c(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return Fi(e,t),l(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return Fi(e,t),a(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return Fi(e,t),u(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return d(e,o(t),r)},"DenseMatrix, any":function(e,t){return p(e,t,this)},"any, SparseMatrix":function(e,t){return d(t,e,this,!0)},"any, DenseMatrix":function(e,t){return p(t,e,this,!0)},"Array, any":function(e,t){return p(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return p(n(t),e,this,!0).valueOf()}})});function Fi(e,t){var n=e.size(),i=t.size();if(n.length!==i.length)throw new tn(n.length,i.length)}var Oi=(Mt("equal",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})}),"divideScalar"),Di=Mt(Oi,["typed","numeric"],e=>{var{typed:t,numeric:n}=e;return t(Oi,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var i=e.clone(),r=n(1,wt(t));return i.value=this(null===i.value?i._normalize(r):i.value,t),i},"number | Fraction | BigNumber, Unit":function(e,t){var i=t.clone();i=i.pow(-1);var r=n(1,wt(e));return i.value=this(e,null===t.value?t._normalize(r):t.value),i},"Unit, Unit":function(e,t){return e.divide(t)}})}),Ai=Mt("Spa",["addScalar","equalScalar","FibonacciHeap"],e=>{var{addScalar:t,equalScalar:n,FibonacciHeap:i}=e;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return r.prototype.type="Spa",r.prototype.isSpa=!0,r.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},r.prototype.get=function(e){var t=this._values[e];return t?t.value:0},r.prototype.accumulate=function(e,n){var i=this._values[e];i?i.value=t(i.value,n):(i=this._heap.insert(e,n),this._values[e]=i)},r.prototype.forEach=function(e,t,i){var r=this._heap,o=this._values,s=[],a=r.extractMinimum();for(a&&s.push(a);a&&a.key<=t;)a.key>=e&&(n(a.value,0)||i(a.key,a.value,this)),(a=r.extractMinimum())&&s.push(a);for(var l=0;l<s.length;l++){var c=s[l];o[(a=r.insert(c.key,c.value)).key]=a}},r.prototype.swap=function(e,t){var n=this._values[e],i=this._values[t];if(!n&&i)n=this._heap.insert(e,i.value),this._heap.remove(i),this._values[e]=n,this._values[t]=void 0;else if(n&&!i)i=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=i,this._values[e]=void 0;else if(n&&i){var r=n.value;n.value=i.value,i.value=r}},r},{isClass:!0}),Ni=Mt("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],e=>{var{typed:t,matrix:n,abs:i,addScalar:r,divideScalar:o,multiplyScalar:s,subtract:a,larger:l,equalScalar:c,unaryMinus:d,DenseMatrix:u,SparseMatrix:p,Spa:h}=e;return t("lup",{DenseMatrix:function(e){return m(e)},SparseMatrix:function(e){return function(e){var t,n,r,a=e._size[0],u=e._size[1],m=Math.min(a,u),f=e._values,g=e._index,v=e._ptr,y=[],b=[],S=[],C=[a,m],w=[],x=[],I=[],E=[m,u],_=[],M=[];for(t=0;t<a;t++)_[t]=t,M[t]=t;var j=function(){var e=new h;n<a&&(S.push(y.length),y.push(1),b.push(n)),I.push(w.length);var u=v[n+1];for(r=v[n];r<u;r++)e.set(_[t=g[r]],f[r]);n>0&&e.forEach(0,n-1,function(t,n){p._forEachRow(t,y,b,S,function(i,r){i>t&&e.accumulate(i,d(s(r,n)))})});var m=n,j=e.get(n),k=i(j);e.forEach(n+1,a-1,function(e,t){var n=i(t);l(n,k)&&(m=e,k=n,j=t)}),n!==m&&(p._swapRows(n,m,C[1],y,b,S),p._swapRows(n,m,E[1],w,x,I),e.swap(n,m),function(e,t){var n=M[e],i=M[t];_[n]=t,_[i]=e,M[e]=i,M[t]=n}(n,m)),e.forEach(0,a-1,function(e,t){e<=n?(w.push(t),x.push(e)):(t=o(t,j),c(t,0)||(y.push(t),b.push(e)))})};for(n=0;n<u;n++)j();return I.push(w.length),S.push(y.length),{L:new p({values:y,index:b,ptr:S,size:C}),U:new p({values:w,index:x,ptr:I,size:E}),p:_,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var t=m(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function m(e){var t,n,d,p=e._size[0],h=e._size[1],m=Math.min(p,h),f=xt(e._data),g=[],v=[p,m],y=[],b=[m,h],S=[];for(t=0;t<p;t++)S[t]=t;for(n=0;n<h;n++){if(n>0)for(t=0;t<p;t++){var C=Math.min(t,n),w=0;for(d=0;d<C;d++)w=r(w,s(f[t][d],f[d][n]));f[t][n]=a(f[t][n],w)}var x=n,I=0,E=0;for(t=n;t<p;t++){var _=f[t][n],M=i(_);l(M,I)&&(x=t,I=M,E=_)}if(n!==x&&(S[n]=[S[x],S[x]=S[n]][0],u._swapRows(n,x,f)),n<p)for(t=n+1;t<p;t++)c(f[t][n],0)||(f[t][n]=o(f[t][n],E))}for(n=0;n<h;n++)for(t=0;t<p;t++)0===n&&(t<h&&(y[t]=[]),g[t]=[]),t<n?(t<h&&(y[t][n]=f[t][n]),n<p&&(g[t][n]=0)):t!==n?(t<h&&(y[t][n]=0),n<p&&(g[t][n]=f[t][n])):(t<h&&(y[t][n]=f[t][n]),n<p&&(g[t][n]=1));var j=new u({data:g,size:v}),k=new u({data:y,size:b}),L=[];for(t=0,m=S.length;t<m;t++)L[S[t]]=t;return{L:j,U:k,p:L,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}),Ri=Mt("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],e=>{var{typed:t,matrix:n,subtract:i,multiply:r,unaryMinus:o,lup:s}=e;return t("det",{any:function(e){return xt(e)},"Array | Matrix":function(e){var t;switch((t=Ze(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return xt(e);case 1:if(1===t[0])return xt(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Jt(t)+")");case 2:var a=t[0];if(a===t[1])return function(e,t,n){if(1===t)return xt(e[0][0]);if(2===t)return i(r(e[0][0],e[1][1]),r(e[1][0],e[0][1]));for(var a=s(e),l=a.U[0][0],c=1;c<t;c++)l=r(l,a.U[c][c]);for(var d=0,u=0,p=[];;){for(;p[u];)u++;if(u>=t)break;for(var h=u,m=0;!p[a.p[h]];)p[a.p[h]]=!0,h=a.p[h],m++;m%2==0&&d++}return d%2==0?l:o(l)}(e.clone().valueOf(),a);throw new RangeError("Matrix must be square (size: "+Jt(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(t)+")")}}})}),Ti=Mt("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],e=>{var{typed:t,matrix:n,divideScalar:i,addScalar:r,multiply:o,unaryMinus:s,det:a,identity:l,abs:c}=e;return t("inv",{"Array | Matrix":function(e){var t=Ze(e)?e.size():rn(e);switch(t.length){case 1:if(1===t[0])return Ze(e)?n([i(1,e.valueOf()[0])]):[i(1,e[0])];throw new RangeError("Matrix must be square (size: "+Jt(t)+")");case 2:var r=t[0],o=t[1];if(r===o)return Ze(e)?n(d(e.valueOf(),r,o),e.storage()):d(e,r,o);throw new RangeError("Matrix must be square (size: "+Jt(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(t)+")")}},any:function(e){return i(1,e)}});function d(e,t,n){var d,u,p,h,m;if(1===t){if(0===(h=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,h)]]}if(2===t){var f=a(e);if(0===f)throw Error("Cannot calculate inverse, determinant is zero");return[[i(e[1][1],f),i(s(e[0][1]),f)],[i(s(e[1][0]),f),i(e[0][0],f)]]}var g=e.concat();for(d=0;d<t;d++)g[d]=g[d].concat();for(var v=l(t).valueOf(),y=0;y<n;y++){var b=c(g[y][y]),S=y;for(d=y+1;d<t;)c(g[d][y])>b&&(b=c(g[d][y]),S=d),d++;if(0===b)throw Error("Cannot calculate inverse, determinant is zero");(d=S)!==y&&(m=g[y],g[y]=g[d],g[d]=m,m=v[y],v[y]=v[d],v[d]=m);var C=g[y],w=v[y];for(d=0;d<t;d++){var x=g[d],I=v[d];if(d!==y){if(0!==x[y]){for(p=i(s(x[y]),C[y]),u=y;u<n;u++)x[u]=r(x[u],o(p,C[u]));for(u=0;u<n;u++)I[u]=r(I[u],o(p,w[u]))}}else{for(p=C[y],u=y;u<n;u++)x[u]=i(x[u],p);for(u=0;u<n;u++)I[u]=i(I[u],p)}}}return v}}),Pi=Mt("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],e=>{var{typed:t,matrix:n,multiply:i,equalScalar:r,divideScalar:o,inv:s}=e,a=ii({typed:t,equalScalar:r}),l=ei({typed:t});return t("divide",It({"Array | Matrix, Array | Matrix":function(e,t){return i(e,s(t))},"DenseMatrix, any":function(e,t){return l(e,t,o,!1)},"SparseMatrix, any":function(e,t){return a(e,t,o,!1)},"Array, any":function(e,t){return l(n(e),t,o,!1).valueOf()},"any, Array | Matrix":function(e,t){return i(e,s(t))}},o.signatures))}),Bi=$t({}),$i=Gt({config:Te}),Vi=Ht({}),zi=Qt({}),Ui=gn({Matrix:Vi}),Ki=En({BigNumber:$i,Complex:Bi,DenseMatrix:Ui,Fraction:zi}),Zi=On({config:Te,typed:Ki}),Gi=Dn({typed:Ki}),Hi=Vn({typed:Ki}),Wi=zn({Fraction:zi,typed:Ki}),qi=Kn({typed:Ki}),Qi=Gn({typed:Ki}),Yi=Hn({typed:Ki}),Xi=Wn({Matrix:Vi,equalScalar:Zi,typed:Ki}),Ji=qn({DenseMatrix:Ui,Matrix:Vi,SparseMatrix:Xi,typed:Ki}),er=Qn({typed:Ki}),tr=ai({BigNumber:$i,DenseMatrix:Ui,SparseMatrix:Xi,config:Te,matrix:Ji,typed:Ki}),nr=di({matrix:Ji,config:Te,typed:Ki}),ir=gi({BigNumber:$i,DenseMatrix:Ui,equalScalar:Zi,matrix:Ji,typed:Ki,zeros:ui({BigNumber:$i,config:Te,matrix:Ji,typed:Ki})}),rr=bi({DenseMatrix:Ui,config:Te,matrix:Ji,typed:Ki}),or=Si({DenseMatrix:Ui,config:Te,matrix:Ji,typed:Ki}),sr=wi({larger:or,smaller:rr}),ar=Ei({addScalar:Qi,dot:xi({addScalar:Qi,conj:Yi,multiplyScalar:Hi,size:nr,typed:Ki}),equalScalar:Zi,matrix:Ji,multiplyScalar:Hi,typed:Ki}),lr=ji({bignumber:Mi({BigNumber:$i,typed:Ki}),fraction:Wi,number:Gi}),cr=Li({DenseMatrix:Ui,addScalar:Qi,equalScalar:Zi,matrix:Ji,typed:Ki,unaryMinus:qi}),dr=Di({numeric:lr,typed:Ki}),ur=Pi({divideScalar:dr,equalScalar:Zi,inv:Ti({abs:er,addScalar:Qi,det:Ri({lup:Ni({DenseMatrix:Ui,Spa:Ai({FibonacciHeap:sr,addScalar:Qi,equalScalar:Zi}),SparseMatrix:Xi,abs:er,addScalar:Qi,divideScalar:dr,equalScalar:Zi,larger:or,matrix:Ji,multiplyScalar:Hi,subtract:cr,typed:Ki,unaryMinus:qi}),matrix:Ji,multiply:ar,subtract:cr,typed:Ki,unaryMinus:qi}),divideScalar:dr,identity:tr,matrix:Ji,multiply:ar,typed:Ki,unaryMinus:qi}),matrix:Ji,multiply:ar,typed:Ki}),pr=n(3227),hr=n(84562),mr=n(12445),fr=n(85613);function gr(e,t){}const vr=()=>{const e="undefined"!=typeof window?window:void 0;return e&&e.tinymce?e.tinymce:null};let yr=(()=>{class e{constructor(){this.onBeforePaste=new i.EventEmitter,this.onBlur=new i.EventEmitter,this.onClick=new i.EventEmitter,this.onContextMenu=new i.EventEmitter,this.onCopy=new i.EventEmitter,this.onCut=new i.EventEmitter,this.onDblclick=new i.EventEmitter,this.onDrag=new i.EventEmitter,this.onDragDrop=new i.EventEmitter,this.onDragEnd=new i.EventEmitter,this.onDragGesture=new i.EventEmitter,this.onDragOver=new i.EventEmitter,this.onDrop=new i.EventEmitter,this.onFocus=new i.EventEmitter,this.onFocusIn=new i.EventEmitter,this.onFocusOut=new i.EventEmitter,this.onKeyDown=new i.EventEmitter,this.onKeyPress=new i.EventEmitter,this.onKeyUp=new i.EventEmitter,this.onMouseDown=new i.EventEmitter,this.onMouseEnter=new i.EventEmitter,this.onMouseLeave=new i.EventEmitter,this.onMouseMove=new i.EventEmitter,this.onMouseOut=new i.EventEmitter,this.onMouseOver=new i.EventEmitter,this.onMouseUp=new i.EventEmitter,this.onPaste=new i.EventEmitter,this.onSelectionChange=new i.EventEmitter,this.onActivate=new i.EventEmitter,this.onAddUndo=new i.EventEmitter,this.onBeforeAddUndo=new i.EventEmitter,this.onBeforeExecCommand=new i.EventEmitter,this.onBeforeGetContent=new i.EventEmitter,this.onBeforeRenderUI=new i.EventEmitter,this.onBeforeSetContent=new i.EventEmitter,this.onChange=new i.EventEmitter,this.onClearUndos=new i.EventEmitter,this.onDeactivate=new i.EventEmitter,this.onDirty=new i.EventEmitter,this.onExecCommand=new i.EventEmitter,this.onGetContent=new i.EventEmitter,this.onHide=new i.EventEmitter,this.onInit=new i.EventEmitter,this.onInitNgModel=new i.EventEmitter,this.onLoadContent=new i.EventEmitter,this.onNodeChange=new i.EventEmitter,this.onPostProcess=new i.EventEmitter,this.onPostRender=new i.EventEmitter,this.onPreInit=new i.EventEmitter,this.onPreProcess=new i.EventEmitter,this.onProgressState=new i.EventEmitter,this.onRedo=new i.EventEmitter,this.onRemove=new i.EventEmitter,this.onReset=new i.EventEmitter,this.onResizeEditor=new i.EventEmitter,this.onSaveContent=new i.EventEmitter,this.onSetAttrib=new i.EventEmitter,this.onObjectResizeStart=new i.EventEmitter,this.onObjectResized=new i.EventEmitter,this.onObjectSelected=new i.EventEmitter,this.onSetContent=new i.EventEmitter,this.onShow=new i.EventEmitter,this.onSubmit=new i.EventEmitter,this.onUndo=new i.EventEmitter,this.onVisualAid=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),e})();const br=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Sr=(e,t)=>"string"==typeof e?e.split(",").map(e=>e.trim()):Array.isArray(e)?e:t;let Cr=0;const wr=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Cr++,e+"_"+n+Cr+String(t)},xr=e=>void 0!==e&&"textarea"===e.tagName.toLowerCase(),Ir=e=>void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" "),Er=(e,t)=>Ir(e).concat(Ir(t)),_r=()=>{},Mr=e=>null==e,jr=()=>({listeners:[],scriptId:wr("tiny-script"),scriptLoaded:!1}),kr=(()=>{let e=jr();return{load:(t,n,i)=>{e.scriptLoaded?i():(e.listeners.push(i),t.getElementById(e.scriptId)||((t,n,i,r)=>{const o=n.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=t,o.src=i;const s=()=>{o.removeEventListener("load",s),e.listeners.forEach(e=>e()),e.scriptLoaded=!0};o.addEventListener("load",s),n.head&&n.head.appendChild(o)})(e.scriptId,t,n))},reinitialize:()=>{e=jr()}}})(),Lr=new i.InjectionToken("TINYMCE_SCRIPT_SRC"),Fr={provide:h.NG_VALUE_ACCESSOR,useExisting:(0,i.forwardRef)(()=>Or),multi:!0};let Or=(()=>{class e extends yr{constructor(e,t,n,i){super(),this.platformId=n,this.tinymceScriptSrc=i,this.cloudChannel="5",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=_r,this._elementRef=e,this.ngZone=t,this.initialise=this.initialise.bind(this)}set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&this._editor.setMode(e?"readonly":"design")}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(Mr(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this._editor?this._editor.setMode(e?"readonly":"design"):e&&(this.init=Object.assign(Object.assign({},this.init),{readonly:!0}))}ngAfterViewInit(){var e;(0,p.isPlatformBrowser)(this.platformId)&&(this.id=this.id||wr("tiny-angular"),this.inline=void 0!==this.inline?!1!==this.inline:!!(null===(e=this.init)||void 0===e?void 0:e.inline),this.createElement(),null!==vr()?this.initialise():this._element&&this._element.ownerDocument&&kr.load(this._element.ownerDocument,this.getScriptSrc(),this.initialise.bind(this)))}ngOnDestroy(){null!==vr()&&vr().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,xr(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise(){const e=Object.assign(Object.assign({},this.init),{target:this._element,inline:this.inline,readonly:this.disabled,plugins:Er(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:e=>{this._editor=e,e.on("init",t=>{this.initEditor(e)}),((e,t)=>{(e=>{const t=Sr(e.ignoreEvents,[]);return Sr(e.allowedEvents,br).filter(e=>br.includes(e)&&!t.includes(e))})(e).forEach(n=>{const i=e[n];t.on(n.substring(2),n=>e.ngZone.run(()=>i.emit({event:n,editor:t})))})})(this,e),this.init&&"function"==typeof this.init.setup&&this.init.setup(e)}});xr(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{vr().init(e)})}getScriptSrc(){return Mr(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){e.on("blur",()=>this.ngZone.run(()=>this.onTouchedCallback())),e.on(this.modelEvents,()=>this.ngZone.run(()=>this.emitOnChange(e))),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(i.PLATFORM_ID),i.\u0275\u0275directiveInject(Lr,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",id:"id",modelEvents:"modelEvents",disabled:"disabled",initialValue:"initialValue",init:"init",inline:"inline",outputFormat:"outputFormat",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents"},features:[i.\u0275\u0275ProvidersFeature([Fr]),i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,template:function(e,t){1&e&&i.\u0275\u0275template(0,gr,0,0,"ng-template")},styles:["[_nghost-%COMP%] { display: block; }"]}),e})(),Dr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule]]}),e})();var Ar=n(20850),Nr=n(87183),Rr=n(92064),Tr=n(89370),Pr=n(64604),Br=n(88383),$r=n(3191);const Vr={},zr={};let Ur=!1;function Kr(e){return(0,m.mG)(this,void 0,void 0,function*(){return e.remoteEntry&&(yield function(e,t){return new Promise((i,r)=>{if(Vr[e])return void i();const o=document.createElement("script");o.src=e,o.onerror=r,o.onload=()=>{(function(e){(0,m.mG)(this,void 0,void 0,function*(){const t=window[e];return zr[e]||(Ur||(yield n.I("default"),Ur=!0),yield t.init(n.S.default),zr[e]=!0),t})})(t),Vr[e]=!0,i()},document.body.appendChild(o)})}(e.remoteEntry,e.remoteName)),yield function(e,t){return(0,m.mG)(this,void 0,void 0,function*(){return(yield window[e].get(t))()})}(e.remoteName,e.exposedModule)})}let Zr=(()=>{class e{constructor(e){this.apollo=e}fetch(e,t,n){const i=n.fields,r={query:l()`
              query ${e}($id: ID!) {
                ${e}(id: $id) {
                  ${i.join("\n")}
                }
              }
            `,variables:{id:t}};return this.apollo.query(r)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Gr=(()=>{class e{constructor(e){this.apollo=e}fetchAll(e,t){const n=t.fields,i={query:l()`
                query ${e}{
                    ${e} {
                        edges {
                            node {
                                ${n.join("\n")}
                            }
                        }
                    }
                }
            `};return this.apollo.query(i)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Hr={configs:{},loading:!1};let Wr=(0,c.deepClone)(Hr),qr=null,Qr=(()=>{class e{constructor(e){this.collectionGQL=e,this.store=new r.BehaviorSubject(Wr),this.state$=this.store.asObservable(),this.resourceName="systemConfigs",this.fieldsMetadata={fields:["id","_id","value","items"]},this.configs$=this.state$.pipe((0,o.map)(e=>e.configs),(0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading))}getConfigValue(e){return Wr.configs&&Wr.configs[e]?null!==Wr.configs[e].value?Wr.configs[e].value:Wr.configs[e].items:null}getHomePage(){let e="home";const t=this.getConfigValue("default_module");return t&&(e=t),e}clear(){qr=null,this.updateState((0,c.deepClone)(Hr))}clearAuthBased(){this.clear()}load(){return this.updateState(Object.assign(Object.assign({},Wr),{loading:!0})),this.getSystemConfigs().pipe((0,o.tap)(e=>{this.updateState(Object.assign(Object.assign({},Wr),{configs:e,loading:!1}))}))}isCached(){return null!==qr}set(e){qr=(0,r.of)(e).pipe((0,o.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},Wr),{configs:e,loading:!1}))}updateState(e){this.store.next(Wr=e)}getSystemConfigs(){return null==qr&&(qr=this.fetch().pipe((0,o.shareReplay)(1))),qr}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,o.map)(({data:e})=>{const t={};return e.systemConfigs&&e.systemConfigs.edges&&e.systemConfigs.edges.forEach(e=>{t[e.node._id]=e.node}),t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Yr=(()=>{class e{constructor(e,t="loading_display_delay"){var n,i,s;this.config=e,this.delayConfigKey=t,this.loadingStore=new r.BehaviorSubject(!1),this.loadingBufferStore=new r.BehaviorSubject(!1),this.subs=[],this.buffered=!1,this.loading$=this.loadingStore.asObservable();const a=null!==(n=e.getConfigValue("ui"))&&void 0!==n?n:{},l=null!==(s=parseInt(null!==(i=a[t])&&void 0!==i?i:""))&&void 0!==s?s:1500;this.loadingBufferStore$=this.loadingBufferStore.asObservable().pipe((0,o.debounceTime)(l)),this.subs.push(this.loadingBufferStore$.subscribe(e=>{!this.buffered||this.loadingStore.next(e)}))}updateLoading(e){if(!0===e)return this.buffered=!0,void this.loadingBufferStore.next(e);this.buffered=!1,this.loadingStore.next(e),this.loadingBufferStore.next(e)}}return e.\u0275fac=function(e){i.\u0275\u0275invalidFactory()},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Xr=(()=>{class e{constructor(e){this.config=e}create(e="loading_display_delay"){return new Yr(this.config,e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Jr={loading:!1,initialAppLoading:!0,module:null,view:null,loaded:!1,routeUrl:null,activeRequests:0};let eo=(0,c.deepClone)(Jr),no=(()=>{class e{constructor(e){this.loadingBufferFactory=e,this.store=new r.BehaviorSubject(eo),this.state$=this.store.asObservable(),this.loadingQueue={},this.subs=[],this.loading$=this.state$.pipe((0,o.map)(e=>e.loading),(0,o.distinctUntilChanged)()),this.module$=this.state$.pipe((0,o.map)(e=>e.module),(0,o.distinctUntilChanged)()),this.view$=this.state$.pipe((0,o.map)(e=>e.view),(0,o.distinctUntilChanged)()),this.initialAppLoading$=this.state$.pipe((0,o.map)(e=>e.initialAppLoading),(0,o.distinctUntilChanged)()),this.activeRequests$=this.state$.pipe((0,o.map)(e=>e.activeRequests),(0,o.distinctUntilChanged)()),this.vm$=(0,r.combineLatest)([this.loading$,this.module$,this.view$,this.initialAppLoading$]).pipe((0,o.map)(([e,t,n,i])=>({loading:e,module:t,view:n,loaded:eo.loaded,initialAppLoading:i})))}clear(){this.loadingQueue={},this.updateState((0,c.deepClone)(Jr)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}init(){this.initLoadingBuffer()}getActiveRequests(){return eo.activeRequests}addActiveRequest(){let e=eo.activeRequests;(0,c.isVoid)(e)&&(e=0),e++,this.updateState(Object.assign(Object.assign({},eo),{activeRequests:e}))}removeActiveRequest(){let e=eo.activeRequests;(0,c.isVoid)(e)?e=0:e--,e<0&&(e=0),this.updateState(Object.assign(Object.assign({},eo),{activeRequests:e}))}updateLoading(e,t,n=!0){if(this.initLoadingBuffer(),!0===t)return this.addToLoadingQueue(e),this.loadingBuffer.updateLoading(t),void(n||this.updateState(Object.assign(Object.assign({},eo),{loading:t})));this.removeFromLoadingQueue(e),this.hasActiveLoading()&&(this.loadingBuffer.updateLoading(t),this.updateState(Object.assign(Object.assign({},eo),{loading:t})))}updateInitialAppLoading(e){this.updateState(Object.assign(Object.assign({},eo),{initialAppLoading:e}))}isLoaded(){return eo.loaded}setLoaded(e){this.updateState(Object.assign(Object.assign({},eo),{loaded:e}))}setModule(e){this.updateState(Object.assign(Object.assign({},eo),{module:e}))}getModule(){var e;return null!==(e=null==eo?void 0:eo.module)&&void 0!==e?e:""}setView(e){this.updateState(Object.assign(Object.assign({},eo),{view:e}))}getView(){return eo.view}setRouteUrl(e){this.updateState(Object.assign(Object.assign({},eo),{routeUrl:e}))}getRouteUrl(){return eo.routeUrl}initLoadingBuffer(){this.loadingBuffer||(this.loadingBuffer=this.loadingBufferFactory.create(),this.subs.push(this.loadingBuffer.loading$.subscribe(e=>{this.updateState(Object.assign(Object.assign({},eo),{loading:e}))})))}hasActiveLoading(){return Object.keys(this.loadingQueue).length<1}removeFromLoadingQueue(e){this.loadingQueue[e]&&delete this.loadingQueue[e]}addToLoadingQueue(e){this.loadingQueue[e]=!0}updateState(e){this.store.next(eo=e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),io=(()=>{class e{constructor(){this.storageKey="scrm-session-storage",this.stickyStorageKey="scrm-sticky-session-storage"}clear(){this.getLocalStorage().removeItem(this.storageKey);const e=this.getLocalStorage().getItem(this.stickyStorageKey);e&&this.getLocalStorage().setItem(this.storageKey,e)}set(e,t,n=!1){this.store(this.storageKey,e,t),n&&this.store(this.stickyStorageKey,e,t)}store(e,t,n){const i=this.getLocalStorage().getItem(e);let r={};i&&(r=JSON.parse(i)),r[t]=n,this.getLocalStorage().setItem(e,JSON.stringify(r))}get(e){const t=this.getLocalStorage().getItem(this.storageKey);let n={};return t&&(n=JSON.parse(t)),n[e]}getLocalStorage(){return localStorage}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ro=(()=>{class e{constructor(e){this.apollo=e}create(e,t,n,i){const r=i.fields,o={mutation:l()`
                mutation create${t}($input: create${t}Input!) {
                  create${t}(input: $input) {
                    ${e} {
                      ${r.join("\n")}
                    }
                    clientMutationId
                  }
                }
            `,variables:{input:n}};return this.apollo.mutate(o)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const oo={id:null,_id:null,status:null,async:null,type:null,options:null,messages:[]};let so=(()=>{class e{constructor(e){this.recordMutationGQL=e,this.graphqlName="process",this.coreName="Process",this.createFieldsMetadata={fields:["_id","status","async","type","messages","data"]}}submit(e,t){return this.create(e,t)}create(e,t){return this.recordMutationGQL.create(this.graphqlName,this.coreName,{type:e,options:t},this.createFieldsMetadata).pipe((0,o.map)(({data:e})=>{const t=Object.assign({},oo);return e.createProcess&&e.createProcess.process?e.createProcess.process:t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ro))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ao={appStrings:{},appListStrings:{},modStrings:{},languageKey:"en_us",loaded:{},hasChanged:!1};let lo=(0,c.deepClone)(ao);const co={appStrings:{},appListStrings:{},modStrings:{}};let uo={},po=(0,c.deepClone)(co),ho=(()=>{class e{constructor(e,t,n,i,s){this.recordGQL=e,this.appStateStore=t,this.localStorage=n,this.processService=i,this.configs=s,this.store=new r.BehaviorSubject(lo),this.state$=this.store.asObservable(),this.config={appStrings:{fetch:"fetchAppStrings",resourceName:"appStrings",metadata:{fields:["id","_id","items"]}},appListStrings:{fetch:"fetchAppListStrings",resourceName:"appListStrings",metadata:{fields:["id","_id","items"]}},modStrings:{fetch:"fetchModStrings",resourceName:"modStrings",metadata:{fields:["id","_id","items"]}}},this.appStrings$=this.state$.pipe((0,o.map)(e=>e.appStrings),(0,o.distinctUntilChanged)()),this.appListStrings$=this.state$.pipe((0,o.map)(e=>e.appListStrings),(0,o.distinctUntilChanged)()),this.modStrings$=this.state$.pipe((0,o.map)(e=>e.modStrings),(0,o.distinctUntilChanged)()),this.languageKey$=this.state$.pipe((0,o.map)(e=>e.languageKey),(0,o.distinctUntilChanged)()),this.vm$=(0,r.combineLatest)([this.appStrings$,this.appListStrings$,this.modStrings$,this.languageKey$]).pipe((0,o.map)(([e,t,n,i])=>({appStrings:e,appListStrings:t,modStrings:n,languageKey:i})))}clear(){uo={},po=(0,c.deepClone)(co),this.updateState((0,c.deepClone)(ao))}clearAuthBased(){["modStrings","appListStrings"].forEach(e=>{uo&&uo[e]&&delete uo[e]}),po.modStrings={},po.appListStrings={}}changeLanguage(e,t=!1){const n=[];Object.keys(uo).forEach(e=>uo[e]&&n.push(e)),lo.hasChanged=!0,this.appStateStore.updateLoading("change-language",!0),this.load(e,n,t).pipe((0,o.tap)(()=>{this.localStorage.set("selected_language",e,!0),this.appStateStore.updateLoading("change-language",!1)})).subscribe()}getLanguageStrings(){return lo?{appStrings:lo.appStrings,appListStrings:lo.appListStrings,modStrings:lo.modStrings,languageKey:lo.languageKey}:null}getAppString(e){return lo.appStrings&&lo.appStrings[e]?lo.appStrings[e]:null}getAppListString(e){return lo.appListStrings&&lo.appListStrings[e]?lo.appListStrings[e]:null}getModString(e){return lo.modStrings&&lo.modStrings[e]?lo.modStrings[e]:null}getFieldLabel(e,t=null,n=null){let i=n;if(n||(i=this.getLanguageStrings()),!i||!i.modStrings||!e)return"";let r="";return t&&(r=i.modStrings[t]&&i.modStrings[t][e]),r||(r=i.appStrings&&i.appStrings[e]),r||""}getListLabel(e,t){if(!e||!t)return"";const n=this.getAppListString(e);return n&&n[t]||""}getAvailableStringsTypes(){return Object.keys(this.config)}hasLanguageChanged(){return lo.hasChanged}getCurrentLanguage(){var e;return this.localStorage.get("selected_language")||(null!==(e=lo.languageKey)&&void 0!==e?e:"en_us")}getActiveLanguage(){var e;return null!==(e=lo.languageKey)&&void 0!==e?e:""}getSelectedLanguage(){var e;return null!==(e=this.localStorage.get("selected_language"))&&void 0!==e?e:""}isLanguageEnabled(e){var t;if(!e)return!1;const n=null!==(t=this.configs.getConfigValue("languages"))&&void 0!==t?t:{},i=this.getDisabledLanguages(),r=Object.keys(n);return!!r.length&&r.includes(e)&&!i.includes(e)}getDisabledLanguages(){var e;const t=null!==(e=this.configs.getConfigValue("disabled_languages"))&&void 0!==e?e:"";return(0,d.isString)(t)&&""!==t?t.replace(" ","").split(","):[]}getEnabledLanguages(){var e;const t=null!==(e=this.configs.getConfigValue("languages"))&&void 0!==e?e:{},n=this.getDisabledLanguages(),i={};return Object.keys(t).filter(e=>!n.includes(e)).forEach(e=>{i[e]=t[e]}),i}getFirstLanguage(){var e,t;const n=null!==(e=this.configs.getConfigValue("languages"))&&void 0!==e?e:{};return null!==(t=Object.keys(n).sort()[0])&&void 0!==t?t:""}load(e,t,n=!1){const i={};return t.forEach(t=>i[t]=this.getStrings(e,t,n)),(0,r.forkJoin)(i).pipe((0,o.first)(),(0,o.tap)(n=>{const i=Object.assign(Object.assign({},lo),{languageKey:e});t.forEach(e=>{i[e]=n[e],uo[e]=!0}),this.updateState(i)}))}areAllCached(){var e,t,n;let i=!0;return i=i&&!(0,c.emptyObject)(null!==(e=null==po?void 0:po.appStrings)&&void 0!==e?e:{}),i=i&&!(0,c.emptyObject)(null!==(t=null==po?void 0:po.appListStrings)&&void 0!==t?t:{}),i=i&&!(0,c.emptyObject)(null!==(n=null==po?void 0:po.modStrings)&&void 0!==n?n:{}),i}set(e,t){const n=Object.assign(Object.assign({},lo),{languageKey:e});t.appStrings&&!(0,c.emptyObject)(t.appStrings)&&(po.appStrings[e]=(0,r.of)(t.appStrings).pipe((0,o.shareReplay)(1)),n.appStrings=t.appStrings,uo.appStrings=!0),t.appListStrings&&!(0,c.emptyObject)(t.appListStrings)&&(po.appListStrings[e]=(0,r.of)(t.appListStrings).pipe((0,o.shareReplay)(1)),n.appListStrings=t.appListStrings,uo.appListStrings=!0),t.modStrings&&!(0,c.emptyObject)(t.modStrings)&&(po.modStrings[e]=(0,r.of)(t.modStrings).pipe((0,o.shareReplay)(1)),n.modStrings=t.modStrings,uo.modStrings=!0),this.updateState(n)}setSessionLanguage(){return this.processService.submit("set-session-language",{language:lo.languageKey}).pipe((0,o.take)(1))}updateState(e){this.store.next(lo=e)}getStrings(e,t,n=!1){const i=po[t];return i[e]&&!1===n||(i[e]=this[this.config[t].fetch](e).pipe((0,o.shareReplay)(1))),i[e]}fetchAppStrings(e){return this.recordGQL.fetch(this.config.appStrings.resourceName,`/api/app-strings/${e}`,this.config.appStrings.metadata).pipe((0,o.map)(({data:e})=>{let t={};return e.appStrings&&(t=e.appStrings.items),t}))}fetchAppListStrings(e){return this.recordGQL.fetch(this.config.appListStrings.resourceName,`/api/app-list-strings/${e}`,this.config.appListStrings.metadata).pipe((0,o.map)(({data:e})=>{let t={};return e.appListStrings&&(t=e.appListStrings.items),t}))}fetchModStrings(e){return this.recordGQL.fetch(this.config.modStrings.resourceName,`/api/mod-strings/${e}`,this.config.modStrings.metadata).pipe((0,o.map)(({data:e})=>{let t={};return e.modStrings&&(t=e.modStrings.items),t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Zr),i.\u0275\u0275inject(no),i.\u0275\u0275inject(io),i.\u0275\u0275inject(so),i.\u0275\u0275inject(Qr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),mo=(()=>{class e{constructor(e){this.router=e}navigateToSearch(e){let t="";return e&&(t=e),this.router.navigate(["/home/unified-search"],{queryParams:{query_string:t}})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(u.Router))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fo=(()=>{class e{constructor(e,t){this.el=e,this.appStateStore=t,this.appLoading=!1}ngOnInit(){this.subscription=this.appStateStore.loading$.pipe((0,o.tap)(e=>{this.appLoading=e,this.updateComponent()})).subscribe(),this.updateComponent()}ngOnChanges(e){e.state&&this.updateComponent()}ngOnDestroy(){this.subscription.unsubscribe()}clickEvent(){this.updateComponent()}updateComponent(){const e=this.isLoading();this.setDisabledState(e)}isLoading(){let e=!1;return(!0===this.state||!0===this.appLoading)&&(e=!0),e}setDisabledState(e){this.el.nativeElement.disabled=e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(no))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","scrm-button-loading",""]],hostBindings:function(e,t){1&e&&i.\u0275\u0275listener("click",function(){return t.clickEvent()})},inputs:{state:["scrm-button-loading","state"]},features:[i.\u0275\u0275NgOnChangesFeature]}),e})();const go={theme:null,images:{}};let vo=(0,c.deepClone)(go),yo=null,bo=null,So=(()=>{class e{constructor(e,t,n){this.recordGQL=e,this.appStateStore=t,this.iconRegistry=n,this.store=new r.BehaviorSubject(vo),this.state$=this.store.asObservable(),this.resourceName="themeImages",this.frontendName="theme-images",this.fieldsMetadata={fields:["id","_id","items"]},this.images$=this.state$.pipe((0,o.map)(e=>e.images),(0,o.distinctUntilChanged)())}clear(){yo=null,bo=null,this.updateState((0,c.deepClone)(go))}clearAuthBased(){}changeTheme(e){this.appStateStore.updateLoading("change-theme",!0),this.load(e).pipe((0,o.tap)(()=>this.appStateStore.updateLoading("change-theme",!1))).subscribe()}getTheme(){return vo.theme}load(e){return this.getThemeImages(e).pipe((0,o.tap)(t=>{this.updateState(Object.assign(Object.assign({},vo),{images:t,theme:e}))}))}isCached(){return null!==bo}set(e,t){yo=e,this.registerSvgs(t),bo=(0,r.of)(t).pipe((0,o.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},vo),{images:t}))}updateState(e){this.store.next(vo=e)}getThemeImages(e){return(yo!==e||null===bo)&&(yo=e,bo=this.fetch(e).pipe((0,o.shareReplay)(1))),bo}registerSvgs(e){Object.keys(e).forEach(t=>{var n,i;const r=e[t],o=null!==(n=r.content)&&void 0!==n?n:"",s=null!==(i=r.name)&&void 0!==i?i:"";""===o||""===s||this.iconRegistry.addSvg(s,o)})}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/${this.frontendName}/${e}`,this.fieldsMetadata).pipe((0,o.map)(({data:e})=>{let t={};if(e&&e.themeImages&&(t=e.themeImages.items),!(0,c.emptyObject)(t)){const e={};return this.registerSvgs(t),Object.keys(t).forEach(n=>{var i;const r=null!==(i=t[n])&&void 0!==i?i:{},o=(0,m._T)(r,["content"]);e[n]=o}),e}return t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Zr),i.\u0275\u0275inject(no),i.\u0275\u0275inject(f.SvgIconRegistryService))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Co(e,t){if(1&e&&i.\u0275\u0275element(0,"svg-icon",3),2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275propertyInterpolate("name",e.name),i.\u0275\u0275property("svgClass",t.klass||"")("title",t.title||"")}}function wo(e,t){if(1&e&&i.\u0275\u0275element(0,"img",4),2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275classMap(t.klass),i.\u0275\u0275propertyInterpolate("src",e.path,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275property("title",t.title||"")}}function xo(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Co,1,3,"svg-icon",1),i.\u0275\u0275template(2,wo,1,5,"img",2),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","svg"===e.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","svg"!==e.type)}}function Io(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,xo,3,2,"ng-container",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.getImage(e,n.image))}}let Eo=(()=>{class e{constructor(e){this.themeImagesStore=e,this.klass="",this.title="",this.images$=this.themeImagesStore.images$,this.vm$=(0,r.combineLatest)([this.images$]).pipe((0,o.map)(([e])=>({images:e})))}getImage(e,t){if(!e||!e.images||Object.keys(e.images).length<1)return null;const n=e.images[t];return n||console.warn(`Image with name '${t}' not found`),n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(So))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-image"]],inputs:{image:"image",klass:"klass",title:"title"},decls:2,vars:3,consts:[[4,"ngIf"],["class","sicon",3,"svgClass","title","name",4,"ngIf"],["alt","",3,"src","class","title",4,"ngIf"],[1,"sicon",3,"svgClass","title","name"],["alt","",3,"src","title"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Io,2,1,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,f.SvgIconComponent],pipes:[p.AsyncPipe],encapsulation:2}),e})();function _o(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",15),i.\u0275\u0275elementStart(1,"a",16),i.\u0275\u0275element(2,"scrm-image",17),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",e.route),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.appListStrings.moduleList&&n.appListStrings.moduleList[e.label]," ")}}function Mo(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementStart(1,"div",2),i.\u0275\u0275elementStart(2,"form",3),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275elementStart(4,"input",5),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().searchTerm=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275elementStart(6,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().search()}),i.\u0275\u0275element(7,"scrm-image",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",9),i.\u0275\u0275elementStart(9,"div",10),i.\u0275\u0275elementStart(10,"div",11),i.\u0275\u0275elementStart(11,"button",12),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"ul",13),i.\u0275\u0275template(14,_o,4,2,"li",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275propertyInterpolate1("placeholder","",e.appStrings.LBL_SEARCH||"","..."),i.\u0275\u0275property("ngModel",n.searchTerm),i.\u0275\u0275advance(8),i.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_NEW||""," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",n.actionBar.createLinks)}}let jo=(()=>{class e{constructor(e,t){this.languageStore=e,this.globalSearch=t,this.searchTerm="",this.actionBar={createLinks:[{label:"Accounts",route:"/accounts/edit"},{label:"Contacts",route:"/contacts/edit"},{label:"Leads",route:"/leads/edit"},{label:"Opportunities",route:"/opportunities/edit"},{label:"AOS_Quotes",route:"/quotes/edit"},{label:"AOS_Contracts",route:"/contracts/edit"}],favoriteRecords:[]},this.languages$=this.languageStore.vm$,this.vm$=(0,r.combineLatest)([this.languages$]).pipe((0,o.map)(([e])=>({appStrings:e.appStrings||{},appListStrings:e.appListStrings||{}})))}search(){this.globalSearch.navigateToSearch(this.searchTerm).finally(()=>{this.clearSearchTerm()})}clearSearchTerm(){this.searchTerm=""}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(mo))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-action-bar-ui"]],decls:2,vars:3,consts:[["class","global-action-bar row pb-2 pt-2 mr-0",4,"ngIf"],[1,"global-action-bar","row","pb-2","pt-2","mr-0"],[1,"col-6"],["name","global-search",1,"global-search"],[1,"input-group"],["type","text","name","global-search-term","aria-label","Search","required","",1,"form-control","global-search-term",3,"ngModel","placeholder","ngModelChange"],[1,"input-group-append"],["aria-label","Search","scrm-button-loading","",1,"btn","btn-default","search-button",3,"click"],["image","search",1,"search-icon","sicon"],[1,"col","justify-content-right"],[1,"action-group"],[1,"action-new","dropdown"],["type","button","aria-label","Quick Create",1,"quickcreate-button","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-right"],["class","new-list-item",4,"ngFor","ngForOf"],[1,"new-list-item"],[3,"routerLink"],["image","plus",1,"action-btn-icon"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Mo,15,4,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,h.\u0275NgNoValidate,h.NgControlStatusGroup,h.NgForm,h.DefaultValueAccessor,h.RequiredValidator,h.NgControlStatus,h.NgModel,fo,Eo,p.NgForOf,u.RouterLinkWithHref],pipes:[p.AsyncPipe],encapsulation:2}),e})(),ko=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Lo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,f.AngularSvgIconModule]]}),e})(),Fo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo,u.RouterModule,h.FormsModule,ko]]}),e})();var Oo=(()=>{return(e=Oo||(Oo={})).XSmall="XSmall",e.Small="Small",e.Medium="Medium",e.Large="Large",e.XLarge="XLarge",Oo;var e})();let Do=(()=>{class e{constructor(e){this.breakpointObserver=e,this.screenSize=new r.BehaviorSubject(Oo.Medium),this.screenSize$=this.screenSize.asObservable(),this.initScreenSizeObservable()}initScreenSizeObservable(){(0,r.merge)(this.breakpointObserver.observe(["(max-width: 599.98px)"]).pipe((0,o.map)(e=>{if(e.matches)return Oo.XSmall})),this.breakpointObserver.observe(["(min-width: 600px) and (max-width: 959.98px)"]).pipe((0,o.map)(e=>{if(e.matches)return Oo.Small})),this.breakpointObserver.observe(["(min-width: 960px) and (max-width: 1279.98px)"]).pipe((0,o.map)(e=>{if(e.matches)return Oo.Medium})),this.breakpointObserver.observe(["(min-width: 1280px) and (max-width: 1919.98px)"]).pipe((0,o.map)(e=>{if(e.matches)return Oo.Large})),this.breakpointObserver.observe(["(min-width: 1920px)"]).pipe((0,o.map)(e=>{if(e.matches)return Oo.XLarge}))).subscribe(e=>{e&&this.screenSize.next(e)})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(w))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ao(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.labelKey,e.module)," ")}}function No(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.language.getListLabel(e.listKey,e.labelKey)," ")}}function Ro(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ao,2,1,"ng-container",0),i.\u0275\u0275template(2,No,2,1,"ng-container",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.listKey&&e.labelKey),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.listKey&&e.labelKey)}}let To=(()=>{class e{constructor(e){this.language=e,this.labelKey="",this.module=null,this.listKey=null,this.languages$=this.language.vm$}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-label"]],inputs:{labelKey:"labelKey",module:"module",listKey:"listKey"},decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Ro,3,2,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.languages$))},directives:[p.NgIf],pipes:[p.AsyncPipe],encapsulation:2}),e})();function Po(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-image",3),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")("title",e.language.getFieldLabel(e.config.titleKey||""))}}function Bo(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-label",4),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("labelKey",e.config.labelKey)}}const $o=["*"];let Vo=(()=>{class e{constructor(e){this.language=e,this.clickBuffer=new r.Subject,this.clickBuffer$=this.clickBuffer.asObservable(),this.subs=[]}ngOnInit(){var e,t,n,i;const r=null!==(t=null===(e=this.config)||void 0===e?void 0:e.debounceClick)&&void 0!==t?t:null;this.clickCallBack=null!==(i=null===(n=this.config)||void 0===n?void 0:n.onClick)&&void 0!==i?i:null;const s=this.getDebounceTime();r&&this.clickCallBack&&this.subs.push(this.clickBuffer$.pipe((0,o.debounceTime)(s)).subscribe(e=>{this.clickCallBack(null!=e?e:null)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}runClick(e){var t,n;const i=null!==(n=null===(t=this.config)||void 0===t?void 0:t.debounceClick)&&void 0!==n?n:null;if(this.clickCallBack){if(i&&this.clickCallBack)return void this.clickBuffer.next(null!=e?e:null);this.clickCallBack(null!=e?e:null)}}getDebounceTime(){var e,t;let n=null!==(t=null===(e=this.config)||void 0===e?void 0:e.clickDebounceTime)&&void 0!==t?t:1e3;return isFinite(n)||(n=1e3),n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-button"]],inputs:{config:"config"},ngContentSelectors:$o,decls:5,vars:5,consts:[["type","button",3,"ngClass","title","click"],[3,"image","klass","title",4,"ngIf"],[3,"labelKey",4,"ngIf"],[3,"image","klass","title"],[3,"labelKey"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"button",0),i.\u0275\u0275listener("click",function(){return t.runClick()}),i.\u0275\u0275template(1,Po,1,3,"scrm-image",1),i.\u0275\u0275text(2),i.\u0275\u0275template(3,Bo,1,1,"scrm-label",2),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("ngClass",t.config.klass)("title",t.language.getFieldLabel(t.config.titleKey)||""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.config.icon),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.config.label||""," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.config.labelKey))},directives:[p.NgClass,p.NgIf,Eo,To],encapsulation:2}),e})();function zo(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-image",5),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("image",e.item.icon)}}function Uo(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-image",5),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("image",e.icon)}}function Ko(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"li",9),i.\u0275\u0275elementStart(1,"a",10),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext(2).click(t)}),i.\u0275\u0275template(2,Uo,1,1,"scrm-image",2),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",e&&e.klass),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.icon),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e&&e.label," ")}}function Zo(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275elementStart(1,"ul",7),i.\u0275\u0275template(2,Ko,4,3,"li",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngbCollapse",e.isCollapsed),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",e.item.items)}}const Go=["*"];let Ho=(()=>{class e{constructor(){this.itemClicked=new i.EventEmitter,this.isCollapsed=!0}ngOnInit(){}click(e){e&&e.onClick&&e.onClick(),this.itemClicked.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dropdown-submenu"]],inputs:{item:"item"},outputs:{itemClicked:"item-clicked"},ngContentSelectors:Go,decls:8,vars:3,consts:[[1,"dropdown-submenu-items-container"],[1,"dropdown-submenu-parent-button","dropdown-item","dropdown-toggle",3,"click"],[3,"image",4,"ngIf"],[3,"ngbCollapse",4,"ngIf"],[1,"dropdown-submenu-extra"],[3,"image"],[3,"ngbCollapse"],[1,"dropdown-submenu","pl-2","mb-1"],["class","dropdown-submenu-item dropdown-item",4,"ngFor","ngForOf"],[1,"dropdown-submenu-item","dropdown-item"],[1,"action-link","dropdown-submenu-item-link",3,"ngClass","click"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div",0),i.\u0275\u0275elementStart(2,"a",1),i.\u0275\u0275listener("click",function(){return t.isCollapsed=!t.isCollapsed}),i.\u0275\u0275template(3,zo,1,1,"scrm-image",2),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Zo,3,2,"div",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",4),i.\u0275\u0275projection(7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.item&&t.item.icon),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.item&&t.item.label," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.item&&t.item.items.length))},directives:[p.NgIf,Eo,I.NgbCollapse,p.NgForOf,p.NgClass],encapsulation:2}),e})();function Wo(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-image",7),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")}}function qo(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.config.label," ")}}function Qo(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-label",8),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",e.config.labelKey)}}function Yo(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275element(1,"scrm-image",7),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("image",e.icon)("klass",e.iconKlass||"")}}function Xo(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",9),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(1);return t&&n.click(t.onClick,r)}),i.\u0275\u0275elementStart(2,"div",10),i.\u0275\u0275template(3,Yo,2,2,"div",4),i.\u0275\u0275elementStart(4,"div",11),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",e&&e.klass),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.icon),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",e&&e.label," ")}}function Jo(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"scrm-dropdown-submenu",12),i.\u0275\u0275listener("item-clicked",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275nextContext(2),n=i.\u0275\u0275reference(1);return t.close(n)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("item",e)}}function es(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Xo,6,3,"ng-container",4),i.\u0275\u0275template(2,Jo,2,1,"ng-container",4),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e&&!n.isDropdown(e)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e&&n.isDropdown(e))}}const ts=["*"];let ns=(()=>{class e{constructor(e){this.language=e,this.disabled=!1,this.autoClose=!0}isDropdown(e){return!!e&&"items"in e}click(e,t){e(),t.close()}close(e){e.close()}ngOnInit(){this.config&&!this.config.placement&&(this.config.placement=["bottom-left","bottom-right","top-left","top-right"])}getPlacement(){return this.config&&!this.config.placement?["bottom-left","bottom-right","top-left","top-right"]:this.config.placement}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dropdown-button"]],inputs:{config:"config",disabled:"disabled",autoClose:"autoClose"},ngContentSelectors:ts,decls:9,vars:10,consts:[["ngbDropdown","",1,"d-inline-block","dropdown-button",3,"autoClose","placement","ngClass"],["dropDown","ngbDropdown"],["ngbDropdownToggle","",3,"disabled","ngClass","title"],[3,"image","klass",4,"ngIf"],[4,"ngIf"],["ngbDropdownMenu",""],[4,"ngFor","ngForOf"],[3,"image","klass"],[3,"labelKey"],["ngbDropdownItem","",3,"ngClass","click"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[3,"item","item-clicked"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div",0,1),i.\u0275\u0275elementStart(2,"button",2),i.\u0275\u0275template(3,Wo,1,2,"scrm-image",3),i.\u0275\u0275template(4,qo,2,1,"ng-container",4),i.\u0275\u0275template(5,Qo,2,1,"ng-container",4),i.\u0275\u0275projection(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",5),i.\u0275\u0275template(8,es,3,2,"ng-container",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("autoClose",t.autoClose)("placement",t.getPlacement())("ngClass",t.config.wrapperKlass),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",t.disabled)("ngClass",t.config.klass)("title",t.language.getFieldLabel(t.config.titleKey)||""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.config.icon),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.config.label),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.config.label&&t.config.labelKey),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",t.config.items))},directives:[I.NgbDropdown,p.NgClass,I.NgbDropdownToggle,p.NgIf,I.NgbDropdownMenu,p.NgForOf,Eo,To,I.NgbDropdownItem,Ho],encapsulation:2}),e})();function is(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-button",4),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("config",e)}}function rs(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-dropdown-button",4),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("config",e)}}function os(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,is,1,1,"scrm-button",3),i.\u0275\u0275template(2,rs,1,1,"scrm-dropdown-button",3),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e&&!n.isDropdown(e)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e&&n.isDropdown(e))}}function ss(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-dropdown-button",5),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("config",e.dropdownConfig)}}function as(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,os,3,2,"ng-container",1),i.\u0275\u0275template(2,ss,1,1,"scrm-dropdown-button",2),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.buttons.expanded),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.buttons.collapsed.length)}}let ls=(()=>{class e{constructor(){this.buttons={expanded:[],collapsed:[]}}ngOnInit(){this.sub=this.config$.subscribe(e=>{this.internalConfig=Object.assign({},e),this.splitButtons()})}ngOnDestroy(){this.sub.unsubscribe()}isDropdown(e){return!!e&&"items"in e}buildDropdownConfig(){var e,t;let n=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(n=n.concat(this.internalConfig.buttonKlass)),(null===(t=null===(e=null==this?void 0:this.internalConfig)||void 0===e?void 0:e.dropdownOptions)||void 0===t?void 0:t.klass)&&(n=n.concat(this.internalConfig.dropdownOptions.klass));let i=["button-group-dropdown"];const r=this.internalConfig.dropdownOptions,o=r&&r.wrapperKlass;o&&o.length>0&&(i=i.concat(o)),this.dropdownConfig={label:this.internalConfig.dropdownLabel,klass:[...n],wrapperKlass:i,items:this.buttons.collapsed},this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.placement&&(this.dropdownConfig.placement=this.internalConfig.dropdownOptions.placement),this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.icon&&(this.dropdownConfig.icon=this.internalConfig.dropdownOptions.icon)}getBreakpoint(){return this.internalConfig.breakpoint?this.internalConfig.breakpoint:4}splitButtons(){if(this.buttons.expanded=[],this.buttons.collapsed=[],!this.internalConfig.buttons||this.internalConfig.buttons.length<1)return;let e=0;this.internalConfig.buttons.forEach(t=>{if(t){if(e<this.getBreakpoint()){let e=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(e=e.concat(this.internalConfig.buttonKlass));const n=Object.assign({},t);c.Button.appendClasses(n,[...e]),this.buttons.expanded.push(n)}else this.buttons.collapsed.push(Object.assign({},t));e++}}),this.buildDropdownConfig()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-button-group"]],inputs:{config$:"config$"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["autoClose","outside",3,"config",4,"ngIf"],[3,"config",4,"ngIf"],[3,"config"],["autoClose","outside",3,"config"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,as,3,2,"div",0),2&e&&i.\u0275\u0275property("ngIf",t.config$)},directives:[p.NgIf,p.NgForOf,Vo,ns],encapsulation:2}),e})();function cs(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-button-group",2),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("config$",e.config$)}}function ds(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,cs,1,1,"scrm-button-group",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("",e.klass," float-right"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.config$)}}let us=(()=>{class e{constructor(e,t,n){this.languages=e,this.screenSize=t,this.systemConfigStore=n,this.klass="",this.buttonClass="btn btn-sm",this.configState=new r.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.buttonGroupClass="dropdown-button-secondary",this.screen=Oo.Medium,this.defaultBreakpoint=3}ngOnInit(){this.vm$=(0,r.combineLatest)([this.config.getActions(),this.screenSize.screenSize$,this.languages.vm$]).pipe((0,o.map)(([e,t,n])=>(t&&(this.screen=t),this.configState.next(this.getButtonGroupConfig(e)),{actions:e,screenSize:t,languages:n})))}isXSmallScreen(){return this.screen===Oo.XSmall}getButtonGroupConfig(e){const t=[],n=[];e.forEach(e=>{const i=this.buildButton(e);e.params&&e.params.expanded?t.push(i):n.push(i)});let i=this.getBreakpoint();t.length<i&&(i=t.length);const r=t.concat(n);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:i,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupClass]},buttons:r}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue("recordview_actions_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){const t={label:e.label||"",klass:this.buttonClass,titleKey:e.titleKey||"",onClick:()=>{this.config.runAction(e,this.actionContext)}};return e.icon&&(t.icon=e.icon),e.status&&c.Button.appendClasses(t,[e.status]),e.klass&&c.Button.appendClasses(t,e.klass),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(Do),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-action-group-menu"]],inputs:{klass:"klass",buttonClass:"buttonClass",actionContext:"actionContext",config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,ds,3,4,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,ls],pipes:[p.AsyncPipe],encapsulation:2}),e})(),ps=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo,I.NgbModule]]}),e})(),hs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),ms=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,I.NgbDropdownModule,Lo,ps,hs,I.NgbTooltipModule]]}),e})(),fs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo,hs,I.NgbTooltipModule]]}),e})(),gs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs,ms]]}),e})(),vs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo,fs,gs]]}),e})();function ys(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementStart(1,"div",2),i.\u0275\u0275elementStart(2,"button",3),i.\u0275\u0275elementStart(3,"label",4),i.\u0275\u0275elementStart(4,"input",5),i.\u0275\u0275listener("change",function(){const t=i.\u0275\u0275restoreView(e).ngIf;return i.\u0275\u0275nextContext().toggleSelection(t.status)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"span",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"span",7),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",8),i.\u0275\u0275elementStart(9,"a",9),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().selectAll()}),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"a",10),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().selectPage()}),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"a",11),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().deselectAll()}),i.\u0275\u0275text(14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(15,"scrm-dropdown-button",12),i.\u0275\u0275elementEnd()}if(2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275property("checked",n.checked(e.status))("indeterminate",n.intermediate(e.status)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate2("",e.count>0&&e.appStrings.LBL_LISTVIEW_SELECTED_OBJECTS||""," ",e.count>0?e.count:"",""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LISTVIEW_OPTION_ENTIRE||""," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LISTVIEW_OPTION_CURRENT||""," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LISTVIEW_NONE||""," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",e.count<1)("config",n.getDropdownConfig(e.actions,e.appStrings))}}let bs=(()=>{class e{constructor(e){this.languageStore=e,this.appStrings$=this.languageStore.appStrings$,this.vm$=null}ngOnInit(){const e=this.selectionSource.getSelectionStatus(),t=this.selectionSource.getSelectedCount(),n=this.actionSource.getBulkActions();this.vm$=(0,r.combineLatest)([this.appStrings$,e,t,n]).pipe((0,o.map)(([e,t,n,i])=>({appStrings:e,status:t,count:n,actions:i})))}checked(e){return e===c.SelectionStatus.ALL}intermediate(e){return e===c.SelectionStatus.SOME||e===c.SelectionStatus.PAGE}selectPage(){this.selectionSource.updateSelection(c.SelectionStatus.PAGE)}selectAll(){this.selectionSource.updateSelection(c.SelectionStatus.ALL)}deselectAll(){this.selectionSource.updateSelection(c.SelectionStatus.NONE)}toggleSelection(e){this.selectionSource.updateSelection(e!==c.SelectionStatus.ALL?c.SelectionStatus.ALL:c.SelectionStatus.NONE)}getDropdownConfig(e,t){const n={label:t&&t.LBL_BULK_ACTION_BUTTON_LABEL||"",klass:["bulk-action-button","btn","btn-sm"],wrapperKlass:["bulk-action-group","float-left"],items:[]};return Object.keys(e).forEach(i=>{const r=e[i];n.items.push({label:t&&t[r.labelKey]||"",klass:[`${i}-bulk-action`],onClick:()=>{this.actionSource.executeBulkAction(r.key)}})}),n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-bulk-action-menu"]],inputs:{selectionSource:"selectionSource",actionSource:"actionSource"},decls:2,vars:3,consts:[["class","bulk-action float-left",4,"ngIf"],[1,"bulk-action","float-left"],["ngbDropdown","",1,"dropdown","select-action-group","float-left"],["type","button","ngbDropdownToggle","","aria-haspopup","true","aria-expanded","false","aria-hidden","true","aria-label","Select Action Menu",1,"bulk-action-button","dropdown-toggle","btn","btn-sm"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","indeterminate","change"],[1,"checkmark"],[1,"bulk-action-selected-number"],["ngbDropdownMenu","","aria-hidden","true",1,"dropdown-menu"],[1,"dropdown-item","select-all",3,"click"],[1,"dropdown-item","select-page",3,"click"],[1,"dropdown-item","deselect-all",3,"click"],[3,"disabled","config"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,ys,16,9,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,I.NgbDropdown,I.NgbDropdownToggle,I.NgbDropdownMenu,ns],pipes:[p.AsyncPipe],encapsulation:2}),e})(),Ss=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,I.NgbModule,ms]]}),e})(),Cs=(()=>{class e{constructor(){}addOnClickPartial(e,t){const n=Object.assign({},e);if(e&&"items"in n){const e=n.items;return n.items=[],e.forEach(e=>{n.items.push(this.addOnClickPartial(e,t))}),n}return n.onClick=n.onClick&&(0,E.Z)(n.onClick,t),n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ws=(()=>{class e{constructor(e){this.elementRef=e,this.height=300,this.view=[300,this.height]}onResize(){this.calculateView()}calculateView(){let e;const t=this.elementRef&&this.elementRef.nativeElement||{},n=t.parentElement&&t.parentElement.parentElement||{},i=n&&n.offsetWidth||0;i>0?e=i:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view=[e,this.height]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],inputs:{dataSource:"dataSource"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),xs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})();function Is(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275element(1,"scrm-label",3),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",e.labelKey)}}let Es=(()=>{class e{constructor(e){this.language=e,this.labelKey=""}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-chart-message-area"]],inputs:{labelKey:"labelKey"},decls:2,vars:1,consts:[[1,"d-flex","mb-4","mt-4","justify-content-center"],["class","lead",4,"ngIf"],[1,"lead"],[3,"labelKey"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Is,2,1,"div",1),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.labelKey))},directives:[p.NgIf,To],encapsulation:2}),e})();function _s(e,t){1&e&&i.\u0275\u0275element(0,"scrm-chart-message-area",2)}function Ms(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ngx-charts-pie-grid",3),i.\u0275\u0275listener("resize",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onResize()},!1,i.\u0275\u0275resolveWindow),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("animations",!1)("view",e.view)("scheme",e.scheme)("label",e.language.getFieldLabel(e.label))("results",e.results)}}let js=(()=>{class e extends ws{constructor(e,t){super(t),this.language=e,this.elementRef=t,this.height=700,this.view=[300,this.height],this.subs=[]}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.parseResults(e),this.calculateHeightBasedOnResults(),this.calculateView()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get label(){return this.dataSource.options.label||""}onResize(){this.calculateHeightBasedOnResults(),this.calculateView()}calculateHeightBasedOnResults(){if(this.results&&this.results.length){const e=Math.floor(this.view[0]/170);this.height=200*Math.floor(this.results.length/e)}else this.height=50}parseResults(e){this.results=[],e.singleSeries&&e.singleSeries.length&&e.singleSeries.forEach(e=>{const t=parseFloat(""+e.value);this.results.push(t?{name:e.name,value:t}:e)})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(i.ElementRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-pie-grid-chart"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[3,"animations","view","scheme","label","results","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[3,"animations","view","scheme","label","results","resize"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,_s,1,0,"scrm-chart-message-area",0),i.\u0275\u0275template(1,Ms,1,5,"ngx-charts-pie-grid",1)),2&e&&(i.\u0275\u0275property("ngIf",!t.results||!t.results.length||t.results.length<1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.results&&t.results.length>0))},directives:[p.NgIf,Es,_.PieGridComponent],encapsulation:2}),e})();function ks(e,t){1&e&&i.\u0275\u0275element(0,"scrm-chart-message-area",2)}function Ls(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()),2&e){const e=t.model,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.name),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.formatTooltipValue(e.value))}}function Fs(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ngx-charts-bar-vertical",3),i.\u0275\u0275listener("resize",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onResize()},!1,i.\u0275\u0275resolveWindow),i.\u0275\u0275template(1,Ls,4,2,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view)("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("legendPosition","below")("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabel)("yAxisTickFormatting",e.yAxisTickFormatting)}}let Os=(()=>{class e extends ws{constructor(e){super(e),this.elementRef=e,this.subs=[]}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.results=e.singleSeries}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get gradient(){return this.dataSource.options.gradient||!1}get xAxis(){return this.dataSource.options.xAxis||!1}get yAxis(){return!(0,c.isFalse)(this.dataSource.options.yAxis)}get legend(){return!(0,c.isFalse)(this.dataSource.options.legend)}get showXAxisLabel(){return this.dataSource.options.showXAxisLabel||!1}get showYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}get xAxisLabel(){return this.dataSource.options.xAxisLabel||""}get yAxisLabel(){return this.dataSource.options.yAxisLabel||""}get yAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting?this.dataSource.tickFormatting:null}formatTooltipValue(e){return this.dataSource&&this.dataSource.tooltipFormatting?this.dataSource.tooltipFormatting(e):e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-vertical-bar-chart"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],["class","vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[1,"vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","resize"],["tooltipTemplate",""]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,ks,1,0,"scrm-chart-message-area",0),i.\u0275\u0275template(1,Fs,3,14,"ngx-charts-bar-vertical",1)),2&e&&(i.\u0275\u0275property("ngIf",!t.results||!t.results.length||t.results.length<1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.results&&t.results.length>0))},directives:[p.NgIf,Es,_.BarVerticalComponent],encapsulation:2}),e})(),Ds=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,hs]]}),e})(),As=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,_.NgxChartsModule,Ds]]}),e})(),Ns=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,_.NgxChartsModule,Ds]]}),e})();function Rs(e,t){1&e&&i.\u0275\u0275element(0,"scrm-chart-message-area",2)}function Ts(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ngx-charts-line-chart",3),i.\u0275\u0275listener("resize",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onResize()},!1,i.\u0275\u0275resolveWindow),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view)("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("xScaleMin",e.xScaleMin)("xScaleMax",e.xScaleMax)("xAxisTicks",e.xAxisTicks)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("legendPosition","below")("autoScale",!0)("yAxisTickFormatting",e.yAxisTickFormatting)("xAxisTickFormatting",e.xAxisTickFormatting)("tooltipDisabled",e.tooltipDisabled)("yAxisLabel",e.yAxisLabel)}}let Ps=(()=>{class e extends ws{constructor(e){super(e),this.elementRef=e,this.subs=[]}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.results=e.multiSeries})),this.scheme=this.getScheme(),this.gradient=this.getGradient(),this.xAxis=this.getXAxis(),this.yAxis=this.getYAxis(),this.legend=this.getLegend(),this.xScaleMin=this.getXScaleMin(),this.xScaleMax=this.getXScaleMax(),this.xAxisTicks=this.getXAxisTicks(),this.showXAxisLabel=this.getShowXAxisLabel(),this.showYAxisLabel=this.getShowYAxisLabel(),this.xAxisLabel=this.getXAxisLabel(),this.yAxisLabel=this.getYAxisLabel(),this.yAxisTickFormatting=this.getYAxisTickFormatting(),this.xAxisTickFormatting=this.getXAxisTickFormatting(),this.tooltipDisabled=this.getTooltipDisabled()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getScheme(){return this.dataSource.options.scheme||"picnic"}getGradient(){return this.dataSource.options.gradient||!1}getXAxis(){return!(0,c.isFalse)(this.dataSource.options.xAxis)}getYAxis(){return!(0,c.isFalse)(this.dataSource.options.yAxis)}getLegend(){return!(0,c.isFalse)(this.dataSource.options.legend)}getXScaleMin(){return this.dataSource.options.xScaleMin||null}getXScaleMax(){return this.dataSource.options.xScaleMax||null}getXAxisTicks(){return this.dataSource.options.xAxisTicks||null}getShowXAxisLabel(){return!(0,c.isFalse)(this.dataSource.options.showXAxisLabel)}getShowYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}getXAxisLabel(){return this.dataSource.options.xAxisLabel||""}getYAxisLabel(){return this.dataSource.options.yAxisLabel||""}getYAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting&&this.dataSource.tickFormatting||null}getXAxisTickFormatting(){return this.dataSource.options.xAxisTickFormatting&&this.dataSource.tickFormatting||null}getTooltipDisabled(){return this.dataSource.options.tooltipDisabled||!1}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-line-chart"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],["class","line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[1,"line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel","resize"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Rs,1,0,"scrm-chart-message-area",0),i.\u0275\u0275template(1,Ts,1,20,"ngx-charts-line-chart",1)),2&e&&(i.\u0275\u0275property("ngIf",!t.results||!t.results.length||t.results.length<1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.results&&t.results.length>0))},directives:[p.NgIf,Es,_.LineChartComponent],encapsulation:2}),e})(),Bs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,_.NgxChartsModule,Ds]]}),e})();const $s=[Bs,Ns,As],Vs={"line-chart":Ps,"pie-grid":js,"vertical-bar":Os};let zs=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(Vs).forEach(e=>{this.register("default",e,Vs[e])})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Us(e,t){1&e&&i.\u0275\u0275element(0,"scrm-chart-message-area",2)}const Ks=function(e){return{dataSource:e}};function Zs(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",3),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.chartType)("ndcDynamicInputs",i.\u0275\u0275pureFunction1(2,Ks,e.dataSource))}}let Gs=(()=>{class e{constructor(e){this.registry=e,this.dataSource=null}get chartType(){return this.registry.get("default",this.type)}ngOnInit(){}isConfigured(){return!!(this.type&&this.dataSource&&this.chartType)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(zs))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-chart"]],inputs:{dataSource:"dataSource",type:"type"},decls:2,vars:2,consts:[["labelKey","LBL_BAD_CONFIG",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],["labelKey","LBL_BAD_CONFIG"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Us,1,0,"scrm-chart-message-area",0),i.\u0275\u0275template(1,Zs,1,4,"ndc-dynamic",1)),2&e&&(i.\u0275\u0275property("ngIf",!t.isConfigured()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isConfigured()))},directives:[p.NgIf,Es,N,D],encapsulation:2}),e})(),Hs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,...$s,R,Ds]]}),e})();function Ws(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"scrm-button",1),i.\u0275\u0275elementStart(1,"span",2),i.\u0275\u0275text(2,"\xd7"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("config",e.getConfig())}}let qs=(()=>{class e{constructor(){this.buttonClasses=["close-button"]}getConfig(){const e=c.Button.fromButton(this.config);return e.addClasses(this.buttonClasses),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-close-button"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"config",4,"ngIf"],[3,"config"],["aria-hidden","true"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Ws,3,1,"scrm-button",0),2&e&&i.\u0275\u0275property("ngIf",t.config)},directives:[p.NgIf,Vo],encapsulation:2}),e})(),Qs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs]]}),e})();function Ys(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-label",3),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("labelKey",e.titleKey)}}function Xs(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-close-button",4),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("config",e.close)}}const Js=[[["","modal-body",""]],[["","modal-footer",""]]],ea=["[modal-body]","[modal-footer]"];let ta=(()=>{class e{constructor(){this.klass="",this.headerKlass="",this.bodyKlass="",this.footerKlass="",this.titleKey="",this.closable=!1,this.close={klass:["btn","btn-outline-light","btn-sm"]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-modal"]],inputs:{klass:"klass",headerKlass:"headerKlass",bodyKlass:"bodyKlass",footerKlass:"footerKlass",titleKey:"titleKey",closable:"closable",close:"close"},ngContentSelectors:ea,decls:9,vars:13,consts:[[1,"modal-title"],[3,"labelKey",4,"ngIf"],[3,"config",4,"ngIf"],[3,"labelKey"],[3,"config"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(Js),i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275elementStart(2,"div",0),i.\u0275\u0275template(3,Ys,1,1,"scrm-label",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,Xs,1,1,"scrm-close-button",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div"),i.\u0275\u0275projection(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div"),i.\u0275\u0275projection(8,1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275classMap(t.klass),i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("modal-header ",t.headerKlass," d-flex align-items-center"),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.titleKey),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.closable),i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("modal-body ",t.bodyKlass,""),i.\u0275\u0275advance(2),i.\u0275\u0275classMapInterpolate1("modal-footer ",t.footerKlass,""))},directives:[p.NgIf,To,qs],encapsulation:2}),e})();function na(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",16),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.getColumnLabel(e.label)," ")}}function ia(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.getColumnLabel(e.label)," ")}}const ra=function(e){return[e]};let oa=(()=>{class e{constructor(e,t,n){this.appState=e,this.languageStore=t,this.modal=n,this.titleKey="LBL_COLUMN_SELECTOR_MODAL_TITLE"}drop(e){e.previousContainer===e.container?ce(e.container.data,e.previousIndex,e.currentIndex):function(e,t,n,i){const r=de(n,e.length-1),o=de(i,t.length);e.length&&t.splice(o,0,e.splice(r,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_COLUMN_SELECTOR_MODAL_TITLE")}getColumnLabel(e){return this.languageStore.getFieldLabel(e,this.appState.getModule())}ngOnInit(){this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}},this.saveButton={klass:["btn","modal-button-save"],labelKey:"LBL_COLUMN_SELECTOR_SAVE_BUTTON",onClick:()=>{this.modal.close({type:"close-button",displayed:this.displayed,hidden:this.hidden})}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(no),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(I.NgbActiveModal))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-columnchooser"]],inputs:{displayed:"displayed",hidden:"hidden"},decls:19,vars:16,consts:[["klass","column-chooser-modal",3,"closable","close","title","titleKey"],["modal-body",""],[1,"d-flex","bd-highlight"],[1,"p-2","flex-fill","bd-highlight","column-chooser-container"],[1,"column-chooser-title"],["labelKey","LBL_COLUMN_SELECTOR_DISPLAYED_COLS"],["cdkDropList","",1,"column-chooser-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["displayedList","cdkDropList"],["class","column-chooser-item column-displayed","cdkDrag","",4,"ngFor","ngForOf"],["labelKey","LBL_COLUMN_SELECTOR_HIDDEN_COLS"],["hiddenList","cdkDropList"],["class","column-chooser-item column-hidden","cdkDrag","",4,"ngFor","ngForOf"],["modal-footer",""],[1,"modal-buttons"],["data-dismiss","modal",3,"config"],[3,"config"],["cdkDrag","",1,"column-chooser-item","column-displayed"],["cdkDrag","",1,"column-chooser-item","column-hidden"]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"scrm-modal",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275elementStart(4,"h2",4),i.\u0275\u0275element(5,"scrm-label",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",6,7),i.\u0275\u0275listener("cdkDropListDropped",function(e){return t.drop(e)}),i.\u0275\u0275template(8,na,2,1,"div",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",3),i.\u0275\u0275elementStart(10,"h2",4),i.\u0275\u0275element(11,"scrm-label",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",6,10),i.\u0275\u0275listener("cdkDropListDropped",function(e){return t.drop(e)}),i.\u0275\u0275template(14,ia,2,1,"div",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"div",12),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275element(17,"scrm-button",14),i.\u0275\u0275element(18,"scrm-button",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275reference(7),n=i.\u0275\u0275reference(13);i.\u0275\u0275property("closable",!0)("close",t.closeButtonIcon)("title",t.getHeaderLabel())("titleKey",t.titleKey),i.\u0275\u0275advance(6),i.\u0275\u0275property("cdkDropListData",t.displayed)("cdkDropListConnectedTo",i.\u0275\u0275pureFunction1(12,ra,n)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.displayed),i.\u0275\u0275advance(4),i.\u0275\u0275property("cdkDropListData",t.hidden)("cdkDropListConnectedTo",i.\u0275\u0275pureFunction1(14,ra,e)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.hidden),i.\u0275\u0275advance(3),i.\u0275\u0275property("config",t.closeButton),i.\u0275\u0275advance(1),i.\u0275\u0275property("config",t.saveButton)}},directives:[ta,To,_e,p.NgForOf,Vo,Le],encapsulation:2}),e})(),sa=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,f.AngularSvgIconModule,Qs,hs]]}),e})(),aa=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Oe,Qs,sa,hs,fs]]}),e})();const la={userPreferences:{},loading:!1};let ca=(0,c.deepClone)(la),da=null,ua=(()=>{class e{constructor(e,t,n,i){var s,a;this.collectionGQL=e,this.config=t,this.processService=n,this.localStorage=i,this.store=new r.BehaviorSubject(ca),this.state$=this.store.asObservable(),this.saveBufferStore=new r.BehaviorSubject(!1),this.subs=[],this.resourceName="userPreferences",this.fieldsMetadata={fields:["id","_id","value","items"]},this.userPreferences$=this.state$.pipe((0,o.map)(e=>e.userPreferences),(0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading));const l=null!==(a=(null!==(s=t.getConfigValue("ui"))&&void 0!==s?s:{}).user_preferences_save_delay)&&void 0!==a?a:5e3;this.saveBuffer$=this.saveBufferStore.asObservable().pipe((0,o.debounceTime)(null!=l?l:5e3)),this.subs.push(this.saveBuffer$.subscribe(e=>{!e||this.saveUiPreferences()}))}clear(){da=null,this.updateState((0,c.deepClone)(la)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.clear()}getUserPreference(e){return ca.userPreferences&&ca.userPreferences[e]?ca.userPreferences[e]:null}getUi(e,t){var n,i,r;const o=e+"-"+t,s=this.storageLoad(e,o);return null!=s?s:null!==(r=(null!==(i=null===(n=null==ca?void 0:ca.userPreferences)||void 0===n?void 0:n.ui)&&void 0!==i?i:{})[o])&&void 0!==r?r:null}setUi(e,t,n){var i,r;const o=e+"-"+t;this.storageSave(e,o,n);const s=null!==(r=null===(i=null==ca?void 0:ca.userPreferences)||void 0===i?void 0:i.ui)&&void 0!==r?r:{};s[o]=n,ca.userPreferences.ui=s,this.saveBufferStore.next(!0)}saveUiPreferences(){this.processService.submit("save-ui-user-preferences",{preferences:ca.userPreferences.ui}).pipe((0,o.take)(1)).subscribe()}storageSave(e,t,n){let i=this.localStorage.get(t);i||(i={}),i[e]=n,this.localStorage.set(t,i)}storageLoad(e,t){const n=this.localStorage.get(t);return n&&n[e]?n[e]:null}load(){return this.updateState(Object.assign(Object.assign({},ca),{loading:!0})),this.getUserPreferences().pipe((0,o.tap)(e=>{this.updateState(Object.assign(Object.assign({},ca),{userPreferences:e,loading:!1}))}))}isCached(){return null!==da}set(e){da=(0,r.of)(e).pipe((0,o.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},ca),{userPreferences:e,loading:!1}))}updateState(e){this.store.next(ca=e)}getUserPreferences(){return null==da&&(da=this.fetch().pipe((0,o.shareReplay)(1))),da}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,o.map)(({data:e})=>{const t={};return e.userPreferences&&e.userPreferences.edges&&e.userPreferences.edges.forEach(e=>{!e.node.items||Object.keys(e.node.items).forEach(n=>{t[n]=e.node.items[n]})}),t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gr),i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(so),i.\u0275\u0275inject(io))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pa=(()=>{class e{getTrimmedInputValue(e){return"string"!=typeof e?e:e.trim()}isEmptyInputValue(e){return null==e||void 0===e||""===e||0===e.length}isEmptyTrimmedInputValue(e){return this.isEmptyInputValue(this.getTrimmedInputValue(e))}isEmptyBooleanInputValue(e){return this.isEmptyInputValue(e)||"false"===e||!1===e||""===e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ha=(()=>{class e{constructor(e,t,n){this.preferences=e,this.formUtils=t,this.locale=n}toUserFormat(e){if((0,c.isVoid)(e)||""===e)return"";const t=(0,p.formatNumber)(Number(e),this.locale);return this.replaceSeparators(t)}toInternalFormat(e){if(!e)return e;const t=this.getDecimalsSymbol()||".",n=this.getGroupSymbol()||",";let i=new RegExp(t,"g");"."===t&&(i=new RegExp("\\.","g"));let r=new RegExp(n,"g");return"."===n&&(r=new RegExp("\\.","g")),(e=(e=(e=e.replace(r,"group_separator")).replace(i,"decimal_separator")).replace(/decimal_separator/g,".")).replace(/group_separator/g,"")}getFloatUserFormatPattern(){const e=this.getGroupSymbol(),t=this.getDecimalsSymbol();let n="^(";return n+="(\\d{1,3}(\\"+e+"\\d{3})*(\\"+t+"\\d+)?)|",n+="\\d*|",n+="(\\d+(\\"+t+"\\d+)?)|",n+="(\\d+(\\.\\d+)?)",n+=")$",n}getIntUserFormatPattern(){let e="^(";return e+="(\\d{1,3}(\\"+this.getGroupSymbol()+"\\d{3})*)|",e+="\\d*",e+=")$",e}getGroupSymbol(){return this.preferences.getUserPreference("num_grp_sep")||","}getDecimalsSymbol(){return this.preferences.getUserPreference("dec_sep")||"."}replaceSeparators(e){if(!e)return e;e=(e=e.replace(/,/g,"group_separator")).replace(/\./g,"decimal_separator");const t=this.getDecimalsSymbol()||".",n=this.getGroupSymbol()||",";return(e=e.replace(/decimal_separator/g,t)).replace(/group_separator/g,n)}validateIntUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);if(this.formUtils.isEmptyInputValue(t)||new RegExp(this.getIntUserFormatPattern()).test(t))return!1}validateFloatUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getFloatUserFormatPattern()).test(t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ua),i.\u0275\u0275inject(pa),i.\u0275\u0275inject(i.LOCALE_ID))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ma=(()=>{class e{constructor(e,t,n){this.preferences=e,this.formUtils=t,this.locale=n,this.format$=(0,r.combineLatest)([this.preferences.userPreferences$]).pipe((0,o.map)(()=>({date:this.getDateFormat(),time:this.getTimeFormat()})))}getDateFormat(){return this.preferences.getUserPreference("date_format")||this.getInternalTimeFormat()}getTimeFormat(){const e=this.preferences.getUserPreference("time_format");if(e){let t=e;return t.includes("aaaaaa")&&(t=t.replace("aaaaaa","aaaaa'm'")),t}return this.getInternalTimeFormat()}getDateTimeFormat(){return this.getDateFormat()+" "+this.getTimeFormat()}getInternalDateFormat(){return"yyyy-MM-dd"}getInternalTimeFormat(){return"HH:mm:ss"}getInternalDateTimeFormat(){return this.getInternalDateFormat()+" "+this.getInternalTimeFormat()}getInternalFormat(){return this.getInternalDateTimeFormat()}getUserFormat(){return this.getDateTimeFormat()}toUserFormat(e,t){const n=t&&t.fromFormat||"";return e?this.formatDateTime(e,this.getUserFormat(),n):""}toInternalFormat(e,t){const n=t&&t.fromFormat||"";return e?this.formatDateTime(e,this.getInternalFormat(),n):""}formatDateTime(e,t,n=""){const i=this.toDateTime(e,n);return i.isValid?(0,p.formatDate)(i.toJSDate(),t,this.locale):e}toDateTime(e,t=""){if(!e)return De.DateTime.invalid("empty");if(t)return De.DateTime.fromFormat(e,t);let n=this.fromUserFormat(e);return n.isValid||(n=this.fromInternalFormat(e)),n}userDateTimeFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e);return t.isValid?{date:{day:t.day,month:t.month,year:t.year},time:{hour:t.hour,minute:t.minute,second:t.second}}:null}userDateFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e);return t.isValid?{day:t.day,month:t.month,year:t.year}:null}userTimeFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e);return t.isValid?{hour:t.hour,minute:t.minute,second:t.second}:null}fromUserFormat(e){e=(e=(e=(e=e.toString()).replace("a","A")).replace("p","P")).replace("m","M");let t=this.getUserFormat();return t=t.replace("aaaaa'm'","a"),De.DateTime.fromFormat(e,t)}fromInternalFormat(e){const t=this.getInternalFormat();return De.DateTime.fromFormat(e.toString(),t)}validateUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!this.fromUserFormat(t).isValid}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ua),i.\u0275\u0275inject(pa),i.\u0275\u0275inject(i.LOCALE_ID))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fa=(()=>{class e{constructor(e,t,n){this.preferences=e,this.numberFormatter=t,this.locale=n}toUserFormat(e,t=null){if((0,c.isVoid)(e)||""===e)return"";const n=t&&t.symbol||this.getSymbol(),i=t&&t.code||this.getCode();let r=null;t&&null!==t.digits&&isFinite(t.digits)&&(r=t.digits);const o=this.getDigitsInfo(r);let s;return t&&"edit"===t.mode?(s=(0,p.formatNumber)(Number(e),this.locale,o),this.replaceSeparators(s)):(s=(0,p.formatCurrency)(Number(e),this.locale,n,i,o),this.replaceSeparators(s))}toInternalFormat(e){if(!e)return"";const t=e.replace(this.getSymbol(),"");return this.numberFormatter.toInternalFormat(t)}getCurrencyFormat(){return this.preferences.getUserPreference("currency")||this.getDefaultFormat()}getDefaultFormat(){return{iso4217:"USD",name:"US Dollars",symbol:"$"}}getCode(){return this.getCurrencyFormat().iso4217}getSymbol(){return this.getCurrencyFormat().symbol}getDigits(){return this.preferences.getUserPreference("default_currency_significant_digits")||2}getDigitsInfo(e){let t="1.2-2",n=this.getDigits();return null!==e&&isFinite(e)&&(n=e),null!==n&&isFinite(n)&&(t=n<1?"1.0-0":`1.${n}-${n}`),t}replaceSeparators(e){return this.numberFormatter.replaceSeparators(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ua),i.\u0275\u0275inject(ha),i.\u0275\u0275inject(i.LOCALE_ID))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ga=(()=>{class e extends ma{getInternalFormat(){return this.getInternalDateFormat()}getUserFormat(){return this.getDateFormat()}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.\u0275\u0275getInheritedFactory(e)))(n||e)}}(),e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),va=(()=>{class e{constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return"^([\\+]?|00)((([(]{0,1}\\s*[0-9]{1,4}\\s*[)]{0,1})\\s*)*|([\\-\\s\\./0-9])*)+$"}validateUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getUserFormatPattern()).test(t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(pa))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ya=(()=>{class e{constructor(e,t,n,i,r){this.currencyFormatter=e,this.numberFormatter=t,this.dateFormatter=n,this.datetimeFormatter=i,this.phoneFormatter=r,this.map={},this.map.int=t,this.map.float=t,this.map.date=n,this.map.datetime=i,this.map.currency=e,this.map.phone=r}toUserFormat(e,t,n){if(!e)return t;const i=this.map[e];return i?i.toUserFormat(t,n):t}toInternalFormat(e,t){if(!e)return t;const n=this.map[e];return n?n.toInternalFormat(t):t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(fa),i.\u0275\u0275inject(ha),i.\u0275\u0275inject(ga),i.\u0275\u0275inject(ma),i.\u0275\u0275inject(va))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ba=(()=>{class e{constructor(e,t){this.typeFormatter=e,this.language=t,this.valuePipes={},this.fieldPipes={},this.valuePipes.int=e=>this.valueTypeFormat("int",e),this.valuePipes.float=e=>this.valueTypeFormat("float",e),this.valuePipes.date=e=>this.valueTypeFormat("date",e),this.valuePipes.datetime=e=>this.valueTypeFormat("datetime",e),this.valuePipes.currency=e=>this.valueTypeFormat("currency",e),this.valuePipes.phone=e=>this.valueTypeFormat("phone",e),this.fieldPipes.int=e=>this.fieldTypeFormat("int",e),this.fieldPipes.float=e=>this.fieldTypeFormat("float",e),this.fieldPipes.date=e=>this.fieldTypeFormat("date",e),this.fieldPipes.datetime=e=>this.fieldTypeFormat("datetime",e),this.fieldPipes.currency=e=>this.fieldTypeFormat("currency",e),this.fieldPipes.phone=e=>this.fieldTypeFormat("phone",e),this.fieldPipes.enum=e=>this.enumFormat(e),this.fieldPipes.dynamicenum=e=>this.enumFormat(e),this.fieldPipes.multienum=e=>this.multiEnumFormat(e)}addValuePipe(e,t){this.valuePipes[e]=t}addFieldPipe(e,t){this.fieldPipes[e]=t}parse(e,t,n){if(!e)return e;const i=e.match(/({{[\s\S]+?}})/g);if(!i||i.length<1)return e;let r=e;const o=t&&t.module||"";return i.forEach(e=>{if(!r.includes(e))return;let i="",s="",a="context",l=[],c=""+e;c=c.replace("{{",""),c=c.replace("}}",""),c=c.trim();let d=c;if(c.includes("|")){const[e,t]=c.split("|");i=t.trim(),c=e.trim(),d=e.trim()}c.includes(".")&&(l=c.split("."),a=l[0],c=l[1]);let u=t;if("fields"===a&&(u=n),u&&c in u){if("fields"===a){const t=n[c];return t?l[2]&&"value"===l[2]&&t.type in this.fieldPipes?(s=this.fieldPipes[t.type](t),void(r=r.replace(e,s))):l[2]&&"label"===l[2]?(s=this.getFieldLabel(t.labelKey,o),void(r=r.replace(e,s))):(s=(0,Ae.Z)({fields:n},d,""),void(r=r.replace(e,s))):void(r=r.replace(e,""))}s=(0,Ae.Z)({context:t},d,""),i in this.valuePipes&&(s=this.valuePipes[i](s)),r=r.replace(e,s)}else r=r.replace(e,s)}),r}valueTypeFormat(e,t){return this.typeFormatter.toUserFormat(e,t)}fieldTypeFormat(e,t){return this.typeFormatter.toUserFormat(e,t.value)}enumFormat(e){return(0,c.isVoid)(e.definition.options)||(0,c.isVoid)(e.value)?"":this.language.getListLabel(e.definition.options,e.value)}multiEnumFormat(e){if((0,c.isVoid)(e.definition.options)||(0,c.isVoid)(e.valueList)||e.valueList.length<1)return"";const t=[];return e.valueList.forEach(n=>{(0,c.isVoid)(n)||t.push(this.language.getListLabel(e.definition.options,n))}),t.join(", ")}getFieldLabel(e,t=""){return(0,c.isVoid)(e)?"":this.language.getFieldLabel(e,t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ya),i.\u0275\u0275inject(ho))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Sa(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.parsedLabel)}}let Ca=(()=>{class e{constructor(e,t){this.dynamicLabels=e,this.language=t,this.template="",this.labelKey="",this.context={},this.fields={},this.module=null,this.parsedLabel=""}ngOnInit(){this.vm$=this.language.vm$.pipe((0,o.tap)(()=>{this.labelKey&&(this.template=this.language.getFieldLabel(this.labelKey,this.module)),this.parseLabel()}))}ngOnChanges(e){(e.template||e.context||e.labelKey||e.fields)&&this.parseLabel()}parseLabel(){this.parsedLabel=this.dynamicLabels.parse(this.template,this.context,this.fields)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ba),i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dynamic-label"]],inputs:{template:"template",labelKey:"labelKey",context:"context",fields:"fields",module:"module"},features:[i.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dynamic-label"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Sa,3,1,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf],pipes:[p.AsyncPipe],encapsulation:2}),e})(),wa=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),xa=(()=>{class e{constructor(e){this.breakpointObserver=e,this.special=!1,this.actions=!1,this.appendActions=!1,this.labelDisplay="top",this.labelClass={},this.inputClass={},this.rowClass={},this.colClass={},this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.baseColClass={col:!0,"form-group":!0,"m-1":!0},this.baseRowClass={"form-row":!0,"align-items-center":!0},this.baseLabelClass={"col-form-label-sm":!0,"mb-0":!0},this.baseInputClass={"form-control":!0,"form-control-sm":!0},this.currentSize="web",this.subscriptions=[]}ngOnInit(){this.initScreenSizeObserver(this.breakpointObserver),this.buildGrid(),this.colClass=Object.assign(Object.assign({},this.colClass),this.baseColClass),this.rowClass=Object.assign(Object.assign({},this.rowClass),this.baseRowClass),this.labelClass=Object.assign(Object.assign({},this.labelClass),this.baseLabelClass),this.inputClass=Object.assign(Object.assign({},this.inputClass),this.baseInputClass)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get colNumber(){const e=this.sizeMap[this.currentSize];return this.maxColumns&&e>this.maxColumns?this.maxColumns:e}addSpecialSlots(e){if(!e||0===e.length)return;const t=this.getNeededExtraSlots();if(0!==t.length)if(1===this.colNumber)t.reverse().forEach(t=>{const n={cols:[]};this.fillRow(n),e.push(n),n.cols[0][t]=!0});else if(!0===this.appendActions){const n=e[e.length-1],i=this.colNumber-1;t.forEach(e=>{n.cols[i][e]=!0})}else{let n=e[e.length-1];n.cols[this.colNumber-t.length].field&&(n={cols:[]},this.fillRow(n),e.push(n));let i=this.colNumber-1;t.forEach(e=>{n.cols[i][e]=!0,i--})}}getNeededExtraSlots(){const e=[];return this.actions&&e.push("actionSlot"),this.special&&e.push("specialSlot"),e}fillRow(e){for(let t=e.cols.length;t<this.colNumber;t++)e.cols.push({})}initScreenSizeObserver(e){this.subscriptions.push(e.observe(["(max-width: 599.98px) and (orientation: portrait)"]).subscribe(e=>{e.matches&&(this.currentSize="handset",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)"]).subscribe(e=>{e.matches&&(this.currentSize="tablet",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)","(min-width: 840px) and (orientation: portrait)","(min-width: 1280px) and (orientation: landscape)"]).subscribe(e=>{e.matches&&(this.currentSize="web",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 1920px)"]).subscribe(e=>{e.matches&&(this.currentSize="wide",this.buildGrid())}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(w))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,inputs:{special:"special",actions:"actions",appendActions:"appendActions",labelDisplay:"labelDisplay",labelClass:"labelClass",inputClass:"inputClass",rowClass:"rowClass",colClass:"colClass",maxColumns:"maxColumns",sizeMap:"sizeMap"}}),e})(),Ia=(()=>{class e{constructor(){this.actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}}}run(e,t,n){!this.actions||!this.actions[t]||!this.actions[t][e.key]||this.actions[t][e.key].run(n,e)}getHandler(e,t){let n=e.key;return e&&e.asyncProcess&&(n="async-process"),this.actions&&this.actions[t]&&this.actions[t][n]?this.actions[t][n]:null}addHandler(e,t,n){this.actions[t]||(this.actions[t]={}),this.actions[t][e.key]=n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Ea extends c.ActionHandler{shouldDisplay(e){return!0}}let _a=(()=>{class e extends Ea{constructor(){super(),this.key="displayType",this.modes=["edit","detail","list","create","massupdate","filter"]}run(e,t){const n=e.record;if(!n||!e.field)return;const i=t.params&&t.params.activeOnFields||{},r=Object.keys(i),o=t.params&&t.params.activeOnAttributes||{},s=Object.keys(o);if(!r.length&&!s.length)return;const a=t.params&&t.params.targetDisplayType;if(!a)return;let l=this.isActive(r,n,i,s,o),c=e.field.defaultDisplay;l&&(c=a),e.field.display=c,(t.params&&t.params.resetOn||"none")===c&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}isActive(e,t,n,i,r){let o=this.areFieldsActive(e,t,n);return o||(o=this.areAttributesActive(i,t,r)),o}areAttributesActive(e,t,n){return e.some(e=>{const i=t.fields&&t.fields[e]||null,r=n[e]&&Object.keys(n[e]);if(i&&r&&r.length)return r.some(t=>{const r=n[e][t],o=i.attributes&&i.attributes[t];if(r&&r.length&&o)return this.isValueActive(o,r)})})}areFieldsActive(e,t,n){return e.some(e=>{const i=t.fields&&t.fields[e]||null,r=n[e];if(i&&r&&r.length)return this.isValueActive(i,r)})}isValueActive(e,t){let n=!1;return e.valueList&&e.valueList.length?(e.valueList.some(e=>t.some(t=>{if(t===e)return n=!0,!0})),n):(e.value&&t.some(t=>{t===e.value&&(n=!0)}),n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ma=(()=>{class e extends Ea{constructor(){super(),this.key="emailPrimarySelect",this.modes=["edit","create","massupdate"]}run(e,t){const n=e.field;if(!e.record||!n)return;const i=n.items;if(!n||!i||!i.length)return;const r=i.filter(e=>!(e&&e.attributes&&e.attributes.deleted));if(r&&1!==r.length)return;const o=r[0],s=o.fields&&o.fields["email-fields"]||{},a=s.attributes&&s.attributes.primary_address||null;a&&!(0,c.isTrue)(a.value)&&(a.value="true",a.formControl.setValue("true"),s.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ja=e=>t=>e.isEmptyTrimmedInputValue(t.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:t.value}}}}:null,ka=e=>t=>e.isEmptyBooleanInputValue(t.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:t.value}}}}:null;let La=(()=>{class e{constructor(e){this.utils=e}applies(e,t){return!(!t||!t.fieldDefinition||!t.fieldDefinition.required)}getValidator(e){return"boolean"===e.type?[ka(this.utils)]:[ja(this.utils)]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(pa))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fa=(()=>{class e extends Ea{constructor(e){super(),this.requiredValidator=e,this.key="required",this.modes=["edit","create","massupdate","filter"]}run(e,t){const n=e.record,i=e.field;if(!n||!i)return;const r=t.params&&t.params.activeOnFields||{},o=Object.keys(r),s=t.params&&t.params.activeOnAttributes||{},a=Object.keys(s);if(!o.length&&!a.length)return;const l=this.isActive(o,n,r,a,s);let c=!1,d=[...e.field.validators||[]];l&&(c=!0,d=d.concat(this.requiredValidator.getValidator(i))),e.field.definition.required=c,e.field.formControl.setValidators(d),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}isActive(e,t,n,i,r){let o=this.areFieldsActive(e,t,n);return o||(o=this.areAttributesActive(i,t,r)),o}areAttributesActive(e,t,n){return e.some(e=>{const i=t.fields&&t.fields[e]||null,r=n[e]&&Object.keys(n[e]);if(i&&r&&r.length)return r.some(t=>{const r=n[e][t],o=i.attributes&&i.attributes[t];if(r&&r.length&&o)return this.isValueActive(o,r)})})}areFieldsActive(e,t,n){return e.some(e=>{const i=t.fields&&t.fields[e]||null,r=n[e];if(i&&r&&r.length)return this.isValueActive(i,r)})}isValueActive(e,t){let n=!1;return e.valueList&&e.valueList.length?(e.valueList.some(e=>t.some(t=>{if(t===e)return n=!0,!0})),n):(e.value&&t.some(t=>{t===e.value&&(n=!0)}),n)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(La))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Oa=(()=>{class e{constructor(e,t){this.config=e,this.preferences=t}getFieldCurrencyValue(e,t){const n=this.isBase(e),i=this.getCurrencyId(t);if(!n&&null!==i)return e.value;const r=parseFloat(e.value);if(!isFinite(r))return e.value;const o=this.getUserCurrency();return this.baseToCurrency(o.id,r).toString()}baseToCurrency(e,t){const n=this.getConversionRate(e);return isFinite(n)?this.round(ar(t,n)):t}currencyToBase(e,t){const n=this.getConversionRate(e);return isFinite(n)?this.round(ur(t,n)):t}round(e){const t=this.getPrecision();return ir(e,t)}getCurrencyId(e){var t,n,i;return null!==(i=null===(n=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.currency_id)||void 0===n?void 0:n.value)&&void 0!==i?i:null}isBase(e){var t,n;return null!==(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.isBaseCurrency)&&void 0!==n&&n}getCurrency(e){var t;return null!==(t=this.config.getConfigValue("currencies")[e])&&void 0!==t?t:[]}getBaseCurrency(){return this.config.getConfigValue("currency")}getUserCurrency(){return this.preferences.getUserPreference("currency")}getPrecision(){const e=parseInt(this.preferences.getUserPreference("default_currency_significant_digits"));if(isFinite(e))return e;const t=parseInt(this.config.getConfigValue("default_currency_significant_digits"));return isFinite(t)?t:0}getConversionRate(e){const t=this.getCurrency(e);return parseFloat(t.conversion_rate)}getCode(e){return this.getCurrency(e).iso4217}getSymbol(e){return this.getCurrency(e).symbol}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Da=(()=>{class e extends Ea{constructor(e){super(),this.currencyService=e,this.key="update-base-currency",this.modes=["edit","create","massupdate","filter"]}run(e,t){var n,i,r,o,s,a;const l=e.record,c=e.field;if(!l||!c)return;const d=null!==(n=t.params.currencyIdField)&&void 0!==n?n:"currency_id",u=null!==(i=t.params.currencyField)&&void 0!==i?i:"amount",p=null!==(o=null===(r=null==l?void 0:l.fields[d])||void 0===r?void 0:r.value)&&void 0!==o?o:null;let h=parseFloat(null!==(a=null===(s=null==l?void 0:l.fields[u])||void 0===s?void 0:s.value)&&void 0!==a?a:null);if(!isFinite(h))return;null===p&&this.updateValue(c,h,l);const m=this.currencyService.currencyToBase(p,h);!isFinite(m)||this.updateValue(c,m,l)}updateValue(e,t,n){e.value=t.toString(),e.formControl.setValue(t.toString()),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Oa))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Aa=(()=>{class e extends Ea{constructor(e){super(),this.currencyService=e,this.key="update-currency",this.modes=["edit","create","massupdate","filter"]}run(e,t){var n,i,r,o,s,a,l,c,d,u;const p=e.record,h=e.field,m=null!==(r=null===(i=null===(n=null==h?void 0:h.definition)||void 0===n?void 0:n.metadata)||void 0===i?void 0:i.isBaseCurrency)&&void 0!==r&&r;if(!p||!h||m)return;const f=null!==(o=t.params.currencyIdField)&&void 0!==o?o:"currency_id",g=null!==(s=t.params.baseCurrencyField)&&void 0!==s?s:"amount_usdollar",v=null!==(l=null===(a=null==p?void 0:p.fields[f])||void 0===a?void 0:a.value)&&void 0!==l?l:null;let y=parseFloat(null!==(c=null==h?void 0:h.value)&&void 0!==c?c:null),b=parseFloat(null!==(u=null===(d=null==p?void 0:p.fields[g])||void 0===d?void 0:d.value)&&void 0!==u?u:null);if(!isFinite(y)||!isFinite(b)||null===v)return;const S=this.currencyService.baseToCurrency(v,b);!isFinite(S)||this.updateValue(h,S,p)}updateValue(e,t,n){e.value=t.toString(),e.formControl.setValue(t.toString()),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Oa))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Na=(()=>{class e extends Ea{constructor(){super(),this.key="update-flex-relate-module",this.modes=["edit","create","massupdate","filter"]}run(e,t){var n,i,r,o,s,a,l;const c=e.record,d=e.field;if(!c||!d)return;const u=null!==(n=d.definition.type_name)&&void 0!==n?n:"";""!==u&&(null!==(r=null===(i=null==c?void 0:c.fields[u])||void 0===i?void 0:i.value)&&void 0!==r?r:"")!==(null!==(s=null===(o=null==d?void 0:d.definition)||void 0===o?void 0:o.module)&&void 0!==s?s:"")&&(d.definition.module=null!==(l=null===(a=null==c?void 0:c.fields[u])||void 0===a?void 0:a.value)&&void 0!==l?l:"",this.updateValue(d,{},"",c))}updateValue(e,t,n,i){e.value=n,e.valueObject=t,e.formControl.setValue(n),i.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ra=(()=>{class e extends Ia{constructor(e,t,n,i,r,o){super(),e.modes.forEach(t=>this.actions[t][e.key]=e),t.modes.forEach(e=>this.actions[e][t.key]=t),n.modes.forEach(e=>this.actions[e][n.key]=n),i.modes.forEach(e=>this.actions[e][i.key]=i),r.modes.forEach(e=>this.actions[e][r.key]=r),o.modes.forEach(e=>this.actions[e][o.key]=o)}runLogic(e,t,n){if(!e.logic)return;const i=Object.keys(e.logic).map(t=>e.logic[t]),r=this.parseModeActions(i,t),o={record:n,field:e,module:n.module};r.forEach(e=>{this.runAction(e,t,o)})}runAction(e,t,n=null){this.runFrontEndAction(e,t,n)}runFrontEndAction(e,t,n=null){const i=this.buildActionData(e,n);this.run(e,t,i)}getModuleName(e){return e.module}buildActionData(e,t){return{field:t.field,record:t&&t.record||null}}parseModeActions(e,t){if(!e)return[];const n={list:[],detail:[],edit:[],create:[],massupdate:[],filter:[]};e&&e.length&&e.forEach(e=>{!e.modes||!e.modes.length||e.modes.forEach(t=>{!n[t]&&!e.asyncProcess||n[t].push(e)})});const i=[];return n[t].forEach(e=>{i.push(e)}),i}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(_a),i.\u0275\u0275inject(Ma),i.\u0275\u0275inject(Fa),i.\u0275\u0275inject(Da),i.\u0275\u0275inject(Aa),i.\u0275\u0275inject(Na))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ta=(()=>{class e{constructor(e,t){this.typeFormatter=e,this.logic=t,this.klass=null,this.dependentFields=[],this.dependentAttributes=[],this.subs=[]}ngOnInit(){this.baseInit()}baseInit(){this.initDependencyHandlers()}initDependencyHandlers(){if(!this.record)return;const e=this.record.fields&&Object.keys(this.record.fields)||[];e.length>1&&(this.calculateDependentFields(e),this.field.valueChanges$&&(this.dependentFields.length||this.dependentAttributes.length)&&this.subs.push(this.field.valueChanges$.pipe((0,o.debounceTime)(500)).subscribe(()=>{this.dependentFields.forEach(e=>{const t=this.record.fields[e]||null;!t||this.logic.runLogic(t,this.mode,this.record)}),this.dependentAttributes.forEach(e=>{const t=this.record.fields[e.field]||{},n=t&&t.attributes&&t.attributes[e.attribute]||null;!n||this.logic.runLogic(n,this.mode,this.record)})})))}calculateDependentFields(e){e.forEach(e=>{"field"!==this.field.source?"attribute"!==this.field.source||this.addAttributeDependency(e,this.dependentFields,this.dependentAttributes):this.addFieldDependency(e,this.dependentFields,this.dependentAttributes)})}addFieldDependency(e,t,n){const i=this.record.fields[e];e!==(this.field.name||this.field.definition.name||"")&&i&&(i.fieldDependencies&&i.fieldDependencies.length&&this.isDependencyField(i.fieldDependencies)&&t.push(e),(i.attributes&&Object.keys(i.attributes)||[]).forEach(t=>{const r=i.attributes[t];!r||!r.fieldDependencies||!r.fieldDependencies.length||this.isDependencyField(r.fieldDependencies)&&n.push({field:e,attribute:t})}))}isDependencyField(e){const t=this.field.name||this.field.definition.name||"";return e.some(e=>t===e)}addAttributeDependency(e,t,n){const i=this.record.fields[e];e!==(this.field.name||this.field.definition.name||"")&&i&&(i.attributeDependencies&&i.attributeDependencies.length&&this.isDependencyAttribute(i.attributeDependencies)&&t.push(e),(i.attributes&&Object.keys(i.attributes)||[]).forEach(t=>{const r=i.attributes[t];!r||!r.attributeDependencies||!r.attributeDependencies.length||this.isDependencyAttribute(r.attributeDependencies)&&n.push({field:e,attribute:t})}))}isDependencyAttribute(e){const t=this.field.parentKey||"",n=this.field.name||this.field.definition.name||"";return e.some(e=>t===e.field&&n===e.attribute)}subscribeValueChanges(){this.field&&this.field.formControl&&this.subs.push(this.field.formControl.valueChanges.subscribe(e=>{e=(0,c.isVoid)(e)?"":e.trim(),this.typeFormatter&&this.field.type&&(e=this.typeFormatter.toInternalFormat(this.field.type,e)),this.setFieldValue(e)}))}setFieldValue(e){this.field.value=e}unsubscribeAll(){this.subs.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],inputs:{mode:"mode",field:"field",record:"record",parent:"parent",klass:"klass"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),Pa=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}getTelLink(e){return e?"tel:"+this.getUnFormatted(e):null}getUnFormatted(e){return e?e.replace(/\s+/g,""):""}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-phone-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[3,"href"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"a",0),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("href",t.getTelLink(t.field.value),i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(t.field.value))},encapsulation:2}),e})(),Ba=(()=>{class e extends Ta{constructor(e,t,n){super(t,n),this.languages=e,this.typeFormatter=t,this.logic=n,this.selectedValues=[],this.valueLabel="",this.options=[],this.subs=[],this.isDynamicEnum=!1}ngOnInit(){super.ngOnInit(),this.field.metadata&&this.field.metadata.options$?this.subs.push(this.field.metadata.options$.subscribe(e=>{this.buildProvidedOptions(e),this.initValue()})):this.field.definition&&this.field.definition.options&&this.subs.push(this.languages.vm$.subscribe(e=>{this.buildAppStringListOptions(e.appListStrings),this.initValue()}))}ngOnDestroy(){this.isDynamicEnum=!1,this.subs.forEach(e=>e.unsubscribe())}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched?"is-invalid":""}buildProvidedOptions(e){this.options=e,this.optionsMap={},e.forEach(e=>{this.optionsMap[e.value]=e.label})}buildAppStringListOptions(e){if(this.optionsMap={},this.addExtraOptions(),e&&this.field.definition.options&&e[this.field.definition.options]){const t=e[this.field.definition.options];this.options&&Object.keys(this.options)&&(this.optionsMap=Object.assign(Object.assign({},this.optionsMap),t))}this.buildOptionsArray(e)}addExtraOptions(){(this.field.metadata&&this.field.metadata.extraOptions||[]).forEach(e=>{if((0,c.isVoid)(e.value))return;let t=e.label||"";e.labelKey&&(t=this.languages.getFieldLabel(e.labelKey)),this.optionsMap[e.value]=t})}buildOptionsArray(e){this.options=[],Object.keys(this.optionsMap).forEach(e=>{this.options.push({value:e,label:this.optionsMap[e]})}),this.isDynamicEnum&&this.buildDynamicEnumOptions(e)}initValue(){this.selectedValues=[],this.field.value?"string"==typeof this.field.value&&(!this.optionsMap||"string"==typeof this.optionsMap[this.field.value]&&this.field.value&&(this.valueLabel=this.optionsMap[this.field.value],this.selectedValues.push({value:this.field.value,label:this.valueLabel}))):this.initEnumDefault()}initEnumDefault(){var e,t,n;if(!(0,c.isEmptyString)(null===(e=this.record)||void 0===e?void 0:e.id))return;let i=null===(n=null===(t=this.field)||void 0===t?void 0:t.definition)||void 0===n?void 0:n.default;"string"==typeof i&&(i=i.trim()),i&&(this.selectedValues.push({value:i,label:this.optionsMap[i]}),this.initEnumDefaultFieldValues(i))}initEnumDefaultFieldValues(e){if("multienum"===this.field.type){const e=this.selectedValues.map(e=>e.value);this.field.valueList=e,this.field.formControl.setValue(e)}else this.field.value=e,this.field.formControl.setValue(e);this.field.formControl.markAsDirty()}checkAndInitAsDynamicEnum(){const e=this.field&&this.field.definition||{},t=e&&e.parentenum||"",n=this.record&&this.record.fields||null;if(e&&e.dynamic&&t&&n){this.isDynamicEnum=!0;const e=n[t];e&&this.subscribeToParentValueChanges(e)}}buildDynamicEnumOptions(e){const t=this.record.fields[this.field.definition.parentenum];if(t){const n=e[t.definition.options];if(n&&0!==Object.keys(n).length){this.mappedOptions=this.createParentChildOptionsMap(n,this.options);let e=[];"multienum"===t.definition.type?e=t.valueList:e.push(t.value),this.options=this.filterMatchingOptions(e)}}}filterMatchingOptions(e){let t=[];return e&&e.length?(e.forEach(e=>{!this.mappedOptions[e]||(t=t.concat([...this.mappedOptions[e]]))}),t):[]}createParentChildOptionsMap(e,t){const n={};return Object.keys(e).forEach(e=>{n[e]=t.filter(t=>String(t.value).startsWith(e))}),n}subscribeToParentValueChanges(e){e.formControl&&this.subs.push(e.formControl.valueChanges.subscribe(e=>{"string"==typeof e&&(e=[e]),this.field.value="",this.field.formControl.setValue(""),this.options=this.filterMatchingOptions(e),this.initValue()}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),$a=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}initValue(){this.selectedValues=[],!this.field.valueList||this.field.valueList.length<1?this.initEnumDefault():this.field.valueList.forEach(e=>{"string"==typeof this.optionsMap[e]&&this.selectedValues.push({value:e,label:this.optionsMap[e]})})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();const Va=["tag"];let za=(()=>{class e extends $a{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}ngOnInit(){this.field.valueList=[],this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.valueList=this.field.criteria.values),super.ngOnInit()}onAdd(){const e=this.selectedValues.map(e=>e.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e}onRemove(){let e=this.selectedValues.map(e=>e.value);e||(e=[]),this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e,setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-multienum-filter"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(Va,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.tag=e.first)}},features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tag-input",0,1),i.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValues=e})("onAdd",function(){return t.onAdd()})("onRemove",function(){return t.onRemove()})("keyup.enter",function(){return t.selectFirstElement()}),i.\u0275\u0275element(2,"tag-input-dropdown",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("ngModel",t.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel())("inputClass",t.getInvalidClass()),i.\u0275\u0275advance(2),i.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",t.options))},directives:[pr.TagInputComponent,h.NgControlStatus,h.NgModel,pr.TagInputDropdown],encapsulation:2}),e})(),Ua=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-enum-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&i.\u0275\u0275text(0),2&e&&i.\u0275\u0275textInterpolate1("\n",t.valueLabel,"\n")},encapsulation:2}),e})(),Ka=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule]]}),e})(),Za=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}getNameField(e,t){if(!e.value||!t.attributes)return;const n=e.value.split(" "),i=[];return n.forEach(e=>{t.attributes[e]&&i.push(t.attributes[e])}),i.join(" ")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),Ga=(()=>{class e extends Za{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}ngOnInit(){super.ngOnInit(),this.data=this.getNameField(this.field,this.record)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-fullname-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&i.\u0275\u0275text(0),2&e&&i.\u0275\u0275textInterpolate1("\n",t.data,"\n")},encapsulation:2}),e})(),Ha=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Wa=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-varchar-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&i.\u0275\u0275text(0),2&e&&i.\u0275\u0275textInterpolate1("\n",t.field.value,"\n")},encapsulation:2}),e})(),qa=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}get target(){return this.field.metadata&&this.field.metadata.target?this.field.metadata.target:"_blank"}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-url-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"target","href"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"a",0),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275propertyInterpolate("href",t.field.value,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275property("target",t.target),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(t.field.value))},encapsulation:2}),e})(),Qa=(()=>{class e extends Ta{constructor(e,t,n){super(t,n),this.formatter=e,this.typeFormatter=t,this.logic=n,this.vm$=this.formatter.format$}getDateFormat(){return this.formatter.getDateFormat()}getDateTimeFormat(){return this.formatter.getDateTimeFormat()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ma),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function Ya(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"date"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind2(2,1,e.field.value,e.getDateFormat()),"\n")}}let Xa=(()=>{class e extends Qa{constructor(e,t,n){super(e,t,n),this.formatter=e,this.typeFormatter=t,this.logic=n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ma),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-date-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Ya,3,4,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf],pipes:[p.AsyncPipe,p.DatePipe],encapsulation:2}),e})(),Ja=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),el=(()=>{class e{constructor(e){this.formatter=e}transform(e,t=null){return this.formatter.toUserFormat(e,t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(fa,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"formatCurrency",type:e,pure:!0}),e})(),tl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),nl=(()=>{class e extends Ta{constructor(e,t,n,i){super(n,i),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=n,this.logic=i,this.preferences$=this.userPreferences.userPreferences$,this.configs$=this.systemConfig.configs$,this.vm$=(0,r.combineLatest)([this.configs$,this.preferences$]).pipe((0,o.map)(([e,t])=>({configs:e,preferences:t})))}get format(){return!this.field.metadata||!1!==this.field.metadata.format}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ua),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function il(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"formatCurrency"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind2(2,1,e.getCurrencyValue(),e.getOptions()),"\n")}}let rl=(()=>{class e extends nl{constructor(e,t,n,i,r){super(e,t,n,i),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=n,this.logic=i,this.currencyService=r}getOptions(){let e={};this.field&&this.field.metadata&&null!==this.field.metadata.digits&&isFinite(this.field.metadata.digits)&&(e={digits:this.field.metadata.digits});const t=this.currencyService.isBase(this.field);let n=this.currencyService.getCurrencyId(this.record);return(t||null===n)&&(n=this.currencyService.getUserCurrency().id),e.symbol=this.currencyService.getSymbol(n),e.code=this.currencyService.getCode(n),e}getCurrencyValue(){return this.currencyService.getFieldCurrencyValue(this.field,this.record)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ua),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra),i.\u0275\u0275directiveInject(Oa))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-currency-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,il,3,4,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf],pipes:[p.AsyncPipe,el],encapsulation:2}),e})(),ol=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,tl]]}),e})(),sl=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-text-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[["readonly","",3,"rows","cols","ngClass"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"textarea",0),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("rows",t.rows)("cols",t.cols)("ngClass",t.klass),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(t.field.value))},directives:[p.NgClass],encapsulation:2}),e})(),al=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-varchar-edit"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"input",0),2&e&&(i.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),i.\u0275\u0275property("formControl",t.field.formControl)("value",t.field.value)("ngClass",t.klass))},directives:[h.DefaultValueAccessor,h.NgControlStatus,h.FormControlDirective,p.NgClass],encapsulation:2}),e})();class ll{constructor(e){this.hourStep=1,this.minuteStep=15,this.secondStep=30,this.displaySeconds=!1,Object.assign(this,e)}static toDateTimeStruct(e,t){if(!t)return null;const n=e.userDateTimeFormatToStruct(t);if(!n)return null;const{date:i,time:r}=n;return new ll({date:i,time:r})}toUserFormat(e){const t=[[this.date.year,this.date.month,this.date.day].join("-"),[this.time.hour,this.time.minute,this.time.second].join(":")].join(" ");return e.toUserFormat(t,{fromFormat:"yyyy-M-d H:m:s"})}}function cl(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275elementStart(2,"ngb-datepicker",5),i.\u0275\u0275listener("dateSelect",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onDateChange(t)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",6),i.\u0275\u0275elementStart(4,"ngb-timepicker",7),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onTimeChange(t)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}let dl=(()=>{class e extends Qa{constructor(e,t,n,i,r){super(e,t,r),this.formatter=e,this.typeFormatter=t,this.calendar=n,this.config=i,this.logic=r,this.dateTimeModel=new ll,i.autoClose="outside",i.placement=this.getPlacement()}ngOnInit(){if((0,c.isEmptyString)(this.field.value))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=ll.toDateTimeStruct(this.formatter,this.field.value),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.value=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const t=ll.toDateTimeStruct(this.formatter,e.target.value);!t||(this.dateTimeModel=t)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ma),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(I.NgbCalendar),i.\u0275\u0275directiveInject(I.NgbPopoverConfig),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-datetime-edit"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(I.NgbPopover,7),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.popover=e.first)}},features:[i.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"input",1),i.\u0275\u0275listener("change",function(e){return t.onInputChange(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"scrm-button",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,cl,5,7,"ng-template",null,4,i.\u0275\u0275templateRefExtractor)),2&e){const e=i.\u0275\u0275reference(5);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),i.\u0275\u0275property("ngClass",t.klass)("placeholder",t.getDateTimeFormat().toLowerCase())("formControl",t.field.formControl),i.\u0275\u0275advance(2),i.\u0275\u0275property("config",t.getOpenButton())("ngbPopover",e)}},directives:[h.DefaultValueAccessor,p.NgClass,h.NgControlStatus,h.FormControlDirective,Vo,I.NgbPopover,I.NgbDatepicker,h.NgModel,I.NgbTimepicker],encapsulation:2}),e})(),ul=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,I.NgbDatepickerModule,I.NgbTimepickerModule,Lo,fs,h.ReactiveFormsModule,I.NgbModule]]}),e})(),pl=(()=>{class e extends I.NgbDateParserFormatter{constructor(e){super(),this.formatter=e}parse(e){return e?this.formatter.userDateFormatToStruct(e):null}format(e){if(!e)return null;const t=[e.year,e.month,e.day].join("-");return this.formatter.toUserFormat(t,{fromFormat:"yyyy-M-d"})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ga))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),hl=(()=>{class e extends I.NgbDateAdapter{constructor(e){super(),this.formatter=e}fromModel(e){return e?this.formatter.userDateFormatToStruct(e):null}toModel(e){if(!e)return null;const t=[e.year,e.month,e.day].join("-");return this.formatter.toUserFormat(t,{fromFormat:"yyyy-M-d"})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ga))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ml=(()=>{class e extends Qa{constructor(e,t,n){super(e,t,n),this.formatter=e,this.typeFormatter=t,this.logic=n}ngOnInit(){super.ngOnInit();let e="";this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]);let t=null;(0,c.isEmptyString)(e)||(e=e.trim(),t=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"})),this.field.value=e,this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.setModel(e),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setModel(e){this.dateModel=this.formatter.userDateFormatToStruct(e)}getOpenButton(e){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:()=>{e.toggle(),e.navigateTo(this.dateModel)},icon:"calendar"}}getPlacement(){return["bottom-left","bottom-right","top-left","top-right"]}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ga),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-date-filter"]],features:[i.\u0275\u0275ProvidersFeature([{provide:I.NgbDateAdapter,useClass:hl},{provide:I.NgbDateParserFormatter,useClass:pl}]),i.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"input",1,2),i.\u0275\u0275listener("ngModelChange",function(e){return t.setModel(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",3),i.\u0275\u0275element(4,"scrm-button",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275reference(2);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),i.\u0275\u0275property("ngClass",t.klass)("placement",t.getPlacement())("placeholder",t.getDateFormat().toLowerCase())("formControl",t.field.formControl)("startDate",t.dateModel),i.\u0275\u0275advance(3),i.\u0275\u0275property("config",t.getOpenButton(e))}},directives:[I.NgbInputDatepicker,h.DefaultValueAccessor,p.NgClass,h.NgControlStatus,h.FormControlDirective,Vo],encapsulation:2}),e})();function fl(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"date"),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind2(2,1,e.field.value,e.getDateTimeFormat())," ")}}function gl(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,fl,3,4,"span",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field.value)}}let vl=(()=>{class e extends Qa{constructor(e,t,n){super(e,t,n),this.formatter=e,this.typeFormatter=t,this.logic=n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ma),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-datetime-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,gl,2,1,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf],pipes:[p.AsyncPipe,p.DatePipe],encapsulation:2}),e})(),yl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})();function bl(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275elementStart(2,"ngb-datepicker",5),i.\u0275\u0275listener("dateSelect",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onDateChange(t)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",6),i.\u0275\u0275elementStart(4,"ngb-timepicker",7),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onTimeChange(t)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}let Sl=(()=>{class e extends Qa{constructor(e,t,n,i,r){super(e,t,r),this.formatter=e,this.typeFormatter=t,this.calendar=n,this.config=i,this.logic=r,this.dateTimeModel=new ll,i.autoClose="outside",i.placement=this.getPlacement()}ngOnInit(){super.ngOnInit();let e="";if((this.field&&this.field.criteria&&this.field.criteria.values||[]).length>0&&(e=this.field.criteria.values[0]),(0,c.isEmptyString)(e))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=ll.toDateTimeStruct(this.formatter,e),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const t=ll.toDateTimeStruct(this.formatter,e.target.value);!t||(this.dateTimeModel=t)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ma),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(I.NgbCalendar),i.\u0275\u0275directiveInject(I.NgbPopoverConfig),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-datetime-filter"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(I.NgbPopover,7),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.popover=e.first)}},features:[i.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"input",1),i.\u0275\u0275listener("change",function(e){return t.onInputChange(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"scrm-button",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,bl,5,7,"ng-template",null,4,i.\u0275\u0275templateRefExtractor)),2&e){const e=i.\u0275\u0275reference(5);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),i.\u0275\u0275property("ngClass",t.klass)("placeholder",t.getDateTimeFormat().toLowerCase())("formControl",t.field.formControl),i.\u0275\u0275advance(2),i.\u0275\u0275property("config",t.getOpenButton())("ngbPopover",e)}},directives:[h.DefaultValueAccessor,p.NgClass,h.NgControlStatus,h.FormControlDirective,Vo,I.NgbPopover,I.NgbDatepicker,h.NgModel,I.NgbTimepicker],encapsulation:2}),e})(),Cl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,I.NgbDatepickerModule,I.NgbTimepickerModule,Lo,fs,h.ReactiveFormsModule,I.NgbModule]]}),e})();function wl(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.label)}}let xl=(()=>{class e extends $a{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-multienum-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"ul"),i.\u0275\u0275template(1,wl,2,1,"li",0),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.selectedValues))},directives:[p.NgForOf],encapsulation:2}),e})();const Il=["tag"];let El=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.selectedValues.push(t),this.onAdd(t),this.tag.dropdown.hide()}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-enum-edit"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(Il,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.tag=e.first)}},features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tag-input",0,1),i.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValues=e})("onAdd",function(e){return t.onAdd(e)})("onRemove",function(){return t.onRemove()})("keyup.enter",function(){return t.selectFirstElement()}),i.\u0275\u0275element(2,"tag-input-dropdown",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275classMap(t.getInvalidClass()),i.\u0275\u0275property("ngModel",t.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel())("inputClass",t.getInvalidClass()),i.\u0275\u0275advance(2),i.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",t.options))},directives:[pr.TagInputComponent,h.NgControlStatus,h.NgModel,pr.TagInputDropdown],encapsulation:2}),e})(),_l=(()=>{class e extends Ta{get checked(){return(0,c.isTrue)(this.field.value)}toggle(){let e="true";this.checked&&(e="false"),this.field.value=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.\u0275\u0275getInheritedFactory(e)))(n||e)}}(),e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),Ml=(()=>{class e extends _l{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-boolean-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"checkbox-container"],["type","checkbox","disabled","","readonly","","aria-hidden","true",3,"checked"],[1,"checkmark"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"label",0),i.\u0275\u0275element(1,"input",1),i.\u0275\u0275element(2,"span",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("checked",t.checked))},encapsulation:2}),e})(),jl=(()=>{class e{constructor(e){this.systemConfig=e}toFrontend(e){const t=this.getLegacyToFrontendMap();return t[e]?t[e]:e}toLegacy(e){const t=this.getFrontendToLegacyMap();return t[e]?t[e]:e}isValid(e){let t=!1;return this.getFrontendToLegacyMap()[e]&&(t=!0),t}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("module_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("module_name_map"),t={};return Object.keys(e).forEach(n=>{t[e[n]]=n}),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),kl=(()=>{class e{constructor(e){this.systemConfig=e}toFrontend(e){const t=this.getLegacyToFrontendMap();return t[e]?t[e]:e}toLegacy(e){const t=this.getFrontendToLegacyMap();return t[e]?t[e]:e}isValid(e){let t=!1;return this.getFrontendToLegacyMap()[e]&&(t=!0),t}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("action_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("action_name_map"),t={};return Object.keys(e).forEach(n=>{t[e[n]]=n}),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ll="./#";let Fl=(()=>{class e{constructor(e,t,n){this.router=e,this.moduleNameMapper=t,this.actionNameMapper=n}getModuleInfo(e,t){return t&&t.modules?t.modules[e]:null}getModuleLabel(e,t){if(!t||!t.moduleList||!e)return"";const n=e&&e.labelKey||"";return t.moduleList[n]||n}getModuleRoute(e){let t=e&&e.defaultRoute||"",n=null;return t.startsWith(Ll)&&(n=t.replace(Ll,""),t=null),{route:n,url:t,params:null}}navigate(e){const t=this.getActionRoute(e);return this.router.navigate([t.route],{queryParams:t.params})}getActionRoute(e){let t=e.url,n=null,i=null;return t.startsWith(Ll)&&(n=t.replace(Ll,""),t=null,e.params&&(i=e.params)),{route:n,url:t,params:i}}getActionLabel(e,t,n,i=""){if(!(n&&n.modStrings&&t&&e))return"";let r=i;r||(r=t.labelKey);let o=n.modStrings[e]&&n.modStrings[e][r];return o||(o=n.appStrings&&n.appStrings[r]),!o&&t.module&&(o=n.modStrings[t.module]&&n.modStrings[t.module][r]),o||(o=n.modStrings.administration&&n.modStrings.administration[r]),o||""}getRecordRouterLink(e,t){return`/${e}/record/${t}`}navigateBack(e,t,n){let i=this.getReturnModule(n),r=this.getReturnAction(n);const o=this.getReturnId(n);let s="";i&&(s+="/"+i),r&&(s+="/"+r),o&&(s+="/"+o),i===t&&"record"===r&&(s="/"+t+"/record/"+(o||e.id)),!s&&e&&e.id&&(s="/"+t+"/record/"+e.id),!s&&e&&e.id&&(s="/"+t),this.router.navigate([s]).then()}getReturnId(e){return e.return_id||""}getReturnAction(e){let t="";return e.return_action&&(t=this.actionNameMapper.toFrontend(e.return_action)),t}getReturnModule(e){let t="";return e.return_module&&(t=this.moduleNameMapper.toFrontend(e.return_module)),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(jl),i.\u0275\u0275inject(kl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ol(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"a",3),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275propertyInterpolate1("href","mailto:",e.field.value,"",i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.field.value)}}function Dl(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"a",4),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().openEmail()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.field.value)}}let Al=(()=>{class e extends Ta{constructor(e,t,n,i,r,o,s,a,l){super(e,t),this.typeFormatter=e,this.logic=t,this.preferences=n,this.navigation=i,this.moduleNameMapper=r,this.actionNameMapper=o,this.appState=s,this.modalService=a,this.router=l}ngOnInit(){this.linkType=this.preferences.getUserPreference("email_link_type")||"mailto"}openEmail(){const e=this.actionNameMapper.toLegacy(this.appState.getView()),t=this.moduleNameMapper.toLegacy(this.parent.module),n=this.parent.id;let i;"ListView"!==e&&"index"!==e&&(i=n),this.router.navigate(["emails","compose"],{queryParams:{return_module:t,return_action:e,return_id:i,to_addrs_names:this.field.value,parent_type:t,parent_name:this.parent.attributes.name,parent_id:n}})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra),i.\u0275\u0275directiveInject(ua),i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(kl),i.\u0275\u0275directiveInject(no),i.\u0275\u0275directiveInject(I.NgbModal),i.\u0275\u0275directiveInject(u.Router))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-email-list"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"mailto-field"],[3,"href",4,"ngIf"],["class","clickable field-link",3,"click",4,"ngIf"],[3,"href"],[1,"clickable","field-link",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Ol,2,2,"a",1),i.\u0275\u0275template(2,Dl,2,1,"a",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","mailto"===t.linkType),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","sugar"===t.linkType))},directives:[p.NgIf],encapsulation:2}),e})(),Nl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Rl=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}ngOnInit(){super.ngOnInit();let e="";this.field.criteria&&this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),e=(0,c.isVoid)(e)?"":e.trim(),this.field.value=e;const t=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"});this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-varchar-filter"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"input",0),2&e&&(i.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),i.\u0275\u0275property("formControl",t.field.formControl)("value",t.field.value)("ngClass",t.klass))},directives:[h.DefaultValueAccessor,h.NgControlStatus,h.FormControlDirective,p.NgClass],encapsulation:2}),e})(),Tl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pr.TagInputModule,h.FormsModule]]}),e})(),Pl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule]]}),e})(),Bl=(()=>{class e extends p.DecimalPipe{constructor(e,t){super(t),this.formatter=e,this.locale=t}transform(e,t,n){return e?this.formatter.toUserFormat(""+e):null}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ha,16),i.\u0275\u0275directiveInject(i.LOCALE_ID,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"formatNumber",type:e,pure:!0}),e})();function $l(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"formatNumber"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}let Vl=(()=>{class e extends nl{constructor(e,t,n,i){super(e,t,n,i),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=n,this.logic=i}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ua),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-float-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,$l,3,3,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf],pipes:[p.AsyncPipe,Bl],encapsulation:2}),e})(),zl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Ul=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,zl]]}),e})(),Kl=(()=>{class e extends Qa{constructor(e,t,n,i){super(e,n,i),this.formatter=e,this.dateAdapter=t,this.typeFormatter=n,this.logic=i}ngOnInit(){(0,c.isEmptyString)(this.field.value)&&this.field.formControl.setValue(null),this.setModel(this.field.value),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setModel(e){this.dateModel=this.formatter.userDateFormatToStruct(e)}getOpenButton(e){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:()=>{e.toggle(),e.navigateTo(this.dateModel)},icon:"calendar"}}getPlacement(){return["bottom-left","bottom-right","top-left","top-right"]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ga),i.\u0275\u0275directiveInject(I.NgbDateAdapter),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-date-edit"]],features:[i.\u0275\u0275ProvidersFeature([{provide:I.NgbDateAdapter,useClass:hl},{provide:I.NgbDateParserFormatter,useClass:pl}]),i.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"field-datetime-edit","input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"input",1,2),i.\u0275\u0275listener("ngModelChange",function(e){return t.setModel(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",3),i.\u0275\u0275element(4,"scrm-button",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275reference(2);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),i.\u0275\u0275property("ngClass",t.klass)("placement",t.getPlacement())("placeholder",t.getDateFormat().toLowerCase())("formControl",t.field.formControl)("startDate",t.dateModel),i.\u0275\u0275advance(3),i.\u0275\u0275property("config",t.getOpenButton(e))}},directives:[I.NgbInputDatepicker,h.DefaultValueAccessor,p.NgClass,h.NgControlStatus,h.FormControlDirective,Vo],encapsulation:2}),e})();const Zl=["tag"];let Gl=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}ngOnInit(){this.field.value="",this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.value=this.field.criteria.values[0]),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",void(this.field.criteria.values=[e.value]);this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[],this.field.criteria.operator="",this.field.criteria.values=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.field.criteria.operator="",this.field.criteria.values=[],setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-boolean-filter"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(Zl,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.tag=e.first)}},features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","clearOnBlur","displayBy","identifyBy","inputClass","onlyFromAutocomplete","placeholder","secondaryPlaceholder","onAdd","onRemove","ngModelChange"],["tag",""],[3,"autocompleteItems","displayBy","identifyBy","keepOpen","showDropdownIfEmpty"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tag-input",0,1),i.\u0275\u0275listener("onAdd",function(e){return t.onAdd(e)})("onRemove",function(){return t.onRemove()})("ngModelChange",function(e){return t.selectedValues=e}),i.\u0275\u0275element(2,"tag-input-dropdown",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275classMap(t.getInvalidClass()),i.\u0275\u0275property("ngModel",t.selectedValues)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("inputClass",t.getInvalidClass())("onlyFromAutocomplete",!0)("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel()),i.\u0275\u0275advance(2),i.\u0275\u0275property("autocompleteItems",t.options)("displayBy","label")("identifyBy","value")("keepOpen",!1)("showDropdownIfEmpty",!0))},directives:[pr.TagInputComponent,h.NgControlStatus,h.NgModel,pr.TagInputDropdown],encapsulation:2}),e})(),Hl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,h.ReactiveFormsModule]]}),e})(),Wl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,h.ReactiveFormsModule,pr.TagInputModule]]}),e})(),ql=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-relate-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&i.\u0275\u0275text(0),2&e&&i.\u0275\u0275textInterpolate1("\n",t.field.value,"\n")},encapsulation:2}),e})(),Ql=(()=>{class e{getConfig(e){return{klass:"light-filter",panelMode:"collapsible",isCollapsed:!0,collapseOnSearch:!0,savedFilterEdit:!1,module:e.recordList.getModule(),filter$:e.recordList.criteria$.pipe((0,o.map)(e=>({key:"default",criteria:e}))),savedFilters$:(0,r.of)([]),searchFields$:e.searchMetadata$.pipe((0,o.map)(e=>{if(!e)return{};let t="advanced";return e.layout.advanced||(t="basic"),e.layout[t]})),listFields:[],onClose:()=>{},onSearch:()=>{},updateFilter:(t,n=!0)=>{e.recordList.updateSearchCriteria(t.criteria,n)},resetFilter:t=>{e.recordList.resetSearchCriteria(t)},addSavedFilter:e=>{},removeSavedFilter:e=>{},setOpenFilter:e=>{}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class Yl{getTable(e){return{showHeader:!0,showFooter:!0,klass:"light-table",module:e.recordList.getModule(),columns:e.columns$.pipe((0,o.map)(t=>this.mapColumns(e,t))),sort$:e.recordList.sort$,maxColumns$:(0,r.of)(5),loading$:e.recordList.loading$,dataSource:e.recordList,pagination:e.recordList,toggleRecordSelection:t=>{e.recordList.toggleSelection(t)},updateSorting:(t,n)=>{e.recordList.updateSorting(t,n),e.saveCurrentSort()}}}mapColumns(e,t){const n=[];return t.forEach(t=>{const i=Object.assign({},t);i.metadata=Object.assign({},t.metadata||{}),this.disableRelateFieldsLink(i),this.addLinkSelectHandler(e,i),n.push(i)}),n}disableRelateFieldsLink(e){"relate"===e.type&&(e.link=!1,e.metadata.link=!1)}addLinkSelectHandler(e,t){!t.link||(t.metadata.onClick=(t,n)=>{e.recordList.toggleSelection(n.id)})}}let Xl=(()=>{class e{constructor(e){this.apollo=e,this.fieldsMetadata={fields:["id","_id","meta","records"]}}fetch(e,t,n,i,r,o){const s=o.fields,a={query:l()`
              query getRecordList($module: String!, $limit: Int, $offset: Int, $criteria: Iterable, $sort: Iterable) {
                getRecordList(module: $module, limit: $limit, offset: $offset, criteria: $criteria, sort: $sort) {
                  ${s.join("\n")}
                }
              }
            `,variables:{module:e,limit:t,offset:n,criteria:i,sort:r}};return this.apollo.query(a)}get(e,t,n,i){const r=this.mapSort(n);return this.fetch(e,i.pageSize,i.current,t,r,this.fieldsMetadata).pipe((0,o.map)(({data:e})=>{const t={records:[],pagination:Object.assign({},i)};if(!e||!e.getRecordList)return t;const n=e.getRecordList;if(n.records&&n.records.forEach(e=>{t.records.push(this.mapRecord(e))}),!n.meta)return t;if(n.meta.offsets){const e={current:"current",next:"next",prev:"previous",total:"total",end:"last"};Object.keys(e).forEach(i=>{i in n.meta.offsets&&(t.pagination[e[i]]=n.meta.offsets[i])})}return t}))}mapSort(e){return{sortOrder:{NONE:"",ASC:"ASC",DESC:"DESC"}[e.sortOrder],orderBy:e.orderBy}}mapRecord(e){return e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Jl=(()=>{class e{constructor(e){this.config=e,this.messages=[],this.timeout=3,this.messagesStage=new r.BehaviorSubject([]),this.messages$=this.messagesStage.asObservable(),this.initTimeOut()}updateState(e){this.messagesStage.next(this.messages=e)}removeMessages(){this.updateState([])}contains(e,t=!1){let n=!1;for(let i=0;i<this.messages.length;i++)if(e.text===this.messages[i].text){if(n=!0,t){const e=[...this.messages];e.splice(i,1),this.updateState(e)}break}return n}addMessage(e){let t=-1;if(!this.contains(e)){const n=[...this.messages];t=n.push(e),(e.type===c.MessageTypes.success||e.type===c.MessageTypes.warning)&&setTimeout(()=>{this.contains(e,!0)},1e3*this.timeout),this.updateState(n)}return t}addPrimaryMessage(e){return this.addMessage({type:c.MessageTypes.primary,text:e})}addSecondaryMessage(e){return this.addMessage({type:c.MessageTypes.secondary,text:e})}addSuccessMessage(e){return this.addMessage({type:c.MessageTypes.success,text:e})}addSuccessMessageByKey(e){return this.addMessage({type:c.MessageTypes.success,labelKey:e})}addDangerMessage(e){return this.addMessage({type:c.MessageTypes.danger,text:e})}addDangerMessageByKey(e){return this.addMessage({type:c.MessageTypes.danger,labelKey:e})}addWarningMessage(e){return this.addMessage({type:c.MessageTypes.warning,text:e})}addWarningMessageByKey(e){return this.addMessage({type:c.MessageTypes.warning,labelKey:e})}addInfoMessage(e){return this.addMessage({type:c.MessageTypes.info,text:e})}addDarkMessage(e){return this.addMessage({type:c.MessageTypes.dark,text:e})}log(...e){console.log.apply(console,e)}error(...e){console.error.apply(console,e)}initTimeOut(){const e=this.config.getConfigValue("ui");if(e&&e.alert_timeout){const t=parseInt(e.alert_timeout,10);isNaN(t)||(this.timeout=t)}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ec={filters:{}},tc={orderBy:"",sortOrder:c.SortDirection.DESC},nc={all:!1,status:c.SelectionStatus.NONE,selected:{},count:0},ic={module:"",records:[],criteria:(0,c.deepClone)(ec),sort:(0,c.deepClone)(tc),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},selection:(0,c.deepClone)(nc),loading:!1};let rc=(()=>{class e{constructor(e,t,n,i,s,a){this.listGQL=e,this.configStore=t,this.preferencesStore=n,this.appStateStore=i,this.languageStore=s,this.message=a,this.cache$=null,this.internalState=(0,c.deepClone)(ic),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.records$=this.state$.pipe((0,o.map)(e=>e.records),(0,o.distinctUntilChanged)()),this.criteria$=this.state$.pipe((0,o.map)(e=>e.criteria),(0,o.distinctUntilChanged)()),this.sort$=this.state$.pipe((0,o.map)(e=>e.sort),(0,o.distinctUntilChanged)()),this.pagination$=this.state$.pipe((0,o.map)(e=>e.pagination),(0,o.distinctUntilChanged)()),this.selection$=this.state$.pipe((0,o.map)(e=>e.selection),(0,o.distinctUntilChanged)()),this.selectedCount$=this.state$.pipe((0,o.map)(e=>e.selection.count),(0,o.distinctUntilChanged)()),this.selectedStatus$=this.state$.pipe((0,o.map)(e=>e.selection.status),(0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading))}connect(){return this.records$}disconnect(){}get criteria(){return(0,c.deepClone)(this.internalState.criteria?this.internalState.criteria:ec)}set criteria(e){this.updateState(Object.assign(Object.assign({},this.internalState),{criteria:e}))}get sort(){return(0,c.deepClone)(this.internalState.sort?this.internalState.sort:tc)}set sort(e){this.updateState(Object.assign(Object.assign({},this.internalState),{sort:e}))}get selection(){return(0,c.deepClone)(this.internalState.selection?this.internalState.selection:nc)}get records(){return this.internalState.records?this.internalState.records:[]}getModule(){return this.internalState.module}getRecord(e){let t=null;return this.records.some(n=>{if(n.id===e)return t=n,!0}),t}destroy(){this.clear()}init(e,t=!0,n="list_max_entries_per_page"){return this.internalState.module=e,this.watchPageSize(n),!1===t?null:this.load()}load(e=!0){return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.getRecords(this.internalState.module,this.internalState.criteria,this.internalState.sort,this.internalState.pagination,e).pipe((0,o.catchError)(()=>(this.message.addDangerMessageByKey("LBL_GET_RECORD_LIST_ERROR"),(0,r.of)({records:[],criteria:(0,c.deepClone)(ec),sort:(0,c.deepClone)(tc),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},selection:(0,c.deepClone)(nc)}))),(0,o.tap)(e=>{this.calculatePageCount(e.records,e.pagination),this.updateState(Object.assign(Object.assign({},this.internalState),{records:e.records,pagination:e.pagination,loading:!1}))}))}updateSearchCriteria(e,t=!0){this.updateState(Object.assign(Object.assign({},this.internalState),{criteria:e})),t&&(this.updateSelection(c.SelectionStatus.NONE),this.resetPagination())}resetSearchCriteria(e=!0){this.updateSearchCriteria((0,c.deepClone)(ec),e)}updateSorting(e,t,n=!0){t===c.SortDirection.NONE&&(e="",t=c.SortDirection.DESC);const i={orderBy:e,sortOrder:t};this.updateState(Object.assign(Object.assign({},this.internalState),{sort:i})),n&&this.load(!1).pipe((0,o.take)(1)).subscribe()}mapSortOrder(e){let t=c.SortDirection.NONE;const n=e.toLowerCase();return"asc"===n?t=c.SortDirection.ASC:"desc"===n&&(t=c.SortDirection.DESC),t}updatePagination(e){const t=Object.assign(Object.assign({},this.internalState.pagination),{current:e});this.updateState(Object.assign(Object.assign({},this.internalState),{pagination:t})),this.load(!1).pipe((0,o.take)(1)).subscribe()}resetPagination(){this.updatePagination(0)}clear(){this.cache$=null,this.store.unsubscribe(),this.preferencesSub.unsubscribe()}clearAuthBased(){this.clear()}getSelectionStatus(){return this.selectedStatus$}getSelectedCount(){return this.selectedCount$}updateSelection(e){e!==c.SelectionStatus.NONE?e!==c.SelectionStatus.ALL?e!==c.SelectionStatus.PAGE||this.selectPage():this.selectAll():this.clearSelection()}clearSelection(){this.updateState(Object.assign(Object.assign({},this.internalState),{selection:(0,c.deepClone)(nc)}))}clearSort(){this.updateState(Object.assign(Object.assign({},this.internalState),{sort:(0,c.deepClone)(tc)}))}selectAll(){const e=this.internalState.pagination.total;this.updateState(Object.assign(Object.assign({},this.internalState),{selection:{all:!0,status:c.SelectionStatus.ALL,selected:{},count:e}}))}selectPage(){const e=Object.assign({},this.internalState.selection.selected);this.internalState.records&&this.internalState.records.length&&this.internalState.records.forEach(t=>{t&&t.id&&(e[t.id]=t.id)}),this.updateState(Object.assign(Object.assign({},this.internalState),{selection:{all:!1,status:c.SelectionStatus.SOME,selected:e,count:Object.keys(e).length}}))}toggleSelection(e){const t=(0,c.deepClone)(this.internalState.selection);t.selected[e]?delete t.selected[e]:t.selected[e]=e,t.count=Object.keys(t.selected).length,t.status=0===t.count?c.SelectionStatus.NONE:c.SelectionStatus.SOME,this.updateState(Object.assign(Object.assign({},this.internalState),{selection:t}))}getPaginationCount(){return this.pagination$.pipe((0,o.map)(e=>({pageFirst:e.pageFirst,pageLast:e.pageLast,total:e.total})),(0,o.distinctUntilChanged)())}getPagination(){return this.store.value.pagination}changePage(e){let t=0;const n={};if(n[c.PageSelection.FIRST]=0,n[c.PageSelection.PREVIOUS]=this.internalState.pagination.previous,n[c.PageSelection.NEXT]=this.internalState.pagination.next,n[c.PageSelection.LAST]=this.internalState.pagination.last,e in n&&n[e]>=0){if(t=n[e],t>this.internalState.pagination.last||t<0)return;this.updatePagination(t)}}setPageSize(e){const t=Object.assign(Object.assign({},this.internalState.pagination),{pageSize:e});this.updateState(Object.assign(Object.assign({},this.internalState),{pagination:t}))}watchPageSize(e){const t=this.preferencesStore.getUserPreference(e),n=this.configStore.getConfigValue(e);this.determinePageSize(t,n),this.preferencesSub=(0,r.combineLatest)([this.configStore.configs$,this.preferencesStore.userPreferences$]).pipe((0,o.tap)(([t,n])=>{this.determinePageSize(n&&n[e]||null,t&&t[e]&&t[e].value||null)})).subscribe()}determinePageSize(e,t){let n=0;e?n=e:t&&(n=parseInt(t,10)),this.setPageSize(n)}updateState(e){this.store.next(this.internalState=e)}calculatePageCount(e,t){const n=e&&e.length||0;let i=0,r=0;n>0&&(i=t.current+1,r=t.current+n),t.pageFirst=i,t.pageLast=r}getRecords(e,t,n,i,r=!0){return(null==this.cache$||!1===r)&&(this.cache$=this.listGQL.get(e,t,n,i).pipe((0,o.shareReplay)(1))),this.cache$}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xl),i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),oc=(()=>{class e{constructor(e,t,n,i,r,o){this.listGQL=e,this.configStore=t,this.preferencesStore=n,this.appStateStore=i,this.languageStore=r,this.message=o}create(){return new rc(this.listGQL,this.configStore,this.preferencesStore,this.appStateStore,this.languageStore,this.message)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xl),i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const sc={module:"",detailView:{},editView:{},listView:{},search:{},recordView:{},subPanel:{},massUpdate:{},recentlyViewed:[],favorites:[]},ac={};let lc=(0,c.deepClone)(sc),cc=(0,c.deepClone)(ac);const dc={};let uc=(0,c.deepClone)(dc),pc=(()=>{class e{constructor(e,t){this.recordGQL=e,this.appState=t,this.typeKeys={listView:"listView",search:"search",recordView:"recordView",subPanel:"subPanel",massUpdate:"massUpdate",recentlyViewed:"recentlyViewed",favorites:"favorites"},this.store=new r.BehaviorSubject(lc),this.state$=this.store.asObservable(),this.allModuleStore=new r.BehaviorSubject(cc),this.allModulesState$=this.allModuleStore.asObservable(),this.resourceName="moduleMetadata",this.fieldsMetadata={fields:["id","_id"]},this.types=["listView","search","recordView","subPanel","massUpdate","recentlyViewed","favorites"],this.baseTypes=["listView","search","recordView","favorites"],this.listViewColumns$=this.state$.pipe((0,o.map)(e=>e.listView.fields),(0,o.distinctUntilChanged)()),this.listViewLineActions$=this.state$.pipe((0,o.map)(e=>e.listView.lineActions),(0,o.distinctUntilChanged)()),this.listMetadata$=this.state$.pipe((0,o.map)(e=>e.listView),(0,o.distinctUntilChanged)()),this.searchMetadata$=this.state$.pipe((0,o.map)(e=>e.search),(0,o.distinctUntilChanged)()),this.recordViewMetadata$=this.state$.pipe((0,o.map)(e=>e.recordView),(0,o.distinctUntilChanged)()),this.subPanelMetadata$=this.state$.pipe((0,o.map)(e=>e.subPanel),(0,o.distinctUntilChanged)()),this.metadata$=this.state$,this.allModuleMetadata$=this.allModulesState$}clear(){uc=(0,c.deepClone)(dc),cc=(0,c.deepClone)(ac),this.updateState("",(0,c.deepClone)(sc))}clearAuthBased(){this.clear()}getMetadataTypes(){return this.types}getModule(){return lc.module}get(){return lc}getModuleMeta(e){var t;const n=null!==(t=cc[e])&&void 0!==t?t:{};return Object.assign({},n)}setModuleMetadata(e,t){uc[e]=(0,r.of)(t).pipe((0,o.shareReplay)(1)),this.updateAllModulesState(e,t)}reloadModuleMetadata(e,t,n=!0){return t||(t=this.getMetadataTypes()),this.getMetadata(e,t,n).pipe((0,o.tap)(t=>{this.updateAllModulesState(e,t)}))}load(e,t,n=!0){return t||(t=this.getMetadataTypes()),this.getMetadata(e,t,n).pipe((0,o.tap)(t=>{this.updateState(e,t)}))}isCached(e){var t;return null!==(null!==(t=uc[e])&&void 0!==t?t:null)}getEmpty(){return(0,c.deepClone)(sc)}set(e,t){uc[e]=(0,r.of)(t).pipe((0,o.shareReplay)(1)),this.updateState(e,t)}getMetadata(e,t=null,n=!0){return(null==uc[e]||!1===n)&&(uc[e]=this.fetchMetadata(e,t).pipe((0,o.shareReplay)(1))),uc[e]}mapMetadata(e,t){var n;const i=null!==(n=cc[e])&&void 0!==n?n:{},r=Object.assign({},i);return this.parseListViewMetadata(t,r),this.parseSearchMetadata(t,r),this.parseRecordViewMetadata(t,r),this.parseSubPanelMetadata(t,r),this.parseMassUpdateMetadata(t,r),this.parseRecentlyViewedMetadata(t,r),this.parseFavoritesMetadata(t,r),r}updateState(e,t){this.updateAllModulesState(e,t),this.store.next(lc=Object.assign(Object.assign({},t),{module:e}))}updateAllModulesState(e,t){if(""!==e){const n=Object.assign({},cc);n[e]=Object.assign({},t),this.allModuleStore.next(cc=n)}}fetchMetadata(e,t){const n={fields:[...this.fieldsMetadata.fields,...null!=t?t:this.baseTypes]};return this.recordGQL.fetch(this.resourceName,`/api/module-metadata/${e}`,n).pipe((0,o.map)(({data:t})=>this.mapMetadata(e,t.moduleMetadata)))}parseListViewMetadata(e,t){if(!e||!e.listView)return;const n={fields:[],bulkActions:{},lineActions:[],chartTypes:{},filters:[]};e.listView.columns&&e.listView.columns.forEach(e=>{n.fields.push(e)}),this.addDefinedMeta(n,e.listView,{bulkActions:"bulkActions",lineActions:"lineActions",sidebarWidgets:"sidebarWidgets",availableFilters:"filters"}),t.listView=n}parseSearchMetadata(e,t){e&&e.search&&(t.search=e.search)}parseSubPanelMetadata(e,t){e&&e.subPanel&&(t.subPanel=e.subPanel)}parseMassUpdateMetadata(e,t){e&&e.massUpdate&&(t.massUpdate=e.massUpdate)}parseRecordViewMetadata(e,t){if(!e||!e.recordView)return;const n={actions:[],templateMeta:{},panels:[]};this.addDefinedMeta(n,e.recordView,{templateMeta:"templateMeta",actions:"actions",panels:"panels",topWidget:"topWidget",sidebarWidgets:"sidebarWidgets",bottomWidgets:"bottomWidgets",summaryTemplates:"summaryTemplates",vardefs:"vardefs"}),t.recordView=n}parseRecentlyViewedMetadata(e,t){e&&e.recentlyViewed&&(t.recentlyViewed=e.recentlyViewed)}parseFavoritesMetadata(e,t){e&&e.favorites&&(t.favorites=e.favorites)}addDefinedMeta(e,t,n){Object.keys(n).forEach(i=>{t[i]&&(e[n[i]]=t[i])})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Zr),i.\u0275\u0275inject(no))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),hc=(()=>{class e{constructor(e,t,n){this.listStoreFactory=e,this.meta=t,this.preferences=n,this.module="",this.parentModule="",this.recordList=e.create(),this.loading$=this.recordList.loading$,this.metadataLoadingState=new r.BehaviorSubject(!1),this.metadataLoading$=this.metadataLoadingState.asObservable()}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e,t=""){this.module=e,this.parentModule=t,this.loadCurrentSort(),this.metadataLoadingState.next(!0);const n=this.meta.getMetadata(e).pipe((0,o.tap)(()=>{this.metadataLoadingState.next(!1),this.recordList.load().pipe((0,o.take)(1)).subscribe()}));this.listMetadata$=n.pipe((0,o.map)(e=>e.listView)),this.searchMetadata$=n.pipe((0,o.map)(e=>e.search)),this.recordList.init(e,!1,"list_max_entries_per_subpanel"),this.columns$=this.listMetadata$.pipe((0,o.map)(e=>e.fields))}load(e=!0){return this.recordList.load(e)}loadCurrentSort(){if(!this.parentModule)return;const e=this.loadPreference(this.parentModule,"current-sort");!e||(0,c.emptyObject)(e)||(this.recordList.sort=e)}saveCurrentSort(){!this.parentModule||this.savePreference(this.parentModule,"current-sort",this.recordList.sort)}getPreferenceKey(e){return this.module+"-record-list-modal-"+e}savePreference(e,t,n){this.preferences.setUi(e,this.getPreferenceKey(t),n)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),mc=(()=>{class e{constructor(e,t,n){this.listStoreFactory=e,this.metadataStore=t,this.preferences=n}create(){return new hc(this.listStoreFactory,this.metadataStore,this.preferences)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fc=(()=>{class e{constructor(e,t){this.screenSize=e,this.systemConfigStore=t,this.screen=Oo.Medium,this.maxColumns=5}getMaxColumns(e){return(0,r.combineLatest)([e,this.screenSize.screenSize$]).pipe((0,o.map)(([e,t])=>(t&&(this.screen=t),this.calculateMaxColumns(e))),(0,o.distinctUntilChanged)())}calculateMaxColumns(e=!0){let t;if(t=this.systemConfigStore.getConfigValue("listview_column_limits"),t=e?t.with_sidebar:t.without_sidebar,this.screen&&t){const e=t[this.screen];e&&(this.maxColumns=e)}return this.maxColumns}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Do),i.\u0275\u0275inject(Qr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function gc(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-label",3),i.\u0275\u0275elementContainerEnd())}function vc(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-list-filter",9),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("config",e.filterConfig)}}function yc(e,t){1&e&&i.\u0275\u0275element(0,"scrm-loading-spinner",11),2&e&&i.\u0275\u0275property("overlay",!0)}function bc(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,yc,1,1,"scrm-loading-spinner",10),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e)}}function Sc(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275elementStart(2,"div",4),i.\u0275\u0275elementStart(3,"div",5),i.\u0275\u0275elementStart(4,"div",6),i.\u0275\u0275template(5,vc,1,1,"scrm-list-filter",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",8),i.\u0275\u0275elementStart(7,"div",6),i.\u0275\u0275element(8,"scrm-table",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,bc,2,1,"ng-container",2),i.\u0275\u0275pipe(10,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(5),i.\u0275\u0275property("ngIf",e.filterConfig),i.\u0275\u0275advance(3),i.\u0275\u0275property("config",e.tableConfig),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(10,3,e.loading$))}}let Cc=(()=>{class e{constructor(e,t,n,i){this.activeModal=e,this.storeFactory=t,this.languages=n,this.maxColumnCalculator=i,this.titleKey="",this.adapter=null,this.filterAdapter=null,this.subs=[],this.store=this.storeFactory.create()}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}},this.init()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}init(){!this.module||(this.initStore(),this.initTableAdapter(),this.initFilterAdapters())}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns((0,r.of)(!0))}initTableAdapter(){null===this.adapter&&(this.adapter=new Yl),this.tableConfig=this.adapter.getTable(this.store),this.tableConfig.maxColumns$=this.getMaxColumns()}initFilterAdapters(){null===this.filterAdapter&&(this.filterAdapter=new Ql),this.filterConfig=this.filterAdapter.getConfig(this.store)}initStore(){var e;this.store.init(this.module,null!==(e=this.parentModule)&&void 0!==e?e:""),this.loading$=this.store.metadataLoading$,this.subs.push(this.store.recordList.selection$.pipe((0,o.distinctUntilChanged)(),(0,o.skip)(1)).subscribe(e=>{!e||!e.selected||Object.keys(e.selected).length<1||this.activeModal.close({selection:e,records:this.store.recordList.records})}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(I.NgbActiveModal),i.\u0275\u0275directiveInject(mc),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(fc))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-list-modal"]],inputs:{titleKey:"titleKey",module:"module",parentModule:"parentModule",adapter:"adapter",filterAdapter:"filterAdapter"},features:[i.\u0275\u0275ProvidersFeature([fc])],decls:4,vars:5,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","headerKlass","border-0","klass","record-list-modal",3,"closable","close","title"],["modal-body",""],[4,"ngIf"],["labelKey","LBL_CONFIG_NO_CONFIG"],[1,"container-fluid"],[1,"row","pb-3"],[1,"col"],[3,"config",4,"ngIf"],[1,"row"],[3,"config"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"scrm-modal",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,gc,2,0,"ng-container",2),i.\u0275\u0275template(3,Sc,11,5,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("closable",!0)("close",t.closeButton)("title",t.titleKey),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!t.tableConfig),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.tableConfig))},encapsulation:2,data:{animation:[(0,hr.trigger)("modalFade",[(0,hr.transition)("void <=> *",[(0,hr.animate)("800ms")])])]}}),e})(),wc=(()=>{class e{constructor(e){this.recordList=e.create()}init(e){this.recordList.init(e,!1)}search(e,t){const n=this.recordList.criteria;return n.filters[t]={field:t,operator:"=",values:[e]},this.recordList.updateSearchCriteria(n,!1),this.recordList.load(!1).pipe((0,o.map)(e=>e.records),(0,o.take)(1),(0,o.shareReplay)(1))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),xc=(()=>{class e extends Ta{constructor(e,t,n,i,s){super(t,s),this.languages=e,this.typeFormatter=t,this.relateService=n,this.moduleNameMapper=i,this.logic=s,this.selectedValues=[],this.status="",this.initModule="",this.search=e=>(this.status="searching",this.relateService.search(e,this.getRelateFieldName()).pipe((0,o.tap)(()=>this.status="found"),(0,o.catchError)(()=>(this.status="error",(0,r.of)([]))),(0,o.map)(e=>{if(!e||e.length<1)return this.status="not-found",[];const t=[];return e.forEach(e=>{e&&e.attributes&&t.push(e.attributes)}),this.status="",t})))}get module(){return this.record&&this.record.module?this.record.module:null}ngOnInit(){super.ngOnInit(),this.init(),this.subs.push(this.field.valueChanges$.subscribe(()=>{this.onModuleChange()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onModuleChange(){var e,t,n;const i=this.initModule,r=null!==(n=null===(t=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.definition)||void 0===t?void 0:t.module)&&void 0!==n?n:"";i!==r&&(this.initModule=r,""===i&&i!==r&&this.init(),this.status=""===r?"no-module":"")}getRelateFieldName(){return this.field&&this.field.definition&&this.field.definition.rname||"name"}getRelateIdField(){return this.field&&this.field.definition&&this.field.definition.id_name||""}getRelatedModule(){const e=this.field&&this.field.definition&&this.field.definition.module||"";return e?this.moduleNameMapper.toFrontend(e):""}getMessage(){const e={searching:"LBL_SEARCHING","not-found":"LBL_NOT_FOUND",error:"LBL_SEARCH_ERROR",found:"LBL_FOUND","no-module":"LBL_NO_MODULE_SELECTED"};return e[this.status]?e[this.status]:""}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched||this.hasSearchError()?"is-invalid":""}hasSearchError(){return"error"===this.status||"not-found"===this.status}resetStatus(){this.status=""}getPlaceholderLabel(){return this.languages.getAppString("LBL_TYPE_TO_SEARCH")||""}init(){var e,t,n;this.initModule=null!==(n=null===(t=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.definition)||void 0===t?void 0:t.module)&&void 0!==n?n:"",this.relateService&&this.relateService.init(this.getRelatedModule())}buildRelate(e,t){const n={id:e};return this.getRelateFieldName()&&(n[this.getRelateFieldName()]=t),n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(wc),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),Ic=(()=>{class e{constructor(e,t){this.buttonUtils=e,this.config=t,this.activeModal=null,this.defaultButtonGroup={breakpoint:4,wrapperKlass:["modal-buttons"],buttonKlass:["modal-button","btn","btn-sm"],buttons:[]};const n=this.config.getConfigValue("ui");n&&n.modal_button_group_breakpoint&&(this.defaultButtonGroup.breakpoint=n.modal_buttons_collapse_breakpoint)}ngOnInit(){this.config$&&(this.buttonGroup$=this.config$.pipe((0,o.map)(e=>this.mapButtonGroup(e))))}mapButtonGroup(e){const t=(0,fr.Z)(Object.assign({},e),(0,c.deepClone)(this.defaultButtonGroup));return this.mapButtons(t),t}mapButtons(e){const t=e.buttons||[];e.buttons=[],t.length>0&&t.forEach(t=>{const n=this.buttonUtils.addOnClickPartial(t,this.activeModal);e.buttons.push(n)})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Cs),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-modal-button-group"]],inputs:{config$:"config$",activeModal:"activeModal"},decls:1,vars:1,consts:[[3,"config$"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"scrm-button-group",0),2&e&&i.\u0275\u0275property("config$",t.buttonGroup$)},directives:[ls],encapsulation:2}),e})(),Ec=(()=>{class e{constructor(e){this.activeModal=e,this.buttons=[]}ngOnInit(){this.buttonGroup$=(0,r.of)({buttons:this.buttons}),this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(I.NgbActiveModal))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-message-modal"]],inputs:{titleKey:"titleKey",textKey:"textKey",buttons:"buttons"},decls:6,vars:6,consts:[["klass","message-modal",3,"closable","close","title"],["modal-body","",1,"p-3"],[3,"labelKey"],["modal-footer",""],[3,"activeModal","config$"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"scrm-modal",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"span"),i.\u0275\u0275element(3,"scrm-label",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3),i.\u0275\u0275element(5,"scrm-modal-button-group",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("closable",!0)("close",t.closeButton)("title",t.titleKey||""),i.\u0275\u0275advance(3),i.\u0275\u0275property("labelKey",t.textKey),i.\u0275\u0275advance(2),i.\u0275\u0275property("activeModal",t.activeModal)("config$",t.buttonGroup$))},directives:[ta,To,Ic],encapsulation:2,data:{animation:[(0,hr.trigger)("modalFade",[(0,hr.transition)("void <=> *",[(0,hr.animate)("800ms")])])]}}),e})();const _c=["tag"];function Mc(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275elementStart(2,"tag-input",4,5),i.\u0275\u0275listener("keyup.enter",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().selectFirstElement()})("onAdd",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onAdd(t)})("onBlur",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().resetStatus()})("onRemove",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onRemove()})("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().selectedValues=t}),i.\u0275\u0275element(4,"tag-input-dropdown",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",7),i.\u0275\u0275element(6,"scrm-button",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275classMap(e.getInvalidClass()),i.\u0275\u0275property("ngModel",e.selectedValues)("clearOnBlur",!0)("displayBy",e.getRelateFieldName())("inputClass",e.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",e.getPlaceholderLabel())("secondaryPlaceholder",e.getPlaceholderLabel()),i.\u0275\u0275advance(2),i.\u0275\u0275property("autocompleteObservable",e.search)("displayBy",e.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("config",e.selectButton)}}function jc(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"small",9),i.\u0275\u0275element(1,"scrm-label",10),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",e.getMessage())("module",e.module)}}let kc=(()=>{class e extends xc{constructor(e,t,n,i,r,o,s,a){super(n,i,r,o,a),this.http=e,this.router=t,this.languages=n,this.typeFormatter=i,this.relateService=r,this.moduleNameMapper=o,this.modalService=s,this.logic=a,this.getUnrelatedProfiles=()=>(0,m.mG)(this,void 0,void 0,function*(){let e=new mr.HttpHeaders;return e.set("Content-Type","application/json; charset=utf-8"),yield new Promise((t,n)=>{this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=checkRelatedProfilesAccounts&profileID="+this.rec,{headers:e,responseType:"text"}).subscribe(e=>{t(parseInt(e))},e=>{n(e)})})}),this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){super.ngOnInit(),(()=>{(0,m.mG)(this,void 0,void 0,function*(){let e=this.router.url.split("/");this.pModule=e[1],this.rec=e[e.length-1],this.unrelated=yield this.getUnrelatedProfiles()})})(),this.init()}init(){super.init(),this.initValue();const e=this.getRelateIdField();e&&this.record&&this.record.fields&&this.record.fields[e]&&(this.idField=this.record.fields[e])}runPMSProfilesAction(){let e=new mr.HttpHeaders;e.set("Content-Type","application/json; charset=utf-8"),this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=relateProfilesToAccount&profileID="+this.rec,{headers:e,responseType:"text"}).subscribe(e=>{},e=>console.log("Error: "+e))}initValue(){this.field.valueObject&&this.field.valueObject.id?(this.selectedValues=[],this.selectedValues.push(this.field.valueObject)):this.selectedValues=[]}onAdd(e){if(e){const t=this.getRelateFieldName();this.setValue(e.id,e[t]);let n=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/;if("accounts"===this.field.definition.module.toLowerCase()&&"cb2b_pmsprofiles"===this.module.toLowerCase()&&null!==this.rec&&""!==this.rec&&void 0!==this.rec&&n.test(this.rec)&&this.unrelated>0){const e=this.modalService.open(Ec);e.componentInstance.textKey="LBL_POPUP_PROFILES",e.componentInstance.buttons=[{labelKey:"LBL_POPUP_NO",klass:["btn-secondary"],onClick:e=>{e.dismiss()}},{labelKey:"LBL_POPUP_YES",klass:["btn-main"],onClick:e=>{this.runPMSProfilesAction(),e.close()}}]}}else this.setValue("",""),this.selectedValues=[]}onRemove(){this.setValue("",""),this.selectedValues=[],setTimeout(()=>{this.tag.focus(!0,!0)},200)}setValue(e,t){const n=this.buildRelate(e,t);this.field.value=t,this.field.valueObject=n,this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.idField&&(this.idField.value=e,this.idField.formControl.setValue(e),this.idField.formControl.markAsDirty())}showSelectModal(){const e=this.modalService.open(Cc,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(e=>{if(!e||!e.selection||!e.selection.selected)return;const t=this.getSelectedRecord(e);this.setItem(t)})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(e=>(t=e,!0));let n=null;return e.records.some(e=>{if(e&&e.id===t)return n=e,!0}),n}setItem(e){this.tag.writeValue([e.attributes]),this.onAdd(e.attributes)}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.selectedValues.push(t),this.onAdd(t),this.tag.dropdown.hide()}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(mr.HttpClient),i.\u0275\u0275directiveInject(u.Router),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(wc),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(I.NgbModal),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-relate-edit"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(_c,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.tag=e.first)}},features:[i.\u0275\u0275ProvidersFeature([wc]),i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],["maxItems","1",3,"ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Mc,7,15,"ng-container",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,jc,2,2,"small",2)),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.initModule),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.getMessage()))},directives:[p.NgIf,pr.TagInputComponent,h.NgControlStatus,h.NgModel,pr.TagInputDropdown,Vo,To],encapsulation:2}),e})(),Lc=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-inline-loading-spinner"]],decls:4,vars:0,consts:[[1,"inline-spinner"],[1,"bounce1"],[1,"bounce2"],[1,"bounce3"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275element(1,"div",1),i.\u0275\u0275element(2,"div",2),i.\u0275\u0275element(3,"div",3),i.\u0275\u0275elementEnd())},styles:[".inline-spinner[_ngcontent-%COMP%]{text-align:center}.inline-spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s infinite ease-in-out both;animation:sk-bouncedelay 1.4s infinite ease-in-out both}.inline-spinner[_ngcontent-%COMP%]   .bounce1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.inline-spinner[_ngcontent-%COMP%]   .bounce2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes sk-bouncedelay{0%,80%,to{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]}),e})(),Fc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Oc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pr.TagInputModule,hs,h.FormsModule,Fc,fs]]}),e})();const Dc=["tag"];function Ac(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"small",8),i.\u0275\u0275element(1,"scrm-label",9),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",e.getMessage())("module",e.module)}}let Nc=(()=>{class e extends xc{constructor(e,t,n,i,r,o){super(e,t,n,i,o),this.languages=e,this.typeFormatter=t,this.relateService=n,this.moduleNameMapper=i,this.modalService=r,this.logic=o,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){const e=this.record;this.field.valueList=[],this.field.valueObjectArray=[];const t=this.field&&this.field.criteria&&this.field.criteria.values||[];t.length>0&&(this.field.valueList=t,this.selectedTags=t);const n=this.field&&this.field.criteria&&this.field.criteria.valueObjectArray||[];n.length>0&&(this.field.valueObjectArray=(0,c.deepClone)(n),this.selectedTags=(0,c.deepClone)(n)),super.ngOnInit();const i=this.getRelateIdField();if(i&&e&&e.criteriaFields&&e.criteriaFields[i]){this.idField=e.criteriaFields[i],this.idField.valueList=[];const t=this.idField&&this.idField.criteria&&this.idField.criteria.values||[];t.length>0&&(this.idField.valueList=(0,c.deepClone)(t))}}onAdd(e){e&&this.setValue(e)}onAdding(e){if(!e||this.idField&&this.idField.valueList.includes(e.id))return r.EMPTY;const t=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(e[t])?r.EMPTY:(0,r.of)(e)}onRemove(e){var t,n;const i=null!==(t=e.id)&&void 0!==t?t:"",r=null!==(n=e.name)&&void 0!==n?n:"";this.field.valueList=this.field.valueList.filter(e=>e!==r),this.field.valueObjectArray=this.field.valueObjectArray.filter(e=>e.id!==i),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray=(0,c.deepClone)(this.field.valueObjectArray),this.idField&&i&&(this.idField.valueList=this.idField.valueList.filter(e=>e!==i),this.updateSearchCriteria(this.idField)),setTimeout(()=>{this.tag.focus(!0,!0)},200)}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.tag.appendTag(t),this.onAdd(t),this.tag.dropdown.hide()}}setValue(e){const t=this.getRelateFieldName(),n=e.id,i=e[t];if(this.idField&&this.idField.valueList.includes(n)||!this.idField&&this.field.valueList.includes(i))return;const r={};r.id=n,r[t]=i,this.field.valueObjectArray.push(r),this.field.valueList.push(i),this.idField&&(this.idField.valueList.push(n),this.updateSearchCriteria(this.idField)),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray||(this.field.criteria.valueObjectArray=[]),this.field.criteria.valueObjectArray.push(r)}updateSearchCriteria(e){e.criteria.operator="=",e.criteria.values=e.valueList,e.formControl.setValue(e.valueList),e.formControl.markAsDirty()}showSelectModal(){const e=this.modalService.open(Cc,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(e=>{if(!e||!e.selection||!e.selection.selected)return;const t=this.getSelectedRecord(e);this.field.valueObjectArray.find(e=>e.id===t.id)||this.setItem(t)})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(e=>(t=e,!0));let n=null;return e.records.some(e=>{if(e&&e.id===t)return n=e,!0}),n}setItem(e){this.tag.appendTag(e.attributes),this.onAdd(e.attributes)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(wc),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(I.NgbModal),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-relate-filter"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(Dc,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.tag=e.first)}},features:[i.\u0275\u0275ProvidersFeature([wc]),i.\u0275\u0275InheritDefinitionFeature],decls:8,vars:18,consts:[[1,"d-flex"],[1,"flex-grow-1"],[3,"ngModel","clearOnBlur","identifyBy","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"tag-input",2,3),i.\u0275\u0275listener("keyup.enter",function(){return t.selectFirstElement()})("onAdd",function(e){return t.onAdd(e)})("onBlur",function(){return t.resetStatus()})("onRemove",function(e){return t.onRemove(e)})("ngModelChange",function(e){return t.selectedTags=e}),i.\u0275\u0275element(4,"tag-input-dropdown",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",5),i.\u0275\u0275element(6,"scrm-button",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,Ac,2,2,"small",7)),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275classMap(t.getInvalidClass()),i.\u0275\u0275property("ngModel",t.selectedTags)("clearOnBlur",!0)("identifyBy","id")("displayBy",t.getRelateFieldName())("inputClass",t.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel()),i.\u0275\u0275advance(2),i.\u0275\u0275property("autocompleteObservable",t.search)("identifyBy","id")("displayBy",t.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("config",t.selectButton),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.getMessage()))},directives:[pr.TagInputComponent,h.NgControlStatus,h.NgModel,pr.TagInputDropdown,Vo,p.NgIf,To],encapsulation:2}),e})(),Rc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule]]}),e})(),Tc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Pc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,I.NgbDatepickerModule,fs,h.ReactiveFormsModule]]}),e})(),Bc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,h.ReactiveFormsModule,pr.TagInputModule]]}),e})(),$c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Vc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pr.TagInputModule,hs,h.FormsModule,Fc,fs,pr.TagInputModule]]}),e})(),zc=(()=>{class e extends _l{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-boolean-edit"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[1,"pb-4","checkbox-field"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","change"],[1,"checkmark"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"label",1),i.\u0275\u0275elementStart(2,"input",2),i.\u0275\u0275listener("change",function(){return t.toggle()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"span",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("checked",t.checked))},encapsulation:2}),e})(),Uc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Kc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,h.ReactiveFormsModule,hs]]}),e})(),Zc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Gc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})();const Hc=["tag"];let Wc=(()=>{class e extends $a{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(){const e=this.selectedValues.map(e=>e.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onRemove(){const e=this.selectedValues.map(e=>e.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-multienum-edit"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(Hc,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.tag=e.first)}},features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tag-input",0,1),i.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValues=e})("onAdd",function(){return t.onAdd()})("onRemove",function(){return t.onRemove()})("keyup.enter",function(){return t.selectFirstElement()}),i.\u0275\u0275element(2,"tag-input-dropdown",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("ngModel",t.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel())("inputClass",t.getInvalidClass()),i.\u0275\u0275advance(2),i.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",t.options))},directives:[pr.TagInputComponent,h.NgControlStatus,h.NgModel,pr.TagInputDropdown],encapsulation:2}),e})();function qc(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.field.value)}}function Qc(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"formatNumber"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}let Yc=(()=>{class e extends nl{constructor(e,t,n,i){super(e,t,n,i),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=n,this.logic=i}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ua),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-int-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,qc,2,1,"ng-container",0),i.\u0275\u0275template(1,Qc,3,3,"ng-container",0),i.\u0275\u0275pipe(2,"async")),2&e&&(i.\u0275\u0275property("ngIf",!t.format),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.format&&i.\u0275\u0275pipeBind1(2,2,t.vm$)))},directives:[p.NgIf],pipes:[p.AsyncPipe,Bl],encapsulation:2}),e})(),Xc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pr.TagInputModule,h.FormsModule]]}),e})(),Jc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,zl]]}),e})(),ed=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),td=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-text-edit"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:6,consts:[[3,"rows","cols","ngClass","formControl"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"textarea",0),2&e&&(i.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),i.\u0275\u0275property("rows",t.rows)("cols",t.cols)("ngClass",t.klass)("formControl",t.field.formControl))},directives:[h.DefaultValueAccessor,p.NgClass,h.NgControlStatus,h.FormControlDirective],encapsulation:2}),e})(),nd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,I.NgbDatepickerModule,fs,h.ReactiveFormsModule]]}),e})(),id=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,h.ReactiveFormsModule]]}),e})();function rd(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"option",4),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275classMap(n.getId(e)),i.\u0275\u0275property("ngValue",e.value),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.label," ")}}function od(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,rd,2,5,"option",3),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.options)}}let sd=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new h.FormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dropdownenum-edit"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"dropdownenum"],[1,"custom-select","custom-select-sm",3,"formControl"],[4,"ngIf"],[3,"class","ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"select",1),i.\u0275\u0275template(2,od,2,1,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formControl",t.field.formControl),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.options&&t.options.length))},directives:[h.SelectControlValueAccessor,h.NgControlStatus,h.FormControlDirective,p.NgIf,p.NgForOf,h.NgSelectOption,h.\u0275NgSelectMultipleOption],encapsulation:2}),e})(),ad=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,h.ReactiveFormsModule]]}),e})(),ld=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dropdownenum-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&i.\u0275\u0275text(0),2&e&&i.\u0275\u0275textInterpolate1("\n",t.valueLabel,"\n")},encapsulation:2}),e})(),cd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule]]}),e})(),dd=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-radioenum-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&i.\u0275\u0275text(0),2&e&&i.\u0275\u0275textInterpolate1("\n",t.valueLabel,"\n")},encapsulation:2}),e})(),ud=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule]]}),e})();function pd(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275element(1,"input",2),i.\u0275\u0275elementStart(2,"label",3),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275classMapInterpolate1("form-check radioenum-input ",n.getId(e),""),i.\u0275\u0275classProp("form-check-inline","row"===n.displayDirection),i.\u0275\u0275advance(1),i.\u0275\u0275propertyInterpolate("id",n.getId(e)),i.\u0275\u0275property("checked",n.field.value===e.value)("formControl",n.field.formControl)("value",e.value),i.\u0275\u0275advance(1),i.\u0275\u0275propertyInterpolate("for",n.getId(e)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.label," ")}}let hd=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}get displayDirection(){return this.field&&this.field.definition&&this.field.definition.displayDirection?this.field.definition.displayDirection:""}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new h.FormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-radioenum-edit"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"radioenum"],[3,"form-check-inline","class",4,"ngFor","ngForOf"],["type","radio",1,"form-check-input",3,"checked","formControl","value","id"],[1,"form-check-label",3,"for"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,pd,4,11,"div",1),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.options))},directives:[p.NgForOf,h.RadioControlValueAccessor,h.DefaultValueAccessor,h.NgControlStatus,h.FormControlDirective],encapsulation:2}),e})(),md=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,h.ReactiveFormsModule]]}),e})(),fd=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-html-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[1,"field-html","text-break",3,"innerHTML"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"div",0),2&e&&i.\u0275\u0275property("innerHTML",t.field.value,i.\u0275\u0275sanitizeHtml)},encapsulation:2}),e})(),gd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule]]}),e})(),vd=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-password-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1,"*****"),i.\u0275\u0275elementEnd())},encapsulation:2}),e})(),yd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),bd=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-password-edit"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","password",3,"formControl","ngClass","value"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"input",0),2&e&&(i.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),i.\u0275\u0275property("formControl",t.field.formControl)("ngClass",t.klass)("value",t.field.value))},directives:[h.DefaultValueAccessor,h.NgControlStatus,h.FormControlDirective,p.NgClass],encapsulation:2}),e})(),Sd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule,h.ReactiveFormsModule,hs]]}),e})(),Cd=(()=>{class e extends Ta{constructor(e,t,n){super(e,t),this.typeFormatter=e,this.logic=t,this.config=n,this.settings={},this.initialValue=""}ngOnInit(){super.ngOnInit(),this.initSettings(),this.initialValue=this.field.value}initSettings(){var e,t,n,i,r,o;const s=this.config.getConfigValue("ui"),a=null!==(t=null===(e=null==s?void 0:s.tinymce)||void 0===e?void 0:e.detail)&&void 0!==t?t:{},l=null!==(o=null===(r=null===(i=null===(n=this.field)||void 0===n?void 0:n.metadata)||void 0===i?void 0:i.tinymce)||void 0===r?void 0:r.detail)&&void 0!==o?o:{};let c={};c=(0,d.merge)(c,{toolbar:!1,menubar:!1,readonly:!0,deprecation_warnings:!1},a,l),this.settings=c}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-tinymce-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[1,"field-html","text-break",3,"initialValue","init","disabled"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"editor",0),2&e&&i.\u0275\u0275property("initialValue",t.initialValue)("init",t.settings)("disabled",!0)},directives:[Or],encapsulation:2,changeDetection:0}),e})(),wd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[{provide:Lr,useValue:"tinymce/tinymce.min.js"}],imports:[[p.CommonModule,h.FormsModule,Dr,h.ReactiveFormsModule]]}),e})(),xd=(()=>{class e extends Ta{constructor(e,t,n){super(e,t),this.typeFormatter=e,this.logic=t,this.config=n,this.settings={},this.modelEvents="change",this.ignoreEvents="onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.value=""}ngOnInit(){var e;super.ngOnInit(),this.initSettings(),this.subscribeValueChanges(),this.value=null!==(e=this.field.value)&&void 0!==e?e:""}ngOnDestroy(){this.unsubscribeAll()}initSettings(){var e,t,n,i,r,o,s,a;const l=this.config.getConfigValue("ui"),c=null!==(t=null===(e=null==l?void 0:l.tinymce)||void 0===e?void 0:e.edit)&&void 0!==t?t:{},u=null!==(o=null===(r=null===(i=null===(n=null==this?void 0:this.field)||void 0===n?void 0:n.metadata)||void 0===i?void 0:i.tinymce)||void 0===r?void 0:r.edit)&&void 0!==o?o:{};let p={};p=(0,d.merge)(p,{height:300,menubar:!1,deprecation_warnings:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | help",toolbar_mode:"floating"},c,u),this.modelEvents=null!==(s=null==p?void 0:p.modelEvents)&&void 0!==s?s:"change",this.ignoreEvents=null!==(a=null==p?void 0:p.ignoreEvents)&&void 0!==a?a:"onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.settings=p}setModel(){this.field.formControl.setValue(this.value)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-tinymce-edit"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[[1,"field-html",3,"init","modelEvents","ignoreEvents","formControl"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"editor",0),2&e&&i.\u0275\u0275property("init",t.settings)("modelEvents",t.modelEvents)("ignoreEvents",t.ignoreEvents)("formControl",t.field.formControl)},directives:[Or,h.NgControlStatus,h.FormControlDirective],encapsulation:2,changeDetection:0}),e})(),Id=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[{provide:Lr,useValue:"tinymce/tinymce.min.js"}],imports:[[p.CommonModule,h.FormsModule,Dr,h.ReactiveFormsModule]]}),e})();const Ed=[ed,Kc,Hl,yd,Sd,Jc,Ul,Tc,Ja,Pc,nd,yl,ul,Cl,Gc,ol,Nl,Rc,id,$c,Oc,Vc,Ha,Ka,Tl,cd,ad,ud,md,Pl,Xc,Bc,Zc,Uc,Wl,gd,wd,Id],_d=[Wa,al,Rl,vd,bd,Yc,Vl,Pa,Xa,Kl,ml,vl,dl,Sl,qa,rl,Al,sl,td,ql,kc,Nc,Ga,Ua,El,ld,sd,dd,hd,xl,Wc,za,Ml,zc,Gl,fd,Cd,xd],Md={"varchar.list":Wa,"varchar.detail":Wa,"varchar.edit":al,"varchar.filter":Rl,"password.list":vd,"password.detail":vd,"password.edit":bd,"char.list":Wa,"char.detail":Wa,"int.list":Yc,"int.detail":Yc,"float.list":Vl,"float.detail":Vl,"phone.list":Pa,"phone.detail":Pa,"date.list":Xa,"date.detail":Xa,"date.edit":Kl,"date.filter":ml,"datetime.list":vl,"datetime.detail":vl,"datetime.edit":dl,"datetime.filter":ml,"url.list":qa,"url.detail":qa,"link.list":qa,"link.detail":qa,"currency.list":rl,"currency.detail":rl,"email.list":Al,"email.detail":Al,"text.detail":sl,"text.edit":td,"relate.list":ql,"relate.edit":kc,"relate.detail":ql,"relate.filter":Nc,"fullname.list":Ga,"fullname.detail":Ga,"enum-radio.list":dd,"enum-radio.detail":dd,"enum-radio.edit":hd,"enum-dropdown.list":ld,"enum-dropdown.detail":ld,"enum-dropdown.edit":sd,"enum-chips.list":Ua,"enum-chips.detail":Ua,"enum-chips.edit":El,"enum.list":Ua,"enum.detail":Ua,"enum.edit":El,"enum.filter":za,"multienum.list":xl,"multienum.detail":xl,"multienum.edit":Wc,"multienum.filter":za,"dynamicenum.list":Ua,"dynamicenum.detail":Ua,"dynamicenum.edit":El,"dynamicenum.filter":Wc,"boolean.list":Ml,"boolean.detail":Ml,"boolean.edit":zc,"boolean.filter":Gl,"bool.list":Ml,"bool.detail":Ml,"bool.edit":zc,"bool.filter":Gl,"html.detail":Cd,"html.edit":xd};class jd{constructor(){this.init()}register(e,t,n,i){this.map.addEntry(e,jd.getKey(t,n),i)}exclude(e,t){this.map.excludeEntry(e,t)}getDisplayType(e,t,n,i){const r=this.getDisplayTypeKey(t,n);return n&&this.has(e,r,i)?this.get(e,r,i):this.get(e,t,i)}get(e,t,n){const i=this.map.getGroupEntries(e);let r=jd.getKey(t,n);return i[r]||"massupdate"===n&&(r=jd.getKey(t,"edit"),i[r])?i[r]:i[jd.getKey("varchar",n)]}has(e,t,n){return!!this.map.getGroupEntries(e)[jd.getKey(t,n)]}static getKey(e,t){return e+"."+t}getDisplayTypeKey(e,t){return e&&t?e+"-"+t:""}init(){this.map=new c.OverridableMap,Object.keys(this.getDefaultMap()).forEach(e=>{const[t,n]=e.split(".",2);this.register("default",t,n,this.getDefaultMap()[e])})}getDefaultMap(){return{}}}let kd=(()=>{class e extends jd{constructor(){super()}getDefaultMap(){return Md}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ld=function(e,t,n,i,r){return{mode:e,field:t,klass:n,record:i,parent:r}};function Fd(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",1),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onClick()}),i.\u0275\u0275element(2,"ndc-dynamic",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",i.\u0275\u0275pureFunction5(2,Ld,e.mode,e.field,e.klass,e.record,e.parent))}}function Od(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",3),i.\u0275\u0275element(2,"ndc-dynamic",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",e.getLink()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",i.\u0275\u0275pureFunction5(3,Ld,e.mode,e.field,e.klass,e.record,e.parent))}}function Dd(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"ndc-dynamic",2),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",i.\u0275\u0275pureFunction5(2,Ld,e.mode,e.field,e.klass,e.record,e.parent))}}const Ad=function(e){return{field:e}};function Nd(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275element(1,"scrm-dynamic-label",6),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("context",n.getMessageContext(e.value,n.record))("fields",i.\u0275\u0275pureFunction1(3,Ad,n.field))("labelKey",n.getMessageLabelKey(e.value))}}function Rd(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Nd,2,5,"div",4),i.\u0275\u0275pipe(2,"keyvalue"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,1,e.field.formControl.errors))}}function Td(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Rd,3,3,"ng-container",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field.formControl.invalid&&e.field.formControl.touched)}}let Pd=(()=>{class e{constructor(e,t,n){this.navigation=e,this.moduleNameMapper=t,this.router=n,this.record=null,this.parent=null,this.klass=null,this.class="dynamic-field"}get getRelateLink(){if(this.field.definition.id_name&&this.field.definition.module){const e=this.moduleNameMapper.toFrontend(this.field.definition.module);return this.navigation.getRecordRouterLink(e,this.record.attributes[this.field.definition.id_name])}return""}ngOnInit(){this.setHostClass()}isLink(){return!!(("detail"===this.mode||"list"===this.mode)&&this.field&&this.record&&("relate"===this.type&&this.field.metadata&&!1!==this.field.metadata.link||this.field.metadata&&this.field.metadata.link))}hasOnClick(){return!!(this.field&&this.field.metadata&&this.field.metadata.onClick)}isEdit(){return"edit"===this.mode||"filter"===this.mode}getLink(){return"relate"===this.type?this.getRelateLink:this.navigation.getRecordRouterLink(this.record.module,this.record.id)}getMessageContext(e,t){const n=e&&e.message&&e.message.context||{};return n.module=t&&t.module||"",n}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}onClick(){if(!this.field.metadata.onClick)return this.router.navigateByUrl(this.getLink()).then(),!1;this.field.metadata.onClick(this.field,this.record)}setHostClass(){const e=[];e.push("dynamic-field"),this.mode&&e.push("dynamic-field-mode-"+this.mode),this.type&&e.push("dynamic-field-type-"+this.type),this.field&&this.field.name&&e.push("dynamic-field-name-"+this.field.name),this.class=e.join(" ")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(u.Router))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dynamic-field"]],hostVars:2,hostBindings:function(e,t){2&e&&i.\u0275\u0275classMap(t.class)},inputs:{mode:"mode",type:"type",field:"field",record:"record",parent:"parent",klass:"klass",componentType:"componentType"},decls:4,vars:4,consts:[[4,"ngIf"],[1,"clickable","field-link",3,"click"],[3,"ndcDynamicComponent","ndcDynamicInputs"],[1,"field-link",3,"routerLink"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Fd,3,8,"ng-container",0),i.\u0275\u0275template(1,Od,3,9,"ng-container",0),i.\u0275\u0275template(2,Dd,2,8,"ng-container",0),i.\u0275\u0275template(3,Td,2,1,"ng-container",0)),2&e&&(i.\u0275\u0275property("ngIf",t.hasOnClick()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isLink()&&!t.hasOnClick()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.isLink()&&!t.hasOnClick()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isEdit()&&t.field.formControl&&t.field.formControl.errors))},directives:[p.NgIf,N,D,u.RouterLinkWithHref,p.NgForOf,Ca],pipes:[p.KeyValuePipe],encapsulation:2}),e})();function Bd(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-label",1),i.\u0275\u0275elementContainerEnd())}function $d(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span",7),i.\u0275\u0275elementStart(1,"label"),i.\u0275\u0275element(2,"scrm-label",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("labelKey",e.labelKey)("module",t.getModule())}}function Vd(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span",9),i.\u0275\u0275element(1,"scrm-dynamic-field",10),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("componentType",t.getComponentType(e.type,e.definition))("field",e)("klass",t.klass)("mode",t.mode)("record",t.record)("parent",t.parent)("type",e.type)}}function zd(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275template(1,$d,3,2,"span",5),i.\u0275\u0275template(2,Vd,2,7,"span",6),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275classProp("flex-fill","edit"===t.mode&&"flex-row"===t.getDirection()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.labelKey&&t.showLabel(e.definition.name)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.type)}}function Ud(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,zd,3,4,"div",3),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.isModeEnabled(n.mode,e))}}function Kd(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,Ud,2,1,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-start field-group h-100"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.getFields())}}let Zd=(()=>{class e extends Ta{constructor(e,t,n){super(e,n),this.typeFormatter=e,this.registry=t,this.logic=n}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.mode)}getFields(){const e=[];return this.field.definition.layout.forEach(t=>{!this.record.fields[t]||"none"===this.record.fields[t].display||e.push(this.record.fields[t])}),e}getModule(){return this.record?this.record.module:null}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasGroupFields()}showLabel(e){const t=this.field.definition||null;if(!t||!t.showLabel)return!1;const n=t.showLabel[this.mode]||null;return!(!n||void 0===n)&&(n.includes("*")||n.includes(e))}isModeEnabled(e,t){const n=t.definition.modes;return!n||n.length<1||n.includes(e)}hasGroupFields(){return!(!this.field.definition.groupFields||!Object.keys(this.field.definition.groupFields).length)}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(kd),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-group-field"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],[4,"ngFor","ngForOf"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill",4,"ngIf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],["class","field-group-label pt-2 pr-1",4,"ngIf"],["class","field-group-field pr-1",4,"ngIf"],[1,"field-group-label","pt-2","pr-1"],[3,"labelKey","module"],[1,"field-group-field","pr-1"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Bd,2,0,"ng-container",0),i.\u0275\u0275template(1,Kd,3,4,"ng-container",0)),2&e&&(i.\u0275\u0275property("ngIf",!t.isConfigured()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isConfigured()))},directives:[p.NgIf,To,p.NgForOf,Pd],encapsulation:2}),e})(),Gd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,u.RouterModule,wa,R]]}),e})(),Hd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,hs,Gd]]}),e})();const Wd=e=>t=>e.validateFloatUserFormat(t.value)?{currencyValidator:{valid:!1,format:e.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_CURRENCY_FORMAT",context:{value:t.value,expected:e.toUserFormat("1000.50")}}}}:null;let qd=(()=>{class e{constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"currency"===t.type}getValidator(e){return e&&e.fieldDefinition?[Wd(this.formatter)]:[]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ha))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Qd=e=>t=>e.validateUserFormat(t.value)?{invalidDate:{value:t.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATE_FORMAT",context:{value:t.value,expected:e.toUserFormat("2020-01-23")}}}}:null;let Yd=(()=>{class e{constructor(e,t){this.formatter=e,this.utils=t}applies(e,t){return!(!t||!t.fieldDefinition)&&"date"===t.type}getValidator(e){return e&&e.fieldDefinition?[Qd(this.formatter)]:[]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ga),i.\u0275\u0275inject(pa))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Xd=e=>t=>e.validateUserFormat(t.value)?{dateTimeValidator:{value:t.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATETIME_FORMAT",context:{value:t.value,expected:e.toUserFormat("2020-01-23 12:30:40")}}}}:null;let Jd=(()=>{class e{constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"datetime"===t.type}getValidator(e){return e&&e.fieldDefinition?[Xd(this.formatter)]:[]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ma))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const eu=e=>t=>e.validateFloatUserFormat(t.value)?{floatValidator:{valid:!1,format:e.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_FLOAT_FORMAT",context:{value:t.value,expected:e.toUserFormat("1000.50")}}}}:null;let tu=(()=>{class e{constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"float"===t.type}getValidator(e){return e&&e.fieldDefinition?[eu(this.formatter)]:[]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ha))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const nu=e=>t=>e.validateIntUserFormat(t.value)?{intValidator:{valid:!1,format:e.getIntUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_INT_FORMAT",context:{value:t.value,expected:e.toUserFormat("1000")}}}}:null;let iu=(()=>{class e{constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"int"===t.type}getValidator(e){return e&&e.fieldDefinition?[nu(this.formatter)]:[]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ha))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ru=(()=>{class e{constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/}validateUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getUserFormatPattern()).test(t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(pa))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ou=e=>t=>e.validateUserFormat(t.value)?{emailValidator:{valid:!1,format:e.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_EMAIL_FORMAT",context:{value:t.value,expected:"example@example.org"}}}}:null;let su=(()=>{class e{constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"email"===t.type}getValidator(e){return e&&e.fieldDefinition?[ou(this.formatter)]:[]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ru))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const au=e=>t=>e.validateUserFormat(t.value)?{phoneValidator:{valid:!1,format:e.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_PHONE_FORMAT",context:{value:t.value}}}}:null;let lu=(()=>{class e{constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"phone"===t.type}getValidator(e){return e&&e.fieldDefinition?[au(this.formatter)]:[]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(va))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const cu=e=>t=>{const n=h.Validators.min(e)(t);return null===n?null:{emailValidator:Object.assign(Object.assign({},n),{message:{labelKey:"LBL_VALIDATION_ERROR_MIN",context:{value:t.value,min:""+e}}})}},du=e=>t=>{const n=h.Validators.max(e)(t);return null===n?null:{emailValidator:Object.assign(Object.assign({},n),{message:{labelKey:"LBL_VALIDATION_ERROR_MAX",context:{value:t.value,max:""+e}}})}};let uu=(()=>{class e{applies(e,t){return!(!t||!t.fieldDefinition)&&null!==this.getRangeValidation(t.fieldDefinition)}getValidator(e){if(!e||!e.fieldDefinition)return[];const t=this.getRangeValidation(e.fieldDefinition);if(!t)return[];const n=t.min&&parseInt(""+t.min,10),i=t.max&&parseInt(""+t.max,10),r=[];return isFinite(n)&&r.push(cu(n)),isFinite(i)&&r.push(du(i)),r}getRangeValidation(e){if(this.isRangeValidation(e.validation))return e.validation;if(!e.validations||!e.validations.length)return null;let t=null;return e.validations.some(e=>(t=e,this.isRangeValidation(e))),t}isRangeValidation(e){return e&&"range"===e.type}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const pu=(e,t)=>n=>{const i=e.name||"";if(!i||!t||!t.fields)return null;const r=t.fields[i]||{},o=r.items;if(!r||!o||!o.length)return null;let s=0;const a=o.filter(e=>!(e&&e.attributes&&e.attributes.deleted));return a&&a.length<1||(a.some(e=>{const t=e.fields&&e.fields["email-fields"]||{},n=t.attributes&&t.attributes.primary_address||null;return!!n&&((0,c.isTrue)(n.value)&&s++,s>1)}),1==s)?null:0==s?{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_NO_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}:{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_MULTIPLE_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}};let hu=(()=>{class e{constructor(){}applies(e,t){return!(!t||!t.fieldDefinition)&&("line-items"===(t.type||t.fieldDefinition.type||"")&&"email_addresses"===(t.name||t.fieldDefinition.name||""))}getValidator(e,t){return e&&e.fieldDefinition&&t?[pu(e,t)]:[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const mu=(e,t)=>n=>{const i=e.name||"";if(!i||!t||!t.fields)return null;const r=t.fields[i]||{},o=r.items;if(!r||!o||!o.length)return null;const s={};let a=0;const l=o.filter(e=>!(e&&e.attributes&&e.attributes.deleted));return l&&l.length<1||(l.some(e=>{const t=e.fields&&e.fields["email-fields"]||{},n=t.attributes&&t.attributes.email_address||null;if(!n.value)return!1;const i=(""+n.value).toUpperCase();return s[i]?(a++,!0):(s[i]=!0,a>1)}),0==a)?null:{duplicateEmailValidation:{valid:!1,message:{labelKey:"LBL_DUPLICATE_EMAIL_VALIDATION_ERROR",context:{}}}}};let fu=(()=>{class e{constructor(){}applies(e,t){return!(!t||!t.fieldDefinition)&&("line-items"===(t.type||t.fieldDefinition.type||"")&&"email_addresses"===(t.name||t.fieldDefinition.name||""))}getValidator(e,t){return e&&e.fieldDefinition&&t?[mu(e,t)]:[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),gu=(()=>{class e{constructor(e,t,n,i,r,o,s,a,l,d,u){this.requiredValidator=e,this.rangeValidator=t,this.currencyValidator=n,this.dateValidator=i,this.datetimeValidator=r,this.emailValidator=o,this.floatValidator=s,this.intValidator=a,this.phoneValidator=l,this.primaryEmailValidator=d,this.duplicateEmailValidator=u,this.filterFieldExclusion={default:{}},this.saveFieldExclusions={default:{}},this.saveValidators=new c.OverridableMap,this.asyncSaveValidators=new c.OverridableMap,this.filterValidators=new c.OverridableMap,this.saveValidators.addEntry("default",this.getKey("required","all"),e),this.saveValidators.addEntry("default",this.getKey("range","all"),t),this.saveValidators.addEntry("default",this.getKey("currency","all"),n),this.saveValidators.addEntry("default",this.getKey("date","all"),i),this.saveValidators.addEntry("default",this.getKey("datetime","all"),r),this.saveValidators.addEntry("default",this.getKey("email","all"),o),this.saveValidators.addEntry("default",this.getKey("float","all"),s),this.saveValidators.addEntry("default",this.getKey("int","all"),a),this.saveValidators.addEntry("default",this.getKey("phone","all"),l),this.saveValidators.addEntry("default",this.getKey("primary-email","all"),d),this.saveValidators.addEntry("default",this.getKey("duplicate-email","all"),u),this.filterValidators.addEntry("default",this.getKey("date","all"),i),this.filterValidators.addEntry("default",this.getKey("datetime","all"),r),this.filterValidators.addEntry("default",this.getKey("float","all"),s),this.filterValidators.addEntry("default",this.getKey("currency","all"),n),this.filterValidators.addEntry("default",this.getKey("int","all"),a),this.filterValidators.addEntry("default",this.getKey("phone","all"),l)}registerFieldSaveValidator(e,t,n,i){this.saveValidators.addEntry(e,this.getKey(t,n),i)}registerSaveValidator(e,t,n){this.saveValidators.addEntry(e,this.getKey(t,"all"),n)}registerFieldFilterValidator(e,t,n,i){this.filterValidators.addEntry(e,this.getKey(t,n),i)}registerFilterValidator(e,t,n){this.filterValidators.addEntry(e,this.getKey(t,"all"),n)}excludeFieldSaveValidator(e,t,n){const i=this.saveFieldExclusions[e]||{},r=this.getKey(t,n);i[r]=r,this.saveFieldExclusions[e]=i}excludeSaveValidator(e,t){this.saveValidators.excludeEntry(e,this.getKey(t,"all"))}excludeFieldFilterValidator(e,t,n){const i=this.filterFieldExclusion[e]||{},r=this.getKey(t,n);i[r]=r,this.filterFieldExclusion[e]=i}excludeFilterValidator(e,t){this.filterValidators.excludeEntry(e,this.getKey(t,"all"))}registerAsyncSaveValidator(e,t,n){this.asyncSaveValidators.addEntry(e,this.getKey(t,"all"),n)}excludeAsyncSaveValidator(e,t){this.saveValidators.excludeEntry(e,this.getKey(t,"all"))}getSaveValidations(e,t,n){const i=this.saveValidators.getGroupEntries(e),r=this.getExclusions(e,this.saveFieldExclusions);return this.filterValidations(i,r,n,t)}getFilterValidations(e,t,n){const i=this.filterValidators.getGroupEntries(e),r=this.getExclusions(e,this.filterFieldExclusion);return this.filterValidations(i,r,n,t)}getAsyncSaveValidations(e,t,n){const i=[],r=this.asyncSaveValidators.getGroupEntries(e);return Object.keys(r).forEach(e=>{const o=r[e];o.applies(n,t)&&i.push(o.getValidator(t,n))}),i}getKey(e,t){return`${e}.${t}`}parseType(e){return(e.split(".")||[])[0]||""}getExclusions(e,t){const n=t[e]||{};return Object.assign(Object.assign({},t.default||{}),n)}filterValidations(e,t,n,i){let r=[];return Object.keys(e).forEach(o=>{const s=this.getKey(this.parseType(o),i.name);if(t[o]||t[s])return;const a=e[o];a.applies(n,i)&&(r=r.concat(a.getValidator(i,n)))}),r}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(La),i.\u0275\u0275inject(uu),i.\u0275\u0275inject(qd),i.\u0275\u0275inject(Yd),i.\u0275\u0275inject(Jd),i.\u0275\u0275inject(su),i.\u0275\u0275inject(tu),i.\u0275\u0275inject(iu),i.\u0275\u0275inject(lu),i.\u0275\u0275inject(hu),i.\u0275\u0275inject(fu))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),vu=(()=>{class e{constructor(e,t){this.validationManager=e,this.typeFormatter=t}buildField(e,t,n=null){const i=t&&t.fieldDefinition||{},{value:r,valueList:o,valueObject:s}=this.parseValue(t,i,e),{validators:a,asyncValidators:l}=this.getSaveValidators(e,t);return this.setupField(e.module,t,r,o,s,e,i,a,l,n)}getFieldLabel(e,t,n){const i=n.getLanguageStrings();return n.getFieldLabel(e,t,i)}parseValue(e,t,n){const i=e&&e.type||"",r=t&&t.rname||"name",o=e.name||"";let s=null,a=null;if(o&&n.attributes[o]){if("relate"===i&&"non-db"===(t&&t.source||"")&&""!==r)return s=n.attributes[o][r],{value:s,valueList:a,valueObject:n.attributes[o]};s=n.attributes[o]}else s="";return"line-items"===i?{value:null,valueList:a}:(Array.isArray(s)&&(a=s,s=null),!s&&t.default?s=t.default:null===s&&(s=""),{value:s,valueList:a})}setupField(e,t,n,i,r,o,s,a,l,d){const u=this.typeFormatter.toUserFormat(t.type,n,{mode:"edit"}),p=t.metadata||s.metadata||{};t.link&&(p.link=t.link);const m=new c.BaseField;if(m.type=t.type||s.type,m.name=t.name||s.name||"",m.display=t.display||s.display||"default",m.defaultDisplay=m.display,m.value=n,m.metadata=p,m.definition=s,m.labelKey=t.label||s.vname||"",m.validators=a,m.asyncValidators=l,"line-items"===m.type?(m.valueObjectArray=o.attributes[m.name],m.itemFormArray=new h.FormArray([],a,l),m.formControl=new h.FormControl(u)):m.formControl=new h.FormControl(u,a,l),m.attributes={},m.source="field",m.logic=t.logic||s.logic||null,m.logic&&Object.keys(m.logic).length){const e={},t={};Object.keys(m.logic).forEach(n=>{const i=m.logic[n]||{};!i.params||(i.params&&i.params.attributeDependencies&&i.params.attributeDependencies.forEach(t=>{e[t.field+"."+t.attribute]=t}),i.params&&i.params.fieldDependencies&&i.params.fieldDependencies.forEach(e=>{t[e]=e}))}),m.attributeDependencies=Object.keys(e).map(t=>e[t]),m.fieldDependencies=Object.keys(t)}return i&&(m.valueList=i),r&&(m.valueObject=r),d&&(m.label=this.getFieldLabel(t.label,e,d)),!m.labelKey&&t.label&&(m.labelKey=t.label),m}getSaveValidators(e,t){return{validators:this.validationManager.getSaveValidations(e.module,t,e),asyncValidators:this.validationManager.getAsyncSaveValidations(e.module,t,e)}}getParentValue(e,t,n,i){var r;const o=null!==(r=i.valueParent)&&void 0!==r?r:"field";return i.valuePath?(0,Ae.Z)("record"===o?e:t,i.valuePath,""):(0,Ae.Z)("record"===o?e.attributes:t.valueObject,n,"")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(gu),i.\u0275\u0275inject(ya))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),yu=(()=>{class e extends vu{constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addGroupFields(e,t,n,i,r,o){const s=(t&&t.fieldDefinition||{}).groupFields||{};Object.keys(s).forEach(t=>{const a=s[t];if(i(e,t))return;const l=r(e,{name:a.name,label:a.vname,type:a.type,fieldDefinition:a},n);o(e,a.name,l)})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(gu),i.\u0275\u0275inject(ya))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),bu=(()=>{class e extends vu{constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addAttributes(e,t,n,i,r,o){const s=Object.keys(t)||[];s.length<1||s.forEach(n=>{this.addFieldAttributes(e,t[n],i,r,o)})}addFieldAttributes(e,t,n,i,r){const o=(t&&t.definition||{}).attributeFields||{};Object.keys(o).forEach(s=>{const a=o[s];if(t.attributes[s])return;const l=i(e,t,{name:a.name,label:a.vname,type:a.type,fieldDefinition:a},n);r(e,t,a.name,l)})}buildAttribute(e,t,n,i=null){const r=n&&n.fieldDefinition||{},{value:o,valueList:s,valueObject:a}=this.parseAttributeValue(n,r,e,t),{validators:l,asyncValidators:c}=this.getSaveValidators(e,n),d=this.setupField(e.module,n,o,s,a,e,r,l,c,i);return d.valuePath=r.valuePath,d.valueParent=r.valueParent,d.source="attribute",d.parentKey=t.name,d}addAttributeToRecord(e,t,n,i){!e||!n||!t||!i||(t.attributes=t.attributes||{},t.attributes[n]=i,e.formGroup&&i.formControl&&e.formGroup.addControl(n,i.formControl))}parseAttributeValue(e,t,n,i){const r=t&&t.rname||"name",o=e.name||"";let s;return"relate"===(e&&e.type||"")&&"non-db"===(t&&t.source||"")&&""!==r?(s=this.getParentValue(n,i,o,t)[r],{value:s,valueList:null,valueObject:this.getParentValue(n,i,o,t)}):(s=o?this.getParentValue(n,i,o,t):"",s=this.getParentValue(n,i,o,t),Array.isArray(s)?{value:null,valueList:s,valueObject:null}:(0,Ar.Z)(s)?{value:null,valueList:null,valueObject:s}:{value:s,valueList:null,valueObject:null})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(gu),i.\u0275\u0275inject(ya))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Su=(()=>{class e extends vu{constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}buildFilterField(e,t,n=null){const i=t&&t.fieldDefinition||{},{validators:r,asyncValidators:o}=this.getFilterValidators(e,t),s=this.setupField(e.searchModule,t,null,null,null,e,i,r,o,n);return s.criteria=this.initFieldFilter(e.criteria,t,s),s}getFilterValidators(e,t){return{validators:this.validationManager.getFilterValidations(e.searchModule,t,e),asyncValidators:[]}}initFieldFilter(e,t,n){let i;const r=t.name;let o=t.type;return"composite"===o&&(o=n.definition.type),i=e.filters[r]?(0,c.deepClone)(e.filters[r]):{field:r,fieldType:o,operator:"",values:[]},i}isCriteriaFieldInitialized(e,t){return!!e.criteriaFields[t]}addToSavedFilter(e,t,n){!e||!t||!n||(e.criteriaFields||(e.criteriaFields={}),e.criteriaFields[t]=n,e.criteria.filters||(e.criteria.filters={}),e.criteria.filters[t]=n.criteria,e.criteriaFormGroup&&n.formControl&&e.criteriaFormGroup.addControl(t,n.formControl))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(gu),i.\u0275\u0275inject(ya))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Cu=(()=>{class e extends Su{constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}buildFilterAttribute(e,t,n,i=null){const r=n&&n.fieldDefinition||{};r.valuePath||(r.valuePath="criteria."+(n.name||r.name));const{value:o,valueList:s,valueObject:a}=this.parseFilterAttributeValue(n,r,e,t),{validators:l,asyncValidators:c}=this.getFilterValidators(e,n),d=this.setupField(e.searchModule,n,o,s,a,e,r,l,c,i);return d.valuePath=r.valuePath,d.source="attribute",d.parentKey=t.definition.name,d}addAttributeToSavedFilter(e,t,n,i){!e||!n||!t||!i||(t.attributes=t.attributes||{},t.attributes[n]=i,e.criteriaFormGroup&&i.formControl&&e.criteriaFormGroup.addControl(n,i.formControl))}parseFilterAttributeValue(e,t,n,i){const r=e.name||"";let o;return o=r?this.getParentValue(n,i,r,t):"",Array.isArray(o)?{value:null,valueList:o,valueObject:null}:(0,Ar.Z)(o)?{value:null,valueList:null,valueObject:o}:{value:o,valueList:null,valueObject:null}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(gu),i.\u0275\u0275inject(ya))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),wu=(()=>{class e extends bu{constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addLineItems(e,t,n,i,r){const o=Object.keys(t)||[];o.length<1||o.forEach(n=>{this.addFieldLineItems(e,t[n],i,r)})}addFieldLineItems(e,t,n,i){const r=t&&t.definition||{},o=t.valueObjectArray&&t.valueObjectArray||[];if("line-items"!==(t&&t.type||"")||!o.length)return;const s=r.lineItems&&r.lineItems.definition||{};t.items=[],o.forEach(r=>{this.addLineItem(s,r,i,n,e,t)})}addLineItem(e,t,n,i,r,o){const s={name:e.name,label:e.vname,type:e.type,fieldDefinition:(0,c.deepClone)(e)},a={id:t.id||"",type:t.type||"",module:t.module||"",attributes:t.attributes||{},fields:{},formGroup:new h.FormGroup({})};n(a,s,i),o.itemFormArray.push(a.formGroup),o.items.push(a)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(gu),i.\u0275\u0275inject(ya))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xu=(()=>{class e{constructor(e,t,n,i,r,o,s){this.fieldBuilder=e,this.groupFieldBuilder=t,this.attributeBuilder=n,this.filterFieldBuilder=i,this.filterAttributeBuilder=r,this.lineItemBuilder=o,this.languageStore=s}buildShallowField(e,t){return{type:e,value:t,definition:{type:e}}}addField(e,t,n=null){const i=this.fieldBuilder.buildField(e,t,n);return this.addToRecord(e,t.name,i),this.groupFieldBuilder.addGroupFields(e,t,n,this.isFieldInitialized.bind(this),this.fieldBuilder.buildField.bind(this.fieldBuilder),this.addToRecord.bind(this)),this.attributeBuilder.addAttributes(e,e.fields,t,n,this.attributeBuilder.buildAttribute.bind(this.attributeBuilder),this.attributeBuilder.addAttributeToRecord.bind(this.attributeBuilder)),this.lineItemBuilder.addLineItems(e,e.fields,t,n,this.addField.bind(this)),i}addFilterField(e,t,n=null){const i=this.filterFieldBuilder.buildFilterField(e,t,n);return this.filterFieldBuilder.addToSavedFilter(e,t.name,i),this.groupFieldBuilder.addGroupFields(e,t,n,this.filterFieldBuilder.isCriteriaFieldInitialized.bind(this.filterFieldBuilder),this.filterFieldBuilder.buildFilterField.bind(this.filterFieldBuilder),this.filterFieldBuilder.addToSavedFilter.bind(this.filterFieldBuilder)),this.attributeBuilder.addAttributes(e,e.criteriaFields,t,n,this.filterAttributeBuilder.buildFilterAttribute.bind(this.filterAttributeBuilder),this.filterAttributeBuilder.addAttributeToSavedFilter.bind(this.filterAttributeBuilder)),i}addLineItem(e,t,n,i=null){i||(i={id:"",module:n.definition.module||"",attributes:{},fields:{},formGroup:new h.FormGroup({})}),this.lineItemBuilder.addLineItem(e,i,this.addField.bind(this),this.languageStore,t,n),n.itemFormArray.updateValueAndValidity()}removeLineItem(e,t){const n=e.items[t];!n||(n.id?n.attributes.deleted=1:e.items=t>-1?[...e.items.slice(0,t),...e.items.slice(t+1)]:e.items,e.itemFormArray.clear(),e.items.forEach(t=>{!t||t&&t.attributes&&t.attributes.deleted||e.itemFormArray.push(t.formGroup)}),e.itemFormArray.updateValueAndValidity())}addToRecord(e,t,n){!e||!t||!n||(e.fields||(e.fields={}),e.fields[t]=n,e.formGroup&&n.itemFormArray&&e.formGroup.addControl(t+"-items",n.itemFormArray),e.formGroup&&n.formControl&&e.formGroup.addControl(t,n.formControl))}isFieldInitialized(e,t){return!!e.fields[t]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(vu),i.\u0275\u0275inject(yu),i.\u0275\u0275inject(bu),i.\u0275\u0275inject(Su),i.\u0275\u0275inject(Cu),i.\u0275\u0275inject(wu),i.\u0275\u0275inject(ho))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Iu=(()=>{class e{constructor(e,t){this.fieldManager=e,this.language=t}buildEmptyRecord(e){return{id:"",module:e,attributes:{id:""},fields:{},formGroup:new h.FormGroup({})}}initFields(e,t){return e.fields||(e.fields={}),e.formGroup||(e.formGroup=new h.FormGroup({})),t.forEach(t=>{!t||!t.name||this.fieldManager.addField(e,t,this.language)}),e.fields}injectParamFields(e,t,n){Object.keys(e).forEach(i=>{var r;const o=n[i];if((0,c.isVoid)(o))this.handleLinkTypeRelationship(i,e,n,t);else{const s=o.type||"";let a=o.id_name||"";const l=o.name||"";let c=o.rname||"";if("relate"===s&&a===l)return void(t.attributes[i]=e[i]);if("parent"===s){const o={};let s="name",a="parent_id";const l=(null!==(r=n[i+"-group"])&&void 0!==r?r:{}).groupFields[i];return l&&l.rname&&(s=l.rname),s&&(o[s]=e[i]),a&&e[a]&&(o.id=e[a]),void(t.attributes[i]=o)}if("relate"===s){const n={};return c&&(n[c]=e[i]),a&&e[a]&&(n.id=e[a]),void(t.attributes[i]=n)}t.attributes[i]=e[i]}})}handleLinkTypeRelationship(e,t,n,i){if("return_relationship"===e){const e=t.return_relationship;if(!e)return;Object.keys(n).forEach(r=>{var o,s,a,l;const c=n[r];if("link"!==(c.type||""))return;const d=c.relationship||"";if(d&&d===e){const e=null!==(s=null!==(o=c.module)&&void 0!==o?o:t.return_module)&&void 0!==s?s:"";if(!e)return;const n=t.parent_name;if(!n)return;const r=null===(a=null==c?void 0:c.relationshipMetadata)||void 0===a?void 0:a.related_id,d=null!==(l=t[r])&&void 0!==l?l:"";if(!d)return;i.attributes[c.name]=[{id:d,module:e,attributes:{id:d,name:n}}]}})}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(xu),i.\u0275\u0275inject(ho))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Eu=(()=>{class e extends Ta{constructor(e,t,n,i){super(e,i),this.typeFormatter=e,this.registry=t,this.recordManager=n,this.logic=i}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.getMode())}getAttributes(){const e=[];return this.field.definition.layout.forEach(t=>{!this.field.attributes[t]||"none"===this.field.attributes[t].display||e.push(this.field.attributes[t])}),e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasAttributes()}showLabel(e){const t=e.definition||null,n=t.showLabel||null;return!(!t||!n||"hide"===(e.metadata&&e.metadata.labelDisplay||""))&&(n.includes("*")||n.includes(this.mode))}hasAttributes(){return!(!this.field.definition.attributeFields||(0,c.emptyObject)(this.field.definition.attributeFields))}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}initUpdateParentSubscription(){!this.field.attributes||Object.keys(this.field.attributes).forEach(e=>{const t=this.field.attributes[e];!t.valueChanges$||this.subs.push(t.valueChanges$.subscribe(e=>{this.setValueOnParent(t,e.valueObject||e.valueList||e.value)}))})}setValueOnParent(e,t){var n;const i=null!==(n=e.valueParent)&&void 0!==n?n:"field";e.valuePath?(0,Nr.Z)("record"===i?this.record:this.field,e.valuePath,t):(0,Nr.Z)("record"===i?this.record.attributes:this.field.valueObject,e.name,t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(kd),i.\u0275\u0275directiveInject(Iu),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function _u(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-label",1),i.\u0275\u0275elementContainerEnd())}function Mu(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label"),i.\u0275\u0275element(1,"scrm-label",6),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",e.labelKey)("module",t.getModule())}}function ju(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span",7),i.\u0275\u0275element(1,"scrm-dynamic-field",8),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("componentType",t.getComponentType(e.type,e.definition))("field",e)("klass",t.klass)("mode",t.getMode())("record",t.record)("parent",t.parent)("type",e.type)}}function ku(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275elementStart(1,"span",4),i.\u0275\u0275template(2,Mu,2,2,"label",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,ju,2,7,"span",5),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275classProp("flex-fill","edit"===n.mode&&"flex-row"===n.getDirection())("align-self-start","flex-row"===n.getDirection()&&e.labelKey&&n.showLabel(e)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.labelKey&&n.showLabel(e)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.type)}}function Lu(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,ku,4,6,"div",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end field-group h-100 composite-field-wrapper"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.getAttributes())}}let Fu=(()=>{class e extends Eu{constructor(e,t,n,i){super(e,t,n,i),this.typeFormatter=e,this.registry=t,this.recordManager=n,this.logic=i}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(kd),i.\u0275\u0275directiveInject(Iu),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-composite-field"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill","align-self-start",4,"ngFor","ngForOf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],[1,"field-group-label","pt-2","pr-1"],["class","field-group-field pr-1 pb-1 composite-field",4,"ngIf"],[3,"labelKey","module"],[1,"field-group-field","pr-1","pb-1","composite-field"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,_u,2,0,"ng-container",0),i.\u0275\u0275template(1,Lu,3,4,"ng-container",0)),2&e&&(i.\u0275\u0275property("ngIf",!t.isConfigured()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isConfigured()))},directives:[p.NgIf,To,p.NgForOf,Pd],encapsulation:2}),e})(),Ou=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,hs,Gd]]}),e})();const Du=[...Ed,Hd,Ou],Au=[..._d,Zd,Fu],Nu=Object.assign(Object.assign({},Md),{"grouped-field.list":Zd,"grouped-field.detail":Zd,"grouped-field.edit":Zd,"grouped-field.filter":Zd,"composite.list":Fu,"composite.detail":Fu,"composite.edit":Fu,"composite.filter":Fu});let Ru=(()=>{class e extends jd{constructor(){super()}getDefaultMap(){return Nu}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Tu=(()=>{class e extends Ta{constructor(e,t,n,i,r){super(e,i),this.typeFormatter=e,this.registry=t,this.recordManager=n,this.logic=i,this.fieldManager=r}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.getMode())}getItems(){this.field.items=this.field.items||[];const e=this.field&&this.field.definition&&this.field.definition.lineItems||{},t=this.field.items||[];return(t&&t.filter(e=>!(e&&e.attributes&&e.attributes.deleted))).forEach((t,n)=>{let i=!0;e.labelOnFirstLine&&n>0&&(i=!1),this.setAttributeLabelDisplay(t,i)}),this.field.items}getItemFields(e){const t=e.fields||{};return Object.keys(t).map(e=>t[e])}removeItem(e){this.fieldManager.removeLineItem(this.field,e),this.updateItems(this.field.items),this.triggerLineActionEvents(c.LineActionEvent.onLineItemRemove)}addEmptyItem(){this.fieldManager.addLineItem(this.field.definition.lineItems&&this.field.definition.lineItems.definition||{},this.record,this.field),this.triggerLineActionEvents(c.LineActionEvent.onLineItemAdd)}updateItems(e){this.field.items=e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasItemConfig()}isEditable(){return(0,c.isEditable)(this.mode)}showLabel(e){const t=e.definition||null,n=t.showLabel||null;return!(!t||!n)&&(n.includes("*")||n.includes(this.mode))}getMessageContext(e,t){const n=e&&e.message&&e.message.context||{};return n.module=t&&t.module||"",n}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}hasItemConfig(){return!(!this.field.definition.lineItems||!this.field.definition.lineItems.definition)}initUpdateParentSubscription(){!this.field.attributes||Object.keys(this.field.attributes).forEach(e=>{const t=this.field.attributes[e];!t.valueChanges$||this.subs.push(t.valueChanges$.subscribe(e=>{this.setValueOnParent(t,e.valueObject||e.valueList||e.value)}))})}setValueOnParent(e,t){e.valuePath?(0,Nr.Z)(this.field,e.valuePath,t):(0,Nr.Z)(this.field.valueObject,e.name,t)}setAttributeLabelDisplay(e,t){const n=e.fields||{};Object.keys(n).forEach(e=>{const i=n[e];if("composite"!==i.type)return;const r=i.attributes||{};Object.keys(r).forEach(e=>{const n=r[e],i=n.metadata||{};i.labelDisplay=t?"default":"hide",n.metadata=i})})}triggerLineActionEvents(e){var t;const n=(null===(t=this.field)||void 0===t?void 0:t.logic)||{};(0,c.emptyObject)(n)||Object.keys(n).forEach(t=>{var i,r;const o=n[t]||null,s=null===(r=null===(i=null==o?void 0:o.params)||void 0===i?void 0:i.triggerOnEvents)||void 0===r?void 0:r[e];(0,c.isTrue)(s)&&this.logic.runLogic(this.field,this.mode,this.record)})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ru),i.\u0275\u0275directiveInject(Iu),i.\u0275\u0275directiveInject(Ra),i.\u0275\u0275directiveInject(xu))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function Pu(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-label",1),i.\u0275\u0275elementContainerEnd())}function Bu(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275element(1,"scrm-dynamic-field",10),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2).$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275classMapInterpolate2("",e.type," ",e.name,""),i.\u0275\u0275advance(1),i.\u0275\u0275property("componentType",r.getComponentType(e.type,e.definition))("field",e)("klass",r.klass)("mode",r.mode)("record",n)("parent",r.parent)("type",e.type)}}function $u(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-button",11),2&e){const e=i.\u0275\u0275nextContext(2),t=e.$implicit,n=e.index,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("config",r.getRemoveItemButton(t,n))}}function Vu(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275elementStart(1,"div",7),i.\u0275\u0275template(2,Bu,2,11,"div",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",9),i.\u0275\u0275template(4,$u,1,1,"scrm-button",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.getItemFields(e)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.isEditable())}}function zu(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Vu,5,2,"div",5),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!(e&&e.attributes&&e.attributes.deleted))}}function Uu(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-button",11),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("config",e.getAddItemButton())}}const Ku=function(e){return{field:e}};function Zu(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",13),i.\u0275\u0275element(1,"scrm-dynamic-label",14),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("context",n.getMessageContext(e.value,n.record))("fields",i.\u0275\u0275pureFunction1(3,Ku,n.field))("labelKey",n.getMessageLabelKey(e.value))}}function Gu(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Zu,2,5,"div",12),i.\u0275\u0275pipe(2,"keyvalue"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,1,e.field.itemFormArray.errors))}}function Hu(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Gu,3,3,"ng-container",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field.itemFormArray.invalid)}}function Wu(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275template(3,zu,2,1,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3),i.\u0275\u0275template(5,Uu,1,1,"scrm-button",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,Hu,2,1,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate2("line-items d-flex flex-column ",e.field.type," ",e.field.name,""),i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end line-item h-100"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.getItems()),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.isEditable()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.isEditable()&&e.field.itemFormArray&&e.field.itemFormArray.errors)}}let qu=(()=>{class e extends Tu{constructor(e,t,n,i,r){super(e,t,n,i,r),this.typeFormatter=e,this.registry=t,this.recordManager=n,this.logic=i,this.fieldManager=r}getAddItemButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"plus",onClick:()=>{this.addEmptyItem()}}}getRemoveItemButton(e,t){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"minimise",onClick:()=>{this.removeItem(t)}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ru),i.\u0275\u0275directiveInject(Iu),i.\u0275\u0275directiveInject(Ra),i.\u0275\u0275directiveInject(xu))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-line-items-field"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_LINE_ITEMS_FIELD_CONFIG"],[4,"ngFor","ngForOf"],[1,"line-item-buttons","d-flex","justify-content-end","mt-1"],[3,"config",4,"ngIf"],["class","d-flex flex-row line-item-entry w-100 align-items-end",4,"ngIf"],[1,"d-flex","flex-row","line-item-entry","w-100","align-items-end"],[1,"flex-grow-1","line-item-entry-composite"],[3,"class",4,"ngFor","ngForOf"],[1,"line-item-entry-buttons","mb-1"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"config"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Pu,2,0,"ng-container",0),i.\u0275\u0275template(1,Wu,7,10,"ng-container",0)),2&e&&(i.\u0275\u0275property("ngIf",!t.isConfigured()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isConfigured()))},directives:[p.NgIf,To,p.NgForOf,Pd,Vo,Ca],pipes:[p.KeyValuePipe],encapsulation:2}),e})();function Qu(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-dynamic-field",3),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("componentType",e.componentType)("field",e.field)("klass",e.klass)("mode",e.componentMode)("record",e.record)("parent",e.record)("type",e.type)}}function Yu(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-line-items-field",4),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("field",e.field)("klass",e.klass)("mode",e.componentMode)("record",e.record)("parent",e.record)}}function Xu(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Qu,1,7,"scrm-dynamic-field",1),i.\u0275\u0275template(2,Yu,1,5,"scrm-line-items-field",2),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","line-items"!==e.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","line-items"===e.type)}}let Ju=(()=>{class e{constructor(e){this.registry=e,this.record=null,this.klass=null,this.class="field",this.map=Nu}ngOnInit(){this.setHostClass()}get componentMode(){let e=this.mode;return"create"===e&&(e="edit"),"edit"===e&&this.field.display&&"readonly"===this.field.display&&(e="detail"),e}get componentType(){return this.registry.getDisplayType(this.record&&this.record.module||"default",this.type,this.field.definition&&this.field.definition.displayType||"",this.componentMode)}setHostClass(){const e=[];e.push("field"),this.mode&&e.push("field-mode-"+this.mode),this.type&&e.push("field-type-"+this.type),this.field&&this.field.name&&e.push("field-name-"+this.field.name),this.class=e.join(" ")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ru))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-field"]],hostVars:2,hostBindings:function(e,t){2&e&&i.\u0275\u0275classMap(t.class)},inputs:{mode:"mode",type:"type",field:"field",record:"record",klass:"klass"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type",4,"ngIf"],[3,"field","klass","mode","record","parent",4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"field","klass","mode","record","parent"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Xu,3,2,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.field&&"none"!==t.field.display)},directives:[p.NgIf,Pd,qu],encapsulation:2}),e})();function ep(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label",1),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",t.labelClass),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.field.label)}}function tp(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-label",8),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("labelKey",e.field.labelKey)("ngClass",t.labelClass)}}function np(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,ep,2,2,"label",6),i.\u0275\u0275template(2,tp,1,2,"scrm-label",7),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275classProp("pr-3","inline"===t.labelDisplay),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field.label),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.field.label&&e.field.labelKey)}}function ip(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275element(1,"scrm-field",9),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275classProp("flex-grow-1","inline"===t.labelDisplay),i.\u0275\u0275advance(1),i.\u0275\u0275property("field",e.field)("klass",t.inputClass)("mode",t.fieldMode)("record",t.record)("type",e.field.type)}}function rp(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275projection(1),i.\u0275\u0275elementContainerEnd())}function op(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275projection(1,1),i.\u0275\u0275elementContainerEnd())}function sp(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementContainerStart(1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275template(3,np,3,4,"div",3),i.\u0275\u0275template(4,ip,2,7,"div",4),i.\u0275\u0275template(5,rp,2,0,"ng-container",5),i.\u0275\u0275template(6,op,2,0,"ng-container",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",n.colClass),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("align-items-center","inline"===n.labelDisplay)("flex-column","top"===n.labelDisplay)("flex-row","inline"===n.labelDisplay)("justify-content-end",!e.field),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.actionSlot),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.specialSlot)}}function ap(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,sp,7,13,"div",0),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",n.rowClass),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.cols)}}const lp=[[["","field-grid-actions",""]],[["","field-grid-actions",""]]],cp=["[field-grid-actions]","[field-grid-actions]"];let dp=(()=>{class e extends xa{constructor(e){super(e),this.breakpointObserver=e,this.fieldMode="detail"}ngOnChanges(){this.buildGrid()}buildGrid(){const e=[];if(!this.fields||0===this.fields.length)return void(this.fieldGrid=[]);let t=0,n={cols:[]};e.push(n),this.fields.forEach(i=>{t>=this.colNumber&&(t=0,n={cols:[]},e.push(n)),n.cols.push({field:i}),t++}),t<this.colNumber&&this.fillRow(e[e.length-1]),this.addSpecialSlots(e),this.fieldGrid=e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(w))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-field-grid"]],inputs:{fields:"fields",record:"record",fieldMode:"fieldMode"},features:[i.\u0275\u0275InheritDefinitionFeature,i.\u0275\u0275NgOnChangesFeature],ngContentSelectors:cp,decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"d-flex"],[3,"pr-3",4,"ngIf"],[3,"flex-grow-1",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","ngClass"],[3,"field","klass","mode","record","type"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(lp),i.\u0275\u0275elementStart(0,"form"),i.\u0275\u0275template(1,ap,2,2,"div",0),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.fieldGrid))},directives:[p.NgForOf,p.NgClass,p.NgIf,To,Ju],encapsulation:2}),e})(),up=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,hs,Gd,fs,wa]]}),e})(),pp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[...Du,p.CommonModule,Gd,up]]}),e})(),hp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs,pp,hs]]}),e})();function mp(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",10),i.\u0275\u0275text(2,"*"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function fp(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",11),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(4).dataSource.getEditAction()}),i.\u0275\u0275element(1,"scrm-image",12),i.\u0275\u0275elementEnd()}}const gp=function(){return["edit","create"]};function vp(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275elementStart(2,"strong"),i.\u0275\u0275elementStart(3,"label",1),i.\u0275\u0275text(4),i.\u0275\u0275pipe(5,"uppercase"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(6,": "),i.\u0275\u0275template(7,mp,3,0,"ng-container",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",6),i.\u0275\u0275elementStart(9,"div",7),i.\u0275\u0275element(10,"scrm-field",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"div"),i.\u0275\u0275template(12,fp,2,0,"button",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngClass",t.labelClass),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(5,9,e.field.label)),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",e.field.definition.required&&i.\u0275\u0275pureFunction0(11,gp).includes(t.config.mode)),i.\u0275\u0275advance(3),i.\u0275\u0275property("type",e.field.type)("mode",t.config.mode)("klass",t.inputClass)("field",e.field)("record",t.record),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!1!==e.field.definition.inline_edit&&!e.field.definition.readonly&&t.dataSource.inlineEdit&&"detail"===t.config.mode)}}function yp(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275projection(1),i.\u0275\u0275elementContainerEnd())}function bp(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275projection(1,1),i.\u0275\u0275elementContainerEnd())}function Sp(e,t){1&e&&i.\u0275\u0275element(0,"div",13)}function Cp(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,vp,13,12,"ng-container",3),i.\u0275\u0275template(2,yp,2,0,"ng-container",3),i.\u0275\u0275template(3,bp,2,0,"ng-container",3),i.\u0275\u0275template(4,Sp,1,0,"div",4),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=t.index,r=i.\u0275\u0275nextContext(),o=r.$implicit,s=r.index,a=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("field-column-bordered",o.cols.length>1&&n<o.cols.length-1),i.\u0275\u0275property("ngClass",a.colClass),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.actionSlot),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.specialSlot),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field&&s<a.fieldGrid.length-1)}}function wp(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,Cp,5,7,"div",2),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",n.rowClass),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.cols)}}const xp=[[["","field-grid-actions",""]],[["","field-grid-special",""]]],Ip=["[field-grid-actions]","[field-grid-special]"];let Ep=(()=>{class e extends xa{constructor(e){super(e),this.breakpointObserver=e,this.baseColClass={col:!0,"form-group":!0,"m-1":!1,"m-0":!0,"pl-3":!0,"pb-2":!0,"pr-3":!0,"d-flex":!0,"flex-column":!0,"justify-content-between":!0},this.baseRowClass={"form-row":!0,"align-items-stretch":!0}}ngOnInit(){this.subscriptions.push(this.dataSource.getConfig().subscribe(e=>{this.config=Object.assign({},e)})),this.subscriptions.push(this.dataSource.getLayout().subscribe(e=>{this.layout=Object.assign({},e)})),this.subscriptions.push(this.dataSource.getFields().subscribe(e=>{this.fields=Object.assign({},e)})),this.subscriptions.push(this.dataSource.getRecord().subscribe(e=>{this.record=Object.assign({},e)})),super.ngOnInit()}buildGrid(){const e=[];this.fields&&0!==Object.keys(this.fields).length?(this.layout.rows.forEach(t=>{let n={cols:[]};t.cols.forEach((i,r)=>{const o=this.fields[i.name]||null;o?(n.cols.push({field:o}),1===this.colNumber&&r<t.cols.length-1&&(e.push(n),n={cols:[]})):n.cols.push({})}),n.cols.length<this.colNumber&&this.fillRow(n),e.push(n)}),this.addSpecialSlots(e),this.fieldGrid=e):this.fieldGrid=[]}get colNumber(){return 1===this.sizeMap[this.currentSize]?1:this.config.maxColumns}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(w))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-field-layout"]],inputs:{dataSource:"dataSource"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Ip,decls:2,vars:4,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"field-column-bordered","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["class","field-separation mt-2",4,"ngIf"],[1,"label-container"],[1,"d-flex","flex-grow-1"],[1,"flex-grow-1","text-break"],[3,"type","mode","klass","field","record"],["type","button","class","record-action-button",3,"click",4,"ngIf"],[1,"required"],["type","button",1,"record-action-button",3,"click"],["image","pencil",1,"sicon"],[1,"field-separation","mt-2"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(xp),i.\u0275\u0275elementStart(0,"form"),i.\u0275\u0275template(1,wp,2,2,"div",0),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275classMapInterpolate1("field-layout ",t.config.mode,""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.fieldGrid))},directives:[p.NgForOf,p.NgClass,p.NgIf,Ju,Eo],pipes:[p.UpperCasePipe],encapsulation:2}),e})(),_p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pp,hp,Lo]]}),e})();function Mp(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275elementStart(1,"div",18),i.\u0275\u0275elementStart(2,"label",19),i.\u0275\u0275text(3,"Opportunity Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"input",20),i.\u0275\u0275elementStart(5,"label",21),i.\u0275\u0275element(6,"input",22),i.\u0275\u0275element(7,"span",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"p",24),i.\u0275\u0275text(9," My Items "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"label",21),i.\u0275\u0275element(11,"input",22),i.\u0275\u0275element(12,"span",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"p",24),i.\u0275\u0275text(14," Open Items "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"label",21),i.\u0275\u0275element(16,"input",22),i.\u0275\u0275element(17,"span",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"p",24),i.\u0275\u0275text(19," My Favourites "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function jp(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275elementStart(1,"div",18),i.\u0275\u0275elementStart(2,"label",19),i.\u0275\u0275text(3,"Opportunity Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"input",25),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",17),i.\u0275\u0275elementStart(6,"div",18),i.\u0275\u0275elementStart(7,"div",26),i.\u0275\u0275elementStart(8,"label",19),i.\u0275\u0275text(9,"Account Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div",17),i.\u0275\u0275elementStart(11,"div",13),i.\u0275\u0275element(12,"input",25),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",12),i.\u0275\u0275elementStart(14,"div",26),i.\u0275\u0275elementStart(15,"button",27),i.\u0275\u0275element(16,"scrm-image",28),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"button",29),i.\u0275\u0275element(18,"scrm-image",30),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",17),i.\u0275\u0275elementStart(20,"div",18),i.\u0275\u0275elementStart(21,"label",19),i.\u0275\u0275text(22,"Opportunity Amount"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(23,"div",17),i.\u0275\u0275elementStart(24,"div",13),i.\u0275\u0275elementStart(25,"div",31),i.\u0275\u0275elementStart(26,"select"),i.\u0275\u0275elementStart(27,"option"),i.\u0275\u0275text(28,"Equals"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(29,"option"),i.\u0275\u0275text(30,"Greater than"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(31,"option"),i.\u0275\u0275text(32,"Less than"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(33,"div",12),i.\u0275\u0275element(34,"input",32),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(35,"div",17),i.\u0275\u0275elementStart(36,"div",18),i.\u0275\u0275elementStart(37,"label",19),i.\u0275\u0275text(38,"Expected Close Date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(39,"div",17),i.\u0275\u0275elementStart(40,"div",33),i.\u0275\u0275elementStart(41,"div",31),i.\u0275\u0275elementStart(42,"select"),i.\u0275\u0275elementStart(43,"option"),i.\u0275\u0275text(44,"Equals"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(45,"option"),i.\u0275\u0275text(46,"Greater than"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(47,"option"),i.\u0275\u0275text(48,"Less than"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(49,"div",34),i.\u0275\u0275element(50,"input",35),i.\u0275\u0275elementStart(51,"button",36),i.\u0275\u0275element(52,"scrm-image",37),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(53,"div",17),i.\u0275\u0275elementStart(54,"div",18),i.\u0275\u0275elementStart(55,"label",19),i.\u0275\u0275text(56,"Next Step"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(57,"input",25),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(58,"div",17),i.\u0275\u0275elementStart(59,"div",13),i.\u0275\u0275elementStart(60,"label",19),i.\u0275\u0275text(61,"Save Filter as:"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(62,"div",17),i.\u0275\u0275elementStart(63,"div",13),i.\u0275\u0275elementStart(64,"div",31),i.\u0275\u0275elementStart(65,"select"),i.\u0275\u0275elementStart(66,"option"),i.\u0275\u0275text(67,"Lorem Ipsum"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(68,"option"),i.\u0275\u0275text(69,"Lorem Ipsum"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(70,"option"),i.\u0275\u0275text(71,"Lorem Ipsum"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(72,"div",12),i.\u0275\u0275elementStart(73,"button",38),i.\u0275\u0275text(74,"Save"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(75,"div",17),i.\u0275\u0275elementStart(76,"div",18),i.\u0275\u0275elementStart(77,"label",19),i.\u0275\u0275text(78,"Order by column"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(79,"div",31),i.\u0275\u0275elementStart(80,"select"),i.\u0275\u0275elementStart(81,"option"),i.\u0275\u0275text(82,"Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(83,"option"),i.\u0275\u0275text(84,"Date Created"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(85,"option"),i.\u0275\u0275text(86,"Date Modified"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function kp(e,t){1&e&&(i.\u0275\u0275elementStart(0,"button",39),i.\u0275\u0275text(1," My Filters "),i.\u0275\u0275elementEnd())}function Lp(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",40),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).toggleAdvancedFilter()}),i.\u0275\u0275text(1," Advanced "),i.\u0275\u0275elementEnd()}}function Fp(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",40),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).toggleQuickFilter()}),i.\u0275\u0275text(1," Quick "),i.\u0275\u0275elementEnd()}}function Op(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275elementStart(1,"div",4),i.\u0275\u0275elementStart(2,"div",5),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",6),i.\u0275\u0275listener("click",function(){return t.$implicit.dismiss("Cross click")}),i.\u0275\u0275element(5,"scrm-image",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",8),i.\u0275\u0275template(7,Mp,20,0,"ng-template",9),i.\u0275\u0275template(8,jp,87,0,"ng-template",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",10),i.\u0275\u0275elementStart(10,"div",11),i.\u0275\u0275element(11,"div",12),i.\u0275\u0275elementStart(12,"div",13),i.\u0275\u0275elementStart(13,"div",14),i.\u0275\u0275elementStart(14,"button",15),i.\u0275\u0275text(15," Clear "),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(16,kp,2,0,"ng-template",9),i.\u0275\u0275template(17,Lp,2,0,"ng-template",9),i.\u0275\u0275template(18,Fp,2,0,"ng-template",9),i.\u0275\u0275elementStart(19,"button",16),i.\u0275\u0275text(20," Search "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.modalTitle),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",e.quickFilter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.advancedFilter),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf",e.advancedFilter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.quickFilter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.advancedFilter)}}let Dp=(()=>{class e{constructor(e){this.modalService=e,this.filterModal=!0,this.modalTitle="Quick Filter",this.quickFilter=!0,this.advancedFilter=!1}toggleQuickFilter(){this.modalTitle="Quick Filter",this.advancedFilter=!this.advancedFilter,this.quickFilter=!this.quickFilter}toggleAdvancedFilter(){this.modalTitle="Advanced Filter",this.advancedFilter=!this.advancedFilter,this.quickFilter=!this.quickFilter}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"filter-modal"}).result.then(e=>{this.closeResult=`Closed with: ${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}getDismissReason(e){return e===I.ModalDismissReasons.ESC?"by pressing ESC":e===I.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(I.NgbModal))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-filter-ui"]],decls:5,vars:0,consts:[["filtermodal",""],["type","button",1,"settings-button",3,"click"],["image","filter",1,"sicon"],[1,"filter-modal"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close Filter Modal",1,"close",3,"click"],["image","close_modal",1,"sicon"],[1,"modal-body"],[3,"ngIf"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-lg-3"],[1,"col-lg-9"],[1,"modal-buttons"],["type","button","data-dismiss","modal",1,"btn","modal-button-cancel"],["type","button",1,"btn","modal-button-save"],[1,"row"],[1,"col-lg-12"],[1,"modal-label"],["type","text","placeholder","Lorem Ipsum",1,"modal-input"],[1,"filter-checkbox-container"],["type","filter-checkbox"],[1,"filter-checkmark"],[1,"quick-filter-options"],["type","text","placeholder","Lorem Ipsum",1,"modal-input","modal-input-large"],[1,"relate-input-group"],["type","button",1,"create-popup-button","create-popup-arrow"],["image","cursor",1,"sicon"],["type","button",1,"create-popup-button","create-popup-cross"],["image","cross",1,"sicon"],[1,"select"],["type","text","placeholder","0",1,"modal-input","modal-input-small"],[1,"col-lg-8"],[1,"col-lg-4"],["type","text","placeholder","dd/mm/yy",1,"modal-input","modal-date-input"],["type","button",1,"create-popup-button","create-popup-calendar"],["image","calendar",1,"sicon"],[1,"save-filter-button"],["type","button",1,"modal-button-save","dropdown-toggle"],["type","button",1,"btn","modal-button-save",3,"click"]],template:function(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,Op,21,6,"ng-template",null,0,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(2,"button",1),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const n=i.\u0275\u0275reference(1);return t.open(n)}),i.\u0275\u0275element(3,"scrm-image",2),i.\u0275\u0275text(4," Filter\n"),i.\u0275\u0275elementEnd()}},directives:[Eo,p.NgIf],encapsulation:2}),e})(),Ap=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo]]}),e})();const Np={tabs:[],groupedTabs:[],modules:{},userActionMenu:[],maxTabs:0};let Rp=(0,c.deepClone)(Np),Tp=null,Pp=(()=>{class e{constructor(e){this.recordGQL=e,this.store=new r.BehaviorSubject(Rp),this.state$=this.store.asObservable(),this.resourceName="navbar",this.fieldsMetadata={fields:["tabs","groupedTabs","modules","userActionMenu","maxTabs"]},this.tabs$=this.state$.pipe((0,o.map)(e=>e.tabs),(0,o.distinctUntilChanged)()),this.groupedTabs$=this.state$.pipe((0,o.map)(e=>e.groupedTabs),(0,o.distinctUntilChanged)()),this.modules$=this.state$.pipe((0,o.map)(e=>e.modules),(0,o.distinctUntilChanged)()),this.userActionMenu$=this.state$.pipe((0,o.map)(e=>e.userActionMenu),(0,o.distinctUntilChanged)()),this.maxTabs$=this.state$.pipe((0,o.map)(e=>e.maxTabs),(0,o.distinctUntilChanged)()),this.vm$=(0,r.combineLatest)([this.tabs$,this.groupedTabs$,this.modules$,this.userActionMenu$,this.maxTabs$]).pipe((0,o.map)(([e,t,n,i,r])=>({tabs:e,groupedTabs:t,modules:n,userActionMenu:i,maxTabs:r})))}clear(){Tp=null,this.updateState((0,c.deepClone)(Np))}clearAuthBased(){this.clear()}load(){return this.getNavigation().pipe((0,o.tap)(e=>{this.updateState(Object.assign(Object.assign({},Rp),{tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs}))}))}isCached(){return null!==Tp}set(e){Tp=(0,r.of)(e).pipe((0,o.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},Rp),{tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs}))}updateState(e){this.store.next(Rp=e)}getNavigation(){return null===Tp&&(Tp=this.fetch("1").pipe((0,o.shareReplay)(1))),Tp}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/navbars/${e}`,this.fieldsMetadata).pipe((0,o.map)(({data:e})=>{let t=null;return e&&e.navbar&&(t={tabs:e.navbar.tabs,groupedTabs:e.navbar.groupedTabs,userActionMenu:e.navbar.userActionMenu,modules:e.navbar.modules,maxTabs:e.navbar.maxTabs}),t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Zr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Bp={systemConfig:!1,userPreferences:!1,appStrings:!1,appListStrings:!1,modStrings:!1,themeImages:!1,navigation:!1,moduleMetadata:!1};let $p=(0,c.deepClone)(Bp),Vp=null,zp=(()=>{class e{constructor(e,t,n,i,o,s,a,l){this.recordGQL=e,this.appState=t,this.metadata=n,this.language=i,this.themeImages=o,this.config=s,this.preferences=a,this.navigation=l,this.store=new r.BehaviorSubject($p),this.state$=this.store.asObservable(),this.resourceName="appMetadata",this.fieldsMetadata={fields:["id","_id"]},this.types=["systemConfig","userPreferences","language","themeImages","navigation","moduleMetadata"],this.metadata$=this.state$}clear(){Vp=null,this.updateState((0,c.deepClone)(Bp))}clearAuthBased(){this.clear()}get(){return $p}load(e="login",t=[],n=!0){const i=this.getNotLoadedTypes();return n=n&&i.length<1,(!t||t.length<1)&&(t=i).push("minimalModuleMetadata"),this.getMetadata(e,t,n).pipe((0,o.tap)(e=>{this.updateState(e)}))}loadModuleMetadata(e="login",t=!0){var n;let i=null!==(n=null==$p?void 0:$p.moduleMetadata)&&void 0!==n&&n;return this.getMetadata(e,["moduleMetadata"],t=t&&i).pipe((0,o.tap)(e=>{this.updateState(e)}))}getMetadata(e="app",t=[],n=!0){return(!t||t.length<1)&&(t=[...this.types]),(null==Vp||!0!==n)&&(Vp=this.fetch(e,t).pipe((0,o.shareReplay)(1))),Vp}getNotLoadedTypes(){const e=[];return this.isNavigationLoaded()||e.push("navigation"),this.arePreferencesLoaded()||e.push("userPreferences"),this.areSystemConfigsLoaded()||e.push("systemConfig"),this.areAllLanguageStringsLoaded()||e.push("language"),this.areThemeImagesLoaded()||e.push("themeImages"),e}areAllLanguageStringsLoaded(){return this.language.areAllCached()}arePreferencesLoaded(){return this.preferences.isCached()}areSystemConfigsLoaded(){return this.config.isCached()}areThemeImagesLoaded(){return this.themeImages.isCached()}isNavigationLoaded(){return this.navigation.isCached()}updateState(e){this.store.next($p=e)}fetch(e,t=[]){const n={fields:[...this.fieldsMetadata.fields,...t]};return this.recordGQL.fetch(this.resourceName,`/api/app-metadata/${e}`,n).pipe((0,o.catchError)(()=>(0,r.of)({})),(0,o.map)(({data:e})=>{const t=null==e?void 0:e.appMetadata,n=Object.assign({},$p);return(0,c.emptyObject)(t)||(this.setConfig(n,t),this.setPreferences(n,t),this.setThemeImages(n,t),this.setNavigation(n,t),this.setLanguages(n,t),this.setModuleMetadata(n,t)),n}))}setModuleMetadata(e,t){var n,i;let r=null!==(n=null==t?void 0:t.moduleMetadata)&&void 0!==n?n:{},o="moduleMetadata";(0,c.emptyObject)(r)&&(r=null!==(i=null==t?void 0:t.minimalModuleMetadata)&&void 0!==i?i:{},o="minimalModuleMetadata"),(0,c.emptyObject)(r)||(e[o]=!0,Object.keys(r).forEach(e=>{var t;const n=null!==(t=r[e])&&void 0!==t?t:{};if(!(0,c.emptyObject)(n)){const t=this.metadata.mapMetadata(e,r[e]);this.metadata.getModule()!==e?this.metadata.setModuleMetadata(e,t):this.metadata.isCached(e)||this.metadata.set(e,t)}}))}setLanguages(e,t){var n,i,r,o,s,a,l,d;const u=null!==(n=null==t?void 0:t.language)&&void 0!==n?n:{};if(!(0,c.emptyObject)(u)){const t={};t.languageKey=null!==(i=u.id)&&void 0!==i?i:"",t.appStrings=null!==(o=null===(r=null==u?void 0:u.appStrings)||void 0===r?void 0:r.items)&&void 0!==o?o:{},t.appListStrings=null!==(a=null===(s=null==u?void 0:u.appListStrings)||void 0===s?void 0:s.items)&&void 0!==a?a:{},t.modStrings=null!==(d=null===(l=null==u?void 0:u.modStrings)||void 0===l?void 0:l.items)&&void 0!==d?d:{},e.appStrings=!(0,c.emptyObject)(t.appStrings),e.appListStrings=!(0,c.emptyObject)(t.appListStrings),e.modStrings=!(0,c.emptyObject)(t.modStrings),this.language.set(t.languageKey,t)}}setNavigation(e,t){var n;const i=null!==(n=null==t?void 0:t.navigation)&&void 0!==n?n:{};(0,c.emptyObject)(i)||(e.navigation=!0,this.navigation.set(i))}setThemeImages(e,t){var n,i;const r=null!==(n=null==t?void 0:t.themeImages)&&void 0!==n?n:{},o=null!==(i=null==r?void 0:r.items)&&void 0!==i?i:{};(0,c.emptyObject)(r)||(0,c.emptyObject)(o)||(e.themeImages=!0,this.themeImages.set(r.id,o))}setPreferences(e,t){var n;const i=null!==(n=null==t?void 0:t.userPreferences)&&void 0!==n?n:{};if(!(0,c.emptyObject)(i)){e.userPreferences=!0;const t=this.mapPreferences(i);this.preferences.set(t)}}setConfig(e,t){var n;const i=null!==(n=null==t?void 0:t.systemConfig)&&void 0!==n?n:{};(0,c.emptyObject)(i)||(e.systemConfig=!0,this.config.set(i))}mapPreferences(e){const t={};return Object.keys(e).forEach(n=>{!e[n].items||Object.keys(e[n].items).forEach(i=>{t[i]=e[n].items[i]})}),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Zr),i.\u0275\u0275inject(no),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(So),i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(Pp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Up=(()=>{class e{constructor(e,t,n,i,r,o,s,a){this.appStore=e,this.languageStore=t,this.metadataStore=n,this.navigationStore=i,this.systemConfigStore=r,this.themeImagesStore=o,this.userPreferenceStore=s,this.appMetadataStore=a,this.stateStores={},this.stateStores.appStore=this.buildMapEntry(e,!1),this.stateStores.navigationStore=this.buildMapEntry(i,!0),this.stateStores.languageStore=this.buildMapEntry(t,!0),this.stateStores.metadataStore=this.buildMapEntry(n,!1),this.stateStores.systemConfigStore=this.buildMapEntry(r,!1),this.stateStores.themeImagesStore=this.buildMapEntry(o,!1),this.stateStores.userPreferenceStore=this.buildMapEntry(s,!0),this.stateStores.appMetadataStore=this.buildMapEntry(a,!0)}clear(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].store.clear()})}clearAuthBased(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].authBased&&this.stateStores[e].store.clearAuthBased()})}buildMapEntry(e,t){return{store:e,authBased:t}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(So),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(zp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Kp=(()=>{class e{constructor(e,t,n,i,s,a,l,c,d){this.http=e,this.router=t,this.message=n,this.stateManager=i,this.languageStore=s,this.bnIdle=a,this.appStateStore=l,this.localStorage=c,this.configs=d,this.isUserLoggedIn=new r.BehaviorSubject(!1),this.defaultTimeout="3600",this.timerSet=!1,this.currentUserSubject=new r.BehaviorSubject({}),this.currentUser$=this.currentUserSubject.asObservable().pipe((0,o.distinctUntilChanged)())}isLoggedIn(){return this.isUserLoggedIn.value}getCurrentUser(){return this.currentUserSubject.value}setCurrentUser(e){this.currentUserSubject.next(e),this.isUserLoggedIn.next(!0)}doLogin(e,t,n,i){const r=new mr.HttpHeaders({"Content-Type":"application/json"});return this.http.post("login",{username:e,password:t},{headers:r}).subscribe(e=>{this.appStateStore.updateInitialAppLoading(!0),n(e),this.isUserLoggedIn.next(!0),this.setCurrentUser(e);const t=e.duration;0===t||"0"===t||(t&&(this.defaultTimeout=t),this.bnIdle.startWatching(this.defaultTimeout).subscribe(e=>{e&&!0===this.isUserLoggedIn.value&&(this.message.removeMessages(),this.logout("LBL_SESSION_EXPIRED"))}),this.timerSet=!0)},e=>{i(e)})}logout(e="LBL_LOGOUT_SUCCESS",t=!0){this.appStateStore.updateLoading("logout",!0,!1);const n="logout",i=new mr.HttpParams,r=(new mr.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");this.appStateStore.getActiveRequests()<1?this.callLogout(n,i,r,t,e):this.appStateStore.activeRequests$.pipe((0,o.filter)(e=>e<1),(0,o.take)(1)).subscribe(()=>{this.callLogout(n,i,r,t,e)})}callLogout(e,t,n,i,s){this.resetState(),this.http.post(e,t.toString(),{headers:n,responseType:"text"}).pipe((0,o.take)(1),(0,o.catchError)(e=>(this.message.log("Logout failed"),(0,r.throwError)(e))),(0,o.finalize)(()=>{this.appStateStore.updateInitialAppLoading(!0),this.appStateStore.updateLoading("logout",!1,!1),this.stateManager.clearAuthBased(),this.configs.clear(),!0===i&&this.router.navigate(["/Login"]).finally()})).subscribe(()=>{this.timerSet&&(this.bnIdle.resetTimer(),this.bnIdle.stopTimer(),this.timerSet=!1),this.message.log("Logout success"),(0,c.isEmptyString)(s)||this.message.addSuccessMessageByKey(s)},()=>{this.message.log("Error on logout"),(0,c.isEmptyString)(s)||this.message.addSuccessMessageByKey(s)})}resetState(){this.stateManager.clearAuthBased(),this.localStorage.clear(),this.isUserLoggedIn.next(!1)}fetchSessionStatus(){const e=(new mr.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");return this.http.get("session-status",{headers:e})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(mr.HttpClient),i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Up),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Rr.BnNgIdleService),i.\u0275\u0275inject(no),i.\u0275\u0275inject(io),i.\u0275\u0275inject(Qr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Zp(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",8),i.\u0275\u0275elementStart(2,"a",9),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().backToTop()}),i.\u0275\u0275elementStart(3,"span"),i.\u0275\u0275text(4," Back To Top "),i.\u0275\u0275element(5,"scrm-image",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}}function Gp(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275elementStart(1,"div",12),i.\u0275\u0275elementStart(2,"h5",13),i.\u0275\u0275text(3,"\xa9 Powered By SugarCRM"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",14),i.\u0275\u0275listener("click",function(){return t.$implicit.dismiss("Cross click")}),i.\u0275\u0275element(5,"scrm-image",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",16),i.\u0275\u0275elementStart(7,"p"),i.\u0275\u0275text(8," \xa9 2004-2013 SugarCRM Inc. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p"),i.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p"),i.\u0275\u0275text(12," SugarCRM is a trademark of SugarCRM, Inc. All other company and product names may be trademarks of the respective companies with which they are associated. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function Hp(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275elementStart(1,"div",12),i.\u0275\u0275elementStart(2,"h5",13),i.\u0275\u0275text(3,"\xa9 Supercharged by SuiteCRM"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",14),i.\u0275\u0275listener("click",function(){return t.$implicit.dismiss("Cross click")}),i.\u0275\u0275element(5,"scrm-image",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",16),i.\u0275\u0275elementStart(7,"p"),i.\u0275\u0275text(8," SuiteCRM has been written and assembled by SalesAgility. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p"),i.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p"),i.\u0275\u0275text(12," SuiteCRM is a trademark of SalesAgility Ltd. All other company and product names may be trademarks of the respective companies with which they are associated. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}let Wp=(()=>{class e{constructor(e,t){this.modalService=e,this.authService=t}openSugarCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(e=>{this.closeResult=`Closed with: ${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}openSuiteCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(e=>{this.closeResult=`Closed with: ${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}getDismissReason(e){return e===I.ModalDismissReasons.ESC?"by pressing ESC":e===I.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}ngOnInit(){this.authSub=this.authService.isUserLoggedIn.subscribe(e=>{this.isUserLoggedIn=e})}ngOnDestroy(){this.authSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(I.NgbModal),i.\u0275\u0275directiveInject(Kp))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-footer-ui"]],decls:12,vars:1,consts:[[1,"footer"],[1,"copyright-links"],["data-toggle","modal","data-target",".copyright-suitecrm",1,"footer-link",3,"click"],["data-toggle","modal","data-target",".copyright-sugarcrm",1,"footer-link",3,"click"],[4,"ngIf"],[1,"copyright"],["sugarcopyright",""],["suitecopyright",""],[1,"back-to-top"],[1,"footer-link",3,"click"],["image","arrow_up_filled",1,"sicon","back-top-icon"],["role","dialog","aria-hidden","true",1,"copyright-sugarcrm"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["image","icon_modal_close",1,"sicon"],[1,"modal-body"],["role","dialog","aria-hidden","true",1,"copyright-suitecrm"]],template:function(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"a",2),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const n=i.\u0275\u0275reference(11);return t.openSuiteCopyright(n)}),i.\u0275\u0275text(3," \xa9 Supercharged by SuiteCRM "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"a",3),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const n=i.\u0275\u0275reference(9);return t.openSugarCopyright(n)}),i.\u0275\u0275text(5," \xa9 Powered By SugarCRM "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,Zp,6,0,"ng-container",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",5),i.\u0275\u0275template(8,Gp,13,0,"ng-template",null,6,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(10,Hp,13,0,"ng-template",null,7,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()}2&e&&(i.\u0275\u0275advance(6),i.\u0275\u0275property("ngIf",t.isUserLoggedIn))},directives:[p.NgIf,Eo],encapsulation:2}),e})(),qp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo]]}),e})(),Qp=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-full-page-spinner"]],decls:20,vars:0,consts:[[1,"app-overlay"],["id","overlay-spinner"],[1,"app-loading"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275element(4,"div",4),i.\u0275\u0275element(5,"div",4),i.\u0275\u0275element(6,"div",5),i.\u0275\u0275element(7,"div",6),i.\u0275\u0275element(8,"div",7),i.\u0275\u0275element(9,"div",7),i.\u0275\u0275element(10,"div",8),i.\u0275\u0275element(11,"div",9),i.\u0275\u0275element(12,"div",10),i.\u0275\u0275element(13,"div",10),i.\u0275\u0275element(14,"div",11),i.\u0275\u0275element(15,"div",12),i.\u0275\u0275element(16,"div",10),i.\u0275\u0275element(17,"div",10),i.\u0275\u0275element(18,"div",11),i.\u0275\u0275element(19,"div",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())},styles:[".app-overlay[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:#fff9;z-index:4000;cursor:default}.app-loading[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{height:200px;width:200px;-webkit-animation:scaleIn 4s linear infinite;animation:scaleIn 4s linear infinite;transform-origin:center center;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1,200;stroke-dashoffset:0;-webkit-animation:dash 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite;stroke-linecap:round;stroke:#ddd}.sk-cube-primary[_ngcontent-%COMP%]{background-color:#276ecd}.sk-cube-secondary[_ngcontent-%COMP%]{background-color:#132a46}.sk-cube-grid[_ngcontent-%COMP%]{width:100px;height:100px}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;-webkit-animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out;animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{-webkit-animation-delay:.4s;animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{-webkit-animation-delay:0s;animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}@keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}"]}),e})(),Yp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,f.AngularSvgIconModule]]}),e})(),Xp=(()=>{class e{constructor(e){this.apollo=e}fetch(e,t){const n={query:l()`
            query getBatchedStatistics($module: String!, $queries: Iterable!){
              getBatchedStatistics(module: $module, queries: $queries) {
                  _id
                  id
                  items
              }
            }
        `,variables:{module:e,queries:t}};return this.apollo.query(n).pipe((0,o.map)(e=>{const t={},n=(e.data&&e.data.getBatchedStatistics||{}).items||{},i=Object.keys(n);return i&&i.length&&i.forEach(e=>{const i=n[e];t[e||i._id]={id:i._id,data:i.data,metadata:i.metadata}}),t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Jp={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let eh=(()=>{class e{constructor(e){this.fetchGQL=e,this.cache$=null,this.internalState=(0,c.deepClone)(Jp),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,o.map)(e=>e.statistic),(0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading),(0,o.distinctUntilChanged)())}clear(){this.store.unsubscribe(),this.cache$=null}clearAuthBased(){this.clear()}getQuery(){return(0,c.deepClone)(this.internalState.query)}get context(){return this.internalState.query.context}set context(e){const t=(0,c.deepClone)(this.internalState.query);t.context=e,this.updateState(Object.assign(Object.assign({},this.internalState),{query:t}))}init(e,t,n=!0){return this.internalState.module=e,this.updateState(Object.assign(Object.assign({},this.internalState),{module:e,query:t})),!1===n?null:this.load()}load(e=!0){return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.fetchStatistics(this.internalState.module,this.getQuery(),e).pipe((0,o.map)(e=>this.mapStatistics(e)),(0,o.tap)(e=>{this.addNewState(e)}))}setLoading(e){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:e}))}setStatistic(e,t,n=!1){if(this.addNewState(t),!n)return;const i={};i[e]=t,this.cache$=(0,r.of)(i).pipe((0,o.shareReplay)(1))}addNewState(e){this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,loading:!1}))}mapStatistics(e){const t=Object.keys(e),n=t&&t.length&&t[0];let i={id:"",data:{}};return n&&(i=e[n]),i}updateState(e){this.store.next(this.internalState=e)}fetchStatistics(e,t,n=!0){const i={};return i[t.key]=t,(null==this.cache$||!1===n)&&(this.cache$=this.fetchGQL.fetch(e,i).pipe((0,o.shareReplay)(1))),this.cache$}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const th={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let nh=(()=>{class e extends eh{constructor(e,t){super(e),this.fetchGQL=e,this.fieldManager=t,this.cache$=null,this.internalState=(0,c.deepClone)(th),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,o.map)(e=>e.statistic),(0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading),(0,o.distinctUntilChanged)())}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;const t=this.fieldManager.buildShallowField(e.metadata.dataType,e.data.value);t.metadata={digits:0},this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,field:t,loading:!1}))}updateState(e){super.updateState(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp),i.\u0275\u0275inject(xu))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ih=(()=>{class e{constructor(e,t){this.fetchGQL=e,this.fieldManager=t}create(){return new nh(this.fetchGQL,this.fieldManager)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp),i.\u0275\u0275inject(xu))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function rh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275element(1,"scrm-label",3),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",e.messageLabelKey)}}function oh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",8),i.\u0275\u0275element(2,"scrm-image",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("image",e.icon)("klass",e.iconClass)}}function sh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",12),i.\u0275\u0275element(1,"scrm-field",13),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("type",e.field.type)("field",e.field)}}function ah(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275element(1,"scrm-inline-loading-spinner"),i.\u0275\u0275elementEnd())}function lh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,sh,2,2,"div",10),i.\u0275\u0275template(2,ah,2,0,"div",11),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext(5);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.field),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.loading&&n.loading)}}function ch(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15),i.\u0275\u0275element(2,"scrm-label",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(2),i.\u0275\u0275property("labelKey",e.labelKey)("module",t.getContextModule())}}function dh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",17),i.\u0275\u0275elementStart(2,"label"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(4).ngIf;i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.description)}}function uh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",19),i.\u0275\u0275element(1,"scrm-dynamic-label",20),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(3).$implicit,t=i.\u0275\u0275nextContext(2).ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("context",n.getMessageContext())("fields",n.getMessageFields(t.statistics))("labelKey",e.dynamicLabel)}}function ph(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275element(1,"scrm-inline-loading-spinner"),i.\u0275\u0275elementEnd())}function hh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,uh,2,3,"div",18),i.\u0275\u0275template(2,ph,2,0,"div",11),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(5);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.loading)}}function mh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275text(2," - "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("widget-entry-value ",t.getSizeClass(e.size),"")}}function fh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,oh,3,2,"ng-container",7),i.\u0275\u0275template(2,lh,3,2,"ng-container",7),i.\u0275\u0275template(3,ch,3,2,"ng-container",7),i.\u0275\u0275template(4,dh,4,1,"ng-container",7),i.\u0275\u0275template(5,hh,3,2,"ng-container",7),i.\u0275\u0275template(6,mh,3,3,"ng-container",7),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2).ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.icon),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.statistic&&t.statistics[e.statistic]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.labelKey),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.descriptionKey),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.dynamicLabel),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.statistic&&!n.loading&&(!t.statistics[e.statistic].field||t.statistics[e.statistic].field&&n.isEmptyFieldValue(t.statistics[e.statistic].field.value)))}}function gh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,fh,7,6,"ng-container",7),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275classMapInterpolate2("",n.getColClass()," ",n.getClass(e),""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","hidden"!==e.display)}}function vh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,gh,2,5,"div",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate4("d-flex ",n.getJustify(e.justify)," ",n.getAlign(e.align)," ",n.getRowClass()," ",n.getLayoutRowClass(e),""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.cols)}}function yh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275template(1,vh,3,7,"ng-container",5),i.\u0275\u0275elementEnd()),2&e){const e=t.ngIf;i.\u0275\u0275propertyInterpolate("ngbTooltip",e.tooltipTitleText),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.layout)}}let bh=(()=>{class e{constructor(e,t){this.language=e,this.factory=t,this.loading=!0,this.subs=[],this.statistics={}}ngOnInit(){!this.validateConfig()||(this.gridWidgetInput=this.config,this.buildStatistics(),this.setupLoading$(),this.setupVM(),this.setupReload())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}validateConfig(){return this.config&&this.config.layout?this.config.queryArgs.context&&this.config.queryArgs.module?this.config.widgetConfig?!(!this.config.layout||!this.config.layout.rows)||(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1):(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1)}getRowClass(){return this.gridWidgetInput.rowClass}getColClass(){return this.gridWidgetInput.columnClass}getContextModule(){return this.gridWidgetInput.queryArgs.context.module}getMessageContext(){const e=this.getContextModule();return e?{module:e}:{}}getMessageFields(e){if(!e||!Object.keys(e).length)return{};const t={};return Object.keys(e).forEach(n=>{t[n]=e[n].field}),t}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let t="font-weight-normal";return e&&(0,c.isTrue)(e)&&(t="font-weight-bolder"),t}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||"justify-content-center"}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||"align-items-center"}getLayoutRowClass(e){let t="";return e&&e.class&&(t=e.class),t}getClass(e){let t="";return e&&(t=e.class),t=t+" "+this.getSizeClass(e.size)+" "+this.getFontWeight(e.bold)+" "+this.getColor(e.color),t}isEmptyFieldValue(e){return"string"==typeof e&&(e=e.trim()),null==e||void 0===e||""===e||0===e.length}getLabel(e,t){let n="";return e&&e[t]&&(n=this.language.getFieldLabel(e[t])),n}getLayout(){return this.gridWidgetInput.layout.rows}buildStatistics(){this.gridWidgetInput.layout.rows.forEach(e=>{!e.cols||!e.cols.length||e.cols.forEach(e=>{if(e.statistic){if(e.store)return void(this.statistics[e.statistic]={type:e.statistic,store:e.store});this.statistics[e.statistic]={type:e.statistic,store:this.factory.create()},this.statistics[e.statistic].store.init(this.gridWidgetInput.queryArgs.module,{key:e.statistic,context:Object.assign({},this.gridWidgetInput.queryArgs.context),params:Object.assign({},this.gridWidgetInput.queryArgs.params)}).pipe((0,o.take)(1)).subscribe()}})})}setupLoading$(){const e=[];Object.keys(this.statistics).forEach(t=>e.push(this.statistics[t].store.loading$)),this.loading$=(0,r.combineLatest)(e).pipe((0,o.map)(e=>{if(!e||e.length<1)return this.loading=!1,!1;let t=!0;return e.forEach(e=>{t=t&&e}),this.loading=t,t})),this.subs.push(this.loading$.subscribe())}setupReload(){this.gridWidgetInput.widgetConfig.reload$&&this.subs.push(this.gridWidgetInput.widgetConfig.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,Object.keys(this.statistics).forEach(e=>{const t=this.statistics[e];!t.store||t.store.load(!1).pipe((0,o.take)(1)).subscribe()}))}))}setupVM(){let e=(0,r.of)([]).pipe((0,o.shareReplay)());const t=(0,r.of)(this.getLayout()).pipe((0,o.shareReplay)());if(this.statistics&&Object.keys(this.statistics).length>0){const t=[];Object.keys(this.statistics).forEach(e=>t.push(this.statistics[e].store.state$)),e=(0,r.combineLatest)(t)}this.vm$=(0,r.combineLatest)([e,t]).pipe((0,o.map)(([e,t])=>{const n={},i=[],r=[];return e.forEach(e=>{n[e.query.key]=e;const t=this.getLabel(e.statistic.metadata,"tooltip_title_key");t&&i.push(t);const o=this.getLabel(e.statistic.metadata,"descriptionKey");o&&r.push(o)}),{layout:t,statistics:n,tooltipTitleText:i.join(" | "),description:r.join(" | ")}}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ih))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-grid-widget"]],inputs:{config:"config"},decls:3,vars:4,consts:[["class","p-3 widget-message",4,"ngIf"],["class","grid-widget d-flex flex-column","placement","auto","container","body",3,"ngbTooltip",4,"ngIf"],[1,"p-3","widget-message"],[3,"labelKey"],["placement","auto","container","body",1,"grid-widget","d-flex","flex-column",3,"ngbTooltip"],[4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"widget-entry-icon"],[3,"image","klass"],["class","widget-entry-value",4,"ngIf"],["class","widget-entry-loading",4,"ngIf"],[1,"widget-entry-value"],["mode","list",3,"type","field"],[1,"widget-entry-loading"],[1,"widget-entry-label","text-truncate"],[3,"labelKey","module"],[1,"text-truncate","widget-entry-label"],["class","widget-entry-dynamic-label",4,"ngIf"],[1,"widget-entry-dynamic-label"],[3,"context","fields","labelKey"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,rh,2,1,"div",0),i.\u0275\u0275template(1,yh,2,2,"div",1),i.\u0275\u0275pipe(2,"async")),2&e&&(i.\u0275\u0275property("ngIf",t.messageLabelKey),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.messageLabelKey&&i.\u0275\u0275pipeBind1(2,2,t.vm$)))},directives:[p.NgIf,To,I.NgbTooltip,p.NgForOf,Eo,Ju,Lc,Ca],pipes:[p.AsyncPipe],encapsulation:2}),e})();function Sh(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-button",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.internalConfig)}}let Ch=(()=>{class e{constructor(){this.status="maximised",this.buttonClasses=["minimise-button"]}ngOnInit(){this.buildButton()}ngOnChanges(e){e.config&&this.buildButton()}buildButton(){const e=c.Button.fromButton(this.config);e.addClasses(this.buttonClasses),e.icon=this.getIcon(),e.onClick=()=>{this.config.onClick(),this.toggleStatus()},this.internalConfig=e}toggleStatus(){let e="minimised";"minimised"===this.status&&(e="maximised"),this.status=e,this.buildButton()}getIcon(){return"minimised"===this.status?"plus_thin":"minimise"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-minimise-button"]],inputs:{config:"config",status:"status"},features:[i.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"config"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Sh,2,1,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.internalConfig)},directives:[p.NgIf,Vo],encapsulation:2}),e})();function wh(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-close-button",8),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("config",e.getCloseButton())}}function xh(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-minimise-button",9),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("config",e.minimiseButton)("status",e.minimiseStatus)}}function Ih(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.title)}}function Eh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275element(1,"scrm-label",11),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",e.titleKey)}}const _h=[[["","panel-icon-area",""]],[["","panel-header-button",""]],[["","panel-body",""]]],Mh=["[panel-icon-area]","[panel-header-button]","[panel-body]"];let jh=(()=>{class e{constructor(){this.klass="",this.bodyPadding=2,this.mode="closable",this.close={klass:["btn","btn-outline-light","btn-sm"]},this.isCollapsed=!1,this.buttonClasses=["btn","btn-outline-light","btn-sm"],this.subs=[]}ngOnInit(){this.isCollapsed$&&this.subs.push(this.isCollapsed$.subscribe(e=>{this.isCollapsed=e,this.initMinimiseButton()})),this.initMinimiseButton()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getCloseButton(){if(!this.close)return null;const e=c.Button.fromButton(this.close);return e.addClasses(this.buttonClasses),this.close=e,e}isClosable(){return"closable"===this.mode}isCollapsible(){return"collapsible"===this.mode}initMinimiseButton(){this.minimiseButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.isCollapsed=!this.isCollapsed,this.initMinimiseStatus()}},this.initMinimiseStatus()}initMinimiseStatus(){this.minimiseStatus=this.isCollapsed?"minimised":"maximised"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-panel"]],inputs:{klass:"klass",bodyPadding:"bodyPadding",title:"title",titleKey:"titleKey",mode:"mode",isCollapsed$:"isCollapsed$",close:"close"},ngContentSelectors:Mh,decls:13,vars:13,consts:[[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"flex-grow-1","align-items-center","d-flex"],[1,"d-flex","align-items-center"],[3,"config",4,"ngIf"],[3,"config","status",4,"ngIf"],["class","pl-1 panel-title",4,"ngIf"],[1,"panel-buttons","float-right"],[3,"ngbCollapse"],[3,"config"],[3,"config","status"],[1,"pl-1","panel-title"],[3,"labelKey"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(_h),i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div",0),i.\u0275\u0275elementStart(2,"div",1),i.\u0275\u0275elementStart(3,"div",2),i.\u0275\u0275template(4,wh,1,1,"scrm-close-button",3),i.\u0275\u0275template(5,xh,1,2,"scrm-minimise-button",4),i.\u0275\u0275projection(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,Ih,2,1,"div",5),i.\u0275\u0275template(8,Eh,2,1,"div",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",6),i.\u0275\u0275projection(10,1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"div",7),i.\u0275\u0275projection(12,2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275classMapInterpolate1("card panel-card ",t.klass,""),i.\u0275\u0275classProp("collapsed",t.isCollapsed),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.isClosable()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isCollapsible()),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.title),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.titleKey),i.\u0275\u0275advance(3),i.\u0275\u0275classMapInterpolate1("card-body p-",t.bodyPadding,""),i.\u0275\u0275property("ngbCollapse",t.isCollapsed))},directives:[p.NgIf,I.NgbCollapse,qs,Ch,To],encapsulation:2}),e})();function kh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275projection(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("@widgetContentFade",e.displayContent?"true":"false")}}const Lh=[[["","widget-body",""]]],Fh=["[widget-body]"];let Oh=(()=>{class e{constructor(e){this.languageStore=e,this.title="",this.mode="none",this.displayContent=!0}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-widget-panel"]],inputs:{title:"title",mode:"mode"},ngContentSelectors:Fh,decls:5,vars:3,consts:[[1,"accordion","widget-panel","mr-0","shadow-sm"],["bodyPadding","0",3,"mode","title"],["panel-header-button",""],["panel-body",""],["class","widget collapse show open-close-container","data-parent",".widget-panel",4,"ngIf"],["data-parent",".widget-panel",1,"widget","collapse","show","open-close-container"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(Lh),i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"scrm-panel",1),i.\u0275\u0275element(2,"span",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,kh,2,1,"div",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("mode",t.mode)("title",t.title),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.displayContent))},directives:[jh,p.NgIf],encapsulation:2,data:{animation:[(0,hr.trigger)("widgetFade",[(0,hr.transition)("void => *",[(0,hr.style)({transform:"translateX(100%)",opacity:0}),(0,hr.animate)("500ms",(0,hr.style)({transform:"translateX(0)",opacity:1}))]),(0,hr.transition)("* => void",[(0,hr.style)({transform:"translateX(0)",opacity:1}),(0,hr.animate)("500ms",(0,hr.style)({transform:"translateX(100%)",opacity:0}))])]),(0,hr.trigger)("widgetContentFade",[(0,hr.transition)("void => *",[(0,hr.style)({transform:"translateY(-5%)",opacity:0}),(0,hr.animate)("500ms",(0,hr.style)({transform:"translateY(0)",opacity:1}))]),(0,hr.transition)("* => void",[(0,hr.style)({transform:"translateY(0)",opacity:1}),(0,hr.animate)("500ms",(0,hr.style)({transform:"translateY(-5%)",opacity:0}))])])]}}),e})(),Dh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs]]}),e})(),Ah=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs,Qs,I.NgbModule,Dh,hs]]}),e})(),Nh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo,Ah]]}),e})(),Rh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pp,Fc,Nh,hs,Lo,wa,I.NgbTooltipModule]]}),e})(),Th=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-home-ui"]],decls:3,vars:0,consts:[[2,"margin","70px"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"h1"),i.\u0275\u0275text(2,"Home Page"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())},encapsulation:2}),e})();const Ph=[{path:"",component:Th}];class Bh{constructor(){this.url="",this.md5="",this.width=0,this.height=0}}var $h=(()=>{return(e=$h||($h={})).none="",e.blank="_blank",e.parent="_parent",e.self="_self",e.top="_top",$h;var e})();class Vh{constructor(e,t,n,i,r){this.routeConverter=e,this.moduleNavigation=t,this.preferences=n,this.language=i,this.appState=r,this.authenticated=!0,this.logo=new Bh,this.useGroupTabs=!1,this.globalActions=[],this.currentUser={id:"",firstName:"",lastName:""},this.all={modules:[],extra:[]},this.menu=[]}resetMenu(){this.menu=[],this.globalActions=[],this.all.modules=[],this.all.extra=[],this.current=null,this.currentUser={}}buildUserActionMenu(e,t){this.currentUser.id=t.id,this.currentUser.firstName=t.firstName,this.currentUser.lastName=t.lastName,e&&e.forEach(e=>{var t;const n=e.name;let i=e.url;if("logout"===n)return;let r=$h.none;"training"===n?r=$h.blank:i=this.routeConverter.toFrontEndLink(i);const o=null!==(t=this.language.getAppString(e.labelKey))&&void 0!==t?t:"";this.globalActions.push({link:{url:i,label:o,target:r}})})}build(e,t,n){this.buildUserActionMenu(e.userActionMenu,t);const i=this.preferences.getUserPreference("navigation_paradigm"),r="on"===this.preferences.getUserPreference("sort_modules_by_name");"m"!==i?"gm"!==i||this.buildGroupedNavigation(e,n,r):this.buildModuleNavigation(e,n,r)}buildGroupTabMenu(e,t,n,i,r){const o=[],s=[];e&&e.length>0&&(e.forEach(e=>{s.push(this.buildTabMenuItem(e,t[e]))}),r&&this.sortMenuItems(s));let a=0;i.forEach(e=>{a<=n&&o.push(this.buildTabGroupedMenuItem(e.labelKey,e.modules,t,r)),a++}),this.menu=o,this.all.modules=s}buildModuleNavigation(e,t,n){!(0,c.ready)([e.tabs,e.modules])||(this.buildTabMenu(e.tabs,e.modules,t,n),this.buildSelectedModule(e))}buildGroupedNavigation(e,t,n){!(0,c.ready)([e.tabs,e.modules,e.groupedTabs])||(this.buildGroupTabMenu(e.tabs,e.modules,t,e.groupedTabs,n),this.buildSelectedModule(e))}buildSelectedModule(e){var t;const n=null!==(t=this.appState.getModule())&&void 0!==t?t:"";""===n||"home"===n||!e.modules[n]||(this.current=this.buildTabMenuItem(n,e.modules[n]))}buildTabMenu(e,t,n,i){const r=[],o=[];if(!e||0===e.length)return this.menu=r,void(this.all.modules=o);let s=0;e.forEach(e=>{const i=this.buildTabMenuItem(e,t[e]);"home"===e||this.appState.getModule()===e||s>=n?o.push(i):r.push(i),s++}),i&&(this.sortMenuItems(r),this.sortMenuItems(o)),this.menu=r,this.all.modules=o}buildTabGroupedMenuItem(e,t,n,i){return{link:{label:this.language.getAppString(e)||e,url:"",route:null,params:null},icon:"",submenu:this.buildGroupedMenu(t,n,i)}}buildGroupedMenu(e,t,n){const i=[];let r=null;return e.forEach(e=>{const n=t[e];if(!n)return;const o=this.buildTabMenuItem(e,n);"home"!==e?i.push(o):r=o}),n&&this.sortMenuItems(i),r&&i.unshift(r),i}buildTabMenuItem(e,t){var n,i;const r=this.moduleNavigation.getModuleRoute(t),o={link:{label:this.moduleNavigation.getModuleLabel(t,null!==(i=null===(n=this.language.getLanguageStrings())||void 0===n?void 0:n.appListStrings)&&void 0!==i?i:{}),url:r.url,route:r.route,params:null},icon:"home"===e?"home":"",submenu:[],module:null!=e?e:null};return t&&t.menu.forEach(t=>{const n=this.moduleNavigation.getActionRoute(t);o.submenu.push({link:{label:this.moduleNavigation.getActionLabel(e,t,this.language.getLanguageStrings()),url:n.url,route:n.route,params:n.params},icon:t.icon,submenu:[]})}),o}sortMenuItems(e){e.sort((e,t)=>{const n=e.link.label.toUpperCase(),i=t.link.label.toUpperCase();return n<i?-1:n>i?1:0})}}let zh=(()=>{class e{constructor(e,t,n){this.moduleNameMapper=e,this.actionNameMapper=t,this.systemConfigStore=n}toFrontEndLink(e){return"./#"+this.toFrontEndRoute(e)}toFrontEndRoute(e){if(e&&e.includes("/#/")){const t=e.split("/#/");return t.length<2?"/":t[1]}const t=this.parse(e);if(!t)return"/";let n=this.buildRoute(t.module,t.action,t.record);return n+=this.buildQueryString(t.params,["module","action","record"]),n}toLegacy(e,t){let n="./legacy/index.php";const i=Object.assign({},t);return e.module&&(i.module=this.moduleNameMapper.toLegacy(e.module)),e.action&&(i.action=this.actionNameMapper.toLegacy(e.action)),e.record&&(i.record=e.record),n+=this.buildQueryString(i),n}parse(e){const t=new u.DefaultUrlSerializer,n=e.replace("/legacy","").split("?");if(n.length<2)return null;const i=t.parse("/?"+n[1]),r=i.queryParamMap;return{module:r.get("module")||"",action:r.get("action")||"",record:r.get("record")||"",params:i.queryParams}}parseRouteURL(e){var t,n,i,r,o,s;return{module:null!==(n=null===(t=e[0])||void 0===t?void 0:t.path)&&void 0!==n?n:"",action:null!==(r=null===(i=e[1])||void 0===i?void 0:i.path)&&void 0!==r?r:"index",record:null!==(s=null===(o=e[2])||void 0===o?void 0:o.path)&&void 0!==s?s:""}}parseRouteInfoFromUrlTree(e){return this.parseRouteURL(e.root.children[u.PRIMARY_OUTLET].segments)}isClassicViewRoute(e){const t=this.systemConfigStore.getConfigValue("module_routing"),n=this.parseRouteInfoFromUrlTree(e),i=n.module;return!t[i]||!t[i][n.action]}matchesActiveRoute(e,t){let n=!0;return[{name:"module",map:e=>e&&this.mapModuleToFrontend(e)},{name:"action",map:e=>e&&this.mapActionToFrontEnd(e)},{name:"record",map:e=>e}].forEach(i=>{!e.snapshot.params[i.name]&&!t[i.name]||(n=n&&e.snapshot.params[i.name]===i.map(t[i.name]))}),n}buildRoute(e,t,n){let i=`${this.mapModuleToFrontend(e)}`;return t&&(i+=`/${this.mapActionToFrontEnd(t)}`),n&&(i+=`/${n}`),i}buildQueryString(e,t=[]){let n=new mr.HttpParams;return Object.keys(e).forEach(i=>{t.includes(i)||(n=n.set(i,e[i]))}),n.keys().length>0?"?"+n.toString():""}mapModuleToFrontend(e){return this.moduleNameMapper.toFrontend(e)}mapActionToFrontEnd(e){return this.actionNameMapper.toFrontend(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(jl),i.\u0275\u0275inject(kl),i.\u0275\u0275inject(Qr))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Uh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-logo-ui"]],decls:1,vars:0,consts:[["image","company_logo",1,"logo"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"scrm-image",0)},directives:[Eo],encapsulation:2}),e})();function Kh(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",1),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().doLogout()}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.appStrings[n.logout.logoutAction.label]||"")}}let Zh=(()=>{class e{constructor(e,t){this.auth=e,this.languageStore=t,this.logout={logoutAction:{label:"LBL_LOGOUT"}},this.languages$=this.languageStore.vm$,this.vm$=(0,r.combineLatest)([this.languages$]).pipe((0,o.map)(([e])=>({appStrings:e.appStrings||{},appListStrings:e.appListStrings||{}})))}doLogout(){this.auth.logout()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Kp),i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-logout-ui"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dropdown-item","global-links-sublink",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Kh,3,1,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf],pipes:[p.AsyncPipe],encapsulation:2}),e})();function Gh(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-image",4),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275propertyInterpolate("image",e.icon)}}function Hh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"a",2),i.\u0275\u0275template(1,Gh,1,1,"scrm-image",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",e.class)("queryParams",e.link.params)("routerLink",e.link.route),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.icon),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.link.label,"\n")}}function Wh(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-image",4),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275propertyInterpolate("image",e.icon)}}function qh(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"a",5),i.\u0275\u0275template(1,Wh,1,1,"scrm-image",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("href",e.link.url,i.\u0275\u0275sanitizeUrl)("ngClass",e.class),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.icon),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.link.label,"\n")}}let Qh=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:2,vars:2,consts:[[3,"ngClass","queryParams","routerLink",4,"ngIf"],[3,"href","ngClass",4,"ngIf"],[3,"ngClass","queryParams","routerLink"],[3,"image",4,"ngIf"],[3,"image"],[3,"href","ngClass"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Hh,3,5,"a",0),i.\u0275\u0275template(1,qh,3,4,"a",1)),2&e&&(i.\u0275\u0275property("ngIf",t.link.route),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.link.route))},directives:[p.NgIf,u.RouterLinkWithHref,p.NgClass,Eo],encapsulation:2}),e})(),Yh=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Qh)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Xh=function(e,t,n){return{link:e,icon:t,class:n}};function Jh(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction3(2,Xh,e.link,e.icon,e.class))}}let em=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Yh))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Jh,1,6,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();function tm(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"li",2),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275nextContext();return t.onClose&&t.onClose()}),i.\u0275\u0275element(3,"scrm-menu-item-link",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275advance(3),i.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-3 pr-3 pt-2 pb-2"),i.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}let nm=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mobile-menu-items"],[1,"",3,"click"],[3,"icon","link"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,tm,4,4,"ng-container",0),2&e&&i.\u0275\u0275property("ngForOf",t.items)},directives:[p.NgForOf,em],encapsulation:2}),e})(),im=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",nm)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const rm=function(e,t){return{items:e,onClose:t}};function om(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction2(2,rm,e.items,e.onClose))}}let sm=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(im))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,om,1,5,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();function am(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275nextContext(3);return t.onClick&&t.onClick()}),i.\u0275\u0275elementStart(1,"a",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",n.buildRoute(e)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.attributes.item_summary," ")}}function lm(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,am,3,2,"div",3),i.\u0275\u0275pipe(2,"slice"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function cm(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h4",1),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().toggleCollapse()}),i.\u0275\u0275element(2,"scrm-label",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,lm,3,5,"ng-container",0),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",!e.collapsed)}}let dm=(()=>{class e{constructor(e,t,n,i){this.navigation=e,this.nameMapper=t,this.configs=n,this.metadata=i,this.collapsible=!1,this.maxDisplayed=5,this.collapsed=!1,this.subs=[]}ngOnInit(){var e,t;const n=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(t=parseInt(n.navigation_max_module_recently_viewed))&&void 0!==t?t:5,this.initMetadata$(),this.collapsed=!!this.collapsible}ngOnDestroy(){this.clear()}ngOnChanges(e){var t,n,i,r,o;null!==(null!==(t=null==e?void 0:e.module)&&void 0!==t?t:null)&&(null!==(i=null===(n=null==e?void 0:e.module)||void 0===n?void 0:n.previousValue)&&void 0!==i?i:"")!==(null!==(o=null===(r=null==e?void 0:e.module)||void 0===r?void 0:r.currentValue)&&void 0!==o?o:"")&&(this.clear(),this.initMetadata$())}buildRoute(e){var t,n,i;const r=null!==(t=e.attributes.module_name)&&void 0!==t?t:"",o=null!==(n=this.nameMapper.toFrontend(r))&&void 0!==n?n:"",s=null!==(i=e.attributes.item_id)&&void 0!==i?i:"";return this.navigation.getRecordRouterLink(o,s)}toggleCollapse(){!this.collapsible||(this.collapsed=!this.collapsed)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,o.map)(e=>{var t;return null!==(t=e[this.module])&&void 0!==t?t:null}));this.subs.push(e.subscribe(e=>{var t;this.records=null!==(t=null==e?void 0:e.recentlyViewed)&&void 0!==t?t:null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(pc))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-recently-viewed"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},features:[i.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"recently-viewed-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_LAST_VIEWED"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,cm,4,1,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.records&&t.records.length)},directives:[p.NgIf,To,p.NgForOf,u.RouterLinkWithHref],pipes:[p.SlicePipe],encapsulation:2}),e})(),um=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",dm)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const pm=function(e,t,n){return{module:e,onClick:t,collapsible:n}};function hm(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction3(2,pm,e.module,e.onClick,e.collapsible))}}let mm=(()=>{class e{constructor(e){this.registry=e,this.collapsible=!1}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(um))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-recently-viewed"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,hm,1,6,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})(),fm=(()=>{class e{constructor(e,t,n,i){this.navigation=e,this.nameMapper=t,this.configs=n,this.metadata=i,this.maxDisplayed=5,this.subs=[]}ngOnInit(){var e,t;const n=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(t=parseInt(n.navigation_max_module_favorites))&&void 0!==t?t:5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){var t,n,i,r,o;null!==(null!==(t=null==e?void 0:e.module)&&void 0!==t?t:null)&&(null!==(i=null===(n=null==e?void 0:e.module)||void 0===n?void 0:n.previousValue)&&void 0!==i?i:"")!==(null!==(o=null===(r=null==e?void 0:e.module)||void 0===r?void 0:r.currentValue)&&void 0!==o?o:"")&&(this.clear(),this.initMetadata$())}buildRoute(e){var t,n,i;const r=null!==(t=e.attributes.parent_type)&&void 0!==t?t:"",o=null!==(n=this.nameMapper.toFrontend(r))&&void 0!==n?n:"",s=null!==(i=e.attributes.parent_id)&&void 0!==i?i:"";return this.navigation.getRecordRouterLink(o,s)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,o.map)(e=>{var t;return null!==(t=e[this.module])&&void 0!==t?t:null}));this.subs.push(e.subscribe(e=>{var t;this.records=null!==(t=null==e?void 0:e.favorites)&&void 0!==t?t:null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(pc))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],inputs:{module:"module"},features:[i.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function gm(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275nextContext(3);return t.onClick&&t.onClick()}),i.\u0275\u0275elementStart(1,"a",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",n.buildRoute(e)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.attributes.parent_name," ")}}function vm(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,gm,3,2,"div",3),i.\u0275\u0275pipe(2,"slice"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function ym(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h4",1),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().toggleCollapse()}),i.\u0275\u0275element(2,"scrm-label",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,vm,3,5,"ng-container",0),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",!e.collapsed)}}let bm=(()=>{class e extends fm{constructor(e,t,n,i){super(e,t,n,i),this.navigation=e,this.nameMapper=t,this.configs=n,this.metadata=i,this.collapsible=!1,this.collapsed=!1}ngOnInit(){super.ngOnInit(),this.collapsed=!!this.collapsible}toggleCollapse(){!this.collapsible||(this.collapsed=!this.collapsed)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(pc))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-favorites"]],inputs:{onClick:"onClick",collapsible:"collapsible"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"favorite-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_FAVORITES"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,ym,4,1,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.records&&t.records.length)},directives:[p.NgIf,To,p.NgForOf,u.RouterLinkWithHref],pipes:[p.SlicePipe],encapsulation:2}),e})(),Sm=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",bm)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Cm=function(e,t,n){return{module:e,onClick:t,collapsible:n}};function wm(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction3(2,Cm,e.module,e.onClick,e.collapsible))}}let xm=(()=>{class e{constructor(e){this.registry=e,this.collapsible=!1}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Sm))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-favorites"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,wm,1,6,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();function Im(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"li",7),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275nextContext(3);return t.onClose&&t.onClose()}),i.\u0275\u0275element(1,"scrm-menu-item-link",8),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-5 pr-3 pt-2 pb-2"),i.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function Em(e,t){1&e&&(i.\u0275\u0275elementStart(0,"ngb-panel",5),i.\u0275\u0275template(1,Im,2,4,"ng-template",6),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("cardClass","mobile-nav-group-item disabled")("disabled",!0)}function _m(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"li",13),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275nextContext(4);return t.onClose&&t.onClose()}),i.\u0275\u0275element(1,"scrm-menu-item-link",8),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275classMap("mobile-nav-link action-link pl-1 pr-3 pt-2 pb-2 w-100"),i.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function Mm(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"li"),i.\u0275\u0275element(2,"scrm-menu-recently-viewed",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"li"),i.\u0275\u0275element(4,"scrm-menu-favorites",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(3).$implicit,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("collapsible",!0)("module",e.module)("onClick",t.onClose),i.\u0275\u0275advance(2),i.\u0275\u0275property("collapsible",!0)("module",e.module)("onClick",t.onClose)}}function jm(e,t){if(1&e&&(i.\u0275\u0275template(0,_m,2,4,"li",11),i.\u0275\u0275template(1,Mm,5,6,"ng-container",12)),2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275property("ngForOf",e.submenu),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e&&e.module)}}function km(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"ngb-panel",9),i.\u0275\u0275template(1,jm,2,2,"ng-template",10),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("title",e.link.label)}}function Lm(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Em,2,2,"ngb-panel",3),i.\u0275\u0275template(2,km,2,1,"ngb-panel",4),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.submenu||!e.submenu.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.submenu&&e.submenu.length)}}let Fm=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:3,vars:2,consts:[[1,"mobile-menu-items"],[3,"closeOthers"],[4,"ngFor","ngForOf"],[3,"cardClass","disabled",4,"ngIf"],["cardClass","mobile-nav-group-item",3,"title",4,"ngIf"],[3,"cardClass","disabled"],["ngbPanelHeader",""],[1,"",3,"click"],[3,"icon","link"],["cardClass","mobile-nav-group-item",3,"title"],["ngbPanelContent",""],["class","ml-4",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ml-4",3,"click"],[3,"collapsible","module","onClick"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"ngb-accordion",1),i.\u0275\u0275template(2,Lm,3,2,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("closeOthers",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.items))},directives:[I.NgbAccordion,p.NgForOf,p.NgIf,I.NgbPanel,I.NgbPanelHeader,em,I.NgbPanelContent,mm,xm],encapsulation:2}),e})(),Om=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Fm)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Dm=function(e,t){return{items:e,onClose:t}};function Am(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction2(2,Dm,e.items,e.onClose))}}let Nm=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Om))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Am,1,5,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();function Rm(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"li",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().navBackLink()}),i.\u0275\u0275element(2,"scrm-image",6),i.\u0275\u0275elementStart(3,"a",7),i.\u0275\u0275element(4,"scrm-label",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}}function Tm(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"li",11),i.\u0275\u0275listener("click",function(t){const n=i.\u0275\u0275restoreView(e).$implicit,r=i.\u0275\u0275nextContext(3);return r.changeSubNav(t,n.submenu,r.navigationType,n)}),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"scrm-image",14),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.link.label)}}function Pm(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275template(2,Tm,4,1,"li",10),i.\u0275\u0275elementContainerStart(3),i.\u0275\u0275elementStart(4,"li",11),i.\u0275\u0275listener("click",function(t){i.\u0275\u0275restoreView(e);const n=i.\u0275\u0275nextContext(2);return n.changeSubNav(t,n.all,"gm",null)}),i.\u0275\u0275elementStart(5,"a",12),i.\u0275\u0275element(6,"scrm-label",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"scrm-image",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",e.mainItems)}}function Bm(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275elementStart(2,"li",16),i.\u0275\u0275element(3,"scrm-menu-recently-viewed",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"li",16),i.\u0275\u0275element(5,"scrm-menu-favorites",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(3),i.\u0275\u0275property("collapsible",!0)("module",e.subNavItem.module)("onClick",e.onClose),i.\u0275\u0275advance(2),i.\u0275\u0275property("collapsible",!0)("module",e.subNavItem.module)("onClick",e.onClose)}}function $m(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-mobile-module-menu",15),i.\u0275\u0275template(2,Bm,6,6,"ng-container",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("items",e.submenu)("onClose",e.onClose),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.subNavItem&&e.subNavItem.module)}}function Vm(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-mobile-grouped-menu",15),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("items",e.submenu)("onClose",e.onClose)}}function zm(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,$m,3,3,"ng-container",0),i.\u0275\u0275template(2,Vm,2,2,"ng-container",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","gm"!==e.subNavigationType),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","gm"===e.subNavigationType)}}function Um(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Pm,8,1,"ng-container",0),i.\u0275\u0275template(2,zm,3,2,"ng-container",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.mainNavLink),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.mobileSubNav)}}let Km=(()=>{class e{constructor(){this.navigationType="",this.submenu=[],this.subNavigationType="mm",this.backLink=!1,this.mobileSubNav=!1,this.mainNavLink=!0}ngOnInit(){this.mainItems=this.items,"gm"!==this.navigationType&&this.current&&(this.mainItems=[this.current,...this.items])}changeSubNav(e,t,n,i){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.subNavItem=i,this.submenu=t,this.subNavigationType=n}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getItems(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-mobile-menu"]],inputs:{current:"current",items:"items",all:"all",onClose:"onClose",navigationType:"navigationType"},decls:7,vars:2,consts:[[4,"ngIf"],[1,"mobile-nav-close","clicable","pl-3","pr-3","pt-2","pb-2","w-100",3,"click"],["image","cross_bold",1,"sicon","mobile-nav-close"],[1,"nav-close-text"],["labelKey","LBL_CLOSE_MENU"],[1,"d-flex","align-items-center","mobile-back-row",3,"click"],["image","arrow_left_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[1,"mobile-back-link","pl-1","pr-3","pt-2","pb-2"],["labelKey","LBL_BACK"],[1,"mobile-menu-items"],["class"," d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",3,"click"],[1,"flex-grow-1","mobile-nav-link","pl-3","pr-3","pt-2","pb-2"],["labelKey","LBL_MORE"],["image","arrow_right_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[3,"items","onClose"],[1,""],[3,"collapsible","module","onClick"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Rm,5,0,"ng-container",0),i.\u0275\u0275template(1,Um,3,2,"ng-container",0),i.\u0275\u0275elementStart(2,"li"),i.\u0275\u0275elementStart(3,"a",1),i.\u0275\u0275listener("click",function(){return t.onClose&&t.onClose()}),i.\u0275\u0275element(4,"scrm-image",2),i.\u0275\u0275elementStart(5,"span",3),i.\u0275\u0275element(6,"scrm-label",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("ngIf",t.backLink),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.mainItems&&t.mainItems.length))},directives:[p.NgIf,Eo,To,p.NgForOf,sm,mm,xm,Nm],encapsulation:2}),e})(),Zm=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Km)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Gm=function(e,t,n,i,r){return{current:e,items:t,all:n,onClose:i,navigationType:r}};function Hm(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction5(2,Gm,e.current,e.items,e.all,e.onClose,e.navigationType))}}let Wm=(()=>{class e{constructor(e){this.registry=e,this.navigationType=""}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Zm))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-mobile-menu"]],inputs:{current:"current",items:"items",all:"all",onClose:"onClose",navigationType:"navigationType"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Hm,1,8,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})(),qm=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-home-menu-item"]],inputs:{route:"route",active:"active"},decls:4,vars:3,consts:[[1,"navbar-nav","home-nav"],[1,"nav-item"],[1,"home-nav-link",3,"routerLink"],["image","home",1,"home-icon"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"ul",0),i.\u0275\u0275elementStart(1,"li",1),i.\u0275\u0275elementStart(2,"a",2),i.\u0275\u0275element(3,"scrm-image",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275classProp("active",t.active),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",t.route))},directives:[u.RouterLinkWithHref,Eo],encapsulation:2}),e})(),Qm=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",qm)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ym=function(e,t){return{route:e,active:t}};function Xm(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction2(2,Ym,e.route,e.active))}}let Jm=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Qm))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-home-menu-item"]],inputs:{route:"route",active:"active"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Xm,1,5,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();function ef(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275element(1,"scrm-menu-item-link",9),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275classMap("nav-link action-link"),i.\u0275\u0275property("link",e.link)}}function tf(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).hideDropdown()}),i.\u0275\u0275template(1,ef,2,3,"div",7),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.items)}}function nf(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"ul",1),i.\u0275\u0275elementStart(1,"li",2),i.\u0275\u0275elementStart(2,"a",3),i.\u0275\u0275element(3,"scrm-label",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,tf,2,1,"div",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("labelKey",e.labelKey),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.showDropdown)}}let rf=(()=>{class e{constructor(){this.showDropdown=!0}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[["class","navbar-nav nav-collapsed-items",4,"ngIf"],[1,"navbar-nav","nav-collapsed-items"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"nav-link-nongrouped","dropdown-toggle"],[3,"labelKey"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu more-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","more-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,nf,5,2,"ul",0),2&e&&i.\u0275\u0275property("ngIf",t.items&&t.items.length>0)},directives:[p.NgIf,To,p.NgForOf,em],encapsulation:2}),e})(),of=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",rf)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const sf=function(e,t){return{items:e,labelKey:t}};function af(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction2(2,sf,e.items,e.labelKey))}}let lf=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(of))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,af,1,5,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();const cf=function(e,t,n){return{label:e,url:t,route:n}};function df(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",7),i.\u0275\u0275element(1,"scrm-menu-item-link",8),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),i.\u0275\u0275property("link",i.\u0275\u0275pureFunction3(3,cf,e.attributes.item_summary,n.buildRoute(e),n.buildRoute(e)))}}function uf(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"li",1),i.\u0275\u0275elementStart(2,"a",2),i.\u0275\u0275element(3,"scrm-image",3),i.\u0275\u0275element(4,"scrm-label",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"ul",5),i.\u0275\u0275template(6,df,2,7,"li",6),i.\u0275\u0275pipe(7,"slice"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(6),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(7,1,e.records,0,e.maxDisplayed))}}let pf=(()=>{class e{constructor(e,t,n,i){this.navigation=e,this.nameMapper=t,this.configs=n,this.metadata=i,this.maxDisplayed=5,this.subs=[]}ngOnInit(){var e,t;const n=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(t=parseInt(n.navigation_max_module_recently_viewed))&&void 0!==t?t:5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){var t,n,i,r,o;null!==(null!==(t=null==e?void 0:e.module)&&void 0!==t?t:null)&&(null!==(i=null===(n=null==e?void 0:e.module)||void 0===n?void 0:n.previousValue)&&void 0!==i?i:"")!==(null!==(o=null===(r=null==e?void 0:e.module)||void 0===r?void 0:r.currentValue)&&void 0!==o?o:"")&&(this.clear(),this.initMetadata$())}buildRoute(e){var t,n,i;const r=null!==(t=e.attributes.module_name)&&void 0!==t?t:"",o=null!==(n=this.nameMapper.toFrontend(r))&&void 0!==n?n:"",s=null!==(i=e.attributes.item_id)&&void 0!==i?i:"";return this.navigation.getRecordRouterLink(o,s)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,o.map)(e=>{var t;return null!==(t=e[this.module])&&void 0!==t?t:null}));this.subs.push(e.subscribe(e=>{var t;this.records=null!==(t=null==e?void 0:e.recentlyViewed)&&void 0!==t?t:null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(pc))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-sub-menu-recently-viewed"]],inputs:{module:"module"},features:[i.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","clock"],["labelKey","LBL_LAST_VIEWED"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,uf,8,5,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.records&&t.records.length)},directives:[p.NgIf,Eo,To,p.NgForOf,em],pipes:[p.SlicePipe],encapsulation:2}),e})(),hf=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",pf)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const mf=function(e){return{module:e}};function ff(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction1(2,mf,e.module))}}let gf=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(hf))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-sub-menu-recently-viewed"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,ff,1,4,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();const vf=function(e,t,n){return{label:e,url:t,route:n}};function yf(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",7),i.\u0275\u0275element(1,"scrm-menu-item-link",8),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),i.\u0275\u0275property("link",i.\u0275\u0275pureFunction3(3,vf,e.attributes.parent_name,n.buildRoute(e),n.buildRoute(e)))}}function bf(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"li",1),i.\u0275\u0275elementStart(2,"a",2),i.\u0275\u0275element(3,"scrm-image",3),i.\u0275\u0275element(4,"scrm-label",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"ul",5),i.\u0275\u0275template(6,yf,2,7,"li",6),i.\u0275\u0275pipe(7,"slice"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(6),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(7,1,e.records,0,e.maxDisplayed))}}let Sf=(()=>{class e extends fm{constructor(e,t,n,i){super(e,t,n,i),this.navigation=e,this.nameMapper=t,this.configs=n,this.metadata=i}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(jl),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(pc))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-sub-menu-favorites"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","star"],["labelKey","LBL_FAVORITES"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,bf,8,5,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.records&&t.records.length)},directives:[p.NgIf,Eo,To,p.NgForOf,em],pipes:[p.SlicePipe],encapsulation:2}),e})(),Cf=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Sf)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const wf=function(e){return{module:e}};function xf(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction1(2,wf,e.module))}}let If=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Cf))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-sub-menu-favorites"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,xf,1,4,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();function Ef(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275element(1,"scrm-menu-item-link",7),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275classMap("sub-nav-link nav-link action-link"),i.\u0275\u0275property("icon",e.icon)("link",e.link)}}function _f(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",8),i.\u0275\u0275element(2,"scrm-sub-menu-favorites",8),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("module",e.item.module),i.\u0275\u0275advance(1),i.\u0275\u0275property("module",e.item.module)}}function Mf(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().hideDropdown()}),i.\u0275\u0275template(1,Ef,2,4,"div",4),i.\u0275\u0275template(2,_f,3,2,"ng-container",5),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.item.submenu),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.item&&e.item.module)}}const jf=function(e){return{"top-nav-link":!0,"nav-link-nongrouped":!0,"dropdown-toggle":e}};let kf=(()=>{class e{constructor(){this.showDropdown=!0}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-item"]],inputs:{item:"item"},decls:4,vars:6,consts:[["data-target",".navbar-collapse","data-toggle","collapse"],[3,"link"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",0),i.\u0275\u0275element(2,"scrm-menu-item-link",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Mf,3,2,"div",2),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275classMap(i.\u0275\u0275pureFunction1(4,jf,t.item.submenu.length)),i.\u0275\u0275property("link",t.item.link),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.item.submenu.length&&t.showDropdown))},directives:[em,p.NgIf,p.NgForOf,gf,If],encapsulation:2}),e})(),Lf=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",kf)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ff=function(e){return{item:e}};function Of(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction1(2,Ff,e.item))}}let Df=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Lf))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-item"]],inputs:{item:"item"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Of,1,4,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();function Af(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",11),i.\u0275\u0275element(1,"scrm-menu-item-link",12),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),i.\u0275\u0275property("icon",e.icon)("link",e.link)}}function Nf(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",13),i.\u0275\u0275element(2,"scrm-sub-menu-favorites",13),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("module",e.module),i.\u0275\u0275advance(1),i.\u0275\u0275property("module",e.module)}}function Rf(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"ul",8),i.\u0275\u0275template(1,Af,2,4,"li",9),i.\u0275\u0275template(2,Nf,3,2,"ng-container",10),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275classProp("rounded-0",e.submenu&&1===e.submenu.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.submenu),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e&&e.module)}}const Tf=function(e,t){return{"sub-nav-link":!0,"nav-link":!0,"action-link":!0,"dropdown-item":e,"dropdown-toggle":t}};function Pf(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",5),i.\u0275\u0275element(1,"scrm-menu-item-link",6),i.\u0275\u0275template(2,Rf,3,4,"ul",7),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275classMap(i.\u0275\u0275pureFunction2(4,Tf,e.submenu.length,e.submenu.length)),i.\u0275\u0275property("link",e.link),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.submenu.length)}}function Bf(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ul",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().hideDropdown()}),i.\u0275\u0275template(1,Pf,3,7,"li",4),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngbCollapse",e.subNavCollapse),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.item.submenu)}}let $f=(()=>{class e{constructor(){this.showDropdown=!0}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:5,vars:2,consts:[["data-target",".navbar-collapse","data-toggle","collapse"],["data-toggle","dropdown",1,"top-nav-link","nav-link-grouped","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu main",3,"ngbCollapse","click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","main",3,"ngbCollapse","click"],["class","nav-item dropdown-submenu submenu",4,"ngFor","ngForOf"],[1,"nav-item","dropdown-submenu","submenu"],[3,"link"],["class","dropdown-menu submenu",3,"rounded-0",4,"ngIf"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",0),i.\u0275\u0275elementStart(2,"a",1),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,Bf,2,2,"ul",2),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",t.item.link.label," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showDropdown))},directives:[p.NgIf,I.NgbCollapse,p.NgForOf,em,gf,If],encapsulation:2}),e})(),Vf=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",$f)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const zf=function(e,t){return{item:e,subNavCollapse:t}};function Uf(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",i.\u0275\u0275pureFunction2(2,zf,e.item,e.subNavCollapse))}}let Kf=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Vf))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Uf,1,5,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.getType)},directives:[p.NgIf,N,D],encapsulation:2}),e})();function Zf(e,t){1&e&&(i.\u0275\u0275elementStart(0,"nav",4),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275elementStart(2,"ul",6),i.\u0275\u0275elementStart(3,"li",7),i.\u0275\u0275text(4,"\xa0 "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function Gf(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"nav",8),i.\u0275\u0275elementStart(2,"div",9),i.\u0275\u0275elementStart(3,"ul",6),i.\u0275\u0275elementStart(4,"li",10),i.\u0275\u0275element(5,"scrm-logo-ui"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function Hf(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-mobile-menu",23),i.\u0275\u0275elementContainerEnd()),2&e){i.\u0275\u0275nextContext();const e=i.\u0275\u0275reference(3),t=i.\u0275\u0275nextContext(2).ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("all",n.navbar.all.modules)("current",n.navbar.current)("items",n.navbar.menu)("navigationType",t.userPreferences.navigation_paradigm||"")("onClose",n.getCloseCallBack(e))}}function Wf(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"a",25),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275propertyInterpolate("href",e.link.url,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275propertyInterpolate("target",e.link.target),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1("",e.link.label," ")}}function qf(e,t){if(1&e&&i.\u0275\u0275template(0,Wf,2,3,"a",24),2&e){const e=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function Qf(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"ul",11),i.\u0275\u0275elementStart(2,"div",12,13),i.\u0275\u0275elementStart(4,"button",14),i.\u0275\u0275element(5,"scrm-image",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",16),i.\u0275\u0275template(7,Hf,2,5,"ng-container",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",17),i.\u0275\u0275elementStart(9,"li",18),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275reference(3).close()}),i.\u0275\u0275elementStart(10,"a",19,20),i.\u0275\u0275element(12,"scrm-image",21),i.\u0275\u0275text(13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"div",22),i.\u0275\u0275template(15,qf,1,1,"ng-template",2),i.\u0275\u0275element(16,"scrm-logout-ui"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(17,"scrm-action-bar-ui"),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275reference(11),t=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(2),i.\u0275\u0275property("autoClose",!1),i.\u0275\u0275advance(4),i.\u0275\u0275property("@mobileNavFade",void 0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.navbar&&t.navbar.menu&&t.navbar.menu.length),i.\u0275\u0275advance(6),i.\u0275\u0275textInterpolate2(" ",t.navbar.currentUser.firstName," ",t.navbar.currentUser.lastName," "),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("min-width",e.offsetWidth,"px"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.navbar.globalActions)}}function Yf(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",37),i.\u0275\u0275element(1,"scrm-menu-item",38),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(5);i.\u0275\u0275advance(1),i.\u0275\u0275property("item",e.navbar.current)}}function Xf(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",39),i.\u0275\u0275element(1,"scrm-grouped-menu-item",40),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(5);i.\u0275\u0275advance(1),i.\u0275\u0275property("item",e)("subNavCollapse",n.subNavCollapse)}}function Jf(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"ul",33),i.\u0275\u0275template(2,Yf,2,1,"li",34),i.\u0275\u0275template(3,Xf,2,2,"li",35),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"scrm-menu-items-list",36),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.navbar.current),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.navbar.menu),i.\u0275\u0275advance(1),i.\u0275\u0275property("items",e.navbar.all.modules)}}function eg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",37),i.\u0275\u0275element(1,"scrm-menu-item",38),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(5);i.\u0275\u0275advance(1),i.\u0275\u0275property("item",e.navbar.current)}}function tg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",43),i.\u0275\u0275element(1,"scrm-menu-item",38),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("item",e)}}function ng(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"ul",6),i.\u0275\u0275template(2,eg,2,1,"li",34),i.\u0275\u0275template(3,tg,2,1,"li",41),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"scrm-menu-items-list",42),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.navbar.current),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.navbar.menu),i.\u0275\u0275advance(1),i.\u0275\u0275property("items",e.navbar.all.modules)}}function ig(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"a",25),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275propertyInterpolate("href",e.link.url,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275propertyInterpolate("target",e.link.target),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1("",e.link.label," ")}}function rg(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,ig,2,3,"a",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function og(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"nav",26),i.\u0275\u0275elementStart(2,"div",27),i.\u0275\u0275element(3,"scrm-home-menu-item",28),i.\u0275\u0275template(4,Jf,5,3,"ng-container",3),i.\u0275\u0275template(5,ng,5,3,"ng-container",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",17),i.\u0275\u0275elementStart(7,"ul",6),i.\u0275\u0275elementStart(8,"li",29),i.\u0275\u0275elementStart(9,"a",19,30),i.\u0275\u0275element(11,"scrm-image",21),i.\u0275\u0275elementStart(12,"span",31),i.\u0275\u0275text(13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"div",32),i.\u0275\u0275template(15,rg,2,1,"ng-container",3),i.\u0275\u0275element(16,"scrm-logout-ui"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(17,"scrm-action-bar-ui"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275reference(10),t=i.\u0275\u0275nextContext(2).ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngbCollapse",n.mainNavCollapse),i.\u0275\u0275advance(1),i.\u0275\u0275property("active",t.appState.module&&"home"===t.appState.module)("route",n.getHomePage()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","gm"==t.userPreferences.navigation_paradigm),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","gm"!=t.userPreferences.navigation_paradigm),i.\u0275\u0275advance(8),i.\u0275\u0275textInterpolate2(" ",n.navbar.currentUser.firstName," ",n.navbar.currentUser.lastName," "),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("min-width",e.offsetWidth,"px"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.navbar.globalActions)}}function sg(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Gf,6,0,"ng-container",3),i.\u0275\u0275template(2,Qf,18,8,"ng-container",3),i.\u0275\u0275template(3,og,18,10,"ng-container",3),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.isUserLoggedIn),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.isUserLoggedIn&&e.mobileNavbar),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.isUserLoggedIn&&!e.mobileNavbar)}}function ag(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,Zf,5,0,"ng-template",2),i.\u0275\u0275template(2,sg,4,3,"ng-container",3),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.loaded),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.loaded)}}let lg=(()=>{class e{constructor(e,t,n,i,s,a,l,d){this.navigationStore=e,this.languageStore=t,this.userPreferenceStore=n,this.systemConfigStore=i,this.appState=s,this.authService=a,this.moduleNavigation=l,this.screenSize=d,this.loaded=!0,this.mainNavCollapse=!0,this.subNavCollapse=!0,this.mobileNavbar=!1,this.mobileSubNav=!1,this.backLink=!1,this.mainNavLink=!0,this.submenu=[],this.moduleNameMapper=new jl(this.systemConfigStore),this.actionNameMapper=new kl(this.systemConfigStore),this.routeConverter=new zh(this.moduleNameMapper,this.actionNameMapper,this.systemConfigStore),this.maxTabs=8,this.screen=Oo.Medium,this.languages$=this.languageStore.vm$,this.userPreferences$=this.userPreferenceStore.userPreferences$,this.currentUser$=this.authService.currentUser$,this.appState$=this.appState.vm$,this.navigation$=this.navigationStore.vm$,this.vm$=(0,r.combineLatest)([this.navigation$,this.userPreferences$,this.currentUser$,this.appState$,this.screenSize.screenSize$,this.languages$]).pipe((0,o.map)(([e,t,n,i,r,o])=>(r&&(this.screen=r),this.calculateMaxTabs(e),this.navbar.resetMenu(),(0,c.ready)([o.appStrings,o.modStrings,o.appListStrings,t,n])&&this.navbar.build(e,n,this.maxTabs),{navigation:e,userPreferences:t,appState:i})))}onResize(e){this.mobileNavbar=e.target.innerWidth<=768}ngOnInit(){const e=new Vh(this.routeConverter,this.moduleNavigation,this.userPreferenceStore,this.languageStore,this.appState);this.setNavbar(e),this.authService.isUserLoggedIn.subscribe(e=>{this.isUserLoggedIn=e}),window.dispatchEvent(new Event("resize"))}ngOnDestroy(){this.authService.isUserLoggedIn.unsubscribe()}changeSubNav(e,t){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.submenu=t}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getHomePage(){return this.systemConfigStore.getHomePage()}getCloseCallBack(e){return()=>e.close()}setNavbar(e){this.navbar=e,this.loaded=!0}isLoaded(){return this.loaded}calculateMaxTabs(e){const t=this.systemConfigStore.getConfigValue("navigation_tab_limits");if(this.screen&&t){let n=t[this.screen];(!n||e.maxTabs&&e.maxTabs<n)&&(n=e.maxTabs),this.maxTabs=n}}}return e.instances=[],e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Pp),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ua),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(no),i.\u0275\u0275directiveInject(Kp),i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(Do))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-navbar"]],hostBindings:function(e,t){1&e&&i.\u0275\u0275listener("resize",function(e){return t.onResize(e)},!1,i.\u0275\u0275resolveWindow)},decls:2,vars:3,consts:[["class","top-panel fixed-top",4,"ngIf"],[1,"top-panel","fixed-top"],[3,"ngIf"],[4,"ngIf"],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","collapse","order-4","order-md-0","collapsenav"],[1,"navbar-nav"],[1,"top-nav","nav-item"],[1,"navbar","ml-0","pl-0"],[1,"navbar-collapse"],[1,"pl-0"],[1,"navbar","mobile-nav-block","mobilenavbar"],["ngbDropdown","",1,"position-static",3,"autoClose"],["myDrop","ngbDropdown"],["aria-controls","navbar","aria-expanded","false","aria-label","Toggle navigation","ngbDropdownToggle","","type","button",1,"navbar-toggler"],["image","hamburger",1,"responsive-menu-toggler"],["ngbDropdownMenu","",1,"mobile-nav-dropdown","w-100"],["ngbDropdown","",1,"global-links"],[1,"global-link-item",3,"click"],["ngbDropdownToggle","",1,"nav-link","primary-global-link","dropdown-toggle"],["mobileGlobalLinkTitle",""],["image","user",1,"global-action-icon","sicon-2x"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown"],[3,"all","current","items","navigationType","onClose"],["class","dropdown-item global-links-sublink","ngbDropdownItem","",3,"href","target",4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"dropdown-item","global-links-sublink",3,"href","target"],[1,"navbar","navbar-expand-md","navbar-1"],[1,"navbar-collapse","collapse","collapsenav",3,"ngbCollapse"],[3,"active","route"],[1,"global-link-item"],["globalLinkTitle",""],[1,"global-user-name"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","dropdown-menu-right"],[1,"navbar-nav","grouped"],["class","top-nav nav-item dropdown non-grouped active",4,"ngIf"],["class","top-nav nav-item dropdown main-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_TABGROUP_ALL",3,"items"],[1,"top-nav","nav-item","dropdown","non-grouped","active"],[3,"item"],[1,"top-nav","nav-item","dropdown","main-grouped"],[3,"item","subNavCollapse"],["class","top-nav nav-item dropdown non-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_MORE",3,"items"],[1,"top-nav","nav-item","dropdown","non-grouped"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,ag,3,2,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,I.NgbNavbar,Uh,I.NgbDropdown,I.NgbDropdownToggle,Eo,I.NgbDropdownMenu,Zh,jo,Wm,p.NgForOf,I.NgbDropdownItem,I.NgbCollapse,Jm,lf,Df,Kf],pipes:[p.AsyncPipe],encapsulation:2,data:{animation:[(0,hr.trigger)("mobileNavFade",[(0,hr.transition)(":enter",(0,hr.useAnimation)(Tr.fadeIn,{params:{timing:.5,delay:0}}))])]}}),e})(),cg=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",lg)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),dg=(()=>{class e{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(cg))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-navbar-ui"]],decls:1,vars:1,consts:[[3,"ndcDynamicComponent"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ndcDynamicComponent",t.getType)},directives:[N],encapsulation:2}),e})(),ug=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo]]}),e})(),pg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),hg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,ug,pg,Fo,I.NgbModule,u.RouterModule,Lo,R,hs]]}),e})(),mg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[u.RouterModule.forChild(Ph),hg,qp,p.CommonModule]]}),e})();function fg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275elementStart(1,"div",6),i.\u0275\u0275elementStart(2,"strong"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",7),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.getColumnLabel("LBL_CHECKSYS_TITLE")),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",e.getColumnLabel("ERR_CHECKSYS")," ")}}function gg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span",14),i.\u0275\u0275elementStart(1,"strong"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.value.info)," ")}}function vg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.value.error)," ")}}function yg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e," ")}}function bg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",15),i.\u0275\u0275elementStart(1,"ul"),i.\u0275\u0275template(2,yg,2,1,"li",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",e.value.data)}}function Sg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li"),i.\u0275\u0275elementStart(1,"div",8),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275elementStart(3,"span"),i.\u0275\u0275element(4,"scrm-image",9),i.\u0275\u0275elementStart(5,"strong",10),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,gg,3,1,"span",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(8,vg,2,1,"div",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,bg,3,1,"div",13),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("alert ",n.getAlertType(e.value),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("image",n.getAlertIcon(e.value)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.getColumnLabel(e.value.label)," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",""!==e.value.info),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",""!==e.value.error),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",0!==e.value.data.length)}}const Cg={success:{alertClass:"alert-success",alertIcon:"info-circle"},error:{alertClass:"alert-danger",alertIcon:"exclamation-circle"},warning:{alertClass:"alert-warning",alertIcon:"exclamation-triangle"},info:{alertClass:"alert-info",alertIcon:"info-circle"},light:{alertClass:"alert-light",alertIcon:"exclamation-circle"}};let wg=(()=>{class e{constructor(e,t,n){this.appState=e,this.languageStore=t,this.modal=n,this.titleKey="LBL_CHECKSYS_TITLE"}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_CHECKSYS_TITLE")}getColumnLabel(e){const t=this.languageStore.getFieldLabel(e,this.appState.getModule());return(0,c.isEmptyString)(t)?e:t}ngOnInit(){console.log(this.errors),this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}}}getAlertType(e){return"error"===e.status?Cg[e.type].alertClass:Cg[e.status].alertClass}getAlertIcon(e){return"error"===e.status?Cg[e.type].alertIcon:Cg[e.status].alertIcon}returnZero(){return 0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(no),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(I.NgbActiveModal))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-install-error-modal"]],inputs:{errors:"errors"},decls:8,vars:11,consts:[[3,"closable","close","title","titleKey","headerKlass","bodyKlass"],["modal-body",""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"list-style-none"],[4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"alert-desc"],["role","alert"],[3,"image"],[2,"margin-left","2px"],["style","float:right",4,"ngIf"],[4,"ngIf"],["class","alert alert-light","role","alert",4,"ngIf"],[2,"float","right"],["role","alert",1,"alert","alert-light"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"scrm-modal",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementContainerStart(2),i.\u0275\u0275template(3,fg,6,2,"div",2),i.\u0275\u0275elementStart(4,"div"),i.\u0275\u0275elementStart(5,"ul",3),i.\u0275\u0275template(6,Sg,10,8,"li",4),i.\u0275\u0275pipe(7,"keyvalue"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("closable",!0)("close",t.closeButtonIcon)("title",t.getHeaderLabel())("titleKey",t.titleKey)("headerKlass","alert-header")("bodyKlass","alert-body"),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.errors.hasValidationError&&!0===t.errors.hasValidationError),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind2(7,8,t.errors.data,t.returnZero)))},directives:[ta,p.NgIf,p.NgForOf,Eo],pipes:[p.KeyValuePipe],encapsulation:2}),e})(),xg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e,bootstrap:[wg]}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Oe,Qs,sa,hs,fs,I.NgbModule,I.NgbAlertModule,Lo]]}),e})();class Ig extends c.ActionHandler{}let Eg=(()=>{class e extends Ig{constructor(e,t){super(),this.moduleNameMapper=e,this.router=t,this.key="create",this.modes=["list"]}run(e){var t,n;const i=`/${e.module}/${null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.moduleAction)&&void 0!==n?n:"edit"}`,r={return_module:this.moduleNameMapper.toLegacy(e.parentModule),return_action:"DetailView",return_id:e.parentId||""};this.addAdditionalFields(e,r),this.addParams(e,r),this.router.navigate([i],{queryParams:r}).then()}shouldDisplay(){return!0}addAdditionalFields(e,t){var n;const i=e.store.parentRecord&&e.store.parentRecord.attributes||{};if(!i&&!Object.keys(i).length)return;const r=null!==(n=e.action.additionalFields)&&void 0!==n?n:{};(Object.keys(r)||[]).forEach(e=>{if(!e||!r[e])return;const n=(0,Ae.Z)(i,r[e],null);(0,c.isVoid)(n)||(t[e]=n)})}addParams(e,t){var n;const i=null!==(n=e.action.extraParams)&&void 0!==n?n:{};(Object.keys(i)||[]).forEach(e=>{!e||!i[e]||(t[e]=i[e])})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(jl),i.\u0275\u0275inject(u.Router))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class _g{}let Mg=(()=>{class e extends _g{constructor(e,t){super(),this.router=e,this.message=t,this.key="redirect"}run(e){if(!e||!e.route)return void this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE");const t={queryParams:{}};e.queryParams&&(t.queryParams=e.queryParams),this.router.navigate([e.route],t).then()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(Jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),jg=(()=>{class e extends _g{constructor(e){super(),this.message=e,this.key="export"}run(e){e&&e.url&&e.formData?this.download(e.url,e.formData):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}download(e,t){const n=document.createElement("form");n.setAttribute("id","export-download"),n.setAttribute("method","post"),n.setAttribute("action",e),n.setAttribute("target","_self"),n.setAttribute("style","display: none;"),Object.keys(t).forEach(e=>{const i=document.createElement("input");i.setAttribute("name",e),i.setAttribute("value",t[e]),n.appendChild(i)}),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),kg=(()=>{class e extends _g{constructor(){super(),this.key="noop"}run(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Lg{constructor(){}init(e){this.iframe=e,this.initialSizeAdjustment(),this.addBodyResizeListener()}destroy(){this.observer&&this.observer.disconnect(),this.iframe=null,this.observer=null}initialSizeAdjustment(){setTimeout(this.onResize.bind(this),200)}addBodyResizeListener(){const e={document:this.iframe.contentWindow.document,element:this.iframe.contentWindow.document.body,height:this.iframe.contentWindow.document.body.scrollHeight,watched:[{getHeight:()=>{const t=e.document.getElementsByClassName("modal in"),n=t&&t[0],i=n&&n.firstElementChild;return i&&i.scrollHeight+200||-1}},{getHeight:()=>{const t=e.document.getElementById("bootstrap-container"),n=t&&t.scrollHeight+150||-1;return n>0?n:e.element.scrollHeight+50}}]};this.observer=(new Pr.MutationObserverFactory).create(()=>{const t=[];e.watched.forEach(e=>{const n=e.getHeight();n>0&&t.push(n)}),t.sort((e,t)=>e-t);const n=t.pop(),i=this.calculateResizing(e.height,n);i.resized&&(e.height=i.height)}),this.observer.observe(this.iframe.contentWindow.document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}calculateResizing(e,t){const n=window.innerHeight-50;return t<n&&(t=n),e===t?{resized:!1}:e<t-20||this.iframe.scrollHeight>t?(this.resizeIFrame(t),{resized:!0,height:t}):{resized:!1}}onResize(){this.calculateResizing(this.iframe.offsetHeight,this.iframe.contentWindow.document.body.scrollHeight+120)}resizeIFrame(e){this.iframe.style.height=e+1+"px"}}class Fg{constructor(e,t=null,n=null,i=null){this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.unloadListener=null,this.loadListener=null,this.iframe=e,this.changeCallback=t,this.loadCallback=n,this.unLoadCallback=i}init(){this.loadListener=this.loadHandler.bind(this),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("load",this.loadListener),this.iframe.contentWindow.removeEventListener("unload",this.unloadListener)}destroy(){const e=this.iframe&&this.iframe.contentWindow;e&&(e.removeEventListener("unload",this.unloadListener),e.removeEventListener("load",this.loadListener)),this.iframe=null,this.lastDispatched=null,this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.loadListener=null,this.unloadListener=null}loadHandler(){this.loadCallback(),this.bindUnload()}bindUnload(){this.iframe.contentWindow.removeEventListener("unload",this.unloadListener),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("unload",this.unloadListener)}unloadHandler(){this.unLoadCallback(),setTimeout(this.triggerPageChange.bind(this),0)}triggerPageChange(){const e=this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.location.href;e&&e!==this.lastDispatched&&(this.lastDispatched=e,this.changeCallback(e))}}const Og=["dataContainer"];let Dg=(()=>{class e{constructor(e,t){this.languageStore=e,this.activeModal=t,this.url="",this.titleKey="",this.asyncActionCallback=null,this.iframe=null}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",null!==this.asyncActionCallback&&this.asyncActionCallback(this.iframe),this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new Fg(this.iframe,null,this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new Lg}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(I.NgbActiveModal))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-classic-modal"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(Og,7),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.dataContainer=e.first)}},inputs:{url:"url",titleKey:"titleKey",asyncActionCallback:"asyncActionCallback"},decls:5,vars:3,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","klass","classic-view-modal",3,"closable","close","titleKey"],["modal-body",""],[1,"classic-view-container"],["dataContainer",""]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"scrm-modal",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2,3),i.\u0275\u0275element(4,"iframe"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("closable",!0)("close",t.closeButton)("titleKey",t.titleKey)},directives:[ta],encapsulation:2,data:{animation:[(0,hr.trigger)("modalFade",[(0,hr.transition)("void <=> *",[(0,hr.animate)("800ms")])])]}}),e})(),Ag=(()=>{class e extends _g{constructor(e,t,n){super(),this.router=e,this.modalService=t,this.message=n,this.key="audit"}run(e){e&&e.url?this.showClassicViewModal(e.url):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}changeLogLegacyContentFormatter(e){if(!e)return;const t=e.contentDocument.getElementsByClassName("moduleTitle")[0];!t||(t.innerText="")}showClassicViewModal(e){const t=this.modalService.open(Dg,{size:"xl",centered:!0,scrollable:!0});t.componentInstance.titleKey="LBL_CHANGE_LOG",t.componentInstance.url=e,t.componentInstance.asyncActionCallback=this.changeLogLegacyContentFormatter.bind(this)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(I.NgbModal),i.\u0275\u0275inject(Jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ng=(()=>{class e{constructor(e,t,n,i,r,o,s){this.processService=e,this.appStateStore=t,this.message=n,this.redirectAction=i,this.exportAction=r,this.noopAction=o,this.changelogAction=s,this.actions={},this.registerHandler(i),this.registerHandler(r),this.registerHandler(o),this.registerHandler(s)}registerHandler(e){this.actions[e.key]=e}run(e,t,n=null){const i=Object.assign({},t);return this.appStateStore.updateLoading(e,!0),this.processService.submit(e,i).pipe((0,o.take)(1),(0,o.tap)(t=>{this.appStateStore.updateLoading(e,!1);let i="addSuccessMessageByKey";if("error"===t.status&&(i="addDangerMessageByKey"),t.messages&&t.messages.forEach(e=>{e&&this.message[i](e)}),"error"===t.status)return;const r=n||t.data&&t.data.handler||null;if(!r)return;const o=this.actions[r];o?o.run(t.data.params):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER")}),(0,o.catchError)(t=>{var n;throw"Access Denied."===(null!==(n=null==t?void 0:t.message)&&void 0!==n?n:"")?(this.appStateStore.updateLoading(e,!1),t):(this.message.addDangerMessageByKey("LBL_ACTION_ERROR"),this.appStateStore.updateLoading(e,!1),t)}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(so),i.\u0275\u0275inject(no),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Mg),i.\u0275\u0275inject(jg),i.\u0275\u0275inject(kg),i.\u0275\u0275inject(Ag))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Rg=(()=>{class e extends Ig{constructor(e,t,n){super(),this.modalService=e,this.message=t,this.asyncActionService=n,this.key="select",this.modes=["list"]}shouldDisplay(e){return!0}run(e){this.showSelectModal(e)}showSelectModal(e){var t;const n=this.modalService.open(Cc,{size:"xl",scrollable:!0});n.componentInstance.module=e.module,n.componentInstance.parentModule=null!==(t=null==e?void 0:e.parentModule)&&void 0!==t?t:"",n.result.then(t=>{if(!t||!t.selection||!t.selection.selected)return;const n=this.getSelectedRecord(t);let i=e.subpanelMeta.get_subpanel_data;const r=n.module||"",o=e.subpanelMeta.collection_list||null;o&&o[r]&&o[r].get_subpanel_data&&(i=o[r].get_subpanel_data),this.runAsyncAction({action:"record-select",module:e.store.parentModule,id:e.store.parentId||"",payload:{baseModule:e.parentModule,baseRecordId:e.parentId,linkField:i,relateModule:n.module,relateRecordId:n.id}},e)})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(e=>(t=e,!0));let n=null;return e.records.some(e=>{if(e&&e.id===t)return n=e,!0}),n}runAsyncAction(e,t){this.message.removeMessages(),this.asyncActionService.run("record-select",e).pipe((0,o.take)(1)).subscribe(()=>{t.store.load(!1).pipe((0,o.take)(1)).subscribe(),t.store.loadAllStatistics(!1).pipe((0,o.take)(1)).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(I.NgbModal),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Ng))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Tg=(()=>{class e extends Ig{constructor(){super(),this.key="async-process",this.modes=c.ALL_VIEW_MODES}run(e){}shouldDisplay(e){return!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pg=(()=>{class e{constructor(e,t,n){this.create=e,this.select=t,this.async=n,this.actions={},this.actions[e.key]=e,this.actions[t.key]=t,this.actions[n.key]=n}run(e,t){this.actions[e].run(t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Eg),i.\u0275\u0275inject(Rg),i.\u0275\u0275inject(Tg))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Bg(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-button-group",3),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("config$",e.config$)}}function $g(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275template(3,Bg,1,1,"scrm-button-group",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275classMap(e.klass),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.config$)}}let Vg=(()=>{class e{constructor(e,t,n,i,o){this.languageStore=e,this.actionManager=t,this.languages=n,this.screenSize=i,this.systemConfigStore=o,this.klass="",this.limitConfigKey="listview_line_actions_limits",this.configState=new r.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.buttonClass="line-action-item line-action",this.buttonGroupClass="float-right",this.subs=[],this.screen=Oo.Medium,this.defaultBreakpoint=3}ngOnInit(){this.subs.push((0,r.combineLatest)([this.config.getActions({record:this.record}),this.screenSize.screenSize$,this.languages.vm$]).pipe((0,o.map)(([e,t,n])=>{t&&(this.screen=t),this.configState.next(this.getButtonGroupConfig(e)),this.actions=e})).subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getButtonGroupConfig(e){const t=[],n=[];e.forEach(e=>{const i=this.buildButton(e);e.params&&e.params.expanded?t.push(i):n.push(i)});let i=this.getBreakpoint();t.length<i&&(i=t.length);const r=t.concat(n);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:i,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupClass]},buttons:r}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue(this.limitConfigKey);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){const t={titleKey:e.labelKey||"",klass:this.buttonClass,icon:e.icon||"",onClick:()=>{this.config.runAction(e,{module:this.record&&this.record.module||"",record:this.record})}};return e.icon&&(t.icon=e.icon),e.status&&c.Button.appendClasses(t,[e.status]),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(Pg),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(Do),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-line-action-menu"]],inputs:{klass:"klass",record:"record",config:"config",limitConfigKey:"limitConfigKey"},decls:1,vars:1,consts:[[4,"ngIf"],["id","line-action-div",1,"line-action","float-right"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,$g,4,4,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.actions)},directives:[p.NgIf,ls],encapsulation:2}),e})(),zg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,I.NgbModule,Lo,u.RouterModule,gs]]}),e})(),Ug=(()=>{class e{constructor(){this.overlay=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-loading-spinner"]],inputs:{overlay:"overlay"},decls:19,vars:2,consts:[[1,"loading-spinner"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div",0),i.\u0275\u0275elementStart(2,"div",1),i.\u0275\u0275element(3,"div",2),i.\u0275\u0275element(4,"div",2),i.\u0275\u0275element(5,"div",3),i.\u0275\u0275element(6,"div",4),i.\u0275\u0275element(7,"div",5),i.\u0275\u0275element(8,"div",5),i.\u0275\u0275element(9,"div",6),i.\u0275\u0275element(10,"div",7),i.\u0275\u0275element(11,"div",8),i.\u0275\u0275element(12,"div",8),i.\u0275\u0275element(13,"div",9),i.\u0275\u0275element(14,"div",10),i.\u0275\u0275element(15,"div",8),i.\u0275\u0275element(16,"div",8),i.\u0275\u0275element(17,"div",9),i.\u0275\u0275element(18,"div",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275classProp("overlay",t.overlay)},styles:[".sk-cube-grid[_ngcontent-%COMP%]{width:6.25em;height:6.25em}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;-webkit-animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out;animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{-webkit-animation-delay:.4s;animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{-webkit-animation-delay:0s;animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}@keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}"]}),e})(),Kg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})();function Zg(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2).ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(t[e.labelKey]||"")}}function Gg(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.text)}}function Hg(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext(3).close(t)}),i.\u0275\u0275template(1,Zg,2,1,"ng-container",6),i.\u0275\u0275template(2,Gg,2,1,"ng-container",6),i.\u0275\u0275elementStart(3,"a",7),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext(3).close(t)}),i.\u0275\u0275elementStart(4,"span",8),i.\u0275\u0275text(5,"\xd7"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275classMapInterpolate1("message ",e.type," alert-dismissible fade show shadow"),i.\u0275\u0275property("@fade",void 0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.labelKey),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.text)}}function Wg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275template(1,Hg,6,6,"div",4),i.\u0275\u0275elementEnd()),2&e){const e=t.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e)}}function qg(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,Wg,2,1,"div",2),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(2,1,e.messages$))}}let Qg=(()=>{class e{constructor(e,t){this.messageService=e,this.languages=t,this.appStrings$=t.appStrings$}ngOnInit(){this.messages$=this.messageService.messages$}close(e){this.messageService.contains(e,!0)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Jl),i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-message-ui"]],decls:2,vars:3,consts:[["class","container-fluid alert-fixed message-wrapper",4,"ngIf"],[1,"container-fluid","alert-fixed","message-wrapper"],["class","d-flex justify-content-center flex-column align-items-center message-container",4,"ngIf"],[1,"d-flex","justify-content-center","flex-column","align-items-center","message-container"],["role","alert",3,"class","click",4,"ngFor","ngForOf"],["role","alert",3,"click"],[4,"ngIf"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,qg,3,3,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.appStrings$))},directives:[p.NgIf,p.NgForOf],pipes:[p.AsyncPipe],encapsulation:2,data:{animation:[(0,hr.trigger)("fade",[(0,hr.transition)(":enter",(0,hr.useAnimation)(Tr.fadeIn,{params:{timing:.5,delay:0}})),(0,hr.transition)(":leave",(0,hr.useAnimation)(Tr.fadeOut,{params:{timing:.5,delay:0}}))])]}}),e})(),Yg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Xg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,sa]]}),e})(),Jg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,gs]]}),e})(),ev=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,sa,gs,hs,Jg,I.NgbModule]]}),e})(),tv=(()=>{class e{constructor(){this.title=""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-module-title"]],inputs:{title:"title"},decls:2,vars:3,template:function(e,t){1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"uppercase")),2&e&&i.\u0275\u0275textInterpolate1("\n",i.\u0275\u0275pipeBind1(1,1,t.title),"\n")},pipes:[p.UpperCasePipe],encapsulation:2}),e})(),nv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})();class iv{constructor(){this.target=$h.none}}const rv=function(e){return{"hide-pagination-count":e}};function ov(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementStart(1,"button",2),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().first()}),i.\u0275\u0275element(2,"scrm-image",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"button",4),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().previous()}),i.\u0275\u0275element(4,"scrm-image",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"span",6),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().next()}),i.\u0275\u0275element(8,"scrm-image",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"button",9),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().last()}),i.\u0275\u0275element(10,"scrm-image",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(5),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(5,rv,n.displayResponsiveTable)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate4(" (",e.pageCount.pageFirst," - ",e.pageCount.pageLast," ",e.appStrings.LBL_LIST_OF||""," ",e.pageCount.total,") ")}}let sv=(()=>{class e{constructor(e){this.languageStore=e,this.appStrings$=this.languageStore.appStrings$,this.vm$=null}ngOnInit(){const e=this.state.getPaginationCount();this.vm$=(0,r.combineLatest)([this.appStrings$,e]).pipe((0,o.map)(([e,t])=>({appStrings:e,pageCount:t})))}first(){this.state.changePage(c.PageSelection.FIRST)}previous(){this.state.changePage(c.PageSelection.PREVIOUS)}next(){this.state.changePage(c.PageSelection.NEXT)}last(){this.state.changePage(c.PageSelection.LAST)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-pagination"]],inputs:{state:"state"},decls:2,vars:3,consts:[["class","bulk-action float-right",4,"ngIf"],[1,"bulk-action","float-right"],["aria-label","Navigate to first page",1,"pagination-button","pagination-first",3,"click"],["image","paginate_first",1,"sicon-2x","pagination-icons"],["aria-label","Previous page",1,"pagination-button","pagination-previous",3,"click"],["image","paginate_previous",1,"sicon-2x","pagination-icons"],[1,"pagination-count",3,"ngClass"],["aria-label","Navigate to last page",1,"pagination-button","pagination-next",3,"click"],["image","paginate_next",1,"sicon-2x","pagination-icons"],["aria-label","Next page",1,"pagination-button","pagination-last",3,"click"],["image","paginate_last",1,"sicon-2x","pagination-icons"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,ov,11,7,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,Eo,p.NgClass],pipes:[p.AsyncPipe],encapsulation:2}),e})(),av=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo]]}),e})();function lv(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275elementStart(1,"div",6),i.\u0275\u0275elementStart(2,"scrm-panel",7),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275element(4,"scrm-field-layout",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(2),i.\u0275\u0275property("title",e.label),i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("panel-",e.key,""),i.\u0275\u0275advance(1),i.\u0275\u0275property("dataSource",n.getLayoutDataSource(e))}}function cv(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275template(1,lv,5,5,"div",4),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.panels)}}function dv(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275element(1,"scrm-field-layout",9),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(3);i.\u0275\u0275classMapInterpolate1("tab-",e.key,""),i.\u0275\u0275advance(1),i.\u0275\u0275property("dataSource",t.getLayoutDataSource(e))}}function uv(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li",15),i.\u0275\u0275elementStart(1,"a",16),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,dv,2,4,"ng-template",17),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("ngbNavItem",t.index+1),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.label)}}function pv(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275elementStart(1,"ul",11,12),i.\u0275\u0275listener("activeIdChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).active=t}),i.\u0275\u0275template(3,uv,4,2,"li",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"div",14),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275reference(2),t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("activeId",t.active),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.panels),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngbNavOutlet",e)}}function hv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,cv,2,1,"div",1),i.\u0275\u0275template(2,pv,5,3,"div",2),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.config&&"panels"===e.config.layout),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.config&&"tabs"===e.config.layout)}}let mv=(()=>{class e{constructor(e){this.language=e,this.config={},this.active=1,this.subs=[]}ngOnInit(){this.subs.push(this.dataSource.getDisplayConfig().subscribe(e=>{this.config=Object.assign({},e)})),this.subs.push(this.dataSource.getPanels().subscribe(e=>{this.panels=[...e]})),this.subs.push(this.dataSource.getRecord().subscribe(e=>{this.record=Object.assign({},e),this.fields=e.fields}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getLayoutDataSource(e){return{inlineEdit:!0,getConfig:()=>this.dataSource.getDisplayConfig().pipe((0,o.map)(e=>({mode:e.mode,maxColumns:e.maxColumns}))),getLayout:()=>(0,r.of)(e).pipe((0,o.shareReplay)(1)),getFields:()=>this.dataSource.getRecord().pipe((0,o.map)(e=>e.fields)),getRecord:()=>this.dataSource.getRecord(),getEditAction:()=>this.dataSource.getEditAction()}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-content"]],inputs:{dataSource:"dataSource"},decls:1,vars:1,consts:[[4,"ngIf"],["class","record-content panel-layout container-fluid pl-0 pr-0",4,"ngIf"],["class","record-content tabs-layout container-fluid pl-0 pr-0",4,"ngIf"],[1,"record-content","panel-layout","container-fluid","pl-0","pr-0"],["class","row no-gutters mb-3",4,"ngFor","ngForOf"],[1,"row","no-gutters","mb-3"],[1,"col"],["mode","collapsible",3,"title"],["panel-body",""],[3,"dataSource"],[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],["class","tab",3,"ngbNavItem",4,"ngFor","ngForOf"],[1,"p-2","pt-3","rounded-right","rounded-bottom",3,"ngbNavOutlet"],[1,"tab",3,"ngbNavItem"],["ngbNavLink","",1,"tab-link"],["ngbNavContent",""]],template:function(e,t){1&e&&i.\u0275\u0275template(0,hv,3,2,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.dataSource)},directives:[p.NgIf,p.NgForOf,jh,Ep,I.NgbNav,I.NgbNavOutlet,I.NgbNavItem,I.NgbNavLink,I.NgbNavContent],encapsulation:2}),e})(),fv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Ah,I.NgbModule,_p]]}),e})(),gv=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-content-skeleton"]],decls:138,vars:0,consts:[[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0","record-content-skeleton"],[1,"nav-tabs","nav"],[1,"tab","nav-item"],["href","",1,"tab-link","nav-link","active","pl-5","pr-5","h-100","box-loading"],["href","",1,"tab-link","nav-link","pl-5","pr-5","h-100","box-loading"],[1,"p-2","pt-3","rounded-right","rounded-bottom","tab-content"],[1,"tab-pane","fade","active","show"],[1,""],[1,"detail","field-layout"],[1,"form-row","align-items-center","pt-1","pb-1"],[1,"field-column-bordered","col","form-group","m-0","pl-3","pb-2","pr-3"],[1,"label-container"],[1,"col-form-label-sm","mb-0","pb-3","pl-5","pr-5","h-100","rounded","box-loading"],[1,"d-flex"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["type","button",1,"record-action-button"],["image","pencil"],[1,"field-separation","mt-2"],[1,"col","form-group","m-0","pl-3","pb-2","pr-3"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"ul",1),i.\u0275\u0275elementStart(2,"li",2),i.\u0275\u0275element(3,"a",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"li",2),i.\u0275\u0275element(5,"a",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"li",2),i.\u0275\u0275element(7,"a",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",5),i.\u0275\u0275elementStart(9,"div",6),i.\u0275\u0275elementStart(10,"div",7),i.\u0275\u0275elementStart(11,"form",8),i.\u0275\u0275elementStart(12,"div",9),i.\u0275\u0275elementStart(13,"div",10),i.\u0275\u0275elementStart(14,"div",11),i.\u0275\u0275elementStart(15,"strong"),i.\u0275\u0275element(16,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",13),i.\u0275\u0275element(18,"div",14),i.\u0275\u0275elementStart(19,"div"),i.\u0275\u0275elementStart(20,"button",15),i.\u0275\u0275element(21,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(22,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(23,"div",18),i.\u0275\u0275elementStart(24,"div",11),i.\u0275\u0275elementStart(25,"strong"),i.\u0275\u0275element(26,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(27,"div",13),i.\u0275\u0275element(28,"div",14),i.\u0275\u0275elementStart(29,"div"),i.\u0275\u0275elementStart(30,"button",15),i.\u0275\u0275element(31,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(32,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(33,"div",9),i.\u0275\u0275elementStart(34,"div",10),i.\u0275\u0275elementStart(35,"div",11),i.\u0275\u0275elementStart(36,"strong"),i.\u0275\u0275element(37,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(38,"div",13),i.\u0275\u0275element(39,"div",14),i.\u0275\u0275elementStart(40,"div"),i.\u0275\u0275elementStart(41,"button",15),i.\u0275\u0275element(42,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(43,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(44,"div",18),i.\u0275\u0275elementStart(45,"div",11),i.\u0275\u0275elementStart(46,"strong"),i.\u0275\u0275element(47,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(48,"div",13),i.\u0275\u0275element(49,"div",14),i.\u0275\u0275elementStart(50,"div"),i.\u0275\u0275elementStart(51,"button",15),i.\u0275\u0275element(52,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(53,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(54,"div",9),i.\u0275\u0275elementStart(55,"div",10),i.\u0275\u0275elementStart(56,"div",11),i.\u0275\u0275elementStart(57,"strong"),i.\u0275\u0275element(58,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(59,"div",13),i.\u0275\u0275element(60,"div",14),i.\u0275\u0275elementStart(61,"div"),i.\u0275\u0275elementStart(62,"button",15),i.\u0275\u0275element(63,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(64,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(65,"div",18),i.\u0275\u0275elementStart(66,"div",11),i.\u0275\u0275elementStart(67,"strong"),i.\u0275\u0275element(68,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(69,"div",13),i.\u0275\u0275element(70,"div",14),i.\u0275\u0275elementStart(71,"div"),i.\u0275\u0275elementStart(72,"button",15),i.\u0275\u0275element(73,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(74,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(75,"div",9),i.\u0275\u0275elementStart(76,"div",10),i.\u0275\u0275elementStart(77,"div",11),i.\u0275\u0275elementStart(78,"strong"),i.\u0275\u0275element(79,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(80,"div",13),i.\u0275\u0275element(81,"div",14),i.\u0275\u0275elementStart(82,"div"),i.\u0275\u0275elementStart(83,"button",15),i.\u0275\u0275element(84,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(85,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(86,"div",18),i.\u0275\u0275elementStart(87,"div",11),i.\u0275\u0275elementStart(88,"strong"),i.\u0275\u0275element(89,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(90,"div",13),i.\u0275\u0275element(91,"div",14),i.\u0275\u0275elementStart(92,"div"),i.\u0275\u0275elementStart(93,"button",15),i.\u0275\u0275element(94,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(95,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(96,"div",9),i.\u0275\u0275elementStart(97,"div",10),i.\u0275\u0275elementStart(98,"div",11),i.\u0275\u0275elementStart(99,"strong"),i.\u0275\u0275element(100,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(101,"div",13),i.\u0275\u0275element(102,"div",14),i.\u0275\u0275elementStart(103,"div"),i.\u0275\u0275elementStart(104,"button",15),i.\u0275\u0275element(105,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(106,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(107,"div",18),i.\u0275\u0275elementStart(108,"div",11),i.\u0275\u0275elementStart(109,"strong"),i.\u0275\u0275element(110,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(111,"div",13),i.\u0275\u0275element(112,"div",14),i.\u0275\u0275elementStart(113,"div"),i.\u0275\u0275elementStart(114,"button",15),i.\u0275\u0275element(115,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(116,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(117,"div",9),i.\u0275\u0275elementStart(118,"div",10),i.\u0275\u0275elementStart(119,"div",11),i.\u0275\u0275elementStart(120,"strong"),i.\u0275\u0275element(121,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(122,"div",13),i.\u0275\u0275element(123,"div",14),i.\u0275\u0275elementStart(124,"div"),i.\u0275\u0275elementStart(125,"button",15),i.\u0275\u0275element(126,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(127,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(128,"div",18),i.\u0275\u0275elementStart(129,"div",11),i.\u0275\u0275elementStart(130,"strong"),i.\u0275\u0275element(131,"label",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(132,"div",13),i.\u0275\u0275element(133,"div",14),i.\u0275\u0275elementStart(134,"div"),i.\u0275\u0275elementStart(135,"button",15),i.\u0275\u0275element(136,"scrm-image",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(137,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())},directives:[Eo],encapsulation:2}),e})(),vv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo]]}),e})();function yv(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label",3),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(3).ngIf,t=i.\u0275\u0275nextContext(4).$implicit,n=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("ngClass",n.getLabelClass(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.label," ")}}function bv(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-label",8),2&e){const e=i.\u0275\u0275nextContext(3).ngIf,t=i.\u0275\u0275nextContext(4).$implicit,n=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("labelKey",e.labelKey)("ngClass",n.getLabelClass(t))}}function Sv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,yv,2,2,"label",6),i.\u0275\u0275template(3,bv,1,2,"scrm-label",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2).ngIf,t=i.\u0275\u0275nextContext(4).$implicit,n=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("pr-3","inline"===n.getLabelDisplay(t,n.mode)&&"none"!==n.getDisplay(t)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.label),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.label&&e.labelKey)}}function Cv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275element(2,"scrm-field",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2).ngIf,t=i.\u0275\u0275nextContext(4).$implicit,n=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("flex-grow-1","inline"===n.getLabelDisplay(t,n.mode)),i.\u0275\u0275advance(1),i.\u0275\u0275property("field",e)("klass",n.getFieldClass(t))("mode",n.mode)("type",e.type)}}function wv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Sv,4,4,"ng-container",1),i.\u0275\u0275template(2,Cv,3,6,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(5).$implicit,t=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","none"!==t.getLabelDisplay(e,t.mode)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","none"!==t.getDisplay(e))}}function xv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,wv,3,2,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext(4).$implicit,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.shouldDisplay(n,e,r.mode))}}function Iv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,xv,2,1,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(3).$implicit,t=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.getField(t.record,e.field))}}function Ev(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-action-group-menu",10),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(7);i.\u0275\u0275advance(1),i.\u0275\u0275property("buttonClass",e.config.buttonClass)("config",e.config.actions)}}function _v(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275template(2,Iv,2,1,"ng-container",1),i.\u0275\u0275template(3,Ev,2,2,"ng-container",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("align-items-center","inline"===t.getLabelDisplay(e,t.mode))("flex-column","top"===t.getLabelDisplay(e,t.mode))("flex-row","inline"===t.getLabelDisplay(e,t.mode))("justify-content-end",!e.field),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.record),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.actionSlot&&t.config.actions)}}function Mv(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275template(1,_v,4,10,"ng-container",1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(4);let n;i.\u0275\u0275classMapInterpolate1("record-flexbox-col ",t.getClass(e),""),i.\u0275\u0275property("ngClass",null!==(n=t.config.colClass)&&void 0!==n?n:null),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","hidden"!==e.display&&t.shouldColDisplayInMode(e,t.mode))}}function jv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Mv,2,5,"div",4),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","hidden"!==e.display&&n.shouldColDisplayInMode(e,n.mode))}}function kv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275template(2,jv,2,1,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);let r;i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate3("d-flex record-flexbox-row ",n.getJustify(e.justify)," ",n.getAlign(e.align)," ",n.getLayoutRowClass(e),""),i.\u0275\u0275property("ngClass",null!==(r=n.config.rowClass)&&void 0!==r?r:null),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.cols)}}function Lv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,kv,3,7,"ng-container",2),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.layout.rows)}}function Fv(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,Lv,2,1,"ng-container",1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275classMapInterpolate1("d-flex flex-column ",e.config&&e.config.klass||"",""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.layout&&e.layout.rows)}}let Ov=(()=>{class e{constructor(){this.mode="detail",this.maxColumns=4,this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.subs=[]}ngOnInit(){if(!this.config)return;const e=this.config;e.record$&&this.subs.push(e.record$.subscribe(e=>{this.record=null!=e?e:null})),e.mode$&&this.subs.push(e.mode$.subscribe(e=>{this.mode=null!=e?e:"detail"})),e.layout$&&this.subs.push(e.layout$.subscribe(e=>{this.layout=null!=e?e:null}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getRowClass(){return this.config.rowClass}getColClass(){return this.config.colClass}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let t="font-weight-normal";return e&&(0,c.isTrue)(e)&&(t="font-weight-bolder"),t}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||""}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||""}getLayoutRowClass(e){return e&&e.class||""}getClass(e){if(!e)return"";const t=[];return t.push(e.class||""),e.size&&t.push(this.getSizeClass(e.size)||""),e.bold&&t.push(this.getFontWeight(e.bold)||""),e.color&&t.push(this.getColor(e.color)||""),t.join(" ")}getLabelDisplay(e,t){return this.shouldLabelDisplayInMode(e,t)?e.labelDisplay||this.config&&this.config.labelDisplay||"inline":"none"}getField(e,t){return t&&t.name&&e&&e.fields&&e.fields[t.name]||null}getFieldClass(e){let t=this.config.inputClass||{};return e.inputClass&&(t[e.inputClass]=!0),t}getLabelClass(e){let t=this.config.labelClass||{};return e.labelClass&&(t[e.labelClass]=!0),t}shouldDisplay(e,t,n){if(!this.shouldFieldDisplayInMode(e,n))return!1;if(!e.hideIfEmpty)return!0;let i=!1;return i=i||!!t.value,i=i||!(!t.valueList||!t.valueList.length),i=i||!(!t.valueObject||!Object.keys(t.valueObject).length),i}shouldColDisplayInMode(e,t){return this.shouldFieldDisplayInMode(e,t)||this.shouldLabelDisplayInMode(e,t)}shouldFieldDisplayInMode(e,t){var n;const i=null!==(n=null==e?void 0:e.modes)&&void 0!==n?n:null;return!(i&&i.length&&!i.includes(t))}shouldLabelDisplayInMode(e,t){var n;const i=null!==(n=null==e?void 0:e.labelModes)&&void 0!==n?n:null;return!(i&&i.length&&!i.includes(t))}getDisplay(e){return e.display||""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-flexbox"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"d-flex"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","ngClass"],[3,"field","klass","mode","type"],[3,"buttonClass","config"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Fv,2,4,"div",0),2&e&&i.\u0275\u0275property("ngIf",t.config)},directives:[p.NgIf,p.NgForOf,p.NgClass,To,Ju,us],encapsulation:2}),e})(),Dv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs,pp,hs,vs]]}),e})();function Av(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span",4),i.\u0275\u0275element(1,"scrm-action-group-menu",5),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("buttonClass",e.config.buttonClass)("config",e.config.actions)}}function Nv(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"scrm-field-grid",2),i.\u0275\u0275template(2,Av,2,2,"span",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275classMapInterpolate1("record-grid ",e.config&&e.config.klass||"",""),i.\u0275\u0275advance(1),i.\u0275\u0275property("actions",!!e.config.actions)("appendActions",e.config&&e.config.appendActions||!1)("colClass",e.config&&e.config.colClass)("fieldMode",e.mode)("fields",e.fields)("inputClass",e.config&&e.config.inputClass)("labelClass",e.config&&e.config.labelClass)("labelDisplay",e.config&&e.config.labelDisplay||"top")("maxColumns",e.maxColumns)("rowClass",e.config&&e.config.rowClass)("sizeMap",e.sizeMap),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.config.actions)}}function Rv(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Nv,3,15,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(2,1,e.vm$))}}let Tv=(()=>{class e{constructor(){this.gridButtons=[],this.mode="detail",this.maxColumns=4,this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.fields=[],this.special=[]}ngOnInit(){if(!this.config)return;const e=this.config;this.vm$=(0,r.combineLatest)([e.record$,e.mode$,e.fields$,e.maxColumns$,e.sizeMap$]).pipe((0,o.map)(([e,t,n,i,r])=>(this.mode=t,this.maxColumns=i,this.sizeMap=r,this.fields=this.getFields(e,n),{record:e,mode:t,fields:n,maxColumns:i})))}getFields(e,t){if(!e||!t||!e.fields)return[];const n=[];return t.forEach(t=>{!e.fields[t]||n.push(e.fields[t])}),n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-grid"]],inputs:{config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngIf"],[3,"actions","appendActions","colClass","fieldMode","fields","inputClass","labelClass","labelDisplay","maxColumns","rowClass","sizeMap"],["class","float-right","field-grid-actions","",4,"ngIf"],["field-grid-actions","",1,"float-right"],[3,"buttonClass","config"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,Rv,3,3,"ng-container",0),2&e&&i.\u0275\u0275property("ngIf",t.config)},directives:[p.NgIf,dp,us],pipes:[p.AsyncPipe],encapsulation:2}),e})(),Pv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,hp,vs]]}),e})();function Bv(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",1),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).ngIf;return i.\u0275\u0275nextContext().changeSorting(t)}),i.\u0275\u0275element(2,"scrm-image",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("image",n.getStatusIcon(e))}}let $v=(()=>{class e{constructor(){this.statusIcons={NONE:"sort",ASC:"sort_ascend",DESC:"sort_descend"},this.nextDirection={NONE:c.SortDirection.DESC,ASC:c.SortDirection.NONE,DESC:c.SortDirection.ASC}}ngOnInit(){this.direction$=this.state.getSortDirection()}getStatusIcon(e){return this.statusIcons[e]}changeSorting(e){this.state.changeSortDirection(this.nextDirection[e])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-sort-button"]],inputs:{state:"state"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-sm","p-0","sort-button",3,"click"],[1,"sort-icon","sicon",3,"image"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Bv,3,1,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.direction$))},directives:[p.NgIf,Eo],pipes:[p.AsyncPipe],encapsulation:2}),e})(),Vv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Lo]]}),e})(),zv=(()=>{class e{constructor(e){this.apollo=e}save(e){const t={module:e.module,attributes:(0,c.deepClone)(e.attributes)};e.id&&(t._id=e.id);const n={mutation:l()`
                mutation saveRecord($input: saveRecordInput!) {
                    saveRecord(input: $input) {
                        record {
                            attributes
                            id
                            _id
                            module
                            acls
                        }
                    }
                }
            `,variables:{input:t}};return this.apollo.mutate(n).pipe((0,o.map)(e=>this.mapToRecord(e)))}mapToRecord(e){var t,n,i,r,o,s,a,l,c,d,u,p,h,m,f,g;return e.data&&e.data.saveRecord&&e.data.saveRecord.record?{id:e.data.saveRecord.record._id,type:null!==(r=null===(i=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.saveRecord)||void 0===n?void 0:n.record)||void 0===i?void 0:i.type)&&void 0!==r?r:"",module:null!==(l=null===(a=null===(s=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.saveRecord)||void 0===s?void 0:s.record)||void 0===a?void 0:a.module)&&void 0!==l?l:"",attributes:null!==(p=null===(u=null===(d=null===(c=null==e?void 0:e.data)||void 0===c?void 0:c.saveRecord)||void 0===d?void 0:d.record)||void 0===u?void 0:u.attributes)&&void 0!==p?p:[],acls:null!==(g=null===(f=null===(m=null===(h=null==e?void 0:e.data)||void 0===h?void 0:h.saveRecord)||void 0===m?void 0:m.record)||void 0===f?void 0:f.acls)&&void 0!==g?g:[]}:null}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Uv=(()=>{class e{constructor(e,t,n){this.listStoreFactory=e,this.languageStore=t,this.statisticsStoreFactory=n,this.show=!1,this.subs=[],this.recordList=e.create(),this.statistics={},this.metadataState=new r.BehaviorSubject({}),this.metadata$=this.metadataState.asObservable(),this.loading$=this.recordList.loading$}getTitle(){let e=this.languageStore.getFieldLabel(this.metadata.title_key,this.parentModule);if(!e){const t=this.languageStore.getAppListString("moduleList");e=t&&t[this.metadata.title_key]||""}return e}getIcon(){return this.metadata.icon}clear(){this.metadataState.unsubscribe(),this.metadataState=null,this.recordList.clear(),this.recordList=null,this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.recordList.clearAuthBased()}init(e,t,n,i=null){this.parentModule=e,this.parentId=t,this.metadata=n,this.metadataState.next(this.metadata),this.recordList.init(n.module,!1,"list_max_entries_per_subpanel"),this.initStatistics(n,e,t),this.initSearchCriteria(e,t,n.name),i&&(this.parentRecord$=i,this.parentRecord$.subscribe(e=>this.parentRecord=e))}load(e=!0){return this.recordList.load(e)}getStatistic(e){return this.statistics[e]?this.statistics[e]:null}loadStatistics(e,t=!0){return this.statistics[e]?this.statistics[e].load(t):null}loadAllStatistics(e=!0){if(!this.statistics||!Object.keys(this.statistics).length)return null;const t={};return Object.keys(this.statistics).forEach(n=>{!this.statistics[n]||(t[n]=this.loadStatistics(n,e))}),(0,r.forkJoin)(t)}shouldBatchStatistic(){const e=this.metadata||{};return!(e.insightWidget&&e.insightWidget.batch&&!1===e.insightWidget.batch)}setStatisticsLoading(e,t){!this.statistics[e]||this.statistics[e].setLoading(t)}setAllStatisticsLoading(e){!this.statistics||!Object.keys(this.statistics).length||Object.keys(this.statistics).forEach(t=>{!this.statistics[t]||this.setStatisticsLoading(t,e)})}setStatistics(e,t,n=!1){!this.statistics[e]||this.statistics[e].setStatistic(e,t,n)}getStatisticQuery(e){return this.statistics[e].getQuery()}getAllStatisticQuery(){if(!this.statistics||!Object.keys(this.statistics).length)return{};const e={};return Object.keys(this.statistics).forEach(t=>{!this.statistics[t]||(e[t]=this.getStatisticQuery(t))}),e}getWidgetLayout(){const e=this.metadata;if(!(e&&e.insightWidget&&e.insightWidget.options&&e.insightWidget.options.insightWidget))return{rows:[]};const t=(0,c.deepClone)(e.insightWidget.options.insightWidget);return(!t.rows||!t.rows.length)&&(t.rows={}),t}initSearchCriteria(e,t,n){this.recordList.criteria={preset:{type:"subpanel",params:{subpanel:n,parentModule:e,parentId:t}}}}initStatistics(e,t,n){this.getWidgetLayout().rows.forEach(i=>{!i.cols||!i.cols.length||i.cols.forEach(i=>{!i.statistic||"string"!=typeof i.statistic||(this.initStatistic(i.statistic,e,t,n),i.store=this.statistics[i.statistic])})})}initStatistic(e,t,n,i){this.statistics[e]=this.statisticsStoreFactory.create(),this.statistics[e].init(t.module,{key:e,context:{module:n,id:i},params:{subpanel:t.name}},!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(ih))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Kv=(()=>{class e{constructor(e,t,n){this.listStoreFactory=e,this.languageStore=t,this.statisticsStoreFactory=n}create(){return new Uv(this.listStoreFactory,this.languageStore,this.statisticsStoreFactory)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(ih))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Zv=(()=>{class e{constructor(e,t,n,i,s){this.appStateStore=e,this.languageStore=t,this.navigationStore=n,this.moduleNavigation=i,this.metadataStore=s,this.appState$=this.appStateStore.vm$,this.language$=this.languageStore.vm$,this.navigation$=this.navigationStore.vm$,this.module$=(0,r.combineLatest)([this.appState$,this.navigationStore.vm$]).pipe((0,o.map)(([e,t])=>this.moduleNavigation.getModuleInfo(e.module,t))),this.appData$=(0,r.combineLatest)([this.appState$,this.module$,this.language$,this.navigation$]).pipe((0,o.map)(([e,t,n,i])=>(this.appData={appState:e,module:t,language:n,navigation:i},this.appData))),this.metadata$=s.metadata$.pipe((0,o.tap)(e=>{this.metadata=e}))}clear(){}clearAuthBased(){this.clear()}get appState(){return this.appData.appState?this.appData.appState:{}}get module(){return this.appData.module}get language(){return this.appData.language?this.appData.language:{appStrings:{},appListStrings:{},modStrings:{},languageKey:""}}get appStrings(){return this.language.appStrings}get appListStrings(){return this.language.appListStrings}get modStrings(){return this.language.modStrings}get navigation(){return this.appData.navigation}get searchMeta(){return this.metadata.search?this.metadata.search:{layout:{basic:{},advanced:{}}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(Fl),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Gv=(()=>{class e{constructor(e){this.apollo=e}fetch(e,t,n){const i=n.fields,r={query:l()`
            query getRecord($module: String!, $record: String!) {
                getRecord(module: $module, record: $record) {
                    ${i.join("\n")}
                }
            }
        `,variables:{module:e,record:t}};return this.apollo.query(r)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Hv=(()=>{class e{constructor(e){this.fetchGQL=e}fetch(e,t){return this.fetchGQL.fetch(e,t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Wv={id:"",type:"",module:"",attributes:{},acls:[]};class qv{constructor(e,t,n,i,s,a){this.definitions$=e,this.recordSaveGQL=t,this.recordFetchGQL=n,this.message=i,this.recordManager=s,this.recordMappers=a,this.cache$=null,this.internalState=(0,c.deepClone)(Wv),this.stagingState=(0,c.deepClone)(Wv),this.store=new r.BehaviorSubject(this.internalState),this.staging=new r.BehaviorSubject(this.stagingState),this.definitions=[],this.subs=[],this.fieldsMetadata={fields:["_id","id","attributes","module","type","acls","favorite"]},this.state$=this.store.asObservable().pipe((0,o.distinctUntilChanged)()),this.staging$=this.staging.asObservable(),this.subs.push(this.state$.subscribe(e=>{this.updateStaging(e)})),this.subs.push(e.subscribe(e=>{this.definitions=e,this.init(this.internalState)}))}init(e){const t=Object.assign({},e);this.initRecord(t),this.updateState(t)}getStaging(){return this.stagingState?this.stagingState:null}setStaging(e){this.initRecord(e),this.staging.next(this.stagingState=e)}setRecord(e){this.initRecord(e),this.updateState(e)}save(){return this.mapStagingFields(),this.recordSaveGQL.save(this.stagingState).pipe((0,o.tap)(e=>{this.initRecord(e),this.updateState(e)}))}validate(){return this.stagingState.formGroup.markAllAsTouched(),this.stagingState.formGroup.statusChanges.pipe((0,o.startWith)(this.stagingState.formGroup.status),(0,o.filter)(e=>"PENDING"!==e),(0,o.take)(1),(0,o.map)(e=>"VALID"===e))}resetStaging(){this.updateStaging(this.internalState)}destroy(){this.subs.forEach(e=>e.unsubscribe())}getBaseRecord(){return this.internalState?(0,c.deepClone)({id:this.internalState.id,type:this.internalState.type,module:this.internalState.module,attributes:this.internalState.attributes,acls:this.internalState.acls}):null}getBaseStaging(){return this.stagingState?(this.mapStagingFields(),(0,c.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,attributes:this.stagingState.attributes,acls:this.stagingState.acls})):null}extractBaseRecord(e){const t=(0,m._T)(e,["fields","formGroup"]);return Object.assign({},t)}isDirty(){return!(!this.stagingState||!this.stagingState.formGroup)&&this.stagingState.formGroup.dirty}retrieveRecord(e,t,n=!0){return(null==this.cache$||!1===n)&&(this.cache$=this.fetch(e,t).pipe((0,o.tap)(e=>this.init(e)),(0,o.shareReplay)(1))),this.cache$}updateState(e){this.store.next(this.internalState=e)}updateStaging(e){const t=(0,c.deepClone)(this.extractBaseRecord(e));this.initRecord(t),this.staging.next(this.stagingState=t)}mapStagingFields(){const e=this.recordMappers.get(this.stagingState.module);Object.keys(e).forEach(t=>{e[t].map(this.stagingState)})}initRecord(e){e.module&&this.definitions&&this.definitions.length>0&&(e.fields=this.recordManager.initFields(e,this.definitions))}fetch(e,t){return this.recordFetchGQL.fetch(e,t,this.fieldsMetadata).pipe((0,o.map)(({data:t})=>{var n,i;const r={type:"",module:"",attributes:{},acls:[]};if(!t)return r;const o=t.getRecord.attributes.id;return o?(r.id=o,r.module=e,r.type=t.getRecord.attributes&&t.getRecord.attributes.object_name,r.attributes=t.getRecord.attributes,r.acls=t.getRecord.acls,r.favorite=null!==(i=null===(n=null==t?void 0:t.getRecord)||void 0===n?void 0:n.favorite)&&void 0!==i&&i,r):(this.message.addDangerMessageByKey("LBL_RECORD_DOES_NOT_EXIST"),r)}),(0,o.catchError)(e=>(0,r.throwError)(e)))}}let Qv=(()=>{class e{getKey(){return"base"}map(e){!e.fields||!Object.keys(e.fields).length||Object.keys(e.fields).forEach(t=>{const n=e.fields[t],i=n.type||"",r=n.definition.source||"",o=n.definition.rname||"name",s=n.definition.id_name||"";if("relate"!==i||"non-db"!==r||s!==t){if("relate"===i&&"non-db"===r&&""!==o&&n.valueObject){const i=e.attributes[t]||{};return i[o]=n.valueObject[o],i.id=n.valueObject.id,e.attributes[t]=i,void(e.attributes[s]=n.valueObject.id)}if(!n.valueObject)return n.items?(e.attributes[t]=[],void n.items.forEach(n=>{e.attributes[t].push({id:n.id,module:n.module,attributes:(0,c.deepClone)(n.attributes)})})):void(e.attributes[t]=n.valueObjectArray?n.valueObjectArray:n.valueList?n.valueList:n.value);e.attributes[t]=n.valueObject}else e.attributes[t]=n.value})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Yv=(()=>{class e{constructor(e,t,n,i,r,o){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=n,this.recordManager=i,this.recordMappers=r,this.baseMapper=o,r.register("default",o.getKey(),o)}create(e){return new qv(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gv),i.\u0275\u0275inject(zv),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Iu),i.\u0275\u0275inject(c.RecordMapperRegistry),i.\u0275\u0275inject(Qv))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Xv={module:"",recordID:"",loading:!1,widgets:!1,showSidebarWidgets:!1,showTopWidget:!1,showSubpanels:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let Jv=(()=>{class e extends Zv{constructor(e,t,n,i,s,a,l,d,u,p,h,m,f,g){super(n,i,s,a,l),this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=n,this.languageStore=i,this.navigationStore=s,this.moduleNavigation=a,this.metadataStore=l,this.localStorage=d,this.message=u,this.subpanelFactory=p,this.recordManager=h,this.statisticsBatch=m,this.recordStoreFactory=f,this.preferences=g,this.cache$=null,this.internalState=(0,c.deepClone)(Xv),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subpanelReloadSubject=new r.BehaviorSubject({}),this.subpanelReloadSub=[],this.subs=[],this.recordStore=f.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,o.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading)),this.widgets$=this.state$.pipe((0,o.map)(e=>e.widgets)),this.showSidebarWidgets$=this.state$.pipe((0,o.map)(e=>e.showSidebarWidgets)),this.showTopWidget$=this.state$.pipe((0,o.map)(e=>e.showTopWidget)),this.showSubpanels$=this.state$.pipe((0,o.map)(e=>e.showSubpanels)),this.mode$=this.state$.pipe((0,o.map)(e=>e.mode)),this.subpanelReload$=this.subpanelReloadSubject.asObservable();const v=(0,r.combineLatest)([this.record$,this.loading$]).pipe((0,o.map)(([e,t])=>(this.data={record:e,loading:t},this.data)));this.vm$=(0,r.combineLatest)([v,this.appData$,this.metadata$]).pipe((0,o.map)(([e,t,n])=>(this.vm={data:e,appData:t,metadata:n},this.vm))),this.subpanelsState=new r.BehaviorSubject({}),this.subpanels$=this.subpanelsState.asObservable(),this.viewContext$=this.record$.pipe((0,o.map)(()=>this.getViewContext()))}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState(Object.assign(Object.assign({},this.internalState),{widgets:e}))}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState(Object.assign(Object.assign({},this.internalState),{showSidebarWidgets:e}))}get showTopWidget(){return this.internalState.showTopWidget}set showTopWidget(e){this.updateState(Object.assign(Object.assign({},this.internalState),{showTopWidget:e}))}get showSubpanels(){return this.internalState.showTopWidget}set showSubpanels(e){this.updateState(Object.assign(Object.assign({},this.internalState),{showSubpanels:e}))}get params(){return this.internalState.params||{}}set params(e){this.updateState(Object.assign(Object.assign({},this.internalState),{params:e}))}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId(),record:this.getBaseRecord()}}getSubpanels(){return this.subpanels}destroy(){this.clear()}init(e,t,n="detail",i={}){return this.internalState.module=e,this.internalState.recordID=t,this.setMode(n),this.initSubpanels(e,t),this.calculateShowWidgets(),this.load().pipe((0,o.tap)(()=>{this.showTopWidget=!0,this.loadSubpanelStatistics(e),this.parseParams(i)}))}clear(){this.cache$=null,this.clearSubpanels(),this.subpanelsState.unsubscribe(),this.updateState((0,c.deepClone)(Xv))}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.recordStore.save().pipe((0,o.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,r.of)({}))),(0,o.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1),this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!1})),"cb2b_pmsprofiles"===this.getModuleName().toLowerCase()&&window.location.reload()}))}load(e=!0){return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,o.tap)(e=>{this.updateState(Object.assign(Object.assign({},this.internalState),{recordID:e.id,module:e.module,loading:!1}))}))}getSummaryTemplate(){return(((this.metadata||{}).recordView||{}).summaryTemplates||{})[this.getMode()]||""}parseParams(e={}){if(!e)return;const t=Object.assign({},this.internalState.params);Object.keys(e).forEach(n=>{(0,c.isVoid)(t[n])||(t[n]=e[n])}),this.params=e}loadSubpanelStatistics(e){const t=this.subpanelsState.value;if(!t)return;const n={};Object.keys(t).forEach(e=>{const i=t[e],r=i.statistics;if(!r||!Object.keys(r).length)return;if(!1===i.shouldBatchStatistic())return void i.loadAllStatistics().pipe((0,o.take)(1)).subscribe();const s=i.getAllStatisticQuery();Object.keys(s).forEach(t=>{const i=this.buildStatKey(e,t);n[i]=s[t]}),i.setAllStatisticsLoading(!0)}),this.statisticsBatch.fetch(e,n).pipe((0,o.take)(1)).subscribe(e=>{Object.keys(t).forEach(n=>{const i=t[n],r=i.getAllStatisticQuery();Object.keys(r).forEach(t=>{const r=this.buildStatKey(n,t),o=e[r];!o||i.setStatistics(t,o,!0)}),i.setAllStatisticsLoading(!1)})})}buildStatKey(e,t){return(e=e.replace(/_/g,"-"))+"-"+t.replace(/_/g,"-")}updateState(e){this.store.next(this.internalState=e)}initSubpanels(e,t){this.showSubpanels=!0,this.metadataStore.subPanelMetadata$.subscribe(n=>{this.clearSubpanels(),Object.keys(n).forEach(i=>{this.subpanels[i]=this.subpanelFactory.create(),this.subpanels[i].init(e,t,n[i],this.record$)}),this.subpanelsState.next(this.subpanels),Object.keys(this.subpanels).forEach(e=>{this.subpanelReloadSub.push(this.subpanels[e].recordList.records$.pipe((0,o.tap)(()=>{const t={};t[e]=!0,this.subpanelReloadSubject.next(t)})).subscribe())})})}clearSubpanels(){this.subpanels&&Object.keys(this.subpanels).forEach(e=>{this.subpanels[e].clear()}),this.subpanelReloadSub.length&&(this.subpanelReloadSub.forEach(e=>e.unsubscribe()),this.subpanelReloadSub=[]),this.subpanels={}}calculateShowWidgets(){var e;let t=!1;const n=this.getRecordViewMetadata().sidebarWidgets||[];n&&n.length>0&&(t=!0);const i=null!==(e=this.loadPreference(this.getModuleName(),"show-sidebar-widgets"))&&void 0!==e?e:null;this.showSidebarWidgets=null!==i?i:t,this.widgets=t}getRecordViewMetadata(){return(this.metadataStore.get()||{}).recordView||{}}getVardefs(){return this.getRecordViewMetadata().vardefs||{}}getViewFieldsObservable(){return this.metadataStore.recordViewMetadata$.pipe((0,o.map)(e=>{const t=[];return e.panels.forEach(e=>{e.rows.forEach(e=>{e.cols.forEach(e=>{t.push(e)})})}),t}))}getPreferenceKey(e){return"recordview-"+e}savePreference(e,t,n){this.preferences.setUi(e,this.getPreferenceKey(t),n)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gv),i.\u0275\u0275inject(zv),i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(Fl),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(io),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Kv),i.\u0275\u0275inject(Iu),i.\u0275\u0275inject(Hv),i.\u0275\u0275inject(Yv),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function ey(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275elementStart(2,"div",4),i.\u0275\u0275element(3,"div",5),i.\u0275\u0275elementStart(4,"div",6),i.\u0275\u0275elementStart(5,"div",7),i.\u0275\u0275elementStart(6,"div"),i.\u0275\u0275text(7,"Record Status Bar Component"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function ty(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3,"Record Status Bar Component"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}let ny=(()=>{class e{constructor(e,t){this.recordViewStore=e,this.moduleNavigation=t,this.displayResponsiveTable=!1}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Jv),i.\u0275\u0275directiveInject(Fl))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-status-bar"]],decls:4,vars:2,consts:[[1,"record-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"w-100"],[1,"col"],[1,"order-2"],[1,"row","mr-0"],[1,"col-md-4"]],template:function(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",0),i.\u0275\u0275template(2,ey,8,0,"ng-container",1),i.\u0275\u0275template(3,ty,4,0,"ng-template",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.displayResponsiveTable),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.displayResponsiveTable))},directives:[p.NgIf],encapsulation:2}),e})(),iy=(()=>{class e extends Xl{constructor(e){super(e),this.apollo=e}get(e,t,n,i){return super.get(e,t,n,i)}mapRecord(e){if(!e)return e;e.key=e.id||e.attributes&&e.attributes.id||"";const t=e.attributes&&e.attributes&&e.attributes.contents||null;if(t){const n=Object.assign({},e);return n.criteria=t,n}return e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ry=(()=>{class e extends rc{constructor(e,t,n,i,r,o,s,a){super(e,t,n,i,r,o),this.listGQL=e,this.configs=t,this.preferences=n,this.appState=i,this.language=r,this.message=o,this.auth=s,this.moduleNameMapper=a,this.moduleName="saved-search",this.filterFields={module:"search_module",user:"assigned_user_id"}}init(e){const t=super.init(this.moduleName,!1);return this.initCriteria(e),t}load(e=!0){return super.load(e)}getFilters(){return this.records}addFilter(e){let t=!0;const n=[];this.records.forEach(i=>{if(i.id===e.id)return n.push(e),void(t=!1);n.push(i)}),t&&n.push(e),this.updateState(Object.assign(Object.assign({},this.internalState),{records:n}))}removeFilter(e){if(!e||!e.id)return;const t=[];this.records.forEach(n=>{n.id!==e.id&&t.push(n)}),this.updateState(Object.assign(Object.assign({},this.internalState),{records:t}))}initCriteria(e){const t=this.criteria;t.filters[this.filterFields.module]={field:this.filterFields.module,operator:"=",values:[this.moduleNameMapper.toLegacy(e)]},t.filters[this.filterFields.user]={field:this.filterFields.user,operator:"=",values:[this.auth.getCurrentUser().id]},this.updateSearchCriteria(t,!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(iy),i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Kp),i.\u0275\u0275inject(jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),oy=(()=>{class e{constructor(e,t,n,i,r,o,s,a){this.listGQL=e,this.configs=t,this.preferences=n,this.appState=i,this.language=r,this.message=o,this.auth=s,this.moduleNameMapper=a}create(){return new ry(this.listGQL,this.configs,this.preferences,this.appState,this.language,this.message,this.auth,this.moduleNameMapper)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(iy),i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Kp),i.\u0275\u0275inject(jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),sy=(()=>{class e{constructor(e){this.modalService=e}showModal(e,t){const n=this.modalService.open(Ec);n.componentInstance.textKey=null!=e?e:"LBL_GENERIC_CONFIRMATION",n.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:e=>e.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:e=>{t(),e.close()}}]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(I.NgbModal))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ay={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},ly={default:(0,c.deepClone)(ay)},cy={module:"",widgets:!0,actionPanel:"",showSidebarWidgets:!1,recordPanelConfig:{},activeFilters:(0,c.deepClone)(ly),openFilter:(0,c.deepClone)(ay)};let dy=(()=>{class e extends Zv{constructor(e,t,n,i,s,a,l,d,u,p,h,m){super(e,t,n,i,s),this.appStateStore=e,this.languageStore=t,this.navigationStore=n,this.moduleNavigation=i,this.metadataStore=s,this.localStorage=a,this.message=l,this.listStoreFactory=d,this.modalService=u,this.filterListStoreFactory=p,this.confirmation=h,this.preferences=m,this.cache$=null,this.internalState=(0,c.deepClone)(cy),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.recordList=this.listStoreFactory.create(),this.columns$=s.listViewColumns$,this.lineActions$=s.listViewLineActions$,this.records$=this.recordList.records$,this.criteria$=this.recordList.criteria$,this.context$=this.recordList.criteria$.pipe((0,o.map)(()=>this.getViewContext())),this.sort$=this.recordList.sort$,this.pagination$=this.recordList.pagination$,this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$,this.loading$=this.recordList.loading$,this.moduleName$=this.state$.pipe((0,o.map)(e=>e.module),(0,o.distinctUntilChanged)()),this.widgets$=this.state$.pipe((0,o.map)(e=>e.widgets),(0,o.distinctUntilChanged)()),this.showSidebarWidgets$=this.state$.pipe((0,o.map)(e=>e.showSidebarWidgets)),this.displayFilters$=this.state$.pipe((0,o.map)(e=>"filters"===e.actionPanel),(0,o.distinctUntilChanged)()),this.actionPanel$=this.state$.pipe((0,o.map)(e=>e.actionPanel),(0,o.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,o.map)(e=>e.activeFilters),(0,o.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,o.map)(e=>e.openFilter),(0,o.distinctUntilChanged)());const f=(0,r.combineLatest)([this.records$,this.criteria$,this.pagination$,this.selection$,this.loading$]).pipe((0,o.map)(([e,t,n,i,r])=>(this.data={records:e,criteria:t,pagination:n,selection:i,loading:r},this.data)));this.vm$=(0,r.combineLatest)([f,this.appData$,this.metadata$]).pipe((0,o.map)(([e,t,n])=>(this.vm={data:e,appData:t,metadata:n},this.vm))),this.columns=new r.BehaviorSubject([]),this.columns$=this.columns.asObservable(),this.initDataUpdateState(),this.initDataSetUpdatedState(),this.filterList=this.filterListStoreFactory.create()}get actionPanel(){return this.internalState.actionPanel}get showFilters(){return"filters"===this.internalState.actionPanel}set showFilters(e){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:e?"filters":""}))}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState(Object.assign(Object.assign({},this.internalState),{widgets:e}))}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState(Object.assign(Object.assign({},this.internalState),{showSidebarWidgets:e}))}get recordPanelConfig(){return this.internalState.recordPanelConfig}isRecordPanelOpen(){return"recordPanel"===this.internalState.actionPanel}openRecordPanel(e){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:"recordPanel",recordPanelConfig:e}))}closeRecordPanel(){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:"",recordPanelConfig:{}}))}getModuleName(){return this.internalState.module}getViewContext(){const e={module:this.getModuleName()};return e.criteria=this.recordList.criteria,e.sort=this.recordList.sort,e}destroy(){this.clear(),this.subs.forEach(e=>e.unsubscribe())}get activeFilters(){return(0,c.deepClone)(this.internalState.activeFilters)}clear(){this.cache$=null,this.updateState((0,c.deepClone)(cy)),this.recordList.clear()}clearAuthBased(){this.clear(),this.recordList.clearAuthBased()}init(e){var t,n,i,r,s,a;return this.internalState.module=e,this.recordList.init(e,!1),this.filterList.init(e),this.filterList.load(!1).pipe((0,o.take)(1)).subscribe(),this.calculateShowWidgets(),this.recordList.sort={orderBy:null!==(i=null===(n=null===(t=null==this?void 0:this.metadata)||void 0===t?void 0:t.listView)||void 0===n?void 0:n.orderBy)&&void 0!==i?i:"",sortOrder:null!==(a=null===(s=null===(r=null==this?void 0:this.metadata)||void 0===r?void 0:r.listView)||void 0===s?void 0:s.sortOrder)&&void 0!==a?a:"NONE"},this.loadCurrentFilter(e),this.loadCurrentSort(e),this.loadCurrentDisplayedColumns(),this.load()}setOpenFilter(e){this.updateState(Object.assign(Object.assign({},this.internalState),{openFilter:(0,c.deepClone)(e)}))}setFilters(e,t=!0,n=null){var i,r;const o=e[Object.keys(e).shift()];if(this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,c.deepClone)(e),openFilter:(0,c.deepClone)(o)})),o.criteria){let e=null!==(i=o.criteria.orderBy)&&void 0!==i?i:"";const t=null!==(r=o.criteria.sortOrder)&&void 0!==r?r:"";let s=this.recordList.mapSortOrder(t);null!==n&&(e=n.orderBy,s=n.sortOrder),this.recordList.updateSorting(e,s,!1),this.updateSortLocalStorage()}this.updateSearchCriteria(t)}addSavedFilter(e){const t=Object.assign({},this.internalState),n=this.activeFilters;e.key&&n[e.key]&&(n[e.key]=e,t.activeFilters=n),t.openFilter=e,this.filterList.addFilter(e),this.updateState(t)}removeSavedFilter(e){if(!e||!e.key)return;this.filterList.removeFilter(e);const t=Object.assign({},this.internalState);t.openFilter&&t.openFilter.key===e.key&&this.resetFilters(!0)}resetFilters(e=!0){this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,c.deepClone)(ly),openFilter:(0,c.deepClone)(ay)})),this.recordList.clearSort(),this.updateSortLocalStorage(),this.updateSearchCriteria(e)}updateSearchCriteria(e=!0){const t=Object.assign({},this.internalState.activeFilters),n=Object.keys(t).shift();this.recordList.updateSearchCriteria(t[n].criteria,e),this.updateFilterLocalStorage()}updateFilterLocalStorage(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}updateSortLocalStorage(){this.savePreference(this.internalState.module,"current-sort",this.recordList.sort)}updateDisplayedColumnsPreference(e){this.savePreference(this.internalState.module,"displayed-columns",e)}getDisplayedColumnsPreference(){const e=this.loadPreference(this.internalState.module,"displayed-columns");return(0,d.isArray)(e)&&e&&e.length?e:null}triggerDataUpdate(){this.dataUpdateState.next(!0)}load(e=!0){const t=this.internalState.module;return this.savePreference(t,"current-filters",this.internalState.activeFilters),this.savePreference(t,"current-sort",this.recordList.sort),this.recordList.load(e)}updateState(e){this.store.next(this.internalState=e)}openColumnChooserDialog(){const e=this.modalService.open(oa,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"column-chooser-modal"}),t=this.columns.getValue().filter(function(e){return!e.hasOwnProperty("default")||e.hasOwnProperty("default")&&!0===e.default}),n=this.columns.getValue().filter(function(e){return e.hasOwnProperty("default")&&!1===e.default});e.componentInstance.displayed=t,e.componentInstance.hidden=n,e.result.then(e=>{if(!e.displayed||!e.hidden)return;let t=[];const n=e.displayed,i=e.hidden;n.forEach(function(e){e.default=!0}),i.forEach(function(e){e.default=!1}),t.push(...n,...i),this.columns.next(t);const r=n.map(e=>e.name);this.updateDisplayedColumnsPreference(r)})}calculateShowWidgets(){var e;let t=!1;const n=((this.metadataStore.get()||{}).listView||{}).sidebarWidgets||[];n&&n.length>0&&(t=!0);const i=null!==(e=this.loadPreference(this.getModuleName(),"show-sidebar-widgets"))&&void 0!==e?e:null;this.showSidebarWidgets=null!==i?i:t,this.widgets=t}getPreferenceKey(e){return"listview-"+e}savePreference(e,t,n){this.preferences.setUi(e,this.getPreferenceKey(t),n)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}loadCurrentFilter(e){var t;const n=null!==(t=this.loadPreference(e,"current-filters"))&&void 0!==t?t:{};if(!n||(0,c.emptyObject)(n))return;let i=this.loadPreference(e,"current-sort");!i&&(0,c.emptyObject)(i)&&(i=null),this.setFilters(n,!1,i)}loadCurrentSort(e){const t=this.loadPreference(e,"current-sort");!t||(0,c.emptyObject)(t)||(this.recordList.sort=t)}loadCurrentDisplayedColumns(){this.metadataStore.listViewColumns$.pipe((0,o.take)(1)).subscribe(e=>{const t=this.getDisplayedColumnsPreference();if(!t||!e)return void this.columns.next(e);const n={};t.forEach(e=>{n[e]=!0});const i={},r=[];e.forEach(e=>{var t;e.default=null!==(t=n[e.name])&&void 0!==t&&t,e.default?i[e.name]=e:r.push(e)});const o=t.filter(e=>!!i[e]).map(e=>i[e]);this.columns.next([...o,...r])})}initDataUpdateState(){this.dataUpdateState=new r.BehaviorSubject(!0),this.dataUpdate$=this.dataUpdateState.asObservable()}initDataSetUpdatedState(){this.dataSetUpdate$=(0,r.combineLatest)([this.criteria$,this.dataUpdate$]).pipe((0,o.map)(()=>!0))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(Fl),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(io),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(oc),i.\u0275\u0275inject(I.NgbModal),i.\u0275\u0275inject(oy),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function uy(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275element(1,"scrm-button-group",2),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("config$",e.config$)}}let py=(()=>{class e{constructor(e,t,n,i){this.listStore=e,this.actionHandler=t,this.screenSize=n,this.systemConfigs=i,this.configState=new r.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.vm$=(0,r.combineLatest)([this.screenSize.screenSize$]).pipe((0,o.map)(([e])=>(e&&(this.screen=e),this.configState.next(this.getButtonGroupConfig()),{screenSize:e}))),this.screen=Oo.Medium,this.defaultBreakpoint=3}ngOnInit(){this.configState.next(this.getButtonGroupConfig())}getButtonGroupConfig(){const e=this.actions,t={buttonKlass:["action-button"],dropdownLabel:this.listStore.appStrings.LBL_MORE||"",buttons:[],dropdownOptions:{placement:["bottom-right"]},breakpoint:this.getBreakpoint()};return e.forEach(e=>{const n=this.getButtonConfig(e);n&&n.klass&&t.buttons.push(n)}),t}getBreakpoint(){const e=this.systemConfigs&&this.systemConfigs.getConfigValue("listview_actions_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}get actions(){return this.listStore.vm.appData.module&&this.listStore.vm.appData.module.menu?this.listStore.vm.appData.module.menu.filter(e=>!("List"===e.name||"View"===e.name)):[]}getButtonConfig(e){if(!this.listStore.vm.appData.appState.module)return{};if(!this.listStore.vm.appData.language)return{};let t="";return e.actionLabelKey&&(t=e.actionLabelKey),{klass:"action-button",label:this.actionHandler.getActionLabel(this.listStore.vm.appData.appState.module,e,this.listStore.vm.appData.language,t),onClick:()=>{this.actionHandler.navigate(e).then()}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(dy),i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(Do),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-action-menu"]],decls:2,vars:3,consts:[["class","list-view-actions float-right",4,"ngIf"],[1,"list-view-actions","float-right"],[3,"config$"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,uy,2,1,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,ls],pipes:[p.AsyncPipe],encapsulation:2}),e})(),hy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,sa,fs,f.AngularSvgIconModule,gs]]}),e})();function my(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-button-group",3),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("config$",e.config$)}}function fy(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,my,1,1,"scrm-button-group",2),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.config$)}}let gy=(()=>{class e{constructor(e,t,n,i){this.listStore=e,this.modalService=t,this.screenSize=n,this.systemConfigStore=i,this.configState=new r.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.vm$=(0,r.combineLatest)([this.listStore.widgets$,this.listStore.displayFilters$,this.listStore.criteria$,this.screenSize.screenSize$,this.listStore.showSidebarWidgets$,this.listStore.filterList.records$]).pipe((0,o.map)(([e,t,n,i,r,o])=>(i&&(this.screen=i),this.configState.next(this.getButtonGroupConfig()),{widgets:e,displayFilters:t,criteria:n,screenSize:i,showSidebarWidgets:r,savedFilters:o}))),this.screen=Oo.Medium,this.defaultBreakpoint=5}ngOnInit(){this.configState.next(this.getButtonGroupConfig())}getButtonGroupConfig(){const e=[{show:()=>this.listStore.filterList.getFilters()&&this.listStore.filterList.getFilters().length>=1,button:this.getMyFiltersButton()},{button:this.getFilterButton()},{show:()=>this.isAnyFilterApplied(),button:this.getClearButton()},{button:this.getColumnChooserButton()},{show:()=>this.listStore.widgets,button:this.getChartsButton()}],t={buttonKlass:["settings-button"],dropdownLabel:this.listStore.appStrings.LBL_OPTIONS||"",breakpoint:this.getBreakpoint(),dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary"]},buttons:[]};return e.forEach(e=>{e.show?e.show()&&t.buttons.push(e.button):t.buttons.push(e.button)}),t}getFilters(){var e,t,n,i;return null!==(i=null===(n=null===(t=null===(e=null==this?void 0:this.listStore)||void 0===e?void 0:e.recordList)||void 0===t?void 0:t.criteria)||void 0===n?void 0:n.filters)&&void 0!==i?i:{}}getCurrentCriteria(){var e,t,n;return null!==(n=null===(t=null===(e=null==this?void 0:this.listStore)||void 0===e?void 0:e.recordList)||void 0===t?void 0:t.criteria)&&void 0!==n?n:{}}hasActiveFilter(){var e;const t=this.listStore.activeFilters;if(!t)return!1;const n=null!==(e=Object.keys(t))&&void 0!==e?e:[];if(!n||!n.length)return!1;if(n.length>1)return!0;const i=t[n[0]];return i.key&&""!==i.key&&"default"!==i.key}areAllCurrentCriteriaFilterEmpty(){var e;return Object.keys(null!==(e=this.getFilters())&&void 0!==e?e:{}).every(e=>""===this.getFilters()[e].operator)}isAnyFilterApplied(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}getBreakpoint(){const e=this.systemConfigStore.getConfigValue("listview_settings_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}getFilterButton(){const e={label:this.listStore.appStrings.LBL_FILTER||"",klass:{"filter-settings-button":!0,active:this.isAnyFilterApplied()},onClick:()=>{this.listStore.showFilters=!this.listStore.showFilters}};return this.isAnyFilterApplied()&&(e.icon="filter"),e}getMyFiltersButton(){const e=this.listStore.filterList.getFilters(),t={label:this.listStore.appStrings.LBL_SAVED_FILTER_SHORTCUT||"",klass:["dropdown-toggle"],wrapperKlass:["filter-action-group"],items:[]},n=this.listStore.activeFilters;let i=!1;return e.forEach(e=>{const r=Object.keys(n).some(t=>t===e.key);i=i||r;const o={label:e.attributes.name,onClick:()=>{if(this.listStore.showFilters=!1,r)this.listStore.resetFilters();else{this.listStore.setOpenFilter(e);const t={};t[e.key]=e,this.listStore.setFilters(t)}}};r&&(o.icon="filter",o.iconKlass="small",o.klass=["active"]),t.items.push(o)}),i&&(t.klass=["dropdown-toggle","active"]),t}getClearButton(){return{label:this.listStore.appStrings.LBL_CLEAR_FILTER||"",onClick:()=>{this.listStore.showFilters=!1,this.listStore.resetFilters()}}}getChartsButton(){return{label:this.listStore.appStrings.LBL_INSIGHTS||"",klass:{active:this.listStore.showSidebarWidgets},icon:"pie",onClick:()=>{this.listStore.showSidebarWidgets=!this.listStore.showSidebarWidgets}}}getDisplayAsButton(){return{label:"Display As",klass:{},items:[]}}getColumnChooserButton(){return{label:this.listStore.appStrings.LBL_COLUMNS||"",klass:{"column-chooser-button":!0},icon:"column_chooser",onClick:()=>{this.listStore.openColumnChooserDialog()}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(dy),i.\u0275\u0275directiveInject(I.NgbModal),i.\u0275\u0275directiveInject(Do),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-settings-menu"]],decls:2,vars:3,consts:[["class","list-view-settings float-right",4,"ngIf"],[1,"list-view-settings","float-right"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,fy,2,1,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,ls],pipes:[p.AsyncPipe],encapsulation:2}),e})(),vy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,aa,Lo,fs,ms,I.NgbModule,gs]]}),e})(),yy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,nv,hy,vy,f.AngularSvgIconModule]]}),e})();function by(e,t){1&e&&i.\u0275\u0275element(0,"th",12)}function Sy(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"td",13),i.\u0275\u0275elementStart(1,"label",14),i.\u0275\u0275elementStart(2,"input",15),i.\u0275\u0275listener("change",function(){const t=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext(3).toggleSelection(t.id)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"span",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2).ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("checked",e.id&&n.selected[e.id]||r.allSelected(n.selectionStatus))("disabled",r.allSelected(n.selectionStatus))}}function Cy(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0,11),i.\u0275\u0275template(1,by,1,0,"th",6),i.\u0275\u0275template(2,Sy,4,2,"td",7),i.\u0275\u0275elementContainerEnd())}function wy(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-sort-button",20),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("state",t.getFieldSort(e))}}function xy(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"th",12),i.\u0275\u0275element(1,"scrm-label",18),i.\u0275\u0275template(2,wy,1,1,"scrm-sort-button",19),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",e.label)("module",t.config.module||""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.config.sort$&&e.sortable)}}function Iy(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"td",13),i.\u0275\u0275element(1,"scrm-field",21),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("mode","list")("type",n.type)("field",r.getField(n,e))("record",e)}}function Ey(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0,17),i.\u0275\u0275template(1,xy,3,3,"th",6),i.\u0275\u0275template(2,Iy,2,4,"td",7),i.\u0275\u0275elementContainerEnd()),2&e&&i.\u0275\u0275property("cdkColumnDef",t.$implicit.name)}function _y(e,t){1&e&&i.\u0275\u0275element(0,"th",12)}function My(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-line-action-menu",23),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("config",t.config.lineActions)("record",e)}}function jy(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"td",13),i.\u0275\u0275template(1,My,1,2,"scrm-line-action-menu",22),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e&&n.config.lineActions)}}function ky(e,t){1&e&&i.\u0275\u0275element(0,"tr",24)}function Ly(e,t){1&e&&i.\u0275\u0275element(0,"tr",25)}function Fy(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"p",26),i.\u0275\u0275element(2,"scrm-label",27),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function Oy(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275element(1,"scrm-loading-spinner",28),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275classProp("m-5",!e.records||0===e.records.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("overlay",!0)}}function Dy(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"table",2),i.\u0275\u0275template(3,Cy,3,0,"ng-container",3),i.\u0275\u0275template(4,Ey,3,1,"ng-container",4),i.\u0275\u0275elementContainerStart(5,5),i.\u0275\u0275template(6,_y,1,0,"th",6),i.\u0275\u0275template(7,jy,2,1,"td",7),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275template(8,ky,1,0,"tr",8),i.\u0275\u0275template(9,Ly,1,0,"tr",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(10,Fy,3,0,"div",0),i.\u0275\u0275template(11,Oy,2,3,"div",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("dataSource",n.config.dataSource),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.selection),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.columns),i.\u0275\u0275advance(4),i.\u0275\u0275property("cdkHeaderRowDef",e.displayedColumns),i.\u0275\u0275advance(1),i.\u0275\u0275property("cdkRowDefColumns",e.displayedColumns),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.loading&&0===e.records.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.loading)}}let Ay=(()=>{class e{constructor(e,t){this.fieldManager=e,this.loadingBufferFactory=t,this.maxColumns=4,this.subs=[],this.loadingBuffer=this.loadingBufferFactory.create("table_loading_display_delay")}ngOnInit(){const e=this.config.selection$||(0,r.of)(null).pipe((0,o.shareReplay)(1));let t=this.initLoading();this.vm$=(0,r.combineLatest)([this.config.columns,e,this.config.maxColumns$,this.config.dataSource.connect(null),t]).pipe((0,o.map)(([e,t,n,i,r])=>{const o=[];t&&o.push("checkbox"),this.maxColumns=n;const s=this.buildDisplayColumns(e);return o.push(...s),o.push("line-actions"),{columns:e,selection:t,selected:t&&t.selected||{},selectionStatus:t&&t.status||c.SelectionStatus.NONE,displayedColumns:o,records:i||[],loading:r}}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}toggleSelection(e){this.config.toggleRecordSelection(e)}allSelected(e){return e===c.SelectionStatus.ALL}buildDisplayColumns(e){let t=0,n=!1;const i=[],r=e.filter(function(e){return!e.hasOwnProperty("default")||e.hasOwnProperty("default")&&!0===e.default});for(;t<this.maxColumns&&t<r.length;)i.push(r[t].name),n=n||r[t].link,t++;if(!n&&this.maxColumns<r.length)for(t=this.maxColumns;t<r.length;t++)if(r[t].link){i.splice(-1,1),i.push(r[t].name);break}return i}getFieldSort(e){return{getSortDirection:()=>this.config.sort$.pipe((0,o.map)(t=>{let n=c.SortDirection.NONE;return t.orderBy===e.name&&(n=t.sortOrder),n})),changeSortDirection:t=>{this.config.updateSorting(e.name,t)}}}getField(e,t){return e&&t?this.fieldManager.addField(t,e):null}initLoading(){let e=(0,r.of)(!1).pipe((0,o.shareReplay)(1));return this.config.loading$&&(this.subs.push(this.config.loading$.subscribe(e=>{this.loadingBuffer.updateLoading(e)})),e=this.loadingBuffer.loading$),e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(xu),i.\u0275\u0275directiveInject(Xr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-table-body"]],inputs:{config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"position-relative","d-flex","flex-column"],["cdk-table","","aria-describedby","table-body",1,"list-view-table","striped-table","table",3,"dataSource"],["cdkColumnDef","checkbox",4,"ngIf"],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["cdkColumnDef","line-actions"],["cdk-header-cell","","scope","col","class","primary-table-header",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],[3,"m-5",4,"ngIf"],["cdkColumnDef","checkbox"],["cdk-header-cell","","scope","col",1,"primary-table-header"],["cdk-cell",""],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","disabled","change"],[1,"checkmark"],[3,"cdkColumnDef"],[3,"labelKey","module"],[3,"state",4,"ngIf"],[3,"state"],[3,"mode","type","field","record"],[3,"config","record",4,"ngIf"],[3,"config","record"],["cdk-header-row",""],["cdk-row",""],[1,"lead","text-center","pt-3"],["labelKey","MSG_LIST_VIEW_NO_RESULTS_BASIC"],[3,"overlay"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Dy,12,7,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,Br.CdkTable,p.NgForOf,Br.CdkColumnDef,Br.CdkHeaderCellDef,Br.CdkCellDef,Br.CdkHeaderRowDef,Br.CdkRowDef,Br.CdkHeaderCell,Br.CdkCell,To,$v,Ju,Vg,Br.CdkHeaderRow,Br.CdkRow,Ug],pipes:[p.AsyncPipe],encapsulation:2}),e})();function Ny(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-bulk-action-menu",5),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function Ry(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-pagination",6),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("state",e.pagination)}}let Ty=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-table-header"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination"},decls:5,vars:2,consts:[[1,"list-view-tableactions","table-header"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"state",4,"ngIf"],[3,"selectionSource","actionSource"],[3,"state"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,Ny,1,2,"scrm-bulk-action-menu",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,Ry,1,1,"scrm-pagination",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.selection&&t.bulkActions),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.pagination))},directives:[p.NgIf,bs,sv],encapsulation:2}),e})();function Py(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-bulk-action-menu",5),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function By(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-pagination",6),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("state",e.pagination)}}let $y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-table-footer"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination"},decls:5,vars:2,consts:[[1,"list-view-tableactions","table-footer"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"state",4,"ngIf"],[3,"selectionSource","actionSource"],[3,"state"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,Py,1,2,"scrm-bulk-action-menu",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,By,1,1,"scrm-pagination",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.selection&&t.bulkActions),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.pagination))},directives:[p.NgIf,bs,sv],encapsulation:2}),e})();function Vy(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-table-header",2),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("selection",e.config.selection)("bulkActions",e.config.bulkActions)("pagination",e.config.pagination)}}function zy(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-table-footer",2),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("selection",e.config.selection)("bulkActions",e.config.bulkActions)("pagination",e.config.pagination)}}let Uy=(()=>{class e{showHeader(){return this.config.showHeader}showFooter(){return this.config.showFooter}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-table"]],inputs:{config:"config"},decls:4,vars:6,consts:[[3,"selection","bulkActions","pagination",4,"ngIf"],[3,"config"],[3,"selection","bulkActions","pagination"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,Vy,1,3,"scrm-table-header",0),i.\u0275\u0275element(2,"scrm-table-body",1),i.\u0275\u0275template(3,zy,1,3,"scrm-table-footer",0),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275classMap(t.config&&t.config.klass||""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showHeader()),i.\u0275\u0275advance(1),i.\u0275\u0275property("config",t.config),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showFooter()))},directives:[p.NgIf,Ay,Ty,$y],encapsulation:2}),e})(),Ky=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,av,Ss,f.AngularSvgIconModule]]}),e})(),Zy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,f.AngularSvgIconModule,Br.CdkTableModule,pp,Vv,zg,Kg,hs]]}),e})(),Gy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,av,Ss,f.AngularSvgIconModule]]}),e})(),Hy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Ky,Zy,Gy,f.AngularSvgIconModule]]}),e})();class Wy extends c.ActionHandler{checkRecordAccess(e,t=[]){var n,i,r;const o=null!==(i=(null!==(n=e.record)&&void 0!==n?n:{}).acls)&&void 0!==i?i:[];if(!o||!o.length)return!1;const s=null!==(r=e.action)&&void 0!==r?r:null;return this.checkAccess(s,o,t)}}let qy=(()=>{class e extends Wy{constructor(e,t){super(),this.moduleNameMapper=e,this.router=t,this.key="create",this.modes=["list"]}run(e,t=null){const n=t.params.create||{},i={};i.return_module=n.legacyModuleName,i.return_action=n.returnAction,i.return_id=e.record.id,i[n.mapping.moduleName]=n.legacyModuleName,i[n.mapping.name]=e.record.attributes.name,i[n.mapping.id]=e.record.id,this.router.navigate(["/"+n.module+"/"+n.action],{queryParams:i}).then()}shouldDisplay(e){return!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(jl),i.\u0275\u0275inject(u.Router))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Qy=(()=>{class e extends Wy{constructor(){super(),this.key="async-process",this.modes=c.ALL_VIEW_MODES}run(e){}shouldDisplay(e){var t,n;const i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Yy=(()=>{class e extends Ia{constructor(e,t){super(),this.createRelated=e,this.async=t,e.modes.forEach(t=>this.actions[t][e.key]=e),t.modes.forEach(e=>this.actions[e][t.key]=t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(qy),i.\u0275\u0275inject(Qy))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Xy{constructor(e,t,n,i,r,o,s){this.actionManager=e,this.asyncActionService=t,this.message=n,this.confirmation=i,this.language=r,this.selectModalService=o,this.metadata=s,this.defaultActions={detail:[],list:[],edit:[],create:[],massupdate:[]}}runAction(e,t=null){const n=e&&e.params||{},i=e.params&&e.params.selectModal,r=i&&i.module;n.displayConfirmation?this.confirmation.showModal(n.confirmationLabel||"",()=>{r?this.showSelectModal(i.module,e,t):this.callAction(e,t)}):r?this.showSelectModal(i.module,e,t):this.callAction(e,t)}showSelectModal(e,t,n=null){this.selectModalService.showSelectModal(e,e=>{if(e){const n=(0,m._T)(e,["fields","formGroup"]);t.params.modalRecord=n}this.callAction(t,n)})}getActionName(e){return`${e.key}`}parseModeActions(e,t,n=null){if(!e)return[];const i={list:[],detail:[],edit:[],create:[],massupdate:[]};e&&e.length&&e.forEach(e=>{!e.modes||!e.modes.length||e.modes.forEach(t=>{!i[t]&&!e.asyncProcess||i[t].push(e)})}),i.detail=i.detail.concat(this.defaultActions.detail),i.list=i.list.concat(this.defaultActions.list),i.edit=i.edit.concat(this.defaultActions.edit),i.create=i.create.concat(this.defaultActions.create),i.massupdate=i.massupdate.concat(this.defaultActions.massupdate);const r=[];return i[t].forEach(e=>{if(this.actionManager.getHandler(e,t)){const i=this.actionManager.getHandler(e,t),r=this.buildActionData(e,n);if(!this.shouldDisplay(i,r))return;e.status=i.getStatus(r)||""}const i=this.language.getFieldLabel(e.labelKey,n&&n.module||"");r.push(Object.assign(Object.assign({},e),{label:i}))}),r}shouldDisplay(e,t){return e&&e.shouldDisplay(t)}callAction(e,t=null){e.asyncProcess?this.runAsyncAction(e,t):this.runFrontEndAction(e,t)}runAsyncAction(e,t=null){const n=this.getActionName(e),i=this.getModuleName(t);this.message.removeMessages();const r=this.buildActionInput(e,n,i,t);this.asyncActionService.run(n,r).pipe((0,o.take)(1)).subscribe(o=>{this.afterAsyncAction(n,i,r,o,e,t)})}afterAsyncAction(e,t,n,i,r,o){this.shouldReload(i)&&this.reload(r,i,o),this.reloadMetadata(t,r,i,o)}reloadMetadata(e,t,n,i){const r=[];this.shouldReloadRecentlyViewed(n)&&r.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(n)&&r.push(this.metadata.typeKeys.favorites),r&&r.length&&this.metadata.reloadModuleMetadata(e,r,!1).pipe((0,o.take)(1)).subscribe()}shouldReloadRecentlyViewed(e){return!(!e.data||!e.data.reloadRecentlyViewed)}shouldReloadFavorites(e){return!(!e.data||!e.data.reloadFavorites)}shouldReload(e){return!(!e.data||!e.data.reload)}runFrontEndAction(e,t=null){const n=this.buildActionData(e,t);this.actionManager.run(e,this.getMode(),n)}}let Jy=(()=>{class e{constructor(e,t,n){this.languageStore=e,this.message=t,this.modalService=n}showSelectModal(e,t=null){const n=this.modalService.open(Cc,{size:"xl",scrollable:!0});n.componentInstance.module=e,n.result.then(e=>{if(!e||!e.selection||!e.selection.selected)return;const n=this.getSelectedRecord(e);if(n.id)null!==t&&t(n);else{let e=this.languageStore.getFieldLabel("ERROR_NO_RECORD");this.message.addDangerMessage(e)}})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(e=>(t=e,!0));let n=null;return e.records.some(e=>{if(e&&e.id===t)return n=e,!0}),n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(I.NgbModal))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),eb=(()=>{class e extends Xy{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,o,s),this.actionManager=e,this.asyncActionService=t,this.message=n,this.confirmation=i,this.language=r,this.selectModalService=o,this.metadata=s}getActionName(e){return`record-${e.key}`}buildActionInput(e,t,n,i=null){return{action:t,module:n,id:i&&i.record&&i.record.id||"",params:e&&e.params||[]}}}return e.\u0275fac=function(e){i.\u0275\u0275invalidFactory()},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),tb=(()=>{class e extends eb{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,o,s),this.actionManager=e,this.asyncActionService=t,this.message=n,this.confirmation=i,this.language=r,this.selectModalService=o,this.metadata=s}buildActionData(e,t){return{record:t&&t.record||null,action:e}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Yy),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),nb=(()=>{class e{constructor(e){this.http=e,this.model=null}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(mr.HttpClient))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-user-action-menu-ui"]],decls:5,vars:3,template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"p"),i.\u0275\u0275text(1," user-action-menu works!\n"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"pre"),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"json"),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(4,1,t.model)))},pipes:[p.JsonPipe],encapsulation:2}),e})(),ib=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,f.AngularSvgIconModule]]}),e})(),rb=(()=>{class e{constructor(e,t){this.metadata=e,this.processService=t}build(e,t){return(0,c.deepClone)({module:"Favorite",type:"Favorite",attributes:{parent_id:t,parent_type:e}})}add(e,t){this.update(e,t,"add")}remove(e,t){this.update(e,t,"remove")}update(e,t,n){const i={favorite:t,action:n};setTimeout(()=>{this.processService.submit("update-favorite",i).pipe((0,o.take)(1)).subscribe(n=>{var i,r;const o=null!==(r=null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.favorite)&&void 0!==r?r:null;null!==o?this.addFavoriteToMetadata(o,e):this.removeFavoriteFromMetadata(e,t)})},100)}addFavoriteToMetadata(e,t){var n,i,r,o,s,a;const l={id:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:"",module:null!==(i=null==e?void 0:e.module)&&void 0!==i?i:"",attributes:Object.assign({},null!==(r=null==e?void 0:e.attributes)&&void 0!==r?r:{})},c=null!==(s=null===(o=null==e?void 0:e.attributes)||void 0===o?void 0:o.parent_id)&&void 0!==s?s:"",d=this.metadata.getModuleMeta(t),u=null!==(a=null==d?void 0:d.favorites)&&void 0!==a?a:null;if(u){let e=u.filter(e=>{var t,n;return(null!==(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.parent_id)&&void 0!==n?n:"")!==c});e.unshift(l),d.favorites=e}this.metadata.setModuleMetadata(t,d)}removeFavoriteFromMetadata(e,t){var n,i,r;const o=this.metadata.getModuleMeta(e),s=null!==(n=null==o?void 0:o.favorites)&&void 0!==n?n:null,a=null!==(r=null===(i=null==t?void 0:t.attributes)||void 0===i?void 0:i.parent_id)&&void 0!==r?r:null;!s||!s.length||!a||(o.favorites=s.filter(e=>{var t,n;return(null!==(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.parent_id)&&void 0!==n?n:"")!==a}),this.metadata.setModuleMetadata(e,o))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(pc),i.\u0275\u0275inject(so))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ob=(()=>{class e{constructor(){this.buffer=new r.Subject,this.buffer$=this.buffer.asObservable(),this.enabled=!0,this.subs=[],this.debounceTime=1e3}init(e=1e3){this.debounceTime=e,this.subs.push(this.buffer$.pipe((0,o.debounceTime)(this.debounceTime)).subscribe(()=>{this.enabled=!0}))}destroy(){this.subs.forEach(e=>e.unsubscribe())}debounce(e){!e||!this.enabled||(this.enabled=!1,e(),this.buffer.next(!0))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function sb(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-button",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.addButton)}}function ab(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-button",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.removeButton)}}let lb=(()=>{class e{constructor(e){this.handler=e,this.favorite=!1}ngOnInit(){var e,t;!this.record||(this.debounceService=new ob,this.debounceService.init(),this.favorite=null!==(t=null===(e=null==this?void 0:this.record)||void 0===e?void 0:e.favorite)&&void 0!==t&&t,this.addButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-off"],onClick:()=>{this.debounceService.debounce(()=>{this.add()})},icon:"star"},this.removeButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-on"],onClick:()=>{this.debounceService.debounce(()=>{this.remove()})},icon:"star"})}ngOnDestroy(){this.debounceService.destroy()}add(){this.record.favorite=!0,this.favorite=!0;const e=this.handler.build(this.record.module,this.record.id);this.handler.add(this.record.module,e)}remove(){this.record.favorite=!1,this.favorite=!1;const e=this.handler.build(this.record.module,this.record.id);this.handler.remove(this.record.module,e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(rb))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-favorite-toggle"]],inputs:{record:"record"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"config"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,sb,2,1,"ng-container",0),i.\u0275\u0275template(1,ab,2,1,"ng-container",0)),2&e&&(i.\u0275\u0275property("ngIf",!t.favorite),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.favorite))},directives:[p.NgIf,Vo],encapsulation:2}),e})(),cb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs]]}),e})();class db extends c.ActionHandler{}let ub=(()=>{class e extends db{constructor(e){super(),this.message=e,this.key="save",this.modes=["edit"]}run(e){e.store.validate().pipe((0,o.take)(1)).subscribe(t=>{t?e.store.save().pipe((0,o.take)(1)).subscribe(t=>{e.listFilterStore.config.addSavedFilter(e.store.recordStore.extractBaseRecord(t)),e.listFilterStore.applyFilter(),this.message.addSuccessMessageByKey("LBL_SAVED_FILTER_SAVED")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pb=(()=>{class e extends db{constructor(e,t){super(),this.message=e,this.asyncActionService=t,this.key="delete",this.modes=["edit","detail"]}run(e){const t=`record-${this.key}`,n=e.store.getBaseRecord()||{};n.id?(this.message.removeMessages(),this.asyncActionService.run(t,{action:t,module:n.module,id:n.id},"noop").pipe((0,o.take)(1)).subscribe(()=>{e.listFilterStore.config.removeSavedFilter(n)})):this.message.addWarningMessageByKey("LBL_FILTER_ID_NOT_DEFINED")}shouldDisplay(e){const t=e&&e.store;return!!(t&&t.recordStore.getBaseRecord()||{}).id}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Ng))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),hb=(()=>{class e extends Ia{constructor(e,t){super(),e.modes.forEach(t=>this.actions[t][e.key]=e),t.modes.forEach(e=>this.actions[e][t.key]=t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ub),i.\u0275\u0275inject(pb))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const mb={id:"",type:"",module:"",attributes:{}};class fb extends qv{constructor(e,t,n,i,s,a,l,d){super(e,t,n,i,s,a),this.definitions$=e,this.recordSaveGQL=t,this.recordFetchGQL=n,this.message=i,this.recordManager=s,this.recordMappers=a,this.fieldManager=l,this.language=d,this.internalState=(0,c.deepClone)(mb),this.stagingState=(0,c.deepClone)(mb),this.store=new r.BehaviorSubject(this.internalState),this.staging=new r.BehaviorSubject(this.stagingState),this.searchFields={},this.listColumns=[],this.state$=this.store.asObservable().pipe((0,o.tap)(e=>{this.updateStaging(e)})),this.staging$=this.staging.asObservable()}getSearchFields(){return this.searchFields}setSearchFields(e){this.searchFields=e}getListColumns(){return this.listColumns}setListColumns(e){this.listColumns=e}getBaseRecord(){return this.stagingState?(this.mapStagingFields(),(0,c.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,key:this.stagingState.key,searchModule:this.stagingState.searchModule,criteria:this.stagingState.criteria,attributes:this.stagingState.attributes})):null}extractBaseRecord(e){var t;if(!e)return null;let n=null!==(t=e.criteria)&&void 0!==t?t:{};return Array.isArray(n)&&!n.length&&(n={}),(0,c.deepClone)({id:e.id,type:e.type,module:e.module,key:e.key,searchModule:e.searchModule,criteria:n,attributes:e.attributes})}initRecord(e){var t,n,i;e.attributes=e.attributes||{},e.attributes.search_module=e.searchModule;const r=null!==(i=null===(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.contents)||void 0===n?void 0:n.filters)&&void 0!==i?i:{};e.attributes.contents=e.attributes.contents||{filters:{}},e.attributes.contents.filters=Array.isArray(r)&&!r.length?{}:r,e.criteria=this.getCriteria(e),this.initCriteriaFields(e,this.getSearchFields()),e.module&&this.definitions&&this.definitions.length>0&&(e.fields=this.recordManager.initFields(e,this.definitions)),this.initOrderByOptions(e)}initOrderByOptions(e){if(!e.fields||!e.fields.orderBy)return;e.fields.orderBy.metadata=e.fields.orderBy.metadata||{};const t=[];this.getListColumns().forEach(n=>{if(!n.default||!0!==n.default)return;const i=this.language.getFieldLabel(n.label||n.fieldDefinition.vname||"",e.searchModule);t.push({value:n.fieldDefinition.name||n.name,label:i})}),e.fields.orderBy.metadata.options$=(0,r.of)(t).pipe((0,o.shareReplay)())}getCriteria(e){return e&&e.criteria?e.criteria.filters?Array.isArray(e.criteria.filters)&&!e.criteria.filters.length?Object.assign(Object.assign({},e.criteria),{filters:{}}):(0,c.deepClone)(e.criteria):Object.assign(Object.assign({},e.criteria),{filters:{}}):{filters:{}}}initCriteriaFields(e,t){e.criteriaFields=e.criteriaFields||{},e.criteriaFormGroup||(e.criteriaFormGroup=new h.FormGroup({})),t&&Object.keys(t).forEach(n=>{this.buildField(e,t[n])})}buildField(e,t){const n=t.type,i={name:t.name,label:t.label,type:n,fieldDefinition:{}};t.fieldDefinition&&(i.fieldDefinition=t.fieldDefinition),("bool"===n||"boolean"===n)&&(i.fieldDefinition.options="dom_int_bool"),this.fieldManager.addFilterField(e,i,this.language)}}let gb=(()=>{class e{constructor(e,t,n,i,r,o,s,a){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=n,this.recordManager=i,this.recordMappers=r,this.baseMapper=o,this.fieldManager=s,this.language=a,r.register("default",o.getKey(),o)}create(e){return new fb(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers,this.fieldManager,this.language)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gv),i.\u0275\u0275inject(zv),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Iu),i.\u0275\u0275inject(c.RecordMapperRegistry),i.\u0275\u0275inject(Qv),i.\u0275\u0275inject(xu),i.\u0275\u0275inject(ho))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const vb={module:"",searchModule:"",recordID:"",loading:!1,mode:"detail"};let yb=(()=>{class e{constructor(e,t,n,i,s,a){this.appStateStore=e,this.meta=t,this.message=n,this.fieldManager=i,this.language=s,this.savedFilterStoreFactory=a,this.cache$=null,this.internalState=(0,c.deepClone)(vb),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.metadataLoadingState=new r.BehaviorSubject(!1),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.meta$=this.meta.getMetadata("saved-search",["recordView"]).pipe((0,o.tap)(()=>this.metadataLoadingState.next(!1)),(0,o.map)(e=>e.recordView)),this.recordStore=a.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,o.distinctUntilChanged)(),(0,o.map)(e=>e)),this.stagingRecord$=this.recordStore.staging$.pipe((0,o.distinctUntilChanged)(),(0,o.map)(e=>e)),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading)),this.mode$=this.state$.pipe((0,o.map)(e=>e.mode)),this.vm$=(0,r.combineLatest)([this.stagingRecord$,this.mode$]).pipe((0,o.map)(([e,t])=>(this.vm={record:e,mode:t},this.vm)))}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}destroy(){this.clear()}init(e,t="detail"){this.internalState.module="saved-search",this.internalState.recordID=e,this.setMode(t),this.metadataLoadingState.next(!0);const n={$meta:this.meta$,record:this.load()};return(0,r.forkJoin)(n).pipe((0,o.map)(({record:e})=>e))}initRecord(e,t,n,i,r="detail"){this.updateState(Object.assign(Object.assign({},this.internalState),{recordID:t.id,module:"saved-search",searchModule:e,mode:r})),this.metadataLoadingState.next(!0),this.meta$.pipe((0,o.take)(1),(0,o.tap)(()=>{this.metadataLoadingState.next(!1),this.initStaging(e,t,n,i)})).subscribe()}initStaging(e,t,n,i){const r=(0,c.deepClone)(this.recordStore.extractBaseRecord(t));r.searchModule=e,this.recordStore.setSearchFields(n),this.recordStore.setListColumns(i),this.recordStore.setStaging(r)}clear(){this.cache$=null,this.updateState((0,c.deepClone)(vb)),this.metadataLoadingState.unsubscribe(),this.metadataLoadingState=null,this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.recordStore.save().pipe((0,o.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,r.of)({}))),(0,o.finalize)(()=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1)}))}validate(){return(0,r.forkJoin)({fields:this.recordStore.validate(),criteria:this.validateCriteria()}).pipe((0,o.map)(({fields:e,criteria:t})=>e&&t))}validateCriteria(){const e=this.recordStore.getStaging().criteriaFormGroup;return e.markAllAsTouched(),e.statusChanges.pipe((0,o.startWith)(e.status),(0,o.filter)(e=>"PENDING"!==e),(0,o.take)(1),(0,o.map)(e=>"VALID"===e))}load(e=!0){return this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,o.tap)(e=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!1),this.updateState(Object.assign(Object.assign({},this.internalState),{recordID:e.id,module:e.module}))}))}getViewFieldsKeys$(){return this.meta$.pipe((0,o.map)(e=>{const t=[];return e.panels.forEach(e=>{e.rows.forEach(e=>{e.cols.forEach(e=>{t.push(e.name)})})}),t}))}getViewFields$(){return this.meta$.pipe((0,o.map)(e=>{const t=[];return e.panels.forEach(e=>{e.rows.forEach(e=>{e.cols.forEach(e=>{t.push(e)})})}),t}))}updateState(e){this.store.next(this.internalState=e)}getMetadata(){return(this.meta.get()||{}).recordView||{}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(no),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(xu),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(gb))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),bb=(()=>{class e extends zv{constructor(e){super(e),this.apollo=e}save(e){return super.save(e)}mapToRecord(e){if(!e.data||!e.data.saveRecord||!e.data.saveRecord.record)return null;const t={id:e.data.saveRecord.record._id,type:e.data.saveRecord.record.type||"",module:e.data.saveRecord.record.module||"",attributes:e.data.saveRecord.record.attributes||null};t.key=t.id||t.attributes&&t.attributes.id||"";const n=t.attributes&&t.attributes.contents||null;return n&&(t.criteria=n),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.Apollo))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Sb=(()=>{class e{getKey(){return"criteria"}map(e){var t,n,i,r;const o=e;if(o.criteria){const s=null!==(n=null===(t=null==o?void 0:o.attributes)||void 0===t?void 0:t.contents)&&void 0!==n?n:{},a=null!==(r=null===(i=null==o?void 0:o.criteria)||void 0===i?void 0:i.filters)&&void 0!==r?r:{};s.filters=(0,c.deepClone)(a),e.fields.name&&(s.name=e.fields.name.value,o.criteria.name=s.name),e.fields.orderBy&&(s.orderBy=e.fields.orderBy.value,o.criteria.orderBy=s.orderBy),e.fields.sortOrder&&(s.sortOrder=e.fields.sortOrder.value,o.criteria.sortOrder=s.sortOrder),e.attributes.search_module&&(s.searchModule=e.attributes.search_module,o.criteria.searchModule=s.searchModule),o.attributes.contents=s}let s=o.key||"";"default"===s&&(s=""),o.id=s,o.attributes.id=s}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Cb=(()=>{class e{constructor(e,t,n,i,r,o,s,a,l,c,d){this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=n,this.languageStore=i,this.metadataStore=r,this.message=o,this.recordManager=s,this.fieldManager=a,this.recordMappers=l,this.baseMapper=c,this.savedSearchMapper=d,this.savedFilterStoreFactory=new gb(e,t,o,s,l,c,a,i),this.recordMappers.register("saved-search",this.savedSearchMapper.getKey(),this.savedSearchMapper)}create(){return new yb(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.savedFilterStoreFactory)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gv),i.\u0275\u0275inject(bb),i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Iu),i.\u0275\u0275inject(xu),i.\u0275\u0275inject(c.RecordMapperRegistry),i.\u0275\u0275inject(Qv),i.\u0275\u0275inject(Sb))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),wb=(()=>{class e{constructor(e,t){this.message=e,this.savedFilterStoreFactory=t,this.panelMode="closable",this.mode="filter",this.gridButtons=null,this.fields=[],this.special=[],this.savedFilters=[],this.subs=[],this.filterStore=t.create()}init(e){this.config=e,this.initSearchFields(),this.initConfigUpdatesSubscription(),this.vm$=(0,r.combineLatest)([this.filterStore.stagingRecord$]).pipe((0,o.tap)(([e])=>{this.reset(),this.splitCriteriaFields(e),this.initDisplayFields(),this.initGridButtons(),this.initHeaderButtons(),this.initMyFiltersButton(this.savedFilters)})),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new r.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,c.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed),this.reset(),this.initGridButtons(),this.initHeaderButtons()}clear(){this.subs.forEach(e=>e.unsubscribe()),this.reset(),this.filterStore.clear(),this.filterStore=null,this.collapse.unsubscribe()}clearAuthBased(){this.clear()}reset(){this.fields=[],this.special=[]}applyFilter(){this.filterStore.validateCriteria().pipe((0,o.take)(1)).subscribe(e=>{if(e)return"collapsible"===this.config.panelMode&&this.config.collapseOnSearch&&this.collapse.next(!0),this.config.onSearch(),void this.config.updateFilter(this.filterStore.getBaseRecord());this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}clearFilter(){this.config.resetFilter(!1)}initConfigUpdatesSubscription(){this.subs.push((0,r.combineLatest)([this.config.filter$,this.config.searchFields$]).pipe((0,o.tap)(([e,t])=>{this.reset(),this.filterStore.initRecord(this.config.module,e,t,this.config.listFields,"edit")})).subscribe()),this.subs.push((0,r.combineLatest)([this.config.savedFilters$]).pipe((0,o.tap)(([e])=>{this.savedFilters=e,this.initMyFiltersButton(e)})).subscribe())}splitCriteriaFields(e){!e||!e.criteriaFields||Object.keys(e.criteriaFields).forEach(t=>{const n=e.criteriaFields[t];(n.name||t).includes("_only")?this.special.push(n):this.fields.push(n)})}initSearchFields(){this.subs.push(this.config.searchFields$.subscribe(e=>{this.searchFields=e}))}initDisplayFields(){(!this.searchFields||(0,c.emptyObject)(this.searchFields)||!this.fields)&&(this.displayFields=[]);const e=[];this.fields.forEach(t=>{!this.searchFields[t.name]||e.push(t)}),this.displayFields=e}initGridButtons(){this.gridButtons=[{labelKey:"LBL_CLEAR_BUTTON_LABEL",klass:["clear-filters-button","btn","btn-outline-danger","btn-sm"],onClick:this.clearFilter.bind(this)},{labelKey:"LBL_SEARCH_BUTTON_LABEL",klass:["filter-button","btn","btn-danger","btn-sm"],onClick:this.applyFilter.bind(this)}]}initHeaderButtons(){this.closeButton={onClick:()=>{this.config.onClose()}}}initMyFiltersButton(e){if(!e||e.length<1)return void(this.myFilterButton=null);const t={wrapperKlass:["filter-select"],labelKey:"LBL_SAVED_FILTER_SHORTCUT",klass:["btn","btn-outline-light","btn-sm"],items:[]},n=this.filterStore.getRecordId();e.forEach(e=>{const i={label:e.attributes.name,onClick:()=>{this.config.setOpenFilter(e)}};e.key===n&&(t.label=e.attributes.name,t.labelKey="",i.icon="filter",i.iconKlass="small",i.klass="active"),t.items.push(i)}),this.myFilterButton=t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Cb))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),xb=(()=>{class e extends eb{constructor(e,t,n,i,r,o,s,a,l){super(i,r,o,s,n,a,l),this.store=e,this.listFilterStore=t,this.language=n,this.actionManager=i,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=a,this.metadata=l}getActions(e){return(0,r.combineLatest)([this.store.meta$,this.store.mode$,this.store.stagingRecord$,this.language.vm$]).pipe((0,o.map)(([e,t])=>t&&e?this.parseModeActions(e.actions,t):[]))}buildActionData(e,t){return{store:this.store,listFilterStore:this.listFilterStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,n){this.store.load(!1).pipe((0,o.take)(1)).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(yb),i.\u0275\u0275inject(wb),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(hb),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Ib=(()=>{class e{constructor(e,t,n,i,r,o,s){this.language=e,this.actionManager=t,this.asyncActionService=n,this.message=i,this.confimation=r,this.selectModalService=o,this.metadata=s}create(e,t){return new xb(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ho),i.\u0275\u0275inject(hb),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Eb=(()=>{class e{constructor(e,t){this.message=e,this.savedFilterStoreFactory=t}create(){return new wb(this.message,this.savedFilterStoreFactory)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Cb))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function _b(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275element(1,"scrm-dropdown-button",7),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.store.myFilterButton)}}function Mb(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",13),i.\u0275\u0275element(1,"input",14),i.\u0275\u0275elementStart(2,"label",15),i.\u0275\u0275element(3,"scrm-label",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("value",e.value),i.\u0275\u0275advance(2),i.\u0275\u0275property("labelKey",e.labelKey)}}function jb(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275template(1,Mb,4,2,"div",12),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.store.special)}}function kb(e,t){1&e&&i.\u0275\u0275element(0,"scrm-button",7),2&e&&i.\u0275\u0275property("config",t.$implicit)}function Lb(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275template(1,kb,1,1,"scrm-button",18),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.store.gridButtons)}}function Fb(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"scrm-field-grid",8),i.\u0275\u0275template(1,jb,2,1,"div",9),i.\u0275\u0275template(2,Lb,2,1,"div",10),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext();i.\u0275\u0275property("actions",!0)("appendActions",!1)("fieldMode",t.store.mode)("fields",t.store.displayFields)("record",e)("special",t.store.special.length>0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.store.special.length>0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.store.gridButtons)}}function Ob(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-record-grid",7),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.getGridConfig())}}function Db(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"scrm-panel",1),i.\u0275\u0275template(1,_b,2,1,"div",2),i.\u0275\u0275elementStart(2,"div",3),i.\u0275\u0275template(3,Fb,3,8,"scrm-field-grid",4),i.\u0275\u0275template(4,Ob,2,1,"ng-container",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275propertyInterpolate1("klass","filter-panel ",e.config&&e.config.klass||"",""),i.\u0275\u0275property("titleKey","LBL_BASIC_FILTER")("close",e.store.closeButton)("isCollapsed$",e.store.isCollapsed$)("mode",e.store.panelMode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.store.myFilterButton),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.store.displayFields&&e.store.displayFields.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.config&&e.config.savedFilterEdit)}}let Ab=(()=>{class e{constructor(e,t){this.storeFactory=e,this.actionAdapterFactory=t,this.store=e.create(),this.filterActionsAdapter=t.create(this.store.filterStore,this.store)}ngOnInit(){this.store.init(this.config),this.vm$=this.store.vm$.pipe((0,o.map)(([e])=>{const t=Object.assign({},e);return t.fields=e.criteriaFields,t}))}ngOnDestroy(){this.store.clear(),this.store=null}getGridConfig(){return{record$:this.store.filterStore.stagingRecord$,mode$:this.store.filterStore.mode$,fields$:this.store.filterStore.getViewFieldsKeys$(),actions:this.filterActionsAdapter,appendActions:!0,klass:"mt-2 p-2 saved-search-container rounded",buttonClass:"btn btn-outline-danger btn-sm",labelDisplay:"inline",maxColumns$:(0,r.of)(4).pipe((0,o.shareReplay)(1)),sizeMap$:(0,r.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,o.shareReplay)(1))}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Eb),i.\u0275\u0275directiveInject(Ib))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-list-filter"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"titleKey","close","isCollapsed$","mode","klass",4,"ngIf"],[3,"titleKey","close","isCollapsed$","mode","klass"],["panel-header-button","",4,"ngIf"],["panel-body","",1,"p-3","filter-body"],[3,"actions","appendActions","fieldMode","fields","record","special",4,"ngIf"],[4,"ngIf"],["panel-header-button",""],[3,"config"],[3,"actions","appendActions","fieldMode","fields","record","special"],["class","float-right mt-4","field-grid-special","",4,"ngIf"],["class","mt-4 align-self-end","field-grid-actions","",4,"ngIf"],["field-grid-special","",1,"float-right","mt-4"],["class","d-inline-block form-check mb-2 mr-sm-2",4,"ngFor","ngForOf"],[1,"d-inline-block","form-check","mb-2","mr-sm-2"],["type","checkbox",1,"form-check-input",3,"value"],[1,"form-check-label"],[3,"labelKey"],["field-grid-actions","",1,"mt-4","align-self-end"],[3,"config",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Db,5,8,"scrm-panel",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,jh,ns,dp,p.NgForOf,To,Vo,Tv],pipes:[p.AsyncPipe],encapsulation:2}),e})(),Nb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs,Ah,hp,ms,hs,Pv,fs]]}),e})(),Rb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,sa,Hy,hs,Kg,Nb]]}),e})();function Tb(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-record-grid",4),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.getGridConfig())}}function Pb(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"scrm-panel",1),i.\u0275\u0275elementStart(1,"div",2),i.\u0275\u0275template(2,Tb,2,1,"ng-container",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275propertyInterpolate1("klass","record-panel ",e.config&&e.config.klass||"",""),i.\u0275\u0275property("close",e.closeButton)("isCollapsed$",e.isCollapsed$)("mode",e.panelMode)("titleKey",e.config.title||""),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.config)}}i.\u0275\u0275setComponentScope(Cc,[ta,p.NgIf,To,Ab,Uy,Ug],[p.AsyncPipe]);let Bb=(()=>{class e{constructor(){this.panelMode="closable"}ngOnInit(){this.vm$=this.config.store.vm$,this.initCloseButton(),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new r.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,c.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed)}ngOnDestroy(){}getGridConfig(){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,fields$:this.config.store.getViewFieldsKeys$(),actions:this.config.actions,klass:"mt-2 rounded shadow-sm",buttonClass:"btn btn-outline-danger btn-sm",maxColumns$:(0,r.of)(4).pipe((0,o.shareReplay)(1)),sizeMap$:(0,r.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,o.shareReplay)(1))}}initCloseButton(){this.closeButton={onClick:()=>{this.config.onClose()}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-panel"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"close","isCollapsed$","mode","titleKey","klass",4,"ngIf"],[3,"close","isCollapsed$","mode","titleKey","klass"],["panel-body","",1,"pl-2","pr-2"],[4,"ngIf"],[3,"config"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Pb,3,6,"scrm-panel",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,jh,Tv],pipes:[p.AsyncPipe],encapsulation:2}),e})();class $b extends c.ActionHandler{}let Vb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs,Ah,hp,ms,hs,fs,Pv]]}),e})();const zb={module:"",recordId:"",loading:{data:!1,metadata:!1},mode:"detail"};class Ub{constructor(e,t,n,i,s,a){this.appStateStore=e,this.meta=t,this.message=n,this.fieldManager=i,this.language=s,this.storeFactory=a,this.internalState=(0,c.deepClone)(zb),this.metadataState=(0,c.deepClone)({}),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.metadataStore=new r.BehaviorSubject({}),this.metadataState$=this.metadataStore.asObservable(),this.subs=[],this.meta$=this.metadataState$,this.recordStore=a.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,o.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading.data||e.loading.metadata)),this.mode$=this.state$.pipe((0,o.map)(e=>e.mode)),this.vm$=this.state$}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordId}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}init(e,t,n="detail"){this.baseInit(e,t,n),this.setMetadataLoading(!0);const i={$meta:this.loadMetadata(),record:this.load()};return(0,r.forkJoin)(i).pipe((0,o.map)(({record:e})=>e))}initRecord(e,t="detail",n=!0){this.baseInit(e.module,e.id,t),n&&this.loadMetadata().pipe((0,o.take)(1),(0,o.tap)(()=>{this.setRecord(e)})).subscribe()}initStaging(e){const t=(0,c.deepClone)(this.recordStore.extractBaseRecord(e));this.recordStore.setStaging(t)}setRecord(e){const t=(0,c.deepClone)(this.recordStore.extractBaseRecord(e));this.recordStore.setRecord(t)}setMetadata(e){this.updateMetadataState(e),this.setMetadataLoading(!1)}destroy(){this.clear()}clear(){this.updateState((0,c.deepClone)(zb)),this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}setDataLoading(e){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:Object.assign(Object.assign({},this.internalState.loading),{data:e})}))}setMetadataLoading(e){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:Object.assign(Object.assign({},this.internalState.loading),{metadata:e})}))}save(){return this.setDataLoading(!0),this.recordStore.save().pipe((0,o.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,r.of)({}))),(0,o.finalize)(()=>{this.setDataLoading(!1)}))}validate(){return this.recordStore.validate()}load(e=!0){return this.setDataLoading(!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordId,e).pipe((0,o.tap)(e=>{this.updateState(Object.assign(Object.assign({},this.internalState),{recordId:e.id,module:e.module}))}),(0,o.finalize)(()=>{this.setDataLoading(!1)}))}loadMetadata(e=!0){return this.setMetadataLoading(!0),this.meta.getMetadata(this.internalState.module).pipe((0,o.map)(e=>e.recordView),(0,o.tap)(e=>{this.updateMetadataState(e)}),(0,o.finalize)(()=>{this.setMetadataLoading(!1)}))}updateState(e){this.store.next(this.internalState=e)}updateMetadataState(e){this.metadataStore.next(this.metadataState=e)}getMetadata(){return(0,c.deepClone)(this.metadataState)}baseInit(e,t,n="detail"){this.updateState(Object.assign(Object.assign({},this.internalState),{module:e,recordId:t,mode:n}))}}let Kb=(()=>{class e extends Ub{getViewFields$(){return this.meta$.pipe((0,o.map)(e=>e.fields))}getViewFieldsKeys$(){return this.meta$.pipe((0,o.map)(e=>{if(!e.fields||!e.fields.length)return[];const t=[];return e.fields.forEach(e=>{t.push(e.name)}),t}))}initRecord(e,t="detail",n=!0){super.initRecord(e,t,n),this.setRecord(e)}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.\u0275\u0275getInheritedFactory(e)))(n||e)}}(),e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Zb=(()=>{class e{constructor(e,t,n,i,r,o,s,a,l){this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=n,this.languageStore=i,this.metadataStore=r,this.message=o,this.recordManager=s,this.fieldManager=a,this.recordStoreFactory=l}create(){return new Kb(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.recordStoreFactory)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gv),i.\u0275\u0275inject(zv),i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Iu),i.\u0275\u0275inject(xu),i.\u0275\u0275inject(Yv))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Gb=(()=>{class e{constructor(e,t){this.listStoreFactory=e,this.recordStoreFactory=t,this.subs=[],this.stores=[],this.storeSubject=new r.BehaviorSubject([]),this.state$=this.storeSubject.asObservable(),this.recordList=e.create(),this.stores$=this.state$,this.storesMap$=this.stores$.pipe((0,o.map)(e=>this.getStoreMap(e)))}clear(){this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}getMetadata(){return null}init(e,t=!0){const n=this.recordList.init(e,t,"list_max_entries_per_subpanel");this.subs.push(this.recordList.records$.subscribe(e=>{this.initStores(e)})),n&&n.pipe((0,o.tap)(e=>{this.initStores(e.records)})).pipe((0,o.take)(1)).subscribe()}load(e=!0){return this.recordList.load(e).pipe((0,o.tap)(e=>{this.initStores(e.records)}))}initStores(e){if(!e)return;const t={},n=[],i=this.getStoreMap(this.stores);e.forEach(e=>{if(!e||!e.id)return;const r=e.id;if(i[r]){const o=i[r];return o.setRecord(e),t[r]=o,void n.push(o)}t[r]=this.recordStoreFactory.create(),this.getMetadata()&&t[r].setMetadata(this.getMetadata()),t[r].initRecord(e,"detail",!1),n.push(t[r])}),Object.keys(i).forEach(e=>{t[e]||i[e].destroy()}),this.updateState(n)}updateState(e){this.storeSubject.next(this.stores=e)}getStoreMap(e){const t={};return!e||!e.length||e.forEach(e=>{t[e.getBaseRecord().id]=e}),t}}return e.\u0275fac=function(e){i.\u0275\u0275invalidFactory()},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Hb=(()=>{class e extends Ub{getViewFields$(){return this.meta$.pipe((0,o.map)(e=>{const t=[];return e.headerLayout&&e.headerLayout.rows&&e.headerLayout.rows.forEach(e=>{e.cols.forEach(e=>{e.field&&t.push(e.field)})}),e.bodyLayout&&e.bodyLayout.rows&&e.bodyLayout.rows.forEach(e=>{e.cols.forEach(e=>{e.field&&t.push(e.field)})}),t}))}initRecord(e,t="detail",n=!0){super.initRecord(e,t,n),this.setRecord(e)}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.\u0275\u0275getInheritedFactory(e)))(n||e)}}(),e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Wb=(()=>{class e{constructor(e,t,n,i,r,o){this.appStateStore=e,this.meta=t,this.message=n,this.fieldManager=i,this.language=r,this.storeFactory=o}create(){return new Hb(this.appStateStore,this.meta,this.message,this.fieldManager,this.language,this.storeFactory)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(no),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(xu),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Yv))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),qb=(()=>{class e extends Gb{constructor(e,t){super(e,t),this.listStoreFactory=e,this.recordStoreFactory=t,this.$loading=this.recordList.loading$}init(e,t=!0){super.init(e,t)}setFilters(e){let t=this.recordList.criteria;if(t=Object.assign(Object.assign({},t),e),e&&e.orderBy){let t=c.SortDirection.DESC;e.sortOrder&&"ASC"===String(e.sortOrder).toUpperCase()&&(t=c.SortDirection.ASC),this.recordList.updateSorting(e.orderBy,t,!1)}return this.recordList.updateSearchCriteria(t,!1),this.load(!1).pipe((0,o.map)(e=>e.records))}getMetadata(){return this.metadata}setMetadata(e){return this.metadata=e}allLoaded(){const e=this.recordList.getPagination();return!!e&&e.pageSize>=e.total}loadMore(e=10){let t=(this.recordList.getPagination().pageSize||0)+e;this.recordList.setPageSize(t),this.recordList.updatePagination(0)}reload(){this.recordList.updatePagination(0)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc),i.\u0275\u0275inject(Wb))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Qb=(()=>{class e{constructor(e,t){this.recordListFactory=e,this.recordStoreFactory=t}create(){return new qb(this.recordListFactory,this.recordStoreFactory)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc),i.\u0275\u0275inject(Wb))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Yb extends c.ActionHandler{checkRecordAccess(e,t=[]){var n,i;const r=null!==(n=e.itemStore.recordStore.getBaseRecord().acls)&&void 0!==n?n:[];if(!r||!r.length)return!1;const o=null!==(i=e.action)&&void 0!==i?i:null;return this.checkAccess(o,r,t)}navigateBack(e,t,n,i,r){let o=e.getReturnModule(t),s=e.getReturnAction(t),a=e.getReturnId(t);n!==a&&(o===i&&"record"===s&&a!==n||!o||!s||e.navigateBack(r,i,t))}}let Xb=(()=>{class e extends Yb{constructor(){super(),this.key="async-process",this.modes=c.ALL_VIEW_MODES}run(e){}shouldDisplay(e){var t,n;const i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Jb=(()=>{class e extends Yb{constructor(e,t){super(),this.modalService=e,this.navigation=t,this.key="cancel",this.modes=["edit","detail"]}run(e){e.itemStore.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){e.itemStore.recordStore.resetStaging(),e.itemStore.setMode("detail")}showConfirmationModal(e){const t=this.modalService.open(Ec);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:e=>e.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:t=>{this.cancel(e),t.close()}}]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(I.NgbModal),i.\u0275\u0275inject(Fl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),eS=(()=>{class e extends Yb{constructor(){super(),this.key="edit",this.modes=["detail"]}run(e){e.itemStore.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),tS=(()=>{class e extends Yb{constructor(e,t){super(),this.message=e,this.navigation=t,this.key="save",this.modes=["edit"]}run(e){e.itemStore.recordStore.validate().pipe((0,o.take)(1)).subscribe(t=>{t?e.itemStore.save().pipe((0,o.take)(1)).subscribe(t=>{e.itemStore.setMode("detail")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Fl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),nS=(()=>{class e extends Ia{constructor(e,t,n,i){super(),this.async=e,this.cancel=t,this.edit=n,this.save=i,e.modes.forEach(t=>this.actions[t][e.key]=e),n.modes.forEach(e=>this.actions[e][n.key]=n),i.modes.forEach(e=>this.actions[e][i.key]=i),t.modes.forEach(e=>this.actions[e][t.key]=t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xb),i.\u0275\u0275inject(Jb),i.\u0275\u0275inject(eS),i.\u0275\u0275inject(tS))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),iS=(()=>{class e extends eb{constructor(e,t,n,i,r,o,s,a,l){super(i,r,o,s,n,a,l),this.itemStore=e,this.threadStore=t,this.language=n,this.actionManager=i,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=a,this.metadata=l,this.defaultActions={detail:[],edit:[],create:[]}}getActions(e){return(0,r.combineLatest)([this.itemStore.meta$,this.itemStore.mode$]).pipe((0,o.map)(([e,t])=>t&&e?this.parseModeActions(e.actions,t,this.itemStore.getViewContext()):[]))}getActionName(e){return`record-thread-item-${e.key}`}buildActionData(e,t){return{itemStore:this.itemStore,threadStore:this.threadStore,action:e}}buildActionInput(e,t,n,i=null){const r=this.itemStore.getBaseRecord();return this.message.removeMessages(),{action:t,module:r.module,id:r.id,params:e&&e.params||[]}}getMode(){return this.itemStore.getMode()}getModuleName(e){return this.itemStore.getModuleName()}reload(e,t,n){var i,r,s,a;const l=null!==(r=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.reload)&&void 0!==r&&r,d=null!==(a=null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.reloadThread)&&void 0!==a&&a;(0,c.isTrue)(l)&&this.itemStore.load(!1).pipe((0,o.take)(1)).subscribe(),(0,c.isTrue)(d)&&this.threadStore.reload()}shouldReload(e){var t,n,i,r;const o=null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.reload)&&void 0!==n&&n,s=null!==(r=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.reloadThread)&&void 0!==r&&r;return(0,c.isTrue)(o)||(0,c.isTrue)(s)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Hb),i.\u0275\u0275inject(qb),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(nS),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),rS=(()=>{class e{constructor(e,t,n,i,r,o,s){this.language=e,this.actionManager=t,this.asyncActionService=n,this.message=i,this.confirmation=r,this.selectModalService=o,this.metadata=s}create(e,t){return new iS(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ho),i.\u0275\u0275inject(nS),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const oS=["body"];function sS(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-record-flexbox",6),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.buildConfig(e.config.metadata.headerLayout))}}function aS(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-record-flexbox",6),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.buildConfig(e.config.metadata.bodyLayout))}}function lS(e,t){1&e&&i.\u0275\u0275element(0,"div",7)}function cS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275element(1,"scrm-button",6),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.getCollapseButton())}}function dS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,sS,2,1,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",null,3),i.\u0275\u0275template(5,aS,2,1,"ng-container",2),i.\u0275\u0275template(6,lS,1,0,"div",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,cS,2,1,"div",5),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275classMapInterpolate2("d-flex flex-column record-thread-item ",e.config&&e.config.klass||""," ",e.dynamicClass,""),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.headerLayout),i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("record-thread-item-body flex-grow-1 ",e.getBodyClass(),""),i.\u0275\u0275classProp("collapsed",e.collapsible&&e.collapsed)("expanded",e.collapsible&&!e.collapsed),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.bodyLayout),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.collapsible&&e.collapsed),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.collapsible)}}let uS=(()=>{class e{constructor(e){this.actionAdapterFactory=e,this.collapsed=!1,this.collapsible=!1,this.collapseLimit=300,this.dynamicClass="",this.subs=[]}ngOnInit(){this.actionAdapter=this.actionAdapterFactory.create(this.config.store,this.config.threadStore),this.initDynamicClass()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngAfterViewInit(){!this.config||!this.config.collapsible||setTimeout(()=>{(this.bodyEl.nativeElement.offsetHeight||this.bodyEl.nativeElement.height)>(this.config.collapseLimit||this.collapseLimit)&&(this.collapsible=!0,this.collapsed=!0)},2e3)}buildConfig(e){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,layout$:(0,r.of)(e).pipe((0,o.shareReplay)(1)),inputClass:Object.assign(Object.assign({},this.config.inputClass||{}),{"form-control form-control-sm":!0}),buttonClass:this.config.buttonClass||"",labelClass:this.config.labelClass||{},rowClass:this.config.rowClass||{},colClass:this.config.colClass||{},actions:this.actionAdapter}}getCollapseButton(){return{klass:"collapse-button btn btn-link btn-sm",labelKey:this.collapsed?"LBL_SHOW_MORE":"LBL_SHOW_LESS",onClick:()=>{this.collapsed=!this.collapsed,this.collapsed?this.config&&this.config.collapsed():this.config&&this.config.expanded()}}}initDynamicClass(){!this.config||!this.config.dynamicClass||!this.config.dynamicClass.length||this.subs.push(this.config.store.stagingRecord$.subscribe(e=>{const t=[];!e||!e.fields||!Object.keys(e.fields).length||(this.config.dynamicClass.forEach(n=>{if(!n||!e.fields[n]&&!e.attributes[n])return;const i=n+"-";let r=[];if(e.fields[n]?(e.fields[n].value&&r.push(e.fields[n].value),e.fields[n].valueList&&e.fields[n].valueList.length&&(r=r.concat(e.fields[n].valueList))):Array.isArray(e.attributes[n])?r=r.concat(e.attributes[n]):"object"!=typeof e.attributes[n]&&r.push(e.attributes[n]),!r||!r.length)return;const o=i+r.join(" "+i);t.push(o)}),this.dynamicClass=t.join(" "))}))}getBodyClass(){var e,t,n,i;return null!==(i=null===(n=null===(t=null===(e=this.config)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.bodyLayout)||void 0===n?void 0:n.class)&&void 0!==i?i:""}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(rS))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-thread-item"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(oS,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.bodyEl=e.first)}},inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"record-thread-item-header","flex-grow-1"],[4,"ngIf"],["body",""],["class","fadeout",4,"ngIf"],["class","record-thread-item-collapse d-flex justify-content-center flex-grow-1",4,"ngIf"],[3,"config"],[1,"fadeout"],[1,"record-thread-item-collapse","d-flex","justify-content-center","flex-grow-1"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,dS,8,15,"div",0),2&e&&i.\u0275\u0275property("ngIf",t.config)},directives:[p.NgIf,Ov,Vo],encapsulation:2}),e})();const pS=["list"];function hS(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275element(1,"scrm-label",5),i.\u0275\u0275elementEnd())}function mS(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275element(1,"scrm-loading-spinner",7),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("overlay",!0))}function fS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",12),i.\u0275\u0275element(1,"scrm-button",13),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.getLoadMoreButton())}}function gS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",null,14),i.\u0275\u0275element(2,"scrm-record-thread-item",13),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275reference(1),r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("config",r.buildItem(e,n))}}function vS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",12),i.\u0275\u0275element(1,"scrm-button",13),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.getLoadMoreButton())}}function yS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",8,9),i.\u0275\u0275template(2,fS,2,1,"div",10),i.\u0275\u0275template(3,gS,3,1,"div",11),i.\u0275\u0275template(4,vS,2,1,"div",10),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngStyle",e.getMaxHeight()),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf","asc"===e.direction&&!e.allLoaded()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.records),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","desc"===e.direction&&!e.allLoaded())}}function bS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",16),i.\u0275\u0275elementStart(1,"div",17),i.\u0275\u0275element(2,"scrm-record-thread-item",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",18),i.\u0275\u0275element(4,"scrm-button",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("config",e.buildCreateItem()),i.\u0275\u0275advance(2),i.\u0275\u0275property("config",e.getCreateButton())}}function SS(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,bS,5,2,"div",15),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.loading)}}let CS=(()=>{class e{constructor(e,t,n,i){this.storeFactory=e,this.itemFactory=t,this.recordManager=n,this.message=i,this.loading=!1,this.maxHeight=400,this.direction="asc",this.shouldResetScroll=!1,this.subs=[]}ngOnInit(){(0,c.isVoid)(this.config.maxListHeight)||(this.maxHeight=this.config.maxListHeight),this.config.store||(this.store=this.storeFactory.create()),this.config.module&&(this.direction=this.config.direction||this.direction,this.store.setMetadata(this.config.itemConfig.metadata),this.store.init(this.config.module,!1),this.initCreate(),this.initDataSubscription(),this.config.filters$?this.subs.push(this.config.filters$.subscribe(e=>{this.store.setFilters(e).pipe((0,o.take)(1)).subscribe()})):this.store.load(!1),this.initLoading())}ngAfterViewInit(){this.shouldResetScroll=!0,this.resetScroll()}ngOnDestroy(){this.store.clear(),this.store=null,this.subs.forEach(e=>e.unsubscribe())}buildItem(e,t){let n="record-thread-list-item";return this.config.itemConfig.klass&&(n+=" "+this.config.itemConfig.klass),Object.assign(Object.assign({},this.config.itemConfig),{store:e,threadStore:this.store,klass:n,expanded:()=>{this.scrollToItem(t)},collapsed:()=>{this.scrollToItem(t)}})}getLoadMoreButton(){return{klass:"load-more-button btn btn-link btn-sm",labelKey:"LBL_LOAD_MORE",onClick:()=>{this.store.loadMore()}}}buildCreateItem(){return Object.assign(Object.assign({},this.config.createConfig),{store:this.createStore,rowClass:{"pt-1":!0},klass:"record-thread-create-item"})}getCreateButton(){return{klass:"create-thread-item-button btn btn-danger btn-sm",labelKey:"LBL_SUBMIT_BUTTON_LABEL",onClick:()=>{this.createStore.validate().pipe((0,o.take)(1)).subscribe(e=>{e?this.createStore.save().pipe((0,o.take)(1)).subscribe(()=>{this.store.reload(),this.initRecord(),this.shouldResetScroll=!0,this.message.addSuccessMessageByKey("LBL_ACTION_SUCCESS")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}}}allLoaded(){return!(!this.store||!this.store.allLoaded())}getMaxHeight(){return 0==this.maxHeight?null:{"max-height.px":this.maxHeight,"overflow-y":"auto"}}initRecord(){const e=this.recordManager.buildEmptyRecord(this.config.module);this.addPresetFields(e);let t="edit";this.config.createConfig&&this.config.createConfig.initialMode&&(t=this.config.createConfig.initialMode),this.createStore.initRecord(e,t,!1)}scrollToEnd(){!this.listContainer||!this.listContainer.nativeElement||this.scrollTo(this.listContainer.nativeElement.scrollHeight)}scrollToTop(){this.scrollTo(0)}scrollTo(e){try{this.listContainer.nativeElement.scrollTop=e}catch(t){}}scrollToItem(e){e&&this.listContainer&&this.listContainer.nativeElement&&this.scrollTo(e.offsetTop-this.listContainer.nativeElement.offsetTop)}resetScroll(){!1!==this.shouldResetScroll&&("asc"===this.direction?this.scrollToEnd():this.scrollToTop(),this.shouldResetScroll=!1)}scheduleScrollReset(){setTimeout(()=>{this.resetScroll()},500)}initCreate(){!this.config.create||(this.createStore=this.itemFactory.create(),this.createStore.setMetadata(this.config.createConfig.metadata),this.initRecord(),this.initPresetFieldsMapping())}initPresetFieldsMapping(){!this.config.presetFields$||this.subs.push(this.config.presetFields$.subscribe(e=>{if(!e||!Object.keys(e).length)return;this.presetFieldValues=e;const t=this.createStore.recordStore.getBaseRecord();this.addPresetFields(t),this.createStore.recordStore.setRecord(t)}))}addPresetFields(e){!this.presetFieldValues||(e.attributes=Object.assign(Object.assign({},this.presetFieldValues),e.attributes||{}))}initDataSubscription(){this.subs.push(this.store.stores$.subscribe(e=>{if((!this.records||!this.records.length)&&(this.shouldResetScroll=!0),"asc"===this.direction)return this.records=e.reverse(),void this.scheduleScrollReset();this.records=e,this.scheduleScrollReset()}))}initLoading(){const e=[this.store.$loading];this.createStore&&this.createStore.loading$&&e.push(this.createStore.loading$);const t=(0,r.combineLatest)(e);this.subs.push(t.subscribe(e=>{if(!e||!e.length)return void(this.loading=!1);let t=!1;e.forEach(e=>{t=t||e}),this.loading=t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Qb),i.\u0275\u0275directiveInject(Wb),i.\u0275\u0275directiveInject(Iu),i.\u0275\u0275directiveInject(Jl))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-thread"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(pS,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.listContainer=e.first)}},inputs:{config:"config"},decls:5,vars:7,consts:[["class","d-flex record-thread-no-data justify-content-center h3",4,"ngIf"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["class","record-thread-list",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"d-flex","record-thread-no-data","justify-content-center","h3"],["labelKey","LBL_NO_DATA"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],[1,"record-thread-list",3,"ngStyle"],["list",""],["class","record-thread-load-more d-flex justify-content-center flex-grow-1",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"record-thread-load-more","d-flex","justify-content-center","flex-grow-1"],[3,"config"],["item",""],["class","d-flex flex-column record-thread-create-container",4,"ngIf"],[1,"d-flex","flex-column","record-thread-create-container"],[1,"flex-grow-1"],[1,"flex-grow-1","d-flex","justify-content-start","pt-1","record-thread-create-buttons"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,hS,2,0,"div",0),i.\u0275\u0275template(2,mS,2,1,"div",1),i.\u0275\u0275template(3,yS,5,4,"div",2),i.\u0275\u0275template(4,SS,2,1,"ng-container",3),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275classMapInterpolate1("record-thread ",t.config&&t.config.klass||"",""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.loading&&!t.records&&!t.records.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.records&&t.records.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.config.create&&t.createStore))},directives:[p.NgIf,To,Ug,p.NgStyle,p.NgForOf,Vo,uS],encapsulation:2}),e})(),wS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs,Ah,hp,ms,hs,Pv,_p,Dv]]}),e})(),xS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,fs,Ah,hp,ms,hs,Pv,fs,wS,Kg]]}),e})();const IS={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let ES=(()=>{class e extends eh{constructor(e){super(e),this.fetchGQL=e,this.cache$=null,this.internalState=(0,c.deepClone)(IS),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,o.map)(e=>e.statistic),(0,o.distinctUntilChanged)())}updateState(e){super.updateState(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),_S=(()=>{class e{traverse(e,t,n){e.singleSeries&&e.singleSeries.forEach(e=>{t.visit(e,n)}),e.multiSeries&&e.multiSeries.forEach(e=>{e.series.forEach(e=>{t.visit(e,n)})})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),MS=(()=>{class e{constructor(e,t){this.currencyService=e,this.preferences=t}toUserFormat(e,t=null){const n=parseFloat(e);if(!isFinite(n))return e;const i=this.currencyService.getUserCurrency();return this.currencyService.baseToCurrency(i.id,n).toString()}toInternalFormat(e){const t=parseFloat(e);if(!isFinite(t))return e;const n=this.currencyService.getUserCurrency();return this.currencyService.currencyToBase(n.id,t).toString()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Oa),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),jS=(()=>{class e{constructor(e){this.currencyUnitConverter=e,this.map={},this.addUnitConverter("currency",e)}addUnitConverter(e,t){this.map[e]=t}toUserFormat(e,t,n){if(!e)return t;const i=this.map[e];return i?i.toUserFormat(t,n):t}toInternalFormat(e,t){if(!e)return t;const n=this.map[e];return n?n.toInternalFormat(t):t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(MS))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),kS=(()=>{class e{constructor(e){this.converter=e}visit(e,t){var n,i;const r=null!==(n=null==t?void 0:t.dataType)&&void 0!==n?n:null,o=null!==(i=null==t?void 0:t.direction)&&void 0!==i?i:"user-unit";if(!r)return;const s=parseFloat(e.value.toString());if(isFinite(s)){if("user-unit"===o)return void(e.value=this.converter.toUserFormat(r,s.toString()));e.value=this.converter.toInternalFormat(r,s.toString())}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(jS))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),LS=(()=>{class e{constructor(e,t){this.traverser=e,this.dataTypeMapper=t,this.registry={},this.addMapper("data-type-unit-converter",t)}addMapper(e,t){this.registry[e]=t}map(e,t,n){var i;const r=null!==(i=null==this?void 0:this.registry[t])&&void 0!==i?i:null;!r||this.traverser.traverse(e,r,n)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(_S),i.\u0275\u0275inject(kS))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const FS={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let OS=(()=>{class e extends ES{constructor(e,t,n){super(e),this.fetchGQL=e,this.formatter=t,this.seriesMapper=n,this.internalState=(0,c.deepClone)(FS),this.store=new r.BehaviorSubject(this.internalState),this.defaultOptions={},this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,o.map)(e=>e.statistic),(0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading),(0,o.distinctUntilChanged)())}setDefaultOptions(e){this.defaultOptions=e}getDataSource(){return this.internalState.dataSource}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;this.injectDefaultValues(e);const t=this.buildCharDataSource(e);this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,dataSource:t,loading:!1}))}injectDefaultValues(e){e.metadata.chartOptions?Object.keys(this.defaultOptions).forEach(t=>{t in e.metadata.chartOptions||(e.metadata.chartOptions[t]=this.defaultOptions[t])}):e.metadata.chartOptions=(0,c.deepClone)(this.defaultOptions)}buildCharDataSource(e){const t=e.metadata.dataType||"";let n=null;const i=e.metadata&&e.metadata.digits||null;return null!==i&&(n={digits:i}),{options:e.metadata.chartOptions||{},getResults:()=>(0,r.of)(this.buildSeriesResult(e)).pipe((0,o.shareReplay)(1)),tickFormatting:e=>this.formatter.toUserFormat(t,e,n),tooltipFormatting:e=>this.formatter.toUserFormat(t,e,n)}}buildSeriesResult(e){const t=e.metadata.dataType||"",n={},i=e.data.singleSeries||null;i&&(n.singleSeries=i);const r=e.data.multiSeries||null;return r&&(n.multiSeries=r),this.seriesMapper.map(n,"data-type-unit-converter",{dataType:t}),n}updateState(e){super.updateState(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp),i.\u0275\u0275inject(ya),i.\u0275\u0275inject(LS))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),DS=(()=>{class e{constructor(e,t,n){this.fetchGQL=e,this.formatter=t,this.seriesMapper=n}create(){return new OS(this.fetchGQL,this.formatter,this.seriesMapper)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp),i.\u0275\u0275inject(ya),i.\u0275\u0275inject(LS))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),AS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],inputs:{config:"config",context:"context",context$:"context$"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function NS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"option",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("value",n.getKey(e)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.language.getFieldLabel(e.labelKey)," ")}}function RS(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",13),i.\u0275\u0275elementStart(1,"div",14),i.\u0275\u0275elementStart(2,"form",15),i.\u0275\u0275elementStart(3,"select",16),i.\u0275\u0275listener("ngModelChange",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).onChartSelect()})("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).selectedChart=t}),i.\u0275\u0275template(4,NS,2,2,"option",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",e.selectedChart),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.configuredCharts)}}function TS(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-chart",20),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("dataSource",e.dataSource)("type",e.chartType)}}function PS(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,TS,1,2,"scrm-chart",19),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.dataSource&&e.chartType)}}function BS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",21),i.\u0275\u0275element(1,"scrm-loading-spinner",22),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275classProp("m-5",!e.dataSource),i.\u0275\u0275advance(1),i.\u0275\u0275property("overlay",!0)}}function $S(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"p",23),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.messageLabelKey)," ")}}function VS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"scrm-widget-panel",1),i.\u0275\u0275elementStart(1,"div",2),i.\u0275\u0275elementStart(2,"div",3),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275elementStart(4,"div",5),i.\u0275\u0275template(5,RS,5,2,"div",6),i.\u0275\u0275elementStart(6,"div",7),i.\u0275\u0275elementStart(7,"div",8),i.\u0275\u0275elementStart(8,"div",9),i.\u0275\u0275template(9,PS,2,1,"ng-container",10),i.\u0275\u0275template(10,BS,2,3,"div",11),i.\u0275\u0275template(11,$S,2,1,"p",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("title",e.title),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngIf",e.isConfigured&&e.chartOptions.toggle),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",e.selectedChart&&!e.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!(e.loading||e.isConfigured()&&e.dataSource))}}let zS=(()=>{class e extends AS{constructor(e,t){super(),this.language=e,this.factory=t,this.charts={},this.titleLabelKey="LBL_INSIGHTS",this.title="",this.messageLabelKey="LBL_CHART_NOT_FOUND",this.selectedChart="",this.chartType="",this.loading=!0,this.subs=[]}ngOnInit(){if(this.appStrings$=this.language.appStrings$,!1===this.validateConfig())return;this.context$&&this.subs.push(this.context$.subscribe(e=>{this.context=e,Object.keys(this.charts).forEach(t=>{this.charts[t].store.context=e})}));const e=this.config.options,t=e.charts;e.defaultChart&&(this.selectedChart=e.defaultChart||""),this.setupCharts(t),this.setHeaderTitle(e),this.reloadSelectedChart(),this.setupLoading(),this.setupVM(),this.setupReload()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get configuredCharts(){return this.chartOptions.charts||[]}get chartOptions(){return this.config.options||{}}isConfigured(){return!(!this.config.options.charts||!this.config.options.charts.length)}getLabelKey(e){return e.statistic.metadata&&e.statistic.metadata.labelKey||this.charts[e.query.key].labelKey}getKey(e){return e.chartKey||e.statisticsType||""}validateConfig(){if(!this.context||!this.context.module)return this.messageLabelKey="LBL_BAD_CONFIG_BAD_CONTEXT",!1;if(!this.config)return this.messageLabelKey="LBL_BAD_CONFIG_NO_CONFIG",!1;const e=this.config.options;return!!(e&&e.charts&&e.charts.length)||(this.messageLabelKey="LBL_BAD_CONFIG_NO_STATISTICS_KEY",!1)}setupCharts(e){this.selectedChart="",e.forEach(e=>{const t=this.getKey(e);!t||(this.selectedChart||(this.selectedChart=t||"",this.chartType=e.chartType),this.buildChartInfo(t,e),this.initChartStore(t,e))})}buildChartInfo(e,t){this.charts[e]={key:e,labelKey:t.labelKey||"",chartType:t.chartType,statisticsType:t.statisticsType,store:this.factory.create(),reload:!0}}initChartStore(e,t){this.charts[e].store.init(this.context.module,{key:t.statisticsType,context:Object.assign({},this.context)},!1),this.charts[e].store.setDefaultOptions(t.chartOptions)}setHeaderTitle(e){if(this.config.labelKey&&(this.titleLabelKey=this.config.labelKey),e.headerTitle){if(!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].labelKey)return;this.titleLabelKey=this.charts[this.selectedChart].labelKey}this.title=this.language.getFieldLabel(this.titleLabelKey)}onChartSelect(){this.dataSource=null,this.chartType=this.charts[this.selectedChart].chartType,this.reloadSelectedChart(!1)}setupVM(){const e=[];Object.keys(this.charts).forEach(t=>e.push(this.charts[t].store.state$)),this.vm$=(0,r.combineLatest)([(0,r.combineLatest)(e),this.language.appStrings$]).pipe((0,o.map)(([e,t])=>({statistics:this.mapChartData(e),appStrings:t})))}mapChartData(e){const t={};return e.forEach(e=>{!e.query.key||(t[e.query.key]=e,this.charts[e.query.key].labelKey=this.getLabelKey(e))}),t}setupReload(){!this.config.reload$||this.subs.push(this.config.reload$.subscribe(()=>{!0!==this.loading&&(this.loading=!0,Object.keys(this.charts).forEach(e=>{this.charts[e].reload=!0}),this.reloadSelectedChart())}))}setupLoading(){const e=[];Object.keys(this.charts).forEach(t=>e.push(this.charts[t].store.loading$)),this.loading$=(0,r.combineLatest)(e).pipe((0,o.map)(e=>{if(!e||e.length<1)return this.loading=!1,!1;let t=!1;return e.forEach(e=>{t=t||e}),this.loading=t,t})),this.subs.push(this.loading$.subscribe())}reloadSelectedChart(e=!1){!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].store||this.charts[this.selectedChart].store.load(e=e&&!this.charts[this.selectedChart].reload).pipe((0,o.take)(1),(0,o.tap)(()=>{var e,t,n;this.dataSource=null!==(n=null===(t=null===(e=this.charts[this.selectedChart])||void 0===e?void 0:e.store)||void 0===t?void 0:t.getDataSource())&&void 0!==n?n:null,this.charts[this.selectedChart].reload=!1})).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(DS))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["chart-sidebar-widget"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"title",4,"ngIf"],[3,"title"],["widget-body",""],[1,"widget-background","chart-sidebar-widget"],[1,"mb-2","ml-1","mr-1"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row","mt-3","chart-widget"],[1,"col","pl-0","pr-0","pb-1","pt-1","d-flex","justify-content-center"],[1,"flex-grow-1"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["class","lead text-center pt-3",4,"ngIf"],[1,"row"],[1,"col","pr-2","pl-2"],[1,"login-form","mb-0","mt-2","w-100"],["name","chart",1,"m-0","w-100",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource","type",4,"ngIf"],[3,"dataSource","type"],[1,"chart-loading"],[3,"overlay"],[1,"lead","text-center","pt-3"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,VS,12,5,"scrm-widget-panel",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,Oh,h.\u0275NgNoValidate,h.NgControlStatusGroup,h.NgForm,h.SelectControlValueAccessor,h.NgControlStatus,h.NgModel,p.NgForOf,h.NgSelectOption,h.\u0275NgSelectMultipleOption,Gs,Ug],pipes:[p.AsyncPipe],encapsulation:2}),e})(),US=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Nh,h.FormsModule,Hs,Kg]]}),e})(),KS=(()=>{class e{constructor(e){this.listStoreFactory=e,this.recordList=e.create()}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e){this.recordList.init("history",!1,"list_max_entries_per_subpanel"),this.initViewContext(e)}load(e=!0){return this.recordList.load(e)}initSearchCriteria(e,t){this.recordList.criteria={preset:{type:"history-timeline",params:{parentModule:this.viewContext.module,parentId:this.viewContext.id,offset:e,limit:t}}}}initViewContext(e){this.viewContext=e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ZS=(()=>{class e{constructor(e){this.listStoreFactory=e}create(){return new KS(this.listStoreFactory)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(oc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),GS=(()=>{class e{constructor(e){this.historyTimelineStoreFactory=e,this.loading=!1,this.cache=[],this.dataStream=new r.BehaviorSubject(this.cache),this.dataStream$=this.dataStream.asObservable(),this.defaultPageSize=10}init(e){this.store=this.historyTimelineStoreFactory.create(),this.store.init(e)}fetchTimelineEntries(e){if(!0!==this.loading)return!0===e&&(this.cache.length=0),this.store.initSearchCriteria(this.cache.length,this.defaultPageSize),this.loading=!0,this.store.load(!1).pipe((0,o.take)(1)).subscribe(e=>{this.loading=!1;const t=e.records;(0,c.emptyObject)(t)||Object.keys(t).forEach(e=>{this.cache.push(this.buildTimelineEntry(t[e]))}),this.dataStream.next([...this.cache])}),this.dataStream$}getActivityGridColor(e){return{calls:"yellow",tasks:"green",meetings:"blue",notes:"orange",audit:"purple",history:"purple"}[e]||"yellow"}buildTimelineEntry(e){const t=e.module;let n=e.attributes.module_name;"audit"===t&&(n="History");const i={module:t,icon:n,color:this.getActivityGridColor(e.module),title:{type:"varchar",value:e.attributes.name},user:{type:"varchar",value:e.attributes.assigned_user_name.user_name},date:{type:"datetime",value:e.attributes.date_end},record:e};return"audit"===t&&(i.description={type:"html",value:e.attributes.description}),i}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ZS))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),HS=(()=>{class e{constructor(e){this.historyTimelineStoreFactory=e}create(){return new GS(this.historyTimelineStoreFactory)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ZS))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function WS(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275element(1,"scrm-loading-spinner",9),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("overlay",!0))}function qS(e,t){1&e&&i.\u0275\u0275element(0,"scrm-chart-message-area",10)}function QS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275elementStart(1,"small",25),i.\u0275\u0275element(2,"scrm-field",29),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("type",e.description.type)("field",e.description)("record",e.record)}}function YS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div",12),i.\u0275\u0275elementStart(2,"div",13),i.\u0275\u0275elementStart(3,"div",14),i.\u0275\u0275element(4,"scrm-image",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",12),i.\u0275\u0275elementStart(6,"div",16),i.\u0275\u0275element(7,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",18),i.\u0275\u0275elementStart(9,"div",19),i.\u0275\u0275elementStart(10,"div",20),i.\u0275\u0275elementStart(11,"p",21),i.\u0275\u0275element(12,"scrm-field",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,QS,3,3,"div",23),i.\u0275\u0275elementStart(14,"div",24),i.\u0275\u0275elementStart(15,"small",25),i.\u0275\u0275element(16,"scrm-field",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",26),i.\u0275\u0275elementStart(18,"small",27),i.\u0275\u0275element(19,"scrm-field",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275classMapInterpolate1("d-flex flex-row m-2 history-timeline-entry entry-",e.color,""),i.\u0275\u0275advance(4),i.\u0275\u0275property("image",e.icon),i.\u0275\u0275advance(8),i.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.description),i.\u0275\u0275advance(3),i.\u0275\u0275property("type",e.user.type)("field",e.user)("record",e.record),i.\u0275\u0275advance(3),i.\u0275\u0275property("type",e.date.type)("field",e.date)("record",e.record)}}function XS(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,YS,20,14,"div",11),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.length>0)}}const JS=function(e){return[e]};function eC(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275template(2,WS,2,1,"div",4),i.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",5),i.\u0275\u0275listener("scroll",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onScroll()}),i.\u0275\u0275template(4,qS,1,0,"scrm-chart-message-area",6),i.\u0275\u0275template(5,XS,2,1,"div",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",null==n.adapter?null:n.adapter.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(4,JS,e.length<=0?"history-timeline-viewport-no-data":"history-timeline-viewport")),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!(null!=n.adapter&&n.adapter.loading)&&e.length<=0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e)}}let tC=(()=>{class e extends AS{constructor(e,t){super(),this.historyTimelineAdapterFactory=e,this.languageStore=t,this.subscription=new r.Subscription}ngOnInit(){this.adapter=this.historyTimelineAdapterFactory.create(),this.adapter.init(this.context)}ngAfterViewInit(){const e=[];e.push(this.config.reload$),e.push(this.config.subpanelReload$);const t=["history","activities"],n=(0,r.combineLatest)(e).pipe((0,o.map)(([e,n])=>e||!!n&&t.some(e=>!!n[e]))).pipe((0,o.debounce)(()=>(0,r.timer)(1e3)));this.subscription.add(n.subscribe(e=>{e&&this.adapter.fetchTimelineEntries(!0)}))}ngOnDestroy(){this.subscription.unsubscribe()}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_QUICK_HISTORY")}onScroll(){if(!this.adapter)return;const e=this.virtualScroll.measureScrollOffset("bottom");0===(0,d.floor)(e)&&this.adapter.fetchTimelineEntries(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(HS),i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-history-timeline-widget"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(T.N7,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.virtualScroll=e.first)}},features:[i.\u0275\u0275ProvidersFeature([GS]),i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"title"],["widget-body","",4,"ngIf"],["widget-body",""],[1,"widget-background","history-timeline","p-2","pt-2"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["itemSize","100",1,"history-timeline-viewport",3,"ngClass","scroll"],["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],["labelKey","LBL_NO_DATA"],[3,"class",4,"ngIf"],[1,""],[1,"circle"],[1,"d-flex","justify-content-center","align-items-center","h-100","history-timeline-image"],[3,"image"],[1,"d-flex","justify-content-center","h-100"],[1,"connector","mt-3"],[1,"flex-grow-1"],[1,"card"],[1,"card-body","p-1","pr-2","pl-2"],[1,"card-title","text-break","history-timeline-entry-title"],["mode","list",3,"type","field","record"],["class","card-text history-timeline-entry-description",4,"ngIf"],[1,"card-text","history-timeline-entry-user","text-uppercase"],[1,"text-break"],[1,"card-text","text-break","history-timeline-entry-date"],[1,"font-italic"],[1,"card-text","history-timeline-entry-description"],["mode","detail",3,"type","field","record"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"scrm-widget-panel",0),i.\u0275\u0275template(1,eC,6,6,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("title",t.getHeaderLabel()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(2,2,null==t.adapter?null:t.adapter.dataStream$)))},directives:[Oh,p.NgIf,T.N7,T.xd,p.NgClass,p.NgForOf,Ug,Es,Eo,Ju],pipes:[p.AsyncPipe],encapsulation:2}),e})(),nC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,T.Cl,Lo,pp,Nh,Kg,hs,Ds]]}),e})();function iC(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275element(2,"scrm-label",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function rC(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-record-thread",5),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.recordThreadConfig)}}let oC=(()=>{class e extends AS{constructor(e,t){super(),this.language=e,this.sytemConfig=t,this.panelMode="none",this.subs=[]}ngOnInit(){this.options=(this.config.options||{}).recordThread||null,this.options&&(this.initPanelMode(),this.initFilters$(),this.initPresetFields$(),this.context$&&this.context$.subscribe()&&this.subs.push(this.context$.subscribe(e=>{this.context=e})),this.recordThreadConfig=this.getConfig())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getConfig(){var e;const t={filters$:this.filters$,presetFields$:this.presetFields$,module:this.options.module,klass:this.options.class||"",maxListHeight:null!==(e=this.options.maxListHeight)&&void 0!==e?e:350,direction:this.options.direction||"asc",create:!!this.options.create,itemConfig:{collapsible:this.options.item.collapsible||!1,collapseLimit:this.options.item.collapseLimit||null,klass:this.options.item.itemClass||"",dynamicClass:this.options.item.dynamicClass||[],metadata:{}},createConfig:{collapsible:!1,metadata:{}}};return this.setupItemMetadata(t.itemConfig.metadata,this.options.item.layout),this.setupItemMetadata(t.createConfig.metadata,this.options.create.layout),t}setupItemMetadata(e,t){t&&t.header&&(e.headerLayout=(0,c.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,c.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,c.deepClone)(t.actions))}initPanelMode(){var e,t,n,i;const r=this.sytemConfig.getConfigValue("ui"),o=null!==(t=null===(e=null==r?void 0:r.widget)||void 0===e?void 0:e.allowCollapse)&&void 0!==t?t:null,s=null!==(i=null===(n=null==this?void 0:this.config)||void 0===n?void 0:n.allowCollapse)&&void 0!==i?i:null;let a="none";null!==o&&((0,c.isTrue)(o)?a="collapsible":(0,c.isFalse)(o)&&(a="none")),null!==s&&((0,c.isTrue)(s)?a="collapsible":(0,c.isFalse)(s)&&(a="none")),this.panelMode=a}initFilters$(){if(!this.options||!this.options.filters||!this.context$)return;const e=this.options.filters.parentFilters||{};let t=(0,r.of)({}).pipe((0,o.shareReplay)());Object.keys(e).length>0&&(t=this.context$.pipe((0,o.filter)(e=>{const t=e&&e.record||{};return!(!t.attributes||!Object.keys(t.attributes).length)}))),this.filters$=t.pipe((0,o.map)(e=>{const t={filters:{}};this.initParentFilters(e,t);const n=this.options.filters.static||{};return t.filters=Object.assign(Object.assign({},t.filters),n),this.options.filters.orderBy&&(t.orderBy=this.options.filters.orderBy),this.options.filters.sortOrder&&(t.sortOrder=this.options.filters.sortOrder),t}),(0,o.distinctUntilChanged)())}initPresetFields$(){!this.options||!this.options.create||!this.options.create.presetFields||!this.context$||(this.presetFields$=this.context$.pipe((0,o.map)(e=>{const t=this.initParentValues(e),n=this.options.create.presetFields.static||{};return Object.assign(Object.assign({},t),n)}),(0,o.distinctUntilChanged)()))}initParentFilters(e,t){const n=this.options.filters.parentFilters||{};!e||!e.record||!n||Object.keys(n).forEach(i=>{const r=e.record.attributes[i]||"";!r||(t.filters[n[i]]={field:n,operator:"=",values:[r]})})}initParentValues(e){const t=this.options.create.presetFields.parentValues||{};if(!e||!e.record||!t)return;const n={};return Object.keys(t).forEach(i=>{const r=e.record.attributes[i]||"";!r||(n[t[i]]=r)}),n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-thread-sidebar-widget"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"mode","title"],["widget-body","",1,"record-thread-sidebar-widget"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"scrm-widget-panel",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,iC,3,0,"ng-container",2),i.\u0275\u0275template(3,rC,2,1,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("mode",t.panelMode)("title",t.getHeaderLabel()),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!t.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.options))},directives:[Oh,p.NgIf,To,CS],encapsulation:2}),e})(),sC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pp,Nh,hs,xS,wS]]}),e})(),aC=(()=>{class e extends AS{constructor(e){super(),this.language=e,this.subs=[]}ngOnInit(){this.options=(this.config.options||{}).sidebarStatistic||null,this.context$&&this.subs.push(this.context$.subscribe(e=>{this.context=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getGridConfig(){return{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:this.options,widgetConfig:{reload$:this.config.reload$},queryArgs:{module:this.context.module,context:this.context,params:{}}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-statistics-sidebar-widget"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"title"],["widget-body","",1,"p-3"],[3,"config"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"scrm-widget-panel",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275element(2,"scrm-grid-widget",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("title",t.getHeaderLabel()),i.\u0275\u0275advance(2),i.\u0275\u0275property("config",t.getGridConfig()))},directives:[Oh,bh],encapsulation:2}),e})(),lC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pp,Fc,Nh,Rh,hs]]}),e})();const cC=[nC,US,lC],dC={"history-timeline":tC,chart:zS,statistics:aC,"record-thread":oC};let uC=(()=>{class e extends c.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(dC).forEach(e=>{this.register("default",e,dC[e])})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function pC(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275element(2,"scrm-label",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("labelKey",e.getErrorMessage())}}const hC=function(e,t,n){return{config:e,context:t,context$:n}};function mC(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",5),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",i.\u0275\u0275pureFunction3(2,hC,e.config,e.context,e.context$))}}let fC=(()=>{class e extends AS{constructor(e){super(),this.registry=e}get componentType(){var e;const t=null!==(e=this.context.module)&&void 0!==e?e:"default";return this.registry.get(t,this.type)}getErrorMessage(){return this.type&&this.config?this.componentType?"LBL_BAD_CONFIG":"LBL_WIDGET_NOT_FOUND":"LBL_CONFIG_NO_CONFIG"}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(uC))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-sidebar-widget"]],inputs:{type:"type"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["class","d-flex mb-4 mt-4 justify-content-center",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[1,"d-flex","mb-4","mt-4","justify-content-center"],[1,"lead"],[3,"labelKey"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,pC,3,1,"div",0),i.\u0275\u0275template(1,mC,1,6,"ndc-dynamic",1)),2&e&&(i.\u0275\u0275property("ngIf",!(t.type&&t.config&&t.componentType)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.type&&t.config&&t.componentType))},directives:[p.NgIf,To,N,D],encapsulation:2}),e})(),gC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,...cC,R,hs]]}),e})();class vC extends c.ActionHandler{checkRecordAccess(e,t=[]){var n,i,r;const o=null!==(i=(null!==(n=e.record)&&void 0!==n?n:{}).acls)&&void 0!==i?i:[];if(!o||!o.length)return!1;const s=null!==(r=e.action)&&void 0!==r?r:null;return this.checkAccess(s,o,t)}}let yC=(()=>{class e extends vC{constructor(){super(),this.key="async-process",this.modes=c.ALL_VIEW_MODES}run(e){}shouldDisplay(e){var t,n;const i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),bC=(()=>{class e extends Ia{constructor(e){super(),this.async=e,e.modes.forEach(t=>this.actions[t][e.key]=e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(yC))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),SC=(()=>{class e extends eb{constructor(e,t,n,i,r,o,s,a){super(t,n,i,r,o,s,a),this.store=e,this.actionManager=t,this.asyncActionService=n,this.message=i,this.confirmation=r,this.language=o,this.selectModalService=s,this.metadata=a}getActions(e=null){return(0,r.combineLatest)([this.store.metadata$.pipe((0,o.map)(e=>e.lineActions)),(0,r.of)("list").pipe((0,o.shareReplay)())]).pipe((0,o.map)(([t,n])=>this.parseModeActions(t,n,e)))}buildActionData(e,t){return{record:t&&t.record||null,store:this.store,action:e}}getMode(){return"list"}getModuleName(e){return this.store.metadata.module}reload(e,t,n){this.store.load(!1).pipe((0,o.take)(1)).subscribe(),this.store.loadAllStatistics(!1).pipe((0,o.take)(1)).subscribe()}buildActionInput(e,t,n,i=null){const r=this.store.metadata,o=r.collection_list||null,s=i&&i.module||n;let a=r.get_subpanel_data;return o&&o[s]&&o[s].get_subpanel_data&&(a=o[s].get_subpanel_data),a&&e&&e.params&&e.params.linkFieldMapping&&Object.keys(e.params.linkFieldMapping).some(t=>{if(a.includes(t))return a=e.params.linkFieldMapping[t],!0}),{action:t,module:n,id:i&&i.record&&i.record.id||"",payload:{baseModule:this.store.parentModule,baseRecordId:this.store.parentId,linkField:a,recordModule:s,relateModule:this.store.metadata.module,relateRecordId:i&&i.record&&i.record.id||""}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Uv),i.\u0275\u0275inject(bC),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),CC=(()=>{class e{constructor(e,t,n,i,r,o,s){this.actionManager=e,this.asyncActionService=t,this.message=n,this.confirmation=i,this.language=r,this.selectModalService=o,this.metadata=s}create(e){return new SC(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(bC),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),wC=(()=>{class e{constructor(e,t,n){this.store=e,this.lineActionsAdapterFactory=t,this.preferences=n}getTable(){return{showHeader:!1,showFooter:!0,module:this.store.metadata.headerModule,columns:this.getColumns(),lineActions:this.getLineActions(),sort$:this.store.recordList.sort$,maxColumns$:(0,r.of)(5),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,pagination:this.store.recordList,toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,t)=>{this.store.recordList.updateSorting(e,t);const n=this.store.parentModule,i=this.store.recordList.getModule();this.preferences.setUi(n,i+"-subpanel-sort",{orderBy:e,sortOrder:t})}}}getColumns(){return this.store.metadata$.pipe((0,o.map)(e=>e.columns))}getLineActions(){return this.lineActionsAdapterFactory.create(this.store)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Uv),i.\u0275\u0275inject(CC),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),xC=(()=>{class e{constructor(e,t){this.lineActionsAdapterFactory=e,this.preferences=t}create(e){return new wC(e,this.lineActionsAdapterFactory,this.preferences)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(CC),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function IC(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-button-group",7),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("config$",e.config$)}}let EC=(()=>{class e{constructor(e,t,n,i){this.actionManager=e,this.languages=t,this.tableAdapterFactory=n,this.preferences=i}ngOnInit(){this.adapter=this.tableAdapterFactory.create(this.store),this.tableConfig=this.adapter.getTable(),this.maxColumns$&&(this.tableConfig.maxColumns$=this.maxColumns$);const e=this.store.parentModule,t=this.store.recordList.getModule(),n=this.preferences.getUi(e,t+"-subpanel-sort");n&&this.store.recordList.updateSorting(n.orderBy,n.sortOrder),this.config$=(0,r.of)(this.getButtonGroupConfig(this.buildAction())).pipe((0,o.shareReplay)(1)),this.closeButton={onClick:()=>{this.onClose&&this.onClose()}}}buildAction(){const e=[];return this.store.metadata&&this.store.metadata.top_buttons&&this.store.metadata.top_buttons.forEach(t=>{const n=this.languages.getFieldLabel(t.labelKey,t.module);e.push(Object.assign(Object.assign({},t),{label:n,params:{module:t.module}}))}),e}getButtonGroupConfig(e){const t=[];e.forEach(e=>{t.push(this.buildButton(e))});let n=1;t&&t.length>1&&(n=-1);const i=this.languages.getAppString("LBL_ACTIONS");return{buttons:t,breakpoint:n,dropdownLabel:i,buttonKlass:["btn","btn-sm","btn-outline-light"]}}buildButton(e){return{label:e.label||"",klass:"btn btn-sm btn-outline-light",onClick:()=>{this.actionManager.run(e.key,{subpanelMeta:this.store.metadata,module:e.params.module||this.store.metadata.module,parentModule:this.store.parentModule,parentId:this.store.parentId,store:this.store,action:e})}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Pg),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(xC),i.\u0275\u0275directiveInject(ua))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-subpanel"]],inputs:{store:"store",maxColumns$:"maxColumns$",onClose:"onClose"},features:[i.\u0275\u0275ProvidersFeature([wC])],decls:8,vars:5,consts:[["mode","closable","bodyPadding","0",3,"title","close"],["panel-icon-area","",1,"subpanel-icon","pl-1"],[3,"image"],["panel-header-button",""],[3,"config$",4,"ngIf"],["panel-body",""],[3,"config"],[3,"config$"]],template:function(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"scrm-panel",0),i.\u0275\u0275elementStart(2,"span",1),i.\u0275\u0275element(3,"scrm-image",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"span",3),i.\u0275\u0275template(5,IC,1,1,"scrm-button-group",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",5),i.\u0275\u0275element(7,"scrm-table",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("title",t.store.getTitle())("close",t.closeButton),i.\u0275\u0275advance(2),i.\u0275\u0275property("image",t.store.getIcon()),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.config$),i.\u0275\u0275advance(2),i.\u0275\u0275property("config",t.tableConfig))},directives:[jh,Eo,p.NgIf,Uy,ls],encapsulation:2}),e})(),_C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,I.NgbModule,Lo,Ah,u.RouterModule,gs,Hy]]}),e})();function MC(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"a",8),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).toggleSubPanels()}),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275element(2,"scrm-label",10),i.\u0275\u0275element(3,"scrm-image",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("image",e.toggleIcon),i.\u0275\u0275attribute("aria-expanded",!e.isCollapsed)}}const jC=function(e){return{"sub-panel-banner-button-active":e}};function kC(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",15),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext(3).showSubpanel(t.key,t.value)}),i.\u0275\u0275element(1,"scrm-grid-widget",16),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(2,jC,!0===e.value.show)),i.\u0275\u0275advance(1),i.\u0275\u0275property("config",n.getGridConfig(e.value))}}function LC(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",12),i.\u0275\u0275elementStart(1,"div",13),i.\u0275\u0275template(2,kC,2,4,"div",14),i.\u0275\u0275pipe(3,"keyvalue"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngbCollapse",t.isCollapsed),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(3,2,e.subpanels))}}function FC(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-subpanel",18),2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("maxColumns$",n.maxColumns$)("store",e)("onClose",n.getCloseCallBack(t,e))}}function OC(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,FC,1,3,"scrm-subpanel",17),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.show)}}function DC(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,OC,2,1,"ng-container",0),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.subpanels[e])}}function AC(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"ngb-accordion",1,2),i.\u0275\u0275elementStart(3,"ngb-panel",3),i.\u0275\u0275template(4,MC,4,2,"ng-template",4),i.\u0275\u0275template(5,LC,4,4,"ng-template",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",6),i.\u0275\u0275template(7,DC,2,1,"ng-container",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(7),i.\u0275\u0275property("ngForOf",e.openSubpanels)}}let NC=(()=>{class e{constructor(e,t,n,i){this.languageStore=e,this.maxColumnCalculator=t,this.localStorage=n,this.preferences=i,this.isCollapsed=!1,this.toggleIcon="arrow_down_filled",this.languages$=this.languageStore.vm$,this.openSubpanels=[]}ngOnInit(){var e,t,n,i;const r=null!==(t=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.parentModule)&&void 0!==t?t:"default";this.isCollapsed=(0,c.isTrue)(null!==(n=this.preferences.getUi(r,"subpanel-container-collapse"))&&void 0!==n&&n),this.openSubpanels=null!==(i=this.preferences.getUi(r,"subpanel-container-open-subpanels"))&&void 0!==i?i:[],this.vm$=this.config.subpanels$.pipe((0,o.map)(e=>({subpanels:e})),(0,o.tap)(e=>{!e||!Object.keys(e).length||!this.openSubpanels||this.openSubpanels.length<1||this.openSubpanels.forEach(t=>{const n=e.subpanels[t];!n||n.show||(n.show=!0,n.load().pipe((0,o.take)(1)).subscribe())})})),this.maxColumns$=this.getMaxColumns()}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.config.sidebarActive$)}toggleSubPanels(){var e,t;this.isCollapsed=!this.isCollapsed,this.toggleIcon=this.isCollapsed?"arrow_up_filled":"arrow_down_filled";const n=null!==(t=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.parentModule)&&void 0!==t?t:"default";this.preferences.setUi(n,"subpanel-container-collapse",this.isCollapsed)}showSubpanel(e,t){var n,i;t.show=!t.show,t.show?(this.openSubpanels.includes(e)||this.openSubpanels.push(e),t.load().pipe((0,o.take)(1)).subscribe()):this.openSubpanels=this.openSubpanels.filter(t=>t!=e);const r=null!==(i=null===(n=null==this?void 0:this.config)||void 0===n?void 0:n.parentModule)&&void 0!==i?i:"default";this.preferences.setUi(r,"subpanel-container-open-subpanels",this.openSubpanels)}getCloseCallBack(e,t){return()=>this.showSubpanel(e,t)}getGridConfig(e){if(!e.metadata||!e.metadata.insightWidget)return{layout:null};const t=e.getWidgetLayout();return t.rows.forEach(t=>{!t.cols||!t.cols.length||t.cols.forEach(t=>{if(!t.statistic)return;const n=e.getStatistic(t.statistic);n&&(t.store=n)})}),{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:t,widgetConfig:{},queryArgs:{module:e.metadata.name,context:{module:e.parentModule,id:e.parentId},params:{subpanel:e.metadata.name}}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(fc),i.\u0275\u0275directiveInject(io),i.\u0275\u0275directiveInject(ua))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-subpanel-container"]],inputs:{config:"config"},features:[i.\u0275\u0275ProvidersFeature([fc])],decls:2,vars:3,consts:[[4,"ngIf"],["activeIds","sub-panel-buttons",1,"sub-panel-banner"],["accordion","ngbAccordion"],["id","sub-panel-buttons"],["ngbPanelHeader",""],["ngbPanelContent",""],["id","sub-panels"],[4,"ngFor","ngForOf"],[1,"clickable",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],["labelKey","LBL_SELECT_SUBPANEL_BANNER"],["aria-controls","collapseShowSubPanels",1,"float-right",3,"image"],["id","collapseShowSubPanels",3,"ngbCollapse"],[1,"row","insight-panel"],["class","col-xs-6 col-sm-3 col-md-2 insight-panel-card border-insight",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-xs-6","col-sm-3","col-md-2","insight-panel-card","border-insight",3,"ngClass","click"],[3,"config"],["class","sub-panel",3,"maxColumns$","store","onClose",4,"ngIf"],[1,"sub-panel",3,"maxColumns$","store","onClose"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,AC,8,1,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,I.NgbAccordion,I.NgbPanel,I.NgbPanelHeader,I.NgbPanelContent,p.NgForOf,To,Eo,I.NgbCollapse,p.NgClass,bh,EC],pipes:[p.AsyncPipe,p.KeyValuePipe],encapsulation:2}),e})(),RC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,I.NgbModule,Lo,u.RouterModule,_C,Fc,pp,Rh,hs]]}),e})();function TC(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"uppercase"),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,e.appStrings[t.messageLabelKey]||"")," ")}}function PC(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"uppercase"),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,t.getLabel(e.value.labelKey)),": ")}}function BC(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",12),i.\u0275\u0275element(1,"scrm-field",13),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("type",t.statistics[e.key].field.type)("field",t.statistics[e.key].field)}}function $C(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,BC,2,2,"div",11),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.statistics[e.key].loading&&t.statistics[e.key].field)}}function VC(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," - "),i.\u0275\u0275elementContainerEnd())}function zC(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275element(1,"scrm-inline-loading-spinner"),i.\u0275\u0275template(2,VC,2,0,"ng-container",7),i.\u0275\u0275elementEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!(e||n.key&&r.statistics[n.key]))}}function UC(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",15),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"uppercase"),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,t.getLabel(e.value.endLabelKey))," ")}}function KC(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275template(2,PC,3,3,"div",6),i.\u0275\u0275template(3,$C,2,1,"ng-container",7),i.\u0275\u0275template(4,zC,3,1,"div",8),i.\u0275\u0275pipe(5,"async"),i.\u0275\u0275template(6,UC,3,3,"div",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext().ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.value.labelKey&&r.getLabel(e.value.labelKey)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.key&&n.statistics[e.key]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(5,4,e.value.store.loading$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.value.endLabelKey&&r.getLabel(e.value.endLabelKey))}}function ZC(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,TC,3,3,"div",2),i.\u0275\u0275template(2,KC,7,6,"ng-container",3),i.\u0275\u0275pipe(3,"keyvalue"),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.messageLabelKey),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(3,2,e.statistics))}}let GC=(()=>{class e extends AS{constructor(e,t){super(),this.language=e,this.factory=t,this.statistics={},this.loading=!0,this.subs=[]}ngOnInit(){if(!this.context||!this.context.module)return void(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT");if(!this.config)return void(this.messageLabelKey="LBL_CONFIG_NO_CONFIG");if(!this.config.options||!this.config.options.statistics||!this.config.options.statistics.length)return void(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY");this.context$&&this.subs.push(this.context$.subscribe(e=>{this.context=e}));const e=[],t=[];this.config.options.statistics.forEach(n=>{!n.type||(this.statistics[n.type]={labelKey:n.labelKey||"",endLabelKey:n.endLabelKey||"",type:n.type,store:this.factory.create()},this.statistics[n.type].store.init(this.context.module,{key:n.type,context:Object.assign({},this.context)}).pipe((0,o.take)(1)).subscribe(),e.push(this.statistics[n.type].store.state$),t.push(this.statistics[n.type].store.loading$))}),this.loading$=(0,r.combineLatest)(t).pipe((0,o.map)(e=>{if(!e||e.length<1)return this.loading=!1,!1;let t=!0;return e.forEach(e=>{t=t&&e}),this.loading=t,t})),this.subs.push(this.loading$.subscribe()),this.vm$=(0,r.combineLatest)([(0,r.combineLatest)(e),this.language.appStrings$]).pipe((0,o.map)(([e,t])=>{const n={};return e.forEach(e=>{n[e.query.key]=e,this.statistics[e.query.key].labelKey=this.getMetadataEntry(e,"labelKey"),this.statistics[e.query.key].endLabelKey=this.getMetadataEntry(e,"endLabelKey")}),{statistics:n,appStrings:t}})),this.config.reload$&&this.subs.push(this.config.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,this.config.options.statistics.forEach(e=>{!e.type||!this.statistics[e.type]||!this.statistics[e.type].store||this.statistics[e.type].store.load(!1).pipe((0,o.take)(1)).subscribe()}))}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getMetadataEntry(e,t){const n=e.statistic.metadata&&e.statistic.metadata[t];return null!=n?n:this.statistics[e.query.key][t]}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ih))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-statistics-top-widget"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["class","d-flex justify-content-center widget-bar rounded",4,"ngIf"],[1,"d-flex","justify-content-center","widget-bar","rounded"],["class","p-2 widget-bar-entry-message",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-2","widget-bar-entry-message"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],["class","pr-1 widget-bar-entry-label",4,"ngIf"],[4,"ngIf"],["class","pl-1 pr-1 widget-bar-entry-loading",4,"ngIf"],["class","pl-1 widget-bar-entry-end-label",4,"ngIf"],[1,"pr-1","widget-bar-entry-label"],["class","pl-1 pr-1 widget-bar-entry-value",4,"ngIf"],[1,"pl-1","pr-1","widget-bar-entry-value"],["mode","list",3,"type","field"],[1,"pl-1","pr-1","widget-bar-entry-loading"],[1,"pl-1","widget-bar-entry-end-label"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,ZC,4,4,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,p.NgForOf,Ju,Lc],pipes:[p.AsyncPipe,p.KeyValuePipe,p.UpperCasePipe],encapsulation:2}),e})(),HC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pp,Fc]]}),e})();const WC=[HC],qC={statistics:GC},QC=function(e,t){return{config:e,context:t}};function YC(e,t){if(1&e&&i.\u0275\u0275element(0,"ndc-dynamic",1),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",i.\u0275\u0275pureFunction2(2,QC,e.config,e.context))}}let XC=(()=>{class e extends AS{constructor(){super(...arguments),this.map=qC}get componentType(){return this.map[this.type]}ngOnInit(){this.component=this.componentType,this.inputs={config:this.config,context:this.context}}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.\u0275\u0275getInheritedFactory(e)))(n||e)}}(),e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-top-widget"]],inputs:{type:"type"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,YC,1,5,"ndc-dynamic",0),2&e&&i.\u0275\u0275property("ngIf",t.type&&t.config)},directives:[p.NgIf,N,D],encapsulation:2}),e})(),JC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,...WC,R]]}),e})(),ew=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,R]]}),e})(),tw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),nw=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dynamicenum-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&i.\u0275\u0275text(0),2&e&&i.\u0275\u0275textInterpolate1("\n",t.valueLabel,"\n")},encapsulation:2}),e})(),iw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,h.FormsModule]]}),e})();const rw=["tag"];let ow=(()=>{class e extends Ba{constructor(e,t,n){super(e,t,n),this.languages=e,this.typeFormatter=t,this.logic=n}ngOnInit(){super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dynamicenum-edit"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(rw,5),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.tag=e.first)}},features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tag-input",0,1),i.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValues=e})("onAdd",function(e){return t.onAdd(e)})("onRemove",function(){return t.onRemove()}),i.\u0275\u0275element(2,"tag-input-dropdown",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("ngModel",t.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel())("inputClass",t.getInvalidClass()),i.\u0275\u0275advance(2),i.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",t.options))},directives:[pr.TagInputComponent,h.NgControlStatus,h.NgModel,pr.TagInputDropdown],encapsulation:2}),e})(),sw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pr.TagInputModule,h.FormsModule]]}),e})(),aw=(()=>{class e extends Ta{constructor(e,t){super(e,t),this.typeFormatter=e,this.logic=t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ya),i.\u0275\u0275directiveInject(Ra))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-email-detail"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&i.\u0275\u0275text(0),2&e&&i.\u0275\u0275textInterpolate1("\n",t.field.value,"\n")},encapsulation:2}),e})(),lw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),cw=(()=>{class e{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.sanitize(i.SecurityContext.HTML,e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject($r.H7,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"htmlSanitize",type:e,pure:!0}),e})(),dw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),uw=(()=>{class e{constructor(e,t,n,i,r,o,s){this.message=e,this.router=t,this.authService=n,this.preferences=i,this.asyncActionService=r,this.appState=o,this.routeConverter=s}canActivate(e){return this.authorizeUser(e)}authorizeUser(e){return(0,r.forkJoin)({session:this.authorizeUserSession(e),acl:this.authorizeUserACL(e)}).pipe((0,o.map)(({session:e,acl:t})=>e instanceof u.UrlTree?e:(t instanceof u.UrlTree||e)&&t))}authorizeUserACL(e){var t,n;const i=this.routeConverter.parseRouteURL(e.url),s=null!==(t=this.appState.getRouteUrl())&&void 0!==t?t:"";if(!i.module||"home"===i.module)return(0,r.of)(!0);const a=this.router.parseUrl(""),l="user-acl",d={action:l,module:i.module,payload:{routeAction:i.action,record:i.record,routeURL:s,queryParams:null!==(n=null==e?void 0:e.queryParams)&&void 0!==n?n:[]}};return this.asyncActionService.run(l,d).pipe((0,o.take)(1),(0,o.map)(e=>{if(e.data&&!0===e.data.result)return!0;if((0,c.isEmptyString)(s))return a;const t=this.router.parseUrl(this.router.url);return!!this.routeConverter.isClassicViewRoute(t)&&t}),(0,o.catchError)(()=>(0,r.of)(a)),(0,o.tap)(e=>e))}authorizeUserSession(e){if(this.authService.isUserLoggedIn.value&&!0!==e.data.checkSession)return(0,r.of)(!0);const t=this.router.parseUrl("Login");return this.authService.fetchSessionStatus().pipe((0,o.take)(1),(0,o.map)(e=>e&&!1===e.appStatus.installed?this.router.parseUrl("install"):e&&!0===e.active?(this.authService.setCurrentUser(e),!0):(this.authService.resetState(),t)),(0,o.catchError)(()=>(this.authService.logout("LBL_SESSION_EXPIRED",!1),(0,r.of)(t))),(0,o.tap)(e=>{!0===e&&this.authService.isUserLoggedIn.next(!0)}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(Kp),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(no),i.\u0275\u0275inject(zh))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pw=(()=>{class e{intercept(e,t){return t.handle(e).pipe((0,o.catchError)(e=>(0,r.throwError)(e.error.message||e.statusText)))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),hw=(()=>{class e{constructor(e,t,n,i,r,o){this.systemConfigStore=e,this.authService=t,this.router=n,this.routeConverter=i,this.asyncActionService=r,this.message=o}canActivate(e){return this.canActivateWebInstallation(e)}canActivateWebInstallation(e){const t=this.systemConfigStore.getHomePage(),n=this.router.parseUrl(t);return this.authService.fetchSessionStatus().pipe((0,o.take)(1),(0,o.map)(e=>e&&!0===e.appStatus.locked&&!0===e.appStatus.installed?(this.message.addDangerMessageByKey("LBL_DISABLED_TITLE_2"),!(!e||!1!==e.active)&&n):(e&&!0===e.active&&(this.authService.logout("",!1),this.authService.isUserLoggedIn.next(!1)),!0)),(0,o.catchError)(()=>(0,r.of)(!0)))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(Kp),i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(zh),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),mw=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.authService=t,this.systemConfigStore=n,this.appStateStore=i,this.message=r}canActivate(){const e=this.systemConfigStore.getHomePage(),t=this.router.parseUrl(e);return this.authService.isUserLoggedIn.value?t:this.authService.fetchSessionStatus().pipe((0,o.take)(1),(0,o.map)(e=>e&&!1===e.appStatus.installed?this.router.parseUrl("install"):!e||!0!==e.active||(this.authService.setCurrentUser(e),t)),(0,o.catchError)(()=>(0,r.of)(!0)))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(Kp),i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(no),i.\u0275\u0275inject(Jl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fw=(()=>{class e{constructor(e,t){this.systemConfigStore=e,this.compiler=t}load(e){const t=this.systemConfigStore.getConfigValue("extensions"),n={};return Object.keys(t).forEach(i=>{if(!t[i])return;const r=t[i];!r.remoteEntry||!r.remoteName||!r.enabled||(0,c.isFalse)(r.enabled)||(n[i]=this.loadExtension(r,e))}),Object.keys(n).length<1?(0,r.of)({}):(0,r.forkJoin)(n)}loadExtension(e,t){return this.loadModuleFactory(()=>Kr({remoteEntry:e.remoteEntry,remoteName:e.remoteName,exposedModule:"./Module"}).then(e=>e.ExtensionModule)).pipe((0,o.map)(e=>e.create(t)))}isPromise(e){return!!e&&"function"==typeof e.then}wrapIntoObservable(e){return(0,r.isObservable)(e)?e:this.isPromise(e)?(0,r.from)(Promise.resolve(e)):(0,r.of)(e)}loadModuleFactory(e){return this.wrapIntoObservable(e()).pipe((0,o.mergeMap)(e=>e instanceof i.NgModuleFactory?(0,r.of)(e):(0,r.from)(this.compiler.compileModuleAsync(e))))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(i.Compiler))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),gw=(()=>{class e{constructor(e,t,n,i,r,o,s,a,l,c){this.systemConfigStore=e,this.languageStore=t,this.navigationStore=n,this.userPreferenceStore=i,this.themeImagesStore=r,this.appState=o,this.moduleNameMapper=s,this.messageService=a,this.appMetadata=l,this.auth=c}resolve(e){const t=this.calculateActiveModule(e);return this.appMetadata.load(t).pipe((0,o.tap)(()=>{this.auth.isLoggedIn()&&setTimeout(()=>{this.appMetadata.loadModuleMetadata(t).pipe((0,o.take)(1)).subscribe()},0)}))}sequentialLoad(e){const t={};if(this.isToLoadNavigation(e)&&(t.navigation=this.navigationStore.load()),this.isToLoadConfigs(e)){let n=this.systemConfigStore.load();if(this.isToLoadLanguageStrings(e)){const t=this.getLanguagesToLoad(e);n=n.pipe((0,o.map)(e=>{let n=e.default_language.value;const i=this.languageStore.getCurrentLanguage();return i&&(n=i),this.languageStore.load(n,t)}),(0,o.concatAll)(),(0,o.toArray)())}t.configs=n}return this.isToLoadUserPreferences(e)&&(t.preferences=this.userPreferenceStore.load()),(0,r.forkJoin)(t).pipe((0,o.map)(e=>{let t=null;return this.systemConfigStore.getConfigValue("default_theme")&&(t=this.systemConfigStore.getConfigValue("default_theme")),this.userPreferenceStore.getUserPreference("user_theme")&&(t=this.userPreferenceStore.getUserPreference("user_theme")),this.themeImagesStore.getTheme()&&(t=this.themeImagesStore.getTheme()),null!==t?this.themeImagesStore.load(t):e}),(0,o.concatAll)(),(0,o.toArray)(),(0,o.tap)(()=>this.appState.setLoaded(!0)))}getLanguagesToLoad(e){let t=this.languageStore.getAvailableStringsTypes();return this.isToLoadNavigation(e)?t:e.data&&e.data.load?(Array.isArray(e.data.load.languageStrings)&&(t=e.data.load.languageStrings),t):[]}isToLoadLanguageStrings(e){return!!this.isToLoadNavigation(e)||!(!e.data||!e.data.load)&&(Array.isArray(e.data.load.languageStrings)||!0===e.data.load.languageStrings)}isToLoadConfigs(e){return!e.data||!e.data.load||!1!==e.data.load.configs}isToLoadNavigation(e){return!e.data||!e.data.load||!1!==e.data.load.navigation}isToLoadUserPreferences(e){return!e.data||!e.data.load||!1!==e.data.load.preferences}addMetadataLoadErrorMessage(){let e=this.languageStore.getAppString("LBL_ERROR_FETCHING_METADATA");e||(e="Error occurred while fetching metadata"),this.messageService.addDangerMessage(e)}calculateActiveModule(e){var t,n;let i=e.params.module;i||(i=e.data.module);const r=null!==(n=null===(t=null==e?void 0:e.url[0])||void 0===t?void 0:t.path)&&void 0!==n?n:"";!i&&""!==r&&(i=r);const o=this.getParentModuleMap()[i]||"",s=e.queryParams[o]||"";return s&&(i=this.moduleNameMapper.toFrontend(s)),i}getParentModuleMap(){return{"merge-records":"return_module",import:"import_module"}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(So),i.\u0275\u0275inject(no),i.\u0275\u0275inject(jl),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(zp),i.\u0275\u0275inject(Kp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),vw=(()=>{class e extends gw{constructor(e,t,n,i,r,o,s,a,l,c,d,u){super(e,t,n,i,r,s,o,l,d,u),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=n,this.userPreferenceStore=i,this.themeImagesStore=r,this.moduleNameMapper=o,this.appStateStore=s,this.metadataStore=a,this.messageService=l,this.routeConverter=c,this.appMetadata=d,this.auth=u}resolve(e){let t=e.params.module;return t||(t=e.data.module),super.resolve(e).pipe((0,o.concatMap)(()=>(0,r.forkJoin)({metadata:this.metadataStore.load(t,this.metadataStore.getMetadataTypes()),savedSearchMeta:this.metadataStore.getMetadata("saved-search",["recordView"])})),(0,o.map)(e=>{var t,n,i;return{base:null!==(t=e[0])&&void 0!==t?t:{},metadata:null!==(n=e[1])&&void 0!==n?n:{},savedSearchMeta:null!==(i=e[2])&&void 0!==i?i:{}}}),(0,o.tap)(()=>{var n;if(t){const t=this.calculateActiveModule(e);this.appStateStore.setModule(t)}const i=null!==(n=this.routeConverter.parseRouteURL(e.url).action)&&void 0!==n?n:"index";this.appStateStore.setView(i)},()=>{this.addMetadataLoadErrorMessage()}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(So),i.\u0275\u0275inject(jl),i.\u0275\u0275inject(no),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(zh),i.\u0275\u0275inject(zp),i.\u0275\u0275inject(Kp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),yw=(()=>{class e{constructor(e,t){this.metadata=e,this.processService=t}onNavigationAdd(e,t){var n,i;let r="detail";const o=t&&t.data||{};o.mode&&(r=o.mode);const s=null!==(i=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.record)&&void 0!==i?i:null;if(s&&"create"!==r){const t=this.buildRecentlyViewed(e,s);this.addRecentlyViewed(e,t)}}buildRecentlyViewed(e,t,n="detailview"){return(0,c.deepClone)({module:"Tracker",type:"Tracker",attributes:{module_name:null!=e?e:"",item_id:null!=t?t:"",action:null!=n?n:""}})}addRecentlyViewed(e,t){this.saveRecentlyViewed(e,t)}saveRecentlyViewed(e,t){const n={recentlyViewed:t};setTimeout(()=>{this.processService.submit("add-recently-viewed",n).pipe((0,o.take)(1)).subscribe(n=>{var i,r,o,s,a,l,c,d;const u={id:null!==(i=t.id)&&void 0!==i?i:"",module:null!==(r=t.module)&&void 0!==r?r:"",attributes:Object.assign({},null!==(o=t.attributes)&&void 0!==o?o:{})},p=null!==(a=null===(s=null==n?void 0:n.data)||void 0===s?void 0:s.tracker)&&void 0!==a?a:null;if(null===p)return;u.attributes.item_summary=p.item_summary;const h=null!==(c=null===(l=null==u?void 0:u.attributes)||void 0===l?void 0:l.item_id)&&void 0!==c?c:"",m=this.metadata.getModuleMeta(e),f=null!==(d=null==m?void 0:m.recentlyViewed)&&void 0!==d?d:null;if(f){let e=f.filter(e=>{var t,n;return(null!==(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.item_id)&&void 0!==n?n:"")!==h});e.unshift(u),m.recentlyViewed=e}this.metadata.setModuleMetadata(e,m)})},500)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(pc),i.\u0275\u0275inject(so))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),bw=(()=>{class e extends vw{constructor(e,t,n,i,r,o,s,a,l,c,d,u,p,h,m){super(e,t,n,r,o,s,l,i,c,d,p,h),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=n,this.metadataStore=i,this.userPreferenceStore=r,this.themeImagesStore=o,this.moduleNameMapper=s,this.actionNameMapper=a,this.appStateStore=l,this.messageService=c,this.routeConverter=d,this.router=u,this.appMetadata=p,this.auth=h,this.recentlyViewed=m}resolve(e){let t=e.params.module;return t||(t=e.data.module),super.resolve(e).pipe((0,o.concatMap)(()=>(0,r.forkJoin)({metadata:this.metadataStore.load(t,this.metadataStore.getMetadataTypes())})),(0,o.tap)(()=>{this.auth.isLoggedIn()&&this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(So),i.\u0275\u0275inject(jl),i.\u0275\u0275inject(kl),i.\u0275\u0275inject(no),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(zh),i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(zp),i.\u0275\u0275inject(Kp),i.\u0275\u0275inject(yw))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Sw=(()=>{class e{constructor(e,t){this.processService=e,this.appStateStore=t,this.processType="recover-password"}run(e,t){const n={username:e,useremail:t};return this.appStateStore.updateLoading("recover-password",!0,!1),this.processService.submit(this.processType,n).pipe((0,o.tap)(()=>this.appStateStore.updateLoading("recover-password",!1,!1)),(0,o.catchError)(e=>{throw this.appStateStore.updateLoading("recover-password",!1,!1),e}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(so),i.\u0275\u0275inject(no))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Cw=(()=>{class e{constructor(e){this.http=e}getAll(){return this.http.get("users")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(mr.HttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ww=(()=>{class e{constructor(e){this.fetchGQL=e}create(){return new ES(this.fetchGQL)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xw=(()=>{class e{constructor(e){this.fetchGQL=e}create(){return new eh(this.fetchGQL)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Xp))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Iw=["dataContainer"];let Ew=(()=>{class e{constructor(e,t,n,i,r,o,s){this.route=e,this.router=t,this.sanitizer=n,this.routeConverter=i,this.auth=r,this.ngZone=o,this.systemConfigs=s,this.iframe=null}ngOnInit(){this.url=this.route.snapshot.data.legacyUrl}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onPageChange(e){if(!1===this.shouldRedirect(e))return this.iframe.style.display="block",this.cleanObservers(),void this.initObservers();const t=this.routeConverter.toFrontEndRoute(e);"/users/login"!==t?this.ngZone.run(()=>this.router.navigateByUrl(t).then()).then():this.auth.logout("LBL_SESSION_EXPIRED")}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new Fg(this.iframe,this.onPageChange.bind(this),this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new Lg}shouldRedirect(e){if(e&&e.includes("/#/"))return!0;const t=this.routeConverter.parse(e);return!(!t||!t.module||!0===this.routeConverter.matchesActiveRoute(this.route,t))&&(!t.action||this.toExclude(t))}toExclude(e){const t=this.systemConfigs.getConfigValue("classicview_routing_exclusions");if(!t||0===Object.keys(t).length)return!0;if(t.any&&t.any.includes(e.action))return!1;if(!t[e.module])return!0;const n=t[e.module];return!(n&&n.includes(e.action))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(u.ActivatedRoute),i.\u0275\u0275directiveInject(u.Router),i.\u0275\u0275directiveInject($r.H7),i.\u0275\u0275directiveInject(zh),i.\u0275\u0275directiveInject(Kp),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(Qr))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-classic-view-ui"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(Iw,7),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.dataContainer=e.first)}},decls:3,vars:0,consts:[[1,"classic-view-container"],["dataContainer",""]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0,1),i.\u0275\u0275element(2,"iframe"),i.\u0275\u0275elementEnd())},encapsulation:2}),e})(),_w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),e})(),Mw=(()=>{class e extends gw{constructor(e,t,n,i,r,o,s,a,l,c,d,u,p){super(e,t,n,i,r,l,o,a,c,d),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=n,this.userPreferenceStore=i,this.themeImagesStore=r,this.moduleNameMapper=o,this.routeConverter=s,this.messageService=a,this.appStateStore=l,this.appMetadata=c,this.auth=d,this.recentlyViewed=u,this.metadataStore=p}resolve(e){const t=this.calculateActiveModule(e);return super.resolve(e).pipe((0,o.concatMap)(()=>(0,r.forkJoin)({metadata:this.metadataStore.load(t,this.metadataStore.getMetadataTypes())})),(0,o.map)(()=>this.routeConverter.toLegacy(e.params,e.queryParams)),(0,o.tap)(()=>{var t;if(e.params.module){const t=this.calculateActiveModule(e);this.appStateStore.setModule(t)}const n=null!==(t=this.routeConverter.parseRouteURL(e.url).action)&&void 0!==t?t:"index";this.appStateStore.setView(n),this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)},()=>{this.addMetadataLoadErrorMessage()}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Qr),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(ua),i.\u0275\u0275inject(So),i.\u0275\u0275inject(jl),i.\u0275\u0275inject(zh),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(no),i.\u0275\u0275inject(zp),i.\u0275\u0275inject(Kp),i.\u0275\u0275inject(yw),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),jw=(()=>{class e extends Jv{constructor(e,t,n,i,r,o,s,a,l,c,d,u,p,h,m){super(e,t,n,i,r,o,s,a,l,c,d,u,h,m),this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=n,this.languageStore=i,this.navigationStore=r,this.moduleNavigation=o,this.metadataStore=s,this.localStorage=a,this.message=l,this.subpanelFactory=c,this.recordManager=d,this.statisticsBatch=u,this.auth=p,this.recordStoreFactory=h,this.preferences=m}init(e,t,n="detail",i={}){return this.internalState.module=e,this.internalState.recordID=t,this.setMode(n),this.parseParams(i),this.calculateShowWidgets(),this.showTopWidget=!1,this.showSubpanels=!1,this.initRecord(i),this.load()}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!0),this.recordStore.save().pipe((0,o.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,r.of)({}))),(0,o.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!1)}))}initRecord(e={}){const t=this.auth.getCurrentUser(),n={id:"",type:"",module:this.internalState.module,attributes:{assigned_user_id:t.id,assigned_user_name:{id:t.id,user_name:t.userName}}};this.recordManager.injectParamFields(e,n,this.getVardefs()),this.recordStore.init(n)}load(){return(0,r.of)(this.recordStore.getBaseRecord()).pipe((0,o.shareReplay)())}calculateShowWidgets(){this.showSidebarWidgets=!1,this.widgets=!1}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gv),i.\u0275\u0275inject(zv),i.\u0275\u0275inject(no),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pp),i.\u0275\u0275inject(Fl),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(io),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Kv),i.\u0275\u0275inject(Iu),i.\u0275\u0275inject(Hv),i.\u0275\u0275inject(Kp),i.\u0275\u0275inject(Yv),i.\u0275\u0275inject(ua))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class kw extends c.ActionHandler{checkRecordAccess(e,t=[]){var n,i;const r=null!==(n=e.store.recordStore.getBaseRecord().acls)&&void 0!==n?n:[];if(!r||!r.length)return!1;const o=null!==(i=e.action)&&void 0!==i?i:null;return this.checkAccess(o,r,t)}navigateBack(e,t,n,i,r){let o=e.getReturnModule(t),s=e.getReturnAction(t),a=e.getReturnId(t);n!==a&&(o===i&&"record"===s&&a!==n||!o||!s||e.navigateBack(r,i,t))}}let Lw=(()=>{class e extends kw{constructor(e,t){super(),this.modalService=e,this.navigation=t,this.key="cancel",this.modes=["edit","detail"]}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const t=e.store.params,n=e.store.getModuleName(),i=e.store.getRecordId(),r=e.store.getBaseRecord();this.navigateBack(this.navigation,t,i,n,r),e.store.recordStore.resetStaging(),e.store.setMode("detail")}showConfirmationModal(e){const t=this.modalService.open(Ec);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:e=>e.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:t=>{this.cancel(e),t.close()}}]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(I.NgbModal),i.\u0275\u0275inject(Fl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fw=(()=>{class e extends kw{constructor(e,t){super(),this.message=e,this.navigation=t,this.key="save",this.modes=["edit"]}run(e){e.store.recordStore.validate().pipe((0,o.take)(1)).subscribe(t=>{t?e.store.save().pipe((0,o.take)(1)).subscribe(t=>{const n=e.store.params,i=e.store.getModuleName();this.navigateBack(this.navigation,n,t.id,i,t)}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Fl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ow=(()=>{class e extends kw{constructor(){super(),this.key="toggle-widgets",this.modes=["detail","edit"]}run(e){e.store.showSidebarWidgets=!e.store.showSidebarWidgets}shouldDisplay(e){return e.store.widgets}getStatus(e){return e.store.showSidebarWidgets?"active":""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Dw=(()=>{class e extends kw{constructor(){super(),this.key="edit",this.modes=["detail"]}run(e){e.store.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Aw=(()=>{class e extends kw{constructor(e,t){super(),this.moduleNameMapper=e,this.router=t,this.key="create",this.modes=["detail"]}run(e){const t=e.store,n=t.getBaseRecord(),i="/"+t.vm.appData.module.name+"/edit",r=this.moduleNameMapper.toLegacy(t.vm.appData.module.name);this.router.navigate([i],{queryParams:{return_module:r,return_action:"DetailView",return_record:n&&n.id||""}}).then()}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(jl),i.\u0275\u0275inject(u.Router))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Nw=(()=>{class e extends kw{constructor(e,t){super(),this.message=e,this.navigation=t,this.key="saveNew",this.modes=["create"]}run(e){e.store.recordStore.validate().pipe((0,o.take)(1)).subscribe(t=>{t?e.store.save().pipe((0,o.take)(1)).subscribe(t=>{const n=e.store,i=n.params,r=n.getModuleName();this.navigation.navigateBack(t,r,i)}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Fl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Rw=(()=>{class e extends kw{constructor(e,t,n,i){super(),this.modalService=e,this.router=t,this.moduleNameMapper=n,this.actionNameMapper=i,this.key="cancelCreate",this.modes=["create"]}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const t=e.store;let n=t.getModuleName();t.params.return_module&&(n=this.moduleNameMapper.toFrontend(t.params.return_module));let i=t.params.return_action||"";const r=t.params.return_id||"";let o="/"+n;i&&(i=this.actionNameMapper.toFrontend(i),("record"!==i||r)&&(o+="/"+i)),r&&(o+="/"+r),this.router.navigate([o]).then()}showConfirmationModal(e){const t=this.modalService.open(Ec);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:e=>e.dismiss()},{labelKey:"LBL_OK",klass:["btn-main"],onClick:t=>{this.cancel(e),t.close()}}]}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(I.NgbModal),i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(jl),i.\u0275\u0275inject(kl))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Tw=(()=>{class e extends kw{constructor(){super(),this.key="async-process",this.modes=c.ALL_VIEW_MODES}run(e){}shouldDisplay(e){var t,n;const i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pw=(()=>{class e extends Ia{constructor(e,t,n,i,r,o,s,a){super(),this.edit=e,this.create=t,this.toggleWidgets=n,this.cancel=i,this.cancelCreate=r,this.save=o,this.saveNew=s,this.async=a,e.modes.forEach(t=>this.actions[t][e.key]=e),t.modes.forEach(e=>this.actions[e][t.key]=t),n.modes.forEach(e=>this.actions[e][n.key]=n),i.modes.forEach(e=>this.actions[e][i.key]=i),o.modes.forEach(e=>this.actions[e][o.key]=o),s.modes.forEach(e=>this.actions[e][s.key]=s),r.modes.forEach(e=>this.actions[e][r.key]=r),a.modes.forEach(e=>this.actions[e][a.key]=a)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Dw),i.\u0275\u0275inject(Aw),i.\u0275\u0275inject(Ow),i.\u0275\u0275inject(Lw),i.\u0275\u0275inject(Rw),i.\u0275\u0275inject(Fw),i.\u0275\u0275inject(Nw),i.\u0275\u0275inject(Tw))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Bw=(()=>{class e extends eb{constructor(e,t,n,i,r,o,s,a){super(i,r,o,s,n,a,t),this.store=e,this.metadata=t,this.language=n,this.actionManager=i,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=a,this.defaultActions={detail:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}],edit:[{key:"cancel",labelKey:"LBL_CANCEL",params:{expanded:!0},acl:[]},{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}],create:[{key:"cancelCreate",labelKey:"LBL_CANCEL",params:{expanded:!0},acl:[]}]}}getActions(e){return(0,r.combineLatest)([this.metadata.recordViewMetadata$,this.store.mode$,this.store.record$,this.store.language$,this.store.widgets$]).pipe((0,o.map)(([e,t])=>t&&e?this.parseModeActions(e.actions,t,this.store.getViewContext()):[]))}buildActionData(e,t){return{store:this.store,action:e}}buildActionInput(e,t,n,i=null){const r=this.store.getBaseRecord();return this.message.removeMessages(),{action:t,module:r.module,id:r.id,params:e&&e.params||[]}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,n){this.store.load(!1).pipe((0,o.take)(1)).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jv),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pw),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function $w(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-dynamic-label",14),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function Vw(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",15),i.\u0275\u0275element(1,"scrm-favorite-toggle",16),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("record",e.record)}}function zw(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"scrm-action-group-menu",18),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.actionsAdapter)}}function Uw(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275elementStart(2,"div",4),i.\u0275\u0275elementStart(3,"div",5),i.\u0275\u0275element(4,"div",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"div",7),i.\u0275\u0275elementStart(6,"div",5),i.\u0275\u0275elementStart(7,"div",8),i.\u0275\u0275element(8,"scrm-module-title",9),i.\u0275\u0275elementStart(9,"div",10),i.\u0275\u0275template(10,$w,1,2,"scrm-dynamic-label",11),i.\u0275\u0275template(11,Vw,2,1,"div",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"div",7),i.\u0275\u0275elementStart(13,"div",5),i.\u0275\u0275template(14,zw,2,1,"div",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(8),i.\u0275\u0275property("title",e.moduleTitle),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.record&&e.record.fields),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",e.record)}}function Kw(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",20),i.\u0275\u0275elementStart(1,"div",21),i.\u0275\u0275element(2,"scrm-module-title",9),i.\u0275\u0275element(3,"div",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("title",e.moduleTitle)}}function Zw(e,t){if(1&e&&i.\u0275\u0275element(0,"scrm-dynamic-label",14),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function Gw(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",15),i.\u0275\u0275element(1,"scrm-favorite-toggle",16),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("record",e.record)}}function Hw(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275element(1,"scrm-action-group-menu",26),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e.actionsAdapter)("actionContext",e.getActionContext(e.record))}}function Ww(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",20),i.\u0275\u0275elementStart(1,"div",21),i.\u0275\u0275element(2,"scrm-module-title",9),i.\u0275\u0275elementStart(3,"div",10),i.\u0275\u0275template(4,Zw,1,2,"scrm-dynamic-label",11),i.\u0275\u0275template(5,Gw,2,1,"div",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",23),i.\u0275\u0275elementStart(7,"div",24),i.\u0275\u0275element(8,"div",7),i.\u0275\u0275template(9,Hw,2,2,"div",25),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("title",e.moduleTitle),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.record&&e.record.fields),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",e.record)}}function qw(e,t){if(1&e&&(i.\u0275\u0275template(0,Kw,4,1,"div",19),i.\u0275\u0275template(1,Ww,10,4,"div",19)),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",e.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.loading)}}let Qw=(()=>{class e{constructor(e,t,n){this.actionsAdapter=e,this.recordViewStore=t,this.moduleNavigation=n,this.displayResponsiveTable=!1,this.mode="detail",this.loading=!0,this.subs=[]}ngOnInit(){this.mode=this.recordViewStore.getMode(),this.subs.push(this.recordViewStore.mode$.subscribe(e=>{this.mode=e})),this.subs.push(this.recordViewStore.record$.subscribe(e=>{this.record=e})),this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.recordViewStore.vm.appData.module,this.recordViewStore.vm.appData.language.appListStrings)}getSummaryTemplate(){return this.recordViewStore.getSummaryTemplate()}getActionContext(e){return e?{module:e.module||"",record:e}:{}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Bw),i.\u0275\u0275directiveInject(Jv),i.\u0275\u0275directiveInject(Fl))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-header"]],features:[i.\u0275\u0275ProvidersFeature([Bw])],decls:4,vars:2,consts:[[1,"record-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"col"],[1,"order-3"],[1,"w-100"],[1,"order-2"],[1,"record-view-title",3,"title"],[1,"record-view-name","d-flex"],[3,"fields","labelKey",4,"ngIf"],["class","pl-1 d-flex align-items-top",4,"ngIf"],["class","order-1",4,"ngIf"],[3,"fields","labelKey"],[1,"pl-1","d-flex","align-items-top"],[3,"record"],[1,"order-1"],["klass","record-view-actions float-right",3,"config"],["class","row mr-0",4,"ngIf"],[1,"row","mr-0"],[1,"col-md-4"],[1,"record-view-name","pt-3","pb-3"],[1,"col-md-8"],[1,"row","mr-1","ml-1"],["class","w-100",4,"ngIf"],["klass","record-view-actions float-right","buttonClass","settings-button",3,"config","actionContext"]],template:function(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",0),i.\u0275\u0275template(2,Uw,15,4,"ng-container",1),i.\u0275\u0275template(3,qw,2,2,"ng-template",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.displayResponsiveTable),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.displayResponsiveTable))},directives:[p.NgIf,tv,Ca,lb,us],encapsulation:2}),e})(),Yw=(()=>{class e{constructor(e,t){this.store=e,this.metadata=t,this.config$=(0,r.combineLatest)([this.metadata.recordViewMetadata$,this.store.showSidebarWidgets$]).pipe((0,o.map)(([e,t])=>(e.sidebarWidgets&&e.sidebarWidgets.length&&e.sidebarWidgets.forEach(e=>{e&&"data-update"===e.refreshOn&&(e.reload$=this.store.record$.pipe((0,o.map)(()=>!0))),e&&(e.subpanelReload$=this.store.subpanelReload$)}),{widgets:e.sidebarWidgets||[],show:t})))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jv),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Xw=(()=>{class e{constructor(e,t,n,i){this.store=e,this.metadata=t,this.language=n,this.actions=i}getEditAction(){const e={store:this.store};this.actions.run({key:"edit"},this.store.getMode(),e)}getDisplayConfig(){return(0,r.combineLatest)([this.metadata.recordViewMetadata$,this.store.mode$]).pipe((0,o.map)(([e,t])=>({layout:this.getLayout(e),mode:t,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return(0,r.combineLatest)([this.metadata.recordViewMetadata$,this.store.stagingRecord$,this.language.vm$]).pipe((0,o.map)(([e,t,n])=>{const i=[],r=t&&t.module||"";return e.panels.forEach(e=>{const t={label:this.language.getFieldLabel(e.key.toUpperCase(),r,n),key:e.key,rows:[]};e.rows.forEach(e=>{const n={cols:[]};e.cols.forEach(e=>{n.cols.push(Object.assign({},e))}),t.rows.push(n)}),i.push(t)}),i}))}getRecord(){return this.store.stagingRecord$}getLayout(e){let t="panels";return e.templateMeta.useTabs&&(t="tabs"),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jv),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Pw))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Jw=(()=>{class e{constructor(e,t){this.store=e,this.metadata=t,this.config$=(0,r.combineLatest)([this.metadata.recordViewMetadata$,this.store.showTopWidget$]).pipe((0,o.map)(([e,t])=>(e.topWidget&&"data-update"===e.topWidget.refreshOn&&(e.topWidget.reload$=this.store.record$.pipe((0,o.map)(()=>!0))),{widget:e.topWidget,show:t})))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jv),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ex=(()=>{class e{constructor(e,t){this.store=e,this.metadata=t,this.config$=(0,r.combineLatest)([this.metadata.recordViewMetadata$,this.store.widgets$]).pipe((0,o.map)(([e,t])=>(e.bottomWidgets&&e.bottomWidgets.length&&e.bottomWidgets.forEach(e=>{e&&"data-update"===e.refreshOn&&(e.reload$=this.store.record$.pipe((0,o.map)(()=>!0))),e&&(e.subpanelReload$=this.store.subpanelReload$)}),{widgets:e.bottomWidgets||[],show:t})))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jv),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function tx(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275elementStart(1,"div",12),i.\u0275\u0275elementStart(2,"div",13),i.\u0275\u0275element(3,"div",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function nx(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275elementStart(1,"div",12),i.\u0275\u0275element(2,"scrm-top-widget",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).ngIf,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("config",e.topWidgetConfig.widget)("context",t.getViewContext())("type",e.topWidgetConfig.widget.type)}}function ix(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,nx,3,3,"div",5),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.topWidgetConfig.show&&t.hasTopWidgetMetadata(e.topWidgetConfig.widget))}}function rx(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-record-content-skeleton"),i.\u0275\u0275elementContainerEnd())}function ox(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"scrm-record-content",16),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("dataSource",e.getContentAdapter())}}function sx(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",19),i.\u0275\u0275element(1,"scrm-sidebar-widget",20),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e)("context$",n.getViewContext$())("context",n.getViewContext())("type",e.type)}}function ax(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275elementStart(1,"div",8),i.\u0275\u0275template(2,sx,2,4,"div",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",e.bottomWidgetConfig.widgets)}}function lx(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",21),i.\u0275\u0275elementStart(1,"div",8),i.\u0275\u0275element(2,"scrm-subpanel-container",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("config",e.getSubpanelsConfig())}}function cx(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",19),i.\u0275\u0275element(1,"scrm-sidebar-widget",24),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("type",e.type)("context",n.getViewContext())("context$",n.getViewContext$())("config",e)}}function dx(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",23),i.\u0275\u0275template(1,cx,2,4,"div",18),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}const ux=function(e){return{"col-lg-12":e}};function px(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementStart(1,"div",2),i.\u0275\u0275elementStart(2,"div",3),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275template(4,tx,4,0,"div",5),i.\u0275\u0275template(5,ix,2,1,"ng-container",6),i.\u0275\u0275elementStart(6,"div",7),i.\u0275\u0275elementStart(7,"div",8),i.\u0275\u0275template(8,rx,2,0,"ng-container",6),i.\u0275\u0275template(9,ox,2,1,"ng-container",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(10,ax,3,1,"div",9),i.\u0275\u0275template(11,lx,3,1,"div",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,dx,2,1,"div",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(8,ux,!e.sidebarWidgetConfig.show)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.loading),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",n.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.bottomWidgetConfig.show&&e.bottomWidgetConfig.widgets),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.showSubpanels),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.sidebarWidgetConfig.show&&e.sidebarWidgetConfig.widgets)}}let hx=(()=>{class e{constructor(e,t,n,i,s,a,l){this.recordViewStore=e,this.language=t,this.metadata=n,this.contentAdapter=i,this.topWidgetAdapter=s,this.sidebarWidgetAdapter=a,this.bottomWidgetAdapter=l,this.loading=!0,this.language$=this.language.vm$,this.vm$=(0,r.combineLatest)([this.language$,this.sidebarWidgetAdapter.config$,this.bottomWidgetAdapter.config$,this.topWidgetAdapter.config$,this.recordViewStore.showSubpanels$]).pipe((0,o.map)(([e,t,n,i,r])=>({language:e,sidebarWidgetConfig:t,bottomWidgetConfig:n,topWidgetConfig:i,showSubpanels:r}))),this.subs=[]}ngOnInit(){this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getContentAdapter(){return this.contentAdapter}getSubpanelsConfig(){return{parentModule:this.recordViewStore.getModuleName(),subpanels$:this.recordViewStore.subpanels$,sidebarActive$:this.recordViewStore.widgets$}}getViewContext(){return this.recordViewStore.getViewContext()}getViewContext$(){return this.recordViewStore.viewContext$}hasTopWidgetMetadata(e){return!(!e||!e.type)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Jv),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(pc),i.\u0275\u0275directiveInject(Xw),i.\u0275\u0275directiveInject(Jw),i.\u0275\u0275directiveInject(Yw),i.\u0275\u0275directiveInject(ex))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-container"]],features:[i.\u0275\u0275ProvidersFeature([Xw,Jw,Yw,ex])],decls:2,vars:3,consts:[["class","record-view-container view-container container-fluid pt-3 pb-3 small-font",4,"ngIf"],[1,"record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row"],[1,"col-lg-9",3,"ngClass"],[1,"container-fluid","pl-0","pr-0"],["class","row no-gutters",4,"ngIf"],[4,"ngIf"],[1,"row","no-gutters"],[1,"col"],["class","row no-gutters mt-4",4,"ngIf"],["class","row no-gutters pt-1 pb-4",4,"ngIf"],["class","col-lg-3 record-widget-container pl-0",4,"ngIf"],[1,"col","pb-3"],[1,"d-flex","justify-content-center","widget-bar","rounded","pb-1","pt-3","box-loading"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[3,"config","context","type"],[3,"dataSource"],[1,"row","no-gutters","mt-4"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context$","context","type"],[1,"row","no-gutters","pt-1","pb-4"],[3,"config"],[1,"col-lg-3","record-widget-container","pl-0"],[3,"type","context","context$","config"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,px,13,10,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,p.NgClass,XC,gv,mv,p.NgForOf,fC,NC],pipes:[p.AsyncPipe],encapsulation:2}),e})();function mx(e,t){1&e&&i.\u0275\u0275element(0,"scrm-status-bar")}function fx(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275element(1,"scrm-record-header"),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"hr",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,mx,1,0,"scrm-status-bar",4),i.\u0275\u0275element(5,"scrm-record-container"),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",e.showStatusBar)}}let gx=(()=>{class e{constructor(e,t,n){this.appState=e,this.recordStore=t,this.route=n,this.vm$=null,this.showStatusBar=!1}ngOnInit(){let e="detail";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode);const n=this.route.snapshot&&this.route.snapshot.queryParams||{};this.recordSub=this.recordStore.init(this.appState.getModule(),this.route.snapshot.params.record,e,n).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.recordStore.destroy()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(no),i.\u0275\u0275directiveInject(jw),i.\u0275\u0275directiveInject(u.ActivatedRoute))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-create-record"]],features:[i.\u0275\u0275ProvidersFeature([jw,{provide:Jv,useExisting:jw}])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,fx,6,1,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,Qw,hx,ny],pipes:[p.AsyncPipe],encapsulation:2}),e})(),vx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Nh,f.AngularSvgIconModule,RC,fv,JC,gC,vv]]}),e})(),yx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,nv,wa,vs,cb]]}),e})();function bx(e,t){1&e&&i.\u0275\u0275element(0,"scrm-status-bar")}function Sx(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275element(1,"scrm-record-header"),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"hr",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,bx,1,0,"scrm-status-bar",4),i.\u0275\u0275element(5,"scrm-record-container"),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",e.showStatusBar)}}let Cx=(()=>{class e{constructor(e,t,n){this.appState=e,this.recordStore=t,this.route=n,this.vm$=null,this.showStatusBar=!1}ngOnInit(){let e="detail";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode);const n=this.route.snapshot&&this.route.snapshot.queryParams||{};this.recordSub=this.recordStore.init(this.appState.getModule(),this.route.snapshot.params.record,e,n).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.recordStore.destroy()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(no),i.\u0275\u0275directiveInject(Jv),i.\u0275\u0275directiveInject(u.ActivatedRoute))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record"]],features:[i.\u0275\u0275ProvidersFeature([Jv])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Sx,6,1,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,Qw,hx,ny],pipes:[p.AsyncPipe],encapsulation:2}),e})(),wx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pp,vx,yx,yy,_C]]}),e})(),xx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pp,wx,vx,yx,yy,_C]]}),e})();class Ix extends c.ActionHandler{}let Ex=(()=>{class e extends Ix{constructor(e,t,n,i,r,o){super(),this.message=e,this.asyncActionService=t,this.router=n,this.modalService=i,this.state=r,this.localStorage=o,this.key="install",this.modes=["edit"]}run(e){e.store.recordStore.validate().pipe((0,o.take)(1)).subscribe(t=>{if(t){const t=e.store.recordStore.getStaging();this.runInstall(t)}else this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}runInstall(e){const t=`suitecrm-app-${this.key}`;this.message.removeMessages(),this.asyncActionService.run(t,{action:t,module:e.module,id:e.id,payload:e.formGroup.value}).pipe((0,o.take)(1)).subscribe(e=>{3===e.data.statusCode&&this.openErrorModalDialog(e.data.errors),0===e.data.statusCode&&(this.state.clear(),this.localStorage.clear(),this.router.navigate(["/"],{}).then())})}openErrorModalDialog(e){this.modalService.open(wg,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"custom-modal",modalDialogClass:"custom-modal"}).componentInstance.errors=e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(u.Router),i.\u0275\u0275inject(I.NgbModal),i.\u0275\u0275inject(Up),i.\u0275\u0275inject(io))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_x=(()=>{class e extends Ia{constructor(e){super(),this.save=e,e.modes.forEach(t=>this.actions[t][e.key]=e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Ex))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Mx={loading:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let jx=(()=>{class e{constructor(e,t,n,i,s,a){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=n,this.recordManager=i,this.recordStoreFactory=s,this.language=a,this.cache$=null,this.internalState=(0,c.deepClone)(Mx),this.store=new r.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.recordStore=s.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,o.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,o.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,o.map)(e=>e.loading)),this.mode$=this.state$.pipe((0,o.map)(e=>e.mode)),this.vm$=(0,r.combineLatest)([this.record$,this.loading$]).pipe((0,o.map)(([e,t])=>(this.vm={record:e,loading:t},this.vm))),this.viewContext$=this.record$.pipe((0,o.map)(()=>this.getViewContext()))}get params(){return this.internalState.params||{}}set params(e){this.updateState(Object.assign(Object.assign({},this.internalState),{params:e}))}getViewContext(){return{record:this.getBaseRecord()}}getActions(){return(0,r.of)([])}init(e="edit",t={}){this.setMode(e),this.recordStore.init({id:"",module:"install",attributes:{}})}clear(){this.cache$=null,this.updateState((0,c.deepClone)(Mx))}clearAuthBased(){this.clear()}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}getLicenseText(){return this.language.getFieldLabel("SUITE8_LICENSE_CONTENT")}getMetadata(){return{actions:[],templateMeta:{maxColumns:2,useTabs:!0,tabDefs:{LBL_CONFIG:{newTab:!0,panelDefault:"expanded"}}},panels:[{key:"LBL_CONFIG",rows:[{cols:[{name:"site_host",label:"LBL_SITECFG_URL",type:"varchar",fieldDefinition:{name:"site_host",vname:"LBL_SITECFG_URL",type:"varchar",required:!0}},{name:"demoData",label:"LBL_DBCONF_DEMO_DATA",type:"enum",fieldDefinition:{name:"demoData",vname:"LBL_DBCONF_DEMO_DATA",type:"enum",options:"__no_options__",required:!0,metadata:{extraOptions:[{value:"yes",labelKey:"LBL_YES"},{value:"no",labelKey:"LBL_NO"}]}}}]},{cols:[{name:"db_config",label:"LBL_DBCONF_TITLE",type:"grouped-field",fieldDefinition:{name:"db_config",vname:"LBL_DBCONF_TITLE",type:"grouped-field",layout:["db_username","db_password","db_host","db_name","db_port"],display:"vertical",groupFields:{db_username:{name:"db_username",type:"varchar",vname:"LBL_DBCONF_SUITE_DB_USER",labelKey:"LBL_DBCONF_SUITE_DB_USER",label:"LBL_DBCONF_SUITE_DB_USER",showLabel:["*"],required:!0},db_password:{name:"db_password",type:"password",vname:"LBL_DBCONF_DB_PASSWORD",labelKey:"LBL_DBCONF_DB_PASSWORD",showLabel:["*"],required:!0},db_host:{name:"db_host",type:"varchar",vname:"LBL_DBCONF_HOST_NAME",labelKey:"LBL_DBCONF_HOST_NAME",showLabel:["*"],required:!0},db_name:{name:"db_name",type:"varchar",vname:"LBL_DBCONF_DB_NAME",labelKey:"LBL_DBCONF_DB_NAME",showLabel:["*"],required:!0},db_port:{name:"db_port",type:"varchar",vname:"LBL_DBCONF_DB_PORT",labelKey:"LBL_DBCONF_DB_PORT",showLabel:["*"],required:!1}},showLabel:{edit:["*"]}}},{name:"admin_config",label:"LBL_SITECFG_TITLE",type:"grouped-field",fieldDefinition:{name:"admin_config",vname:"LBL_SITECFG_TITLE",type:"grouped-field",layout:["site_username","site_password"],display:"vertical",groupFields:{site_username:{name:"site_username",type:"varchar",vname:"LBL_SITECFG_ADMIN_Name",labelKey:"LBL_SITECFG_ADMIN_Name",showLabel:["edit"],required:!0},site_password:{name:"site_password",type:"password",vname:"LBL_SITECFG_ADMIN_PASS",labelKey:"LBL_SITECFG_ADMIN_PASS",showLabel:["edit"],required:!0}},showLabel:{edit:["*"]}}}]}]}]}}getMetadata$(){return(0,r.of)(this.getMetadata())}getModuleName(){return"install"}parseParams(e={}){if(!e)return;const t=Object.assign({},this.internalState.params);Object.keys(e).forEach(n=>{(0,c.isVoid)(t[n])||(t[n]=e[n])}),this.params=e}updateState(e){this.store.next(this.internalState=e)}getIgnoreSystemChecksField(){return this.recordStore.getStaging().fields.sys_check_option}getViewFieldsObservable(){return this.getMetadata$().pipe((0,o.map)(e=>{const t=[];return e.panels.forEach(e=>{e.rows.forEach(e=>{e.cols.forEach(e=>{t.push(e)})})}),t.push({name:"sys_check_option",type:"boolean",fieldDefinition:{name:"sys_check_option",type:"boolean",vname:"LBL_SYS_CHECK_WARNING",labelKey:"LBL_SYS_CHECK_WARNING",showLabel:["edit"],required:!1,value:"false",default:"false"}}),t}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Gv),i.\u0275\u0275inject(zv),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Iu),i.\u0275\u0275inject(Yv),i.\u0275\u0275inject(ho))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),kx=(()=>{class e extends eb{constructor(e,t,n,i,r,o,s,a){super(i,r,o,s,n,a,t),this.store=e,this.metadata=t,this.language=n,this.actionManager=i,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=a,this.defaultActions={detail:[],edit:[{key:"install",labelKey:"LBL_PROCEED",params:{expanded:!0},acl:[]}],create:[]}}getActions(e){return(0,r.combineLatest)([this.store.getActions(),this.store.mode$,this.store.stagingRecord$]).pipe((0,o.map)(([e,t])=>t?this.parseModeActions(e,t,this.store.getViewContext()):[]))}buildActionData(e,t){return{store:this.store}}buildActionInput(e,t,n,i=null){const r=this.store.getBaseRecord();return this.message.removeMessages(),{action:t,module:r.module,id:r.id,record:r}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,n){}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(jx),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(_x),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Lx=(()=>{class e{constructor(e,t,n,i){this.store=e,this.metadata=t,this.language=n,this.actions=i}getEditAction(){}getDisplayConfig(){return(0,r.combineLatest)([this.store.getMetadata$(),this.store.mode$]).pipe((0,o.map)(([e,t])=>({layout:this.getLayout(e),mode:t,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return(0,r.combineLatest)([this.store.getMetadata$(),this.store.stagingRecord$,this.language.vm$]).pipe((0,o.map)(([e,t,n])=>{const i=[],r=t&&t.module||"";return e.panels.forEach(e=>{const t={label:this.language.getFieldLabel(e.key.toUpperCase(),r,n),key:e.key,rows:[]};e.rows.forEach(e=>{const n={cols:[]};e.cols.forEach(e=>{n.cols.push(Object.assign({},e))}),t.rows.push(n)}),i.push(t)}),i}))}getRecord(){return this.store.stagingRecord$}getLayout(e){let t="panels";return e.templateMeta.useTabs&&(t="tabs"),t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(jx),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(_x))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Fx=(()=>{class e{constructor(e,t){this.metadata=e,this.contentAdapter=t}getContentAdapter(){return this.contentAdapter}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(pc),i.\u0275\u0275directiveInject(Lx))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-install-container"]],features:[i.\u0275\u0275ProvidersFeature([Lx])],decls:4,vars:1,consts:[[1,"install-view-container","record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row","no-gutters"],[1,"col"],[3,"dataSource"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"scrm-record-content",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("dataSource",t.getContentAdapter()))},directives:[mv],encapsulation:2}),e})(),Ox=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,f.AngularSvgIconModule,fv]]}),e})();function Dx(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275elementStart(4,"div",4),i.\u0275\u0275element(5,"scrm-label",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",6),i.\u0275\u0275element(7,"scrm-label",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",8),i.\u0275\u0275elementStart(9,"div",9),i.\u0275\u0275elementStart(10,"div",10),i.\u0275\u0275elementStart(11,"div",11),i.\u0275\u0275elementStart(12,"div",12),i.\u0275\u0275elementStart(13,"label",13),i.\u0275\u0275element(14,"scrm-label",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(15,": "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",15),i.\u0275\u0275elementStart(17,"div",16),i.\u0275\u0275element(18,"scrm-field",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div"),i.\u0275\u0275element(20,"scrm-action-group-menu",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(14),i.\u0275\u0275property("labelKey",n.store.getIgnoreSystemChecksField().definition.vname),i.\u0275\u0275advance(4),i.\u0275\u0275property("field",n.store.getIgnoreSystemChecksField())("mode","edit")("record",e.record)("type",n.store.getIgnoreSystemChecksField().type),i.\u0275\u0275advance(2),i.\u0275\u0275property("actionContext",n.getActionContext(e.record))("config",n.actionsAdapter)}}let Ax=(()=>{class e{constructor(e,t){this.actionsAdapter=e,this.store=t,this.vm$=(0,r.combineLatest)([this.store.record$]).pipe((0,o.map)(([e])=>({record:e})))}getActionContext(e){return e?{module:e.module||"",record:e}:{}}getTitle(){}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(kx),i.\u0275\u0275directiveInject(jx))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-install-header"]],features:[i.\u0275\u0275ProvidersFeature([kx])],decls:2,vars:3,consts:[[4,"ngIf"],[1,"install-view-header"],[1,"row","mr-0"],[1,"col-md-4","install-header-title-col"],[1,"install-view-title","record-view-name"],["labelKey","LBL_WELCOME","module","install"],[1,"install-view-subtitle","record-view-title"],["labelKey","LBL_INSTALL","module","install"],[1,"col-md-8","install-header-buttons-col"],[1,"row","mr-1","ml-1"],[1,"w-100","d-flex","justify-content-end","align-items-center"],[1,"w-100","install-header-options","d-flex","justify-content-end","align-items-center","pr-5"],[1,"label-container","pr-2"],[1,"m-0","small"],[3,"labelKey"],[1,"d-flex"],[1,"flex-grow-1","text-break"],[3,"field","mode","record","type"],["buttonClass","settings-button","klass","install-view-actions float-right",3,"actionContext","config"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Dx,21,7,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,To,Ju,us],pipes:[p.AsyncPipe],encapsulation:2}),e})(),Nx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,nv,vs,hs,pp]]}),e})();function Rx(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275element(1,"scrm-install-header"),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"hr",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"scrm-install-container"),i.\u0275\u0275elementEnd())}let Tx=(()=>{class e{constructor(e,t){this.store=e,this.route=t,this.vm$=null,this.showStatusBar=!1}ngOnInit(){let e="edit";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode),this.store.init(e),this.vm$=this.store.vm$}ngOnDestroy(){this.store.clear()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(jx),i.\u0275\u0275directiveInject(u.ActivatedRoute))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-install-view"]],features:[i.\u0275\u0275ProvidersFeature([jx])],decls:2,vars:3,consts:[["class","install-view",4,"ngIf"],[1,"install-view"],[1,"record-view-hr-container"],[1,"record-view-hr"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,Rx,5,0,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,Ax,Fx],pipes:[p.AsyncPipe],encapsulation:2}),e})(),Px=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,pp,Nx,Ox]]}),e})();class Bx extends $b{}let $x=(()=>{class e extends Bx{constructor(){super(),this.key="cancel",this.modes=["detail","edit","list","create","massupdate"]}run(e){e.listStore.closeRecordPanel()}shouldDisplay(){return!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Vx=(()=>{class e extends Bx{constructor(e,t,n,i){super(),this.message=e,this.asyncActionService=t,this.confirmation=n,this.asyncAction=i,this.key="bulk-action",this.modes=["detail","edit","list","create","massupdate"]}run(e){const t=e.action,n=e.listStore.recordList.selection,i=t&&t.params||{};if((0,c.isFalse)(i.allowAll)&&n.all)this.message.addDangerMessage(e.listStore.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);else{if(i.min&&n.count<i.min){let t=e.listStore.appStrings.LBL_TOO_FEW_SELECTED;return t=t.replace("{min}",i.min),void this.message.addDangerMessage(t)}if(i.max&&n.count>i.max){let t=e.listStore.appStrings.LBL_TOO_MANY_SELECTED;return t=t.replace("{max}",i.max),void this.message.addDangerMessage(t)}this.runBulkAction(e)}}shouldDisplay(){return!0}runBulkAction(e){const t=`bulk-${e.action.params.bulkAction}`,n=this.buildActionInput(t,e);this.asyncAction.run(t,n).subscribe(t=>{this.handleProcessResult(t,e)})}buildActionInput(e,t){const n=[];t.listStore.metadata.listView.fields.forEach(e=>{n.push(e.name)});const i={action:e,module:t.listStore.getModuleName(),criteria:null,sort:null,ids:null,fields:n,payload:{panelRecord:t.store.recordStore.getBaseStaging()}},r=t.listStore.recordList.selection;return r.all&&r.count>t.listStore.recordList.records.length&&(i.criteria=t.listStore.recordList.criteria,i.sort=t.listStore.recordList.sort),r.all&&r.count<=t.listStore.recordList.records.length&&(i.ids=[],t.listStore.recordList.records.forEach(e=>{t.ids.push(e.id)})),r.all||(i.ids=Object.keys(r.selected)),i}handleProcessResult(e,t){e.data&&e.data.reload&&(t.listStore.recordList.clearSelection(),t.listStore.load(!1).pipe((0,o.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&t.listStore.triggerDataUpdate(),t.listStore.closeRecordPanel()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Ng))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),zx=(()=>{class e extends Ia{constructor(e,t){super(),e.modes.forEach(t=>this.actions[t][e.key]=e),t.modes.forEach(e=>this.actions[e][t.key]=t)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Vx),i.\u0275\u0275inject($x))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ux=(()=>{class e{constructor(e,t,n,i,r,o){this.store=e,this.message=t,this.confirmation=n,this.selectModalService=i,this.asyncAction=r,this.metadata=o}getBulkActions(){return this.store.metadata$.pipe((0,o.map)(e=>e.listView.bulkActions))}executeBulkAction(e){const t=this.store.recordList.selection,n=this.store.metadata.listView.bulkActions[e],i=`bulk-${e}`;if(this.message.removeMessages(),(0,c.isFalse)(n.params.allowAll)&&t.all)return void this.message.addDangerMessage(this.store.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);if(n.params.min&&t.count<n.params.min){let e=this.store.appStrings.LBL_TOO_FEW_SELECTED;return e=e.replace("{min}",n.params.min),void this.message.addDangerMessage(e)}if(n.params.max&&t.count>n.params.max){let e=this.store.appStrings.LBL_TOO_MANY_SELECTED;return e=e.replace("{max}",n.params.max),void this.message.addDangerMessage(e)}const r=[];this.store.metadata.listView.fields.forEach(e=>{r.push(e.name)});const o={action:i,module:this.store.getModuleName(),criteria:null,sort:null,ids:null,fields:r};t.all&&t.count>this.store.recordList.records.length&&(o.criteria=this.store.recordList.criteria,o.sort=this.store.recordList.sort),t.all&&t.count<=this.store.recordList.records.length&&(o.ids=[],this.store.recordList.records.forEach(e=>{o.ids.push(e.id)})),t.all||(o.ids=Object.keys(t.selected));const s=n&&n.params||{},a=s.displayConfirmation||!1,l=s.confirmationLabel||"",d=n.params&&n.params.selectModal,u=d&&d.module,p=n.params&&n.params.recordPanel;p?this.store.openRecordPanel(p):a?this.confirmation.showModal(l,()=>{u?this.showSelectModal(d.module,i,o):this.runBulkAction(i,o)}):u?this.showSelectModal(d.module,i,o):this.runBulkAction(i,o)}showSelectModal(e,t,n){this.selectModalService.showSelectModal(e,e=>{if(e){const t=(0,m._T)(e,["fields","formGroup"]);n.modalRecord=t}this.runBulkAction(t,n)})}runBulkAction(e,t){this.asyncAction.run(e,t).subscribe(e=>{this.handleProcessResult(e)})}handleProcessResult(e){e.data&&e.data.reload&&(this.store.recordList.clearSelection(),this.store.load(!1).pipe((0,o.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&this.store.triggerDataUpdate(),this.reloadMetadata(this.store.getModuleName(),e)}reloadMetadata(e,t){const n=[];this.shouldReloadRecentlyViewed(t)&&n.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(t)&&n.push(this.metadata.typeKeys.favorites),n&&n.length&&this.metadata.reloadModuleMetadata(e,n,!1).pipe((0,o.take)(1)).subscribe()}shouldReloadRecentlyViewed(e){return!(!e.data||!e.data.reloadRecentlyViewed)}shouldReloadFavorites(e){return!(!e.data||!e.data.reloadFavorites)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(dy),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Kx=(()=>{class e{constructor(e,t,n,i,r){this.message=e,this.confirmation=t,this.selectModalService=n,this.asyncAction=i,this.metadata=r}create(e){return new Ux(e,this.message,this.confirmation,this.selectModalService,this.asyncAction,this.metadata)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Zx=(()=>{class e{constructor(e){this.store=e}getConfig(){return{savedFilterEdit:!0,module:this.store.getModuleName(),filter$:this.store.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.metadata$.pipe((0,o.map)(e=>{if(!e||!e.search)return{};const t=e.search;let n="advanced";return t.layout.advanced||(n="basic"),t.layout[n]})),listFields:this.store.metadata.listView.fields,onClose:()=>{this.store.showFilters=!1},onSearch:()=>{this.store.showFilters=!1},updateFilter:(e,t=!0)=>{const n={};n[e.key]=e,this.store.setFilters(n,t)},resetFilter:e=>{this.store.resetFilters(e)},addSavedFilter:e=>{this.store.addSavedFilter(e)},removeSavedFilter:e=>{this.store.removeSavedFilter(e)},setOpenFilter:e=>{this.store.setOpenFilter(e)}}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(dy))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Gx=(()=>{class e extends tb{constructor(e,t,n,i,r,o,s,a){super(t,n,i,r,o,s,a),this.store=e,this.actionManager=t,this.asyncActionService=n,this.message=i,this.confirmation=r,this.language=o,this.selectModalService=s,this.metadata=a}getActions(e=null){return(0,r.combineLatest)([this.store.lineActions$,(0,r.of)("list").pipe((0,o.shareReplay)())]).pipe((0,o.map)(([t,n])=>this.parseModeActions(t,n,e)))}getModuleName(e){return this.store.getModuleName()}reload(e,t,n){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}getMode(){return"list"}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(dy),i.\u0275\u0275inject(Yy),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Hx=(()=>{class e extends eb{constructor(e,t,n,i,r,o,s,a,l){super(i,r,o,s,n,a,l),this.store=e,this.listStore=t,this.language=n,this.actionManager=i,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=a,this.metadata=l}getActions(e){return(0,r.combineLatest)([this.store.meta$,this.store.mode$,this.store.stagingRecord$,this.language.vm$]).pipe((0,o.map)(([e,t])=>t&&e?this.parseModeActions(e.actions,t):[]))}buildActionData(e,t){return{store:this.store,listStore:this.listStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,n){this.listStore.load(!1).pipe((0,o.take)(1)).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Kb),i.\u0275\u0275inject(dy),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(zx),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Wx=(()=>{class e{constructor(e,t,n,i,r,o,s){this.language=e,this.actionManager=t,this.asyncActionService=n,this.message=i,this.confirmation=r,this.selectModalService=o,this.metadata=s}create(e,t){return new Hx(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ho),i.\u0275\u0275inject(zx),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(Jy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),qx=(()=>{class e{constructor(e,t,n,i){this.store=e,this.recordPanelStoreFactory=t,this.actionAdapterFactory=n,this.recordManager=i}getConfig(){const e=this.createStore();return{module:this.getModule(),title:this.store.recordPanelConfig&&this.store.recordPanelConfig.title||"",store:e,meta:this.store.recordPanelConfig,actions:this.createActionAdapter(e),onClose:()=>{this.store.closeRecordPanel()}}}getModule(){return this.store.recordPanelConfig.module||this.store.getModuleName()}getViewMode(){return this.store.recordPanelConfig.mode||"edit"}createStore(){const e=this.recordPanelStoreFactory.create(),t=this.recordManager.buildEmptyRecord(this.getModule());return e.setMetadata(this.store.recordPanelConfig),e.initRecord(t,this.getViewMode(),!1),e}createActionAdapter(e){return this.actionAdapterFactory.create(e,this.store)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(dy),i.\u0275\u0275inject(Zb),i.\u0275\u0275inject(Wx),i.\u0275\u0275inject(Iu))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Qx=(()=>{class e{constructor(e,t){this.store=e,this.metadata=t,this.config$=(0,r.combineLatest)([this.metadata.listMetadata$,this.store.showSidebarWidgets$,this.store.widgets$]).pipe((0,o.map)(([e,t,n])=>(e.sidebarWidgets&&e.sidebarWidgets.length&&e.sidebarWidgets.forEach(e=>{e&&"data-update"===e.refreshOn?e.reload$=this.store.dataSetUpdate$.pipe((0,o.map)(()=>!0)):e&&"data-reload"===e.refreshOn&&(e.reload$=this.store.records$.pipe((0,o.map)(()=>!0)))}),{widgets:e.sidebarWidgets||[],show:t,widgetsEnabled:n})))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(dy),i.\u0275\u0275inject(pc))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Yx=(()=>{class e{constructor(e,t,n,i,r,o,s,a,l){this.store=e,this.metadata=t,this.actionManager=n,this.asyncActionService=i,this.message=r,this.confirmation=o,this.language=s,this.bulkActionsAdapterFactory=a,this.selectModalService=l}getTable(){return{showHeader:!0,showFooter:!0,module:this.store.getModuleName(),columns:this.store.columns$,lineActions:this.getLineActionsDataSource(),selection$:this.store.selection$,sort$:this.store.sort$,maxColumns$:(0,r.of)(4),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,selection:this.store.recordList,bulkActions:this.getBulkActionsDataSource(this.store),pagination:this.store.recordList,toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,t)=>{this.store.recordList.updateSorting(e,t),this.store.updateSortLocalStorage()}}}getLineActionsDataSource(){return new Gx(this.store,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}getBulkActionsDataSource(e){return this.bulkActionsAdapterFactory.create(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(dy),i.\u0275\u0275inject(pc),i.\u0275\u0275inject(Yy),i.\u0275\u0275inject(Ng),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(sy),i.\u0275\u0275inject(ho),i.\u0275\u0275inject(Kx),i.\u0275\u0275inject(Jy))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function Xx(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275element(1,"scrm-sidebar-widget",9),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("config",e)("context",n.getViewContext())("context$",n.store.context$)("type",e.type)}}function Jx(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",6),i.\u0275\u0275template(2,Xx,2,4,"div",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("display",t.getDisplay(!(!e.sidebarWidgetConfig.show||!e.sidebarWidgetConfig.widgets))),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}const eI=function(e){return{"col-lg-12":e}};function tI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementStart(1,"div",2),i.\u0275\u0275elementStart(2,"div",3),i.\u0275\u0275element(3,"scrm-table",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,Jx,3,3,"ng-container",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(3,eI,!n.getDisplayWidgets())),i.\u0275\u0275advance(1),i.\u0275\u0275property("config",n.tableConfig),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.sidebarWidgetConfig.widgetsEnabled)}}let nI=(()=>{class e{constructor(e,t,n,i,s){this.store=e,this.adapter=t,this.maxColumnCalculator=n,this.languageStore=i,this.sidebarWidgetAdapter=s,this.screen=Oo.Medium,this.maxColumns=5,this.vm$=(0,r.combineLatest)([this.sidebarWidgetAdapter.config$]).pipe((0,o.map)(([e])=>({sidebarWidgetConfig:e})))}ngOnInit(){this.tableConfig=this.adapter.getTable(),this.tableConfig.maxColumns$=this.getMaxColumns()}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.store.widgets$)}getDisplayWidgets(){return this.store.widgets&&this.store.showSidebarWidgets}getDisplay(e){let t="none";return e&&(t="block"),t}getViewContext(){return this.store.getViewContext()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(dy),i.\u0275\u0275directiveInject(Yx),i.\u0275\u0275directiveInject(fc),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(Qx))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-list-container"]],inputs:{module:"module"},features:[i.\u0275\u0275ProvidersFeature([Yx,fc,Qx])],decls:2,vars:3,consts:[["class","list-view-container container-fluid pt-2",4,"ngIf"],[1,"list-view-container","container-fluid","pt-2"],[1,"row"],[1,"col-lg-9",3,"ngClass"],[3,"config"],[4,"ngIf"],[1,"col-lg-3","list-widget-container","pl-0"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context","context$","type"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,tI,5,5,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,p.NgClass,Uy,p.NgForOf,fC],pipes:[p.AsyncPipe],encapsulation:2}),e})(),iI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,Hy,Nh,f.AngularSvgIconModule,gC]]}),e})();function rI(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275elementStart(2,"div",4),i.\u0275\u0275elementStart(3,"div",5),i.\u0275\u0275elementStart(4,"div",6),i.\u0275\u0275element(5,"scrm-action-menu"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"div",7),i.\u0275\u0275elementStart(7,"div",5),i.\u0275\u0275elementStart(8,"div",8),i.\u0275\u0275element(9,"scrm-module-title",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(10,"div",7),i.\u0275\u0275elementStart(11,"div",5),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275element(13,"scrm-settings-menu"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(9),i.\u0275\u0275property("title",e.moduleTitle)}}function oI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",4),i.\u0275\u0275elementStart(2,"div",5),i.\u0275\u0275element(3,"scrm-list-filter",19),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("config",e.filterAdapter.getConfig())}}function sI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",4),i.\u0275\u0275elementStart(2,"div",5),i.\u0275\u0275element(3,"scrm-record-panel",19),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("config",e.recordPanelConfig)}}function aI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275elementStart(1,"div",12),i.\u0275\u0275element(2,"scrm-module-title",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",13),i.\u0275\u0275elementStart(4,"div",14),i.\u0275\u0275elementStart(5,"div",7),i.\u0275\u0275element(6,"scrm-action-menu"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",7),i.\u0275\u0275element(8,"scrm-settings-menu"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",15),i.\u0275\u0275element(10,"hr",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(11,oI,4,1,"div",17),i.\u0275\u0275template(12,sI,4,1,"div",17)),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("title",e.moduleTitle),i.\u0275\u0275advance(9),i.\u0275\u0275property("ngIf","filters"===e.actionPanel),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","recordPanel"===e.actionPanel&&e.recordPanelConfig)}}let lI=(()=>{class e{constructor(e,t,n,i){this.filterAdapter=e,this.listStore=t,this.moduleNavigation=n,this.recordPanelAdapter=i,this.displayResponsiveTable=!1,this.actionPanel="",this.subs=[]}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.listStore.vm.appData.module,this.listStore.vm.appData.language.appListStrings)}ngOnInit(){this.listStore.actionPanel$.subscribe(e=>{this.actionPanel=e,this.recordPanelConfig="recordPanel"===this.actionPanel?this.recordPanelAdapter.getConfig():null})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.recordPanelConfig=null}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Zx),i.\u0275\u0275directiveInject(dy),i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(qx))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-list-header"]],features:[i.\u0275\u0275ProvidersFeature([Zx,qx])],decls:4,vars:2,consts:[[1,"list-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"col"],[1,"order-3"],[1,"w-100"],[1,"order-2"],[1,"list-view-title",3,"title"],[1,"order-1"],[1,"row","mr-0","align-items-center"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","mr-0","ml-1"],[1,"list-view-hr-container"],[1,"list-view-hr"],["class","container-fluid pt-2 small-font",4,"ngIf"],[1,"container-fluid","pt-2","small-font"],[3,"config"]],template:function(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",0),i.\u0275\u0275template(2,rI,14,1,"ng-container",1),i.\u0275\u0275template(3,aI,13,3,"ng-template",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.displayResponsiveTable),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.displayResponsiveTable))},directives:[p.NgIf,py,tv,gy,Ab,Bb],encapsulation:2}),e})(),cI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,nv,hy,vy,f.AngularSvgIconModule,Nb,Vb]]}),e})();function dI(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275element(1,"scrm-list-header"),i.\u0275\u0275element(2,"scrm-list-container"),i.\u0275\u0275elementEnd())}let uI=(()=>{class e{constructor(e,t){this.appState=e,this.listStore=t,this.vm$=null}ngOnInit(){this.listSub=this.listStore.init(this.appState.getModule()).subscribe(),this.vm$=this.listStore.vm$}ngOnDestroy(){this.listSub&&this.listSub.unsubscribe(),this.listStore.destroy()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(no),i.\u0275\u0275directiveInject(dy))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-list"]],features:[i.\u0275\u0275ProvidersFeature([dy])],decls:2,vars:3,consts:[["class","list-view",4,"ngIf"],[1,"list-view"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,dI,3,0,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,lI,nI],pipes:[p.AsyncPipe],encapsulation:2}),e})(),pI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[p.CommonModule,cI,iI,pp]]}),e})();function hI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"option",17),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext(3);let r;i.\u0275\u0275property("selected",(null!==(r=n.language)&&void 0!==r?r:"en_us")===e)("value",e),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.getEnabledLanguages()[e]," ")}}function mI(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275elementStart(2,"label",11),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"div",12),i.\u0275\u0275elementStart(5,"div",5),i.\u0275\u0275elementStart(6,"div",13),i.\u0275\u0275elementStart(7,"select",14,15),i.\u0275\u0275listener("change",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275reference(8);return i.\u0275\u0275nextContext(2).onLanguageSelect(t.value)}),i.\u0275\u0275template(9,hI,2,3,"option",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext().ngIf,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.appStrings.LBL_LANGUAGE),i.\u0275\u0275advance(6),i.\u0275\u0275property("ngForOf",t.getEnabledLanguagesKeys())}}function fI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function gI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function vI(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",29),i.\u0275\u0275elementStart(1,"a",30),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(3).flipCard()}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2).ngIf;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LOGIN_FORGOT_PASSWORD," ")}}function yI(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",13),i.\u0275\u0275element(2,"scrm-image",19),i.\u0275\u0275elementStart(3,"input",20,21),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).uname=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,fI,2,1,"div",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",13),i.\u0275\u0275element(7,"scrm-image",23),i.\u0275\u0275elementStart(8,"input",24,25),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).passw=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(10,gI,2,1,"div",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"button",26),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(2),n=i.\u0275\u0275nextContext();return t.control.markAllAsTouched(),t.valid&&n.doLogin()}),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,vI,3,1,"div",27),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275reference(4),t=i.\u0275\u0275reference(9),n=i.\u0275\u0275nextContext().ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("@fade",void 0),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),i.\u0275\u0275propertyInterpolate("placeholder",n.appStrings.LBL_USER_NAME),i.\u0275\u0275property("ngModel",r.uname),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.invalid&&e.touched),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("is-invalid",t.invalid&&t.touched),i.\u0275\u0275propertyInterpolate("placeholder",n.appStrings.LBL_PASSWORD),i.\u0275\u0275property("ngModel",r.passw),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.invalid&&t.touched),i.\u0275\u0275advance(1),i.\u0275\u0275property("scrm-button-loading",r.loading),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.appStrings.LBL_LOGIN_BUTTON_LABEL," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.showForgotPassword)}}function bI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function SI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext(2).ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function CI(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",31),i.\u0275\u0275elementStart(1,"div",13),i.\u0275\u0275element(2,"scrm-image",19),i.\u0275\u0275elementStart(3,"input",20,21),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).uname=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,bI,2,1,"div",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",13),i.\u0275\u0275element(7,"scrm-image",32),i.\u0275\u0275elementStart(8,"input",33,34),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).email=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(10,SI,2,1,"div",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"button",35),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(2),n=i.\u0275\u0275nextContext();return t.control.markAllAsTouched(),t.valid&&n.recoverPassword()}),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div"),i.\u0275\u0275elementStart(14,"a",36),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).flipCard()}),i.\u0275\u0275text(15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275reference(4),t=i.\u0275\u0275reference(9),n=i.\u0275\u0275nextContext().ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("@fade",void 0),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),i.\u0275\u0275propertyInterpolate("placeholder",n.appStrings.LBL_USER_NAME),i.\u0275\u0275property("ngModel",r.uname),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",e.invalid&&e.touched),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("is-invalid",t.invalid&&t.touched),i.\u0275\u0275propertyInterpolate("placeholder",n.appStrings.LBL_EMAIL),i.\u0275\u0275property("ngModel",r.email),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.invalid&&t.touched),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.appStrings.LBL_GENERATE_PASSWORD_BUTTON_TITLE," "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",n.appStrings.LBL_BACK," ")}}function wI(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementStart(1,"form",2,3),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275elementStart(4,"div",5),i.\u0275\u0275element(5,"scrm-logo-ui"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,mI,10,2,"div",6),i.\u0275\u0275elementStart(7,"div",7),i.\u0275\u0275template(8,yI,14,14,"div",8),i.\u0275\u0275template(9,CI,16,13,"div",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.ngIf,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(6),i.\u0275\u0275property("ngIf",e.showLanguages),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf","front"===n.cardState),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","back"===n.cardState)}}let xI=(()=>{class e{constructor(e,t,n,i,s,a){this.router=e,this.auth=t,this.message=n,this.configs=i,this.languageStore=s,this.recoverPasswordService=a,this.hidden=!0,this.loading=!1,this.error="",this.uname="",this.passw="",this.email="",this.cardState="front",this.systemConfigs$=this.configs.configs$,this.appStrings$=this.languageStore.appStrings$,this.language=null,this.vm$=(0,r.combineLatest)([this.systemConfigs$,this.appStrings$]).pipe((0,o.map)(([e,t])=>{let n=!1,i=!1;return e.languages&&e.languages.items&&(n=Object.keys(e.languages.items).length>1),e.passwordsetting&&e.passwordsetting.items&&(i=[!0,"1","true"].includes(e.passwordsetting.items.forgotpasswordON)),{systemConfigs:e,appStrings:t,showLanguages:n,showForgotPassword:i}})),this.loading=!1,this.hidden=!1,this.language=null}ngOnInit(){this.setCurrentLanguage()}onLanguageSelect(e){!e||e!==this.language&&this.changeLanguage(e)}changeLanguage(e){this.language=e,this.languageStore.changeLanguage(e,!0)}getEnabledLanguages(){return this.languageStore.getEnabledLanguages()}getEnabledLanguagesKeys(){var e,t;return null!==(t=Object.keys(null!==(e=this.languageStore.getEnabledLanguages())&&void 0!==e?e:{}))&&void 0!==t?t:[]}flipCard(){this.cardState="front"===this.cardState?"back":"front"}doLogin(){this.loading=!0,this.auth.doLogin(this.uname,this.passw,this.onLoginSuccess.bind(this),this.onLoginError.bind(this))}recoverPassword(){this.recoverPasswordService.run(this.uname,this.email).subscribe(e=>{this.message.log("Recover Password Status: "+e.status);let t="addSuccessMessageByKey";"error"===e.status&&(t="addDangerMessageByKey"),e.messages&&e.messages.forEach(e=>{this.message[t](e)})},()=>{this.message.log("Recover Password failed"),this.message.addDangerMessageByKey("ERR_AJAX_LOAD_FAILURE")})}onLoginSuccess(e){this.loading=!1,this.message.log("Login success"),this.message.removeMessages(),this.languageStore.setSessionLanguage().pipe((0,o.catchError)(()=>(0,r.of)({}))).subscribe(()=>{if(e&&e.redirect)this.router.navigate([e.redirect]).then();else{const e=this.configs.getHomePage();this.router.navigate(["/"+e]).then()}})}onLoginError(){this.loading=!1,this.message.log("Login failed"),this.message.addDangerMessage("Login credentials incorrect, please try again.")}setCurrentLanguage(){var e,t;let n=null!==(e=this.languageStore.getSelectedLanguage())&&void 0!==e?e:"";const i=this.languageStore.getActiveLanguage();if(n||(n=i),this.languageStore.isLanguageEnabled(n)||(n=""),this.language&&n===this.language)return;const r=null!==(t=this.configs.getConfigValue("default_language"))&&void 0!==t?t:"en_us";n||(n=r),this.languageStore.isLanguageEnabled(n)||(n=this.languageStore.getFirstLanguage()),this.language=n,this.changeLanguage(n)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(u.Router),i.\u0275\u0275directiveInject(Kp),i.\u0275\u0275directiveInject(Jl),i.\u0275\u0275directiveInject(Qr),i.\u0275\u0275directiveInject(ho),i.\u0275\u0275directiveInject(Sw))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["scrm-login-ui"]],decls:2,vars:3,consts:[["class","login-view d-flex align-items-center",4,"ngIf"],[1,"login-view","d-flex","align-items-center"],["name","login",1,"login-form"],["loginForm","ngForm"],[1,"form-row","form-group"],[1,"col"],["class","form-row",4,"ngIf"],[1,"form-row","fade-card"],["class","fade-card-front col",4,"ngIf"],["class","fade-card-back col",4,"ngIf"],[1,"form-row"],["for","languages",1,""],[1,"w-100"],[1,"inner-addon","left-addon"],["id","languages",3,"change"],["languageSelect",""],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"fade-card-front","col"],["image","login_user"],["type","text","name","username","aria-label","Username","required","",3,"ngModel","placeholder","ngModelChange"],["username","ngModel"],["class","invalid-feedback",4,"ngIf"],["image","login_password"],["type","password","name","password","aria-label","Password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],["id","login-button",1,"login-button",3,"scrm-button-loading","click"],["class","forgotten-password",4,"ngIf"],[1,"invalid-feedback"],[1,"forgotten-password"],[1,"forgotten-password-link",3,"click"],[1,"fade-card-back","col"],["image","email"],["type","email","name","email","aria-label","Email","required","",3,"ngModel","placeholder","ngModelChange"],["mail","ngModel"],["scrm-button-loading","",1,"submit-button","login-button",3,"click"],[1,"back-link","forgotten-password-link",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,wI,10,3,"div",0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[p.NgIf,h.\u0275NgNoValidate,h.NgControlStatusGroup,h.NgForm,Uh,p.NgForOf,h.NgSelectOption,h.\u0275NgSelectMultipleOption,Eo,h.DefaultValueAccessor,h.RequiredValidator,h.NgControlStatus,h.NgModel,fo],pipes:[p.AsyncPipe],encapsulation:2,data:{animation:[(0,hr.trigger)("fade",[(0,hr.transition)(":enter",(0,hr.useAnimation)(Tr.fadeIn,{params:{timing:.5,delay:0}}))])]}}),e})();const II=[{path:"",component:xI}];let EI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[h.FormsModule,ug,u.RouterModule.forChild(II),p.CommonModule,f.AngularSvgIconModule,Lo,ko]]}),e})()},99952:function(e,t,n){"use strict";n.d(t,{vT:function(){return a},Is:function(){return s}});var i=n(14468),r=n(1090);const o=new i.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,i.inject)(r.DOCUMENT)}});let s=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new i.EventEmitter,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(o,8))},e.\u0275prov=(0,i.\u0275\u0275defineInjectable)({factory:function(){return new e((0,i.\u0275\u0275inject)(o,8))},token:e,providedIn:"root"}),e})(),a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})()},79933:function(e,t,n){"use strict";n.d(t,{Eq:function(){return s},Ig:function(){return r},fI:function(){return a},su:function(){return o}});var i=n(14468);function r(e){return null!=e&&"false"!=`${e}`}function o(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function s(e){return Array.isArray(e)?e:[e]}function a(e){return e instanceof i.ElementRef?e.nativeElement:e}},64797:function(e,t,n){"use strict";n.d(t,{P3:function(){return a},o2:function(){return o},yy:function(){return l},eX:function(){return c},k:function(){return d},Z9:function(){return s}});var i=n(71180),r=n(14468);class o{}function s(e){return e&&"function"==typeof e.connect}class a extends o{constructor(e){super(),this._data=e}connect(){return(0,i.isObservable)(this._data)?this._data:(0,i.of)(this._data)}disconnect(){}}class l{applyChanges(e,t,n,i,r){e.forEachOperation((e,i,o)=>{let s,a;if(null==e.previousIndex){const r=n(e,i,o);s=t.createEmbeddedView(r.templateRef,r.context,r.index),a=1}else null==o?(t.remove(i),a=3):(s=t.get(i),t.move(s,o),a=2);r&&r({context:null==s?void 0:s.context,operation:a,record:e})})}detach(){}}class c{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(e,t,n,i,r){e.forEachOperation((e,o,s)=>{let a,l;null==e.previousIndex?(a=this._insertView(()=>n(e,o,s),s,t,i(e)),l=a?1:0):null==s?(this._detachAndCacheView(o,t),l=3):(a=this._moveView(o,s,t,i(e)),l=2),r&&r({context:null==a?void 0:a.context,operation:l,record:e})})}detach(){for(const e of this._viewCache)e.destroy();this._viewCache=[]}_insertView(e,t,n,i){const r=this._insertViewFromCache(t,n);if(r)return void(r.context.$implicit=i);const o=e();return n.createEmbeddedView(o.templateRef,o.context,o.index)}_detachAndCacheView(e,t){const n=t.detach(e);this._maybeCacheView(n,t)}_moveView(e,t,n,i){const r=n.get(e);return n.move(r,t),r.context.$implicit=i,r}_maybeCacheView(e,t){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(e);else{const n=t.indexOf(e);-1===n?e.destroy():t.remove(n)}}_insertViewFromCache(e,t){const n=this._viewCache.pop();return n&&t.insert(n,e),n||null}}const d=new r.InjectionToken("_ViewRepeater")},97637:function(e,t,n){"use strict";n.d(t,{t4:function(){return d},ud:function(){return u},kV:function(){return f},_i:function(){return m},i$:function(){return p},Mq:function(){return h}});var i=n(14468),r=n(1090);let o;try{o="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(g){o=!1}let s,a,l,c,d=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,r.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!o)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(i.PLATFORM_ID))},e.\u0275prov=(0,i.\u0275\u0275defineInjectable)({factory:function(){return new e((0,i.\u0275\u0275inject)(i.PLATFORM_ID))},token:e,providedIn:"root"}),e})(),u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();function p(e){return function(){if(null==s&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>s=!0}))}finally{s=s||!1}return s}()?e:!!e.capture}function h(){if(null==l){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return l=!1,l;if("scrollBehavior"in document.documentElement.style)l=!0;else{const e=Element.prototype.scrollTo;l=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return l}function m(){if("object"!=typeof document||!document)return 0;if(null==a){const e=document.createElement("div"),t=e.style;e.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",e.appendChild(n),document.body.appendChild(e),a=0,0===e.scrollLeft&&(e.scrollLeft=1,a=0===e.scrollLeft?1:2),e.parentNode.removeChild(e)}return a}function f(e){if(function(){if(null==c){const e="undefined"!=typeof document?document.head:null;c=!(!e||!e.createShadowRoot&&!e.attachShadow)}return c}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}},39996:function(e,t,n){"use strict";n.d(t,{xd:function(){return f},ZD:function(){return C},N7:function(){return S},mF:function(){return g},Cl:function(){return w},rL:function(){return y}});var i=n(79933),r=n(14468),o=n(71180),s=n(92343),a=n(97637),l=n(1090),c=n(99952);n(64797);const d=["contentWrapper"],u=["*"],p=new r.InjectionToken("VIRTUAL_SCROLL_STRATEGY");class h{constructor(e,t,n){this._scrolledIndexChange=new o.Subject,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,s.distinctUntilChanged)()),this._viewport=null,this._itemSize=e,this._minBufferPx=t,this._maxBufferPx=n}attach(e){this._viewport=e,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(e,t,n){this._itemSize=e,this._minBufferPx=t,this._maxBufferPx=n,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(e,t){this._viewport&&this._viewport.scrollToOffset(e*this._itemSize,t)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const e=this._viewport.getRenderedRange(),t={start:e.start,end:e.end},n=this._viewport.getViewportSize(),i=this._viewport.getDataLength();let r=this._viewport.measureScrollOffset(),o=this._itemSize>0?r/this._itemSize:0;if(t.end>i){const e=Math.ceil(n/this._itemSize),s=Math.max(0,Math.min(o,i-e));o!=s&&(o=s,r=s*this._itemSize,t.start=Math.floor(o)),t.end=Math.max(0,Math.min(i,t.start+e))}const s=r-t.start*this._itemSize;if(s<this._minBufferPx&&0!=t.start){const e=Math.ceil((this._maxBufferPx-s)/this._itemSize);t.start=Math.max(0,t.start-e),t.end=Math.min(i,Math.ceil(o+(n+this._minBufferPx)/this._itemSize))}else{const e=t.end*this._itemSize-(r+n);if(e<this._minBufferPx&&t.end!=i){const n=Math.ceil((this._maxBufferPx-e)/this._itemSize);n>0&&(t.end=Math.min(i,t.end+n),t.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(t),this._viewport.setRenderedContentOffset(this._itemSize*t.start),this._scrolledIndexChange.next(Math.floor(o))}}function m(e){return e._scrollStrategy}let f=(()=>{class e{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new h(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=(0,i.su)(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=(0,i.su)(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=(0,i.su)(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[r.\u0275\u0275ProvidersFeature([{provide:p,useFactory:m,deps:[(0,r.forwardRef)(()=>e)]}]),r.\u0275\u0275NgOnChangesFeature]}),e})(),g=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new o.Subject,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new o.Observable(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe((0,s.auditTime)(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,o.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe((0,s.filter)(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,e)&&t.push(i)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=(0,i.fI)(t),r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();return(0,o.fromEvent)(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(r.NgZone),r.\u0275\u0275inject(a.t4),r.\u0275\u0275inject(l.DOCUMENT,8))},e.\u0275prov=(0,r.\u0275\u0275defineInjectable)({factory:function(){return new e((0,r.\u0275\u0275inject)(r.NgZone),(0,r.\u0275\u0275inject)(a.t4),(0,r.\u0275\u0275inject)(l.DOCUMENT,8))},token:e,providedIn:"root"}),e})(),v=(()=>{class e{constructor(e,t,n,i){this.elementRef=e,this.scrollDispatcher=t,this.ngZone=n,this.dir=i,this._destroyed=new o.Subject,this._elementScrolled=new o.Observable(e=>this.ngZone.runOutsideAngular(()=>(0,o.fromEvent)(this.elementRef.nativeElement,"scroll").pipe((0,s.takeUntil)(this._destroyed)).subscribe(e)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const t=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=n?e.end:e.start),null==e.right&&(e.right=n?e.start:e.end),null!=e.bottom&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),n&&0!=(0,a._i)()?(null!=e.left&&(e.right=t.scrollWidth-t.clientWidth-e.left),2==(0,a._i)()?e.left=e.right:1==(0,a._i)()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const t=this.elementRef.nativeElement;(0,a.Mq)()?t.scrollTo(e):(null!=e.top&&(t.scrollTop=e.top),null!=e.left&&(t.scrollLeft=e.left))}measureScrollOffset(e){const t="left",n=this.elementRef.nativeElement;if("top"==e)return n.scrollTop;if("bottom"==e)return n.scrollHeight-n.clientHeight-n.scrollTop;const i=this.dir&&"rtl"==this.dir.value;return"start"==e?e=i?"right":t:"end"==e&&(e=i?t:"right"),i&&2==(0,a._i)()?e==t?n.scrollWidth-n.clientWidth-n.scrollLeft:n.scrollLeft:i&&1==(0,a._i)()?e==t?n.scrollLeft+n.scrollWidth-n.clientWidth:-n.scrollLeft:e==t?n.scrollLeft:n.scrollWidth-n.clientWidth-n.scrollLeft}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(g),r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(c.Is,8))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),e})(),y=(()=>{class e{constructor(e,t,n){this._platform=e,this._change=new o.Subject,this._changeListener=e=>{this._change.next(e)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,t=this._getWindow(),n=e.documentElement,i=n.getBoundingClientRect();return{top:-i.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-i.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe((0,s.auditTime)(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(a.t4),r.\u0275\u0275inject(r.NgZone),r.\u0275\u0275inject(l.DOCUMENT,8))},e.\u0275prov=(0,r.\u0275\u0275defineInjectable)({factory:function(){return new e((0,r.\u0275\u0275inject)(a.t4),(0,r.\u0275\u0275inject)(r.NgZone),(0,r.\u0275\u0275inject)(l.DOCUMENT,8))},token:e,providedIn:"root"}),e})();const b="undefined"!=typeof requestAnimationFrame?o.animationFrameScheduler:o.asapScheduler;let S=(()=>{class e extends v{constructor(e,t,n,i,r,s,a){super(e,s,n,r),this.elementRef=e,this._changeDetectorRef=t,this._scrollStrategy=i,this._detachedSubject=new o.Subject,this._renderedRangeSubject=new o.Subject,this._orientation="vertical",this.scrolledIndexChange=new o.Observable(e=>this._scrollStrategy.scrolledIndexChange.subscribe(t=>Promise.resolve().then(()=>this.ngZone.run(()=>e.next(t))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=o.Subscription.EMPTY,this._viewportChanges=a.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe((0,s.startWith)(null),(0,s.auditTime)(0,b)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe((0,s.takeUntil)(this._detachedSubject)).subscribe(e=>{const t=e.length;t!==this._dataLength&&(this._dataLength=t,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function(e,t){return e.start==t.start&&e.end==t.end})(this._renderedRange,e)||(this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,t="to-start"){const n="horizontal"==this.orientation,i=n?"X":"Y";let r=`translate${i}(${Number((n&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===t&&(r+=` translate${i}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=r&&(this._renderedContentTransform=r,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,t="auto"){const n={behavior:t};"horizontal"===this.orientation?n.start=e:n.top=e,this.scrollTo(n)}scrollToIndex(e,t="auto"){this._scrollStrategy.scrollToIndex(e,t)}measureScrollOffset(e){return super.measureScrollOffset(e||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const e=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?e.clientWidth:e.clientHeight}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const t of e)t()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(p,8),r.\u0275\u0275directiveInject(c.Is,8),r.\u0275\u0275directiveInject(g),r.\u0275\u0275directiveInject(y))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(d,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t._contentWrapper=e.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,t){2&e&&r.\u0275\u0275classProp("cdk-virtual-scroll-orientation-horizontal","horizontal"===t.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==t.orientation)},inputs:{orientation:"orientation"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[r.\u0275\u0275ProvidersFeature([{provide:v,useExisting:e}]),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:u,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0,1),r.\u0275\u0275projection(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"div",2)),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275styleProp("width",t._totalContentWidth)("height",t._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[c.vT,a.ud,C],c.vT,C]}),e})()},25346:function(e,t){var n;!function(i){"use strict";var r=function(e){return.5*(Math.exp(e)+Math.exp(-e))},o=function(e){return.5*(Math.exp(e)-Math.exp(-e))},s=function(){throw SyntaxError("Invalid Param")};function a(e,t){var n=Math.abs(e),i=Math.abs(t);return 0===e?Math.log(i):0===t?Math.log(n):n<3e3&&i<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}function l(e,t){if(!(this instanceof l))return new l(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return l.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return l.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):s();break;case"string":n.im=n.re=0;var i=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),r=1,o=0;null===i&&s();for(var a=0;a<i.length;a++){var c=i[a];" "===c||"\t"===c||"\n"===c||("+"===c?r++:"-"===c?o++:"i"===c||"I"===c?(r+o===0&&s()," "===i[a+1]||isNaN(i[a+1])?n.im+=parseFloat((o%2?"-":"")+"1"):(n.im+=parseFloat((o%2?"-":"")+i[a+1]),a++),r=o=0):((r+o===0||isNaN(c))&&s(),"i"===i[a+1]||"I"===i[a+1]?(n.im+=parseFloat((o%2?"-":"")+c),a++):n.re+=parseFloat((o%2?"-":"")+c),r=o=0))}r+o>0&&s();break;case"number":n.im=0,n.re=e;break;default:s()}return isNaN(n.re)||isNaN(n.im),n}(e,t);this.re=n.re,this.im=n.im}l.prototype={re:0,im:0,sign:function(){var e=this.abs();return new l(this.re/e,this.im/e)},add:function(e,t){var n=new l(e,t);return this.isInfinite()&&n.isInfinite()?l.NAN:this.isInfinite()||n.isInfinite()?l.INFINITY:new l(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new l(e,t);return this.isInfinite()&&n.isInfinite()?l.NAN:this.isInfinite()||n.isInfinite()?l.INFINITY:new l(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new l(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?l.NAN:this.isInfinite()||n.isInfinite()?l.INFINITY:0===n.im&&0===this.im?new l(this.re*n.re,0):new l(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new l(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return l.NAN;if(this.isInfinite()||n.isZero())return l.INFINITY;if(this.isZero()||n.isInfinite())return l.ZERO;e=this.re,t=this.im;var i,r,o=n.re,s=n.im;return 0===s?new l(e/o,t/o):Math.abs(o)<Math.abs(s)?new l((e*(r=o/s)+t)/(i=o*r+s),(t*r-e)/i):new l((e+t*(r=s/o))/(i=s*r+o),(t-e*r)/i)},pow:function(e,t){var n=new l(e,t);if(e=this.re,t=this.im,n.isZero())return l.ONE;if(0===n.im){if(0===t&&e>0)return new l(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new l(Math.pow(t,n.re),0);case 1:return new l(0,Math.pow(t,n.re));case 2:return new l(-Math.pow(t,n.re),0);case 3:return new l(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return l.ZERO;var i=Math.atan2(t,e),r=a(e,t);return e=Math.exp(n.re*r-n.im*i),t=n.im*r+n.re*i,new l(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,i=this.im,r=this.abs();if(n>=0){if(0===i)return new l(Math.sqrt(n),0);e=.5*Math.sqrt(2*(r+n))}else e=Math.abs(i)/Math.sqrt(2*(r-n));return t=n<=0?.5*Math.sqrt(2*(r-n)):Math.abs(i)/Math.sqrt(2*(r+n)),new l(e,i<0?-t:t)},exp:function(){var e=Math.exp(this.re);return new l(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new l(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new l(a(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,n=Math.abs(e),i=Math.abs(t),n<3e3&&i<3e3?Math.sqrt(n*n+i*i):(n<i?(n=i,i=e/t):i=t/e,n*Math.sqrt(1+i*i));var e,t,n,i},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new l(Math.sin(e)*r(t),Math.cos(e)*o(t))},cos:function(){var e=this.re,t=this.im;return new l(Math.cos(e)*r(t),-Math.sin(e)*o(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+r(t);return new l(Math.sin(e)/n,o(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-r(t);return new l(-Math.sin(e)/n,o(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*r(2*t)+.5*Math.cos(2*e);return new l(Math.cos(e)*r(t)/n,Math.sin(e)*o(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*r(2*t)-.5*Math.cos(2*e);return new l(Math.sin(e)*r(t)/n,-Math.cos(e)*o(t)/n)},asin:function(){var e=this.re,t=this.im,n=new l(t*t-e*e+1,-2*e*t).sqrt(),i=new l(n.re-t,n.im+e).log();return new l(i.im,-i.re)},acos:function(){var e=this.re,t=this.im,n=new l(t*t-e*e+1,-2*e*t).sqrt(),i=new l(n.re-t,n.im+e).log();return new l(Math.PI/2-i.im,i.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new l(0,1/0);if(-1===t)return new l(0,-1/0)}var n=e*e+(1-t)*(1-t),i=new l((1-t*t-e*e)/n,-2*e/n).log();return new l(-.5*i.im,.5*i.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new l(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).atan():new l(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(0,1/0);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).acos():new l(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).asin():new l(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new l(o(e)*Math.cos(t),r(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new l(r(e)*Math.cos(t),o(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=r(e)+Math.cos(t);return new l(o(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=r(e)-Math.cos(t);return new l(o(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-r(2*e);return new l(-2*o(e)*Math.cos(t)/n,2*r(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+r(2*e);return new l(2*r(e)*Math.cos(t)/n,-2*o(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,i=1-e,r=1+e,o=i*i+t*t,s=0!==o?new l((r*i-t*t)/o,(t*i+r*t)/o):new l(-1!==e?e/0:0,0!==t?t/0:0),c=s.re;return s.re=a(s.re,s.im)/2,s.im=Math.atan2(s.im,c)/2,n&&(s.im=-s.im),s},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).atanh():new l(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new l(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).asinh():new l(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return l.INFINITY;var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).acosh():new l(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return l.INFINITY;if(this.isInfinite())return l.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new l(e/n,-t/n)},conjugate:function(){return new l(this.re,-this.im)},neg:function(){return new l(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new l(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new l(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new l(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new l(e,t);return Math.abs(n.re-this.re)<=l.EPSILON&&Math.abs(n.im-this.im)<=l.EPSILON},clone:function(){return new l(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<l.EPSILON&&(e=0),Math.abs(t)<l.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},l.ZERO=new l(0,0),l.ONE=new l(1,0),l.I=new l(0,1),l.PI=new l(Math.PI,0),l.E=new l(Math.E,0),l.INFINITY=new l(1/0,1/0),l.NAN=new l(NaN,NaN),l.EPSILON=1e-15,void 0!==(n=(function(){return l}).apply(t,[]))&&(e.exports=n)}()},96641:function(e,t,n){var i;!function(r){"use strict";var o,s,a,l=9e15,c=1e9,d="0123456789abcdef",u="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",p="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",h={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},m=!0,f="[DecimalError] ",g=f+"Invalid argument: ",v=f+"Precision limit exceeded",y=f+"crypto unavailable",b="[object Decimal]",S=Math.floor,C=Math.pow,w=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,x=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,I=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,E=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_=1e7,M=u.length-1,j=p.length-1,k={toStringTag:b};function L(e){var t,n,i,r=e.length-1,o="",s=e[0];if(r>0){for(o+=s,t=1;t<r;t++)(n=7-(i=e[t]+"").length)&&(o+=V(n)),o+=i;(n=7-(i=(s=e[t])+"").length)&&(o+=V(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function F(e,t,n){if(e!==~~e||e<t||e>n)throw Error(g+e)}function O(e,t,n,i){var r,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=7,r=0):(r=Math.ceil((t+1)/7),t%=7),o=C(10,7-t),a=e[r]%o|0,null==i?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),s=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[r+1]/o/100|0)==C(10,t-2)-1||(a==o/2||0==a)&&0==(e[r+1]/o/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),s=(i||n<4)&&9999==a||!i&&n>3&&4999==a):s=((i||n<4)&&a+1==o||!i&&n>3&&a+1==o/2)&&(e[r+1]/o/1e3|0)==C(10,t-3)-1,s}function D(e,t,n){for(var i,r,o=[0],s=0,a=e.length;s<a;){for(r=o.length;r--;)o[r]*=t;for(o[0]+=d.indexOf(e.charAt(s++)),i=0;i<o.length;i++)o[i]>n-1&&(void 0===o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/n|0,o[i]%=n)}return o.reverse()}k.absoluteValue=k.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),N(e)},k.ceil=function(){return N(new this.constructor(this),this.e+1,2)},k.clampedTo=k.clamp=function(e,t){var n=this,i=n.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(g+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new i(n)},k.comparedTo=k.cmp=function(e){var t,n,i,r,o=this,s=o.d,a=(e=new o.constructor(e)).d,l=o.s,c=e.s;if(!s||!a)return l&&c?l!==c?l:s===a?0:!s^l<0?1:-1:NaN;if(!s[0]||!a[0])return s[0]?l:a[0]?-c:0;if(l!==c)return l;if(o.e!==e.e)return o.e>e.e^l<0?1:-1;for(t=0,n=(i=s.length)<(r=a.length)?i:r;t<n;++t)if(s[t]!==a[t])return s[t]>a[t]^l<0?1:-1;return i===r?0:i>r^l<0?1:-1},k.cosine=k.cos=function(){var e,t,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.rounding,i.precision=(e=i.precision)+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(e,t){var n,i,r;if(t.isZero())return t;(i=t.d.length)<32?r=(1/Q(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=q(e,1,t.times(r),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}(i,Y(i,n)),i.precision=e,i.rounding=t,N(2==a||3==a?n.neg():n,e,t,!0)):new i(1):new i(NaN)},k.cubeRoot=k.cbrt=function(){var e,t,n,i,r,o,s,a,l,c,d=this,u=d.constructor;if(!d.isFinite()||d.isZero())return new u(d);for(m=!1,(o=d.s*C(d.s*d,1/3))&&Math.abs(o)!=1/0?i=new u(o.toString()):(n=L(d.d),(o=((e=d.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=C(n,1/3),e=S((e+1)/3)-(e%3==(e<0?-1:2)),(i=new u(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=d.s),s=(e=u.precision)+3;;)if(c=(l=(a=i).times(a).times(a)).plus(d),i=A(c.plus(d).times(a),c.plus(l),s+2,1),L(a.d).slice(0,s)===(n=L(i.d)).slice(0,s)){if("9999"!=(n=n.slice(s-3,s+1))&&(r||"4999"!=n)){(!+n||!+n.slice(1)&&"5"==n.charAt(0))&&(N(i,e+1,1),t=!i.times(i).times(i).eq(d));break}if(!r&&(N(a,e+1,0),a.times(a).times(a).eq(d))){i=a;break}s+=4,r=1}return m=!0,N(i,e,u.rounding,t)},k.decimalPlaces=k.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-S(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},k.dividedBy=k.div=function(e){return A(this,new this.constructor(e))},k.dividedToIntegerBy=k.divToInt=function(e){var t=this.constructor;return N(A(this,new t(e),0,1,1),t.precision,t.rounding)},k.equals=k.eq=function(e){return 0===this.cmp(e)},k.floor=function(){return N(new this.constructor(this),this.e+1,3)},k.greaterThan=k.gt=function(e){return this.cmp(e)>0},k.greaterThanOrEqualTo=k.gte=function(e){var t=this.cmp(e);return 1==t||0===t},k.hyperbolicCosine=k.cosh=function(){var e,t,n,i,r,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;i=s.rounding,s.precision=(n=s.precision)+Math.max(o.e,o.sd())+4,s.rounding=1,(r=o.d.length)<32?t=(1/Q(4,e=Math.ceil(r/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=q(s,1,o.times(t),new s(1),!0);for(var l,c=e,d=new s(8);c--;)l=o.times(o),o=a.minus(l.times(d.minus(l.times(d))));return N(o,s.precision=n,s.rounding=i,!0)},k.hyperbolicSine=k.sinh=function(){var e,t,n,i,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(n=o.rounding,o.precision=(t=o.precision)+Math.max(r.e,r.sd())+4,o.rounding=1,(i=r.d.length)<3)r=q(o,2,r,r,!0);else{e=1.4*Math.sqrt(i),r=q(o,2,r=r.times(1/Q(5,e=e>16?16:0|e)),r,!0);for(var s,a=new o(5),l=new o(16),c=new o(20);e--;)s=r.times(r),r=r.times(a.plus(s.times(l.times(s).plus(c))))}return o.precision=t,o.rounding=n,N(r,t,n,!0)},k.hyperbolicTangent=k.tanh=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.rounding,i.precision=(e=i.precision)+7,i.rounding=1,A(n.sinh(),n.cosh(),i.precision=e,i.rounding=t)):new i(n.s)},k.inverseCosine=k.acos=function(){var e,t=this,n=t.constructor,i=t.abs().cmp(1),r=n.precision,o=n.rounding;return-1!==i?0===i?t.isNeg()?B(n,r,o):new n(0):new n(NaN):t.isZero()?B(n,r+4,o).times(.5):(n.precision=r+6,n.rounding=1,t=t.asin(),e=B(n,r+4,o).times(.5),n.precision=r,n.rounding=o,e.minus(t))},k.inverseHyperbolicCosine=k.acosh=function(){var e,t,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.rounding,i.precision=(e=i.precision)+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,m=!1,n=n.times(n).minus(1).sqrt().plus(n),m=!0,i.precision=e,i.rounding=t,n.ln()):new i(n)},k.inverseHyperbolicSine=k.asinh=function(){var e,t,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.rounding,i.precision=(e=i.precision)+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,m=!1,n=n.times(n).plus(1).sqrt().plus(n),m=!0,i.precision=e,i.rounding=t,n.ln())},k.inverseHyperbolicTangent=k.atanh=function(){var e,t,n,i,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=o.precision,t=o.rounding,i=r.sd(),Math.max(i,e)<2*-r.e-1?N(new o(r),e,t,!0):(o.precision=n=i-r.e,r=A(r.plus(1),new o(1).minus(r),n+e,1),o.precision=e+4,o.rounding=1,r=r.ln(),o.precision=e,o.rounding=t,r.times(.5))):new o(NaN)},k.inverseSine=k.asin=function(){var e,t,n,i,r=this,o=r.constructor;return r.isZero()?new o(r):(t=r.abs().cmp(1),n=o.precision,i=o.rounding,-1!==t?0===t?((e=B(o,n+4,i).times(.5)).s=r.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,r.times(2)))},k.inverseTangent=k.atan=function(){var e,t,n,i,r,o,s,a,l,c=this,d=c.constructor,u=d.precision,p=d.rounding;if(c.isFinite()){if(c.isZero())return new d(c);if(c.abs().eq(1)&&u+4<=j)return(s=B(d,u+4,p).times(.25)).s=c.s,s}else{if(!c.s)return new d(NaN);if(u+4<=j)return(s=B(d,u+4,p).times(.5)).s=c.s,s}for(d.precision=a=u+10,d.rounding=1,e=n=Math.min(28,a/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(m=!1,t=Math.ceil(a/7),i=1,l=c.times(c),s=new d(c),r=c;-1!==e;)if(r=r.times(l),o=s.minus(r.div(i+=2)),r=r.times(l),void 0!==(s=o.plus(r.div(i+=2))).d[t])for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),m=!0,N(s,d.precision=u,d.rounding=p,!0)},k.isFinite=function(){return!!this.d},k.isInteger=k.isInt=function(){return!!this.d&&S(this.e/7)>this.d.length-2},k.isNaN=function(){return!this.s},k.isNegative=k.isNeg=function(){return this.s<0},k.isPositive=k.isPos=function(){return this.s>0},k.isZero=function(){return!!this.d&&0===this.d[0]},k.lessThan=k.lt=function(e){return this.cmp(e)<0},k.lessThanOrEqualTo=k.lte=function(e){return this.cmp(e)<1},k.logarithm=k.log=function(e){var t,n,i,r,o,s,a,l,c=this,d=c.constructor,u=d.precision,p=d.rounding;if(null==e)e=new d(10),t=!0;else{if(n=(e=new d(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new d(n&&!n[0]?-1/0:1!=c.s?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(r=n[0];r%10==0;)r/=10;o=1!==r}if(m=!1,s=G(c,a=u+5),i=t?P(d,a+10):G(e,a),O((l=A(s,i,a,1)).d,r=u,p))do{if(s=G(c,a+=10),i=t?P(d,a+10):G(e,a),l=A(s,i,a,1),!o){+L(l.d).slice(r+1,r+15)+1==1e14&&(l=N(l,u+1,0));break}}while(O(l.d,r+=10,p));return m=!0,N(l,u,p)},k.minus=k.sub=function(e){var t,n,i,r,o,s,a,l,c,d,u,p,h=this,f=h.constructor;if(e=new f(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new f(e.d||h.s!==e.s?h:NaN):e=new f(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(p=e.d,a=f.precision,l=f.rounding,!(c=h.d)[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!c[0])return new f(3===l?-0:0);e=new f(h)}return m?N(e,a,l):e}if(n=S(e.e/7),d=S(h.e/7),c=c.slice(),o=d-n){for((u=o<0)?(t=c,o=-o,s=p.length):(t=p,n=d,s=c.length),o>(i=Math.max(Math.ceil(a/7),s)+2)&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for((u=(i=c.length)<(s=p.length))&&(s=i),i=0;i<s;i++)if(c[i]!=p[i]){u=c[i]<p[i];break}o=0}for(u&&(t=c,c=p,p=t,e.s=-e.s),i=p.length-(s=c.length);i>0;--i)c[s++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(r=i;r&&0===c[--r];)c[r]=_-1;--c[r],c[i]+=_}c[i]-=p[i]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=T(c,n),m?N(e,a,l):e):new f(3===l?-0:0)},k.modulo=k.mod=function(e){var t,n=this,i=n.constructor;return e=new i(e),!n.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||n.d&&!n.d[0]?N(new i(n),i.precision,i.rounding):(m=!1,9==i.modulo?(t=A(n,e.abs(),0,3,1)).s*=e.s:t=A(n,e,0,i.modulo,1),t=t.times(e),m=!0,n.minus(t))},k.naturalExponential=k.exp=function(){return Z(this)},k.naturalLogarithm=k.ln=function(){return G(this)},k.negated=k.neg=function(){var e=new this.constructor(this);return e.s=-e.s,N(e)},k.plus=k.add=function(e){var t,n,i,r,o,s,a,l,c,d,u=this,p=u.constructor;if(e=new p(e),!u.d||!e.d)return u.s&&e.s?u.d||(e=new p(e.d||u.s===e.s?u:NaN)):e=new p(NaN),e;if(u.s!=e.s)return e.s=-e.s,u.minus(e);if(d=e.d,a=p.precision,l=p.rounding,!(c=u.d)[0]||!d[0])return d[0]||(e=new p(u)),m?N(e,a,l):e;if(o=S(u.e/7),i=S(e.e/7),c=c.slice(),r=o-i){for(r<0?(n=c,r=-r,s=d.length):(n=d,i=o,s=c.length),r>(s=(o=Math.ceil(a/7))>s?o+1:s+1)&&(r=s,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for((s=c.length)-(r=d.length)<0&&(r=s,n=d,d=c,c=n),t=0;r;)t=(c[--r]=c[r]+d[r]+t)/_|0,c[r]%=_;for(t&&(c.unshift(t),++i),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=T(c,i),m?N(e,a,l):e},k.precision=k.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(g+e);return n.d?(t=$(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},k.round=function(){var e=this,t=e.constructor;return N(new t(e),e.e+1,t.rounding)},k.sine=k.sin=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.rounding,i.precision=(e=i.precision)+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(e,t){var n,i=t.d.length;if(i<3)return t.isZero()?t:q(e,2,t,t);n=1.4*Math.sqrt(i),t=q(e,2,t=t.times(1/Q(5,n=n>16?16:0|n)),t);for(var r,o=new e(5),s=new e(16),a=new e(20);n--;)r=t.times(t),t=t.times(o.plus(r.times(s.times(r).minus(a))));return t}(i,Y(i,n)),i.precision=e,i.rounding=t,N(a>2?n.neg():n,e,t,!0)):new i(NaN)},k.squareRoot=k.sqrt=function(){var e,t,n,i,r,o,s=this,a=s.d,l=s.e,c=s.s,d=s.constructor;if(1!==c||!a||!a[0])return new d(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);for(m=!1,0==(c=Math.sqrt(+s))||c==1/0?(((t=L(a)).length+l)%2==0&&(t+="0"),c=Math.sqrt(t),l=S((l+1)/2)-(l<0||l%2),i=new d(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):i=new d(c.toString()),n=(l=d.precision)+3;;)if(i=(o=i).plus(A(s,o,n+2,1)).times(.5),L(o.d).slice(0,n)===(t=L(i.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(r||"4999"!=t)){(!+t||!+t.slice(1)&&"5"==t.charAt(0))&&(N(i,l+1,1),e=!i.times(i).eq(s));break}if(!r&&(N(o,l+1,0),o.times(o).eq(s))){i=o;break}n+=4,r=1}return m=!0,N(i,l,d.rounding,e)},k.tangent=k.tan=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.rounding,i.precision=(e=i.precision)+10,i.rounding=1,(n=n.sin()).s=1,n=A(n,new i(1).minus(n.times(n)).sqrt(),e+10,0),i.precision=e,i.rounding=t,N(2==a||4==a?n.neg():n,e,t,!0)):new i(NaN)},k.times=k.mul=function(e){var t,n,i,r,o,s,a,l,c,d=this.constructor,u=this.d,p=(e=new d(e)).d;if(e.s*=this.s,!(u&&u[0]&&p&&p[0]))return new d(!e.s||u&&!u[0]&&!p||p&&!p[0]&&!u?NaN:u&&p?0*e.s:e.s/0);for(n=S(this.e/7)+S(e.e/7),(l=u.length)<(c=p.length)&&(o=u,u=p,p=o,s=l,l=c,c=s),o=[],i=s=l+c;i--;)o.push(0);for(i=c;--i>=0;){for(t=0,r=l+i;r>i;)a=o[r]+p[i]*u[r-i-1]+t,o[r--]=a%_|0,t=a/_|0;o[r]=(o[r]+t)%_|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=T(o,n),m?N(e,d.precision,d.rounding):e},k.toBinary=function(e,t){return X(this,2,e,t)},k.toDecimalPlaces=k.toDP=function(e,t){var n=this,i=n.constructor;return n=new i(n),void 0===e?n:(F(e,0,c),void 0===t?t=i.rounding:F(t,0,8),N(n,e+n.e+1,t))},k.toExponential=function(e,t){var n,i=this,r=i.constructor;return void 0===e?n=R(i,!0):(F(e,0,c),void 0===t?t=r.rounding:F(t,0,8),n=R(i=N(new r(i),e+1,t),!0,e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},k.toFixed=function(e,t){var n,i,r=this,o=r.constructor;return void 0===e?n=R(r):(F(e,0,c),void 0===t?t=o.rounding:F(t,0,8),n=R(i=N(new o(r),e+r.e+1,t),!1,e+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},k.toFraction=function(e){var t,n,i,r,o,s,a,l,c,d,u,p,h=this,f=h.d,v=h.constructor;if(!f)return new v(h);if(c=n=new v(1),i=l=new v(0),o=(t=new v(i)).e=$(f)-h.e-1,t.d[0]=C(10,(s=o%7)<0?7+s:s),null==e)e=o>0?t:c;else{if(!(a=new v(e)).isInt()||a.lt(c))throw Error(g+a);e=a.gt(t)?o>0?t:c:a}for(m=!1,a=new v(L(f)),d=v.precision,v.precision=o=7*f.length*2;u=A(a,t,0,1,1),1!=(r=n.plus(u.times(i))).cmp(e);)n=i,i=r,c=l.plus(u.times(r=c)),l=r,t=a.minus(u.times(r=t)),a=r;return r=A(e.minus(n),i,0,1,1),l=l.plus(r.times(c)),n=n.plus(r.times(i)),l.s=c.s=h.s,p=A(c,i,o,1).minus(h).abs().cmp(A(l,n,o,1).minus(h).abs())<1?[c,i]:[l,n],v.precision=d,m=!0,p},k.toHexadecimal=k.toHex=function(e,t){return X(this,16,e,t)},k.toNearest=function(e,t){var n=this,i=n.constructor;if(n=new i(n),null==e){if(!n.d)return n;e=new i(1),t=i.rounding}else{if(e=new i(e),void 0===t?t=i.rounding:F(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(m=!1,n=A(n,e,0,t,1).times(e),m=!0,N(n)):(e.s=n.s,n=e),n},k.toNumber=function(){return+this},k.toOctal=function(e,t){return X(this,8,e,t)},k.toPower=k.pow=function(e){var t,n,i,r,o,s,a=this,l=a.constructor,c=+(e=new l(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new l(C(+a,c));if((a=new l(a)).eq(1))return a;if(i=l.precision,o=l.rounding,e.eq(1))return N(a,i,o);if((t=S(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return r=z(l,a,n,i),e.s<0?new l(1).div(r):N(r,i,o);if((s=a.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(s=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=s,a}return(t=0!=(n=C(+a,c))&&isFinite(n)?new l(n+"").e:S(c*(Math.log("0."+L(a.d))/Math.LN10+a.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?s/0:0):(m=!1,l.rounding=a.s=1,n=Math.min(12,(t+"").length),(r=Z(e.times(G(a,i+n)),i)).d&&O((r=N(r,i+5,1)).d,i,o)&&+L((r=N(Z(e.times(G(a,(t=i+10)+n)),t),t+5,1)).d).slice(i+1,i+15)+1==1e14&&(r=N(r,i+1,0)),r.s=s,m=!0,l.rounding=o,N(r,i,o))},k.toPrecision=function(e,t){var n,i=this,r=i.constructor;return void 0===e?n=R(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(F(e,1,c),void 0===t?t=r.rounding:F(t,0,8),n=R(i=N(new r(i),e,t),e<=i.e||i.e<=r.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+n:n},k.toSignificantDigits=k.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(F(e,1,c),void 0===t?t=n.rounding:F(t,0,8)),N(new n(this),e,t)},k.toString=function(){var e=this,t=e.constructor,n=R(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},k.truncated=k.trunc=function(){return N(new this.constructor(this),this.e+1,1)},k.valueOf=k.toJSON=function(){var e=this,t=e.constructor,n=R(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var A=function(){function e(e,t,n){var i,r=0,o=e.length;for(e=e.slice();o--;)e[o]=(i=e[o]*t+r)%n|0,r=i/n|0;return r&&e.unshift(r),e}function t(e,t,n,i){var r,o;if(n!=i)o=n>i?1:-1;else for(r=o=0;r<n;r++)if(e[r]!=t[r]){o=e[r]>t[r]?1:-1;break}return o}function n(e,t,n,i){for(var r=0;n--;)e[n]-=r,e[n]=(r=e[n]<t[n]?1:0)*i+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(i,r,o,a,l,c){var d,u,p,h,m,f,g,v,y,b,C,w,x,I,E,M,j,k,L,F,O=i.constructor,D=i.s==r.s?1:-1,A=i.d,R=r.d;if(!(A&&A[0]&&R&&R[0]))return new O(i.s&&r.s&&(A?!R||A[0]!=R[0]:R)?A&&0==A[0]||!R?0*D:D/0:NaN);for(c?(m=1,u=i.e-r.e):(c=_,u=S(i.e/(m=7))-S(r.e/m)),L=R.length,j=A.length,b=(y=new O(D)).d=[],p=0;R[p]==(A[p]||0);p++);if(R[p]>(A[p]||0)&&u--,null==o?(I=o=O.precision,a=O.rounding):I=l?o+(i.e-r.e)+1:o,I<0)b.push(1),f=!0;else{if(I=I/m+2|0,p=0,1==L){for(h=0,R=R[0],I++;(p<j||h)&&I--;p++)b[p]=(E=h*c+(A[p]||0))/R|0,h=E%R|0;f=h||p<j}else{for((h=c/(R[0]+1)|0)>1&&(R=e(R,h,c),A=e(A,h,c),L=R.length,j=A.length),M=L,w=(C=A.slice(0,L)).length;w<L;)C[w++]=0;(F=R.slice()).unshift(0),k=R[0],R[1]>=c/2&&++k;do{h=0,(d=t(R,C,L,w))<0?(x=C[0],L!=w&&(x=x*c+(C[1]||0)),(h=x/k|0)>1?(h>=c&&(h=c-1),1==(d=t(g=e(R,h,c),C,v=g.length,w=C.length))&&(h--,n(g,L<v?F:R,v,c))):(0==h&&(d=h=1),g=R.slice()),(v=g.length)<w&&g.unshift(0),n(C,g,w,c),-1==d&&(d=t(R,C,L,w=C.length))<1&&(h++,n(C,L<w?F:R,w,c)),w=C.length):0===d&&(h++,C=[0]),b[p++]=h,d&&C[0]?C[w++]=A[M]||0:(C=[A[M]],w=1)}while((M++<j||void 0!==C[0])&&I--);f=void 0!==C[0]}b[0]||b.shift()}if(1==m)y.e=u,s=f;else{for(p=1,h=b[0];h>=10;h/=10)p++;y.e=p+u*m-1,N(y,l?o+y.e+1:o,a,f)}return y}}();function N(e,t,n,i){var r,o,s,a,l,c,d,u,p,h=e.constructor;e:if(null!=t){if(!(u=e.d))return e;for(r=1,a=u[0];a>=10;a/=10)r++;if((o=t-r)<0)o+=7,l=(d=u[p=0])/C(10,r-(s=t)-1)%10|0;else if((p=Math.ceil((o+1)/7))>=(a=u.length)){if(!i)break e;for(;a++<=p;)u.push(0);d=l=0,r=1,s=(o%=7)-7+1}else{for(d=a=u[p],r=1;a>=10;a/=10)r++;l=(s=(o%=7)-7+r)<0?0:d/C(10,r-s-1)%10|0}if(i=i||t<0||void 0!==u[p+1]||(s<0?d:d%C(10,r-s-1)),c=n<4?(l||i)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||i||6==n&&(o>0?s>0?d/C(10,r-s):0:u[p-1])%10&1||n==(e.s<0?8:7)),t<1||!u[0])return u.length=0,c?(u[0]=C(10,(7-(t-=e.e+1)%7)%7),e.e=-t||0):u[0]=e.e=0,e;if(0==o?(u.length=p,a=1,p--):(u.length=p+1,a=C(10,7-o),u[p]=s>0?(d/C(10,r-s)%C(10,s)|0)*a:0),c)for(;;){if(0==p){for(o=1,s=u[0];s>=10;s/=10)o++;for(s=u[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,u[0]==_&&(u[0]=1));break}if(u[p]+=a,u[p]!=_)break;u[p--]=0,a=1}for(o=u.length;0===u[--o];)u.pop()}return m&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function R(e,t,n){if(!e.isFinite())return H(e);var i,r=e.e,o=L(e.d),s=o.length;return t?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+V(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):r<0?(o="0."+V(-r-1)+o,n&&(i=n-s)>0&&(o+=V(i))):r>=s?(o+=V(r+1-s),n&&(i=n-r-1)>0&&(o=o+"."+V(i))):((i=r+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(o+="."),o+=V(i))),o}function T(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function P(e,t,n){if(t>M)throw m=!0,n&&(e.precision=n),Error(v);return N(new e(u),t,1,!0)}function B(e,t,n){if(t>j)throw Error(v);return N(new e(p),t,n,!0)}function $(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function V(e){for(var t="";e--;)t+="0";return t}function z(e,t,n,i){var r,o=new e(1),s=Math.ceil(i/7+4);for(m=!1;;){if(n%2&&J((o=o.times(t)).d,s)&&(r=!0),0===(n=S(n/2))){n=o.d.length-1,r&&0===o.d[n]&&++o.d[n];break}J((t=t.times(t)).d,s)}return m=!0,o}function U(e){return 1&e.d[e.d.length-1]}function K(e,t,n){for(var i,r=new e(t[0]),o=0;++o<t.length;){if(!(i=new e(t[o])).s){r=i;break}r[n](i)&&(r=i)}return r}function Z(e,t){var n,i,r,o,s,a,l,c=0,d=0,u=0,p=e.constructor,h=p.rounding,f=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(m=!1,l=f):l=t,a=new p(.03125);e.e>-2;)e=e.times(a),u+=5;for(l+=i=Math.log(C(2,u))/Math.LN10*2+5|0,n=o=s=new p(1),p.precision=l;;){if(o=N(o.times(e),l,1),n=n.times(++d),L((a=s.plus(A(o,n,l,1))).d).slice(0,l)===L(s.d).slice(0,l)){for(r=u;r--;)s=N(s.times(s),l,1);if(null!=t)return p.precision=f,s;if(!(c<3&&O(s.d,l-i,h,c)))return N(s,p.precision=f,h,m=!0);p.precision=l+=10,n=o=a=new p(1),d=0,c++}s=a}}function G(e,t){var n,i,r,o,s,a,l,c,d,u,p,h=1,f=e,g=f.d,v=f.constructor,y=v.rounding,b=v.precision;if(f.s<0||!g||!g[0]||!f.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=f.s?NaN:g?0:f);if(null==t?(m=!1,d=b):d=t,v.precision=d+=10,i=(n=L(g)).charAt(0),!(Math.abs(o=f.e)<15e14))return c=P(v,d+2,b).times(o+""),f=G(new v(i+"."+n.slice(1)),d-10).plus(c),v.precision=b,null==t?N(f,b,y,m=!0):f;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=L((f=f.times(e)).d)).charAt(0),h++;for(o=f.e,i>1?(f=new v("0."+n),o++):f=new v(i+"."+n.slice(1)),u=f,l=s=f=A(f.minus(1),f.plus(1),d,1),p=N(f.times(f),d,1),r=3;;){if(s=N(s.times(p),d,1),L((c=l.plus(A(s,new v(r),d,1))).d).slice(0,d)===L(l.d).slice(0,d)){if(l=l.times(2),0!==o&&(l=l.plus(P(v,d+2,b).times(o+""))),l=A(l,new v(h),d,1),null!=t)return v.precision=b,l;if(!O(l.d,d-10,y,a))return N(l,v.precision=b,y,m=!0);v.precision=d+=10,c=s=f=A(u.minus(1),u.plus(1),d,1),p=N(f.times(f),d,1),r=a=1}l=c,r+=2}}function H(e){return String(e.s*e.s/0)}function W(e,t){var n,i,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;48===t.charCodeAt(i);i++);for(r=t.length;48===t.charCodeAt(r-1);--r);if(t=t.slice(i,r)){if(r-=i,e.e=n=n-i-1,e.d=[],i=(n+1)%7,n<0&&(i+=7),i<r){for(i&&e.d.push(+t.slice(0,i)),r-=7;i<r;)e.d.push(+t.slice(i,i+=7));i=7-(t=t.slice(i)).length}else i-=r;for(;i--;)t+="0";e.d.push(+t),m&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function q(e,t,n,i,r){var o,s,a,l,c=e.precision,d=Math.ceil(c/7);for(m=!1,l=n.times(n),a=new e(i);;){if(s=A(a.times(l),new e(t++*t++),c,1),a=r?i.plus(s):i.minus(s),i=A(s.times(l),new e(t++*t++),c,1),void 0!==(s=a.plus(i)).d[d]){for(o=d;s.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=i,i=s,s=o}return m=!0,s.d.length=d+1,s}function Q(e,t){for(var n=e;--t;)n*=e;return n}function Y(e,t){var n,i=t.s<0,r=B(e,e.precision,1),o=r.times(.5);if((t=t.abs()).lte(o))return a=i?4:1,t;if((n=t.divToInt(r)).isZero())a=i?3:2;else{if((t=t.minus(n.times(r))).lte(o))return a=U(n)?i?2:3:i?4:1,t;a=U(n)?i?1:4:i?3:2}return t.minus(r).abs()}function X(e,t,n,i){var r,o,a,l,u,p,h,m,f,g=e.constructor,v=void 0!==n;if(v?(F(n,1,c),void 0===i?i=g.rounding:F(i,0,8)):(n=g.precision,i=g.rounding),e.isFinite()){for(v?(r=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):r=t,(a=(h=R(e)).indexOf("."))>=0&&(h=h.replace(".",""),(f=new g(1)).e=h.length-a,f.d=D(R(f),10,r),f.e=f.d.length),o=u=(m=D(h,10,r)).length;0==m[--u];)m.pop();if(m[0]){if(a<0?o--:((e=new g(e)).d=m,e.e=o,m=(e=A(e,f,n,i,0,r)).d,o=e.e,p=s),a=m[n],l=r/2,p=p||void 0!==m[n+1],p=i<4?(void 0!==a||p)&&(0===i||i===(e.s<0?3:2)):a>l||a===l&&(4===i||p||6===i&&1&m[n-1]||i===(e.s<0?8:7)),m.length=n,p)for(;++m[--n]>r-1;)m[n]=0,n||(++o,m.unshift(1));for(u=m.length;!m[u-1];--u);for(a=0,h="";a<u;a++)h+=d.charAt(m[a]);if(v){if(u>1)if(16==t||8==t){for(a=16==t?4:3,--u;u%a;u++)h+="0";for(u=(m=D(h,r,t)).length;!m[u-1];--u);for(a=1,h="1.";a<u;a++)h+=d.charAt(m[a])}else h=h.charAt(0)+"."+h.slice(1);h=h+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)h="0"+h;h="0."+h}else if(++o>u)for(o-=u;o--;)h+="0";else o<u&&(h=h.slice(0,o)+"."+h.slice(o))}else h=v?"0p+0":"0";h=(16==t?"0x":2==t?"0b":8==t?"0o":"")+h}else h=H(e);return e.s<0?"-"+h:h}function J(e,t){if(e.length>t)return e.length=t,!0}function ee(e){return new this(e).abs()}function te(e){return new this(e).acos()}function ne(e){return new this(e).acosh()}function ie(e,t){return new this(e).plus(t)}function re(e){return new this(e).asin()}function oe(e){return new this(e).asinh()}function se(e){return new this(e).atan()}function ae(e){return new this(e).atanh()}function le(e,t){e=new this(e),t=new this(t);var n,i=this.precision,r=this.rounding,o=i+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?B(this,i,r):new this(0)).s=e.s:!e.d||t.isZero()?(n=B(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(A(e,t,o,1)),t=B(this,o,1),this.precision=i,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(A(e,t,o,1)):(n=B(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ce(e){return new this(e).cbrt()}function de(e){return N(e=new this(e),e.e+1,2)}function ue(e,t,n){return new this(e).clamp(t,n)}function pe(e){if(!e||"object"!=typeof e)throw Error(f+"Object expected");var t,n,i,r=!0===e.defaults,o=["precision",1,c,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],r&&(this[n]=h[n]),void 0!==(i=e[n])){if(!(S(i)===i&&i>=o[t+1]&&i<=o[t+2]))throw Error(g+n+": "+i);this[n]=i}if(n="crypto",r&&(this[n]=h[n]),void 0!==(i=e[n])){if(!0!==i&&!1!==i&&0!==i&&1!==i)throw Error(g+n+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[n]=!0}else this[n]=!1}return this}function he(e){return new this(e).cos()}function me(e){return new this(e).cosh()}function fe(e,t){return new this(e).div(t)}function ge(e){return new this(e).exp()}function ve(e){return N(e=new this(e),e.e+1,3)}function ye(){var e,t,n=new this(0);for(m=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return m=!0,new this(1/0);n=t}return m=!0,n.sqrt()}function be(e){return e instanceof o||e&&e.toStringTag===b||!1}function Se(e){return new this(e).ln()}function Ce(e,t){return new this(e).log(t)}function we(e){return new this(e).log(2)}function xe(e){return new this(e).log(10)}function Ie(){return K(this,arguments,"lt")}function Ee(){return K(this,arguments,"gt")}function _e(e,t){return new this(e).mod(t)}function Me(e,t){return new this(e).mul(t)}function je(e,t){return new this(e).pow(t)}function ke(e){var t,n,i,r,o=0,s=new this(1),a=[];if(void 0===e?e=this.precision:F(e,1,c),i=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));o<i;)(r=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=r%1e7;else{if(!crypto.randomBytes)throw Error(y);for(t=crypto.randomBytes(i*=4);o<i;)(r=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(r%1e7),o+=4);o=i/4}else for(;o<i;)a[o++]=1e7*Math.random()|0;for(e%=7,(i=a[--o])&&e&&(r=C(10,7-e),a[o]=(i/r|0)*r);0===a[o];o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=7)a.shift();for(i=1,r=a[0];r>=10;r/=10)i++;i<7&&(n-=7-i)}return s.e=n,s.d=a,s}function Le(e){return N(e=new this(e),e.e+1,this.rounding)}function Fe(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Oe(e){return new this(e).sin()}function De(e){return new this(e).sinh()}function Ae(e){return new this(e).sqrt()}function Ne(e,t){return new this(e).sub(t)}function Re(){var e=0,t=arguments,n=new this(t[e]);for(m=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return m=!0,N(n,this.precision,this.rounding)}function Te(e){return new this(e).tan()}function Pe(e){return new this(e).tanh()}function Be(e){return N(e=new this(e),e.e+1,1)}(o=function e(t){var n,i,r;function s(e){var t,n,i,r=this;if(!(r instanceof s))return new s(e);if(r.constructor=s,be(e))return r.s=e.s,void(m?!e.d||e.e>s.maxE?(r.e=NaN,r.d=null):e.e<s.minE?(r.e=0,r.d=[0]):(r.e=e.e,r.d=e.d.slice()):(r.e=e.e,r.d=e.d?e.d.slice():e.d));if("number"==(i=typeof e)){if(0===e)return r.s=1/e<0?-1:1,r.e=0,void(r.d=[0]);if(e<0?(e=-e,r.s=-1):r.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(m?t>s.maxE?(r.e=NaN,r.d=null):t<s.minE?(r.e=0,r.d=[0]):(r.e=t,r.d=[e]):(r.e=t,r.d=[e]))}return 0*e!=0?(e||(r.s=NaN),r.e=NaN,void(r.d=null)):W(r,e.toString())}if("string"!==i)throw Error(g+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),r.s=-1):(43===n&&(e=e.slice(1)),r.s=1),E.test(e)?W(r,e):function(e,t){var n,i,r,s,a,l,c,d,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),E.test(t))return W(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(x.test(t))n=16,t=t.toLowerCase();else if(w.test(t))n=2;else{if(!I.test(t))throw Error(g+t);n=8}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),i=e.constructor,(a=s>=0)&&(s=(l=(t=t.replace(".","")).length)-s,r=z(i,new i(n),s,2*s)),s=u=(d=D(t,n,_)).length-1;0===d[s];--s)d.pop();return s<0?new i(0*e.s):(e.e=T(d,u),e.d=d,m=!1,a&&(e=A(e,r,4*l)),c&&(e=e.times(Math.abs(c)<54?C(2,c):o.pow(2,c))),m=!0,e)}(r,e)}if(s.prototype=k,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=pe,s.clone=e,s.isDecimal=be,s.abs=ee,s.acos=te,s.acosh=ne,s.add=ie,s.asin=re,s.asinh=oe,s.atan=se,s.atanh=ae,s.atan2=le,s.cbrt=ce,s.ceil=de,s.clamp=ue,s.cos=he,s.cosh=me,s.div=fe,s.exp=ge,s.floor=ve,s.hypot=ye,s.ln=Se,s.log=Ce,s.log10=xe,s.log2=we,s.max=Ie,s.min=Ee,s.mod=_e,s.mul=Me,s.pow=je,s.random=ke,s.round=Le,s.sign=Fe,s.sin=Oe,s.sinh=De,s.sqrt=Ae,s.sub=Ne,s.sum=Re,s.tan=Te,s.tanh=Pe,s.trunc=Be,void 0===t&&(t={}),t&&!0!==t.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)t.hasOwnProperty(i=r[n++])||(t[i]=this[i]);return s.config(t),s}(h)).prototype.constructor=o,o.default=o.Decimal=o,u=new o(u),p=new o(p),void 0!==(i=(function(){return o}).call(t,n,t,e))&&(e.exports=i)}()},9469:function(e,t){var n;!function(i){"use strict";var r={s:1,n:0,d:1};function o(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function n(){}return n.prototype=Error.prototype,t.prototype=new n,t}var s=h.DivisionByZero=o("DivisionByZero"),a=h.InvalidParameter=o("InvalidParameter");function l(e,t){return isNaN(e=parseInt(e,10))&&c(),e*t}function c(){throw new a}function d(e){for(var t={},n=e,i=2,r=4;r<=n;){for(;n%i==0;)n/=i,t[i]=(t[i]||0)+1;r+=1+2*i++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var u=function(e,t){var n,i=0,o=1,a=1,d=0,u=0,p=0,h=1,m=1,f=0,g=1,v=1,y=1,b=1e7;if(null!=e)if(void 0!==t)a=(i=e)*(o=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(i=e.n,o=e.d,"s"in e&&(i*=e.s)):0 in e?(i=e[0],1 in e&&(o=e[1])):c(),a=i*o;break;case"number":if(e<0&&(a=e,e=-e),e%1==0)i=e;else if(e>0){for(e>=1&&(e/=m=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));g<=b&&y<=b;){if(e===(n=(f+v)/(g+y))){g+y<=b?(i=f+v,o=g+y):y>g?(i=v,o=y):(i=f,o=g);break}e>n?(f+=v,g+=y):(v+=f,y+=g),g>b?(i=v,o=y):(i=f,o=g)}i*=m}else(isNaN(e)||isNaN(t))&&(o=i=NaN);break;case"string":if(null===(g=e.match(/\d+|./g))&&c(),"-"===g[f]?(a=-1,f++):"+"===g[f]&&f++,g.length===f+1?u=l(g[f++],a):"."===g[f+1]||"."===g[f]?("."!==g[f]&&(d=l(g[f++],a)),(1+ ++f===g.length||"("===g[f+1]&&")"===g[f+3]||"'"===g[f+1]&&"'"===g[f+3])&&(u=l(g[f],a),h=Math.pow(10,g[f].length),f++),("("===g[f]&&")"===g[f+2]||"'"===g[f]&&"'"===g[f+2])&&(p=l(g[f+1],a),m=Math.pow(10,g[f+1].length)-1,f+=3)):"/"===g[f+1]||":"===g[f+1]?(u=l(g[f],a),h=l(g[f+2],1),f+=3):"/"===g[f+3]&&" "===g[f+1]&&(d=l(g[f],a),u=l(g[f+2],a),h=l(g[f+4],1),f+=5),g.length<=f){a=i=p+(o=h*m)*d+m*u;break}default:c()}if(0===o)throw new s;r.s=a<0?-1:1,r.n=Math.abs(i),r.d=Math.abs(o)};function p(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function h(e,t){if(!(this instanceof h))return new h(e,t);u(e,t),e=h.REDUCE?p(r.d,r.n):1,this.s=r.s,this.n=r.n/e,this.d=r.d/e}h.REDUCE=1,h.prototype={s:1,n:0,d:1,abs:function(){return new h(this.n,this.d)},neg:function(){return new h(-this.s*this.n,this.d)},add:function(e,t){return u(e,t),new h(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(e,t){return u(e,t),new h(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(e,t){return u(e,t),new h(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(e,t){return u(e,t),new h(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return new h(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new h(NaN):void 0===e?new h(this.s*this.n%this.d,1):(u(e,t),0===r.n&&0===this.d&&h(0,0),new h(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d))},gcd:function(e,t){return u(e,t),new h(p(r.n,this.n)*p(r.d,this.d),r.d*this.d)},lcm:function(e,t){return u(e,t),0===r.n&&0===this.n?new h:new h(r.n*this.n,p(r.n,this.n)*p(r.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):new h(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):new h(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):new h(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new h(this.s*this.d,this.n)},pow:function(e,t){if(u(e,t),1===r.d)return r.s<0?new h(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):new h(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var n=d(this.n),i=d(this.d),o=1,s=1;for(var a in n)if("1"!==a){if("0"===a){o=0;break}if(n[a]*=r.n,n[a]%r.d!=0)return null;n[a]/=r.d,o*=Math.pow(a,n[a])}for(var a in i)if("1"!==a){if(i[a]*=r.n,i[a]%r.d!=0)return null;i[a]/=r.d,s*=Math.pow(a,i[a])}return r.s<0?new h(s,o):new h(o,s)},equals:function(e,t){return u(e,t),this.s*this.n*r.d==r.s*r.n*this.d},compare:function(e,t){u(e,t);var n=this.s*this.n*r.d-r.s*r.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function n(e){return 1===e.length?new h(e[0]):n(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var i=0;i<t.length;i++){var r=n(t.slice(0,i+1));if(r.sub(this.abs()).abs().valueOf()<e)return r.mul(this.s)}return this},divisible:function(e,t){return u(e,t),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(e&&(t=Math.floor(i/r))>0&&(n+=t,n+=" ",i%=r),n+=i,n+="/",n+=r),n},toLatex:function(e){var t,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(e&&(t=Math.floor(i/r))>0&&(n+=t,i%=r),n+="\\frac{",n+=i,n+="}{",n+=r,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,i=[];if(isNaN(t)||isNaN(n))return i;do{i.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return i},toString:function(e){var t,n=this.n,i=this.d;if(isNaN(n)||isNaN(i))return"NaN";h.REDUCE||(n/=t=p(n,i),i/=t),e=e||15;var r=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,i=1;1!==n;i++)if(n=10*n%t,i>2e3)return 0;return i}(0,i),o=function(e,t,n){for(var i=1,r=function(e,t,n){for(var i=1;t>0;e=e*e%n,t>>=1)1&t&&(i=i*e%n);return i}(10,n,t),o=0;o<300;o++){if(i===r)return o;i=10*i%t,r=10*r%t}return 0}(0,i,r),s=-1===this.s?"-":"";if(s+=n/i|0,n%=i,(n*=10)&&(s+="."),r){for(var a=o;a--;)s+=n/i|0,n%=i,n*=10;for(s+="(",a=r;a--;)s+=n/i|0,n%=i,n*=10;s+=")"}else for(a=e;n&&a--;)s+=n/i|0,n%=i,n*=10;return s}},void 0!==(n=(function(){return h}).apply(t,[]))&&(e.exports=n)}()},36137:function(e){e.exports=function e(t,n){"use strict";var i,r,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,c=/^0/,d=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},u=d(t).replace(s,"")||"",p=d(n).replace(s,"")||"",h=u.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(u.match(l),16)||1!==h.length&&u.match(a)&&Date.parse(u),g=parseInt(p.match(l),16)||f&&p.match(a)&&Date.parse(p)||null;if(g){if(f<g)return-1;if(f>g)return 1}for(var v=0,y=Math.max(h.length,m.length);v<y;v++){if(i=!(h[v]||"").match(c)&&parseFloat(h[v])||h[v]||0,r=!(m[v]||"").match(c)&&parseFloat(m[v])||m[v]||0,isNaN(i)!==isNaN(r))return isNaN(i)?1:-1;if(typeof i!=typeof r&&(i+="",r+=""),i<r)return-1;if(i>r)return 1}return 0}},61396:function(e,t,n){var i=n(66274),r=n(2973),o=n(40182),s=n(24322),a=n(51166),l=n(40306),c=n(20121);c.alea=i,c.xor128=r,c.xorwow=o,c.xorshift7=s,c.xor4096=a,c.tychei=l,e.exports=c},66274:function(e,t,n){var i;!function(e,r,o){function s(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var i=.02519603282416938*(e+=t.charCodeAt(n));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new s(e),i=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,i&&("object"==typeof i&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.alea=l}(0,e=n.nmd(e))},40306:function(e,t,n){var i;!function(e,r,o){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,i=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-i|0,i=i<<24^i>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-i|0,t.d=i<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var i=0;i<n.length+20;i++)t.b^=0|n.charCodeAt(i),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new s(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.tychei=l}(0,e=n.nmd(e))},2973:function(e,t,n){var i;!function(e,r,o){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new s(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.xor128=l}(0,e=n.nmd(e))},51166:function(e,t,n){var i;!function(e,r,o){function s(e){var t=this;t.next=function(){var e,n,i=t.w,r=t.X,o=t.i;return t.w=i=i+1640531527|0,n=r[o+34&127],e=r[o=o+1&127],n^=n<<13,e^=e<<17,n=r[o]=(n^=n>>>15)^(e^=e>>>12),t.i=o,n+(i^i>>>16)|0},function(e,t){var n,i,r,o,s,a=[],l=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,l=Math.max(l,t.length)),r=0,o=-32;o<l;++o)t&&(i^=t.charCodeAt((o+32)%t.length)),0===o&&(s=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,o>=0&&(r=0==(n=a[127&o]^=i+(s=s+1640531527|0))?r+1:0);for(r>=128&&(a[127&(t&&t.length||0)]=-1),r=127,o=512;o>0;--o)i=a[r+34&127],n=a[r=r+1&127],i^=i<<13,n^=n<<17,a[r]=(i^=i>>>15)^(n^=n>>>12);e.w=s,e.X=a,e.i=r}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new s(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&(i.X&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.xor4096=l}(0,e=n.nmd(e))},24322:function(e,t,n){var i;!function(e,r,o){function s(e){var t=this;t.next=function(){var e,n,i=t.x,r=t.i;return e=i[r],n=(e^=e>>>7)^e<<24,n^=(e=i[r+1&7])^e>>>10,n^=(e=i[r+3&7])^e>>>3,n^=(e=i[r+4&7])^e<<7,e=i[r+7&7],i[r]=n^=(e^=e<<13)^e<<9,t.i=r+1&7,n},function(e,t){var n,i=[];if(t===(0|t))i[0]=t;else for(t=""+t,n=0;n<t.length;++n)i[7&n]=i[7&n]<<15^t.charCodeAt(n)+i[n+1&7]<<13;for(;i.length<8;)i.push(0);for(n=0;n<8&&0===i[n];++n);for(8==n&&(i[7]=-1),e.x=i,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new s(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&(i.x&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.xorshift7=l}(0,e=n.nmd(e))},40182:function(e,t,n){var i;!function(e,r,o){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),i==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new s(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&a(i,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.xorwow=l}(0,e=n.nmd(e))},20121:function(e,t,n){var i;!function(r,o,s){var a,l=256,c=s.pow(l,6),d=s.pow(2,52),u=2*d,p=255;function h(e,t,n){var i=[],p=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(l):(e=new Uint8Array(l),(r.crypto||r.msCrypto).getRandomValues(e)),y(e)}catch(i){var t=r.navigator,n=t&&t.plugins;return[+new Date,r,n,r.screen,y(o)]}}():e,3),i),h=new m(i),b=function(){for(var e=h.g(6),t=c,n=0;e<d;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|h.g(4)},b.quick=function(){return h.g(4)/4294967296},b.double=b,v(y(h.S),o),(t.pass||n||function(e,t,n,i){return i&&(i.S&&f(i,h),e.state=function(){return f(h,{})}),n?(s.random=e,t):e})(b,p,"global"in t?t.global:this==s,t.state)}function m(e){var t,n=e.length,i=this,r=0,o=i.i=i.j=0,s=i.S=[];for(n||(e=[n++]);r<l;)s[r]=r++;for(r=0;r<l;r++)s[r]=s[o=p&o+e[r%n]+(t=s[r])],s[o]=t;(i.g=function(e){for(var t,n=0,r=i.i,o=i.j,s=i.S;e--;)t=s[r=p&r+1],n=n*l+s[p&(s[r]=s[o=p&o+t])+(s[o]=t)];return i.i=r,i.j=o,n})(l)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,i=[],r=typeof e;if(t&&"object"==r)for(n in e)try{i.push(g(e[n],t-1))}catch(o){}return i.length?i:"string"==r?e:e+"\0"}function v(e,t){for(var n,i=e+"",r=0;r<i.length;)t[p&r]=p&(n^=19*t[p&r])+i.charCodeAt(r++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(v(s.random(),o),e.exports){e.exports=h;try{a=n(75042)}catch(b){}}else void 0!==(i=(function(){return h}).call(t,n,t,e))&&(e.exports=i)}("undefined"!=typeof self?self:this,[],Math)},11805:function(e,t){"use strict";var n,i;void 0!==(i="function"==typeof(n=function(){function e(){return!0}function t(){return!1}function n(){}return function i(){var r=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],o={name:"any",test:e},s=[],a=[],l={types:r,conversions:a,ignore:s};function c(e){var t=$(l.types,function(t){return t.name===e});if(t)return t;if("any"===e)return o;var n=$(l.types,function(t){return t.name.toLowerCase()===e.toLowerCase()});throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function d(e){return e===o?999:l.types.indexOf(e)}function u(e){var t=$(l.types,function(t){return t.test(e)});if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function p(e){return e.map(function(e){var t=e.types.map(S);return(e.restParam?"...":"")+t.join("|")}).join(",")}function h(e,t){var n=0===e.indexOf("..."),i=(n?e.length>3?e.slice(3):"any":e).split("|").map(O).filter(D).filter(F),r=function(e,t){var n={};return e.forEach(function(e){-1===t.indexOf(e.from)&&-1!==t.indexOf(e.to)&&!n[e.from]&&(n[e.from]=e)}),Object.keys(n).map(function(e){return n[e]})}(t,i),o=i.map(function(e){var t=c(e);return{name:e,typeIndex:d(t),test:t.test,conversion:null,conversionIndex:-1}}),s=r.map(function(e){var n=c(e.from);return{name:e.from,typeIndex:d(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}});return{types:o.concat(s),restParam:n}}function m(e){var t=R(e);return!!t&&t.restParam}function f(e){return e.types.some(function(e){return null!=e.conversion})}function g(t){if(!t||0===t.types.length)return e;if(1===t.types.length)return c(t.types[0].name).test;if(2===t.types.length){var n=c(t.types[0].name).test,i=c(t.types[1].name).test;return function(e){return n(e)||i(e)}}var r=t.types.map(function(e){return c(e.name).test});return function(e){for(var t=0;t<r.length;t++)if(r[t](e))return!0;return!1}}function v(e){var t,n,i;if(m(e)){var r=(t=function(e){return e.slice(0,e.length-1)}(e).map(g)).length,o=g(R(e));return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return function(e){for(var t=r;t<e.length;t++)if(!o(e[t]))return!1;return!0}(e)&&e.length>=r+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=g(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=g(e[0]),i=g(e[1]),function(e){return n(e[0])&&i(e[1])&&2===e.length}):(t=e.map(g),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function y(e,t){return t<e.params.length?e.params[t]:m(e.params)?R(e.params):null}function b(e,t,n){var i=y(e,t);return(i?n?i.types.filter(C):i.types:[]).map(S)}function S(e){return e.name}function C(e){return null==e.conversion}function w(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}(V(e,function(e){return b(e,t,!1)}));return-1!==n.indexOf("any")?["any"]:n}function x(e,t,n){var i,r,o,s=e||"unnamed",a=n;for(o=0;o<t.length;o++){var l=a.filter(function(e){var n=g(y(e,o));return(o<e.params.length||m(e.params))&&n(t[o])});if(0===l.length){if((r=w(a,o)).length>0){var c=u(t[o]);return(i=new TypeError("Unexpected type of argument in function "+s+" (expected: "+r.join(" or ")+", actual: "+c+", index: "+o+")")).data={category:"wrongType",fn:s,index:o,actual:c,expected:r},i}}else a=l}var d=a.map(function(e){return m(e.params)?1/0:e.params.length});if(t.length<Math.min.apply(null,d))return r=w(a,o),(i=new TypeError("Too few arguments in function "+s+" (expected: "+r.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:s,index:t.length,expected:r},i;var p=Math.max.apply(null,d);return t.length>p?((i=new TypeError("Too many arguments in function "+s+" (expected: "+p+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:s,index:t.length,expectedLength:p},i):((i=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+s+".")).data={category:"mismatch",actual:t.map(u)},i)}function I(e){for(var t=999,n=0;n<e.types.length;n++)C(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function E(e){for(var t=999,n=0;n<e.types.length;n++)C(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function _(e,t){var n;return 0!=(n=e.restParam-t.restParam)||0!=(n=f(e)-f(t))||0!=(n=I(e)-I(t))?n:E(e)-E(t)}function M(e,t){var n,i,r=Math.min(e.params.length,t.params.length);if(0!=(i=e.params.some(f)-t.params.some(f)))return i;for(n=0;n<r;n++)if(0!=(i=f(e.params[n])-f(t.params[n])))return i;for(n=0;n<r;n++)if(0!==(i=_(e.params[n],t.params[n])))return i;return e.params.length-t.params.length}function j(e){var t,n,i,r,o=[],s=[];switch(e.types.forEach(function(e){e.conversion&&(o.push(c(e.conversion.from).test),s.push(e.conversion.convert))}),s.length){case 0:return function(e){return e};case 1:return t=o[0],i=s[0],function(e){return t(e)?i(e):e};case 2:return t=o[0],n=o[1],i=s[0],r=s[1],function(e){return t(e)?i(e):n(e)?r(e):e};default:return function(e){for(var t=0;t<s.length;t++)if(o[t](e))return s[t](e);return e}}}function k(e,t){return function e(n,i,r){if(i<n.length){var o,s=n[i],a=t?s.types.filter(C):s.types;if(s.restParam){var l=a.filter(C);o=l.length<a.length?[l,a]:[a]}else o=a.map(function(e){return[e]});return V(o,function(t){return e(n,i+1,r.concat([t]))})}return[r.map(function(e,t){return{types:e,restParam:t===n.length-1&&m(n)}})]}(e,0,[])}function L(e,i){if(0===Object.keys(i).length)throw new SyntaxError("No signatures provided");var r=[];Object.keys(i).map(function(e){return function(e,t,n){var i=[];return""!==e.trim()&&(i=e.split(",").map(O).map(function(e,t,i){var r=h(e,n);if(r.restParam&&t!==i.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return r})),i.some(N)?null:{params:i,fn:t}}(e,i[e],l.conversions)}).filter(A).forEach(function(e){var t=$(r,function(t){return function(e,t){for(var n=Math.max(e.params.length,t.params.length),i=0;i<n;i++)if(!B(b(e,i,!0),b(t,i,!0)))return!1;var r=e.params.length,o=t.params.length,s=m(e.params),a=m(t.params);return s?a?r===o:o>=r:a?r>=o:r===o}(t,e)});if(t)throw new TypeError('Conflicting signatures "'+p(t.params)+'" and "'+p(e.params)+'".');r.push(e)});var o=V(r,function(e){return(e?k(e.params,!1):[]).map(function(t){return{params:t,fn:e.fn}})}).filter(A);o.sort(M);var s=o[0]&&o[0].params.length<=2&&!m(o[0].params),a=o[1]&&o[1].params.length<=2&&!m(o[1].params),c=o[2]&&o[2].params.length<=2&&!m(o[2].params),d=o[3]&&o[3].params.length<=2&&!m(o[3].params),u=o[4]&&o[4].params.length<=2&&!m(o[4].params),y=o[5]&&o[5].params.length<=2&&!m(o[5].params),S=s&&a&&c&&d&&u&&y,C=o.map(function(e){return v(e.params)}),w=s?g(o[0].params[0]):t,I=a?g(o[1].params[0]):t,E=c?g(o[2].params[0]):t,_=d?g(o[3].params[0]):t,L=u?g(o[4].params[0]):t,F=y?g(o[5].params[0]):t,D=s?g(o[0].params[1]):t,R=a?g(o[1].params[1]):t,P=c?g(o[2].params[1]):t,z=d?g(o[3].params[1]):t,U=u?g(o[4].params[1]):t,K=y?g(o[5].params[1]):t,Z=o.map(function(e){return function(e,t){var n=t;if(e.some(f)){var i=m(e),r=e.map(j);n=function(){for(var e=[],n=i?arguments.length-1:arguments.length,o=0;o<n;o++)e[o]=r[o](arguments[o]);return i&&(e[n]=arguments[n].map(r[n])),t.apply(this,e)}}var o=n;if(m(e)){var s=e.length-1;o=function(){return n.apply(this,T(arguments,0,s).concat([T(arguments,s)]))}}return o}(e.params,e.fn)}),G=s?Z[0]:n,H=a?Z[1]:n,W=c?Z[2]:n,q=d?Z[3]:n,Q=u?Z[4]:n,Y=y?Z[5]:n,X=s?o[0].params.length:-1,J=a?o[1].params.length:-1,ee=c?o[2].params.length:-1,te=d?o[3].params.length:-1,ne=u?o[4].params.length:-1,ie=y?o[5].params.length:-1,re=S?6:0,oe=o.length,se=function(){for(var t=re;t<oe;t++)if(C[t](arguments))return Z[t].apply(this,arguments);throw x(e,arguments,o)},ae=function e(t,n){return arguments.length===X&&w(t)&&D(n)?G.apply(e,arguments):arguments.length===J&&I(t)&&R(n)?H.apply(e,arguments):arguments.length===ee&&E(t)&&P(n)?W.apply(e,arguments):arguments.length===te&&_(t)&&z(n)?q.apply(e,arguments):arguments.length===ne&&L(t)&&U(n)?Q.apply(e,arguments):arguments.length===ie&&F(t)&&K(n)?Y.apply(e,arguments):se.apply(e,arguments)};try{Object.defineProperty(ae,"name",{value:e})}catch(le){}return ae.signatures=function(e){var t={};return e.forEach(function(e){e.params.some(f)||k(e.params,!0).forEach(function(n){t[p(n)]=e.fn})}),t}(o),ae}function F(e){return-1===l.ignore.indexOf(e)}function O(e){return e.trim()}function D(e){return!!e}function A(e){return null!==e}function N(e){return 0===e.types.length}function R(e){return e[e.length-1]}function T(e,t,n){return Array.prototype.slice.call(e,t,n)}function P(e,t){return-1!==e.indexOf(t)}function B(e,t){for(var n=0;n<e.length;n++)if(P(t,e[n]))return!0;return!1}function $(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function V(e,t){return Array.prototype.concat.apply([],e.map(t))}function z(e){for(var t="",n=0;n<e.length;n++){var i=e[n];if(("object"==typeof i.signatures||"string"==typeof i.signature)&&""!==i.name)if(""===t)t=i.name;else if(t!==i.name){var r=new Error("Function names do not match (expected: "+t+", actual: "+i.name+")");throw r.data={actual:i.name,expected:t},r}}return t}function U(e){var t,n={};function i(e,i){if(n.hasOwnProperty(e)&&i!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var r=0;r<e.length;r++){var o=e[r];if("object"==typeof o.signatures)for(var s in o.signatures)o.signatures.hasOwnProperty(s)&&(i(s,o.signatures[s]),n[s]=o.signatures[s]);else{if("string"!=typeof o.signature)throw(t=new TypeError("Function is no typed-function (index: "+r+")")).data={index:r},t;i(o.signature,o),n[o.signature]=o}}return n}return(l=L("typed",{"string, Object":L,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return L(z(t),e)},"...Function":function(e){return L(z(e),U(e))},"string, ...Function":function(e,t){return L(e,U(t))}})).create=i,l.types=r,l.conversions=a,l.ignore=s,l.convert=function(e,t){var n=u(e);if(t===n)return e;for(var i=0;i<l.conversions.length;i++){var r=l.conversions[i];if(r.from===n&&r.to===t)return r.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)},l.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var i=0;i<n.length;i++)n[i]=n[i].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var r=n.join(","),o=e.signatures[r];if(o)return o;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},l.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<l.types.length;n++)if("Object"===l.types[n].name)return void l.types.splice(n,0,e);l.types.push(e)},l.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");l.conversions.push(e)},l}()})?n.apply(t,[]):n)&&(e.exports=i)},75042:function(){},3462:function(e,t,n){"use strict";var i=n(44780),r=n(90214);function o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(o.prototype=(0,i.Z)(r.Z.prototype)).constructor=o,t.Z=o},49594:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(34103),r=function(e,t){for(var n=e.length;n--;)if((0,i.Z)(e[n][0],t))return n;return-1},o=Array.prototype.splice;function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}s.prototype.clear=function(){this.__data__=[],this.size=0},s.prototype.delete=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))},s.prototype.get=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]},s.prototype.has=function(e){return r(this.__data__,e)>-1},s.prototype.set=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var a=s},20549:function(e,t,n){"use strict";var i=n(44780),r=n(90214);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}(o.prototype=(0,i.Z)(r.Z.prototype)).constructor=o,t.Z=o},50241:function(e,t,n){"use strict";var i=n(60804),r=n(90354),o=(0,i.Z)(r.Z,"Map");t.Z=o},74430:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=(0,n(60804).Z)(Object,"create"),r=Object.prototype.hasOwnProperty,o=Object.prototype.hasOwnProperty;function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}s.prototype.clear=function(){this.__data__=i?i(null):{},this.size=0},s.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},s.prototype.get=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0},s.prototype.has=function(e){var t=this.__data__;return i?void 0!==t[e]:o.call(t,e)},s.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this};var a=s,l=n(49594),c=n(50241),d=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}u.prototype.clear=function(){this.size=0,this.__data__={hash:new a,map:new(c.Z||l.Z),string:new a}},u.prototype.delete=function(e){var t=d(this,e).delete(e);return this.size-=t?1:0,t},u.prototype.get=function(e){return d(this,e).get(e)},u.prototype.has=function(e){return d(this,e).has(e)},u.prototype.set=function(e,t){var n=d(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var p=u},73522:function(e,t,n){"use strict";var i=n(90354);t.Z=i.Z.Symbol},38881:function(e,t,n){"use strict";var i=n(60804),r=n(90354),o=(0,i.Z)(r.Z,"WeakMap");t.Z=o},87562:function(e,t){"use strict";t.Z=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},16846:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},35632:function(e,t,n){"use strict";var i=n(50607);t.Z=function(e,t){return!(null==e||!e.length)&&(0,i.Z)(e,t,0)>-1}},91894:function(e,t,n){"use strict";var i=n(53351),r=n(77950),o=n(85384),s=n(66367),a=n(38417),l=n(70010),c=Object.prototype.hasOwnProperty;t.Z=function(e,t){var n=(0,o.Z)(e),d=!n&&(0,r.Z)(e),u=!n&&!d&&(0,s.Z)(e),p=!n&&!d&&!u&&(0,l.Z)(e),h=n||d||u||p,m=h?(0,i.Z)(e.length,String):[],f=m.length;for(var g in e)(t||c.call(e,g))&&(!h||!("length"==g||u&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,a.Z)(g,f)))&&m.push(g);return m}},24418:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}},24703:function(e,t,n){"use strict";var i=n(20594),r=n(34103),o=Object.prototype.hasOwnProperty;t.Z=function(e,t,n){var s=e[t];(!o.call(e,t)||!(0,r.Z)(s,n)||void 0===n&&!(t in e))&&(0,i.Z)(e,t,n)}},20594:function(e,t,n){"use strict";var i=n(93720);t.Z=function(e,t,n){"__proto__"==t&&i.Z?(0,i.Z)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},44780:function(e,t,n){"use strict";var i=n(11530),r=Object.create,o=function(){function e(){}return function(t){if(!(0,i.Z)(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();t.Z=o},5565:function(e,t){"use strict";t.Z=function(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}},88659:function(e,t,n){"use strict";var i=n(58498),r=n(89272);t.Z=function(e,t){for(var n=0,o=(t=(0,i.Z)(t,e)).length;null!=e&&n<o;)e=e[(0,r.Z)(t[n++])];return n&&n==o?e:void 0}},75964:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(73522),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i.Z?i.Z.toStringTag:void 0,l=Object.prototype.toString,c=i.Z?i.Z.toStringTag:void 0,d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var i=!0}catch(l){}var r=s.call(e);return i&&(t?e[a]=n:delete e[a]),r}(e):function(e){return l.call(e)}(e)}},50607:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(5565),r=n(6248),o=function(e,t,n){return t==t?function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):(0,i.Z)(e,r.Z,n)}},6248:function(e,t){"use strict";t.Z=function(e){return e!=e}},63519:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i,r=n(17915),o=n(69556),s=(i=/[^.]+$/.exec(o.Z&&o.Z.keys&&o.Z.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",a=n(11530),l=n(46681),c=/^\[object .+?Constructor\]$/,d=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),u=function(e){return!(!(0,a.Z)(e)||function(e){return!!s&&s in e}(e))&&((0,r.Z)(e)?d:c).test((0,l.Z)(e))}},90214:function(e,t){"use strict";t.Z=function(){}},94413:function(e,t,n){"use strict";var i=n(41994),r=n(39262),o=n(20981);t.Z=function(e,t){return(0,o.Z)((0,r.Z)(e,t,i.Z),e+"")}},42024:function(e,t,n){"use strict";var i=n(24703),r=n(58498),o=n(38417),s=n(11530),a=n(89272);t.Z=function(e,t,n,l){if(!(0,s.Z)(e))return e;for(var c=-1,d=(t=(0,r.Z)(t,e)).length,u=d-1,p=e;null!=p&&++c<d;){var h=(0,a.Z)(t[c]),m=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(c!=u){var f=p[h];void 0===(m=l?l(f,h,p):void 0)&&(m=(0,s.Z)(f)?f:(0,o.Z)(t[c+1])?[]:{})}(0,i.Z)(p,h,m),p=p[h]}return e}},64639:function(e,t,n){"use strict";var i=n(41994),r=n(68711);t.Z=r.Z?function(e,t){return r.Z.set(e,t),e}:i.Z},53351:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},13443:function(e,t,n){"use strict";var i=n(73522),r=n(24418),o=n(85384),s=n(35815),a=i.Z?i.Z.prototype:void 0,l=a?a.toString:void 0;t.Z=function e(t){if("string"==typeof t)return t;if((0,o.Z)(t))return(0,r.Z)(t,e)+"";if((0,s.Z)(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},37955:function(e,t,n){"use strict";var i=n(64344),r=/^\s+/;t.Z=function(e){return e&&e.slice(0,(0,i.Z)(e)+1).replace(r,"")}},93066:function(e,t){"use strict";t.Z=function(e){return function(t){return e(t)}}},58498:function(e,t,n){"use strict";var i=n(85384),r=n(93400),o=n(85154),s=n(13447);t.Z=function(e,t){return(0,i.Z)(e)?e:(0,r.Z)(e,t)?[e]:(0,o.Z)((0,s.Z)(e))}},96863:function(e,t){"use strict";var n=Math.max;t.Z=function(e,t,i,r){for(var o=-1,s=e.length,a=i.length,l=-1,c=t.length,d=n(s-a,0),u=Array(c+d),p=!r;++l<c;)u[l]=t[l];for(;++o<a;)(p||o<s)&&(u[i[o]]=e[o]);for(;d--;)u[l++]=e[o++];return u}},79253:function(e,t){"use strict";var n=Math.max;t.Z=function(e,t,i,r){for(var o=-1,s=e.length,a=-1,l=i.length,c=-1,d=t.length,u=n(s-l,0),p=Array(u+d),h=!r;++o<u;)p[o]=e[o];for(var m=o;++c<d;)p[m+c]=t[c];for(;++a<l;)(h||o<s)&&(p[m+i[a]]=e[o++]);return p}},13826:function(e,t){"use strict";t.Z=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}},69556:function(e,t,n){"use strict";var i=n(90354);t.Z=i.Z["__core-js_shared__"]},96090:function(e,t,n){"use strict";var i=n(44780),r=n(11530);t.Z=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=(0,i.Z)(e.prototype),o=e.apply(n,t);return(0,r.Z)(o)?o:n}}},86319:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(96863),r=n(79253),o=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i},s=n(96090),a=n(35937),l=n(90360),c=n(13826),d=n(38417),u=Math.min,p=function(e,t){for(var n=e.length,i=u(t.length,n),r=(0,c.Z)(e);i--;){var o=t[i];e[i]=(0,d.Z)(o,n)?r[o]:void 0}return e},h=n(57331),m=n(90354),f=function e(t,n,c,d,u,f,g,v,y,b){var S=128&n,C=1&n,w=2&n,x=24&n,I=512&n,E=w?void 0:(0,s.Z)(t);return function _(){for(var M=arguments.length,j=Array(M),k=M;k--;)j[k]=arguments[k];if(x)var L=(0,l.Z)(_),F=o(j,L);if(d&&(j=(0,i.Z)(j,d,u,x)),f&&(j=(0,r.Z)(j,f,g,x)),M-=F,x&&M<b){var O=(0,h.Z)(j,L);return(0,a.Z)(t,n,e,_.placeholder,c,j,O,v,y,b-M)}var D=C?c:this,A=w?D[t]:t;return M=j.length,v?j=p(j,v):I&&M>1&&j.reverse(),S&&y<M&&(j.length=y),this&&this!==m.Z&&this instanceof _&&(A=E||(0,s.Z)(A)),A.apply(D,j)}}},35937:function(e,t,n){"use strict";var i=n(78823),r=n(93701),o=n(48493);t.Z=function(e,t,n,s,a,l,c,d,u,p){var h=8&t;t|=h?32:64,4&(t&=~(h?64:32))||(t&=-4);var m=[e,t,a,h?l:void 0,h?c:void 0,h?void 0:l,h?void 0:c,d,u,p],f=n.apply(void 0,m);return(0,i.Z)(e)&&(0,r.Z)(f,m),f.placeholder=s,(0,o.Z)(f,e,t)}},71897:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var i=n(64639),r=n(96090),o=n(90354),s=n(87562),a=n(86319),l=n(35937),c=n(90360),d=n(57331),u=n(80825),p=n(96863),h=n(79253),m="__lodash_placeholder__",f=Math.min,g=n(93701),v=n(48493),y=n(1807),b=Math.max,S=function(e,t,n,S,C,w,x,I){var E=2&t;if(!E&&"function"!=typeof e)throw new TypeError("Expected a function");var _=S?S.length:0;if(_||(t&=-97,S=C=void 0),x=void 0===x?x:b((0,y.Z)(x),0),I=void 0===I?I:(0,y.Z)(I),_-=C?C.length:0,64&t){var M=S,j=C;S=C=void 0}var k=E?void 0:(0,u.Z)(e),L=[e,t,n,S,C,M,j,w,x,I];if(k&&function(e,t){var n=e[1],i=t[1],r=n|i;if(!(r<131||128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n))return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var o=t[3];if(o){var s=e[3];e[3]=s?(0,p.Z)(s,o,t[4]):o,e[4]=s?(0,d.Z)(e[3],m):t[4]}(o=t[5])&&(e[5]=(s=e[5])?(0,h.Z)(s,o,t[6]):o,e[6]=s?(0,d.Z)(e[5],m):t[6]),(o=t[7])&&(e[7]=o),128&i&&(e[8]=null==e[8]?t[8]:f(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(L,k),e=L[0],t=L[1],n=L[2],S=L[3],C=L[4],!(I=L[9]=void 0===L[9]?E?0:e.length:b(L[9]-_,0))&&24&t&&(t&=-25),t&&1!=t)F=8==t||16==t?function(e,t,n){var i=(0,r.Z)(e);return function r(){for(var u=arguments.length,p=Array(u),h=u,m=(0,c.Z)(r);h--;)p[h]=arguments[h];var f=u<3&&p[0]!==m&&p[u-1]!==m?[]:(0,d.Z)(p,m);return(u-=f.length)<n?(0,l.Z)(e,t,a.Z,r.placeholder,void 0,p,f,void 0,void 0,n-u):(0,s.Z)(this&&this!==o.Z&&this instanceof r?i:e,this,p)}}(e,t,I):32!=t&&33!=t||C.length?a.Z.apply(void 0,L):function(e,t,n,i){var a=1&t,l=(0,r.Z)(e);return function t(){for(var r=-1,c=arguments.length,d=-1,u=i.length,p=Array(u+c),h=this&&this!==o.Z&&this instanceof t?l:e;++d<u;)p[d]=i[d];for(;c--;)p[d++]=arguments[++r];return(0,s.Z)(h,a?n:this,p)}}(e,t,n,S);else var F=function(e,t,n){var i=1&t,s=(0,r.Z)(e);return function t(){return(this&&this!==o.Z&&this instanceof t?s:e).apply(i?n:this,arguments)}}(e,t,n);return(0,v.Z)((k?i.Z:g.Z)(F,L),e,t)}},93720:function(e,t,n){"use strict";var i=n(60804),r=function(){try{var e=(0,i.Z)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();t.Z=r},39614:function(e,t){"use strict";var n="object"==typeof global&&global&&global.Object===Object&&global;t.Z=n},80825:function(e,t,n){"use strict";var i=n(68711),r=n(86449);t.Z=i.Z?function(e){return i.Z.get(e)}:r.Z},55142:function(e,t,n){"use strict";var i=n(6634),r=Object.prototype.hasOwnProperty;t.Z=function(e){for(var t=e.name+"",n=i.Z[t],o=r.call(i.Z,t)?n.length:0;o--;){var s=n[o],a=s.func;if(null==a||a==e)return s.name}return t}},90360:function(e,t){"use strict";t.Z=function(e){return e.placeholder}},60804:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(63519),r=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return(0,i.Z)(n)?n:void 0}},38417:function(e,t){"use strict";var n=/^(?:0|[1-9]\d*)$/;t.Z=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<t}},55821:function(e,t,n){"use strict";var i=n(34103),r=n(87946),o=n(38417),s=n(11530);t.Z=function(e,t,n){if(!(0,s.Z)(n))return!1;var a=typeof t;return!!("number"==a?(0,r.Z)(n)&&(0,o.Z)(t,n.length):"string"==a&&t in n)&&(0,i.Z)(n[t],e)}},93400:function(e,t,n){"use strict";var i=n(85384),r=n(35815),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.Z=function(e,t){if((0,i.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,r.Z)(e))||s.test(e)||!o.test(e)||null!=t&&e in Object(t)}},78823:function(e,t,n){"use strict";var i=n(3462),r=n(80825),o=n(55142),s=n(99997);t.Z=function(e){var t=(0,o.Z)(e),n=s.Z[t];if("function"!=typeof n||!(t in i.Z.prototype))return!1;if(e===n)return!0;var a=(0,r.Z)(n);return!!a&&e===a[0]}},5088:function(e,t){"use strict";var n=Object.prototype;t.Z=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},68711:function(e,t,n){"use strict";var i=n(38881),r=i.Z&&new i.Z;t.Z=r},32536:function(e,t,n){"use strict";var i=n(39614),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=r&&"object"==typeof module&&module&&!module.nodeType&&module,s=o&&o.exports===r&&i.Z.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();t.Z=a},39262:function(e,t,n){"use strict";var i=n(87562),r=Math.max;t.Z=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,a=r(o.length-t,0),l=Array(a);++s<a;)l[s]=o[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=o[s];return c[t]=n(l),(0,i.Z)(e,this,c)}}},6634:function(e,t){"use strict";t.Z={}},57331:function(e,t){"use strict";var n="__lodash_placeholder__";t.Z=function(e,t){for(var i=-1,r=e.length,o=0,s=[];++i<r;){var a=e[i];(a===t||a===n)&&(e[i]=n,s[o++]=i)}return s}},90354:function(e,t,n){"use strict";var i=n(39614),r="object"==typeof self&&self&&self.Object===Object&&self,o=i.Z||r||Function("return this")();t.Z=o},93701:function(e,t,n){"use strict";var i=n(64639),r=(0,n(33225).Z)(i.Z);t.Z=r},20981:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(63414),r=n(93720),o=n(41994),s=r.Z?function(e,t){return(0,r.Z)(e,"toString",{configurable:!0,enumerable:!1,value:(0,i.Z)(t),writable:!0})}:o.Z,a=(0,n(33225).Z)(s)},48493:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /,o=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,s=n(20981),a=n(16846),l=n(35632),c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],d=function(e,t,n){var d=t+"";return(0,s.Z)(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(o,"{\n/* [wrapped with "+t+"] */\n")}(d,function(e,t){return(0,a.Z)(c,function(n){var i="_."+n[0];t&n[1]&&!(0,l.Z)(e,i)&&e.push(i)}),e.sort()}(function(e){var t=e.match(i);return t?t[1].split(r):[]}(d),n)))}},33225:function(e,t){"use strict";var n=Date.now;t.Z=function(e){var t=0,i=0;return function(){var r=n(),o=16-(r-i);if(i=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},85154:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i,r,o=n(30163),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,l=(i=(0,o.Z)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s,function(e,n,i,r){t.push(i?r.replace(a,"$1"):n||e)}),t},function(e){return 500===r.size&&r.clear(),e}),r=i.cache,i)},89272:function(e,t,n){"use strict";var i=n(35815);t.Z=function(e){if("string"==typeof e||(0,i.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},46681:function(e,t){"use strict";var n=Function.prototype.toString;t.Z=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},64344:function(e,t){"use strict";var n=/\s/;t.Z=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},14557:function(e,t,n){"use strict";var i=n(3462),r=n(20549),o=n(13826);t.Z=function(e){if(e instanceof i.Z)return e.clone();var t=new r.Z(e.__wrapped__,e.__chain__);return t.__actions__=(0,o.Z)(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},63414:function(e,t){"use strict";t.Z=function(e){return function(){return e}}},85613:function(e,t,n){"use strict";var i=n(94413),r=n(34103),o=n(55821),s=n(8184),a=Object.prototype,l=a.hasOwnProperty,c=(0,i.Z)(function(e,t){e=Object(e);var n=-1,i=t.length,c=i>2?t[2]:void 0;for(c&&(0,o.Z)(t[0],t[1],c)&&(i=1);++n<i;)for(var d=t[n],u=(0,s.Z)(d),p=-1,h=u.length;++p<h;){var m=u[p],f=e[m];(void 0===f||(0,r.Z)(f,a[m])&&!l.call(e,m))&&(e[m]=d[m])}return e});t.Z=c},34103:function(e,t){"use strict";t.Z=function(e,t){return e===t||e!=e&&t!=t}},82801:function(e,t,n){"use strict";var i=n(88659);t.Z=function(e,t,n){var r=null==e?void 0:(0,i.Z)(e,t);return void 0===r?n:r}},41994:function(e,t){"use strict";t.Z=function(e){return e}},77950:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(75964),r=n(20850),o=function(e){return(0,r.Z)(e)&&"[object Arguments]"==(0,i.Z)(e)},s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(e){return(0,r.Z)(e)&&a.call(e,"callee")&&!l.call(e,"callee")}},85384:function(e,t){"use strict";t.Z=Array.isArray},87946:function(e,t,n){"use strict";var i=n(17915),r=n(25342);t.Z=function(e){return null!=e&&(0,r.Z)(e.length)&&!(0,i.Z)(e)}},66367:function(e,t,n){"use strict";var i=n(90354),r=n(45098),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===o?i.Z.Buffer:void 0;t.Z=(a?a.isBuffer:void 0)||r.Z},17915:function(e,t,n){"use strict";var i=n(75964),r=n(11530);t.Z=function(e){if(!(0,r.Z)(e))return!1;var t=(0,i.Z)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},25342:function(e,t){"use strict";t.Z=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},11530:function(e,t){"use strict";t.Z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},20850:function(e,t){"use strict";t.Z=function(e){return null!=e&&"object"==typeof e}},35815:function(e,t,n){"use strict";var i=n(75964),r=n(20850);t.Z=function(e){return"symbol"==typeof e||(0,r.Z)(e)&&"[object Symbol]"==(0,i.Z)(e)}},70010:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(75964),r=n(25342),o=n(20850),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var a=n(93066),l=n(32536),c=l.Z&&l.Z.isTypedArray,d=c?(0,a.Z)(c):function(e){return(0,o.Z)(e)&&(0,r.Z)(e.length)&&!!s[(0,i.Z)(e)]}},8184:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(91894),r=n(11530),o=n(5088),s=Object.prototype.hasOwnProperty,a=function(e){if(!(0,r.Z)(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=(0,o.Z)(e),n=[];for(var i in e)"constructor"==i&&(t||!s.call(e,i))||n.push(i);return n},l=n(87946),c=function(e){return(0,l.Z)(e)?(0,i.Z)(e,!0):a(e)}},30163:function(e,t,n){"use strict";var i=n(74430);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(r.Cache||i.Z),n}r.Cache=i.Z,t.Z=r},86449:function(e,t){"use strict";t.Z=function(){}},63424:function(e,t,n){"use strict";var i=n(94413),r=n(71897),o=n(90360),s=n(57331),a=(0,i.Z)(function(e,t){var n=(0,s.Z)(t,(0,o.Z)(a));return(0,r.Z)(e,32,void 0,t,n)});a.placeholder={},t.Z=a},87183:function(e,t,n){"use strict";var i=n(42024);t.Z=function(e,t,n){return null==e?e:(0,i.Z)(e,t,n)}},45098:function(e,t){"use strict";t.Z=function(){return!1}},43646:function(e,t,n){"use strict";var i=n(18648),r=1/0;t.Z=function(e){return e?(e=(0,i.Z)(e))===r||e===-r?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},1807:function(e,t,n){"use strict";var i=n(43646);t.Z=function(e){var t=(0,i.Z)(e),n=t%1;return t==t?n?t-n:t:0}},18648:function(e,t,n){"use strict";var i=n(37955),r=n(11530),o=n(35815),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.Z=function(e){if("number"==typeof e)return e;if((0,o.Z)(e))return NaN;if((0,r.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,r.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,i.Z)(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?NaN:+e}},13447:function(e,t,n){"use strict";var i=n(13443);t.Z=function(e){return null==e?"":(0,i.Z)(e)}},99997:function(e,t,n){"use strict";var i=n(3462),r=n(20549),o=n(90214),s=n(85384),a=n(20850),l=n(14557),c=Object.prototype.hasOwnProperty;function d(e){if((0,a.Z)(e)&&!(0,s.Z)(e)&&!(e instanceof i.Z)){if(e instanceof r.Z)return e;if(c.call(e,"__wrapped__"))return(0,l.Z)(e)}return new r.Z(e)}(d.prototype=o.Z.prototype).constructor=d,t.Z=d}}]);
//# sourceMappingURL=dist_core_fesm2015_core_js-_059d0-es2015.js.map