{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,eAASA,WAAT,CAAqBC,KAArB,EAA4B;AACxB,YAAIC,sEAAgBD,KAAhBC,CAAJ,EAA4B;AACxB,iBAAOC,KAAK,CAACC,OAAND,CAAcF,KAAdE,IACDF,KAAK,CAACI,KAANJ,CAAY,CAAZA,CADCE,GAEDG,iDAAS;AAAEC,qBAAS,EAAEC,MAAM,CAACC,cAAPD,CAAsBP,KAAtBO;AAAb,WAATF,EAAsDL,KAAtDK,CAFN;AAGH;;AACD,eAAOL,KAAP;AACH;;AACD,UAAIS,YAAW,GAAI,YAAY;AAC3B,iBAASA,WAAT,GAAuB;AACnB,eAAKC,KAAL,GAAa,KAAKC,iEAAgBC,OAAhBD,GAA0BE,GAA/B,GAAb;AACA,eAAKC,IAAL,GAAY,IAAIC,2CAAJ,CAASC,8DAAT,CAAZ;AACA,eAAKC,MAAL,GAAc,IAAIC,OAAJ,EAAd;AACA,eAAKC,UAAL,GAAkB,IAAIC,GAAJ,EAAlB;AACA,eAAKC,KAAL,GAAa,KAAKC,KAAL,CAAW,EAAX,CAAb;AACH;;AACDb,mBAAW,CAACc,SAAZd,CAAsBe,OAAtBf,GAAgC,UAAUT,KAAV,EAAiB;AAC7C,iBAAOC,sEAAgBD,KAAhBC,KAA0B,KAAKS,KAAL,CAAWe,GAAX,CAAezB,KAAf,CAAjC;AADJ;;AAGAS,mBAAW,CAACc,SAAZd,CAAsBiB,IAAtBjB,GAA6B,UAAUT,KAAV,EAAiB;AAC1C,cAAIC,sEAAgBD,KAAhBC,CAAJ,EAA4B;AACxB,gBAAI0B,IAAI,GAAG5B,WAAW,CAACC,KAAD,CAAtB;AACA,iBAAKiB,MAAL,CAAYW,GAAZ,CAAgBD,IAAhB,EAAsB3B,KAAtB;AACA,mBAAO2B,IAAP;AACH;;AACD,iBAAO3B,KAAP;AANJ;;AAQAS,mBAAW,CAACc,SAAZd,CAAsBa,KAAtBb,GAA8B,UAAUT,KAAV,EAAiB;AAC3C,cAAI6B,KAAK,GAAG,IAAZ;;AACA,cAAI5B,sEAAgBD,KAAhBC,CAAJ,EAA4B;AACxB,gBAAI6B,QAAQ,GAAG,KAAKb,MAAL,CAAYc,GAAZ,CAAgB/B,KAAhB,CAAf;AACA,gBAAI8B,QAAJ,EACI,OAAOA,QAAP;AACJ,gBAAIE,KAAK,GAAGzB,MAAM,CAACC,cAAPD,CAAsBP,KAAtBO,CAAZ;;AACA,oBAAQyB,KAAR;AACI,mBAAK9B,KAAK,CAACqB,SAAX;AAAsB;AAClB,sBAAI,KAAKb,KAAL,CAAWe,GAAX,CAAezB,KAAf,CAAJ,EACI,OAAOA,KAAP;AACJ,sBAAIiC,KAAK,GAAGjC,KAAK,CAACkC,GAANlC,CAAU,KAAKsB,KAAftB,EAAsB,IAAtBA,CAAZ;AACA,sBAAImC,IAAI,GAAG,KAAKrB,IAAL,CAAUsB,WAAV,CAAsBH,KAAtB,CAAX;;AACA,sBAAI,CAACE,IAAI,CAACF,KAAV,EAAiB;AACb,yBAAKvB,KAAL,CAAW2B,GAAX,CAAeF,IAAI,CAACF,KAALE,GAAaF,KAA5B;;AACA,wBAAIK,OAAJ,EAAa;AACT/B,4BAAM,CAACgC,MAAPhC,CAAc0B,KAAd1B;AACH;AACJ;;AACD,yBAAO4B,IAAI,CAACF,KAAZ;AACH;;AACD,mBAAK,IAAL;AACA,mBAAK1B,MAAM,CAACgB,SAAZ;AAAuB;AACnB,sBAAI,KAAKb,KAAL,CAAWe,GAAX,CAAezB,KAAf,CAAJ,EACI,OAAOA,KAAP;AACJ,sBAAIwC,OAAO,GAAGjC,MAAM,CAACC,cAAPD,CAAsBP,KAAtBO,CAAd;AACA,sBAAIkC,OAAO,GAAG,CAACD,OAAD,CAAd;AACA,sBAAIE,IAAI,GAAG,KAAKC,UAAL,CAAgB3C,KAAhB,CAAX;AACAyC,yBAAO,CAACG,IAARH,CAAaC,IAAI,CAACG,IAAlBJ;AACA,sBAAIK,iBAAiB,GAAGL,OAAO,CAACM,MAAhC;AACAL,sBAAI,CAACM,MAALN,CAAYO,OAAZP,CAAoB,UAAUQ,GAAV,EAAe;AAC/BT,2BAAO,CAACG,IAARH,CAAaZ,KAAK,CAACP,KAANO,CAAY7B,KAAK,CAACkD,GAAD,CAAjBrB,CAAbY;AADJ;AAGA,sBAAIN,IAAI,GAAG,KAAKrB,IAAL,CAAUsB,WAAV,CAAsBK,OAAtB,CAAX;;AACA,sBAAI,CAACN,IAAI,CAACgB,MAAV,EAAkB;AACd,wBAAIC,KAAK,GAAGjB,IAAI,CAACgB,MAALhB,GAAc5B,MAAM,CAAC8C,MAAP9C,CAAciC,OAAdjC,CAA1B;AACA,yBAAKG,KAAL,CAAW2B,GAAX,CAAee,KAAf;AACAV,wBAAI,CAACM,MAALN,CAAYO,OAAZP,CAAoB,UAAUQ,GAAV,EAAeI,CAAf,EAAkB;AAClCF,2BAAK,CAACF,GAAD,CAALE,GAAaX,OAAO,CAACK,iBAAiB,GAAGQ,CAArB,CAApBF;AADJ;;AAGA,wBAAId,OAAJ,EAAa;AACT/B,4BAAM,CAACgC,MAAPhC,CAAc6C,KAAd7C;AACH;AACJ;;AACD,yBAAO4B,IAAI,CAACgB,MAAZ;AACH;AAtCL;AAwCH;;AACD,iBAAOnD,KAAP;AAhDJ;;AAkDAS,mBAAW,CAACc,SAAZd,CAAsBkC,UAAtBlC,GAAmC,UAAU8C,GAAV,EAAe;AAC9C,cAAIb,IAAI,GAAGnC,MAAM,CAACmC,IAAPnC,CAAYgD,GAAZhD,CAAX;AACA,cAAI4B,IAAI,GAAG,KAAKrB,IAAL,CAAUsB,WAAV,CAAsBM,IAAtB,CAAX;;AACA,cAAI,CAACP,IAAI,CAACO,IAAV,EAAgB;AACZA,gBAAI,CAACc,IAALd;AACA,gBAAIG,IAAI,GAAGY,IAAI,CAACC,SAALD,CAAef,IAAfe,CAAX;;AACA,gBAAI,EAAEtB,IAAI,CAACO,IAALP,GAAY,KAAKhB,UAAL,CAAgBY,GAAhB,CAAoBc,IAApB,CAAd,CAAJ,EAA8C;AAC1C,mBAAK1B,UAAL,CAAgBS,GAAhB,CAAoBiB,IAApB,EAA0BV,IAAI,CAACO,IAALP,GAAY;AAAEa,sBAAM,EAAEN,IAAV;AAAgBG,oBAAI,EAAEA;AAAtB,eAAtC;AACH;AACJ;;AACD,iBAAOV,IAAI,CAACO,IAAZ;AAVJ;;AAYA,eAAOjC,WAAP;AAjFe,SAAnB;;AAoFO,UAAIkD,mBAAkB,GAAGpD,MAAM,CAACqD,MAAPrD,CAAc,UAAUP,KAAV,EAAiB;AAC3D,YAAIC,sEAAgBD,KAAhBC,CAAJ,EAA4B;AACxB,cAAI4D,cAAc,KAAK,KAAK,CAA5B,EAA+B;AAC3BC,mCAAuB;AAC1B;;AACD,cAAIC,SAAS,GAAGF,cAAc,CAACvC,KAAfuC,CAAqB7D,KAArB6D,CAAhB;AACA,cAAIhB,IAAI,GAAGmB,cAAc,CAACjC,GAAfiC,CAAmBD,SAAnBC,CAAX;;AACA,cAAInB,IAAI,KAAK,KAAK,CAAlB,EAAqB;AACjBmB,0BAAc,CAACpC,GAAfoC,CAAmBD,SAAnBC,EAA8BnB,IAAI,GAAGY,IAAI,CAACC,SAALD,CAAeM,SAAfN,CAArCO;AACH;;AACD,iBAAOnB,IAAP;AACH;;AACD,eAAOY,IAAI,CAACC,SAALD,CAAezD,KAAfyD,CAAP;AAZ4B,SAa7B;AACCQ,aAAK,EAAEH;AADR,OAb6BvD,CAAzB;;AAgBP,UAAIsD,cAAJ;AACA,UAAIG,cAAJ;;AACA,eAASF,uBAAT,GAAmC;AAC/BD,sBAAc,GAAG,IAAIpD,YAAJ,EAAjBoD;AACAG,sBAAc,GAAG,KAAKhD,iEAAgBE,OAAhBF,GAA0BI,GAA/B,GAAjB4C;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHM,UAAIE,UAAS,GAAG,IAAIC,8CAAJ,EAAhB;;AACP,UAAIC,YAAY,GAAG,IAAIlD,OAAJ,EAAnB;;AACA,eAASmD,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,YAAIC,IAAI,GAAGH,YAAY,CAACrC,GAAbqC,CAAiBE,KAAjBF,CAAX;;AACA,YAAI,CAACG,IAAL,EAAW;AACPH,sBAAY,CAACxC,GAAbwC,CAAiBE,KAAjBF,EAAwBG,IAAI,GAAG;AAC3BC,gBAAI,EAAE,IAAI3D,GAAJ,EADqB;AAE3B4D,eAAG,EAAEA;AAFsB,WAA/BL;AAIH;;AACD,eAAOG,IAAP;AACH;;AACM,eAASG,YAAT,CAAqBJ,KAArB,EAA4B;AAC/BD,oBAAY,CAACC,KAAD,CAAZD,CAAoBG,IAApBH,CAAyBpB,OAAzBoB,CAAiC,UAAUM,EAAV,EAAc;AAAE,iBAAOA,EAAE,CAACD,WAAHC,CAAeL,KAAfK,CAAP;AAAjD;AACH;;AACM,eAASC,YAAT,CAAqBN,KAArB,EAA4B;AAC/BD,oBAAY,CAACC,KAAD,CAAZD,CAAoBG,IAApBH,CAAyBpB,OAAzBoB,CAAiC,UAAUM,EAAV,EAAc;AAAE,iBAAOA,EAAE,CAACE,WAAHF,CAAeL,KAAfK,CAAP;AAAjD;AACH;;AACM,eAASG,QAAT,CAAiB9E,KAAjB,EAAwB;AAC3B,YAAI+E,MAAM,GAAG,IAAIlE,GAAJ,EAAb;AACA,YAAImE,SAAS,GAAG,IAAInE,GAAJ,EAAhB;;AACA,YAAI8D,EAAE,GAAG,SAALA,EAAK,CAAUM,QAAV,EAAoB;AACzB,cAAIC,SAAS,CAACnC,MAAVmC,GAAmB,CAAvB,EAA0B;AACtB,gBAAIlF,KAAK,KAAKiF,QAAd,EAAwB;AACpBjF,mBAAK,GAAGiF,QAARjF;AACA+E,oBAAM,CAAC9B,OAAP8B,CAAe,UAAUT,KAAV,EAAiB;AAC5BD,4BAAY,CAACC,KAAD,CAAZD,CAAoBI,GAApBJ,CAAwBc,KAAxBd,CAA8BM,EAA9BN;AACAe,yBAAS,CAACd,KAAD,CAATc;AAFJ;AAIA,kBAAIC,YAAY,GAAGnF,KAAK,CAACoF,IAANpF,CAAW8E,SAAX9E,CAAnB;AACA8E,uBAAS,CAACO,KAAVP;AACAK,0BAAY,CAACpC,OAAboC,CAAqB,UAAUG,QAAV,EAAoB;AAAE,uBAAOA,QAAQ,CAACxF,KAAD,CAAf;AAA3C;AACH;AAVL,iBAYK;AACD,gBAAIsE,KAAK,GAAGJ,UAAS,CAACuB,QAAVvB,EAAZ;;AACA,gBAAII,KAAJ,EAAW;AACPoB,oBAAM,CAACpB,KAAD,CAANoB;AACArB,0BAAY,CAACC,KAAD,CAAZD,CAAoBI,GAApBJ,CAAwBM,EAAxBN;AACH;AACJ;;AACD,iBAAOrE,KAAP;AApBJ;;AAsBA2E,UAAE,CAACgB,YAAHhB,GAAkB,UAAUa,QAAV,EAAoB;AAClCR,mBAAS,CAAC3C,GAAV2C,CAAcQ,QAAdR;AACA,iBAAO,YAAY;AACfA,qBAAS,UAATA,CAAiBQ,QAAjBR;AADJ;AAFJ;;AAMA,YAAIU,MAAM,GAAGf,EAAE,CAACE,WAAHF,GAAiB,UAAUL,KAAV,EAAiB;AAC3CS,gBAAM,CAAC1C,GAAP0C,CAAWT,KAAXS;AACAV,sBAAY,CAACC,KAAD,CAAZD,CAAoBG,IAApBH,CAAyBhC,GAAzBgC,CAA6BM,EAA7BN;AACA,iBAAOM,EAAP;AAHJ;;AAKAA,UAAE,CAACD,WAAHC,GAAiB,UAAUL,KAAV,EAAiB;AAAE,iBAAOS,MAAM,UAANA,CAAcT,KAAdS,CAAP;AAApC;;AACA,eAAOJ,EAAP;AACH;;AACD,eAASS,SAAT,CAAmBd,KAAnB,EAA0B;AACtB,YAAIA,KAAK,CAACsB,gBAAV,EAA4B;AACxBtB,eAAK,CAACsB,gBAANtB;AACH;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvDD,UAAIuB,oBAAoB,GAAG,KAA3B;;AACO,eAASC,aAAT,CAAsBC,QAAtB,EAAgCC,OAAhC,EAAyC;AAC5C,eAAOC,8DAAQF,QAARE,EAAkBD,OAAlBC,EAA2BD,OAAO,CAACE,SAARF,IAAqB;AACnDE,mBAAS,EAAE7F,iDAASA,iDAAS,EAATA,EAAa0F,QAAQ,CAACG,SAAtB7F,CAATA,EAA2C2F,OAAO,CAACE,SAAnD7F;AADwC,SAAhD4F,CAAP;AAGH;;AACD,UAAIE,aAAY,GAAI,YAAY;AAC5B,iBAASA,YAAT,CAAsBH,OAAtB,EAA+B;AAC3B,cAAInE,KAAK,GAAG,IAAZ;;AACA,eAAKuE,cAAL,GAAsB,EAAtB;AACA,eAAKC,mBAAL,GAA2B,EAA3B;AACA,eAAKC,mBAAL,GAA2B,EAA3B;AACA,cAAIC,GAAG,GAAGP,OAAO,CAACO,GAAlB;AAAA,cAAuBC,WAAW,GAAGR,OAAO,CAACQ,WAA7C;AAAA,cAA0DC,OAAO,GAAGT,OAAO,CAACS,OAA5E;AAAA,cAAqFnC,KAAK,GAAG0B,OAAO,CAAC1B,KAArG;AAAA,cAA4GoC,EAAE,GAAGV,OAAO,CAACW,OAAzH;AAAA,cAAkIA,OAAO,GAAGD,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAApK;AAAA,cAAwKE,EAAE,GAAGZ,OAAO,CAACa,kBAArL;AAAA,cAAyMA,kBAAkB,GAAGD,EAAE,KAAK,KAAK,CAAZA,GAAgB,CAAhBA,GAAoBA,EAAlP;AAAA,cAAsPE,EAAE,GAAGd,OAAO,CAACe,iBAAnQ;AAAA,cAAsRA,iBAAiB,GAAGD,EAAE,KAAK,KAAK,CAAZA,GAAgB,OAAOE,MAAP,KAAkB,QAAlB,IACtT,CAACA,MAAM,CAACC,iBAD8S,IAEtT3E,OAFsSwE,GAE5RA,EAFd;AAAA,cAEkBI,EAAE,GAAGlB,OAAO,CAACmB,kBAF/B;AAAA,cAEmDA,kBAAkB,GAAGD,EAAE,KAAK,KAAK,CAAZA,GAAgB,IAAhBA,GAAuBA,EAF/F;AAAA,cAEmGd,cAAc,GAAGJ,OAAO,CAACI,cAF5H;AAAA,cAE4IgB,EAAE,GAAGpB,OAAO,CAACqB,sBAFzJ;AAAA,cAEiLA,sBAAsB,GAAGD,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAFlO;AAAA,cAEsOE,SAAS,GAAGtB,OAAO,CAACsB,SAF1P;AAAA,cAEqQC,QAAQ,GAAGvB,OAAO,CAACuB,QAFxR;AAAA,cAEkSC,eAAe,GAAGxB,OAAO,CAACwB,eAF5T;AAAA,cAE6UC,mBAAmB,GAAGzB,OAAO,CAAC0B,IAF3W;AAAA,cAEiXC,sBAAsB,GAAG3B,OAAO,CAAC4B,OAFlZ;AAGA,cAAIC,IAAI,GAAG7B,OAAO,CAAC6B,IAAnB;;AACA,cAAI,CAACA,IAAL,EAAW;AACPA,gBAAI,GAAGtB,GAAG,GACJ,IAAIuB,yDAAJ,CAAa;AAAEvB,iBAAG,EAAEA,GAAP;AAAYC,yBAAW,EAAEA,WAAzB;AAAsCC,qBAAO,EAAEA;AAA/C,aAAb,CADI,GAEJsB,mEAFNF;AAGH;;AACD,cAAI,CAACvD,KAAL,EAAY;AACR,kBAAMhC,OAAO,GAAG,IAAI0F,uEAAJ,CAAmB,sEAC/B,2BAD+B,GAE/B,kEAFY,CAAH,GAE6D,IAAIA,uEAAJ,CAAmB,CAAnB,CAF1E;AAGH;;AACD,eAAKH,IAAL,GAAYA,IAAZ;AACA,eAAKvD,KAAL,GAAaA,KAAb;AACA,eAAK2D,qBAAL,GAA6BtB,OAAO,IAAIE,kBAAkB,GAAG,CAA7D;AACA,eAAKM,kBAAL,GAA0BA,kBAA1B;AACA,eAAKf,cAAL,GAAsBA,cAAc,IAAI,EAAxC;AACA,eAAKmB,QAAL,GAAgBA,QAAhB;;AACA,cAAIV,kBAAJ,EAAwB;AACpBqB,sBAAU,CAAC,YAAY;AAAE,qBAAQrG,KAAK,CAACoG,qBAANpG,GAA8B,KAAtC;AAAf,eAAgEgF,kBAAhE,CAAVqB;AACH;;AACD,eAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,eAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWD,IAAX,CAAgB,IAAhB,CAAb;AACA,eAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAd;AACA,eAAKG,UAAL,GAAkB,KAAKA,UAAL,CAAgBH,IAAhB,CAAqB,IAArB,CAAlB;AACA,eAAKI,wBAAL,GAAgC,KAAKA,wBAAL,CAA8BJ,IAA9B,CAAmC,IAAnC,CAAhC;;AACA,cAAIrB,iBAAiB,IAAI,OAAOC,MAAP,KAAkB,QAA3C,EAAqD;AACjDA,kBAAM,CAACC,iBAAPD,GAA2B,IAA3BA;AACH;;AACD,cAAI,CAACnB,oBAAD,IAAyBvD,OAA7B,EAAsC;AAClCuD,gCAAoB,GAAG,IAAvBA;;AACA,gBAAI,OAAOmB,MAAP,KAAkB,WAAlB,IACAA,MAAM,CAACyB,QADP,IAEAzB,MAAM,CAAC0B,GAAP1B,KAAeA,MAAM,CAAC2B,IAFtB,IAGA,CAAC3B,MAAM,CAAC4B,+BAHZ,EAG6C;AACzC,kBAAIC,GAAG,GAAG7B,MAAM,CAAC8B,SAAjB;AACA,kBAAIC,EAAE,GAAGF,GAAG,IAAIA,GAAG,CAACG,SAApB;AACA,kBAAIC,GAAG,GAAG,KAAK,CAAf;;AACA,kBAAI,OAAOF,EAAP,KAAc,QAAlB,EAA4B;AACxB,oBAAIA,EAAE,CAACG,OAAHH,CAAW,SAAXA,IAAwB,CAAC,CAA7B,EAAgC;AAC5BE,qBAAG,GAAG,+CACF,4DADJA;AADJ,uBAIK,IAAIF,EAAE,CAACG,OAAHH,CAAW,UAAXA,IAAyB,CAAC,CAA9B,EAAiC;AAClCE,qBAAG,GAAG,wEAANA;AACH;AACJ;;AACD,kBAAIA,GAAJ,EAAS;AACL3G,uBAAO,IAAI6G,uEAAc,2DACrB,cADqB,GACJF,GADVE,CAAX7G;AAEH;AACJ;AACJ;;AACD,eAAKsF,OAAL,GAAeA,gDAAf;AACA,eAAKwB,UAAL,GAAkB,IAAIC,sDAAJ,CAAe;AAC7B/E,iBAAK,EAAEA,KADsB;AAE7BgF,kBAAM,EAAE,IAFqB;AAG7BhC,qBAAS,EAAEA,SAHkB;AAI7BE,2BAAe,EAAEA;AAJY,WAAf,CAAlB;AAMA,eAAK+B,YAAL,GAAoB,IAAIC,0DAAJ,CAAiB;AACjClF,iBAAK,EAAE,KAAKA,KADqB;AAEjCuD,gBAAI,EAAE,KAAKA,IAFsB;AAGjCV,8BAAkB,EAAEA,kBAHa;AAIjCR,mBAAO,EAAEA,OAJwB;AAKjC8C,2BAAe,EAAE;AACb/B,kBAAI,EAAED,mBADO;AAEbG,qBAAO,EAAED;AAFI,aALgB;AASjCyB,sBAAU,EAAE,KAAKA,UATgB;AAUjC/B,kCAAsB,EAAEA,sBAVS;AAWjCqC,uBAAW,EAAE3C,iBAAiB,GAAG,YAAY;AACzC,kBAAIlF,KAAK,CAAC8H,cAAV,EAA0B;AACtB9H,qBAAK,CAAC8H,cAAN9H,CAAqB;AACjB+H,wBAAM,EAAE,EADS;AAEjBC,uBAAK,EAAE;AACHC,2BAAO,EAAEjI,KAAK,CAAC0H,YAAN1H,CAAmBkI,aAAnBlI,EADN;AAEHmI,6BAAS,EAAEnI,KAAK,CAAC0H,YAAN1H,CAAmBoI,aAAnBpI,IAAoC;AAF5C,mBAFU;AAMjBqI,2CAAyB,EAAErI,KAAK,CAACyC,KAANzC,CAAYsI,OAAZtI,CAAoB,IAApBA;AANV,iBAArBA;AAQH;AAVyB,gBAW1B,KAAK;AAtBwB,WAAjB,CAApB;AAwBH;;AACDsE,oBAAY,CAAC5E,SAAb4E,CAAuBiE,IAAvBjE,GAA8B,YAAY;AACtC,eAAKoD,YAAL,CAAkBa,IAAlB;AADJ;;AAGAjE,oBAAY,CAAC5E,SAAb4E,CAAuBgC,UAAvBhC,GAAoC,UAAUH,OAAV,EAAmB;AACnD,cAAI,KAAKI,cAAL,CAAoB+B,UAAxB,EAAoC;AAChCnC,mBAAO,GAAGF,aAAY,CAAC,KAAKM,cAAL,CAAoB+B,UAArB,EAAiCnC,OAAjC,CAAtBA;AACH;;AACD,cAAI,KAAKiC,qBAAL,KACCjC,OAAO,CAACqE,WAARrE,KAAwB,cAAxBA,IACGA,OAAO,CAACqE,WAARrE,KAAwB,mBAF5B,CAAJ,EAEsD;AAClDA,mBAAO,GAAG3F,iDAASA,iDAAS,EAATA,EAAa2F,OAAb3F,CAATA,EAAgC;AAAEgK,yBAAW,EAAE;AAAf,aAAhChK,CAAV2F;AACH;;AACD,iBAAO,KAAKuD,YAAL,CAAkBpB,UAAlB,CAA6BnC,OAA7B,CAAP;AATJ;;AAWAG,oBAAY,CAAC5E,SAAb4E,CAAuBkC,KAAvBlC,GAA+B,UAAUH,OAAV,EAAmB;AAC9C,cAAI,KAAKI,cAAL,CAAoBiC,KAAxB,EAA+B;AAC3BrC,mBAAO,GAAGF,aAAY,CAAC,KAAKM,cAAL,CAAoBiC,KAArB,EAA4BrC,OAA5B,CAAtBA;AACH;;AACD1D,iBAAO,GAAG6G,wEAAUnD,OAAO,CAACqE,WAARrE,KAAwB,mBAAlCmD,EAAuD,gFAC7D,6EAD6D,GAE7D,0EAF6D,GAG7D,qEAHMA,CAAH,GAGsEA,wEAAUnD,OAAO,CAACqE,WAARrE,KAAwB,mBAAlCmD,EAAuD,EAAvDA,CAH7E7G;;AAIA,cAAI,KAAK2F,qBAAL,IAA8BjC,OAAO,CAACqE,WAARrE,KAAwB,cAA1D,EAA0E;AACtEA,mBAAO,GAAG3F,iDAASA,iDAAS,EAATA,EAAa2F,OAAb3F,CAATA,EAAgC;AAAEgK,yBAAW,EAAE;AAAf,aAAhChK,CAAV2F;AACH;;AACD,iBAAO,KAAKuD,YAAL,CAAkBlB,KAAlB,CAAwBrC,OAAxB,CAAP;AAXJ;;AAaAG,oBAAY,CAAC5E,SAAb4E,CAAuBmC,MAAvBnC,GAAgC,UAAUH,OAAV,EAAmB;AAC/C,cAAI,KAAKI,cAAL,CAAoBkC,MAAxB,EAAgC;AAC5BtC,mBAAO,GAAGF,aAAY,CAAC,KAAKM,cAAL,CAAoBkC,MAArB,EAA6BtC,OAA7B,CAAtBA;AACH;;AACD,iBAAO,KAAKuD,YAAL,CAAkBjB,MAAlB,CAAyBtC,OAAzB,CAAP;AAJJ;;AAMAG,oBAAY,CAAC5E,SAAb4E,CAAuBmE,SAAvBnE,GAAmC,UAAUH,OAAV,EAAmB;AAClD,iBAAO,KAAKuD,YAAL,CAAkBgB,wBAAlB,CAA2CvE,OAA3C,CAAP;AADJ;;AAGAG,oBAAY,CAAC5E,SAAb4E,CAAuBqE,SAAvBrE,GAAmC,UAAUH,OAAV,EAAmByE,UAAnB,EAA+B;AAC9D,cAAIA,UAAU,KAAK,KAAK,CAAxB,EAA2B;AAAEA,sBAAU,GAAG,KAAbA;AAAqB;;AAClD,iBAAO,KAAKnG,KAAL,CAAWkG,SAAX,CAAqBxE,OAArB,EAA8ByE,UAA9B,CAAP;AAFJ;;AAIAtE,oBAAY,CAAC5E,SAAb4E,CAAuBuE,YAAvBvE,GAAsC,UAAUH,OAAV,EAAmByE,UAAnB,EAA+B;AACjE,cAAIA,UAAU,KAAK,KAAK,CAAxB,EAA2B;AAAEA,sBAAU,GAAG,KAAbA;AAAqB;;AAClD,iBAAO,KAAKnG,KAAL,CAAWoG,YAAX,CAAwB1E,OAAxB,EAAiCyE,UAAjC,CAAP;AAFJ;;AAIAtE,oBAAY,CAAC5E,SAAb4E,CAAuBwE,UAAvBxE,GAAoC,UAAUH,OAAV,EAAmB;AACnD,eAAK1B,KAAL,CAAWqG,UAAX,CAAsB3E,OAAtB;AACA,eAAKuD,YAAL,CAAkBqB,gBAAlB;AAFJ;;AAIAzE,oBAAY,CAAC5E,SAAb4E,CAAuB0E,aAAvB1E,GAAuC,UAAUH,OAAV,EAAmB;AACtD,eAAK1B,KAAL,CAAWuG,aAAX,CAAyB7E,OAAzB;AACA,eAAKuD,YAAL,CAAkBqB,gBAAlB;AAFJ;;AAIAzE,oBAAY,CAAC5E,SAAb4E,CAAuB2E,uBAAvB3E,GAAiD,UAAU4E,EAAV,EAAc;AAC3D,eAAKpB,cAAL,GAAsBoB,EAAtB;AADJ;;AAGA5E,oBAAY,CAAC5E,SAAb4E,CAAuB6E,YAAvB7E,GAAsC,UAAU8E,OAAV,EAAmB;AACrD,iBAAOC,8DAAQ,KAAKrD,IAAbqD,EAAmBD,OAAnBC,CAAP;AADJ;;AAGA/E,oBAAY,CAAC5E,SAAb4E,CAAuBoC,UAAvBpC,GAAoC,YAAY;AAC5C,cAAItE,KAAK,GAAG,IAAZ;;AACA,iBAAOsJ,OAAO,CAACC,OAARD,GACFE,IADEF,CACG,YAAY;AAAE,mBAAOtJ,KAAK,CAAC0H,YAAN1H,CAAmByJ,UAAnBzJ,EAAP;AADjB,aAEFwJ,IAFEF,CAEG,YAAY;AAAE,mBAAOA,OAAO,CAACI,GAARJ,CAAYtJ,KAAK,CAACwE,mBAANxE,CAA0BK,GAA1BL,CAA8B,UAAU2J,EAAV,EAAc;AAAE,qBAAOA,EAAE,EAAT;AAA9C,cAAZL,CAAP;AAFjB,aAGFE,IAHEF,CAGG,YAAY;AAAE,mBAAOtJ,KAAK,CAAC2G,wBAAN3G,EAAP;AAHjB,YAAP;AAFJ;;AAOAsE,oBAAY,CAAC5E,SAAb4E,CAAuBmF,UAAvBnF,GAAoC,YAAY;AAC5C,cAAItE,KAAK,GAAG,IAAZ;;AACA,iBAAOsJ,OAAO,CAACC,OAARD,GACFE,IADEF,CACG,YAAY;AAAE,mBAAOtJ,KAAK,CAAC0H,YAAN1H,CAAmByJ,UAAnBzJ,EAAP;AADjB,aAEFwJ,IAFEF,CAEG,YAAY;AAAE,mBAAOA,OAAO,CAACI,GAARJ,CAAYtJ,KAAK,CAACyE,mBAANzE,CAA0BK,GAA1BL,CAA8B,UAAU2J,EAAV,EAAc;AAAE,qBAAOA,EAAE,EAAT;AAA9C,cAAZL,CAAP;AAFjB,YAAP;AAFJ;;AAMAhF,oBAAY,CAAC5E,SAAb4E,CAAuBsF,YAAvBtF,GAAsC,UAAU4E,EAAV,EAAc;AAChD,cAAIlJ,KAAK,GAAG,IAAZ;;AACA,eAAKwE,mBAAL,CAAyBzD,IAAzB,CAA8BmI,EAA9B;AACA,iBAAO,YAAY;AACflJ,iBAAK,CAACwE,mBAANxE,GAA4BA,KAAK,CAACwE,mBAANxE,CAA0B6J,MAA1B7J,CAAiC,UAAU8J,CAAV,EAAa;AAAE,qBAAOA,CAAC,KAAKZ,EAAb;AAAhD,cAA5BlJ;AADJ;AAHJ;;AAOAsE,oBAAY,CAAC5E,SAAb4E,CAAuByF,YAAvBzF,GAAsC,UAAU4E,EAAV,EAAc;AAChD,cAAIlJ,KAAK,GAAG,IAAZ;;AACA,eAAKyE,mBAAL,CAAyB1D,IAAzB,CAA8BmI,EAA9B;AACA,iBAAO,YAAY;AACflJ,iBAAK,CAACyE,mBAANzE,GAA4BA,KAAK,CAACyE,mBAANzE,CAA0B6J,MAA1B7J,CAAiC,UAAU8J,CAAV,EAAa;AAAE,qBAAOA,CAAC,KAAKZ,EAAb;AAAhD,cAA5BlJ;AADJ;AAHJ;;AAOAsE,oBAAY,CAAC5E,SAAb4E,CAAuBqC,wBAAvBrC,GAAkD,UAAU0F,cAAV,EAA0B;AACxE,iBAAO,KAAKtC,YAAL,CAAkBf,wBAAlB,CAA2CqD,cAA3C,CAAP;AADJ;;AAGA1F,oBAAY,CAAC5E,SAAb4E,CAAuB2F,cAAvB3F,GAAwC,UAAUH,OAAV,EAAmB;AACvD,cAAI9D,GAAG,GAAG,KAAKqH,YAAL,CAAkBuC,cAAlB,CAAiC9F,OAAjC,CAAV;AACA,cAAI8D,OAAO,GAAG,EAAd;AACA,cAAIiC,OAAO,GAAG,EAAd;AACA7J,aAAG,CAACe,OAAJf,CAAY,UAAU8J,MAAV,EAAkBC,QAAlB,EAA4B;AACpCnC,mBAAO,CAAClH,IAARkH,CAAamC,QAAbnC;AACAiC,mBAAO,CAACnJ,IAARmJ,CAAaC,MAAbD;AAFJ;AAIA,cAAIC,MAAM,GAAGb,OAAO,CAACI,GAARJ,CAAYY,OAAZZ,CAAb;AACAa,gBAAM,CAAClC,OAAPkC,GAAiBlC,OAAjBkC;AACAA,gBAAM,CAACD,OAAPC,GAAiBD,OAAjBC;AACAA,gBAAM,SAANA,CAAa,UAAUE,KAAV,EAAiB;AAC1B5J,mBAAO,IAAI6G,yEAAgB,uEAAuE+C,KAAvF/C,CAAX7G;AADJ;AAGA,iBAAO0J,MAAP;AAdJ;;AAgBA7F,oBAAY,CAAC5E,SAAb4E,CAAuBgG,oBAAvBhG,GAA8C,UAAUiG,OAAV,EAAmB;AAC7D,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,QAAVA;AAAqB;;AAC/C,iBAAO,KAAK7C,YAAL,CAAkB4C,oBAAlB,CAAuCC,OAAvC,CAAP;AAFJ;;AAIAjG,oBAAY,CAAC5E,SAAb4E,CAAuBgE,OAAvBhE,GAAiC,UAAUsE,UAAV,EAAsB;AACnD,iBAAO,KAAKnG,KAAL,CAAW6F,OAAX,CAAmBM,UAAnB,CAAP;AADJ;;AAGAtE,oBAAY,CAAC5E,SAAb4E,CAAuBkG,OAAvBlG,GAAiC,UAAUmG,eAAV,EAA2B;AACxD,iBAAO,KAAKhI,KAAL,CAAW+H,OAAX,CAAmBC,eAAnB,CAAP;AADJ;;AAGAnG,oBAAY,CAAC5E,SAAb4E,CAAuBoG,YAAvBpG,GAAsC,UAAUmB,SAAV,EAAqB;AACvD,eAAK8B,UAAL,CAAgBmD,YAAhB,CAA6BjF,SAA7B;AADJ;;AAGAnB,oBAAY,CAAC5E,SAAb4E,CAAuBqG,YAAvBrG,GAAsC,UAAUmB,SAAV,EAAqB;AACvD,eAAK8B,UAAL,CAAgBoD,YAAhB,CAA6BlF,SAA7B;AADJ;;AAGAnB,oBAAY,CAAC5E,SAAb4E,CAAuBsG,YAAvBtG,GAAsC,YAAY;AAC9C,iBAAO,KAAKiD,UAAL,CAAgBqD,YAAhB,EAAP;AADJ;;AAGAtG,oBAAY,CAAC5E,SAAb4E,CAAuBuG,4BAAvBvG,GAAsD,UAAUqB,eAAV,EAA2B;AAC7E,eAAK4B,UAAL,CAAgBuD,kBAAhB,CAAmCnF,eAAnC;AADJ;;AAGArB,oBAAY,CAAC5E,SAAb4E,CAAuByG,OAAvBzG,GAAiC,UAAU0G,OAAV,EAAmB;AAChD,eAAKhF,IAAL,GAAY,KAAK0B,YAAL,CAAkB1B,IAAlB,GAAyBgF,OAArC;AADJ;;AAGA,eAAO1G,YAAP;AA9NgB,SAApB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTA,UAAIkD,WAAU,GAAI,YAAY;AAC1B,iBAASA,UAAT,CAAoB3C,EAApB,EAAwB;AACpB,cAAIpC,KAAK,GAAGoC,EAAE,CAACpC,KAAf;AAAA,cAAsBgF,MAAM,GAAG5C,EAAE,CAAC4C,MAAlC;AAAA,cAA0ChC,SAAS,GAAGZ,EAAE,CAACY,SAAzD;AAAA,cAAoEE,eAAe,GAAGd,EAAE,CAACc,eAAzF;AACA,eAAKlD,KAAL,GAAaA,KAAb;;AACA,cAAIgF,MAAJ,EAAY;AACR,iBAAKA,MAAL,GAAcA,MAAd;AACH;;AACD,cAAIhC,SAAJ,EAAe;AACX,iBAAKiF,YAAL,CAAkBjF,SAAlB;AACH;;AACD,cAAIE,eAAJ,EAAqB;AACjB,iBAAKmF,kBAAL,CAAwBnF,eAAxB;AACH;AACJ;;AACD6B,kBAAU,CAAC9H,SAAX8H,CAAqBkD,YAArBlD,GAAoC,UAAU/B,SAAV,EAAqB;AACrD,cAAIzF,KAAK,GAAG,IAAZ;;AACA,eAAKyF,SAAL,GAAiB,KAAKA,SAAL,IAAkB,EAAnC;;AACA,cAAIpH,KAAK,CAACC,OAAND,CAAcoH,SAAdpH,CAAJ,EAA8B;AAC1BoH,qBAAS,CAACrE,OAAVqE,CAAkB,UAAUwF,aAAV,EAAyB;AACvCjL,mBAAK,CAACyF,SAANzF,GAAkBkL,gEAAUlL,KAAK,CAACyF,SAAhByF,EAA2BD,aAA3BC,CAAlBlL;AADJ;AADJ,iBAKK;AACD,iBAAKyF,SAAL,GAAiByF,gEAAU,KAAKzF,SAAfyF,EAA0BzF,SAA1ByF,CAAjB;AACH;AAVL;;AAYA1D,kBAAU,CAAC9H,SAAX8H,CAAqBmD,YAArBnD,GAAoC,UAAU/B,SAAV,EAAqB;AACrD,eAAKA,SAAL,GAAiB,EAAjB;AACA,eAAKiF,YAAL,CAAkBjF,SAAlB;AAFJ;;AAIA+B,kBAAU,CAAC9H,SAAX8H,CAAqBoD,YAArBpD,GAAoC,YAAY;AAC5C,iBAAO,KAAK/B,SAAL,IAAkB,EAAzB;AADJ;;AAGA+B,kBAAU,CAAC9H,SAAX8H,CAAqB2D,YAArB3D,GAAoC,UAAU3C,EAAV,EAAc;AAC9C,cAAI+B,QAAQ,GAAG/B,EAAE,CAAC+B,QAAlB;AAAA,cAA4BwE,YAAY,GAAGvG,EAAE,CAACuG,YAA9C;AAAA,cAA4DC,OAAO,GAAGxG,EAAE,CAACwG,OAAzE;AAAA,cAAkFhH,SAAS,GAAGQ,EAAE,CAACR,SAAjG;AAAA,cAA4GU,EAAE,GAAGF,EAAE,CAACyG,sBAApH;AAAA,cAA4IA,sBAAsB,GAAGvG,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAA7L;AACA,iBAAOwG,kDAAU,IAAVA,EAAgB,KAAK,CAArBA,EAAwB,KAAK,CAA7BA,EAAgC,YAAY;AAC/C,mBAAOC,oDAAY,IAAZA,EAAkB,UAAUvG,EAAV,EAAc;AACnC,kBAAI2B,QAAJ,EAAc;AACV,uBAAO,CAAC,CAAD,EAAI,KAAK6E,eAAL,CAAqB7E,QAArB,EAA+BwE,YAAY,CAACM,IAA5C,EAAkDL,OAAlD,EAA2DhH,SAA3D,EAAsE,KAAKsB,eAA3E,EAA4F2F,sBAA5F,EAAoH9B,IAApH,CAAyH,UAAUmC,WAAV,EAAuB;AAAE,yBAAQnN,iDAASA,iDAAS,EAATA,EAAa4M,YAAb5M,CAATA,EAAqC;AAAEkN,wBAAI,EAAEC,WAAW,CAACxB;AAApB,mBAArC3L,CAAR;AAAlJ,kBAAJ,CAAP;AACH;;AACD,qBAAO,CAAC,CAAD,EAAI4M,YAAJ,CAAP;AAJc,aAAXI,CAAP;AADY,WAATD,CAAP;AAFJ;;AAWA/D,kBAAU,CAAC9H,SAAX8H,CAAqBsD,kBAArBtD,GAA0C,UAAU7B,eAAV,EAA2B;AACjE,eAAKA,eAAL,GAAuBA,eAAvB;AADJ;;AAGA6B,kBAAU,CAAC9H,SAAX8H,CAAqBoE,kBAArBpE,GAA0C,YAAY;AAClD,iBAAO,KAAK7B,eAAZ;AADJ;;AAGA6B,kBAAU,CAAC9H,SAAX8H,CAAqBqE,WAArBrE,GAAmC,UAAUZ,QAAV,EAAoB;AACnD,cAAIkF,oEAAc,CAAC,QAAD,CAAdA,EAA0BlF,QAA1BkF,CAAJ,EAAyC;AACrC,gBAAI,KAAKrG,SAAT,EAAoB;AAChB,qBAAOmB,QAAP;AACH;AACJ;;AACD,iBAAO,IAAP;AANJ;;AAQAY,kBAAU,CAAC9H,SAAX8H,CAAqBuE,WAArBvE,GAAmC,UAAUZ,QAAV,EAAoB;AACnD,iBAAOoF,mFAA6BpF,QAA7BoF,CAAP;AADJ;;AAGAxE,kBAAU,CAAC9H,SAAX8H,CAAqByE,cAArBzE,GAAsC,UAAU6D,OAAV,EAAmB;AACrD,cAAI5I,KAAK,GAAG,KAAKA,KAAjB;AACA,iBAAOjE,iDAASA,iDAAS,EAATA,EAAa6M,OAAb7M,CAATA,EAAgC;AAAEiE,iBAAK,EAAEA,KAAT;AAAgByJ,uBAAW,EAAE,qBAAUxK,GAAV,EAAe;AAC3E,qBAAOe,KAAK,CAAC0J,QAAN1J,CAAef,GAAfe,CAAP;AACH;AAFkC,WAAhCjE,CAAP;AAFJ;;AAMAgJ,kBAAU,CAAC9H,SAAX8H,CAAqB4E,oBAArB5E,GAA4C,UAAUZ,QAAV,EAAoBvC,SAApB,EAA+BgH,OAA/B,EAAwC;AAChF,cAAIhH,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,qBAAS,GAAG,EAAZA;AAAiB;;AAC7C,cAAIgH,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,EAAVA;AAAe;;AACzC,iBAAOE,kDAAU,IAAVA,EAAgB,KAAK,CAArBA,EAAwB,KAAK,CAA7BA,EAAgC,YAAY;AAC/C,mBAAOC,oDAAY,IAAZA,EAAkB,UAAU3G,EAAV,EAAc;AACnC,kBAAI+B,QAAJ,EAAc;AACV,uBAAO,CAAC,CAAD,EAAI,KAAK6E,eAAL,CAAqB7E,QAArB,EAA+B,KAAKyF,uBAAL,CAA6BzF,QAA7B,EAAuCvC,SAAvC,KAAqD,EAApF,EAAwF,KAAK4H,cAAL,CAAoBZ,OAApB,CAAxF,EAAsHhH,SAAtH,EAAiImF,IAAjI,CAAsI,UAAUkC,IAAV,EAAgB;AAAE,yBAAQlN,iDAASA,iDAAS,EAATA,EAAa6F,SAAb7F,CAATA,EAAkCkN,IAAI,CAACY,iBAAvC9N,CAAR;AAAxJ,kBAAJ,CAAP;AACH;;AACD,qBAAO,CAAC,CAAD,EAAIA,iDAAS,EAATA,EAAa6F,SAAb7F,CAAJ,CAAP;AAJc,aAAXgN,CAAP;AADY,WAATD,CAAP;AAHJ;;AAYA/D,kBAAU,CAAC9H,SAAX8H,CAAqB+E,oBAArB/E,GAA4C,UAAUZ,QAAV,EAAoB;AAC5D,cAAI4F,cAAc,GAAG,KAArB;AACAC,0DAAM7F,QAAN6F,EAAgB;AACZC,qBAAS,EAAE;AACPC,mBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB,oBAAIA,IAAI,CAACuF,IAALvF,CAAUnC,KAAVmC,KAAoB,QAApBA,IAAgCA,IAAI,CAAC+C,SAAzC,EAAoD;AAChDmJ,gCAAc,GAAGlM,IAAI,CAAC+C,SAAL/C,CAAesM,IAAftM,CAAoB,UAAUuM,GAAV,EAAe;AAChD,2BAAOA,GAAG,CAAChH,IAAJgH,CAAS1O,KAAT0O,KAAmB,QAAnBA,IACHA,GAAG,CAAC1O,KAAJ0O,CAAUC,IAAVD,KAAmB,cADhBA,IAEHA,GAAG,CAAC1O,KAAJ0O,CAAU1O,KAAV0O,KAAoB,IAFxB;AADa,oBAAjBL;;AAKA,sBAAIA,cAAJ,EAAoB;AAChB,2BAAOO,0CAAP;AACH;AACJ;AACJ;AAZM;AADC,WAAhBN;AAgBA,iBAAOD,cAAP;AAlBJ;;AAoBAhF,kBAAU,CAAC9H,SAAX8H,CAAqB6E,uBAArB7E,GAA+C,UAAUZ,QAAV,EAAoBvC,SAApB,EAA+B;AAC1E,iBAAO,KAAK5B,KAAL,CAAWuK,IAAX,CAAgB;AACnBxG,iBAAK,EAAEyG,iFAA2BrG,QAA3BqG,CADY;AAEnB5I,qBAAS,EAAEA,SAFQ;AAGnB6I,6BAAiB,EAAE,IAHA;AAInBtE,sBAAU,EAAE;AAJO,WAAhB,EAKJuB,MALH;AADJ;;AAQA3C,kBAAU,CAAC9H,SAAX8H,CAAqBiE,eAArBjE,GAAuC,UAAUZ,QAAV,EAAoBuG,SAApB,EAA+B9B,OAA/B,EAAwChH,SAAxC,EAAmDsB,eAAnD,EAAoE2F,sBAApE,EAA4F;AAC/H,cAAID,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,EAAVA;AAAe;;AACzC,cAAIhH,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,qBAAS,GAAG,EAAZA;AAAiB;;AAC7C,cAAIsB,eAAe,KAAK,KAAK,CAA7B,EAAgC;AAAEA,2BAAe,GAAG,2BAAY;AAAE,qBAAO,IAAP;AAAhC;AAAiD;;AACnF,cAAI2F,sBAAsB,KAAK,KAAK,CAApC,EAAuC;AAAEA,kCAAsB,GAAG,KAAzBA;AAAiC;;AAC1E,iBAAOC,kDAAU,IAAVA,EAAgB,KAAK,CAArBA,EAAwB,KAAK,CAA7BA,EAAgC,YAAY;AAC/C,gBAAI6B,cAAJ,EAAoBC,SAApB,EAA+BC,WAA/B,EAA4CC,mBAA5C,EAAiEC,oBAAjE,EAAuF3I,EAAvF,EAA2FpC,KAA3F,EAAkGgF,MAAlG,EAA0GgG,WAA1G;;AACA,mBAAOjC,oDAAY,IAAZA,EAAkB,UAAUzG,EAAV,EAAc;AACnCqI,4BAAc,GAAGM,wEAAkB9G,QAAlB8G,CAAjBN;AACAC,uBAAS,GAAGM,6EAAuB/G,QAAvB+G,CAAZN;AACAC,yBAAW,GAAGM,wEAAkBP,SAAlBO,CAAdN;AACAC,iCAAmB,GAAGH,cAAc,CAC/BS,SADLN;AAEAC,kCAAoB,GAAGD,mBAAmB,GACpCA,mBAAmB,CAACO,MAApBP,CAA2B,CAA3BA,EAA8BQ,WAA9BR,KACEA,mBAAmB,CAAChP,KAApBgP,CAA0B,CAA1BA,CAFkC,GAGpC,OAHNC;AAIA3I,gBAAE,GAAG,IAALA,EAAWpC,KAAK,GAAGoC,EAAE,CAACpC,KAAtBoC,EAA6B4C,MAAM,GAAG5C,EAAE,CAAC4C,MAAzC5C;AACA4I,yBAAW,GAAG;AACVH,2BAAW,EAAEA,WADH;AAEVjC,uBAAO,EAAE7M,iDAASA,iDAAS,EAATA,EAAa6M,OAAb7M,CAATA,EAAgC;AAAEiE,uBAAK,EAAEA,KAAT;AAAgBgF,wBAAM,EAAEA;AAAxB,iBAAhCjJ,CAFC;AAGV6F,yBAAS,EAAEA,SAHD;AAIVsB,+BAAe,EAAEA,eAJP;AAKV6H,oCAAoB,EAAEA,oBALZ;AAMVlB,iCAAiB,EAAE,EANT;AAOVhB,sCAAsB,EAAEA;AAPd,eAAdmC;AASA,qBAAO,CAAC,CAAD,EAAI,KAAKO,mBAAL,CAAyBZ,cAAc,CAACa,YAAxC,EAAsDd,SAAtD,EAAiEM,WAAjE,EAA8EjE,IAA9E,CAAmF,UAAUW,MAAV,EAAkB;AAAE,uBAAQ;AAClHA,wBAAM,EAAEA,MAD0G;AAElHmC,mCAAiB,EAAEmB,WAAW,CAACnB;AAFmF,iBAAR;AAAvG,gBAAJ,CAAP;AApBc,aAAXd,CAAP;AAFY,WAATD,CAAP;AALJ;;AAkCA/D,kBAAU,CAAC9H,SAAX8H,CAAqBwG,mBAArBxG,GAA2C,UAAUyG,YAAV,EAAwBd,SAAxB,EAAmCM,WAAnC,EAAgD;AACvF,iBAAOlC,kDAAU,IAAVA,EAAgB,KAAK,CAArBA,EAAwB,KAAK,CAA7BA,EAAgC,YAAY;AAC/C,gBAAI+B,WAAJ,EAAiBjC,OAAjB,EAA0BhH,SAA1B,EAAqC6J,cAArC,EAAqD7E,OAArD;;AACA,gBAAIrJ,KAAK,GAAG,IAAZ;;AACA,mBAAOwL,oDAAY,IAAZA,EAAkB,UAAU3G,EAAV,EAAc;AACnCyI,yBAAW,GAAGG,WAAW,CAACH,WAA1BA,EAAuCjC,OAAO,GAAGoC,WAAW,CAACpC,OAA7DiC,EAAsEjJ,SAAS,GAAGoJ,WAAW,CAACpJ,SAA9FiJ;AACAY,4BAAc,GAAG,CAACf,SAAD,CAAjBe;;AACA7E,qBAAO,GAAG,iBAAU8E,SAAV,EAAqB;AAAE,uBAAO5C,kDAAUvL,KAAVuL,EAAiB,KAAK,CAAtBA,EAAyB,KAAK,CAA9BA,EAAiC,YAAY;AACjF,sBAAI6C,QAAJ,EAAcC,aAAd;AACA,yBAAO7C,oDAAY,IAAZA,EAAkB,UAAU3G,EAAV,EAAc;AACnC,wBAAI,CAACyJ,oEAAcH,SAAdG,EAAyBjK,SAAzBiK,CAAL,EAA0C;AACtC,6BAAO,CAAC,CAAD,CAAP;AACH;;AACD,wBAAIC,8DAAQJ,SAARI,CAAJ,EAAwB;AACpB,6BAAO,CAAC,CAAD,EAAI,KAAKC,YAAL,CAAkBL,SAAlB,EAA6BhB,SAA7B,EAAwCM,WAAxC,EAAqDjE,IAArD,CAA0D,UAAUiF,WAAV,EAAuB;AACpF,4BAAI5J,EAAJ;;AACA,4BAAI,OAAO4J,WAAP,KAAuB,WAA3B,EAAwC;AACpCP,wCAAc,CAACnN,IAAfmN,EAAqBrJ,EAAE,GAAG,EAALA,EACjBA,EAAE,CAAC6J,6EAAuBP,SAAvBO,CAAD,CAAF7J,GAAwC4J,WADvB5J,EAEjBA,EAFJqJ;AAGH;AANE,wBAAJ,CAAP;AAQH;;AACD,wBAAIS,uEAAiBR,SAAjBQ,CAAJ,EAAiC;AAC7BP,8BAAQ,GAAGD,SAAXC;AADJ,2BAGK;AACDA,8BAAQ,GAAGd,WAAW,CAACa,SAAS,CAACtI,IAAVsI,CAAehQ,KAAhB,CAAtBiQ;AACA3N,6BAAO,GAAG6G,wEAAU8G,QAAV9G,EAAoB,uBAAuB6G,SAAS,CAACtI,IAAVsI,CAAehQ,KAA1DmJ,CAAH,GAAsEA,wEAAU8G,QAAV9G,EAAoB,EAApBA,CAA7E7G;AACH;;AACD,wBAAI2N,QAAQ,IAAIA,QAAQ,CAACC,aAAzB,EAAwC;AACpCA,mCAAa,GAAGD,QAAQ,CAACC,aAATD,CAAuBvI,IAAvBuI,CAA4BjQ,KAA5CkQ;;AACA,0BAAIZ,WAAW,CAAC9H,eAAZ8H,CAA4BN,SAA5BM,EAAuCY,aAAvCZ,EAAsDpC,OAAtDoC,CAAJ,EAAoE;AAChE,+BAAO,CAAC,CAAD,EAAI,KAAKO,mBAAL,CAAyBI,QAAQ,CAACH,YAAlC,EAAgDd,SAAhD,EAA2DM,WAA3D,EAAwEjE,IAAxE,CAA6E,UAAUoF,cAAV,EAA0B;AAC1GV,wCAAc,CAACnN,IAAfmN,CAAoBU,cAApBV;AADG,0BAAJ,CAAP;AAGH;AACJ;;AACD,2BAAO,CAAC,CAAD,CAAP;AA7Bc,mBAAX1C,CAAP;AAF6C,iBAATD,CAAP;AAAjC;;AAkCA,qBAAO,CAAC,CAAD,EAAIjC,OAAO,CAACI,GAARJ,CAAY2E,YAAY,CAACY,UAAbZ,CAAwB5N,GAAxB4N,CAA4B5E,OAA5B4E,CAAZ3E,EAAkDE,IAAlDF,CAAuD,YAAY;AACtE,uBAAOwF,qEAAeZ,cAAfY,CAAP;AADG,gBAAJ,CAAP;AArCc,aAAXtD,CAAP;AAHY,WAATD,CAAP;AADJ;;AA+CA/D,kBAAU,CAAC9H,SAAX8H,CAAqBgH,YAArBhH,GAAoC,UAAUuH,KAAV,EAAiB5B,SAAjB,EAA4BM,WAA5B,EAAyC;AACzE,iBAAOlC,kDAAU,IAAVA,EAAgB,KAAK,CAArBA,EAAwB,KAAK,CAA7BA,EAAgC,YAAY;AAC/C,gBAAIlH,SAAJ,EAAe2K,SAAf,EAA0BC,gBAA1B,EAA4CC,SAA5C,EAAuDC,aAAvD,EAAsEC,aAAtE,EAAqFC,YAArF,EAAmGC,WAAnG,EAAgH/F,OAAhH;;AACA,gBAAIvJ,KAAK,GAAG,IAAZ;;AACA,mBAAOwL,oDAAY,IAAZA,EAAkB,UAAU3G,EAAV,EAAc;AACnCR,uBAAS,GAAGoJ,WAAW,CAACpJ,SAAxBA;AACA2K,uBAAS,GAAGD,KAAK,CAAClJ,IAANkJ,CAAW5Q,KAAvB6Q;AACAC,8BAAgB,GAAGP,6EAAuBK,KAAvBL,CAAnBO;AACAC,uBAAS,GAAGF,SAAS,KAAKC,gBAA1BC;AACAC,2BAAa,GAAGhC,SAAS,CAAC8B,gBAAD,CAAT9B,IAA+BA,SAAS,CAAC6B,SAAD,CAAxDG;AACAC,2BAAa,GAAG9F,OAAO,CAACC,OAARD,CAAgB6F,aAAhB7F,CAAhB8F;;AACA,kBAAI,CAAC3B,WAAW,CAACnC,sBAAb,IACA,KAAKiB,oBAAL,CAA0BwC,KAA1B,CADJ,EACsC;AAClCM,4BAAY,GAAGlC,SAAS,CAACoC,UAAVpC,IAAwBM,WAAW,CAACD,oBAAnD6B;AACAC,2BAAW,GAAG,KAAK7J,SAAL,IAAkB,KAAKA,SAAL,CAAe4J,YAAf,CAAhCC;;AACA,oBAAIA,WAAJ,EAAiB;AACb/F,yBAAO,GAAG+F,WAAW,CAACJ,SAAS,GAAGF,SAAH,GAAeC,gBAAzB,CAArB1F;;AACA,sBAAIA,OAAJ,EAAa;AACT6F,iCAAa,GAAG9F,OAAO,CAACC,OAARD,CAAgBjH,iEAAoB,KAAKI,KAAzBJ,EAAgCkH,OAAhClH,EAAyC,CACrE8K,SADqE,EAErEqC,+EAAyBT,KAAzBS,EAAgCnL,SAAhCmL,CAFqE,EAGrE/B,WAAW,CAACpC,OAHyD,EAIrE;AAAE0D,2BAAK,EAAEA,KAAT;AAAgBzB,iCAAW,EAAEG,WAAW,CAACH;AAAzC,qBAJqE,CAAzCjL,CAAhBiH,CAAhB8F;AAMH;AACJ;AACJ;;AACD,qBAAO,CAAC,CAAD,EAAIA,aAAa,CAAC5F,IAAd4F,CAAmB,UAAUjF,MAAV,EAAkB;AACxC,oBAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAEA,wBAAM,GAAGgF,aAAThF;AAAyB;;AAClD,oBAAI4E,KAAK,CAACU,UAAV,EAAsB;AAClBV,uBAAK,CAACU,UAANV,CAAiB3N,OAAjB2N,CAAyB,UAAUW,SAAV,EAAqB;AAC1C,wBAAIA,SAAS,CAAC7J,IAAV6J,CAAevR,KAAfuR,KAAyB,QAAzBA,IAAqCA,SAAS,CAACrM,SAAnD,EAA8D;AAC1DqM,+BAAS,CAACrM,SAAVqM,CAAoBtO,OAApBsO,CAA4B,UAAU7C,GAAV,EAAe;AACvC,4BAAIA,GAAG,CAAChH,IAAJgH,CAAS1O,KAAT0O,KAAmB,IAAnBA,IAA2BA,GAAG,CAAC1O,KAAJ0O,CAAUC,IAAVD,KAAmB,aAAlD,EAAiE;AAC7DY,qCAAW,CAACnB,iBAAZmB,CAA8BZ,GAAG,CAAC1O,KAAJ0O,CAAU1O,KAAxCsP,IAAiDtD,MAAjDsD;AACH;AAHL;AAKH;AAPL;AASH;;AACD,oBAAI,CAACsB,KAAK,CAACd,YAAX,EAAyB;AACrB,yBAAO9D,MAAP;AACH;;AACD,oBAAIA,MAAM,IAAI,IAAd,EAAoB;AAChB,yBAAOA,MAAP;AACH;;AACD,oBAAI9L,KAAK,CAACC,OAAND,CAAc8L,MAAd9L,CAAJ,EAA2B;AACvB,yBAAO2B,KAAK,CAAC2P,uBAAN3P,CAA8B+O,KAA9B/O,EAAqCmK,MAArCnK,EAA6CyN,WAA7CzN,CAAP;AACH;;AACD,oBAAI+O,KAAK,CAACd,YAAV,EAAwB;AACpB,yBAAOjO,KAAK,CAACgO,mBAANhO,CAA0B+O,KAAK,CAACd,YAAhCjO,EAA8CmK,MAA9CnK,EAAsDyN,WAAtDzN,CAAP;AACH;AAxBE,gBAAJ,CAAP;AAvBc,aAAXwL,CAAP;AAHY,WAATD,CAAP;AADJ;;AAwDA/D,kBAAU,CAAC9H,SAAX8H,CAAqBmI,uBAArBnI,GAA+C,UAAUuH,KAAV,EAAiB5E,MAAjB,EAAyBsD,WAAzB,EAAsC;AACjF,cAAIzN,KAAK,GAAG,IAAZ;;AACA,iBAAOsJ,OAAO,CAACI,GAARJ,CAAYa,MAAM,CAAC9J,GAAP8J,CAAW,UAAUyF,IAAV,EAAgB;AAC1C,gBAAIA,IAAI,KAAK,IAAb,EAAmB;AACf,qBAAO,IAAP;AACH;;AACD,gBAAIvR,KAAK,CAACC,OAAND,CAAcuR,IAAdvR,CAAJ,EAAyB;AACrB,qBAAO2B,KAAK,CAAC2P,uBAAN3P,CAA8B+O,KAA9B/O,EAAqC4P,IAArC5P,EAA2CyN,WAA3CzN,CAAP;AACH;;AACD,gBAAI+O,KAAK,CAACd,YAAV,EAAwB;AACpB,qBAAOjO,KAAK,CAACgO,mBAANhO,CAA0B+O,KAAK,CAACd,YAAhCjO,EAA8C4P,IAA9C5P,EAAoDyN,WAApDzN,CAAP;AACH;AATc,YAAZsJ,CAAP;AAFJ;;AAcA,eAAO9B,UAAP;AAlQc,SAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,UAAIzF,MAAM,GAAGrD,MAAM,CAACqD,MAApB;AAAA,UAA4B8N,cAAc,GAAGnR,MAAM,CAACmR,cAApD;AACA,UAAIC,sBAAsB,GAAG,KAA7B;;AACA,UAAIC,gBAAe,GAAI,UAAUC,MAAV,EAAkB;AACrCC,0DAAUF,eAAVE,EAA2BD,MAA3BC;;AACA,iBAASF,eAAT,CAAyBlL,EAAzB,EAA6B;AACzB,cAAI6C,YAAY,GAAG7C,EAAE,CAAC6C,YAAtB;AAAA,cAAoCwI,SAAS,GAAGrL,EAAE,CAACqL,SAAnD;AAAA,cAA8D/L,OAAO,GAAGU,EAAE,CAACV,OAA3E;;AACA,cAAInE,KAAK,GAAGgQ,MAAM,CAACG,IAAPH,CAAY,IAAZA,EAAkB,UAAUI,QAAV,EAAoB;AAC9C,gBAAI;AACA,kBAAIC,WAAW,GAAGD,QAAQ,CAACE,aAATF,CAAuBG,SAAzC;;AACA,kBAAIF,WAAW,IAAI,CAACA,WAAW,CAAChG,KAAhC,EAAuC;AACnCgG,2BAAW,CAAChG,KAAZgG,GAAoBG,wCAApBH;AACH;AAJL,cAMA,OAAOxL,EAAP,EAAW,CAAG;;AACd,gBAAI4L,KAAK,GAAG,CAACzQ,KAAK,CAAC0Q,SAAN1Q,CAAgB2Q,IAA7B;;AACA3Q,iBAAK,CAAC0Q,SAAN1Q,CAAgBQ,GAAhBR,CAAoBoQ,QAApBpQ;;AACA,gBAAI4Q,IAAI,GAAG5Q,KAAK,CAAC4Q,IAAjB;;AACA,gBAAIA,IAAI,IAAIA,IAAI,CAACvG,KAAjB,EAAwB;AACpB+F,sBAAQ,CAAC/F,KAAT+F,IAAkBA,QAAQ,CAAC/F,KAAT+F,CAAeQ,IAAI,CAACvG,KAApB+F,CAAlBA;AADJ,mBAGK,IAAIQ,IAAI,IAAIA,IAAI,CAACzG,MAAjB,EAAyB;AAC1BiG,sBAAQ,CAACS,IAATT,IAAiBA,QAAQ,CAACS,IAATT,CAAcQ,IAAI,CAACzG,MAAnBiG,CAAjBA;AACH;;AACD,gBAAIK,KAAJ,EAAW;AACPzQ,mBAAK,CAAC8Q,SAAN9Q,YAAwB,YAAY,CAApC;AACH;;AACD,mBAAO,YAAY;AACf,kBAAIA,KAAK,CAAC0Q,SAAN1Q,WAAuBoQ,QAAvBpQ,KAAoC,CAACA,KAAK,CAAC0Q,SAAN1Q,CAAgB2Q,IAAzD,EAA+D;AAC3D3Q,qBAAK,CAAC+Q,aAAN/Q;AACH;AAHL;AApBQ,gBAyBN,IAzBN;;AA0BAA,eAAK,CAAC0Q,SAAN1Q,GAAkB,IAAIhB,GAAJ,EAAlBgB;AACAA,eAAK,CAACgR,aAANhR,GAAsB,IAAIhB,GAAJ,EAAtBgB;AACAA,eAAK,CAACiR,UAANjR,GAAmB,KAAnBA;AACAA,eAAK,CAACmE,OAANnE,GAAgBmE,OAAhBnE;AACAA,eAAK,CAACkR,OAANlR,GAAgBkQ,SAAS,CAACgB,OAAVhB,IAAqBxI,YAAY,CAACyJ,eAAbzJ,EAArC1H;AACA,cAAIoR,KAAK,GAAGC,6EAAuBlN,OAAO,CAACqC,KAA/B6K,CAAZ;AACArR,eAAK,CAACsR,SAANtR,GAAkBoR,KAAK,IAAIA,KAAK,CAACvL,IAAfuL,IAAuBA,KAAK,CAACvL,IAANuL,CAAWjT,KAApD6B;AACAA,eAAK,CAACuR,kBAANvR,GAA2BmE,OAAO,CAACqE,WAARrE,IAAuB,aAAlDnE;AACAA,eAAK,CAAC0H,YAAN1H,GAAqB0H,YAArB1H;AACAA,eAAK,CAACkQ,SAANlQ,GAAkBkQ,SAAlBlQ;AACA,iBAAOA,KAAP;AACH;;AACDtB,cAAM,CAAC8S,cAAP9S,CAAsBqR,eAAe,CAACrQ,SAAtChB,EAAiD,WAAjDA,EAA8D;AAC1DwB,aAAG,EAAE,eAAY;AACb,mBAAO,KAAKiE,OAAL,CAAaE,SAApB;AAFsD;AAI1DoN,oBAAU,EAAE,KAJ8C;AAK1DC,sBAAY,EAAE;AAL4C,SAA9DhT;;AAOAqR,uBAAe,CAACrQ,SAAhBqQ,CAA0B5F,MAA1B4F,GAAmC,YAAY;AAC3C,cAAI/P,KAAK,GAAG,IAAZ;;AACA,iBAAO,IAAIsJ,OAAJ,CAAY,UAAUC,OAAV,EAAmBoI,MAAnB,EAA2B;AAC1C,gBAAIvB,QAAQ,GAAG;AACXS,kBAAI,EAAE,cAAU1G,MAAV,EAAkB;AACpBZ,uBAAO,CAACY,MAAD,CAAPZ;;AACAvJ,qBAAK,CAAC0Q,SAAN1Q,WAAuBoQ,QAAvBpQ;;AACA,oBAAI,CAACA,KAAK,CAAC0Q,SAAN1Q,CAAgB2Q,IAArB,EAA2B;AACvB3Q,uBAAK,CAAC0H,YAAN1H,CAAmB4R,WAAnB5R,CAA+BA,KAAK,CAACkR,OAArClR;AACH;;AACDqG,0BAAU,CAAC,YAAY;AACnBwL,8BAAY,CAACC,WAAbD;AADM,mBAEP,CAFO,CAAVxL;AAPO;AAWXgE,mBAAK,EAAEsH;AAXI,aAAf;;AAaA,gBAAIE,YAAY,GAAG7R,KAAK,CAACyI,SAANzI,CAAgBoQ,QAAhBpQ,CAAnB;AAdG,YAAP;AAFJ;;AAmBA+P,uBAAe,CAACrQ,SAAhBqQ,CAA0BgC,gBAA1BhC,GAA6C,UAAUiC,gBAAV,EAA4B;AACrE,cAAIA,gBAAgB,KAAK,KAAK,CAA9B,EAAiC;AAAEA,4BAAgB,GAAG,IAAnBA;AAA0B;;AAC7D,cAAIC,UAAU,GAAG,KAAKC,aAAL,CAAmB,IAAnB,CAAjB;AACA,cAAIC,aAAa,GAAG,KAAKjC,SAAL,CAAeiC,aAAf,IACfF,UAAU,IAAIA,UAAU,CAACE,aADV,IAEhBC,kEAFJ;AAGA,cAAIjI,MAAM,GAAG3L,iDAASA,iDAAS,EAATA,EAAayT,UAAbzT,CAATA,EAAmC;AAAE6T,mBAAO,EAAEC,6EAAyBH,aAAzBG,CAAX;AAAoDH,yBAAa,EAAEA;AAAnE,WAAnC3T,CAAb;AACA,cAAIqG,EAAE,GAAG,KAAKV,OAAL,CAAaqE,WAAtB;AAAA,cAAmCA,WAAW,GAAG3D,EAAE,KAAK,KAAK,CAAZA,GAAgB,aAAhBA,GAAgCA,EAAjF;AACA,cAAI0N,sBAAsB,GAAGN,UAAU,IAAKzJ,WAAW,KAAK,cAAhBA,IACxCA,WAAW,KAAK,UADwBA,IAExCA,WAAW,KAAK,SAFpB;;AAGA,cAAI+J,sBAAsB,IACtB,CAAC,KAAK7K,YAAL,CAAkB8K,SAAlB,CAA4B,KAAKrO,OAAL,CAAaqC,KAAzC,EAAgDiM,kBADrD,EACyE;AACrE,gBAAIzF,IAAI,GAAG,KAAKkD,SAAL,CAAewC,OAAf,EAAX;;AACA,gBAAI1F,IAAI,CAAC2F,QAAL3F,IAAiB,KAAK7I,OAAL,CAAa+I,iBAAlC,EAAqD;AACjD/C,oBAAM,CAACuB,IAAPvB,GAAc6C,IAAI,CAAC7C,MAAnBA;AACH;;AACD,gBAAIyI,sDAAMzI,MAAM,CAACuB,IAAbkH,EAAmB,EAAnBA,CAAJ,EAA4B;AACxBzI,oBAAM,CAACuB,IAAPvB,GAAc,KAAK,CAAnBA;AACH;;AACD,gBAAI6C,IAAI,CAAC2F,QAAT,EAAmB;AACf,kBAAIxI,MAAM,CAACgI,aAAPhI,KAAyBiI,oEAAzBjI,KACC3B,WAAW,KAAK,aAAhBA,IACGA,WAAW,KAAK,YAFpB2B,CAAJ,EAEuC;AACnCA,sBAAM,CAACgI,aAAPhI,GAAuBiI,kEAAvBjI;AACAA,sBAAM,CAACkI,OAAPlI,GAAiB,KAAjBA;AACH;;AACD,qBAAOA,MAAM,CAAC0I,OAAd;AAPJ,mBASK,IAAIrK,WAAW,KAAK,UAApB,EAAgC;AACjC2B,oBAAM,CAAC0I,OAAP1I,GAAiB,IAAjBA;AACH;;AACD,gBAAI1J,OAAO,IACP,CAACuM,IAAI,CAAC2F,QADNlS,IAEA,CAAC,KAAK0D,OAAL,CAAa2O,cAFdrS,IAGA,CAAC0J,MAAM,CAACkI,OAHR5R,IAIA,CAAC0J,MAAM,CAACuB,IAJRjL,IAKA,CAAC0J,MAAM,CAACE,KALZ,EAKmB;AACf0I,oCAAqB,CAAC/F,IAAI,CAACgG,OAAN,CAArBD;AACH;AACJ;;AACD,cAAIf,gBAAJ,EAAsB;AAClB,iBAAKiB,gBAAL,CAAsB9I,MAAtB;AACH;;AACD,iBAAOA,MAAP;AA5CJ;;AA8CA4F,uBAAe,CAACrQ,SAAhBqQ,CAA0BmD,yBAA1BnD,GAAsD,UAAUoD,SAAV,EAAqB;AACvE,iBAAO,CAAC,KAAKvC,IAAN,IAAc,CAACgC,sDAAM,KAAKhC,IAAL,CAAUzG,MAAhByI,EAAwBO,SAAxBP,CAAtB;AADJ;;AAGA7C,uBAAe,CAACrQ,SAAhBqQ,CAA0BqD,OAA1BrD,GAAoC,UAAU1O,GAAV,EAAegS,kBAAf,EAAmC;AACnE,cAAIzC,IAAI,GAAG,KAAKA,IAAhB;;AACA,cAAIA,IAAI,IACJA,IAAI,CAACvP,GAAD,CADJuP,KAEC,CAACyC,kBAAD,IAAuBT,sDAAMhC,IAAI,CAACvM,SAAXuO,EAAsB,KAAKvO,SAA3BuO,CAFxBhC,CAAJ,EAEoE;AAChE,mBAAOA,IAAI,CAACvP,GAAD,CAAX;AACH;AANL;;AAQA0O,uBAAe,CAACrQ,SAAhBqQ,CAA0BmC,aAA1BnC,GAA0C,UAAUsD,kBAAV,EAA8B;AACpE,iBAAO,KAAKD,OAAL,CAAa,QAAb,EAAuBC,kBAAvB,CAAP;AADJ;;AAGAtD,uBAAe,CAACrQ,SAAhBqQ,CAA0BuD,YAA1BvD,GAAyC,UAAUsD,kBAAV,EAA8B;AACnE,iBAAO,KAAKD,OAAL,CAAa,OAAb,EAAsBC,kBAAtB,CAAP;AADJ;;AAGAtD,uBAAe,CAACrQ,SAAhBqQ,CAA0BwD,gBAA1BxD,GAA6C,YAAY;AACrD,iBAAO,KAAKa,IAAZ;AACA,eAAKK,UAAL,GAAkB,KAAlB;AAFJ;;AAIAlB,uBAAe,CAACrQ,SAAhBqQ,CAA0ByD,qBAA1BzD,GAAkD,YAAY;AAC1D,eAAKrI,YAAL,CAAkB+L,WAAlB,CAA8B,KAAKvC,OAAnC;AADJ;;AAGAnB,uBAAe,CAACrQ,SAAhBqQ,CAA0B2D,OAA1B3D,GAAoC,UAAU1L,SAAV,EAAqB;AACrD,cAAIQ,EAAJ;;AACA,cAAI8O,gBAAgB,GAAG;AACnBC,wBAAY,EAAE;AADK,WAAvB;AAGA,cAAIpL,WAAW,GAAG,KAAKrE,OAAL,CAAaqE,WAA/B;;AACA,cAAIA,WAAW,KAAK,UAApB,EAAgC;AAC5BmL,4BAAgB,CAACnL,WAAjBmL,GAA+B,UAA/BA;AADJ,iBAGK,IAAInL,WAAW,KAAK,mBAApB,EAAyC;AAC1CmL,4BAAgB,CAACnL,WAAjBmL,GAA+B,cAA/BA;AACH;;AACD,cAAIlT,OAAO,IAAI4D,SAAX5D,IAAwBoP,cAAc,CAACM,IAAfN,CAAoBxL,SAApBwL,EAA+B,WAA/BA,CAA5B,EAAyE;AACrE,gBAAIgE,QAAQ,GAAGC,yEAAmB,KAAK3P,OAAL,CAAaqC,KAAhCsN,CAAf;AACA,gBAAInR,IAAI,GAAGkR,QAAQ,CAACE,mBAApB;;AACA,gBAAI,CAACpR,IAAD,IAAS,CAACA,IAAI,CAACiK,IAALjK,CAAU,UAAUqR,CAAV,EAAa;AAAE,qBAAOA,CAAC,CAACC,QAAFD,CAAWnO,IAAXmO,CAAgB7V,KAAhB6V,KAA0B,WAAjC;AAAzB,cAAd,EAAyF;AACrFvT,qBAAO,IAAI6G,wEAAe,oBAAoB1F,IAAI,CAACC,SAALD,CAAeyC,SAAfzC,CAApB,GAAgD,cAAhD,IAAkE,CAAC,CAACiD,EAAE,GAAGgP,QAAQ,CAAChO,IAAf,MAAyB,IAAzB,IAAiChB,EAAE,KAAK,KAAK,CAA7C,GAAiD,KAAK,CAAtD,GAA0DA,EAAE,CAAC1G,KAA9D,KAAwEyD,IAAI,CAACC,SAALD,CAAeiS,QAAfjS,CAA1I,IAAsK,6HAArL0F,CAAX7G;AACH;AACJ;;AACD,cAAI4D,SAAS,IAAI,CAACuO,sDAAM,KAAKzO,OAAL,CAAaE,SAAnBuO,EAA8BvO,SAA9BuO,CAAlB,EAA4D;AACxDe,4BAAgB,CAACtP,SAAjBsP,GAA6B,KAAKxP,OAAL,CAAaE,SAAb,GAAyB7F,iDAASA,iDAAS,EAATA,EAAa,KAAK2F,OAAL,CAAaE,SAA1B7F,CAATA,EAA+C6F,SAA/C7F,CAAtDmV;AACH;;AACD,eAAKzD,SAAL,CAAegE,cAAf;AACA,iBAAO,KAAKpD,SAAL,CAAe6C,gBAAf,EAAiCvB,oEAAjC,CAAP;AAvBJ;;AAyBArC,uBAAe,CAACrQ,SAAhBqQ,CAA0BoE,SAA1BpE,GAAsC,UAAUqE,gBAAV,EAA4B;AAC9D,cAAIpU,KAAK,GAAG,IAAZ;;AACA,cAAIqU,eAAe,GAAG7V,iDAASA,iDAAS,EAATA,EAAc4V,gBAAgB,CAAC5N,KAAjB4N,GAAyBA,gBAAzBA,GAA4C5V,iDAASA,iDAASA,iDAAS,EAATA,EAAa,KAAK2F,OAAlB3F,CAATA,EAAqC4V,gBAArC5V,CAATA,EAAiE;AAAE6F,qBAAS,EAAE7F,iDAASA,iDAAS,EAATA,EAAa,KAAK2F,OAAL,CAAaE,SAA1B7F,CAATA,EAA+C4V,gBAAgB,CAAC/P,SAAhE7F;AAAb,WAAjEA,CAA1DA,CAATA,EAAkO;AAAEgK,uBAAW,EAAE;AAAf,WAAlOhK,CAAtB;AACA,cAAI8V,GAAG,GAAG,KAAK5M,YAAL,CAAkByJ,eAAlB,EAAV;;AACA,cAAIkD,eAAe,CAACE,2BAApB,EAAiD;AAC7C,iBAAKrE,SAAL,CAAeiC,aAAf,GAA+BC,sEAA/B;AACA,iBAAKoC,OAAL;AACH;;AACD,iBAAO,KAAK9M,YAAL,CAAkB+M,UAAlB,CAA6BH,GAA7B,EAAkCD,eAAlC,EAAmDjC,sEAAnD,EAA4E5I,IAA5E,CAAiF,UAAUkL,eAAV,EAA2B;AAC/G,gBAAIhJ,IAAI,GAAGgJ,eAAe,CAAChJ,IAA3B;AACA,gBAAIiJ,WAAW,GAAGP,gBAAgB,CAACO,WAAnC;;AACA,gBAAIA,WAAJ,EAAiB;AACb,kBAAIlU,OAAO,IACP,CAACqP,sBADL,EAC6B;AACzBrP,uBAAO,IAAI6G,wEAAe,4iBAAfA,CAAX7G;AACAqP,sCAAsB,GAAG,IAAzBA;AACH;;AACD9P,mBAAK,CAAC2U,WAAN3U,CAAkB,UAAU4U,QAAV,EAAoB;AAAE,uBAAOD,WAAW,CAACC,QAAD,EAAW;AACjEF,iCAAe,EAAEhJ,IADgD;AAEjErH,2BAAS,EAAEgQ,eAAe,CAAChQ;AAFsC,iBAAX,CAAlB;AAAxC;AANJ,mBAWK;AACDrE,mBAAK,CAAC0H,YAAN1H,CAAmByC,KAAnBzC,CAAyB8I,UAAzB9I,CAAoC;AAChCwG,qBAAK,EAAE6N,eAAe,CAAC7N,KADS;AAEhCnC,yBAAS,EAAEgQ,eAAe,CAAChQ,SAFK;AAGhCqH,oBAAI,EAAEA;AAH0B,eAApC1L;AAKH;;AACD,mBAAO0U,eAAP;AArBG,wBAsBI,YAAY;AACnB1U,iBAAK,CAAC0H,YAAN1H,CAAmB6U,SAAnB7U,CAA6BsU,GAA7BtU;;AACAA,iBAAK,CAAC8Q,SAAN9Q;AAxBG,YAAP;AARJ;;AAmCA+P,uBAAe,CAACrQ,SAAhBqQ,CAA0B+E,eAA1B/E,GAA4C,UAAU5L,OAAV,EAAmB;AAC3D,cAAInE,KAAK,GAAG,IAAZ;;AACA,cAAI6R,YAAY,GAAG,KAAKnK,YAAL,CACdgB,wBADc,CACW;AAC1BlC,iBAAK,EAAErC,OAAO,CAACyC,QADW;AAE1BvC,qBAAS,EAAEF,OAAO,CAACE,SAFO;AAG1BgH,mBAAO,EAAElH,OAAO,CAACkH;AAHS,WADX,EAMd5C,SANc,CAMJ;AACXoI,gBAAI,EAAE,cAAUkE,gBAAV,EAA4B;AAC9B,kBAAIJ,WAAW,GAAGxQ,OAAO,CAACwQ,WAA1B;;AACA,kBAAIA,WAAJ,EAAiB;AACb3U,qBAAK,CAAC2U,WAAN3U,CAAkB,UAAU4U,QAAV,EAAoB/P,EAApB,EAAwB;AACtC,sBAAIR,SAAS,GAAGQ,EAAE,CAACR,SAAnB;AACA,yBAAOsQ,WAAW,CAACC,QAAD,EAAW;AACzBG,oCAAgB,EAAEA,gBADO;AAEzB1Q,6BAAS,EAAEA;AAFc,mBAAX,CAAlB;AAFJ;AAOH;AAXM;AAaXgG,iBAAK,EAAE,eAAU2K,GAAV,EAAe;AAClB,kBAAI7Q,OAAO,CAAC8Q,OAAZ,EAAqB;AACjB9Q,uBAAO,CAAC8Q,OAAR9Q,CAAgB6Q,GAAhB7Q;AACA;AACH;;AACD1D,qBAAO,IAAI6G,yEAAgB,sCAAhBA,EAAwD0N,GAAxD1N,CAAX7G;AACH;AAnBU,WANI,CAAnB;AA2BA,eAAKuQ,aAAL,CAAmBxQ,GAAnB,CAAuBqR,YAAvB;AACA,iBAAO,YAAY;AACf,gBAAI7R,KAAK,CAACgR,aAANhR,WAA2B6R,YAA3B7R,CAAJ,EAA8C;AAC1C6R,0BAAY,CAACC,WAAbD;AACH;AAHL;AA9BJ;;AAoCA9B,uBAAe,CAACrQ,SAAhBqQ,CAA0BmF,UAA1BnF,GAAuC,UAAUoF,UAAV,EAAsB;AACzD,iBAAO,KAAKrE,SAAL,CAAeqE,UAAf,CAAP;AADJ;;AAGApF,uBAAe,CAACrQ,SAAhBqQ,CAA0BqF,YAA1BrF,GAAyC,UAAU1L,SAAV,EAAqB;AAC1D,cAAIuO,sDAAM,KAAKvO,SAAXuO,EAAsBvO,SAAtBuO,CAAJ,EAAsC;AAClC,mBAAO,KAAKlC,SAAL,CAAeC,IAAf,GACD,KAAKxG,MAAL,EADC,GAEDb,OAAO,CAACC,OAARD,EAFN;AAGH;;AACD,eAAKnF,OAAL,CAAaE,SAAb,GAAyBA,SAAzB;;AACA,cAAI,CAAC,KAAKqM,SAAL,CAAeC,IAApB,EAA0B;AACtB,mBAAOrH,OAAO,CAACC,OAARD,EAAP;AACH;;AACD,iBAAO,KAAKwH,SAAL,CAAe;AAClBtI,uBAAW,EAAE,KAAK+I,kBADA;AAElBlN,qBAAS,EAAEA;AAFO,WAAf,EAGJ+N,yEAHI,CAAP;AAVJ;;AAeArC,uBAAe,CAACrQ,SAAhBqQ,CAA0B4E,WAA1B5E,GAAwC,UAAUsF,KAAV,EAAiB;AACrD,cAAI3N,YAAY,GAAG,KAAKA,YAAxB;AACA,cAAIyC,MAAM,GAAGzC,YAAY,CAACjF,KAAbiF,CAAmBsF,IAAnBtF,CAAwB;AACjClB,iBAAK,EAAE,KAAKrC,OAAL,CAAaqC,KADa;AAEjCnC,qBAAS,EAAE,KAAKA,SAFiB;AAGjC6I,6BAAiB,EAAE,IAHc;AAIjCtE,sBAAU,EAAE;AAJqB,WAAxBlB,EAKVyC,MALH;AAMA,cAAIgJ,SAAS,GAAGkC,KAAK,CAAClL,MAAD,EAAS;AAC1B9F,qBAAS,EAAE,KAAKA;AADU,WAAT,CAArB;;AAGA,cAAI8O,SAAJ,EAAe;AACXzL,wBAAY,CAACjF,KAAbiF,CAAmBoB,UAAnBpB,CAA8B;AAC1BlB,mBAAK,EAAE,KAAKrC,OAAL,CAAaqC,KADM;AAE1BkF,kBAAI,EAAEyH,SAFoB;AAG1B9O,uBAAS,EAAE,KAAKA;AAHU,aAA9BqD;AAKAA,wBAAY,CAACqB,gBAAbrB;AACH;AAlBL;;AAoBAqI,uBAAe,CAACrQ,SAAhBqQ,CAA0BuF,YAA1BvF,GAAyC,UAAU6D,YAAV,EAAwB;AAC7D,eAAKzP,OAAL,CAAayP,YAAb,GAA4BA,YAA5B;AACA,eAAK2B,aAAL;AAFJ;;AAIAxF,uBAAe,CAACrQ,SAAhBqQ,CAA0ByF,WAA1BzF,GAAwC,YAAY;AAChD,eAAK5L,OAAL,CAAayP,YAAb,GAA4B,CAA5B;AACA,eAAK2B,aAAL;AAFJ;;AAIAxF,uBAAe,CAACrQ,SAAhBqQ,CAA0B0F,KAA1B1F,GAAkC,UAAU5L,OAAV,EAAmBuR,gBAAnB,EAAqC;AACnE,eAAKhO,YAAL,CAAkBiO,kBAAlB,CAAqC,IAArC;AACA,iBAAO,KAAKjO,YAAL,CAAkBkO,oBAAlB,CAAuC,KAAK1E,OAA5C,EAAqD/M,OAArD,EAA8DuR,gBAA9D,CAAP;AAFJ;;AAIA3F,uBAAe,CAACrQ,SAAhBqQ,CAA0BwF,aAA1BxF,GAA0C,YAAY;AAClD,cAAI/P,KAAK,GAAG,IAAZ;;AACA,cAAI,KAAK0H,YAAL,CAAkB5C,OAAtB,EAA+B;AAC3B;AACH;;AACD,cAAID,EAAE,GAAG,IAAT;AAAA,cAAegR,WAAW,GAAGhR,EAAE,CAACgR,WAAhC;AAAA,cAA6CjC,YAAY,GAAG/O,EAAE,CAACV,OAAHU,CAAW+O,YAAvE;;AACA,cAAI,CAACA,YAAL,EAAmB;AACf,gBAAIiC,WAAJ,EAAiB;AACbC,0BAAY,CAACD,WAAW,CAACE,OAAb,CAAZD;AACA,qBAAO,KAAKD,WAAZ;AACH;;AACD;AACH;;AACD,cAAIA,WAAW,IACXA,WAAW,CAACG,QAAZH,KAAyBjC,YAD7B,EAC2C;AACvC;AACH;;AACDnT,iBAAO,GAAG6G,wEAAUsM,YAAVtM,EAAwB,gEAAxBA,CAAH,GAA+FA,wEAAUsM,YAAVtM,EAAwB,EAAxBA,CAAtG7G;AACA,cAAIiC,IAAI,GAAGmT,WAAW,KAAK,KAAKA,WAAL,GAAmB,EAAxB,CAAtB;AACAnT,cAAI,CAACsT,QAALtT,GAAgBkR,YAAhBlR;;AACA,cAAIuT,UAAU,GAAG,SAAbA,UAAa,GAAY;AACzB,gBAAIjW,KAAK,CAAC6V,WAAV,EAAuB;AACnB,kBAAI,CAACvD,6EAAyBtS,KAAK,CAACkQ,SAANlQ,CAAgBmS,aAAzCG,CAAL,EAA8D;AAC1DtS,qBAAK,CAAC8Q,SAAN9Q,CAAgB;AACZwI,6BAAW,EAAE;AADD,iBAAhBxI,EAEGoS,iEAFHpS,EAEuBwJ,IAFvBxJ,CAE4BkW,IAF5BlW,EAEkCkW,IAFlClW;AADJ,qBAKK;AACDkW,oBAAI;AACP;AACJ;;AACD;AAXJ;;AAaA,cAAIA,IAAI,GAAG,SAAPA,IAAO,GAAY;AACnB,gBAAIxT,IAAI,GAAG1C,KAAK,CAAC6V,WAAjB;;AACA,gBAAInT,IAAJ,EAAU;AACNoT,0BAAY,CAACpT,IAAI,CAACqT,OAAN,CAAZD;AACApT,kBAAI,CAACqT,OAALrT,GAAe2D,UAAU,CAAC4P,UAAD,EAAavT,IAAI,CAACsT,QAAlB,CAAzBtT;AACH;AALL;;AAOAwT,cAAI;AAxCR;;AA0CAnG,uBAAe,CAACrQ,SAAhBqQ,CAA0BkD,gBAA1BlD,GAA6C,UAAUoD,SAAV,EAAqB9O,SAArB,EAAgC;AACzE,cAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,qBAAS,GAAG,KAAKA,SAAjBA;AAA6B;;AACzD,eAAKuM,IAAL,GAAYpS,iDAASA,iDAAS,EAATA,EAAa,KAAKoS,IAAlBpS,CAATA,EAAkC;AAAE2L,kBAAM,EAAE,KAAKzC,YAAL,CAAkBlC,sBAAlB,GAC9C2N,SAD8C,GAE9CgD,gEAAUhD,SAAVgD,CAFoC;AAEd9R,qBAAS,EAAEA;AAFG,WAAlC7F,CAAZ;;AAGA,cAAI,CAAC4X,sEAAgBjD,SAAS,CAACkD,MAA1BD,CAAL,EAAwC;AACpC,mBAAO,KAAKxF,IAAL,CAAUvG,KAAjB;AACH;;AACD,iBAAO,KAAKuG,IAAZ;AARJ;;AAUAb,uBAAe,CAACrQ,SAAhBqQ,CAA0Be,SAA1Bf,GAAsC,UAAUoF,UAAV,EAAsBO,gBAAtB,EAAwC;AAC1E,cAAI1V,KAAK,GAAG,IAAZ;;AACA,eAAKiR,UAAL,GAAkB,KAAlB;AACA,cAAIqF,oBAAoB,GAAGZ,gBAAgB,KAAKtD,oEAArBsD,IACvBA,gBAAgB,KAAKtD,sEADEsD,IAEvBA,gBAAgB,KAAKtD,iEAFzB;AAGA,cAAImE,YAAY,GAAG,KAAKpS,OAAL,CAAaE,SAAhC;AACA,cAAIF,OAAO,GAAGmS,oBAAoB,GAC5BlS,8DAAQ,KAAKD,OAAbC,EAAsB+Q,UAAtB/Q,CAD4B,GAE5BrC,MAAM,CAAC,KAAKoC,OAAN,EAAeC,8DAAQ+Q,UAAR/Q,CAAf,CAFZ;;AAGA,cAAI,CAACkS,oBAAL,EAA2B;AACvB,iBAAKf,aAAL;;AACA,gBAAIJ,UAAU,IACVA,UAAU,CAAC9Q,SADX8Q,IAEA,CAACA,UAAU,CAAC3M,WAFZ2M,IAGA,CAACvC,sDAAMuC,UAAU,CAAC9Q,SAAjBuO,EAA4B2D,YAA5B3D,CAHL,EAGgD;AAC5CzO,qBAAO,CAACqE,WAARrE,GAAsB,KAAKoN,kBAA3BpN;;AACA,kBAAIuR,gBAAgB,KAAK,KAAK,CAA9B,EAAiC;AAC7BA,gCAAgB,GAAGtD,yEAAnBsD;AACH;AACJ;AACJ;;AACD,cAAIrR,SAAS,GAAGF,OAAO,CAACE,SAARF,IAAqB3F,iDAAS,EAATA,EAAa2F,OAAO,CAACE,SAArB7F,CAArC;AACA,cAAIgY,OAAO,GAAG,KAAKf,KAAL,CAAWtR,OAAX,EAAoBuR,gBAApB,CAAd;AACA,cAAItF,QAAQ,GAAG;AACXS,gBAAI,EAAE,cAAU1G,MAAV,EAAkB;AACpBnK,mBAAK,CAACyW,YAANzW,CAAmBmK,MAAnBnK,EAA2BqE,SAA3BrE;AAFO;AAIXqK,iBAAK,EAAE,eAAUA,MAAV,EAAiB;AACpBrK,mBAAK,CAAC0W,WAAN1W,CAAkBqK,MAAlBrK,EAAyBqE,SAAzBrE;AACH;AANU,WAAf;;AAQA,cAAI,CAACsW,oBAAL,EAA2B;AACvB,gBAAI,KAAKE,OAAL,IAAgB,KAAKpG,QAAzB,EAAmC;AAC/B,mBAAKoG,OAAL,CAAaG,cAAb,CAA4B,KAAKvG,QAAjC,EAA2C,IAA3C;AACH;;AACD,iBAAKoG,OAAL,GAAeA,OAAf;AACA,iBAAKpG,QAAL,GAAgBA,QAAhB;AACH;;AACDoG,iBAAO,CAACI,WAARJ,CAAoBpG,QAApBoG;AACA,iBAAOA,OAAO,CAACK,OAAf;AAxCJ;;AA0CA9G,uBAAe,CAACrQ,SAAhBqQ,CAA0ByE,OAA1BzE,GAAoC,YAAY;AAC5C,eAAK0G,YAAL,CAAkB,KAAK1E,gBAAL,CAAsB,KAAtB,CAAlB,EAAgD,KAAK1N,SAArD;AADJ;;AAGA0L,uBAAe,CAACrQ,SAAhBqQ,CAA0B0G,YAA1B1G,GAAyC,UAAU5F,MAAV,EAAkB9F,SAAlB,EAA6B;AAClE,cAAI,KAAKiP,YAAL,MAAuB,KAAKJ,yBAAL,CAA+B/I,MAA/B,CAA3B,EAAmE;AAC/D,iBAAK8I,gBAAL,CAAsB9I,MAAtB,EAA8B9F,SAA9B;AACAyS,yFAAuB,KAAKpG,SAA5BoG,EAAuC,MAAvCA,EAA+C3M,MAA/C2M;AACH;AAJL;;AAMA/G,uBAAe,CAACrQ,SAAhBqQ,CAA0B2G,WAA1B3G,GAAwC,UAAU1F,KAAV,EAAiBhG,SAAjB,EAA4B;AAChE,cAAI0S,WAAW,GAAGvY,iDAASA,iDAAS,EAATA,EAAa,KAAK0T,aAAL,EAAb1T,CAATA,EAA6C;AAAE6L,iBAAK,EAAEA,KAAT;AAAgBgM,kBAAM,EAAEhM,KAAK,CAAC2M,aAA9B;AAA6C7E,yBAAa,EAAEC,kEAA5D;AAAiFC,mBAAO,EAAE;AAA1F,WAA7C7T,CAAlB;AACA,eAAKyU,gBAAL,CAAsB8D,WAAtB,EAAmC1S,SAAnC;AACAyS,uFAAuB,KAAKpG,SAA5BoG,EAAuC,OAAvCA,EAAgD,KAAKlG,IAAL,CAAUvG,KAAV,GAAkBA,KAAlEyM;AAHJ;;AAKA/G,uBAAe,CAACrQ,SAAhBqQ,CAA0BkH,YAA1BlH,GAAyC,YAAY;AACjD,iBAAO,KAAKW,SAAL,CAAeC,IAAf,GAAsB,CAA7B;AADJ;;AAGAZ,uBAAe,CAACrQ,SAAhBqQ,CAA0BgB,aAA1BhB,GAA0C,YAAY;AAClD,cAAI,KAAKkB,UAAT,EACI;;AACJ,cAAI,KAAKuF,OAAL,IAAgB,KAAKpG,QAAzB,EAAmC;AAC/B,iBAAKoG,OAAL,CAAaG,cAAb,CAA4B,KAAKvG,QAAjC;AACA,mBAAO,KAAKoG,OAAZ;AACA,mBAAO,KAAKpG,QAAZ;AACH;;AACD,eAAKoF,WAAL;AACA,eAAKxE,aAAL,CAAmB5P,OAAnB,CAA2B,UAAU8V,GAAV,EAAe;AAAE,mBAAOA,GAAG,CAACpF,WAAJoF,EAAP;AAA5C;AACA,eAAKlG,aAAL,CAAmBtN,KAAnB;AACA,eAAKgE,YAAL,CAAkBmN,SAAlB,CAA4B,KAAK3D,OAAjC;AACA,eAAKR,SAAL,CAAehN,KAAf;AACA,eAAKuN,UAAL,GAAkB,IAAlB;AAbJ;;AAeA,eAAOlB,eAAP;AA1ZmB,QA2ZrBoH,2DA3ZqB,CAAvB;;AA6ZAC,mFAAsBrH,gBAAtBqH;;AACA,eAAS5G,wCAAT,CAAkDnG,KAAlD,EAAyD;AACrD5J,eAAO,IAAI6G,yEAAgB,iBAAhBA,EAAmC+C,KAAK,CAACgN,OAAzC/P,EAAkD+C,KAAK,CAACiN,KAAxDhQ,CAAX7G;AACH;;AACM,eAASsS,sBAAT,CAA+BC,OAA/B,EAAwC;AAC3C,YAAIvS,OAAO,IAAI2V,sEAAgBpD,OAAhBoD,CAAf,EAAyC;AACrC3V,iBAAO,IAAI6G,yEAAgB,kCAAkC0L,OAAO,CAAC3S,GAAR2S,CAAY,UAAUuE,CAAV,EAAa;AAAE,mBAAOA,CAAC,CAACC,IAAFD,CAAOE,IAAPF,CAAY,GAAZA,CAAP;AAA3B,aAAuDE,IAAvDzE,CAA4D,IAA5DA,CAAlD1L,EAAqH0L,OAArH1L,CAAX7G;AACH;AACJ;;AACM,eAASiX,qBAAT,CAA8BvT,OAA9B,EAAuC;AAC1C,YAAIU,EAAE,GAAGV,OAAO,CAACqE,WAAjB;AAAA,YAA8BA,WAAW,GAAG3D,EAAE,KAAK,KAAK,CAAZA,GAAgB,aAAhBA,GAAgCA,EAA5E;AAAA,YAAgF8S,eAAe,GAAGxT,OAAO,CAACwT,eAA1G;;AACA,YAAIA,eAAJ,EAAqB;AACjBxT,iBAAO,CAACqE,WAARrE,GAAsB,OAAOwT,eAAP,KAA2B,UAA3B,GAChBA,eAAe,CAACxH,IAAhBwH,CAAqBxT,OAArBwT,EAA8BnP,WAA9BmP,CADgB,GAEhBA,eAFNxT;AAGH;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChbD;AACA,UAAIyT,uBAAuB,GAAG,KAAKzY,iEAAgBE,OAAhBF,GAA0BI,GAA/B,GAA9B;;AACA,eAASsY,0BAAT,CAAoCpV,KAApC,EAA2CqV,UAA3C,EAAuD;AACnD,YAAI7X,QAAQ,GAAGwC,KAAK,CAACqV,UAAD,CAApB;;AACA,YAAI,OAAO7X,QAAP,KAAoB,UAAxB,EAAoC;AAChCwC,eAAK,CAACqV,UAAD,CAALrV,GAAoB,YAAY;AAC5BmV,mCAAuB,CAAC7X,GAAxB6X,CAA4BnV,KAA5BmV,EAAmC,CAACA,uBAAuB,CAAC1X,GAAxB0X,CAA4BnV,KAA5BmV,IAAqC,CAAtC,IAA2C,IAA9EA;AACA,mBAAO3X,QAAQ,CAAC8X,KAAT9X,CAAe,IAAfA,EAAqBoD,SAArBpD,CAAP;AAFJ;AAIH;AACJ;;AACD,eAAS+X,mBAAT,CAA6BtV,IAA7B,EAAmC;AAC/B,YAAIA,IAAI,CAAC,eAAD,CAAR,EAA2B;AACvBoT,sBAAY,CAACpT,IAAI,CAAC,eAAD,CAAL,CAAZoT;AACApT,cAAI,CAAC,eAAD,CAAJA,GAAwB,KAAK,CAA7BA;AACH;AACJ;;AACD,UAAIuV,UAAS,GAAI,YAAY;AACzB,iBAASA,SAAT,CAAmBvQ,YAAnB,EAAiCwJ,OAAjC,EAA0C;AACtC,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAGxJ,YAAY,CAACyJ,eAAbzJ,EAAVwJ;AAA2C;;AACrE,eAAKA,OAAL,GAAeA,OAAf;AACA,eAAK/N,SAAL,GAAiB,IAAInE,GAAJ,EAAjB;AACA,eAAK4H,QAAL,GAAgB,IAAhB;AACA,eAAKsR,aAAL,GAAqB,CAArB;AACA,eAAKlH,aAAL,GAAqB,IAAIhS,GAAJ,EAArB;AACA,eAAKmZ,OAAL,GAAe,KAAf;AACA,eAAK7U,KAAL,GAAa,KAAb;AACA,eAAK8U,eAAL,GAAuB,IAAvB;AACA,cAAI3V,KAAK,GAAG,KAAKA,KAAL,GAAaiF,YAAY,CAACjF,KAAtC;;AACA,cAAI,CAACmV,uBAAuB,CAAChY,GAAxBgY,CAA4BnV,KAA5BmV,CAAL,EAAyC;AACrCA,mCAAuB,CAAC7X,GAAxB6X,CAA4BnV,KAA5BmV,EAAmC,CAAnCA;AACAC,sCAA0B,CAACpV,KAAD,EAAQ,OAAR,CAA1BoV;AACAA,sCAA0B,CAACpV,KAAD,EAAQ,QAAR,CAA1BoV;AACAA,sCAA0B,CAACpV,KAAD,EAAQ,OAAR,CAA1BoV;AACH;AACJ;;AACDI,iBAAS,CAACvY,SAAVuY,CAAoBI,IAApBJ,GAA2B,UAAUzR,KAAV,EAAiB;AACxC,cAAI2L,aAAa,GAAG3L,KAAK,CAAC2L,aAAN3L,IAAuB4L,oEAA3C;;AACA,cAAI,KAAK/N,SAAL,IACA,KAAK8N,aAAL,KAAuBC,oEADvB,IAEA,CAACQ,sDAAM,KAAKvO,SAAXuO,EAAsBpM,KAAK,CAACnC,SAA5BuO,CAFL,EAE6C;AACzCT,yBAAa,GAAGC,yEAAhBD;AACH;;AACD,cAAI,CAACS,sDAAMpM,KAAK,CAACnC,SAAZuO,EAAuB,KAAKvO,SAA5BuO,CAAL,EAA6C;AACzC,iBAAK0F,QAAL,GAAgB,KAAK,CAArB;AACH;;AACD5Z,gBAAM,CAACqD,MAAPrD,CAAc,IAAdA,EAAoB;AAChBkI,oBAAQ,EAAEJ,KAAK,CAACI,QADA;AAEhBvC,qBAAS,EAAEmC,KAAK,CAACnC,SAFD;AAGhBkU,wBAAY,EAAE,IAHE;AAIhBvB,yBAAa,EAAE,KAAKA,aAAL,IAAsB,EAJrB;AAKhB7E,yBAAa,EAAEA;AALC,WAApBzT;;AAOA,cAAI8H,KAAK,CAAC4R,eAAV,EAA2B;AACvB,iBAAKzC,kBAAL,CAAwBnP,KAAK,CAAC4R,eAA9B;AACH;;AACD,cAAI5R,KAAK,CAAC0R,aAAV,EAAyB;AACrB,iBAAKA,aAAL,GAAqB1R,KAAK,CAAC0R,aAA3B;AACH;;AACD,iBAAO,IAAP;AAvBJ;;AAyBAD,iBAAS,CAACvY,SAAVuY,CAAoB7V,KAApB6V,GAA4B,YAAY;AACpCD,6BAAmB,CAAC,IAAD,CAAnBA;AACA,eAAKM,QAAL,GAAgB,KAAK,CAArB;AACA,eAAKhV,KAAL,GAAa,KAAb;AAHJ;;AAKA2U,iBAAS,CAACvY,SAAVuY,CAAoBvF,OAApBuF,GAA8B,UAAU5T,SAAV,EAAqB;AAC/C,cAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,qBAAS,GAAG,KAAKA,SAAjBA;AAA6B;;AACzD,cAAIF,OAAO,GAAG,KAAKqU,cAAL,CAAoBnU,SAApB,CAAd;;AACA,cAAI,KAAKiU,QAAL,IAAiB1F,sDAAMzO,OAANyO,EAAe,KAAK0F,QAAL,CAAcnU,OAA7ByO,CAArB,EAA4D;AACxD,mBAAO,KAAK0F,QAAL,CAActL,IAArB;AACH;;AACD,eAAKyL,WAAL,CAAiB,KAAKpU,SAAL,GAAiBA,SAAlC;AACA,cAAIqU,EAAE,GAAG,KAAKN,eAAd;;AACA,cAAIM,EAAE,IAAIA,EAAE,CAACvU,OAAHuU,CAAWlQ,WAAXkQ,KAA2B,UAArC,EAAiD;AAC7C,mBAAO;AAAE/F,sBAAQ,EAAE;AAAZ,aAAP;AACH;;AACD,cAAI3F,IAAI,GAAG,KAAKvK,KAAL,CAAWuK,IAAX,CAAgB7I,OAAhB,CAAX;AACA,eAAKwU,cAAL,CAAoB3L,IAApB,EAA0B7I,OAA1B;AACA,iBAAO6I,IAAP;AAbJ;;AAeAiL,iBAAS,CAACvY,SAAVuY,CAAoBU,cAApBV,GAAqC,UAAUjL,IAAV,EAAgB7I,OAAhB,EAAyB;AAC1D,eAAKmU,QAAL,GAAgBtL,IAAI,GAAG;AACnBA,gBAAI,EAAEA,IADa;AAEnB7I,mBAAO,EAAEA,OAAO,IAAI,KAAKqU,cAAL;AAFD,WAAH,GAGhB,KAAK,CAHT;AADJ;;AAMAP,iBAAS,CAACvY,SAAVuY,CAAoBO,cAApBP,GAAqC,UAAU5T,SAAV,EAAqB;AACtD,cAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,qBAAS,GAAG,KAAKA,SAAjBA;AAA6B;;AACzD,cAAIqU,EAAE,GAAG,KAAKN,eAAd;AACA,iBAAO;AACH5R,iBAAK,EAAE,KAAKI,QADT;AAEHvC,qBAAS,EAAEA,SAFR;AAGH6I,6BAAiB,EAAE,IAHhB;AAIHtE,sBAAU,EAAE,IAJT;AAKHgQ,2BAAe,EAAE,CAACF,EAAD,IAAOA,EAAE,CAACvU,OAAHuU,CAAWE,eAAXF,KAA+B;AALpD,WAAP;AAHJ;;AAWAT,iBAAS,CAACvY,SAAVuY,CAAoBY,OAApBZ,GAA8B,UAAUjL,IAAV,EAAgB;AAC1C,cAAIhN,KAAK,GAAG,IAAZ;;AACA,cAAI8Y,OAAO,GAAG,KAAKR,QAAL,IAAiB,KAAKA,QAAL,CAActL,IAA7C;AACA,eAAK2L,cAAL,CAAoB3L,IAApB;;AACA,cAAI,CAAC,KAAK1J,KAAN,IACA,CAACsP,sDAAMkG,OAAO,IAAIA,OAAO,CAAC3O,MAAzByI,EAAiC5F,IAAI,IAAIA,IAAI,CAAC7C,MAA9CyI,CADL,EAC4D;AACxD,iBAAKtP,KAAL,GAAa,IAAb;;AACA,gBAAI,CAAC,KAAKyV,aAAV,EAAyB;AACrB,mBAAKA,aAAL,GAAqB1S,UAAU,CAAC,YAAY;AAAE,uBAAOrG,KAAK,CAACgZ,MAANhZ,EAAP;AAAf,iBAAyC,CAAzC,CAA/B;AACH;AACJ;AAVL;;AAYAiY,iBAAS,CAACvY,SAAVuY,CAAoBtC,kBAApBsC,GAAyC,UAAUS,EAAV,EAAc;AACnD,cAAI1Y,KAAK,GAAG,IAAZ;;AACA,cAAI0Y,EAAE,KAAK,KAAKN,eAAhB,EACI;;AACJ,cAAI,KAAKa,UAAT,EAAqB;AACjB,iBAAK9V,SAAL,WAAsB,KAAK8V,UAA3B;AACH;;AACD,eAAKb,eAAL,GAAuBM,EAAvB;;AACA,cAAIA,EAAJ,EAAQ;AACJA,cAAE,CAAC,WAAD,CAAFA,GAAkB,IAAlBA;AACA,iBAAKvV,SAAL,CAAe3C,GAAf,CAAmB,KAAKyY,UAAL,GAAkB,YAAY;AAC7C,kBAAIjZ,KAAK,CAAC0S,OAAN1S,GAAgBkZ,yBAApB,EAA+C;AAC3CR,kBAAE,CAAC,SAAD,CAAFA;AADJ,qBAGK;AACDA,kBAAE,CAAC5H,SAAH4H;AACH;AANL;AAFJ,iBAWK;AACD,mBAAO,KAAKO,UAAZ;AACH;AArBL;;AAuBAhB,iBAAS,CAACvY,SAAVuY,CAAoBe,MAApBf,GAA6B,YAAY;AACrC,cAAIjY,KAAK,GAAG,IAAZ;;AACAgY,6BAAmB,CAAC,IAAD,CAAnBA;;AACA,cAAI,KAAKmB,YAAL,EAAJ,EAAyB;AACrB,iBAAKhW,SAAL,CAAe/B,OAAf,CAAuB,UAAUuC,QAAV,EAAoB;AAAE,qBAAOA,QAAQ,CAAC3D,KAAD,CAAf;AAA7C;AACH;;AACD,eAAKsD,KAAL,GAAa,KAAb;AANJ;;AAQA2U,iBAAS,CAACvY,SAAVuY,CAAoBkB,YAApBlB,GAAmC,YAAY;AAC3C,cAAI,CAAC,KAAK3U,KAAN,IAAe,CAAC,KAAKH,SAAL,CAAewN,IAAnC,EAAyC;AACrC,mBAAO,KAAP;AACH;;AACD,cAAI2B,6EAAyB,KAAKH,aAA9BG,KACA,KAAK8F,eADT,EAC0B;AACtB,gBAAI5P,WAAW,GAAG,KAAK4P,eAAL,CAAqBjU,OAArB,CAA6BqE,WAA/C;;AACA,gBAAIA,WAAW,KAAK,YAAhBA,IACAA,WAAW,KAAK,mBADpB,EACyC;AACrC,qBAAO,KAAP;AACH;AACJ;;AACD,iBAAO,IAAP;AAZJ;;AAcAyP,iBAAS,CAACvY,SAAVuY,CAAoB1P,IAApB0P,GAA2B,YAAY;AACnC,cAAI,CAAC,KAAKE,OAAV,EAAmB;AACf,iBAAKA,OAAL,GAAe,IAAf;AACA,iBAAK/V,KAAL;AACA,iBAAKgX,MAAL;AACA,iBAAKA,MAAL,GAAcnB,SAAS,CAACvY,SAAVuY,CAAoBmB,MAAlC;AACA,iBAAKpI,aAAL,CAAmB5P,OAAnB,CAA2B,UAAU8V,GAAV,EAAe;AAAE,qBAAOA,GAAG,CAACpF,WAAJoF,EAAP;AAA5C;AACA,gBAAIwB,EAAE,GAAG,KAAKN,eAAd;AACA,gBAAIM,EAAJ,EACIA,EAAE,CAAClD,WAAHkD;AACP;AAVL;;AAYAT,iBAAS,CAACvY,SAAVuY,CAAoBmB,MAApBnB,GAA6B,YAAY,CAAzC;;AACAA,iBAAS,CAACvY,SAAVuY,CAAoBQ,WAApBR,GAAkC,UAAU5T,SAAV,EAAqB;AACnD,cAAIrE,KAAK,GAAG,IAAZ;;AACA,cAAIqE,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,qBAAS,GAAG,KAAKA,SAAjBA;AAA6B;;AACzD,cAAIqU,EAAE,GAAG,KAAKN,eAAd;;AACA,cAAIM,EAAE,IAAIA,EAAE,CAACvU,OAAHuU,CAAWlQ,WAAXkQ,KAA2B,UAArC,EAAiD;AAC7C;AACH;;AACD,cAAIW,YAAY,GAAG7a,iDAASA,iDAAS,EAATA,EAAa,KAAKga,cAAL,CAAoBnU,SAApB,CAAb7F,CAATA,EAAuD;AAAE8a,mBAAO,EAAE,IAAX;AAAiBC,oBAAQ,EAAE,kBAAUvM,IAAV,EAAgB;AAAE,qBAAOhN,KAAK,CAAC6Y,OAAN7Y,CAAcgN,IAAdhN,CAAP;AAA6B;AAA1E,WAAvDxB,CAAnB;;AACA,cAAI,CAAC,KAAKgb,SAAN,IACA,CAAC5G,sDAAMyG,YAANzG,EAAoB,KAAK4G,SAAzB5G,CADL,EAC0C;AACtC,iBAAKwG,MAAL;AACA,iBAAKA,MAAL,GAAc,KAAK3W,KAAL,CAAWgX,KAAX,CAAiB,KAAKD,SAAL,GAAiBH,YAAlC,CAAd;AACH;AAZL;;AAcApB,iBAAS,CAACvY,SAAVuY,CAAoB/D,cAApB+D,GAAqC,YAAY;AAC7C,eAAKyB,SAAL,GAAiB,KAAK,CAAtB;AADJ;;AAGAzB,iBAAS,CAACvY,SAAVuY,CAAoB0B,WAApB1B,GAAkC,UAAU9N,MAAV,EAAkB9F,SAAlB,EAA6B;AAC3D,cAAIqV,SAAS,GAAG,KAAKA,SAArB;AACA,iBAAO,EAAEA,SAAS,IACdA,SAAS,CAACE,OAAVF,KAAsB9B,uBAAuB,CAAC1X,GAAxB0X,CAA4B,KAAKnV,KAAjCmV,CADjB8B,IAEL9G,sDAAMvO,SAANuO,EAAiB8G,SAAS,CAACrV,SAA3BuO,CAFK8G,IAGL9G,sDAAMzI,MAAM,CAACuB,IAAbkH,EAAmB8G,SAAS,CAACvP,MAAVuP,CAAiBhO,IAApCkH,CAHG,CAAP;AAFJ;;AAOAqF,iBAAS,CAACvY,SAAVuY,CAAoB4B,UAApB5B,GAAiC,UAAU9N,MAAV,EAAkBhG,OAAlB,EAA2B2V,kBAA3B,EAA+C;AAC5E,cAAI9Z,KAAK,GAAG,IAAZ;;AACA,eAAKgX,aAAL,GAAqBZ,sEAAgBjM,MAAM,CAACkM,MAAvBD,IAAiCjM,MAAM,CAACkM,MAAxCD,GAAiD,EAAtE;AACA,eAAKhU,KAAL;;AACA,cAAI+B,OAAO,CAACqE,WAARrE,KAAwB,UAA5B,EAAwC;AACpC,iBAAKwU,cAAL,CAAoB;AAAExO,oBAAM,EAAEA,MAAM,CAACuB,IAAjB;AAAuBiH,sBAAQ,EAAE;AAAjC,aAApB,EAA6D,KAAK6F,cAAL,CAAoBrU,OAAO,CAACE,SAA5B,CAA7D;AADJ,iBAGK,IAAIyV,kBAAkB,KAAK,CAA3B,EAA8B;AAC/B,gBAAIC,kBAAiB,CAAC5P,MAAD,EAAShG,OAAO,CAAC6V,WAAjB,CAArB,EAAoD;AAChD,mBAAKvX,KAAL,CAAWwX,kBAAX,CAA8B,UAAUxX,KAAV,EAAiB;AAC3C,oBAAIzC,KAAK,CAAC2Z,WAAN3Z,CAAkBmK,MAAlBnK,EAA0BmE,OAAO,CAACE,SAAlCrE,CAAJ,EAAkD;AAC9CyC,uBAAK,CAACqG,UAANrG,CAAiB;AACb+D,yBAAK,EAAExG,KAAK,CAAC4G,QADA;AAEb8E,wBAAI,EAAEvB,MAAM,CAACuB,IAFA;AAGbrH,6BAAS,EAAEF,OAAO,CAACE,SAHN;AAIb6V,6BAAS,EAAEJ,kBAAkB,KAAK;AAJrB,mBAAjBrX;AAMAzC,uBAAK,CAAC0Z,SAAN1Z,GAAkB;AACdmK,0BAAM,EAAEA,MADM;AAEd9F,6BAAS,EAAEF,OAAO,CAACE,SAFL;AAGduV,2BAAO,EAAEhC,uBAAuB,CAAC1X,GAAxB0X,CAA4B5X,KAAK,CAACyC,KAAlCmV;AAHK,mBAAlB5X;AAPJ,uBAaK;AACD,sBAAIA,KAAK,CAACsY,QAANtY,IACAA,KAAK,CAACsY,QAANtY,CAAegN,IAAfhN,CAAoB2S,QADxB,EACkC;AAC9BxI,0BAAM,CAACuB,IAAPvB,GAAcnK,KAAK,CAACsY,QAANtY,CAAegN,IAAfhN,CAAoBmK,MAAlCA;AACA;AACH;AACJ;;AACD,oBAAIgQ,WAAW,GAAGna,KAAK,CAACwY,cAANxY,CAAqBmE,OAAO,CAACE,SAA7BrE,CAAlB;;AACA,oBAAIgN,IAAI,GAAGvK,KAAK,CAACuK,IAANvK,CAAW0X,WAAX1X,CAAX;;AACA,oBAAI,CAACzC,KAAK,CAACmY,OAAX,EAAoB;AAChBnY,uBAAK,CAACyY,WAANzY,CAAkBmE,OAAO,CAACE,SAA1BrE;AACH;;AACDA,qBAAK,CAAC2Y,cAAN3Y,CAAqBgN,IAArBhN,EAA2Bma,WAA3Bna;;AACA,oBAAIgN,IAAI,CAAC2F,QAAT,EAAmB;AACfxI,wBAAM,CAACuB,IAAPvB,GAAc6C,IAAI,CAAC7C,MAAnBA;AACH;AA7BL;AADJ,mBAiCK;AACD,mBAAKuP,SAAL,GAAiB,KAAK,CAAtB;AACH;AACJ;AA5CL;;AA8CAzB,iBAAS,CAACvY,SAAVuY,CAAoBmC,SAApBnC,GAAgC,YAAY;AACxC,eAAKM,YAAL,GAAoB,IAApB;AACA,iBAAO,KAAKpG,aAAL,GAAqBC,kEAA5B;AAFJ;;AAIA6F,iBAAS,CAACvY,SAAVuY,CAAoBoC,SAApBpC,GAAgC,UAAU5N,KAAV,EAAiB;AAC7C,eAAK8H,aAAL,GAAqBC,kEAArB;AACA,eAAKsH,SAAL,GAAiB,KAAK,CAAtB;AACA,eAAKtX,KAAL;;AACA,cAAIiI,KAAK,CAAC2M,aAAV,EAAyB;AACrB,iBAAKA,aAAL,GAAqB3M,KAAK,CAAC2M,aAA3B;AACH;;AACD,cAAI3M,KAAK,CAACkO,YAAV,EAAwB;AACpB,iBAAKA,YAAL,GAAoBlO,KAAK,CAACkO,YAA1B;AACH;;AACD,iBAAOlO,KAAP;AAVJ;;AAYA,eAAO4N,SAAP;AA7Oa,SAAjB;;AAgPO,eAAS8B,kBAAT,CAA2B5P,MAA3B,EAAmC6P,WAAnC,EAAgD;AACnD,YAAIA,WAAW,KAAK,KAAK,CAAzB,EAA4B;AAAEA,qBAAW,GAAG,MAAdA;AAAuB;;AACrD,YAAIM,YAAY,GAAGN,WAAW,KAAK,QAAhBA,IACfA,WAAW,KAAK,KADpB;AAEA,YAAIO,eAAe,GAAG,CAACC,4EAAsBrQ,MAAtBqQ,CAAvB;;AACA,YAAI,CAACD,eAAD,IAAoBD,YAApB,IAAoCnQ,MAAM,CAACuB,IAA/C,EAAqD;AACjD6O,yBAAe,GAAG,IAAlBA;AACH;;AACD,eAAOA,eAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnQD,UAAI1K,cAAc,GAAGnR,MAAM,CAACgB,SAAPhB,CAAiBmR,cAAtC;;AACA,UAAIlI,aAAY,GAAI,YAAY;AAC5B,iBAASA,YAAT,CAAsB9C,EAAtB,EAA0B;AACtB,cAAIpC,KAAK,GAAGoC,EAAE,CAACpC,KAAf;AAAA,cAAsBuD,IAAI,GAAGnB,EAAE,CAACmB,IAAhC;AAAA,cAAsCjB,EAAE,GAAGF,EAAE,CAACS,kBAA9C;AAAA,cAAkEA,kBAAkB,GAAGP,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAA/G;AAAA,cAAmH8C,WAAW,GAAGhD,EAAE,CAACgD,WAApI;AAAA,cAAiJ5C,EAAE,GAAGJ,EAAE,CAACC,OAAzJ;AAAA,cAAkKA,OAAO,GAAGG,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAApM;AAAA,cAAwMI,EAAE,GAAGR,EAAE,CAAC+C,eAAhN;AAAA,cAAiOA,eAAe,GAAGvC,EAAE,KAAK,KAAK,CAAZA,GAAgB,EAAhBA,GAAqBA,EAAxQ;AAAA,cAA4QkC,UAAU,GAAG1C,EAAE,CAAC0C,UAA5R;AAAA,cAAwS/B,sBAAsB,GAAGX,EAAE,CAACW,sBAApU;AACA,eAAKoC,eAAL,GAAuB,EAAvB;AACA,eAAKK,OAAL,GAAe,IAAI1I,GAAJ,EAAf;AACA,eAAKkb,cAAL,GAAsB,IAAIlb,GAAJ,EAAtB;AACA,eAAKmb,cAAL,GAAsB,KAAKvb,iEAAgBE,OAAhBF,GAA0BI,GAA/B,GAAtB;AACA,eAAKob,cAAL,GAAsB,CAAtB;AACA,eAAKC,gBAAL,GAAwB,CAAxB;AACA,eAAKC,iBAAL,GAAyB,CAAzB;AACA,eAAKC,uBAAL,GAA+B,IAAIvb,GAAJ,EAA/B;AACA,eAAKkD,KAAL,GAAaA,KAAb;AACA,eAAKuD,IAAL,GAAYA,IAAZ;AACA,eAAKV,kBAAL,GAA0BA,kBAA1B;AACA,eAAKsC,eAAL,GAAuBA,eAAvB;AACA,eAAKL,UAAL,GAAkBA,UAAU,IAAI,IAAIC,sDAAJ,CAAe;AAAE/E,iBAAK,EAAEA;AAAT,WAAf,CAAhC;AACA,eAAKqC,OAAL,GAAeA,OAAf;AACA,eAAKU,sBAAL,GAA8B,CAAC,CAACA,sBAAhC;;AACA,cAAK,KAAKqC,WAAL,GAAmBA,WAAxB,EAAsC;AAClC,iBAAKO,aAAL,GAAqB1J,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAArB;AACH;AACJ;;AACDiJ,oBAAY,CAACjI,SAAbiI,CAAuBY,IAAvBZ,GAA8B,YAAY;AACtC,cAAI3H,KAAK,GAAG,IAAZ;;AACA,eAAKiI,OAAL,CAAa7G,OAAb,CAAqB,UAAU2Z,KAAV,EAAiB7J,OAAjB,EAA0B;AAC3ClR,iBAAK,CAACgb,oBAANhb,CAA2BkR,OAA3BlR;AADJ;AAGA,eAAKib,oBAAL,CAA0Bxa,OAAO,GAAG,IAAI0F,uEAAJ,CAAmB,gDAAnB,CAAH,GAA0E,IAAIA,uEAAJ,CAAmB,EAAnB,CAA3G;AALJ;;AAOAwB,oBAAY,CAACjI,SAAbiI,CAAuBsT,oBAAvBtT,GAA8C,UAAU0C,KAAV,EAAiB;AAC3D,eAAKoQ,cAAL,CAAoBrZ,OAApB,CAA4B,UAAUgY,MAAV,EAAkB;AAAE,mBAAOA,MAAM,CAAC/O,KAAD,CAAb;AAAhD;AACA,eAAKoQ,cAAL,CAAoB/W,KAApB;AAFJ;;AAIAiE,oBAAY,CAACjI,SAAbiI,CAAuBlB,MAAvBkB,GAAgC,UAAU9C,EAAV,EAAc;AAC1C,cAAIqW,QAAQ,GAAGrW,EAAE,CAACqW,QAAlB;AAAA,cAA4B7W,SAAS,GAAGQ,EAAE,CAACR,SAA3C;AAAA,cAAsD8W,kBAAkB,GAAGtW,EAAE,CAACsW,kBAA9E;AAAA,cAAkGC,aAAa,GAAGvW,EAAE,CAACuW,aAArH;AAAA,cAAoIrW,EAAE,GAAGF,EAAE,CAACoF,cAA5I;AAAA,cAA4JA,cAAc,GAAGlF,EAAE,KAAK,KAAK,CAAZA,GAAgB,EAAhBA,GAAqBA,EAAlM;AAAA,cAAsME,EAAE,GAAGJ,EAAE,CAACwW,mBAA9M;AAAA,cAAmOA,mBAAmB,GAAGpW,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAAjR;AAAA,cAAqRqW,iBAAiB,GAAGzW,EAAE,CAAC0W,MAA5S;AAAA,cAAoTC,cAAc,GAAG3W,EAAE,CAAC2W,cAAxU;AAAA,cAAwVnW,EAAE,GAAGR,EAAE,CAACmV,WAAhW;AAAA,cAA6WA,WAAW,GAAG3U,EAAE,KAAK,KAAK,CAAZA,GAAgB,MAAhBA,GAAyBA,EAApZ;AAAA,cAAwZE,EAAE,GAAGV,EAAE,CAAC2D,WAAha;AAAA,cAA6aA,WAAW,GAAGjD,EAAE,KAAK,KAAK,CAAZA,GAAgB,cAAhBA,GAAiCA,EAA5d;AAAA,cAAgekW,cAAc,GAAG5W,EAAE,CAAC4W,cAApf;AAAA,cAAogBpQ,OAAO,GAAGxG,EAAE,CAACwG,OAAjhB;AACA,iBAAOE,kDAAU,IAAVA,EAAgB,KAAK,CAArBA,EAAwB,KAAK,CAA7BA,EAAgC,YAAY;AAC/C,gBAAImQ,UAAJ,EAAgBC,kBAAhB,EAAoC7U,IAApC;AACA,mBAAO0E,oDAAY,IAAZA,EAAkB,UAAUoQ,EAAV,EAAc;AACnC,sBAAQA,EAAE,CAACC,KAAX;AACI,qBAAK,CAAL;AACIpb,yBAAO,GAAG6G,wEAAU4T,QAAV5T,EAAoB,6FAApBA,CAAH,GAAwHA,wEAAU4T,QAAV5T,EAAoB,EAApBA,CAA/H7G;AACAA,yBAAO,GAAG6G,wEAAUkB,WAAW,KAAK,cAAhBA,IAChBA,WAAW,KAAK,UADVlB,EACsB,4MADtBA,CAAH,GACyOA,wEAAUkB,WAAW,KAAK,cAAhBA,IACtPA,WAAW,KAAK,UAD4NlB,EAChN,EADgNA,CADhP7G;AAGAib,4BAAU,GAAG,KAAKI,kBAAL,EAAbJ;AACAR,0BAAQ,GAAG,KAAK1I,SAAL,CAAe0I,QAAf,EAAyBtU,QAApCsU;AACA7W,2BAAS,GAAG,KAAK0X,YAAL,CAAkBb,QAAlB,EAA4B7W,SAA5B,CAAZA;AACA,sBAAI,CAAC,KAAKmO,SAAL,CAAe0I,QAAf,EAAyBc,gBAA9B,EAAgD,OAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;AAChD,yBAAO,CAAC,CAAD,EAAI,KAAKzU,UAAL,CAAgB6E,oBAAhB,CAAqC8O,QAArC,EAA+C7W,SAA/C,EAA0DgH,OAA1D,CAAJ,CAAP;;AACJ,qBAAK,CAAL;AACIhH,2BAAS,GAAIuX,EAAE,CAACK,IAAHL,EAAbvX;AACAuX,oBAAE,CAACC,KAAHD,GAAW,CAAXA;;AACJ,qBAAK,CAAL;AACID,oCAAkB,GAAG,KAAKvT,aAAL,KAChB,KAAKA,aAAL,CAAmBsT,UAAnB,IAAiC;AAC9BR,4BAAQ,EAAEA,QADoB;AAE9B7W,6BAAS,EAAEA,SAFmB;AAG9BgO,2BAAO,EAAE,IAHqB;AAI9BhI,yBAAK,EAAE;AAJuB,mBADjB,CAArBsR;;AAOA,sBAAIR,kBAAJ,EAAwB;AACpB,yBAAKe,sBAAL,CAA4Bf,kBAA5B,EAAgD;AAC5CO,gCAAU,EAAEA,UADgC;AAE5C9U,8BAAQ,EAAEsU,QAFkC;AAG5C7W,+BAAS,EAAEA,SAHiC;AAI5CmE,iCAAW,EAAEA,WAJ+B;AAK5CwR,iCAAW,EAAEA,WAL+B;AAM5C3O,6BAAO,EAAEA,OANmC;AAO5C+P,mCAAa,EAAEA,aAP6B;AAQ5CG,4BAAM,EAAED,iBARoC;AAS5CG,oCAAc,EAAEA;AAT4B,qBAAhD;AAWH;;AACD,uBAAK1S,gBAAL;AACAjC,sBAAI,GAAG,IAAPA;AACA,yBAAO,CAAC,CAAD,EAAI,IAAIwC,OAAJ,CAAY,UAAUC,OAAV,EAAmBoI,MAAnB,EAA2B;AAC1C,2BAAOwK,+DAASrV,IAAI,CAACsV,qBAALtV,CAA2BoU,QAA3BpU,EAAqCtI,iDAASA,iDAAS,EAATA,EAAa6M,OAAb7M,CAATA,EAAgC;AAAE2c,wCAAkB,EAAEA;AAAtB,qBAAhC3c,CAArCsI,EAAkHzC,SAAlHyC,EAA6H,KAA7HA,CAATqV,EAA8I,UAAUhS,MAAV,EAAkB;AACnK,0BAAIqQ,4EAAsBrQ,MAAtBqQ,KAAiCR,WAAW,KAAK,MAArD,EAA6D;AACzD,8BAAM,IAAIqC,yDAAJ,CAAgB;AAClBrF,uCAAa,EAAE7M,MAAM,CAACkM;AADJ,yBAAhB,CAAN;AAGH;;AACD,0BAAIsF,kBAAJ,EAAwB;AACpBA,0CAAkB,CAACtJ,OAAnBsJ,GAA6B,KAA7BA;AACAA,0CAAkB,CAACtR,KAAnBsR,GAA2B,IAA3BA;AACH;;AACD,0BAAIW,WAAW,GAAG9d,iDAAS,EAATA,EAAa2L,MAAb3L,CAAlB;;AACA,0BAAI,OAAOyL,cAAP,KAA0B,UAA9B,EAA0C;AACtCA,sCAAc,GAAGA,cAAc,CAACqS,WAAD,CAA/BrS;AACH;;AACD,0BAAI+P,WAAW,KAAK,QAAhBA,IACAQ,4EAAsB8B,WAAtB9B,CADJ,EACwC;AACpC,+BAAO8B,WAAW,CAACjG,MAAnB;AACH;;AACD,6BAAOvP,IAAI,CAACyV,kBAALzV,CAAwB;AAC3B4U,kCAAU,EAAEA,UADe;AAE3BvR,8BAAM,EAAEmS,WAFmB;AAG3B1V,gCAAQ,EAAEsU,QAHiB;AAI3B7W,iCAAS,EAAEA,SAJgB;AAK3BmE,mCAAW,EAAEA,WALc;AAM3BwR,mCAAW,EAAEA,WANc;AAO3B3O,+BAAO,EAAEA,OAPkB;AAQ3BkQ,8BAAM,EAAED,iBARmB;AAS3BF,qCAAa,EAAEA,aATY;AAU3BC,2CAAmB,EAAEA,mBAVM;AAW3BpR,sCAAc,EAAEA,cAXW;AAY3BuS,wCAAgB,EAAErB,kBAAkB,GAAGO,UAAH,GAAgB,KAAK,CAZ9B;AAa3BF,sCAAc,EAAEA,cAbW;AAc3BC,sCAAc,EAAEA;AAdW,uBAAxB3U,CAAP;AAlBW,qBAARqV,EAkCJ1T,SAlCI0T,CAkCM;AACTtL,0BAAI,EAAE,cAAUyL,WAAV,EAAuB;AACzBxV,4BAAI,CAACiC,gBAALjC;AACAyC,+BAAO,CAAC+S,WAAD,CAAP/S;AAHK;AAKTc,2BAAK,EAAE,eAAU2K,GAAV,EAAe;AAClB,4BAAI2G,kBAAJ,EAAwB;AACpBA,4CAAkB,CAACtJ,OAAnBsJ,GAA6B,KAA7BA;AACAA,4CAAkB,CAACtR,KAAnBsR,GAA2B3G,GAA3B2G;AACH;;AACD,4BAAIR,kBAAJ,EAAwB;AACpBrU,8BAAI,CAACrE,KAALqE,CAAW0V,gBAAX1V,CAA4B4U,UAA5B5U;AACH;;AACDA,4BAAI,CAACiC,gBAALjC;AACA6K,8BAAM,CAACqD,GAAG,YAAYqH,yDAAfrH,GAA6BA,GAA7BA,GAAmC,IAAIqH,yDAAJ,CAAgB;AACtD9D,sCAAY,EAAEvD;AADwC,yBAAhB,CAApC,CAANrD;AAGH;AAjBQ,qBAlCNwK,CAAP;AADG,oBAAJ,CAAP;AArCR;AADc,aAAX3Q,CAAP;AAFY,WAATD,CAAP;AAFJ;;AAqGA5D,oBAAY,CAACjI,SAAbiI,CAAuB4U,kBAAvB5U,GAA4C,UAAUuT,QAAV,EAAoBzY,KAApB,EAA2B;AACnE,cAAIzC,KAAK,GAAG,IAAZ;;AACA,cAAIyC,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,iBAAK,GAAG,KAAKA,KAAbA;AAAqB;;AAC7C,cAAI0H,MAAM,GAAG+Q,QAAQ,CAAC/Q,MAAtB;AACA,cAAIsS,WAAW,GAAG,EAAlB;AACA,cAAIC,SAAS,GAAGxB,QAAQ,CAAC1S,WAAT0S,KAAyB,UAAzC;;AACA,cAAI,CAACwB,SAAD,IAAc3C,kEAAkB5P,MAAlB4P,EAA0BmB,QAAQ,CAAClB,WAAnCD,CAAlB,EAAmE;AAC/D0C,uBAAW,CAAC1b,IAAZ0b,CAAiB;AACbtS,oBAAM,EAAEA,MAAM,CAACuB,IADF;AAEbiR,oBAAM,EAAE,eAFK;AAGbnW,mBAAK,EAAE0U,QAAQ,CAACtU,QAHH;AAIbvC,uBAAS,EAAE6W,QAAQ,CAAC7W;AAJP,aAAjBoY;AAMA,gBAAIG,eAAe,GAAG1B,QAAQ,CAACE,aAA/B;;AACA,gBAAIwB,eAAJ,EAAqB;AACjB,mBAAK3U,OAAL,CAAa7G,OAAb,CAAqB,UAAUyD,EAAV,EAAcqM,OAAd,EAAuB;AACxC,oBAAIkH,eAAe,GAAGvT,EAAE,CAACuT,eAAzB;AACA,oBAAI9G,SAAS,GAAG8G,eAAe,IAAIA,eAAe,CAAC9G,SAAnD;;AACA,oBAAI,CAACA,SAAD,IAAc,CAACzB,cAAc,CAACM,IAAfN,CAAoB+M,eAApB/M,EAAqCyB,SAArCzB,CAAnB,EAAoE;AAChE;AACH;;AACD,oBAAIgN,OAAO,GAAGD,eAAe,CAACtL,SAAD,CAA7B;;AACA,oBAAIvM,EAAE,GAAG/E,KAAK,CAACiI,OAANjI,CAAcE,GAAdF,CAAkBkR,OAAlBlR,CAAT;AAAA,oBAAqC4G,QAAQ,GAAG7B,EAAE,CAAC6B,QAAnD;AAAA,oBAA6DvC,SAAS,GAAGU,EAAE,CAACV,SAA5E;;AACA,oBAAIY,EAAE,GAAGxC,KAAK,CAACuK,IAANvK,CAAW;AAChB+D,uBAAK,EAAEI,QADS;AAEhBvC,2BAAS,EAAEA,SAFK;AAGhB6I,mCAAiB,EAAE,IAHH;AAIhBtE,4BAAU,EAAE;AAJI,iBAAXnG,CAAT;AAAA,oBAKIqa,kBAAkB,GAAG7X,EAAE,CAACkF,MAL5B;AAAA,oBAKoCwI,QAAQ,GAAG1N,EAAE,CAAC0N,QALlD;;AAMA,oBAAIA,QAAQ,IAAImK,kBAAhB,EAAoC;AAChC,sBAAIC,eAAe,GAAGF,OAAO,CAACC,kBAAD,EAAqB;AAC9CE,kCAAc,EAAE7S,MAD8B;AAE9CmH,6BAAS,EAAE1K,QAAQ,IAAIqW,uEAAiBrW,QAAjBqW,CAAZrW,IAA0C,KAAK,CAFZ;AAG9CsW,kCAAc,EAAE7Y;AAH8B,mBAArB,CAA7B;;AAKA,sBAAI0Y,eAAJ,EAAqB;AACjBN,+BAAW,CAAC1b,IAAZ0b,CAAiB;AACbtS,4BAAM,EAAE4S,eADK;AAEbJ,4BAAM,EAAE,YAFK;AAGbnW,2BAAK,EAAEI,QAHM;AAIbvC,+BAAS,EAAEA;AAJE,qBAAjBoY;AAMH;AACJ;AA5BL;AA8BH;AACJ;;AACD,cAAIA,WAAW,CAACvb,MAAZub,GAAqB,CAArBA,IACAvB,QAAQ,CAACjR,cADTwS,IAEAvB,QAAQ,CAACK,MAFTkB,IAGAvB,QAAQ,CAACM,cAHTiB,IAIAvB,QAAQ,CAACsB,gBAJb,EAI+B;AAC3B,gBAAIW,SAAS,GAAG,EAAhB;AACA,iBAAKlT,cAAL,CAAoB;AAChBmT,yBAAW,EAAE,qBAAU3a,KAAV,EAAiB;AAC1B,oBAAI,CAACia,SAAL,EAAgB;AACZD,6BAAW,CAACrb,OAAZqb,CAAoB,UAAUY,KAAV,EAAiB;AAAE,2BAAO5a,KAAK,CAAC4a,KAAN5a,CAAY4a,KAAZ5a,CAAP;AAAvC;AACH;;AACD,oBAAI8Y,MAAM,GAAGL,QAAQ,CAACK,MAAtB;;AACA,oBAAIA,MAAJ,EAAY;AACR,sBAAI,CAACmB,SAAL,EAAgB;AACZ,wBAAI1P,IAAI,GAAGvK,KAAK,CAACuK,IAANvK,CAAW;AAClB6a,wBAAE,EAAE,eADc;AAElB9W,2BAAK,EAAExG,KAAK,CAACwS,SAANxS,CAAgBkb,QAAQ,CAACtU,QAAzB5G,EAAmCud,OAFxB;AAGlBlZ,+BAAS,EAAE6W,QAAQ,CAAC7W,SAHF;AAIlBuE,gCAAU,EAAE,KAJM;AAKlBsE,uCAAiB,EAAE;AALD,qBAAXzK,CAAX;;AAOA,wBAAIuK,IAAI,CAAC2F,QAAT,EAAmB;AACfxI,4BAAM,GAAG3L,iDAASA,iDAAS,EAATA,EAAa2L,MAAb3L,CAATA,EAA+B;AAAEkN,4BAAI,EAAEsB,IAAI,CAAC7C;AAAb,uBAA/B3L,CAAT2L;AACH;AACJ;;AACDoR,wBAAM,CAAC9Y,KAAD,EAAQ0H,MAAR,EAAgB;AAClBkB,2BAAO,EAAE6P,QAAQ,CAAC7P,OADA;AAElBhH,6BAAS,EAAE6W,QAAQ,CAAC7W;AAFF,mBAAhB,CAANkX;AAIH;;AACD,oBAAI,CAACmB,SAAD,IAAc,CAACxB,QAAQ,CAACO,cAA5B,EAA4C;AACxChZ,uBAAK,CAAC+a,MAAN/a,CAAa;AACT6a,sBAAE,EAAE,eADK;AAETG,0BAAM,EAAE,gBAAUtf,KAAV,EAAiB0G,EAAjB,EAAqB;AACzB,0BAAImK,SAAS,GAAGnK,EAAE,CAACmK,SAAnB;AAAA,0BAA8B0O,MAAM,GAAG7Y,EAAE,CAAC6Y,MAA1C;AACA,6BAAO1O,SAAS,KAAK,YAAdA,GAA6B7Q,KAA7B6Q,GAAqC0O,MAA5C;AACH;AALQ,mBAAbjb;AAOH;AAhCW;AAkChB8H,qBAAO,EAAE2Q,QAAQ,CAACjR,cAlCF;AAmChBrB,wBAAU,EAAE,KAnCI;AAoChB4T,8BAAgB,EAAEtB,QAAQ,CAACsB,gBApCX;AAqChBhB,4BAAc,EAAEN,QAAQ,CAACM,cAATN,IAA2B;AArC3B,aAApB,EAsCG9Z,OAtCH,CAsCW,UAAU+I,MAAV,EAAkB;AAAE,qBAAOgT,SAAS,CAACpc,IAAVoc,CAAehT,MAAfgT,CAAP;AAtC/B;;AAuCA,gBAAIjC,QAAQ,CAACG,mBAATH,IAAgCA,QAAQ,CAACM,cAA7C,EAA6D;AACzD,qBAAOlS,OAAO,CAACI,GAARJ,CAAY6T,SAAZ7T,EAAuBE,IAAvBF,CAA4B,YAAY;AAAE,uBAAOa,MAAP;AAA1C,gBAAP;AACH;AACJ;;AACD,iBAAOb,OAAO,CAACC,OAARD,CAAgBa,MAAhBb,CAAP;AAhGJ;;AAkGA3B,oBAAY,CAACjI,SAAbiI,CAAuBuU,sBAAvBvU,GAAgD,UAAUwT,kBAAV,EAA8BD,QAA9B,EAAwC;AACpF,cAAIlb,KAAK,GAAG,IAAZ;;AACA,cAAI0L,IAAI,GAAG,OAAOyP,kBAAP,KAA8B,UAA9B,GACLA,kBAAkB,CAACD,QAAQ,CAAC7W,SAAV,CADb,GAEL8W,kBAFN;AAGA,iBAAO,KAAK1Y,KAAL,CAAWkb,2BAAX,CAAuC,UAAUlb,KAAV,EAAiB;AAC3D,gBAAI;AACAzC,mBAAK,CAACuc,kBAANvc,CAAyBxB,iDAASA,iDAAS,EAATA,EAAa0c,QAAb1c,CAATA,EAAiC;AAAE2L,sBAAM,EAAE;AAAEuB,sBAAI,EAAEA;AAAR;AAAV,eAAjClN,CAAzBwB,EAAuFyC,KAAvFzC;AADJ,cAGA,OAAOqK,KAAP,EAAc;AACV5J,qBAAO,IAAI6G,yEAAgB+C,KAAhB/C,CAAX7G;AACH;AANE,aAOJya,QAAQ,CAACQ,UAPL,CAAP;AALJ;;AAcA/T,oBAAY,CAACjI,SAAbiI,CAAuB8M,UAAvB9M,GAAoC,UAAUuJ,OAAV,EAAmB/M,OAAnB,EAA4BgO,aAA5B,EAA2C;AAC3E,iBAAO,KAAKyD,oBAAL,CAA0B1E,OAA1B,EAAmC/M,OAAnC,EAA4CgO,aAA5C,EAA2D0E,OAAlE;AADJ;;AAGAlP,oBAAY,CAACjI,SAAbiI,CAAuBO,aAAvBP,GAAuC,YAAY;AAC/C,cAAIiW,KAAK,GAAGlf,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAAZ;AACA,eAAKuJ,OAAL,CAAa7G,OAAb,CAAqB,UAAUsB,IAAV,EAAgBwO,OAAhB,EAAyB;AAC1C0M,iBAAK,CAAC1M,OAAD,CAAL0M,GAAiB;AACbvZ,uBAAS,EAAE3B,IAAI,CAAC2B,SADH;AAEb8N,2BAAa,EAAEzP,IAAI,CAACyP,aAFP;AAGboG,0BAAY,EAAE7V,IAAI,CAAC6V,YAHN;AAIbvB,2BAAa,EAAEtU,IAAI,CAACsU;AAJP,aAAjB4G;AADJ;AAQA,iBAAOA,KAAP;AAVJ;;AAYAjW,oBAAY,CAACjI,SAAbiI,CAAuB8L,WAAvB9L,GAAqC,UAAUuJ,OAAV,EAAmB;AACpD,cAAIhB,SAAS,GAAG,KAAKjI,OAAL,CAAa/H,GAAb,CAAiBgR,OAAjB,CAAhB;;AACA,cAAIhB,SAAJ,EAAe;AACXA,qBAAS,CAACqI,YAAVrI,GAAyB2N,SAAzB3N;AACAA,qBAAS,CAAC8G,aAAV9G,GAA0B,EAA1BA;AACH;AALL;;AAOAvI,oBAAY,CAACjI,SAAbiI,CAAuB6K,SAAvB7K,GAAmC,UAAUf,QAAV,EAAoB;AACnD,cAAI8T,cAAc,GAAG,KAAKA,cAA1B;;AACA,cAAI,CAACA,cAAc,CAAC9a,GAAf8a,CAAmB9T,QAAnB8T,CAAL,EAAmC;AAC/B,gBAAIoD,WAAW,GAAG,KAAKrb,KAAL,CAAWsb,iBAAX,CAA6BnX,QAA7B,CAAlB;AACA,gBAAIoX,OAAO,GAAGC,6FAAsC,KAAKxb,KAAL,CAAWyb,gBAAX,CAA4BJ,WAA5B,CAAtCG,CAAd;AACA,gBAAIpS,WAAW,GAAG,KAAKtE,UAAL,CAAgBsE,WAAhB,CAA4BiS,WAA5B,CAAlB;AACA,gBAAI/R,WAAW,GAAGiS,OAAO,IAAI,KAAKzW,UAAL,CAAgBwE,WAAhB,CAA4BiS,OAA5B,CAA7B;AACA,gBAAIG,YAAY,GAAG;AACfvX,sBAAQ,EAAEkX,WADK;AAEf9B,8BAAgB,EAAEA,wEAAiB8B,WAAjB9B,CAFH;AAGfvJ,gCAAkB,EAAE,KAAKlL,UAAL,CAAgBgF,oBAAhB,CAAqCuR,WAArC,CAHL;AAIfjS,yBAAW,EAAEA,WAJE;AAKfE,yBAAW,EAAEA,WALE;AAMfqS,yBAAW,EAAEC,uEAAiBhN,6EAAuByM,WAAvBzM,CAAjBgN,CANE;AAOfd,qBAAO,EAAE/e,iDAASA,iDAAS,EAATA,EAAasf,WAAbtf,CAATA,EAAoC;AAAE8f,2BAAW,EAAER,WAAW,CAACQ,WAAZR,CAAwBzd,GAAxByd,CAA4B,UAAUS,GAAV,EAAe;AAC/F,sBAAIA,GAAG,CAACzR,IAAJyR,KAAa,qBAAbA,IACAA,GAAG,CAAC1Q,SAAJ0Q,KAAkB,OADtB,EAC+B;AAC3B,2BAAO/f,iDAASA,iDAAS,EAATA,EAAa+f,GAAb/f,CAATA,EAA4B;AAAEqP,+BAAS,EAAE;AAAb,qBAA5BrP,CAAP;AACH;;AACD,yBAAO+f,GAAP;AALoD;AAAf,eAApC/f;AAPM,aAAnB;;AAeA,gBAAIgC,GAAG,GAAG,SAANA,GAAM,CAAUge,GAAV,EAAe;AACrB,kBAAIA,GAAG,IAAI,CAAC9D,cAAc,CAAC9a,GAAf8a,CAAmB8D,GAAnB9D,CAAZ,EAAqC;AACjCA,8BAAc,CAAC3a,GAAf2a,CAAmB8D,GAAnB9D,EAAwByD,YAAxBzD;AACH;AAHL;;AAKAla,eAAG,CAACoG,QAAD,CAAHpG;AACAA,eAAG,CAACsd,WAAD,CAAHtd;AACAA,eAAG,CAACqL,WAAD,CAAHrL;AACAA,eAAG,CAACuL,WAAD,CAAHvL;AACH;;AACD,iBAAOka,cAAc,CAACxa,GAAfwa,CAAmB9T,QAAnB8T,CAAP;AAhCJ;;AAkCA/S,oBAAY,CAACjI,SAAbiI,CAAuBoU,YAAvBpU,GAAsC,UAAUf,QAAV,EAAoBvC,SAApB,EAA+B;AACjE,iBAAO7F,iDAASA,iDAAS,EAATA,EAAa,KAAKgU,SAAL,CAAe5L,QAAf,EAAyBwX,WAAtC5f,CAATA,EAA6D6F,SAA7D7F,CAAP;AADJ;;AAGAmJ,oBAAY,CAACjI,SAAbiI,CAAuBrB,UAAvBqB,GAAoC,UAAUxD,OAAV,EAAmB;AACnDA,iBAAO,GAAG3F,iDAASA,iDAAS,EAATA,EAAa2F,OAAb3F,CAATA,EAAgC;AAAE6F,qBAAS,EAAE,KAAK0X,YAAL,CAAkB5X,OAAO,CAACqC,KAA1B,EAAiCrC,OAAO,CAACE,SAAzC;AAAb,WAAhC7F,CAAV2F;;AACA,cAAI,OAAOA,OAAO,CAACoQ,2BAAf,KAA+C,WAAnD,EAAgE;AAC5DpQ,mBAAO,CAACoQ,2BAARpQ,GAAsC,KAAtCA;AACH;;AACD,cAAI+L,SAAS,GAAG,IAAI+H,oDAAJ,CAAc,IAAd,CAAhB;AACA,cAAIwG,UAAU,GAAG,IAAI1O,iEAAJ,CAAoB;AACjCrI,wBAAY,EAAE,IADmB;AAEjCwI,qBAAS,EAAEA,SAFsB;AAGjC/L,mBAAO,EAAEA;AAHwB,WAApB,CAAjB;AAKA,eAAK8D,OAAL,CAAalI,GAAb,CAAiB0e,UAAU,CAACvN,OAA5B,EAAqChB,SAArC;AACAA,mBAAS,CAACmI,IAAVnI,CAAe;AACXtJ,oBAAQ,EAAEzC,OAAO,CAACqC,KADP;AAEX4R,2BAAe,EAAEqG,UAFN;AAGXpa,qBAAS,EAAEF,OAAO,CAACE;AAHR,WAAf6L;AAKA,iBAAOuO,UAAP;AAjBJ;;AAmBA9W,oBAAY,CAACjI,SAAbiI,CAAuBnB,KAAvBmB,GAA+B,UAAUxD,OAAV,EAAmB+M,OAAnB,EAA4B;AACvD,cAAIlR,KAAK,GAAG,IAAZ;;AACA,cAAIkR,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,KAAKC,eAAL,EAAVD;AAAmC;;AAC7DzQ,iBAAO,GAAG6G,wEAAUnD,OAAO,CAACqC,KAAlBc,EAAyB,sEAC/B,sBADMA,CAAH,GACuBA,wEAAUnD,OAAO,CAACqC,KAAlBc,EAAyB,EAAzBA,CAD9B7G;AAEAA,iBAAO,GAAG6G,wEAAUnD,OAAO,CAACqC,KAARrC,CAAc2I,IAAd3I,KAAuB,UAAjCmD,EAA6C,gDAA7CA,CAAH,GAAoGA,wEAAUnD,OAAO,CAACqC,KAARrC,CAAc2I,IAAd3I,KAAuB,UAAjCmD,EAA6C,EAA7CA,CAA3G7G;AACAA,iBAAO,GAAG6G,wEAAU,CAACnD,OAAO,CAAC+I,iBAAnB5F,EAAsC,wDAAtCA,CAAH,GAAqGA,wEAAU,CAACnD,OAAO,CAAC+I,iBAAnB5F,EAAsC,EAAtCA,CAA5G7G;AACAA,iBAAO,GAAG6G,wEAAU,CAACnD,OAAO,CAACyP,YAAnBtM,EAAiC,mDAAjCA,CAAH,GAA2FA,wEAAU,CAACnD,OAAO,CAACyP,YAAnBtM,EAAiC,EAAjCA,CAAlG7G;AACA,iBAAO,KAAKgU,UAAL,CAAgBvD,OAAhB,EAAyB/M,OAAzB,aAA0C,YAAY;AAAE,mBAAOnE,KAAK,CAAC6U,SAAN7U,CAAgBkR,OAAhBlR,CAAP;AAAxD,YAAP;AARJ;;AAUA2H,oBAAY,CAACjI,SAAbiI,CAAuBwJ,eAAvBxJ,GAAyC,YAAY;AACjD,iBAAO+W,MAAM,CAAC,KAAK/D,cAAL,EAAD,CAAb;AADJ;;AAGAhT,oBAAY,CAACjI,SAAbiI,CAAuBgX,iBAAvBhX,GAA2C,YAAY;AACnD,iBAAO,KAAKiT,gBAAL,EAAP;AADJ;;AAGAjT,oBAAY,CAACjI,SAAbiI,CAAuBmU,kBAAvBnU,GAA4C,YAAY;AACpD,iBAAO+W,MAAM,CAAC,KAAK7D,iBAAL,EAAD,CAAb;AADJ;;AAGAlT,oBAAY,CAACjI,SAAbiI,CAAuBiX,gBAAvBjX,GAA0C,UAAUuJ,OAAV,EAAmB;AACzD,eAAK2N,2BAAL,CAAiC3N,OAAjC;AACA,eAAKnI,gBAAL;AAFJ;;AAIApB,oBAAY,CAACjI,SAAbiI,CAAuBkX,2BAAvBlX,GAAqD,UAAUuJ,OAAV,EAAmB;AACpE,cAAIhB,SAAS,GAAG,KAAKjI,OAAL,CAAa/H,GAAb,CAAiBgR,OAAjB,CAAhB;AACA,cAAIhB,SAAJ,EACIA,SAAS,CAAC3H,IAAV2H;AAHR;;AAKAvI,oBAAY,CAACjI,SAAbiI,CAAuB8B,UAAvB9B,GAAoC,YAAY;AAC5C,eAAKsT,oBAAL,CAA0Bxa,OAAO,GAAG,IAAI0F,uEAAJ,CAAmB,qEAAnB,CAAH,GAA+F,IAAIA,uEAAJ,CAAmB,EAAnB,CAAhI;AACA,eAAK8B,OAAL,CAAa7G,OAAb,CAAqB,UAAU8O,SAAV,EAAqB;AACtC,gBAAIA,SAAS,CAACkI,eAAd,EAA+B;AAC3BlI,uBAAS,CAACiC,aAAVjC,GAA0BkC,qEAA1BlC;AADJ,mBAGK;AACDA,uBAAS,CAAC3H,IAAV2H;AACH;AANL;;AAQA,cAAI,KAAK9H,aAAT,EAAwB;AACpB,iBAAKA,aAAL,GAAqB1J,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAArB;AACH;;AACD,iBAAO,KAAK+D,KAAL,CAAWL,KAAX,EAAP;AAbJ;;AAeAuF,oBAAY,CAACjI,SAAbiI,CAAuBjB,UAAvBiB,GAAoC,YAAY;AAC5C,cAAI3H,KAAK,GAAG,IAAZ;;AACA,iBAAO,KAAKyJ,UAAL,GAAkBD,IAAlB,CAAuB,YAAY;AACtC,mBAAOxJ,KAAK,CAAC2G,wBAAN3G,EAAP;AADG,YAAP;AAFJ;;AAMA2H,oBAAY,CAACjI,SAAbiI,CAAuB2C,oBAAvB3C,GAA8C,UAAU4C,OAAV,EAAmB;AAC7D,cAAIvK,KAAK,GAAG,IAAZ;;AACA,cAAIuK,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,QAAVA;AAAqB;;AAC/C,cAAItC,OAAO,GAAG,IAAI1I,GAAJ,EAAd;AACA,cAAIuf,iBAAiB,GAAG,IAAIvf,GAAJ,EAAxB;AACA,cAAIwf,kBAAkB,GAAG,IAAI/f,GAAJ,EAAzB;;AACA,cAAIX,KAAK,CAACC,OAAND,CAAckM,OAAdlM,CAAJ,EAA4B;AACxBkM,mBAAO,CAACnJ,OAARmJ,CAAgB,UAAUyU,IAAV,EAAgB;AAC5B,kBAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC1BF,iCAAiB,CAAC/e,GAAlB+e,CAAsBE,IAAtBF,EAA4B,KAA5BA;AADJ,qBAGK,IAAIG,sEAAeD,IAAfC,CAAJ,EAA0B;AAC3BH,iCAAiB,CAAC/e,GAAlB+e,CAAsB9e,KAAK,CAACwS,SAANxS,CAAgBgf,IAAhBhf,EAAsB4G,QAA5CkY,EAAsD,KAAtDA;AADC,qBAGA,IAAII,uEAAgBF,IAAhBE,KAAyBF,IAAI,CAACxY,KAAlC,EAAyC;AAC1CuY,kCAAkB,CAACve,GAAnBue,CAAuBC,IAAvBD;AACH;AATL;AAWH;;AACD,eAAK9W,OAAL,CAAa7G,OAAb,CAAqB,UAAUyD,EAAV,EAAcqM,OAAd,EAAuB;AACxC,gBAAIwH,EAAE,GAAG7T,EAAE,CAACuT,eAAZ;AAAA,gBAA6BxR,QAAQ,GAAG/B,EAAE,CAAC+B,QAA3C;;AACA,gBAAI8R,EAAJ,EAAQ;AACJ,kBAAInO,OAAO,KAAK,KAAhB,EAAuB;AACnBtC,uBAAO,CAAClI,GAARkI,CAAYiJ,OAAZjJ,EAAqByQ,EAArBzQ;AACA;AACH;;AACD,kBAAIqJ,SAAS,GAAGoH,EAAE,CAACpH,SAAnB;AAAA,kBAA8B9I,WAAW,GAAGkQ,EAAE,CAACvU,OAAHuU,CAAWlQ,WAAvD;;AACA,kBAAIA,WAAW,KAAK,SAAhBA,IAA6B,CAACkQ,EAAE,CAACzB,YAAHyB,EAAlC,EAAqD;AACjD;AACH;;AACD,kBAAInO,OAAO,KAAK,QAAZA,IACC+G,SAAS,IAAIwN,iBAAiB,CAAClf,GAAlBkf,CAAsBxN,SAAtBwN,CADdvU,IAEC3D,QAAQ,IAAIkY,iBAAiB,CAAClf,GAAlBkf,CAAsBlY,QAAtBkY,CAFjB,EAEmD;AAC/C7W,uBAAO,CAAClI,GAARkI,CAAYiJ,OAAZjJ,EAAqByQ,EAArBzQ;AACA,oBAAIqJ,SAAJ,EACIwN,iBAAiB,CAAC/e,GAAlB+e,CAAsBxN,SAAtBwN,EAAiC,IAAjCA;AACJ,oBAAIlY,QAAJ,EACIkY,iBAAiB,CAAC/e,GAAlB+e,CAAsBlY,QAAtBkY,EAAgC,IAAhCA;AACP;AACJ;AApBL;;AAsBA,cAAIC,kBAAkB,CAACpO,IAAvB,EAA6B;AACzBoO,8BAAkB,CAAC3d,OAAnB2d,CAA2B,UAAU5a,OAAV,EAAmB;AAC1C,kBAAI+M,OAAO,GAAGiO,oEAAa,oBAAbA,CAAd;;AACA,kBAAIjP,SAAS,GAAGlQ,KAAK,CAACof,QAANpf,CAAekR,OAAflR,EAAwBqY,IAAxBrY,CAA6B;AACzC4G,wBAAQ,EAAEzC,OAAO,CAACqC,KADuB;AAEzCnC,yBAAS,EAAEF,OAAO,CAACE;AAFsB,eAA7BrE,CAAhB;;AAIA,kBAAI0Y,EAAE,GAAG,IAAI3I,iEAAJ,CAAoB;AACzBrI,4BAAY,EAAE1H,KADW;AAEzBkQ,yBAAS,EAAEA,SAFc;AAGzB/L,uBAAO,EAAE3F,iDAASA,iDAAS,EAATA,EAAa2F,OAAb3F,CAATA,EAAgC;AAAEgK,6BAAW,EAAE;AAAf,iBAAhChK;AAHgB,eAApB,CAAT;AAKA8I,sFAAUoR,EAAE,CAACxH,OAAHwH,KAAexH,OAAzB5J;AACA4I,uBAAS,CAACyF,kBAAVzF,CAA6BwI,EAA7BxI;AACAjI,qBAAO,CAAClI,GAARkI,CAAYiJ,OAAZjJ,EAAqByQ,EAArBzQ;AAbJ;AAeH;;AACD,cAAIxH,OAAO,IAAIqe,iBAAiB,CAACnO,IAAjC,EAAuC;AACnCmO,6BAAiB,CAAC1d,OAAlB0d,CAA0B,UAAUO,QAAV,EAAoBC,SAApB,EAA+B;AACrD,kBAAI,CAACD,QAAL,EAAe;AACX5e,uBAAO,IAAI6G,wEAAe,oBAAoB,OAAOgY,SAAP,KAAqB,QAArB,GAAgC,QAAhC,GAA2C,EAA/D,IAAqE1d,IAAI,CAACC,SAALD,CAAe0d,SAAf1d,EAA0B,IAA1BA,EAAgC,CAAhCA,CAArE,GAA0G,oDAAzH0F,CAAX7G;AACH;AAHL;AAKH;;AACD,iBAAOwH,OAAP;AAjEJ;;AAmEAN,oBAAY,CAACjI,SAAbiI,CAAuBhB,wBAAvBgB,GAAkD,UAAUqC,cAAV,EAA0B;AACxE,cAAIhK,KAAK,GAAG,IAAZ;;AACA,cAAIgK,cAAc,KAAK,KAAK,CAA5B,EAA+B;AAAEA,0BAAc,GAAG,KAAjBA;AAAyB;;AAC1D,cAAIuV,uBAAuB,GAAG,EAA9B;AACA,eAAKjV,oBAAL,CAA0BN,cAAc,GAAG,KAAH,GAAW,QAAnD,EAA6D5I,OAA7D,CAAqE,UAAUgX,eAAV,EAA2BlH,OAA3B,EAAoC;AACrG,gBAAI1I,WAAW,GAAG4P,eAAe,CAACjU,OAAhBiU,CAAwB5P,WAA1C;AACA4P,2BAAe,CAAC7E,gBAAhB6E;;AACA,gBAAIpO,cAAc,IACbxB,WAAW,KAAK,SAAhBA,IACGA,WAAW,KAAK,YAFxB,EAEuC;AACnC+W,qCAAuB,CAACxe,IAAxBwe,CAA6BnH,eAAe,CAAC1E,OAAhB0E,EAA7BmH;AACH;;AACDvf,iBAAK,CAACof,QAANpf,CAAekR,OAAflR,EAAwB6Y,OAAxB7Y,CAAgC,IAAhCA;AARJ;AAUA,eAAK+I,gBAAL;AACA,iBAAOO,OAAO,CAACI,GAARJ,CAAYiW,uBAAZjW,CAAP;AAfJ;;AAiBA3B,oBAAY,CAACjI,SAAbiI,CAAuBgO,kBAAvBhO,GAA4C,UAAUyQ,eAAV,EAA2B;AACnE,eAAKgH,QAAL,CAAchH,eAAe,CAAClH,OAA9B,EAAuCyE,kBAAvC,CAA0DyC,eAA1D;AADJ;;AAGAzQ,oBAAY,CAACjI,SAAbiI,CAAuBe,wBAAvBf,GAAkD,UAAU9C,EAAV,EAAc;AAC5D,cAAI7E,KAAK,GAAG,IAAZ;;AACA,cAAIwG,KAAK,GAAG3B,EAAE,CAAC2B,KAAf;AAAA,cAAsBgC,WAAW,GAAG3D,EAAE,CAAC2D,WAAvC;AAAA,cAAoDwR,WAAW,GAAGnV,EAAE,CAACmV,WAArE;AAAA,cAAkF3V,SAAS,GAAGQ,EAAE,CAACR,SAAjG;AAAA,cAA4GU,EAAE,GAAGF,EAAE,CAACwG,OAApH;AAAA,cAA6HA,OAAO,GAAGtG,EAAE,KAAK,KAAK,CAAZA,GAAgB,EAAhBA,GAAqBA,EAA5J;AACAyB,eAAK,GAAG,KAAKgM,SAAL,CAAehM,KAAf,EAAsBI,QAA9BJ;AACAnC,mBAAS,GAAG,KAAK0X,YAAL,CAAkBvV,KAAlB,EAAyBnC,SAAzB,CAAZA;;AACA,cAAImb,cAAc,GAAG,SAAjBA,cAAiB,CAAUnb,SAAV,EAAqB;AACtC,mBAAOrE,KAAK,CAACoc,qBAANpc,CAA4BwG,KAA5BxG,EAAmCqL,OAAnCrL,EAA4CqE,SAA5CrE,EAAuDK,GAAvDL,CAA2D,UAAUmK,MAAV,EAAkB;AAChF,kBAAI3B,WAAW,KAAK,UAApB,EAAgC;AAC5B,oBAAIuR,kEAAkB5P,MAAlB4P,EAA0BC,WAA1BD,CAAJ,EAA4C;AACxC/Z,uBAAK,CAACyC,KAANzC,CAAYqd,KAAZrd,CAAkB;AACdwG,yBAAK,EAAEA,KADO;AAEd2D,0BAAM,EAAEA,MAAM,CAACuB,IAFD;AAGdiR,0BAAM,EAAE,mBAHM;AAIdtY,6BAAS,EAAEA;AAJG,mBAAlBrE;AAMH;;AACDA,qBAAK,CAAC+I,gBAAN/I;AACH;;AACD,kBAAIwa,4EAAsBrQ,MAAtBqQ,CAAJ,EAAmC;AAC/B,sBAAM,IAAI6B,yDAAJ,CAAgB;AAClBrF,+BAAa,EAAE7M,MAAM,CAACkM;AADJ,iBAAhB,CAAN;AAGH;;AACD,qBAAOlM,MAAP;AAjBG,cAAP;AADJ;;AAqBA,cAAI,KAAKqI,SAAL,CAAehM,KAAf,EAAsBwV,gBAA1B,EAA4C;AACxC,gBAAIyD,mBAAmB,GAAG,KAAKlY,UAAL,CAAgB6E,oBAAhB,CAAqC5F,KAArC,EAA4CnC,SAA5C,EAAuDgH,OAAvD,EAAgE7B,IAAhE,CAAqEgW,cAArE,CAA1B;AACA,mBAAO,IAAIrI,4DAAJ,CAAe,UAAU/G,QAAV,EAAoB;AACtC,kBAAI8G,GAAG,GAAG,IAAV;AACAuI,iCAAmB,CAACjW,IAApBiW,CAAyB,UAAUhB,UAAV,EAAsB;AAAE,uBAAOvH,GAAG,GAAGuH,UAAU,CAAChW,SAAXgW,CAAqBrO,QAArBqO,CAAb;AAAjD,iBAAiGrO,QAAQ,CAAC/F,KAA1GoV;AACA,qBAAO,YAAY;AAAE,uBAAOvI,GAAG,IAAIA,GAAG,CAACpF,WAAJoF,EAAd;AAArB;AAHG,cAAP;AAKH;;AACD,iBAAOsI,cAAc,CAACnb,SAAD,CAArB;AAlCJ;;AAoCAsD,oBAAY,CAACjI,SAAbiI,CAAuBkN,SAAvBlN,GAAmC,UAAUuJ,OAAV,EAAmB;AAClD,eAAK8J,oBAAL,CAA0B9J,OAA1B;AACA,eAAKnI,gBAAL;AAFJ;;AAIApB,oBAAY,CAACjI,SAAbiI,CAAuBqT,oBAAvBrT,GAA8C,UAAUuJ,OAAV,EAAmB;AAC7D,eAAK2N,2BAAL,CAAiC3N,OAAjC;AACA,eAAKU,WAAL,CAAiBV,OAAjB;AAFJ;;AAIAvJ,oBAAY,CAACjI,SAAbiI,CAAuBiK,WAAvBjK,GAAqC,UAAUuJ,OAAV,EAAmB;AACpD,eAAKuJ,cAAL,WAA2BvJ,OAA3B;AACA,eAAKkO,QAAL,CAAclO,OAAd,EAAuB3I,IAAvB;AACA,eAAKN,OAAL,WAAoBiJ,OAApB;AAHJ;;AAKAvJ,oBAAY,CAACjI,SAAbiI,CAAuBoB,gBAAvBpB,GAA0C,YAAY;AAClD,cAAI,KAAKE,WAAT,EACI,KAAKA,WAAL;AACJ,eAAKI,OAAL,CAAa7G,OAAb,CAAqB,UAAUsB,IAAV,EAAgB;AAAE,mBAAOA,IAAI,CAACsW,MAALtW,EAAP;AAAvC;AAHJ;;AAKAiF,oBAAY,CAACjI,SAAbiI,CAAuB+X,aAAvB/X,GAAuC,YAAY;AAC/C,iBAAO,KAAKJ,UAAZ;AADJ;;AAGAI,oBAAY,CAACjI,SAAbiI,CAAuByU,qBAAvBzU,GAA+C,UAAUnB,KAAV,EAAiB6E,OAAjB,EAA0BhH,SAA1B,EAAqCsb,aAArC,EAAoD;AAC/F,cAAI3f,KAAK,GAAG,IAAZ;;AACA,cAAI6E,EAAJ;;AACA,cAAI8a,aAAa,KAAK,KAAK,CAA3B,EAA8B;AAAEA,yBAAa,GAAG,CAAC9a,EAAE,GAAGwG,OAAO,KAAK,IAAZA,IAAoBA,OAAO,KAAK,KAAK,CAArCA,GAAyC,KAAK,CAA9CA,GAAkDA,OAAO,CAAC/F,kBAAhE,MAAwF,IAAxF,IAAgGT,EAAE,KAAK,KAAK,CAA5G,GAAgHA,EAAhH,GAAqH,KAAKS,kBAA1Iqa;AAA+J;;AAC/L,cAAIlB,UAAJ;AACA,cAAI1S,WAAW,GAAG,KAAKyG,SAAL,CAAehM,KAAf,EAAsBuF,WAAxC;;AACA,cAAIA,WAAJ,EAAiB;AACb,gBAAIhH,EAAE,GAAG,IAAT;AAAA,gBAAe6a,yBAAyB,GAAG7a,EAAE,CAAC+V,uBAA9C;AAAA,gBAAuE9U,IAAI,GAAGjB,EAAE,CAACiB,IAAjF;;AACA,gBAAI6H,SAAS,GAAG;AACZrH,mBAAK,EAAEuF,WADK;AAEZ1H,uBAAS,EAAEA,SAFC;AAGZwb,2BAAa,EAAE5C,uEAAiBlR,WAAjBkR,KAAiC,KAAK,CAHzC;AAIZ5R,qBAAO,EAAE,KAAKY,cAAL,CAAoBzN,iDAASA,iDAAS,EAATA,EAAa6M,OAAb7M,CAATA,EAAgC;AAAEshB,0BAAU,EAAE,CAACH;AAAf,eAAhCnhB,CAApB;AAJG,aAAhB;AAMA6M,mBAAO,GAAGwC,SAAS,CAACxC,OAApBA;;AACA,gBAAIsU,aAAJ,EAAmB;AACf,kBAAII,aAAa,GAAGH,yBAAyB,CAAC1f,GAA1B0f,CAA8B7T,WAA9B6T,KAA8C,IAAIrgB,GAAJ,EAAlE;AACAqgB,uCAAyB,CAAC7f,GAA1B6f,CAA8B7T,WAA9B6T,EAA2CG,aAA3CH;AACA,kBAAII,SAAS,GAAGle,sEAAmBuC,SAAnBvC,CAAhB;AACA2c,wBAAU,GAAGsB,aAAa,CAAC7f,GAAd6f,CAAkBC,SAAlBD,CAAbtB;;AACA,kBAAI,CAACA,UAAL,EAAiB;AACb,oBAAIjI,OAAO,GAAG,IAAIyJ,yDAAJ,CAAY,CACtB5W,+DAAQrD,IAARqD,EAAcwE,SAAdxE,CADsB,CAAZ,CAAd;AAGA0W,6BAAa,CAAChgB,GAAdggB,CAAkBC,SAAlBD,EAA6BtB,UAAU,GAAGjI,OAA1CuJ;AACAvJ,uBAAO,CAAC0J,OAAR1J,CAAgB,YAAY;AACxB,sBAAIuJ,aAAa,UAAbA,CAAqBC,SAArBD,KACAA,aAAa,CAACpP,IAAdoP,GAAqB,CADzB,EAC4B;AACxBH,6CAAyB,UAAzBA,CAAiC7T,WAAjC6T;AACH;AAJL;AAMH;AAhBL,mBAkBK;AACDnB,wBAAU,GAAG,IAAIwB,yDAAJ,CAAY,CACrB5W,+DAAQrD,IAARqD,EAAcwE,SAAdxE,CADqB,CAAZ,CAAboV;AAGH;AA/BL,iBAiCK;AACDA,sBAAU,GAAG,IAAIwB,yDAAJ,CAAY,CACrB9I,gEAAc;AAAEzL,kBAAI,EAAE;AAAR,aAAdyL,CADqB,CAAZ,CAAbsH;AAGApT,mBAAO,GAAG,KAAKY,cAAL,CAAoBZ,OAApB,CAAVA;AACH;;AACD,cAAIQ,WAAW,GAAG,KAAK2G,SAAL,CAAehM,KAAf,EAAsBqF,WAAxC;;AACA,cAAIA,WAAJ,EAAiB;AACb4S,sBAAU,GAAGtC,+DAASsC,UAATtC,EAAqB,UAAUhS,MAAV,EAAkB;AAChD,qBAAOnK,KAAK,CAACuH,UAANvH,CAAiBmL,YAAjBnL,CAA8B;AACjC4G,wBAAQ,EAAEiF,WADuB;AAEjCT,4BAAY,EAAEjB,MAFmB;AAGjCkB,uBAAO,EAAEA,OAHwB;AAIjChH,yBAAS,EAAEA;AAJsB,eAA9BrE,CAAP;AADiB,aAARmc,CAAbsC;AAQH;;AACD,iBAAOA,UAAP;AAxDJ;;AA0DA9W,oBAAY,CAACjI,SAAbiI,CAAuBwY,kBAAvBxY,GAA4C,UAAUuI,SAAV,EAAqB4J,kBAArB,EAAyC3V,OAAzC,EAAkD;AAC1F,cAAIic,SAAS,GAAGlQ,SAAS,CAACgI,aAAVhI,GAA0B,KAAKyO,iBAAL,EAA1C;AACA,iBAAOxC,+DAAS,KAAKC,qBAAL,CAA2BlM,SAAS,CAACtJ,QAArC,EAA+CzC,OAAO,CAACkH,OAAvD,EAAgElH,OAAO,CAACE,SAAxE,CAAT8X,EAA6F,UAAUhS,MAAV,EAAkB;AAClH,gBAAIkW,SAAS,GAAGjK,uEAAgBjM,MAAM,CAACkM,MAAvBD,CAAhB;;AACA,gBAAIgK,SAAS,IAAIlQ,SAAS,CAACgI,aAA3B,EAA0C;AACtC,kBAAImI,SAAS,IAAIlc,OAAO,CAAC6V,WAAR7V,KAAwB,MAAzC,EAAiD;AAC7C,sBAAM+L,SAAS,CAACmK,SAAVnK,CAAoB,IAAImM,yDAAJ,CAAgB;AACtCrF,+BAAa,EAAE7M,MAAM,CAACkM;AADgB,iBAAhB,CAApBnG,CAAN;AAGH;;AACDA,uBAAS,CAAC2J,UAAV3J,CAAqB/F,MAArB+F,EAA6B/L,OAA7B+L,EAAsC4J,kBAAtC5J;AACAA,uBAAS,CAACkK,SAAVlK;AACH;;AACD,gBAAIoQ,GAAG,GAAG;AACN5U,kBAAI,EAAEvB,MAAM,CAACuB,IADP;AAEN2G,qBAAO,EAAE,KAFH;AAGNF,2BAAa,EAAEjC,SAAS,CAACiC,aAAVjC,IAA2BkC;AAHpC,aAAV;;AAKA,gBAAIiO,SAAS,IAAIlc,OAAO,CAAC6V,WAAR7V,KAAwB,QAAzC,EAAmD;AAC/Cmc,iBAAG,CAACjK,MAAJiK,GAAanW,MAAM,CAACkM,MAApBiK;AACH;;AACD,mBAAOA,GAAP;AAnBW,WAARnE,EAoBJ,UAAU5D,YAAV,EAAwB;AACvB,gBAAIlO,KAAK,GAAGkW,iEAAchI,YAAdgI,IACNhI,YADMgI,GAEN,IAAIlE,yDAAJ,CAAgB;AAAE9D,0BAAY,EAAEA;AAAhB,aAAhB,CAFN;;AAGA,gBAAI6H,SAAS,IAAIlQ,SAAS,CAACgI,aAA3B,EAA0C;AACtChI,uBAAS,CAACmK,SAAVnK,CAAoB7F,KAApB6F;AACH;;AACD,kBAAM7F,KAAN;AA3BW,WAAR8R,CAAP;AAFJ;;AAgCAxU,oBAAY,CAACjI,SAAbiI,CAAuBiO,oBAAvBjO,GAA8C,UAAUuJ,OAAV,EAAmB/M,OAAnB,EAA4BgO,aAA5B,EAA2C;AACrF,cAAInS,KAAK,GAAG,IAAZ;;AACA,cAAImS,aAAa,KAAK,KAAK,CAA3B,EAA8B;AAAEA,yBAAa,GAAGC,qEAAhBD;AAAwC;;AACxE,cAAI3L,KAAK,GAAG,KAAKgM,SAAL,CAAerO,OAAO,CAACqC,KAAvB,EAA8BI,QAA1C;AACA,cAAIvC,SAAS,GAAG,KAAK0X,YAAL,CAAkBvV,KAAlB,EAAyBrC,OAAO,CAACE,SAAjC,CAAhB;AACA,cAAI6L,SAAS,GAAG,KAAKkP,QAAL,CAAclO,OAAd,CAAhB;AACA,cAAIrM,EAAE,GAAGV,OAAO,CAACqE,WAAjB;AAAA,cAA8BA,WAAW,GAAG3D,EAAE,KAAK,KAAK,CAAZA,GAAgB,aAAhBA,GAAgCA,EAA5E;AAAA,cAAgFE,EAAE,GAAGZ,OAAO,CAAC6V,WAA7F;AAAA,cAA0GA,WAAW,GAAGjV,EAAE,KAAK,KAAK,CAAZA,GAAgB,MAAhBA,GAAyBA,EAAjJ;AAAA,cAAqJE,EAAE,GAAGd,OAAO,CAAC+I,iBAAlK;AAAA,cAAqLA,iBAAiB,GAAGjI,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAAjO;AAAA,cAAqOI,EAAE,GAAGlB,OAAO,CAACoQ,2BAAlP;AAAA,cAA+QA,2BAA2B,GAAGlP,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAArU;AAAA,cAAyUE,EAAE,GAAGpB,OAAO,CAACkH,OAAtV;AAAA,cAA+VA,OAAO,GAAG9F,EAAE,KAAK,KAAK,CAAZA,GAAgB,EAAhBA,GAAqBA,EAA9X;AACA,cAAIib,UAAU,GAAG9hB,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,EAA2B;AACxC8H,iBAAK,EAAEA,KADiC;AAExCnC,qBAAS,EAAEA,SAF6B;AAGxCmE,uBAAW,EAAEA,WAH2B;AAIxCwR,uBAAW,EAAEA,WAJ2B;AAKxC9M,6BAAiB,EAAEA,iBALqB;AAMxCqH,uCAA2B,EAAEA,2BANW;AAOxClJ,mBAAO,EAAEA;AAP+B,WAA3B3M,CAAjB;;AASA,cAAI+hB,aAAa,GAAG,SAAhBA,aAAgB,CAAUpc,SAAV,EAAqB;AACrCmc,sBAAU,CAACnc,SAAXmc,GAAuBnc,SAAvBmc;AACA,mBAAOxgB,KAAK,CAAC0gB,kBAAN1gB,CAAyBkQ,SAAzBlQ,EAAoCwgB,UAApCxgB,EAAgDmS,aAAhDnS,CAAP;AAFJ;;AAIA,eAAKya,cAAL,CAAoB1a,GAApB,CAAwBmR,OAAxB,EAAiC,UAAUyP,MAAV,EAAkB;AAC/Cta,sBAAU,CAAC,YAAY;AAAE,qBAAOmQ,OAAO,CAAC4C,MAAR5C,CAAemK,MAAfnK,CAAP;AAAf,cAAVnQ;AADJ;AAGA,cAAImQ,OAAO,GAAG,IAAIyJ,yDAAJ,CAAY,KAAKzN,SAAL,CAAegO,UAAU,CAACha,KAA1B,EAAiCwV,gBAAjC,GACpB,KAAKzU,UAAL,CAAgB6E,oBAAhB,CAAqCoU,UAAU,CAACha,KAAhD,EAAuDga,UAAU,CAACnc,SAAlE,EAA6Emc,UAAU,CAACnV,OAAxF,EAAiG7B,IAAjG,CAAsGiX,aAAtG,CADoB,GAEpBA,aAAa,CAACD,UAAU,CAACnc,SAAZ,CAFL,CAAd;AAGAmS,iBAAO,CAAC0J,OAAR1J,CAAgB,YAAY;AACxBxW,iBAAK,CAACya,cAANza,WAA4BkR,OAA5BlR;;AACA0X,wFAAqBvT,OAArBuT;AAFJ;AAIA,iBAAOlB,OAAP;AA9BJ;;AAgCA7O,oBAAY,CAACjI,SAAbiI,CAAuBsC,cAAvBtC,GAAwC,UAAU9C,EAAV,EAAc;AAClD,cAAI7E,KAAK,GAAG,IAAZ;;AACA,cAAIod,WAAW,GAAGvY,EAAE,CAACuY,WAArB;AAAA,cAAkC7S,OAAO,GAAG1F,EAAE,CAAC0F,OAA/C;AAAA,cAAwDxF,EAAE,GAAGF,EAAE,CAAC+D,UAAhE;AAAA,cAA4EA,UAAU,GAAG7D,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAAjH;AAAA,cAAqHE,EAAE,GAAGJ,EAAE,CAAC2X,gBAA7H;AAAA,cAA+IA,gBAAgB,GAAGvX,EAAE,KAAK,KAAK,CAAZA,GAAgB2D,UAAU,GAAGuW,oEAAa,gBAAbA,CAAH,GAAoC,KAAK,CAAnEla,GAAuEA,EAAzO;AAAA,cAA6OuW,cAAc,GAAG3W,EAAE,CAAC2W,cAAjQ;AACA,cAAIoF,mBAAmB,GAAG,IAAIrhB,GAAJ,EAA1B;;AACA,cAAIgL,OAAJ,EAAa;AACT,iBAAKD,oBAAL,CAA0BC,OAA1B,EAAmCnJ,OAAnC,CAA2C,UAAUsX,EAAV,EAAcxH,OAAd,EAAuB;AAC9D0P,iCAAmB,CAAC7gB,GAApB6gB,CAAwB1P,OAAxB0P,EAAiC;AAC7BlI,kBAAE,EAAEA,EADyB;AAE7BJ,wBAAQ,EAAEtY,KAAK,CAACof,QAANpf,CAAekR,OAAflR,EAAwB0S,OAAxB1S;AAFmB,eAAjC4gB;AADJ;AAMH;;AACD,cAAI1W,OAAO,GAAG,IAAI3K,GAAJ,EAAd;;AACA,cAAI6d,WAAJ,EAAiB;AACb,iBAAK3a,KAAL,CAAWoe,KAAX,CAAiB;AACbtF,oBAAM,EAAE6B,WADK;AAEbxU,wBAAU,EAAEA,UAAU,IAAI4T,gBAAd5T,IAAkC,KAFjC;AAGb4T,8BAAgB,EAAEA,gBAHL;AAIbsE,4BAAc,EAAE,wBAAUrH,KAAV,EAAiBzM,IAAjB,EAAuBsL,QAAvB,EAAiC;AAC7C,oBAAII,EAAE,GAAGe,KAAK,CAACH,OAANG,YAAyBxB,oDAAzBwB,IACLA,KAAK,CAACH,OAANG,CAAcrB,eADlB;;AAEA,oBAAIM,EAAJ,EAAQ;AACJ,sBAAI8C,cAAJ,EAAoB;AAChBoF,uCAAmB,UAAnBA,CAA2BlI,EAAE,CAACxH,OAA9B0P;AACA,wBAAIzW,MAAM,GAAGqR,cAAc,CAAC9C,EAAD,EAAK1L,IAAL,EAAWsL,QAAX,CAA3B;;AACA,wBAAInO,MAAM,KAAK,IAAf,EAAqB;AACjBA,4BAAM,GAAGuO,EAAE,CAAChF,OAAHgF,EAATvO;AACH;;AACD,wBAAIA,MAAM,KAAK,KAAf,EAAsB;AAClBD,6BAAO,CAACnK,GAARmK,CAAYwO,EAAZxO,EAAgBC,MAAhBD;AACH;;AACD,2BAAO,KAAP;AACH;;AACD,sBAAIsR,cAAc,KAAK,IAAvB,EAA6B;AACzBoF,uCAAmB,CAAC7gB,GAApB6gB,CAAwBlI,EAAE,CAACxH,OAA3B0P,EAAoC;AAAElI,wBAAE,EAAEA,EAAN;AAAUJ,8BAAQ,EAAEA,QAApB;AAA8BtL,0BAAI,EAAEA;AAApC,qBAApC4T;AACH;AACJ;AACJ;AAvBY,aAAjB;AAyBH;;AACD,cAAIA,mBAAmB,CAACjQ,IAAxB,EAA8B;AAC1BiQ,+BAAmB,CAACxf,OAApBwf,CAA4B,UAAU/b,EAAV,EAAcqM,OAAd,EAAuB;AAC/C,kBAAIwH,EAAE,GAAG7T,EAAE,CAAC6T,EAAZ;AAAA,kBAAgBJ,QAAQ,GAAGzT,EAAE,CAACyT,QAA9B;AAAA,kBAAwCtL,IAAI,GAAGnI,EAAE,CAACmI,IAAlD;AACA,kBAAI7C,MAAJ;;AACA,kBAAIqR,cAAJ,EAAoB;AAChB,oBAAI,CAACxO,IAAL,EAAW;AACP,sBAAItK,IAAI,GAAGgW,EAAE,CAAC,WAAD,CAAb;AACAhW,sBAAI,CAACN,KAALM;AACAsK,sBAAI,GAAGtK,IAAI,CAACgQ,OAALhQ,EAAPsK;AACH;;AACD7C,sBAAM,GAAGqR,cAAc,CAAC9C,EAAD,EAAK1L,IAAL,EAAWsL,QAAX,CAAvBnO;AACH;;AACD,kBAAI,CAACqR,cAAD,IAAmBrR,MAAM,KAAK,IAAlC,EAAwC;AACpCA,sBAAM,GAAGuO,EAAE,CAAChF,OAAHgF,EAATvO;AACH;;AACD,kBAAIA,MAAM,KAAK,KAAf,EAAsB;AAClBD,uBAAO,CAACnK,GAARmK,CAAYwO,EAAZxO,EAAgBC,MAAhBD;AACH;;AACD,kBAAIgH,OAAO,CAAC7J,OAAR6J,CAAgB,oBAAhBA,KAAyC,CAA7C,EAAgD;AAC5ClR,qBAAK,CAACgb,oBAANhb,CAA2BkR,OAA3BlR;AACH;AAnBL;AAqBH;;AACD,cAAIwc,gBAAJ,EAAsB;AAClB,iBAAK/Z,KAAL,CAAW+Z,gBAAX,CAA4BA,gBAA5B;AACH;;AACD,iBAAOtS,OAAP;AAlEJ;;AAoEAvC,oBAAY,CAACjI,SAAbiI,CAAuB+Y,kBAAvB/Y,GAA4C,UAAUuI,SAAV,EAAqBrL,EAArB,EAAyBsN,aAAzB,EAAwC;AAChF,cAAInS,KAAK,GAAG,IAAZ;;AACA,cAAIwG,KAAK,GAAG3B,EAAE,CAAC2B,KAAf;AAAA,cAAsBnC,SAAS,GAAGQ,EAAE,CAACR,SAArC;AAAA,cAAgDmE,WAAW,GAAG3D,EAAE,CAAC2D,WAAjE;AAAA,cAA8EuY,kBAAkB,GAAGlc,EAAE,CAACkc,kBAAtG;AAAA,cAA0H/G,WAAW,GAAGnV,EAAE,CAACmV,WAA3I;AAAA,cAAwJ9M,iBAAiB,GAAGrI,EAAE,CAACqI,iBAA/K;AAAA,cAAkM7B,OAAO,GAAGxG,EAAE,CAACwG,OAA/M;AAAA,cAAwNkJ,2BAA2B,GAAG1P,EAAE,CAAC0P,2BAAzP;AACA,cAAIyM,gBAAgB,GAAG9Q,SAAS,CAACiC,aAAjC;AACAjC,mBAAS,CAACmI,IAAVnI,CAAe;AACXtJ,oBAAQ,EAAEJ,KADC;AAEXnC,qBAAS,EAAEA,SAFA;AAGX8N,yBAAa,EAAEA;AAHJ,WAAfjC;;AAKA,cAAI+Q,SAAS,GAAG,SAAZA,SAAY,GAAY;AAAE,mBAAO/Q,SAAS,CAACwC,OAAVxC,CAAkB7L,SAAlB6L,CAAP;AAA9B;;AACA,cAAIgR,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAUlU,IAAV,EAAgBmF,aAAhB,EAA+B;AAClD,gBAAIA,aAAa,KAAK,KAAK,CAA3B,EAA8B;AAAEA,2BAAa,GAAGjC,SAAS,CAACiC,aAAVjC,IAA2BkC,qEAA3CD;AAAmE;;AACnG,gBAAIzG,IAAI,GAAGsB,IAAI,CAAC7C,MAAhB;;AACA,gBAAI1J,OAAO,IACP,CAACyM,iBADDzM,IAEA,CAACmS,sDAAMlH,IAANkH,EAAY,EAAZA,CAFL,EAEsB;AAClBG,2FAAsB/F,IAAI,CAACgG,OAA3BD;AACH;;AACD,gBAAIoO,QAAQ,GAAG,SAAXA,QAAW,CAAUzV,IAAV,EAAgB;AAAE,qBAAOyL,gEAAc3Y,iDAAS;AAAEkN,oBAAI,EAAEA,IAAR;AAAc2G,uBAAO,EAAEC,8EAAyBH,aAAzBG,CAAvB;AAAgEH,6BAAa,EAAEA;AAA/E,eAAT3T,EAA0GwO,IAAI,CAAC2F,QAAL3F,GAAgB,IAAhBA,GAAuB;AAAE6F,uBAAO,EAAE;AAAX,eAAjIrU,CAAd2Y,CAAP;AAAjC;;AACA,gBAAIzL,IAAI,IAAI1L,KAAK,CAACwS,SAANxS,CAAgBwG,KAAhBxG,EAAuByS,kBAAnC,EAAuD;AACnD,qBAAOzS,KAAK,CAACuH,UAANvH,CAAiBmL,YAAjBnL,CAA8B;AACjC4G,wBAAQ,EAAEJ,KADuB;AAEjC4E,4BAAY,EAAE;AAAEM,sBAAI,EAAEA;AAAR,iBAFmB;AAGjCL,uBAAO,EAAEA,OAHwB;AAIjChH,yBAAS,EAAEA,SAJsB;AAKjCiH,sCAAsB,EAAE;AALS,eAA9BtL,EAMJwJ,IANIxJ,CAMC,UAAUohB,QAAV,EAAoB;AAAE,uBAAOD,QAAQ,CAACC,QAAQ,CAAC1V,IAAT0V,IAAiB,KAAK,CAAvB,CAAf;AANvB,gBAAP;AAOH;;AACD,mBAAOD,QAAQ,CAACzV,IAAD,CAAf;AAlBJ;;AAoBA,cAAIoO,kBAAkB,GAAGtR,WAAW,KAAK,UAAhBA,GAA6B,CAA7BA,GACpB2J,aAAa,KAAKC,qEAAlBD,IACG4O,kBAAkB,KAAK,OAD1B5O,GACqC,CADrCA,GAEK,CAHV;;AAIA,cAAIkP,eAAe,GAAG,SAAlBA,eAAkB,GAAY;AAC9B,mBAAOrhB,KAAK,CAACmgB,kBAANngB,CAAyBkQ,SAAzBlQ,EAAoC8Z,kBAApC9Z,EAAwD;AAC3DqE,uBAAS,EAAEA,SADgD;AAE3DgH,qBAAO,EAAEA,OAFkD;AAG3D7C,yBAAW,EAAEA,WAH8C;AAI3DwR,yBAAW,EAAEA;AAJ8C,aAAxDha,CAAP;AADJ;;AAQA,cAAImZ,YAAY,GAAG5E,2BAA2B,IAC1C,OAAOyM,gBAAP,KAA4B,QADbzM,IAEfyM,gBAAgB,KAAK7O,aAFNoC,IAGfjC,8EAAyBH,aAAzBG,CAHJ;;AAIA,kBAAQ9J,WAAR;AACI;AACA,iBAAK,aAAL;AAAoB;AAChB,oBAAIwE,IAAI,GAAGiU,SAAS,EAApB;;AACA,oBAAIjU,IAAI,CAAC2F,QAAT,EAAmB;AACf,yBAAO,CACHuO,gBAAgB,CAAClU,IAAD,EAAOkD,SAAS,CAACkK,SAAVlK,EAAP,CADb,CAAP;AAGH;;AACD,oBAAIhD,iBAAiB,IAAIiM,YAAzB,EAAuC;AACnC,yBAAO,CACH+H,gBAAgB,CAAClU,IAAD,CADb,EAEHqU,eAAe,EAFZ,CAAP;AAIH;;AACD,uBAAO,CACHA,eAAe,EADZ,CAAP;AAGH;;AACD,iBAAK,mBAAL;AAA0B;AACtB,oBAAIrU,IAAI,GAAGiU,SAAS,EAApB;;AACA,oBAAIjU,IAAI,CAAC2F,QAAL3F,IAAiBE,iBAAjBF,IAAsCmM,YAA1C,EAAwD;AACpD,yBAAO,CACH+H,gBAAgB,CAAClU,IAAD,CADb,EAEHqU,eAAe,EAFZ,CAAP;AAIH;;AACD,uBAAO,CACHA,eAAe,EADZ,CAAP;AAGH;;AACD,iBAAK,YAAL;AACI,qBAAO,CACHH,gBAAgB,CAACD,SAAS,EAAV,EAAc/Q,SAAS,CAACkK,SAAVlK,EAAd,CADb,CAAP;;AAGJ,iBAAK,cAAL;AACI,kBAAIiJ,YAAJ,EAAkB;AACd,uBAAO,CACH+H,gBAAgB,CAACD,SAAS,EAAV,CADb,EAEHI,eAAe,EAFZ,CAAP;AAIH;;AACD,qBAAO,CAACA,eAAe,EAAhB,CAAP;;AACJ,iBAAK,UAAL;AACI,kBAAIlI,YAAJ,EAAkB;AACd,uBAAO,CACH+H,gBAAgB,CAAChR,SAAS,CAACwC,OAAVxC,EAAD,CADb,EAEHmR,eAAe,EAFZ,CAAP;AAIH;;AACD,qBAAO,CAACA,eAAe,EAAhB,CAAP;;AACJ,iBAAK,SAAL;AACI,qBAAO,EAAP;AApDR;AA9CJ;;AAqGA1Z,oBAAY,CAACjI,SAAbiI,CAAuByX,QAAvBzX,GAAkC,UAAUuJ,OAAV,EAAmB;AACjD,cAAIA,OAAO,IAAI,CAAC,KAAKjJ,OAAL,CAAarI,GAAb,CAAiBsR,OAAjB,CAAhB,EAA2C;AACvC,iBAAKjJ,OAAL,CAAalI,GAAb,CAAiBmR,OAAjB,EAA0B,IAAI+G,oDAAJ,CAAc,IAAd,EAAoB/G,OAApB,CAA1B;AACH;;AACD,iBAAO,KAAKjJ,OAAL,CAAa/H,GAAb,CAAiBgR,OAAjB,CAAP;AAJJ;;AAMAvJ,oBAAY,CAACjI,SAAbiI,CAAuBsE,cAAvBtE,GAAwC,UAAU0D,OAAV,EAAmB;AACvD,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,EAAVA;AAAe;;AACzC,cAAIiW,UAAU,GAAG,KAAK/Z,UAAL,CAAgB0E,cAAhB,CAA+BZ,OAA/B,CAAjB;AACA,iBAAO7M,iDAASA,iDAAS,EAATA,EAAa8iB,UAAb9iB,CAATA,EAAmC;AAAEoJ,2BAAe,EAAE,KAAKA;AAAxB,WAAnCpJ,CAAP;AAHJ;;AAKA,eAAOmJ,YAAP;AAnzBgB,SAApB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZO,UAAIyK,cAAa;AACxB,SAAC,UAAUA,aAAV,EAAyB;AACtBA,uBAAa,CAACA,aAAa,CAAC,SAAD,CAAbA,GAA2B,CAA5B,CAAbA,GAA8C,SAA9CA;AACAA,uBAAa,CAACA,aAAa,CAAC,cAAD,CAAbA,GAAgC,CAAjC,CAAbA,GAAmD,cAAnDA;AACAA,uBAAa,CAACA,aAAa,CAAC,WAAD,CAAbA,GAA6B,CAA9B,CAAbA,GAAgD,WAAhDA;AACAA,uBAAa,CAACA,aAAa,CAAC,SAAD,CAAbA,GAA2B,CAA5B,CAAbA,GAA8C,SAA9CA;AACAA,uBAAa,CAACA,aAAa,CAAC,MAAD,CAAbA,GAAwB,CAAzB,CAAbA,GAA2C,MAA3CA;AACAA,uBAAa,CAACA,aAAa,CAAC,OAAD,CAAbA,GAAyB,CAA1B,CAAbA,GAA4C,OAA5CA;AACAA,uBAAa,CAACA,aAAa,CAAC,OAAD,CAAbA,GAAyB,CAA1B,CAAbA,GAA4C,OAA5CA;AAPJ,WAQGA,cAAa,KAAKA,cAAa,GAAG,EAArB,CARhB;;AADwB,eAAbA,cAAa;AAAA,SAAjB;;AAUA,eAASE,yBAAT,CAAkCH,aAAlC,EAAiD;AACpD,eAAOA,aAAa,GAAGA,aAAa,GAAG,CAAnB,GAAuB,KAA3C;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTM,eAASoO,cAAT,CAAuBvL,GAAvB,EAA4B;AAC/B,eAAOA,GAAG,CAACnF,cAAJmF,CAAmB,eAAnBA,CAAP;AACH;;AACD,UAAIuM,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAUvM,GAAV,EAAe;AACtC,YAAIqC,OAAO,GAAG,EAAd;;AACA,YAAIjB,sEAAgBpB,GAAG,CAACgC,aAApBZ,KAAsCA,sEAAgBpB,GAAG,CAACwM,YAApBpL,CAA1C,EAA6E;AACzE,cAAIC,MAAM,GAAG,CAACrB,GAAG,CAACgC,aAAJhC,IAAqB,EAAtB,EACRyM,MADQ,CACDzM,GAAG,CAACwM,YAAJxM,IAAoB,EADnB,CAAb;AAEAqB,gBAAM,CAACjV,OAAPiV,CAAe,UAAUhM,KAAV,EAAiB;AAC5B,gBAAIqX,YAAY,GAAGrX,KAAK,GAClBA,KAAK,CAACgN,OADY,GAElB,0BAFN;AAGAA,mBAAO,IAAIqK,YAAY,GAAG,IAA1BrK;AAJJ;AAMH;;AACD,YAAIrC,GAAG,CAACuD,YAAR,EAAsB;AAClBlB,iBAAO,IAAIrC,GAAG,CAACuD,YAAJvD,CAAiBqC,OAAjBrC,GAA2B,IAAtCqC;AACH;;AACDA,eAAO,GAAGA,OAAO,CAACsK,OAARtK,CAAgB,KAAhBA,EAAuB,EAAvBA,CAAVA;AACA,eAAOA,OAAP;AAhBJ;;AAkBA,UAAIgF,YAAW,GAAI,UAAUrM,MAAV,EAAkB;AACjCC,0DAAUoM,WAAVpM,EAAuBD,MAAvBC;;AACA,iBAASoM,WAAT,CAAqBxX,EAArB,EAAyB;AACrB,cAAImS,aAAa,GAAGnS,EAAE,CAACmS,aAAvB;AAAA,cAAsCwK,YAAY,GAAG3c,EAAE,CAAC2c,YAAxD;AAAA,cAAsEjJ,YAAY,GAAG1T,EAAE,CAAC0T,YAAxF;AAAA,cAAsGmJ,YAAY,GAAG7c,EAAE,CAAC6c,YAAxH;AAAA,cAAsIE,SAAS,GAAG/c,EAAE,CAAC+c,SAArJ;;AACA,cAAI5hB,KAAK,GAAGgQ,MAAM,CAACG,IAAPH,CAAY,IAAZA,EAAkB0R,YAAlB1R,KAAmC,IAA/C;;AACAhQ,eAAK,CAACgX,aAANhX,GAAsBgX,aAAa,IAAI,EAAvChX;AACAA,eAAK,CAACwhB,YAANxhB,GAAqBwhB,YAAY,IAAI,EAArCxhB;AACAA,eAAK,CAACuY,YAANvY,GAAqBuY,YAAY,IAAI,IAArCvY;AACAA,eAAK,CAACqX,OAANrX,GAAgB0hB,YAAY,IAAIH,oBAAoB,CAACvhB,KAAD,CAApDA;AACAA,eAAK,CAAC4hB,SAAN5hB,GAAkB4hB,SAAlB5hB;AACAA,eAAK,CAACvB,SAANuB,GAAkBqc,WAAW,CAAC3c,SAA9BM;AACA,iBAAOA,KAAP;AACH;;AACD,eAAOqc,WAAP;AAbe,QAcjBwF,KAdiB,CAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBA,eAASC,WAAT,CAAqBC,EAArB,EAAyBC,OAAzB,EAAkC;AAC9B,eAAQA,OAAO,GAAGA,OAAO,CAACD,EAAD,CAAV,GAAiB5K,gEAAhC;AACH;;AACD,eAAS8K,MAAT,CAAgBC,OAAhB,EAAyB;AACrB,eAAO,OAAOA,OAAP,KAAmB,UAAnB,GAAgC,IAAIhc,WAAJ,CAAegc,OAAf,CAAhC,GAA0DA,OAAjE;AACH;;AACD,eAASC,aAAT,CAAuBnc,IAAvB,EAA6B;AACzB,eAAOA,IAAI,CAACoc,OAALpc,CAAa9E,MAAb8E,IAAuB,CAA9B;AACH;;AACD,UAAIqc,SAAS,GAAI,UAAUrS,MAAV,EAAkB;AAC/BC,0DAAUoS,SAAVpS,EAAqBD,MAArBC;;AACA,iBAASoS,SAAT,CAAmBhL,OAAnB,EAA4BrR,IAA5B,EAAkC;AAC9B,cAAIhG,KAAK,GAAGgQ,MAAM,CAACG,IAAPH,CAAY,IAAZA,EAAkBqH,OAAlBrH,KAA8B,IAA1C;;AACAhQ,eAAK,CAACgG,IAANhG,GAAagG,IAAbhG;AACA,iBAAOA,KAAP;AACH;;AACD,eAAOqiB,SAAP;AAPa,QAQfR,KARe,CAAjB;;AASA,UAAI3b,WAAU,GAAI,YAAY;AAC1B,iBAASA,UAAT,CAAoBkc,OAApB,EAA6B;AACzB,cAAIA,OAAJ,EACI,KAAKA,OAAL,GAAeA,OAAf;AACP;;AACDlc,kBAAU,CAAC1G,KAAX0G,GAAmB,YAAY;AAC3B,iBAAO,IAAIA,UAAJ,CAAe,YAAY;AAAE,mBAAOiR,gEAAP;AAA7B,YAAP;AADJ;;AAGAjR,kBAAU,CAACzC,IAAXyC,GAAkB,UAAUoc,KAAV,EAAiB;AAC/B,cAAIA,KAAK,CAACphB,MAANohB,KAAiB,CAArB,EACI,OAAOpc,UAAU,CAAC1G,KAAX0G,EAAP;AACJ,iBAAOoc,KAAK,CAACjiB,GAANiiB,CAAUL,MAAVK,EAAkBC,MAAlBD,CAAyB,UAAUE,CAAV,EAAaC,CAAb,EAAgB;AAAE,mBAAOD,CAAC,CAACf,MAAFe,CAASC,CAATD,CAAP;AAA3C,YAAP;AAHJ;;AAKAtc,kBAAU,CAACwc,KAAXxc,GAAmB,UAAUyc,IAAV,EAAgBC,IAAhB,EAAsBC,KAAtB,EAA6B;AAC5C,cAAIC,QAAQ,GAAGb,MAAM,CAACW,IAAD,CAArB;AACA,cAAIG,SAAS,GAAGd,MAAM,CAACY,KAAK,IAAI,IAAI3c,UAAJ,CAAe4b,WAAf,CAAV,CAAtB;;AACA,cAAIK,aAAa,CAACW,QAAD,CAAbX,IAA2BA,aAAa,CAACY,SAAD,CAA5C,EAAyD;AACrD,mBAAO,IAAI7c,UAAJ,CAAe,UAAU2H,SAAV,EAAqB;AACvC,qBAAO8U,IAAI,CAAC9U,SAAD,CAAJ8U,GACDG,QAAQ,CAACV,OAATU,CAAiBjV,SAAjBiV,KAA+B3L,gEAD9BwL,GAEDI,SAAS,CAACX,OAAVW,CAAkBlV,SAAlBkV,KAAgC5L,gEAFtC;AADG,cAAP;AADJ,iBAOK;AACD,mBAAO,IAAIjR,UAAJ,CAAe,UAAU2H,SAAV,EAAqBmU,OAArB,EAA8B;AAChD,qBAAOW,IAAI,CAAC9U,SAAD,CAAJ8U,GACDG,QAAQ,CAACV,OAATU,CAAiBjV,SAAjBiV,EAA4Bd,OAA5Bc,KAAwC3L,gEADvCwL,GAEDI,SAAS,CAACX,OAAVW,CAAkBlV,SAAlBkV,EAA6Bf,OAA7Be,KAAyC5L,gEAF/C;AADG,cAAP;AAKH;AAhBL;;AAkBAjR,kBAAU,CAACmD,OAAXnD,GAAqB,UAAUF,IAAV,EAAgB6H,SAAhB,EAA2B;AAC5C,iBAAQ7H,IAAI,CAACoc,OAALpc,CAAagd,kEAAgBnV,SAAS,CAACxC,OAA1B2X,EAAmCC,qEAAmBC,oEAAkBrV,SAAlBqV,CAAnBD,CAAnCD,CAAbhd,KAAsGmR,gEAA9G;AADJ;;AAGAjR,kBAAU,CAACub,MAAXvb,GAAoB,UAAUuK,KAAV,EAAiB0S,MAAjB,EAAyB;AACzC,cAAIC,SAAS,GAAGnB,MAAM,CAACxR,KAAD,CAAtB;;AACA,cAAI0R,aAAa,CAACiB,SAAD,CAAjB,EAA8B;AAC1B3iB,mBAAO,IAAI6G,wEAAe,IAAI+a,SAAJ,CAAc,yEAAd,EAAyFe,SAAzF,CAAf9b,CAAX7G;AACA,mBAAO2iB,SAAP;AACH;;AACD,cAAIC,QAAQ,GAAGpB,MAAM,CAACkB,MAAD,CAArB;;AACA,cAAIhB,aAAa,CAACkB,QAAD,CAAjB,EAA6B;AACzB,mBAAO,IAAInd,UAAJ,CAAe,UAAU2H,SAAV,EAAqB;AACvC,qBAAOuV,SAAS,CAAChB,OAAVgB,CAAkBvV,SAAlBuV,EAA6B,UAAUrB,EAAV,EAAc;AAAE,uBAAOsB,QAAQ,CAACjB,OAATiB,CAAiBtB,EAAjBsB,KAAwBlM,gEAA/B;AAA7C,oBAAmGA,gEAA1G;AADG,cAAP;AADJ,iBAKK;AACD,mBAAO,IAAIjR,UAAJ,CAAe,UAAU2H,SAAV,EAAqBmU,OAArB,EAA8B;AAChD,qBAAQoB,SAAS,CAAChB,OAAVgB,CAAkBvV,SAAlBuV,EAA6B,UAAUrB,EAAV,EAAc;AAC/C,uBAAOsB,QAAQ,CAACjB,OAATiB,CAAiBtB,EAAjBsB,EAAqBrB,OAArBqB,KAAiClM,gEAAxC;AADI,oBAEFA,gEAFN;AADG,cAAP;AAKH;AAlBL;;AAoBAjR,kBAAU,CAACxG,SAAXwG,CAAqBwc,KAArBxc,GAA6B,UAAUyc,IAAV,EAAgBC,IAAhB,EAAsBC,KAAtB,EAA6B;AACtD,iBAAO,KAAKpB,MAAL,CAAYvb,UAAU,CAACwc,KAAXxc,CAAiByc,IAAjBzc,EAAuB0c,IAAvB1c,EAA6B2c,KAAK,IAAI,IAAI3c,UAAJ,CAAe4b,WAAf,CAAtC5b,CAAZ,CAAP;AADJ;;AAGAA,kBAAU,CAACxG,SAAXwG,CAAqBub,MAArBvb,GAA8B,UAAU2K,IAAV,EAAgB;AAC1C,iBAAO3K,UAAU,CAACub,MAAXvb,CAAkB,IAAlBA,EAAwB2K,IAAxB3K,CAAP;AADJ;;AAGAA,kBAAU,CAACxG,SAAXwG,CAAqBkc,OAArBlc,GAA+B,UAAU2H,SAAV,EAAqBmU,OAArB,EAA8B;AACzD,gBAAMvhB,OAAO,GAAG,IAAI0F,uEAAJ,CAAmB,4BAAnB,CAAH,GAAsD,IAAIA,uEAAJ,CAAmB,EAAnB,CAAnE;AADJ;;AAGAD,kBAAU,CAACxG,SAAXwG,CAAqB+O,OAArB/O,GAA+B,UAAUmE,KAAV,EAAiB+F,QAAjB,EAA2B;AACtD,cAAIA,QAAQ,IAAIA,QAAQ,CAAC/F,KAAzB,EAAgC;AAC5B+F,oBAAQ,CAAC/F,KAAT+F,CAAe/F,KAAf+F;AACA,mBAAO,KAAP;AACH;;AACD,gBAAM/F,KAAN;AALJ;;AAOAnE,kBAAU,CAACxG,SAAXwG,CAAqBod,UAArBpd,GAAkC,UAAUyD,EAAV,EAAc;AAC5C,eAAKsL,OAAL,GAAetL,EAAf;AACA,iBAAO,IAAP;AAFJ;;AAIA,eAAOzD,UAAP;AA1Ec,SAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBO,UAAImD,QAAO,GAAGnD,8DAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEP,UAAID,SAAQ,GAAI,UAAU+J,MAAV,EAAkB;AAC9BC,0DAAUhK,QAAVgK,EAAoBD,MAApBC;;AACA,iBAAShK,QAAT,CAAkB9B,OAAlB,EAA2B;AACvB,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAG,EAAVA;AAAe;;AACzC,cAAInE,KAAK,GAAGgQ,MAAM,CAACG,IAAPH,CAAY,IAAZA,EAAkBuT,oEAAepf,OAAfof,EAAwBnB,OAA1CpS,KAAsD,IAAlE;;AACAhQ,eAAK,CAACmE,OAANnE,GAAgBmE,OAAhBnE;AACA,iBAAOA,KAAP;AACH;;AACD,eAAOiG,QAAP;AARY,QASdC,sDATc,CAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFO,UAAIsd,aAAY,GAAG,SAAfA,aAAe,CAAUC,OAAV,EAAmB;AACzC,YAAI,CAACA,OAAD,IAAY,OAAOhO,KAAP,KAAiB,WAAjC,EAA8C;AAC1C,gBAAMhV,OAAO,GAAG,IAAI0F,uEAAJ,CAAmB,obAAnB,CAAH,GAA8c,IAAIA,uEAAJ,CAAmB,EAAnB,CAA3d;AACH;AAHE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACaP,UAAIud,WAAW,GAAGC,oEAAM,YAAY;AAAE,eAAOlO,KAAP;AAAf,OAALkO,CAAlB;;AACO,UAAIJ,eAAc,GAAG,SAAjBA,eAAiB,CAAUK,WAAV,EAAuB;AAC/C,YAAIA,WAAW,KAAK,KAAK,CAAzB,EAA4B;AAAEA,qBAAW,GAAG,EAAdA;AAAmB;;AACjD,YAAI/e,EAAE,GAAG+e,WAAW,CAAClf,GAArB;AAAA,YAA0BA,GAAG,GAAGG,EAAE,KAAK,KAAK,CAAZA,GAAgB,UAAhBA,GAA6BA,EAA7D;AAAA,YAAiEgf,cAAc,GAAGD,WAAW,CAACnO,KAA9F;AAAA,YAAqGqO,iBAAiB,GAAGF,WAAW,CAACE,iBAArI;AAAA,YAAwJC,gBAAgB,GAAGH,WAAW,CAACG,gBAAvL;AAAA,YAAyMhf,EAAE,GAAG6e,WAAW,CAACI,sBAA1N;AAAA,YAAkPA,sBAAsB,GAAGjf,EAAE,KAAK,KAAK,CAAZA,GAAgB,KAAhBA,GAAwBA,EAAnS;AAAA,YAAuSkf,cAAc,GAAGC,+CAAON,WAAPM,EAAoB,CAAC,KAAD,EAAQ,OAAR,EAAiB,mBAAjB,EAAsC,kBAAtC,EAA0D,wBAA1D,CAApBA,CAAxT;;AACA,YAAIzjB,OAAJ,EAAa;AACT+iB,0EAAaK,cAAc,IAAIH,WAA/BF;AACH;;AACD,YAAIW,UAAU,GAAG;AACbC,cAAI,EAAE;AAAEN,6BAAiB,EAAEA;AAArB,WADO;AAEb3f,iBAAO,EAAE8f,cAAc,CAACI,YAFX;AAGb1f,qBAAW,EAAEsf,cAAc,CAACtf,WAHf;AAIbC,iBAAO,EAAEqf,cAAc,CAACrf;AAJX,SAAjB;AAMA,eAAO,IAAIsB,sDAAJ,CAAe,UAAU2H,SAAV,EAAqB;AACvC,cAAIyW,SAAS,GAAGC,0DAAU1W,SAAV0W,EAAqB7f,GAArB6f,CAAhB;AACA,cAAIlZ,OAAO,GAAGwC,SAAS,CAAC2W,UAAV3W,EAAd;AACA,cAAI4W,sBAAsB,GAAG,EAA7B;;AACA,cAAIpZ,OAAO,CAACzD,eAAZ,EAA6B;AACzB,gBAAI/C,EAAE,GAAGwG,OAAO,CAACzD,eAAjB;AAAA,gBAAkC8c,MAAM,GAAG7f,EAAE,CAACgB,IAA9C;AAAA,gBAAoDE,OAAO,GAAGlB,EAAE,CAACkB,OAAjE;;AACA,gBAAI2e,MAAJ,EAAY;AACRD,oCAAsB,CAAC,2BAAD,CAAtBA,GAAsDC,MAAtDD;AACH;;AACD,gBAAI1e,OAAJ,EAAa;AACT0e,oCAAsB,CAAC,8BAAD,CAAtBA,GAAyD1e,OAAzD0e;AACH;AACJ;;AACD,cAAIE,cAAc,GAAGnmB,iDAASA,iDAAS,EAATA,EAAaimB,sBAAbjmB,CAATA,EAA+C6M,OAAO,CAACzG,OAAvDpG,CAArB;AACA,cAAIomB,aAAa,GAAG;AAChBR,gBAAI,EAAE/Y,OAAO,CAAC+Y,IADE;AAEhBjgB,mBAAO,EAAEkH,OAAO,CAACgZ,YAFD;AAGhB1f,uBAAW,EAAE0G,OAAO,CAAC1G,WAHL;AAIhBC,mBAAO,EAAE+f;AAJO,WAApB;;AAMA,cAAI5f,EAAE,GAAG8f,wFAAyBhX,SAAzBgX,EAAoCC,4EAApCD,EAAwDV,UAAxDU,EAAoED,aAApEC,CAAT;AAAA,cAA6F1gB,OAAO,GAAGY,EAAE,CAACZ,OAA1G;AAAA,cAAmH4gB,IAAI,GAAGhgB,EAAE,CAACggB,IAA7H;;AACA,cAAIA,IAAI,CAAC1gB,SAAL0gB,IAAkB,CAACf,sBAAvB,EAA+C;AAC3C,gBAAIgB,aAAa,GAAG,IAAIhmB,GAAJ,CAAQN,MAAM,CAACmC,IAAPnC,CAAYqmB,IAAI,CAAC1gB,SAAjB3F,CAAR,CAApB;AACA+N,4DAAMoB,SAAS,CAACrH,KAAhBiG,EAAuB;AACnBwY,sBAAQ,EAAE,kBAAU3kB,IAAV,EAAgB4kB,IAAhB,EAAsBC,MAAtB,EAA8B;AACpC,oBAAIA,MAAM,IAAIA,MAAM,CAACrY,IAAPqY,KAAgB,oBAA9B,EAAoD;AAChDH,+BAAa,UAAbA,CAAqB1kB,IAAI,CAACuF,IAALvF,CAAUnC,KAA/B6mB;AACH;AACJ;AALkB,aAAvBvY;;AAOA,gBAAIuY,aAAa,CAACrU,IAAlB,EAAwB;AACpBoU,kBAAI,CAAC1gB,SAAL0gB,GAAiBvmB,iDAAS,EAATA,EAAaumB,IAAI,CAAC1gB,SAAlB7F,CAAjBumB;AACAC,2BAAa,CAAC5jB,OAAd4jB,CAAsB,UAAUnf,IAAV,EAAgB;AAClC,uBAAOkf,IAAI,CAAC1gB,SAAL0gB,CAAelf,IAAfkf,CAAP;AADJ;AAGH;AACJ;;AACD,cAAIK,UAAJ;;AACA,cAAI,CAACjhB,OAAO,CAACkhB,MAAb,EAAqB;AACjB,gBAAIpgB,EAAE,GAAGqgB,uFAAT;AAAA,gBAAoCC,WAAW,GAAGtgB,EAAE,CAACmgB,UAArD;AAAA,gBAAiEC,MAAM,GAAGpgB,EAAE,CAACogB,MAA7E;;AACAD,sBAAU,GAAGG,WAAbH;AACA,gBAAIA,UAAJ,EACIjhB,OAAO,CAACkhB,MAARlhB,GAAiBkhB,MAAjBlhB;AACP;;AACD,cAAIqhB,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAUC,CAAV,EAAa;AACpC,mBAAOA,CAAC,CAAC3Y,IAAF2Y,KAAW,qBAAXA,IAAoCA,CAAC,CAAC5X,SAAF4X,KAAgB,UAA3D;AADJ;;AAGA,cAAI1B,gBAAgB,IAChB,CAAClW,SAAS,CAACrH,KAAVqH,CAAgByQ,WAAhBzQ,CAA4BjB,IAA5BiB,CAAiC2X,oBAAjC3X,CADL,EAC6D;AACzD1J,mBAAO,CAACuhB,MAARvhB,GAAiB,KAAjBA;AACH;;AACD,cAAIA,OAAO,CAACuhB,MAARvhB,KAAmB,KAAvB,EAA8B;AAC1B,gBAAIkB,EAAE,GAAGsgB,wEAAiBrB,SAAjBqB,EAA4BZ,IAA5BY,CAAT;AAAA,gBAA4CC,MAAM,GAAGvgB,EAAE,CAACugB,MAAxD;AAAA,gBAAgEC,UAAU,GAAGxgB,EAAE,CAACwgB,UAAhF;;AACA,gBAAIA,UAAJ,EAAgB;AACZ,qBAAOC,4DAAUD,UAAVC,CAAP;AACH;;AACDxB,qBAAS,GAAGsB,MAAZtB;AALJ,iBAOK;AACD,gBAAI;AACAngB,qBAAO,CAAC4gB,IAAR5gB,GAAe4hB,uFAAwBhB,IAAxBgB,EAA8B,SAA9BA,CAAf5hB;AADJ,cAGA,OAAO0hB,UAAP,EAAmB;AACf,qBAAOC,4DAAUD,UAAVC,CAAP;AACH;AACJ;;AACD,iBAAO,IAAI3O,4DAAJ,CAAe,UAAU/G,QAAV,EAAoB;AACtC,gBAAI4V,YAAY,GAAGnC,cAAc,IAAIF,oEAAM,YAAY;AAAE,qBAAOlO,KAAP;AAAf,aAALkO,CAAlBE,IAA0DH,WAA7E;AACAsC,wBAAY,CAAC1B,SAAD,EAAYngB,OAAZ,CAAZ6hB,CACKxc,IADLwc,CACU,UAAUC,QAAV,EAAoB;AAC1BpY,uBAAS,CAACqY,UAAVrY,CAAqB;AAAEoY,wBAAQ,EAAEA;AAAZ,eAArBpY;AACA,qBAAOoY,QAAP;AAHJ,eAKKzc,IALLwc,CAKUG,2FAA0BtY,SAA1BsY,CALVH,EAMKxc,IANLwc,CAMU,UAAU7b,MAAV,EAAkB;AACxBiG,sBAAQ,CAACS,IAATT,CAAcjG,MAAdiG;AACAA,sBAAQ,CAACuC,QAATvC;AACA,qBAAOjG,MAAP;AATJ,wBAWW,UAAU6K,GAAV,EAAe;AACtB,kBAAIA,GAAG,CAACnP,IAAJmP,KAAa,YAAjB,EACI;;AACJ,kBAAIA,GAAG,CAAC7K,MAAJ6K,IAAcA,GAAG,CAAC7K,MAAJ6K,CAAWqB,MAAzBrB,IAAmCA,GAAG,CAAC7K,MAAJ6K,CAAWtJ,IAAlD,EAAwD;AACpD0E,wBAAQ,CAACS,IAATT,CAAc4E,GAAG,CAAC7K,MAAlBiG;AACH;;AACDA,sBAAQ,CAAC/F,KAAT+F,CAAe4E,GAAf5E;AAjBJ;AAmBA,mBAAO,YAAY;AACf,kBAAIgV,UAAJ,EACIA,UAAU,CAACgB,KAAXhB;AAFR;AArBG,YAAP;AAlEG,UAAP;AAZG;;;;;;;;;;;;;;;;;;;;;;;ACfA,UAAIE,wBAAuB,GAAG,SAA1BA,wBAA0B,GAAY;AAC7C,YAAI,OAAOe,eAAP,KAA2B,WAA/B,EACI,OAAO;AAAEjB,oBAAU,EAAE,KAAd;AAAqBC,gBAAM,EAAE;AAA7B,SAAP;AACJ,YAAID,UAAU,GAAG,IAAIiB,eAAJ,EAAjB;AACA,YAAIhB,MAAM,GAAGD,UAAU,CAACC,MAAxB;AACA,eAAO;AAAED,oBAAU,EAAEA,UAAd;AAA0BC,gBAAM,EAAEA;AAAlC,SAAP;AALG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCP,UAAIxV,cAAc,GAAGnR,MAAM,CAACgB,SAAPhB,CAAiBmR,cAAtC;;AACO,eAASsW,0BAAT,CAAmCG,UAAnC,EAA+C;AAClD,eAAO,UAAUL,QAAV,EAAoB;AAAE,iBAAOA,QAAQ,CACvCM,IAD+BN,GAE/Bzc,IAF+Byc,CAE1B,UAAUO,QAAV,EAAoB;AAC1B,gBAAI;AACA,qBAAO5kB,IAAI,CAAC6kB,KAAL7kB,CAAW4kB,QAAX5kB,CAAP;AADJ,cAGA,OAAOoT,GAAP,EAAY;AACR,kBAAI6Q,UAAU,GAAG7Q,GAAjB;AACA6Q,wBAAU,CAAChgB,IAAXggB,GAAkB,kBAAlBA;AACAA,wBAAU,CAACI,QAAXJ,GAAsBI,QAAtBJ;AACAA,wBAAU,CAACa,UAAXb,GAAwBI,QAAQ,CAACU,MAAjCd;AACAA,wBAAU,CAACW,QAAXX,GAAsBW,QAAtBX;AACA,oBAAMA,UAAN;AACH;AAb+B,aAe/Brc,IAf+Byc,CAe1B,UAAU9b,MAAV,EAAkB;AACxB,gBAAI8b,QAAQ,CAACU,MAATV,IAAmB,GAAvB,EAA4B;AACxBW,iFAAiBX,QAAjBW,EAA2Bzc,MAA3Byc,EAAmC,mDAAmDX,QAAQ,CAACU,MAA/FC;AACH;;AACD,gBAAI,CAACvoB,KAAK,CAACC,OAAND,CAAc8L,MAAd9L,CAAD,IACA,CAACwR,cAAc,CAACM,IAAfN,CAAoB1F,MAApB0F,EAA4B,MAA5BA,CADD,IAEA,CAACA,cAAc,CAACM,IAAfN,CAAoB1F,MAApB0F,EAA4B,QAA5BA,CAFL,EAE4C;AACxC+W,iFAAiBX,QAAjBW,EAA2Bzc,MAA3Byc,EAAmC,6CAA6CvoB,KAAK,CAACC,OAAND,CAAcioB,UAAdjoB,IAC1EioB,UAAU,CAACjmB,GAAXimB,CAAe,UAAUvE,EAAV,EAAc;AAAE,uBAAOA,EAAE,CAAClC,aAAV;AAA/B,gBAD0ExhB,GAE1EioB,UAAU,CAACzG,aAFkB,IAED,IAFlC+G;AAGH;;AACD,mBAAOzc,MAAP;AA1BgC,YAAP;AAA7B;AA4BH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BM,eAASwb,iBAAT,CAA0BrB,SAA1B,EAAqCS,IAArC,EAA2C;AAC9C,YAAI8B,WAAW,GAAG,EAAlB;;AACA,YAAIC,aAAa,GAAG,SAAhBA,aAAgB,CAAUzlB,GAAV,EAAelD,KAAf,EAAsB;AACtC0oB,qBAAW,CAAC9lB,IAAZ8lB,CAAiBxlB,GAAG,GAAG,GAANA,GAAY0lB,kBAAkB,CAAC5oB,KAAD,CAA/C0oB;AADJ;;AAGA,YAAI,WAAW9B,IAAf,EAAqB;AACjB+B,uBAAa,CAAC,OAAD,EAAU/B,IAAI,CAACve,KAAf,CAAbsgB;AACH;;AACD,YAAI/B,IAAI,CAAClF,aAAT,EAAwB;AACpBiH,uBAAa,CAAC,eAAD,EAAkB/B,IAAI,CAAClF,aAAvB,CAAbiH;AACH;;AACD,YAAI/B,IAAI,CAAC1gB,SAAT,EAAoB;AAChB,cAAI2iB,mBAAmB,GAAG,KAAK,CAA/B;;AACA,cAAI;AACAA,+BAAmB,GAAGjB,sFAAwBhB,IAAI,CAAC1gB,SAA7B0hB,EAAwC,eAAxCA,CAAtBiB;AADJ,YAGA,OAAOnB,UAAP,EAAmB;AACf,mBAAO;AAAEA,wBAAU,EAAEA;AAAd,aAAP;AACH;;AACDiB,uBAAa,CAAC,WAAD,EAAcE,mBAAd,CAAbF;AACH;;AACD,YAAI/B,IAAI,CAACkC,UAAT,EAAqB;AACjB,cAAIC,oBAAoB,GAAG,KAAK,CAAhC;;AACA,cAAI;AACAA,gCAAoB,GAAGnB,sFAAwBhB,IAAI,CAACkC,UAA7BlB,EAAyC,gBAAzCA,CAAvBmB;AADJ,YAGA,OAAOrB,UAAP,EAAmB;AACf,mBAAO;AAAEA,wBAAU,EAAEA;AAAd,aAAP;AACH;;AACDiB,uBAAa,CAAC,YAAD,EAAeI,oBAAf,CAAbJ;AACH;;AACD,YAAI1Y,QAAQ,GAAG,EAAf;AAAA,YAAmB+Y,WAAW,GAAG7C,SAAjC;AACA,YAAI8C,aAAa,GAAG9C,SAAS,CAACjd,OAAVid,CAAkB,GAAlBA,CAApB;;AACA,YAAI8C,aAAa,KAAK,CAAC,CAAvB,EAA0B;AACtBhZ,kBAAQ,GAAGkW,SAAS,CAAC+C,MAAV/C,CAAiB8C,aAAjB9C,CAAXlW;AACA+Y,qBAAW,GAAG7C,SAAS,CAAC+C,MAAV/C,CAAiB,CAAjBA,EAAoB8C,aAApB9C,CAAd6C;AACH;;AACD,YAAIG,iBAAiB,GAAGH,WAAW,CAAC9f,OAAZ8f,CAAoB,GAApBA,MAA6B,CAAC,CAA9BA,GAAkC,GAAlCA,GAAwC,GAAhE;AACA,YAAIvB,MAAM,GAAGuB,WAAW,GAAGG,iBAAdH,GAAkCN,WAAW,CAACpP,IAAZoP,CAAiB,GAAjBA,CAAlCM,GAA0D/Y,QAAvE;AACA,eAAO;AAAEwX,gBAAM,EAAEA;AAAV,SAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvCD,UAAI2B,kBAAkB,GAAG;AACrBC,oBAAY,EAAE,IADO;AAErB1D,yBAAiB,EAAE;AAFE,OAAzB;AAIA,UAAI2D,cAAc,GAAG;AACjBC,cAAM,EAAE,KADS;AAEjB,wBAAgB;AAFC,OAArB;AAIA,UAAInjB,cAAc,GAAG;AACjBmhB,cAAM,EAAE;AADS,OAArB;AAGO,UAAIZ,mBAAkB,GAAG;AAC5BV,YAAI,EAAEmD,kBADsB;AAE5B3iB,eAAO,EAAE6iB,cAFmB;AAG5BtjB,eAAO,EAAEI;AAHmB,OAAzB;;AAKA,UAAIsgB,yBAAwB,GAAG,SAA3BA,yBAA2B,CAAUhX,SAAV,EAAqB8Z,cAArB,EAAqC;AACvE,YAAIC,OAAO,GAAG,EAAd;;AACA,aAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGxkB,SAAS,CAACnC,MAAhC,EAAwC2mB,EAAE,EAA1C,EAA8C;AAC1CD,iBAAO,CAACC,EAAE,GAAG,CAAN,CAAPD,GAAkBvkB,SAAS,CAACwkB,EAAD,CAA3BD;AACH;;AACD,YAAIzjB,OAAO,GAAG3F,iDAASA,iDAAS,EAATA,EAAampB,cAAc,CAACxjB,OAA5B3F,CAATA,EAA+C;AAAEoG,iBAAO,EAAE+iB,cAAc,CAAC/iB,OAA1B;AAAmCD,qBAAW,EAAEgjB,cAAc,CAAChjB;AAA/D,SAA/CnG,CAAd;AACA,YAAI4lB,IAAI,GAAGuD,cAAc,CAACvD,IAAfuD,IAAuB,EAAlC;AACAC,eAAO,CAACxmB,OAARwmB,CAAgB,UAAUE,MAAV,EAAkB;AAC9B3jB,iBAAO,GAAG3F,iDAASA,iDAASA,iDAAS,EAATA,EAAa2F,OAAb3F,CAATA,EAAgCspB,MAAM,CAAC3jB,OAAvC3F,CAATA,EAA0D;AAAEoG,mBAAO,EAAEpG,iDAASA,iDAAS,EAATA,EAAa2F,OAAO,CAACS,OAArBpG,CAATA,EAAwCupB,kBAAkB,CAACD,MAAM,CAACljB,OAAR,CAA1DpG;AAAX,WAA1DA,CAAV2F;AACA,cAAI2jB,MAAM,CAACnjB,WAAX,EACIR,OAAO,CAACQ,WAARR,GAAsB2jB,MAAM,CAACnjB,WAA7BR;AACJigB,cAAI,GAAG5lB,iDAASA,iDAAS,EAATA,EAAa4lB,IAAb5lB,CAATA,EAA6BspB,MAAM,CAAC1D,IAApC5lB,CAAP4lB;AAJJ;AAMA,YAAIvE,aAAa,GAAGhS,SAAS,CAACgS,aAA9B;AAAA,YAA6CoH,UAAU,GAAGpZ,SAAS,CAACoZ,UAApE;AAAA,YAAgF5iB,SAAS,GAAGwJ,SAAS,CAACxJ,SAAtG;AAAA,YAAiHmC,KAAK,GAAGqH,SAAS,CAACrH,KAAnI;AACA,YAAIue,IAAI,GAAG;AAAElF,uBAAa,EAAEA,aAAjB;AAAgCxb,mBAAS,EAAEA;AAA3C,SAAX;AACA,YAAI+f,IAAI,CAACN,iBAAT,EACIiB,IAAI,CAACkC,UAALlC,GAAkBkC,UAAlBlC;AACJ,YAAIX,IAAI,CAACoD,YAAT,EACIzC,IAAI,CAACve,KAALue,GAAaiD,gDAAMxhB,KAANwhB,CAAbjD;AACJ,eAAO;AACH5gB,iBAAO,EAAEA,OADN;AAEH4gB,cAAI,EAAEA;AAFH,SAAP;AAnBG;;AAwBP,eAASgD,kBAAT,CAA4BnjB,OAA5B,EAAqC;AACjC,YAAIA,OAAJ,EAAa;AACT,cAAIqjB,YAAY,GAAGvpB,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAAnB;AACAA,gBAAM,CAACmC,IAAPnC,CAAYA,MAAM,CAACkG,OAAD,CAAlBlG,EAA6B0C,OAA7B1C,CAAqC,UAAUmH,IAAV,EAAgB;AACjDoiB,wBAAY,CAACpiB,IAAI,CAACqiB,WAALriB,EAAD,CAAZoiB,GAAmCrjB,OAAO,CAACiB,IAAD,CAA1CoiB;AADJ;AAGA,iBAAOA,YAAP;AACH;;AACD,eAAOrjB,OAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;ACnDM,UAAI2f,UAAS,GAAG,SAAZA,UAAY,CAAU1W,SAAV,EAAqBsa,WAArB,EAAkC;AACrD,YAAI9c,OAAO,GAAGwC,SAAS,CAAC2W,UAAV3W,EAAd;AACA,YAAIua,UAAU,GAAG/c,OAAO,CAAC3G,GAAzB;;AACA,YAAI0jB,UAAJ,EAAgB;AACZ,iBAAOA,UAAP;AADJ,eAGK,IAAI,OAAOD,WAAP,KAAuB,UAA3B,EAAuC;AACxC,iBAAOA,WAAW,CAACta,SAAD,CAAlB;AADC,eAGA;AACD,iBAAOsa,WAAW,IAAI,UAAtB;AACH;AAXE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA,UAAIpC,wBAAuB,GAAG,SAA1BA,wBAA0B,CAAUsC,CAAV,EAAaxM,KAAb,EAAoB;AACrD,YAAIyM,UAAJ;;AACA,YAAI;AACAA,oBAAU,GAAG1mB,IAAI,CAACC,SAALD,CAAeymB,CAAfzmB,CAAb0mB;AADJ,UAGA,OAAOC,CAAP,EAAU;AACN,cAAI1C,UAAU,GAAGplB,OAAO,GAAG,IAAI0F,uEAAJ,CAAmB,6BAA6B0V,KAA7B,GAAqC,wBAArC,GAAgE0M,CAAC,CAAClR,OAArF,CAAH,GAAmG,IAAIlR,uEAAJ,CAAmB,EAAnB,CAA3H;AACA0f,oBAAU,CAACA,UAAXA,GAAwB0C,CAAxB1C;AACA,gBAAMA,UAAN;AACH;;AACD,eAAOyC,UAAP;AAVG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,eAAStF,gBAAT,CAAyBwF,QAAzB,EAAmC3a,SAAnC,EAA8C;AACjD,YAAIxC,OAAO,GAAG7M,iDAAS,EAATA,EAAagqB,QAAbhqB,CAAd;;AACA,YAAI0nB,UAAU,GAAG,SAAbA,UAAa,CAAUrV,IAAV,EAAgB;AAC7B,cAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgC;AAC5BxF,mBAAO,GAAG7M,iDAASA,iDAAS,EAATA,EAAa6M,OAAb7M,CAATA,EAAgCqS,IAAI,CAACxF,OAAD,CAApC7M,CAAV6M;AADJ,iBAGK;AACDA,mBAAO,GAAG7M,iDAASA,iDAAS,EAATA,EAAa6M,OAAb7M,CAATA,EAAgCqS,IAAhCrS,CAAV6M;AACH;AANL;;AAQA,YAAImZ,UAAU,GAAG,SAAbA,UAAa,GAAY;AAAE,iBAAQhmB,iDAAS,EAATA,EAAa6M,OAAb7M,CAAR;AAA/B;;AACAE,cAAM,CAAC8S,cAAP9S,CAAsBmP,SAAtBnP,EAAiC,YAAjCA,EAA+C;AAC3C+S,oBAAU,EAAE,KAD+B;AAE3CtT,eAAK,EAAE+nB;AAFoC,SAA/CxnB;AAIAA,cAAM,CAAC8S,cAAP9S,CAAsBmP,SAAtBnP,EAAiC,YAAjCA,EAA+C;AAC3C+S,oBAAU,EAAE,KAD+B;AAE3CtT,eAAK,EAAEqmB;AAFoC,SAA/C9lB;AAIA,eAAOmP,SAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBM,eAASiY,UAAT,CAAmB2C,UAAnB,EAA+B;AAClC,eAAO,IAAItR,2DAAJ,CAAe,UAAU/G,QAAV,EAAoB;AACtCA,kBAAQ,CAAC/F,KAAT+F,CAAeqY,UAAfrY;AADG,UAAP;AAGH;;;;;;;;;;;;;;;;;;;;;;;ACLM,UAAIwW,iBAAgB,GAAG,SAAnBA,iBAAmB,CAAUX,QAAV,EAAoB9b,MAApB,EAA4BkN,OAA5B,EAAqC;AAC/D,YAAIhN,KAAK,GAAG,IAAIwX,KAAJ,CAAUxK,OAAV,CAAZ;AACAhN,aAAK,CAACxE,IAANwE,GAAa,aAAbA;AACAA,aAAK,CAAC4b,QAAN5b,GAAiB4b,QAAjB5b;AACAA,aAAK,CAACqc,UAANrc,GAAmB4b,QAAQ,CAACU,MAA5Btc;AACAA,aAAK,CAACF,MAANE,GAAeF,MAAfE;AACA,cAAMA,KAAN;AANG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA,eAAS4Y,mBAAT,CAA4BpV,SAA5B,EAAuC;AAC1C,YAAI6a,oBAAoB,GAAG;AACvBrkB,mBAAS,EAAEwJ,SAAS,CAACxJ,SAAVwJ,IAAuB,EADX;AAEvBoZ,oBAAU,EAAEpZ,SAAS,CAACoZ,UAAVpZ,IAAwB,EAFb;AAGvBgS,uBAAa,EAAEhS,SAAS,CAACgS,aAHF;AAIvBrZ,eAAK,EAAEqH,SAAS,CAACrH;AAJM,SAA3B;;AAMA,YAAI,CAACkiB,oBAAoB,CAAC7I,aAA1B,EAAyC;AACrC6I,8BAAoB,CAAC7I,aAArB6I,GACI,OAAOA,oBAAoB,CAACliB,KAA5B,KAAsC,QAAtC,GACMyW,uEAAiByL,oBAAoB,CAACliB,KAAtCyW,KAAgDY,SADtD,GAEM,EAHV6K;AAIH;;AACD,eAAOA,oBAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdM,eAASxF,kBAAT,CAA2BrV,SAA3B,EAAsC;AACzC,YAAI8a,gBAAgB,GAAG,CACnB,OADmB,EAEnB,eAFmB,EAGnB,WAHmB,EAInB,YAJmB,EAKnB,SALmB,CAAvB;;AAOA,aAAK,IAAId,EAAE,GAAG,CAAT,EAAYhjB,EAAE,GAAGnG,MAAM,CAACmC,IAAPnC,CAAYmP,SAAZnP,CAAtB,EAA8CmpB,EAAE,GAAGhjB,EAAE,CAAC3D,MAAtD,EAA8D2mB,EAAE,EAAhE,EAAoE;AAChE,cAAIxmB,GAAG,GAAGwD,EAAE,CAACgjB,EAAD,CAAZ;;AACA,cAAIc,gBAAgB,CAACthB,OAAjBshB,CAAyBtnB,GAAzBsnB,IAAgC,CAApC,EAAuC;AACnC,kBAAMloB,OAAO,GAAG,IAAI0F,uEAAJ,CAAmB,uBAAuB9E,GAA1C,CAAH,GAAoD,IAAI8E,uEAAJ,CAAmB,EAAnB,CAAjE;AACH;AACJ;;AACD,eAAO0H,SAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;AChBM,eAASuI,gBAAT,CAAyBjY,KAAzB,EAAgC;AACnC,eAAOE,KAAK,CAACC,OAAND,CAAcF,KAAdE,KAAwBF,KAAK,CAAC+C,MAAN/C,GAAe,CAA9C;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFM,UAAIgB,cAAa,GAAG,OAAOE,OAAP,KAAmB,UAAnB,IAAiC,EAAE,OAAO4H,SAAP,KAAqB,QAArB,IAC1DA,SAAS,CAAC2hB,OAAV3hB,KAAsB,aADkC,CAArD;;AAEA,UAAInI,cAAa,GAAG,OAAOC,OAAP,KAAmB,UAAvC;;;;;;;;;;;;;;;;;;;;;;;ACFP,UAAI8pB,QAAQ,GAAGnqB,MAAM,CAACgB,SAAPhB,CAAiBmqB,QAAhC;;AACO,eAAS1S,UAAT,CAAmBhY,KAAnB,EAA0B;AAC7B,eAAO2qB,eAAe,CAAC3qB,KAAD,CAAtB;AACH;;AACD,eAAS2qB,eAAT,CAAyBC,GAAzB,EAA8BC,IAA9B,EAAoC;AAChC,gBAAQH,QAAQ,CAAC1Y,IAAT0Y,CAAcE,GAAdF,CAAR;AACI,eAAK,gBAAL;AAAuB;AACnBG,kBAAI,GAAGA,IAAI,IAAI,IAAIzpB,GAAJ,EAAfypB;AACA,kBAAIA,IAAI,CAACppB,GAALopB,CAASD,GAATC,CAAJ,EACI,OAAOA,IAAI,CAAC9oB,GAAL8oB,CAASD,GAATC,CAAP;AACJ,kBAAIC,MAAM,GAAGF,GAAG,CAACxqB,KAAJwqB,CAAU,CAAVA,CAAb;AACAC,kBAAI,CAACjpB,GAALipB,CAASD,GAATC,EAAcC,MAAdD;AACAC,oBAAM,CAAC7nB,OAAP6nB,CAAe,UAAUC,KAAV,EAAiBznB,CAAjB,EAAoB;AAC/BwnB,sBAAM,CAACxnB,CAAD,CAANwnB,GAAYH,eAAe,CAACI,KAAD,EAAQF,IAAR,CAA3BC;AADJ;AAGA,qBAAOA,MAAP;AACH;;AACD,eAAK,iBAAL;AAAwB;AACpBD,kBAAI,GAAGA,IAAI,IAAI,IAAIzpB,GAAJ,EAAfypB;AACA,kBAAIA,IAAI,CAACppB,GAALopB,CAASD,GAATC,CAAJ,EACI,OAAOA,IAAI,CAAC9oB,GAAL8oB,CAASD,GAATC,CAAP;AACJ,kBAAIG,MAAM,GAAGzqB,MAAM,CAAC8C,MAAP9C,CAAcA,MAAM,CAACC,cAAPD,CAAsBqqB,GAAtBrqB,CAAdA,CAAb;AACAsqB,kBAAI,CAACjpB,GAALipB,CAASD,GAATC,EAAcG,MAAdH;AACAtqB,oBAAM,CAACmC,IAAPnC,CAAYqqB,GAAZrqB,EAAiB0C,OAAjB1C,CAAyB,UAAU2C,GAAV,EAAe;AACpC8nB,sBAAM,CAAC9nB,GAAD,CAAN8nB,GAAcL,eAAe,CAACC,GAAG,CAAC1nB,GAAD,CAAJ,EAAW2nB,IAAX,CAA7BG;AADJ;AAGA,qBAAOA,MAAP;AACH;;AACD;AACI,mBAAOJ,GAAP;AAxBR;AA0BH;;;;;;;;;;;;;;;;;;;;;;;AC/BM,eAAS3kB,QAAT,GAAmB;AACtB,YAAIglB,OAAO,GAAG,EAAd;;AACA,aAAK,IAAIvB,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGxkB,SAAS,CAACnC,MAAhC,EAAwC2mB,EAAE,EAA1C,EAA8C;AAC1CuB,iBAAO,CAACvB,EAAD,CAAPuB,GAAc/lB,SAAS,CAACwkB,EAAD,CAAvBuB;AACH;;AACD,YAAIjf,MAAM,GAAGzL,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAAb;AACA0qB,eAAO,CAAChoB,OAARgoB,CAAgB,UAAU1nB,GAAV,EAAe;AAC3B,cAAI,CAACA,GAAL,EACI;AACJhD,gBAAM,CAACmC,IAAPnC,CAAYgD,GAAZhD,EAAiB0C,OAAjB1C,CAAyB,UAAU2C,GAAV,EAAe;AACpC,gBAAIlD,KAAK,GAAGuD,GAAG,CAACL,GAAD,CAAf;;AACA,gBAAIlD,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClBgM,oBAAM,CAAC9I,GAAD,CAAN8I,GAAchM,KAAdgM;AACH;AAJL;AAHJ;AAUA,eAAOA,MAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;ACjBM,eAASqQ,sBAAT,CAA+BrQ,MAA/B,EAAuC;AAC1C,eAAQA,MAAM,CAACkM,MAAPlM,IAAiBA,MAAM,CAACkM,MAAPlM,CAAcjJ,MAAdiJ,GAAuB,CAAxCA,IAA8C,KAAtD;AACH;;;;;;;;;;;;;;;;;;;;;;;ACFM,eAASkf,cAAT,CAAuBjpB,KAAvB,EAA8BuiB,IAA9B,EAAoCtX,OAApC,EAA6C;AAChD,YAAIie,MAAM,GAAG,CAAb;AACAlpB,aAAK,CAACgB,OAANhB,CAAc,UAAUmpB,IAAV,EAAgB9nB,CAAhB,EAAmB;AAC7B,cAAIkhB,IAAI,CAACxS,IAALwS,CAAU,IAAVA,EAAgB4G,IAAhB5G,EAAsBlhB,CAAtBkhB,EAAyBviB,KAAzBuiB,CAAJ,EAAqC;AACjCviB,iBAAK,CAACkpB,MAAM,EAAP,CAALlpB,GAAkBmpB,IAAlBnpB;AACH;AAHL,WAIGiL,OAJHjL;AAKAA,aAAK,CAACc,MAANd,GAAekpB,MAAflpB;AACA,eAAOA,KAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;ACTD,UAAIopB,YAAY,GAAG,IAAIjqB,GAAJ,EAAnB;;AACO,eAAS4f,aAAT,CAAsBsK,MAAtB,EAA8B;AACjC,YAAIC,KAAK,GAAGF,YAAY,CAACtpB,GAAbspB,CAAiBC,MAAjBD,KAA4B,CAAxC;AACAA,oBAAY,CAACzpB,GAAbypB,CAAiBC,MAAjBD,EAAyBE,KAAK,GAAG,CAAjCF;AACA,eAAOC,MAAM,GAAG,GAATA,GAAeC,KAAfD,GAAuB,GAAvBA,GAA6BE,IAAI,CAACC,MAALD,GAAcd,QAAdc,CAAuB,EAAvBA,EAA2BprB,KAA3BorB,CAAiC,CAAjCA,CAApC;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHD,UAAI9Z,cAAc,GAAGnR,MAAM,CAACgB,SAAPhB,CAAiBmR,cAAtC;;AACO,eAAS3E,UAAT,GAAqB;AACxB,YAAI2e,OAAO,GAAG,EAAd;;AACA,aAAK,IAAIhC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGxkB,SAAS,CAACnC,MAAhC,EAAwC2mB,EAAE,EAA1C,EAA8C;AAC1CgC,iBAAO,CAAChC,EAAD,CAAPgC,GAAcxmB,SAAS,CAACwkB,EAAD,CAAvBgC;AACH;;AACD,eAAO/a,eAAc,CAAC+a,OAAD,CAArB;AACH;;AACM,eAAS/a,eAAT,CAAwB+a,OAAxB,EAAiC;AACpC,YAAIP,MAAM,GAAGO,OAAO,CAAC,CAAD,CAAPA,IAAc,EAA3B;AACA,YAAIH,KAAK,GAAGG,OAAO,CAAC3oB,MAApB;;AACA,YAAIwoB,KAAK,GAAG,CAAZ,EAAe;AACX,cAAII,MAAM,GAAG,IAAIC,WAAJ,EAAb;;AACA,eAAK,IAAItoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGioB,KAApB,EAA2B,EAAEjoB,CAA7B,EAAgC;AAC5B6nB,kBAAM,GAAGQ,MAAM,CAACE,KAAPF,CAAaR,MAAbQ,EAAqBD,OAAO,CAACpoB,CAAD,CAA5BqoB,CAATR;AACH;AACJ;;AACD,eAAOA,MAAP;AACH;;AACD,UAAIW,iBAAiB,GAAG,SAApBA,iBAAoB,CAAUX,MAAV,EAAkBY,MAAlB,EAA0BC,QAA1B,EAAoC;AACxD,eAAO,KAAKH,KAAL,CAAWV,MAAM,CAACa,QAAD,CAAjB,EAA6BD,MAAM,CAACC,QAAD,CAAnC,CAAP;AADJ;;AAGA,UAAIJ,WAAU,GAAI,YAAY;AAC1B,iBAASA,UAAT,CAAoBK,UAApB,EAAgC;AAC5B,cAAIA,UAAU,KAAK,KAAK,CAAxB,EAA2B;AAAEA,sBAAU,GAAGH,iBAAbG;AAAiC;;AAC9D,eAAKA,UAAL,GAAkBA,UAAlB;AACA,eAAKC,QAAL,GAAgBnL,wDAAhB;AACA,eAAKoL,UAAL,GAAkB,IAAItrB,GAAJ,EAAlB;AACH;;AACD+qB,kBAAU,CAACrqB,SAAXqqB,CAAqBC,KAArBD,GAA6B,UAAUT,MAAV,EAAkBY,MAAlB,EAA0B;AACnD,cAAIlqB,KAAK,GAAG,IAAZ;;AACA,cAAIqL,OAAO,GAAG,EAAd;;AACA,eAAK,IAAIwc,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGxkB,SAAS,CAACnC,MAAhC,EAAwC2mB,EAAE,EAA1C,EAA8C;AAC1Cxc,mBAAO,CAACwc,EAAE,GAAG,CAAN,CAAPxc,GAAkBhI,SAAS,CAACwkB,EAAD,CAA3Bxc;AACH;;AACD,cAAI6T,8DAAgBgL,MAAhBhL,KAA2BA,8DAAgBoK,MAAhBpK,CAA/B,EAAwD;AACpDxgB,kBAAM,CAACmC,IAAPnC,CAAYwrB,MAAZxrB,EAAoB0C,OAApB1C,CAA4B,UAAU6rB,SAAV,EAAqB;AAC7C,kBAAI1a,cAAc,CAACM,IAAfN,CAAoByZ,MAApBzZ,EAA4B0a,SAA5B1a,CAAJ,EAA4C;AACxC,oBAAI2a,WAAW,GAAGlB,MAAM,CAACiB,SAAD,CAAxB;;AACA,oBAAIL,MAAM,CAACK,SAAD,CAANL,KAAsBM,WAA1B,EAAuC;AACnC,sBAAIrgB,MAAM,GAAGnK,KAAK,CAACoqB,UAANpqB,CAAiB+X,KAAjB/X,CAAuBA,KAAvBA,EAA8ByqB,sDAAc,CAACnB,MAAD,EAASY,MAAT,EAAiBK,SAAjB,CAAdE,EAA2Cpf,OAA3Cof,EAAoD,KAApDA,CAA9BzqB,CAAb;;AACA,sBAAImK,MAAM,KAAKqgB,WAAf,EAA4B;AACxBlB,0BAAM,GAAGtpB,KAAK,CAAC0qB,mBAAN1qB,CAA0BspB,MAA1BtpB,CAATspB;AACAA,0BAAM,CAACiB,SAAD,CAANjB,GAAoBnf,MAApBmf;AACH;AACJ;AARL,qBAUK;AACDA,sBAAM,GAAGtpB,KAAK,CAAC0qB,mBAAN1qB,CAA0BspB,MAA1BtpB,CAATspB;AACAA,sBAAM,CAACiB,SAAD,CAANjB,GAAoBY,MAAM,CAACK,SAAD,CAA1BjB;AACH;AAdL;AAgBA,mBAAOA,MAAP;AACH;;AACD,iBAAOY,MAAP;AAzBJ;;AA2BAH,kBAAU,CAACrqB,SAAXqqB,CAAqBW,mBAArBX,GAA2C,UAAU5rB,KAAV,EAAiB;AACxD,cAAI+gB,8DAAgB/gB,KAAhB+gB,KAA0B,CAAC,KAAKoL,UAAL,CAAgB1qB,GAAhB,CAAoBzB,KAApB,CAA/B,EAA2D;AACvD,gBAAIE,KAAK,CAACC,OAAND,CAAcF,KAAdE,CAAJ,EAA0B;AACtBF,mBAAK,GAAGA,KAAK,CAACI,KAANJ,CAAY,CAAZA,CAARA;AADJ,mBAGK;AACDA,mBAAK,GAAGK,iDAAS;AAAEC,yBAAS,EAAEC,MAAM,CAACC,cAAPD,CAAsBP,KAAtBO;AAAb,eAATF,EAAsDL,KAAtDK,CAARL;AACH;;AACD,iBAAKmsB,UAAL,CAAgB9pB,GAAhB,CAAoBrC,KAApB;AACH;;AACD,iBAAOA,KAAP;AAVJ;;AAYA,eAAO4rB,UAAP;AA9Cc,SAAlB;;;;;;;;;;;;;;;;;;;;;;;ACxBO,eAAS7K,gBAAT,CAAyBxd,GAAzB,EAA8B;AACjC,eAAOA,GAAG,KAAK,IAARA,IAAgB,OAAOA,GAAP,KAAe,QAAtC;AACH;;;;;;;;;;;;;;;;;;;;;ACAD,UAAIipB,EAAE,GAAG,IAAT;AACA,UAAIC,UAAU,GAAG,CAACD,EAAD,EAAKA,EAAL,EAASlT,IAAT,CAAc,KAAd,CAAjB;;AACA,eAASoT,MAAT,GAAkB;AACd,YAAI;AACA,iBAAOC,OAAO,CAACrqB,OAAD,CAAd;AADJ,UAGA,OAAOoE,EAAP,EAAW;AACPnG,gBAAM,CAAC8S,cAAP9S,CAAsBqsB,kDAAtBrsB,EAA8BksB,UAA9BlsB,EAA0C;AACtCP,iBAAK,EAAEwlB,kDAAM,YAAY;AAAE,qBAAOqH,aAAP;AAAf,aAALrH,MAAwD,YADzB;AAEtClS,sBAAU,EAAE,KAF0B;AAGtCC,wBAAY,EAAE,IAHwB;AAItCuZ,oBAAQ,EAAE;AAJ4B,WAA1CvsB;AAMA,iBAAOqsB,mDAAOH,UAAPG,CAAP;AACH;AACJ;AACD;;;AAAAG,uCAAeL,MAAM,EAArB;;;;;;;;;;;;;ACjBA;;;AAAAK,uCAAgBvH,kDAAM,YAAY;AAAE,eAAOwH,UAAP;AAAf,OAALxH,KACZA,kDAAM,YAAY;AAAE,eAAOxe,MAAP;AAAf,OAALwe,CADYA,IAEZA,kDAAM,YAAY;AAAE,eAAO7c,IAAP;AAAf,OAAL6c,CAFYA,IAGZA,kDAAM,YAAY;AAAE,eAAOoH,MAAP;AAAf,OAALpH,CAHYA,IAIZA,kDAAM,YAAY;AAAE,eAAOyH,QAAQ,CAAC,aAAD,CAARA,EAAP;AAAf,OAALzH,CAJJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCO,eAAS0H,uBAAT,GAAkC;AACrCC,yDAAO,IAAPA;AACA,eAAOC,+DAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFM,eAASC,SAAT,GAAoB;AACvB/qB,eAAO,GAAG6G,yDAAU,cAAc,OAAOmkB,+CAA/BnkB,EAAoCmkB,+CAApCnkB,CAAH,GAA8CA,yDAAU,cAAc,OAAOmkB,+CAA/BnkB,EAAoC,EAApCA,CAArD7G;AACH;;AAED4qB;;AAIAG,eAAQ;;;;;;;;;;;;;;;;;;;;;;;ACXD,eAAS7H,MAAT,CAAe+H,KAAf,EAAsB;AACzB,YAAI;AACA,iBAAOA,KAAK,EAAZ;AADJ,UAGA,OAAO7mB,EAAP,EAAW,CAAG;AACjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHM,eAASyJ,cAAT,CAAuBzJ,EAAvB,EAA2BR,SAA3B,EAAsC;AACzC,YAAIoL,UAAU,GAAG5K,EAAE,CAAC4K,UAApB;;AACA,YAAI,CAACA,UAAD,IAAe,CAACA,UAAU,CAACvO,MAA/B,EAAuC;AACnC,iBAAO,IAAP;AACH;;AACD,eAAOyqB,uBAAsB,CAAClc,UAAD,CAAtBkc,CAAmCC,KAAnCD,CAAyC,UAAU9mB,EAAV,EAAc;AAC1D,cAAI6K,SAAS,GAAG7K,EAAE,CAAC6K,SAAnB;AAAA,cAA8Bmc,UAAU,GAAGhnB,EAAE,CAACgnB,UAA9C;AACA,cAAIC,WAAW,GAAG,KAAlB;;AACA,cAAID,UAAU,CAAC1tB,KAAX0tB,CAAiB/e,IAAjB+e,KAA0B,UAA9B,EAA0C;AACtCC,uBAAW,GAAGznB,SAAS,IAAIA,SAAS,CAACwnB,UAAU,CAAC1tB,KAAX0tB,CAAiBhmB,IAAjBgmB,CAAsB1tB,KAAvB,CAApC2tB;AACArrB,mBAAO,GAAG6G,8DAAUwkB,WAAW,KAAK,KAAK,CAA/BxkB,EAAkC,qCAAqCoI,SAAS,CAAC7J,IAAV6J,CAAevR,KAApD,GAA4D,aAA9FmJ,CAAH,GAAkHA,8DAAUwkB,WAAW,KAAK,KAAK,CAA/BxkB,EAAkC,EAAlCA,CAAzH7G;AAFJ,iBAIK;AACDqrB,uBAAW,GAAGD,UAAU,CAAC1tB,KAAX0tB,CAAiB1tB,KAA/B2tB;AACH;;AACD,iBAAOpc,SAAS,CAAC7J,IAAV6J,CAAevR,KAAfuR,KAAyB,MAAzBA,GAAkC,CAACoc,WAAnCpc,GAAiDoc,WAAxD;AAVG,UAAP;AAYH;;AACM,eAASC,kBAAT,CAA2BC,IAA3B,EAAiC;AACpC,YAAIC,KAAK,GAAG,EAAZ;AACAxf,wDAAMuf,IAANvf,EAAY;AACRC,mBAAS,EAAE,mBAAUpM,IAAV,EAAgB;AACvB2rB,iBAAK,CAAClrB,IAANkrB,CAAW3rB,IAAI,CAACuF,IAALvF,CAAUnC,KAArB8tB;AACH;AAHO,SAAZxf;AAKA,eAAOwf,KAAP;AACH;;AACM,eAASngB,cAAT,CAAuBmgB,KAAvB,EAA8BD,IAA9B,EAAoC;AACvC,eAAOD,kBAAiB,CAACC,IAAD,CAAjBD,CAAwBnf,IAAxBmf,CAA6B,UAAUlmB,IAAV,EAAgB;AAAE,iBAAOomB,KAAK,CAAC5kB,OAAN4kB,CAAcpmB,IAAdomB,IAAsB,CAAC,CAA9B;AAA/C,UAAP;AACH;;AACM,eAASjQ,iBAAT,CAA0BpV,QAA1B,EAAoC;AACvC,eAAQA,QAAQ,IACZkF,cAAa,CAAC,CAAC,QAAD,CAAD,EAAalF,QAAb,CADTA,IAEJkF,cAAa,CAAC,CAAC,QAAD,CAAD,EAAalF,QAAb,CAFjB;AAGH;;AACD,eAASslB,oBAAT,CAA8BrnB,EAA9B,EAAkC;AAC9B,YAAI1G,KAAK,GAAG0G,EAAE,CAACgB,IAAHhB,CAAQ1G,KAApB;AACA,eAAOA,KAAK,KAAK,MAAVA,IAAoBA,KAAK,KAAK,SAArC;AACH;;AACM,eAASwtB,uBAAT,CAAgClc,UAAhC,EAA4C;AAC/C,YAAItF,MAAM,GAAG,EAAb;;AACA,YAAIsF,UAAU,IAAIA,UAAU,CAACvO,MAA7B,EAAqC;AACjCuO,oBAAU,CAACrO,OAAXqO,CAAmB,UAAUC,SAAV,EAAqB;AACpC,gBAAI,CAACwc,oBAAoB,CAACxc,SAAD,CAAzB,EACI;AACJ,gBAAIyc,kBAAkB,GAAGzc,SAAS,CAACrM,SAAnC;AACA,gBAAI+oB,aAAa,GAAG1c,SAAS,CAAC7J,IAAV6J,CAAevR,KAAnC;AACAsC,mBAAO,GAAG6G,8DAAU6kB,kBAAkB,IAAIA,kBAAkB,CAACjrB,MAAnBirB,KAA8B,CAA9D7kB,EAAiE,4CAA4C8kB,aAA5C,GAA4D,aAA7H9kB,CAAH,GAAiJA,8DAAU6kB,kBAAkB,IAAIA,kBAAkB,CAACjrB,MAAnBirB,KAA8B,CAA9D7kB,EAAiE,EAAjEA,CAAxJ7G;AACA,gBAAIorB,UAAU,GAAGM,kBAAkB,CAAC,CAAD,CAAnC;AACA1rB,mBAAO,GAAG6G,8DAAUukB,UAAU,CAAChmB,IAAXgmB,IAAmBA,UAAU,CAAChmB,IAAXgmB,CAAgB1tB,KAAhB0tB,KAA0B,IAAvDvkB,EAA6D,+BAA+B8kB,aAA/B,GAA+C,aAA5G9kB,CAAH,GAAgIA,8DAAUukB,UAAU,CAAChmB,IAAXgmB,IAAmBA,UAAU,CAAChmB,IAAXgmB,CAAgB1tB,KAAhB0tB,KAA0B,IAAvDvkB,EAA6D,EAA7DA,CAAvI7G;AACA,gBAAI4rB,OAAO,GAAGR,UAAU,CAAC1tB,KAAzB;AACAsC,mBAAO,GAAG6G,8DAAU+kB,OAAO,KACtBA,OAAO,CAACvf,IAARuf,KAAiB,UAAjBA,IAA+BA,OAAO,CAACvf,IAARuf,KAAiB,cAD1B,CAAjB/kB,EAC4D,uBAAuB8kB,aAAvB,GAAuC,mDADnG9kB,CAAH,GAC6JA,8DAAU+kB,OAAO,KAChLA,OAAO,CAACvf,IAARuf,KAAiB,UAAjBA,IAA+BA,OAAO,CAACvf,IAARuf,KAAiB,cADgI,CAAjB/kB,EAC9F,EAD8FA,CADpK7G;AAGA0J,kBAAM,CAACpJ,IAAPoJ,CAAY;AAAEuF,uBAAS,EAAEA,SAAb;AAAwBmc,wBAAU,EAAEA;AAApC,aAAZ1hB;AAZJ;AAcH;;AACD,eAAOA,MAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DM,eAASmiB,yBAAT,CAAkC1lB,QAAlC,EAA4C2lB,YAA5C,EAA0D;AAC7D,YAAIC,kBAAkB,GAAGD,YAAzB;AACA,YAAIlf,SAAS,GAAG,EAAhB;AACAzG,gBAAQ,CAAC0X,WAAT1X,CAAqBxF,OAArBwF,CAA6B,UAAU6lB,UAAV,EAAsB;AAC/C,cAAIA,UAAU,CAAC3f,IAAX2f,KAAoB,qBAAxB,EAA+C;AAC3C,kBAAMhsB,OAAO,GAAG,IAAI0F,6DAAJ,CAAmB,aAAasmB,UAAU,CAAC5e,SAAxB,GAAoC,YAApC,IAAoD4e,UAAU,CAAC5mB,IAAX4mB,GAAkB,aAAaA,UAAU,CAAC5mB,IAAX4mB,CAAgBtuB,KAA7B,GAAqC,GAAvDsuB,GAA6D,EAAjH,IAAuH,IAAvH,GAC/B,yFADY,CAAH,GACoF,IAAItmB,6DAAJ,CAAmB,EAAnB,CADjG;AAEH;;AACD,cAAIsmB,UAAU,CAAC3f,IAAX2f,KAAoB,oBAAxB,EAA8C;AAC1Cpf,qBAAS,CAACtM,IAAVsM,CAAeof,UAAfpf;AACH;AAPL;;AASA,YAAI,OAAOmf,kBAAP,KAA8B,WAAlC,EAA+C;AAC3C/rB,iBAAO,GAAG6G,8DAAU+F,SAAS,CAACnM,MAAVmM,KAAqB,CAA/B/F,EAAkC,WAAW+F,SAAS,CAACnM,MAArB,GAA8B,mFAAhEoG,CAAH,GAA0JA,8DAAU+F,SAAS,CAACnM,MAAVmM,KAAqB,CAA/B/F,EAAkC,EAAlCA,CAAjK7G;AACA+rB,4BAAkB,GAAGnf,SAAS,CAAC,CAAD,CAATA,CAAaxH,IAAbwH,CAAkBlP,KAAvCquB;AACH;;AACD,YAAIhmB,KAAK,GAAGhI,iDAASA,iDAAS,EAATA,EAAaoI,QAAbpI,CAATA,EAAiC;AAAE8f,qBAAW,EAAEmM,sDAAc,CAClE;AACI3d,gBAAI,EAAE,qBADV;AAEIe,qBAAS,EAAE,OAFf;AAGII,wBAAY,EAAE;AACVnB,kBAAI,EAAE,cADI;AAEV+B,wBAAU,EAAE,CACR;AACI/B,oBAAI,EAAE,gBADV;AAEIjH,oBAAI,EAAE;AACFiH,sBAAI,EAAE,MADJ;AAEF3O,uBAAK,EAAEquB;AAFL;AAFV,eADQ;AAFF;AAHlB,WADkE,CAAd/B,EAiBrD7jB,QAAQ,CAAC0X,WAjB4CmM,EAiB/B,IAjB+BA;AAAf,SAAjCjsB,CAAZ;AAkBA,eAAOgI,KAAP;AACH;;AACM,eAASoH,kBAAT,CAA2BP,SAA3B,EAAsC;AACzC,YAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,mBAAS,GAAG,EAAZA;AAAiB;;AAC7C,YAAIqf,QAAQ,GAAG,EAAf;AACArf,iBAAS,CAACjM,OAAViM,CAAkB,UAAUe,QAAV,EAAoB;AAClCse,kBAAQ,CAACte,QAAQ,CAACvI,IAATuI,CAAcjQ,KAAf,CAARuuB,GAAgCte,QAAhCse;AADJ;AAGA,eAAOA,QAAP;AACH;;AACM,eAASC,yBAAT,CAAkCxe,SAAlC,EAA6Cb,WAA7C,EAA0D;AAC7D,gBAAQa,SAAS,CAACrB,IAAlB;AACI,eAAK,gBAAL;AACI,mBAAOqB,SAAP;;AACJ,eAAK,gBAAL;AAAuB;AACnB,kBAAIC,QAAQ,GAAGd,WAAW,IAAIA,WAAW,CAACa,SAAS,CAACtI,IAAVsI,CAAehQ,KAAhB,CAAzC;AACAsC,qBAAO,GAAG6G,8DAAU8G,QAAV9G,EAAoB,uBAAuB6G,SAAS,CAACtI,IAAVsI,CAAehQ,KAAtC,GAA8C,GAAlEmJ,CAAH,GAA4EA,8DAAU8G,QAAV9G,EAAoB,EAApBA,CAAnF7G;AACA,qBAAO2N,QAAP;AACH;;AACD;AACI,mBAAO,IAAP;AATR;AAWH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxDM,eAASwe,cAAT,CAAuBpO,GAAvB,EAA4B;AAC/B/d,eAAO,GAAG6G,8DAAUkX,GAAG,IAAIA,GAAG,CAAC1R,IAAJ0R,KAAa,UAA9BlX,EAA0C,0JAA1CA,CAAH,GAA2MA,8DAAUkX,GAAG,IAAIA,GAAG,CAAC1R,IAAJ0R,KAAa,UAA9BlX,EAA0C,EAA1CA,CAAlN7G;AACA,YAAI6lB,UAAU,GAAG9H,GAAG,CAACF,WAAJE,CACZ3U,MADY2U,CACL,UAAUiH,CAAV,EAAa;AAAE,iBAAOA,CAAC,CAAC3Y,IAAF2Y,KAAW,oBAAlB;AADV,WAEZplB,GAFYme,CAER,UAAUiO,UAAV,EAAsB;AAC3B,cAAIA,UAAU,CAAC3f,IAAX2f,KAAoB,qBAAxB,EAA+C;AAC3C,kBAAMhsB,OAAO,GAAG,IAAI0F,6DAAJ,CAAmB,8DAA8DsmB,UAAU,CAAC3f,IAAzE,GAAgF,IAAnG,CAAH,GAA8G,IAAI3G,6DAAJ,CAAmB,EAAnB,CAA3H;AACH;;AACD,iBAAOsmB,UAAP;AANa,UAAjB;AAQAhsB,eAAO,GAAG6G,8DAAUgf,UAAU,CAACplB,MAAXolB,IAAqB,CAA/Bhf,EAAkC,0CAA0Cgf,UAAU,CAACplB,MAArD,GAA8D,aAAhGoG,CAAH,GAAoHA,8DAAUgf,UAAU,CAACplB,MAAXolB,IAAqB,CAA/Bhf,EAAkC,EAAlCA,CAA3H7G;AACA,eAAO+d,GAAP;AACH;;AACM,eAASnN,uBAAT,CAAgCmN,GAAhC,EAAqC;AACxCoO,sBAAa,CAACpO,GAAD,CAAboO;;AACA,eAAOpO,GAAG,CAACF,WAAJE,CAAgB3U,MAAhB2U,CAAuB,UAAUiO,UAAV,EAAsB;AAAE,iBAAOA,UAAU,CAAC3f,IAAX2f,KAAoB,qBAA3B;AAA/C,WAAoG,CAApGjO,CAAP;AACH;;AACM,eAASvB,iBAAT,CAA0BuB,GAA1B,EAA+B;AAClC,eAAQA,GAAG,CAACF,WAAJE,CACH3U,MADG2U,CACI,UAAUiO,UAAV,EAAsB;AAC9B,iBAAOA,UAAU,CAAC3f,IAAX2f,KAAoB,qBAApBA,IAA6CA,UAAU,CAAC5mB,IAA/D;AAFI,WAIHxF,GAJGme,CAIC,UAAUgE,CAAV,EAAa;AAAE,iBAAOA,CAAC,CAAC3c,IAAF2c,CAAOrkB,KAAd;AAJhB,WAIwC,CAJxCqgB,KAI8C,IAJtD;AAKH;;AACM,eAAS7Q,uBAAT,CAAgC6Q,GAAhC,EAAqC;AACxC,eAAOA,GAAG,CAACF,WAAJE,CAAgB3U,MAAhB2U,CAAuB,UAAUiO,UAAV,EAAsB;AAAE,iBAAOA,UAAU,CAAC3f,IAAX2f,KAAoB,oBAA3B;AAA/C,UAAP;AACH;;AACM,eAAS3Y,mBAAT,CAA4B0K,GAA5B,EAAiC;AACpC,YAAI3K,QAAQ,GAAGxC,uBAAsB,CAACmN,GAAD,CAArC;;AACA/d,eAAO,GAAG6G,8DAAUuM,QAAQ,IAAIA,QAAQ,CAAChG,SAATgG,KAAuB,OAA7CvM,EAAsD,kCAAtDA,CAAH,GAA+FA,8DAAUuM,QAAQ,IAAIA,QAAQ,CAAChG,SAATgG,KAAuB,OAA7CvM,EAAsD,EAAtDA,CAAtG7G;AACA,eAAOoT,QAAP;AACH;;AACM,eAASgZ,sBAAT,CAA+BrO,GAA/B,EAAoC;AACvC/d,eAAO,GAAG6G,8DAAUkX,GAAG,CAAC1R,IAAJ0R,KAAa,UAAvBlX,EAAmC,0JAAnCA,CAAH,GAAoMA,8DAAUkX,GAAG,CAAC1R,IAAJ0R,KAAa,UAAvBlX,EAAmC,EAAnCA,CAA3M7G;AACAA,eAAO,GAAG6G,8DAAUkX,GAAG,CAACF,WAAJE,CAAgBtd,MAAhBsd,IAA0B,CAApClX,EAAuC,4CAAvCA,CAAH,GAA0FA,8DAAUkX,GAAG,CAACF,WAAJE,CAAgBtd,MAAhBsd,IAA0B,CAApClX,EAAuC,EAAvCA,CAAjG7G;AACA,YAAIqsB,WAAW,GAAGtO,GAAG,CAACF,WAAJE,CAAgB,CAAhBA,CAAlB;AACA/d,eAAO,GAAG6G,8DAAUwlB,WAAW,CAAChgB,IAAZggB,KAAqB,oBAA/BxlB,EAAqD,gCAArDA,CAAH,GAA4FA,8DAAUwlB,WAAW,CAAChgB,IAAZggB,KAAqB,oBAA/BxlB,EAAqD,EAArDA,CAAnG7G;AACA,eAAOqsB,WAAP;AACH;;AACM,eAASpf,kBAAT,CAA2Bqf,QAA3B,EAAqC;AACxCH,sBAAa,CAACG,QAAD,CAAbH;;AACA,YAAII,kBAAJ;;AACA,aAAK,IAAInF,EAAE,GAAG,CAAT,EAAYhjB,EAAE,GAAGkoB,QAAQ,CAACzO,WAA/B,EAA4CuJ,EAAE,GAAGhjB,EAAE,CAAC3D,MAApD,EAA4D2mB,EAAE,EAA9D,EAAkE;AAC9D,cAAI4E,UAAU,GAAG5nB,EAAE,CAACgjB,EAAD,CAAnB;;AACA,cAAI4E,UAAU,CAAC3f,IAAX2f,KAAoB,qBAAxB,EAA+C;AAC3C,gBAAI5e,SAAS,GAAG4e,UAAU,CAAC5e,SAA3B;;AACA,gBAAIA,SAAS,KAAK,OAAdA,IACAA,SAAS,KAAK,UADdA,IAEAA,SAAS,KAAK,cAFlB,EAEkC;AAC9B,qBAAO4e,UAAP;AACH;AACJ;;AACD,cAAIA,UAAU,CAAC3f,IAAX2f,KAAoB,oBAApBA,IAA4C,CAACO,kBAAjD,EAAqE;AACjEA,8BAAkB,GAAGP,UAArBO;AACH;AACJ;;AACD,YAAIA,kBAAJ,EAAwB;AACpB,iBAAOA,kBAAP;AACH;;AACD,cAAMvsB,OAAO,GAAG,IAAI0F,6DAAJ,CAAmB,sFAAnB,CAAH,GAAgH,IAAIA,6DAAJ,CAAmB,EAAnB,CAA7H;AACH;;AACM,eAASkY,iBAAT,CAA0BoO,UAA1B,EAAsC;AACzC,YAAIQ,aAAa,GAAGvuB,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAApB;AACA,YAAIwuB,IAAI,GAAGT,UAAU,IAAIA,UAAU,CAAC1Y,mBAApC;;AACA,YAAImZ,IAAI,IAAIA,IAAI,CAAChsB,MAAjB,EAAyB;AACrBgsB,cAAI,CAAC9rB,OAAL8rB,CAAa,UAAU3O,GAAV,EAAe;AACxB,gBAAIA,GAAG,CAAC4O,YAAR,EAAsB;AAClBC,2FAA4BH,aAA5BG,EAA2C7O,GAAG,CAACtK,QAAJsK,CAAa1Y,IAAxDunB,EAA8D7O,GAAG,CAAC4O,YAAlEC;AACH;AAHL;AAKH;;AACD,eAAOH,aAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvEM,eAASI,cAAT,CAAuB/P,EAAvB,EAA2B;AAC9B,eAAO;AAAEgQ,eAAK,EAAE5O,MAAM,CAACpB,EAAD;AAAf,SAAP;AACH;;AACM,eAASiQ,YAAT,CAAqB7rB,GAArB,EAA0B;AAC7B,eAAOopB,OAAO,CAACppB,GAAG,IAAI,OAAOA,GAAP,KAAe,QAAtBA,IAAkC,OAAOA,GAAG,CAAC4rB,KAAX,KAAqB,QAAxD,CAAd;AACH;;AACM,eAASrO,eAAT,CAAwB9gB,KAAxB,EAA+B;AAClC,eAAQ+gB,qEAAgB/gB,KAAhB+gB,KACJ/gB,KAAK,CAAC2O,IAAN3O,KAAe,UADX+gB,IAEJ7gB,KAAK,CAACC,OAAND,CAAcF,KAAK,CAACmgB,WAApBjgB,CAFJ;AAGH;;AACD,eAASmvB,aAAT,CAAuBrvB,KAAvB,EAA8B;AAC1B,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,aAAtB;AACH;;AACD,eAASsvB,cAAT,CAAwBtvB,KAAxB,EAA+B;AAC3B,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,cAAtB;AACH;;AACD,eAASuvB,UAAT,CAAoBvvB,KAApB,EAA2B;AACvB,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,UAAtB;AACH;;AACD,eAASwvB,YAAT,CAAsBxvB,KAAtB,EAA6B;AACzB,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,YAAtB;AACH;;AACD,eAASyvB,UAAT,CAAoBzvB,KAApB,EAA2B;AACvB,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,UAAtB;AACH;;AACD,eAAS0vB,aAAT,CAAuB1vB,KAAvB,EAA8B;AAC1B,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,aAAtB;AACH;;AACD,eAAS2vB,WAAT,CAAqB3vB,KAArB,EAA4B;AACxB,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,WAAtB;AACH;;AACD,eAAS4vB,WAAT,CAAqB5vB,KAArB,EAA4B;AACxB,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,WAAtB;AACH;;AACD,eAAS6vB,WAAT,CAAqB7vB,KAArB,EAA4B;AACxB,eAAOA,KAAK,CAAC2O,IAAN3O,KAAe,WAAtB;AACH;;AACM,eAASivB,4BAAT,CAAqCa,MAArC,EAA6CpoB,IAA7C,EAAmD1H,KAAnD,EAA0DkG,SAA1D,EAAqE;AACxE,YAAIqpB,UAAU,CAACvvB,KAAD,CAAVuvB,IAAqBC,YAAY,CAACxvB,KAAD,CAArC,EAA8C;AAC1C8vB,gBAAM,CAACpoB,IAAI,CAAC1H,KAAN,CAAN8vB,GAAqBC,MAAM,CAAC/vB,KAAK,CAACA,KAAP,CAA3B8vB;AADJ,eAGK,IAAIR,cAAc,CAACtvB,KAAD,CAAdsvB,IAAyBD,aAAa,CAACrvB,KAAD,CAA1C,EAAmD;AACpD8vB,gBAAM,CAACpoB,IAAI,CAAC1H,KAAN,CAAN8vB,GAAqB9vB,KAAK,CAACA,KAA3B8vB;AADC,eAGA,IAAIJ,aAAa,CAAC1vB,KAAD,CAAjB,EAA0B;AAC3B,cAAIgwB,cAAc,GAAG,EAArB;AACAhwB,eAAK,CAACsf,MAANtf,CAAakC,GAAblC,CAAiB,UAAUuD,GAAV,EAAe;AAC5B,mBAAO0rB,4BAA2B,CAACe,cAAD,EAAiBzsB,GAAG,CAACmE,IAArB,EAA2BnE,GAAG,CAACvD,KAA/B,EAAsCkG,SAAtC,CAAlC;AADJ;AAGA4pB,gBAAM,CAACpoB,IAAI,CAAC1H,KAAN,CAAN8vB,GAAqBE,cAArBF;AALC,eAOA,IAAIL,UAAU,CAACzvB,KAAD,CAAd,EAAuB;AACxB,cAAIiwB,aAAa,GAAG,CAAC/pB,SAAS,IAAI,EAAd,EAAkBlG,KAAK,CAAC0H,IAAN1H,CAAWA,KAA7B,CAApB;AACA8vB,gBAAM,CAACpoB,IAAI,CAAC1H,KAAN,CAAN8vB,GAAqBG,aAArBH;AAFC,eAIA,IAAIH,WAAW,CAAC3vB,KAAD,CAAf,EAAwB;AACzB8vB,gBAAM,CAACpoB,IAAI,CAAC1H,KAAN,CAAN8vB,GAAqB9vB,KAAK,CAACkwB,MAANlwB,CAAakC,GAAblC,CAAiB,UAAUmwB,SAAV,EAAqB;AACvD,gBAAIC,iBAAiB,GAAG,EAAxB;;AACAnB,wCAA2B,CAACmB,iBAAD,EAAoB1oB,IAApB,EAA0ByoB,SAA1B,EAAqCjqB,SAArC,CAA3B+oB;;AACA,mBAAOmB,iBAAiB,CAAC1oB,IAAI,CAAC1H,KAAN,CAAxB;AAHiB,YAArB8vB;AADC,eAOA,IAAIF,WAAW,CAAC5vB,KAAD,CAAf,EAAwB;AACzB8vB,gBAAM,CAACpoB,IAAI,CAAC1H,KAAN,CAAN8vB,GAAqB9vB,KAAK,CAACA,KAA3B8vB;AADC,eAGA,IAAID,WAAW,CAAC7vB,KAAD,CAAf,EAAwB;AACzB8vB,gBAAM,CAACpoB,IAAI,CAAC1H,KAAN,CAAN8vB,GAAqB,IAArBA;AADC,eAGA;AACD,gBAAMxtB,OAAO,GAAG,IAAI0F,6DAAJ,CAAmB,2BAA2BN,IAAI,CAAC1H,KAAhC,GAAwC,eAAxC,GAA0DA,KAAK,CAAC2O,IAAhE,GAAuE,IAAvE,GAC/B,iEAD+B,GAE/B,2BAFY,CAAH,GAEsB,IAAI3G,6DAAJ,CAAmB,EAAnB,CAFnC;AAGH;AACJ;;AACM,eAASqoB,sBAAT,CAA+Bzf,KAA/B,EAAsC1K,SAAtC,EAAiD;AACpD,YAAIoqB,aAAa,GAAG,IAApB;;AACA,YAAI1f,KAAK,CAACU,UAAV,EAAsB;AAClBgf,uBAAa,GAAG,EAAhBA;AACA1f,eAAK,CAACU,UAANV,CAAiB3N,OAAjB2N,CAAyB,UAAUW,SAAV,EAAqB;AAC1C+e,yBAAa,CAAC/e,SAAS,CAAC7J,IAAV6J,CAAevR,KAAhB,CAAbswB,GAAsC,EAAtCA;;AACA,gBAAI/e,SAAS,CAACrM,SAAd,EAAyB;AACrBqM,uBAAS,CAACrM,SAAVqM,CAAoBtO,OAApBsO,CAA4B,UAAU7K,EAAV,EAAc;AACtC,oBAAIgB,IAAI,GAAGhB,EAAE,CAACgB,IAAd;AAAA,oBAAoB1H,KAAK,GAAG0G,EAAE,CAAC1G,KAA/B;AACA,uBAAOivB,4BAA2B,CAACqB,aAAa,CAAC/e,SAAS,CAAC7J,IAAV6J,CAAevR,KAAhB,CAAd,EAAsC0H,IAAtC,EAA4C1H,KAA5C,EAAmDkG,SAAnD,CAAlC;AAFJ;AAIH;AAPL;AASH;;AACD,YAAI4pB,MAAM,GAAG,IAAb;;AACA,YAAIlf,KAAK,CAAC1L,SAAN0L,IAAmBA,KAAK,CAAC1L,SAAN0L,CAAgB7N,MAAvC,EAA+C;AAC3C+sB,gBAAM,GAAG,EAATA;AACAlf,eAAK,CAAC1L,SAAN0L,CAAgB3N,OAAhB2N,CAAwB,UAAUlK,EAAV,EAAc;AAClC,gBAAIgB,IAAI,GAAGhB,EAAE,CAACgB,IAAd;AAAA,gBAAoB1H,KAAK,GAAG0G,EAAE,CAAC1G,KAA/B;AACA,mBAAOivB,4BAA2B,CAACa,MAAD,EAASpoB,IAAT,EAAe1H,KAAf,EAAsBkG,SAAtB,CAAlC;AAFJ;AAIH;;AACD,eAAOqqB,gBAAe,CAAC3f,KAAK,CAAClJ,IAANkJ,CAAW5Q,KAAZ,EAAmB8vB,MAAnB,EAA2BQ,aAA3B,CAAtB;AACH;;AACD,UAAIE,gBAAgB,GAAG,CACnB,YADmB,EAEnB,SAFmB,EAGnB,MAHmB,EAInB,QAJmB,EAKnB,MALmB,EAMnB,QANmB,CAAvB;;AAQO,UAAID,gBAAe,GAAGhwB,MAAM,CAACqD,MAAPrD,CAAc,UAAUsQ,SAAV,EAAqB4f,IAArB,EAA2Bnf,UAA3B,EAAuC;AAC9E,YAAImf,IAAI,IACJnf,UADAmf,IAEAnf,UAAU,CAAC,YAAD,CAFVmf,IAGAnf,UAAU,CAAC,YAAD,CAAVA,CAAyB,KAAzBA,CAHJ,EAGqC;AACjC,cAAIA,UAAU,CAAC,YAAD,CAAVA,CAAyB,QAAzBA,KACAA,UAAU,CAAC,YAAD,CAAVA,CAAyB,QAAzBA,EAAmCvO,MAAnCuO,GAA4C,CADhD,EACmD;AAC/C,gBAAIof,UAAU,GAAGpf,UAAU,CAAC,YAAD,CAAVA,CAAyB,QAAzBA,IACXA,UAAU,CAAC,YAAD,CAAVA,CAAyB,QAAzBA,CADWA,GAEX,EAFN;AAGAof,sBAAU,CAACltB,IAAXktB;AACA,gBAAIC,cAAc,GAAG,EAArB;AACAD,sBAAU,CAACztB,OAAXytB,CAAmB,UAAUxtB,GAAV,EAAe;AAC9BytB,4BAAc,CAACztB,GAAD,CAAdytB,GAAsBF,IAAI,CAACvtB,GAAD,CAA1BytB;AADJ;AAGA,mBAAOrf,UAAU,CAAC,YAAD,CAAVA,CAAyB,KAAzBA,IAAkC,GAAlCA,GAAwC5N,SAAS,CAACitB,cAAD,CAAjDrf,GAAoE,GAA3E;AAVJ,iBAYK;AACD,mBAAOA,UAAU,CAAC,YAAD,CAAVA,CAAyB,KAAzBA,CAAP;AACH;AACJ;;AACD,YAAIsf,iBAAiB,GAAG/f,SAAxB;;AACA,YAAI4f,IAAJ,EAAU;AACN,cAAII,eAAe,GAAGntB,SAAS,CAAC+sB,IAAD,CAA/B;AACAG,2BAAiB,IAAI,MAAMC,eAAN,GAAwB,GAA7CD;AACH;;AACD,YAAItf,UAAJ,EAAgB;AACZ/Q,gBAAM,CAACmC,IAAPnC,CAAY+Q,UAAZ/Q,EAAwB0C,OAAxB1C,CAAgC,UAAU2C,GAAV,EAAe;AAC3C,gBAAIstB,gBAAgB,CAACtnB,OAAjBsnB,CAAyBttB,GAAzBstB,MAAkC,CAAC,CAAvC,EACI;;AACJ,gBAAIlf,UAAU,CAACpO,GAAD,CAAVoO,IAAmB/Q,MAAM,CAACmC,IAAPnC,CAAY+Q,UAAU,CAACpO,GAAD,CAAtB3C,EAA6BwC,MAApD,EAA4D;AACxD6tB,+BAAiB,IAAI,MAAM1tB,GAAN,GAAY,GAAZ,GAAkBQ,SAAS,CAAC4N,UAAU,CAACpO,GAAD,CAAX,CAA3B,GAA+C,GAApE0tB;AADJ,mBAGK;AACDA,+BAAiB,IAAI,MAAM1tB,GAA3B0tB;AACH;AARL;AAUH;;AACD,eAAOA,iBAAP;AAtCyB,SAuC1B;AACCE,oBAAY,EAAE,sBAAUC,CAAV,EAAa;AACvB,cAAIta,QAAQ,GAAG/S,SAAf;AACAA,mBAAS,GAAGqtB,CAAZrtB;AACA,iBAAO+S,QAAP;AACH;AALF,OAvC0BlW,CAAtB;;AA8CP,UAAImD,SAAS,GAAG,SAASstB,gBAAT,CAA0BhxB,KAA1B,EAAiC;AAC7C,eAAOyD,IAAI,CAACC,SAALD,CAAezD,KAAfyD,EAAsBwtB,iBAAtBxtB,CAAP;AADJ;;AAGA,eAASwtB,iBAAT,CAA2BlK,IAA3B,EAAiC/mB,KAAjC,EAAwC;AACpC,YAAI+gB,qEAAgB/gB,KAAhB+gB,KAA0B,CAAC7gB,KAAK,CAACC,OAAND,CAAcF,KAAdE,CAA/B,EAAqD;AACjDF,eAAK,GAAGO,MAAM,CAACmC,IAAPnC,CAAYP,KAAZO,EAAmBiD,IAAnBjD,GAA0B6jB,MAA1B7jB,CAAiC,UAAUoB,IAAV,EAAgBuB,GAAhB,EAAqB;AAC1DvB,gBAAI,CAACuB,GAAD,CAAJvB,GAAY3B,KAAK,CAACkD,GAAD,CAAjBvB;AACA,mBAAOA,IAAP;AAFI,aAGL,EAHKpB,CAARP;AAIH;;AACD,eAAOA,KAAP;AACH;;AACM,eAASqR,yBAAT,CAAkCT,KAAlC,EAAyC1K,SAAzC,EAAoD;AACvD,YAAI0K,KAAK,CAAC1L,SAAN0L,IAAmBA,KAAK,CAAC1L,SAAN0L,CAAgB7N,MAAvC,EAA+C;AAC3C,cAAImuB,QAAQ,GAAG,EAAf;AACAtgB,eAAK,CAAC1L,SAAN0L,CAAgB3N,OAAhB2N,CAAwB,UAAUlK,EAAV,EAAc;AAClC,gBAAIgB,IAAI,GAAGhB,EAAE,CAACgB,IAAd;AAAA,gBAAoB1H,KAAK,GAAG0G,EAAE,CAAC1G,KAA/B;AACA,mBAAOivB,4BAA2B,CAACiC,QAAD,EAAWxpB,IAAX,EAAiB1H,KAAjB,EAAwBkG,SAAxB,CAAlC;AAFJ;AAIA,iBAAOgrB,QAAP;AACH;;AACD,eAAO,IAAP;AACH;;AACM,eAAS3gB,uBAAT,CAAgCK,KAAhC,EAAuC;AAC1C,eAAOA,KAAK,CAACugB,KAANvgB,GAAcA,KAAK,CAACugB,KAANvgB,CAAY5Q,KAA1B4Q,GAAkCA,KAAK,CAAClJ,IAANkJ,CAAW5Q,KAApD;AACH;;AACM,eAASoxB,sBAAT,CAA+BplB,MAA/B,EAAuC8D,YAAvC,EAAqDX,WAArD,EAAkE;AACrE,YAAI,OAAOnD,MAAM,CAACoF,UAAd,KAA6B,QAAjC,EAA2C;AACvC,iBAAOpF,MAAM,CAACoF,UAAd;AACH;;AACD,aAAK,IAAIsY,EAAE,GAAG,CAAT,EAAYhjB,EAAE,GAAGoJ,YAAY,CAACY,UAAnC,EAA+CgZ,EAAE,GAAGhjB,EAAE,CAAC3D,MAAvD,EAA+D2mB,EAAE,EAAjE,EAAqE;AACjE,cAAI1Z,SAAS,GAAGtJ,EAAE,CAACgjB,EAAD,CAAlB;;AACA,cAAItZ,QAAO,CAACJ,SAAD,CAAX,EAAwB;AACpB,gBAAIA,SAAS,CAACtI,IAAVsI,CAAehQ,KAAfgQ,KAAyB,YAA7B,EAA2C;AACvC,qBAAOhE,MAAM,CAACuE,uBAAsB,CAACP,SAAD,CAAvB,CAAb;AACH;AAHL,iBAKK;AACD,gBAAIqhB,QAAQ,GAAGD,sBAAqB,CAACplB,MAAD,EAASwiB,yEAAyBxe,SAAzBwe,EAAoCrf,WAApCqf,EAAiD1e,YAA1D,EAAwEX,WAAxE,CAApC;;AACA,gBAAI,OAAOkiB,QAAP,KAAoB,QAAxB,EAAkC;AAC9B,qBAAOA,QAAP;AACH;AACJ;AACJ;AACJ;;AACM,eAASjhB,QAAT,CAAiBJ,SAAjB,EAA4B;AAC/B,eAAOA,SAAS,CAACrB,IAAVqB,KAAmB,OAA1B;AACH;;AACM,eAASQ,iBAAT,CAA0BR,SAA1B,EAAqC;AACxC,eAAOA,SAAS,CAACrB,IAAVqB,KAAmB,gBAA1B;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvMD,UAAIshB,cAAc,GAAG;AACjB3iB,YAAI,EAAE,OADW;AAEjBjH,YAAI,EAAE;AACFiH,cAAI,EAAE,MADJ;AAEF3O,eAAK,EAAE;AAFL;AAFW,OAArB;;AAOA,eAASuxB,OAAT,CAAiB3N,EAAjB,EAAqB1U,SAArB,EAAgC;AAC5B,eAAO0U,EAAE,CAAC9T,YAAH8T,CAAgBlT,UAAhBkT,CAA2B6J,KAA3B7J,CAAiC,UAAU5T,SAAV,EAAqB;AACzD,iBAAOA,SAAS,CAACrB,IAAVqB,KAAmB,gBAAnBA,IACHuhB,OAAO,CAACriB,SAAS,CAACc,SAAS,CAACtI,IAAVsI,CAAehQ,KAAhB,CAAV,EAAkCkP,SAAlC,CADX;AADG,UAAP;AAIH;;AACD,eAASsiB,gBAAT,CAA0BnR,GAA1B,EAA+B;AAC3B,eAAOkR,OAAO,CAACre,wEAAuBmN,GAAvBnN,KAA+Bwb,uEAAsBrO,GAAtBqO,CAAhC,EAA4Djf,kEAAkBD,wEAAuB6Q,GAAvB7Q,CAAlBC,CAA5D,CAAP8hB,GACD,IADCA,GAEDlR,GAFN;AAGH;;AACD,eAASoR,mBAAT,CAA6BngB,UAA7B,EAAyC;AACrC,eAAO,SAASogB,gBAAT,CAA0BngB,SAA1B,EAAqC;AACxC,iBAAOD,UAAU,CAAC7C,IAAX6C,CAAgB,UAAUqgB,GAAV,EAAe;AAClC,mBAAQA,GAAG,CAACjqB,IAAJiqB,IAAYA,GAAG,CAACjqB,IAAJiqB,KAAapgB,SAAS,CAAC7J,IAAV6J,CAAevR,KAAxC2xB,IACHA,GAAG,CAACnN,IAAJmN,IAAYA,GAAG,CAACnN,IAAJmN,CAASpgB,SAATogB,CADjB;AADG,YAAP;AADJ;AAMH;;AACM,eAASC,6BAAT,CAAsCtgB,UAAtC,EAAkD+O,GAAlD,EAAuD;AAC1D,YAAIwR,cAAc,GAAGtxB,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAArB;AACA,YAAIuxB,iBAAiB,GAAG,EAAxB;AACA,YAAIC,oBAAoB,GAAGxxB,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAA3B;AACA,YAAIyxB,uBAAuB,GAAG,EAA9B;AACA,YAAIC,WAAW,GAAGT,gBAAgB,CAACljB,gDAAM+R,GAAN/R,EAAW;AAC1CwY,kBAAQ,EAAE;AACNtY,iBAAK,EAAE,eAAUrM,IAAV,EAAgB4kB,IAAhB,EAAsBC,MAAtB,EAA8B;AACjC,kBAAIA,MAAM,CAACrY,IAAPqY,KAAgB,oBAApB,EAA0C;AACtC6K,8BAAc,CAAC1vB,IAAI,CAACuF,IAALvF,CAAUnC,KAAX,CAAd6xB,GAAkC,IAAlCA;AACH;AACJ;AALK,WADgC;AAQ1CK,eAAK,EAAE;AACH1jB,iBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB,kBAAImP,UAAU,IAAInP,IAAI,CAACmP,UAAvB,EAAmC;AAC/B,oBAAI6gB,iBAAiB,GAAG7gB,UAAU,CAAC7C,IAAX6C,CAAgB,UAAUC,SAAV,EAAqB;AAAE,yBAAOA,SAAS,CAAC6b,MAAjB;AAAvC,kBAAxB;;AACA,oBAAI+E,iBAAiB,IACjBhwB,IAAI,CAACmP,UADL6gB,IAEAhwB,IAAI,CAACmP,UAALnP,CAAgBsM,IAAhBtM,CAAqBsvB,mBAAmB,CAACngB,UAAD,CAAxCnP,CAFJ,EAE2D;AACvD,sBAAIA,IAAI,CAAC+C,SAAT,EAAoB;AAChB/C,wBAAI,CAAC+C,SAAL/C,CAAec,OAAfd,CAAuB,UAAUuM,GAAV,EAAe;AAClC,0BAAIA,GAAG,CAAC1O,KAAJ0O,CAAUC,IAAVD,KAAmB,UAAvB,EAAmC;AAC/BojB,yCAAiB,CAAClvB,IAAlBkvB,CAAuB;AACnBpqB,8BAAI,EAAEgH,GAAG,CAAC1O,KAAJ0O,CAAUhH,IAAVgH,CAAe1O;AADF,yBAAvB8xB;AAGH;AALL;AAOH;;AACD,sBAAI3vB,IAAI,CAAC2N,YAAT,EAAuB;AACnBsiB,yDAAqC,CAACjwB,IAAI,CAAC2N,YAAN,CAArCsiB,CAAyDnvB,OAAzDmvB,CAAiE,UAAUC,IAAV,EAAgB;AAC7EL,6CAAuB,CAACpvB,IAAxBovB,CAA6B;AACzBtqB,4BAAI,EAAE2qB,IAAI,CAAC3qB,IAAL2qB,CAAUryB;AADS,uBAA7BgyB;AADJ;AAKH;;AACD,yBAAO,IAAP;AACH;AACJ;AACJ;AA1BE,WARmC;AAoC1CM,wBAAc,EAAE;AACZ9jB,iBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB4vB,kCAAoB,CAAC5vB,IAAI,CAACuF,IAALvF,CAAUnC,KAAX,CAApB+xB,GAAwC,IAAxCA;AACH;AAHW,WApC0B;AAyC1CxjB,mBAAS,EAAE;AACPC,iBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB,kBAAIsvB,mBAAmB,CAACngB,UAAD,CAAnBmgB,CAAgCtvB,IAAhCsvB,CAAJ,EAA2C;AACvC,uBAAO,IAAP;AACH;AACJ;AALM;AAzC+B,SAAXnjB,CAAD,CAAlC;;AAiDA,YAAI2jB,WAAW,IACX/G,yEAAc4G,iBAAd5G,EAAiC,UAAUrV,CAAV,EAAa;AAAE,iBAAO,CAAC,CAACA,CAAC,CAACnO,IAAJ,IAAY,CAACmqB,cAAc,CAAChc,CAAC,CAACnO,IAAH,CAAlC;AAAnC,SAAbwjB,EAA+FnoB,MADnG,EAC2G;AACvGkvB,qBAAW,GAAGM,4BAA2B,CAACT,iBAAD,EAAoBG,WAApB,CAAzCA;AACH;;AACD,YAAIA,WAAW,IACX/G,yEAAc8G,uBAAd9G,EAAuC,UAAUsH,EAAV,EAAc;AAAE,iBAAO,CAAC,CAACA,EAAE,CAAC9qB,IAAL,IAAa,CAACqqB,oBAAoB,CAACS,EAAE,CAAC9qB,IAAJ,CAAzC;AAA1C,SAAbwjB,EACKnoB,MAFT,EAEiB;AACbkvB,qBAAW,GAAGQ,iCAAgC,CAACT,uBAAD,EAA0BC,WAA1B,CAA9CA;AACH;;AACD,eAAOA,WAAP;AACH;;AACM,UAAIS,sBAAqB,GAAGnyB,MAAM,CAACqD,MAAPrD,CAAc,UAAU8f,GAAV,EAAe;AAC5D,eAAO/R,gDAAMmgB,+DAAcpO,GAAdoO,CAANngB,EAA0B;AAC7BqkB,sBAAY,EAAE;AACVnkB,iBAAK,EAAE,eAAUrM,IAAV,EAAgB4kB,IAAhB,EAAsBC,MAAtB,EAA8B;AACjC,kBAAIA,MAAM,IACNA,MAAM,CAACrY,IAAPqY,KAAgB,qBADpB,EAC2C;AACvC;AACH;;AACD,kBAAItW,UAAU,GAAGvO,IAAI,CAACuO,UAAtB;;AACA,kBAAI,CAACA,UAAL,EAAiB;AACb;AACH;;AACD,kBAAIkiB,IAAI,GAAGliB,UAAU,CAACjC,IAAXiC,CAAgB,UAAUV,SAAV,EAAqB;AAC5C,uBAAQI,yDAAQJ,SAARI,MACHJ,SAAS,CAACtI,IAAVsI,CAAehQ,KAAfgQ,KAAyB,YAAzBA,IACGA,SAAS,CAACtI,IAAVsI,CAAehQ,KAAfgQ,CAAqB6iB,WAArB7iB,CAAiC,IAAjCA,EAAuC,CAAvCA,MAA8C,CAF9CI,CAAR;AADO,gBAAX;;AAKA,kBAAIwiB,IAAJ,EAAU;AACN;AACH;;AACD,kBAAIhiB,KAAK,GAAGoW,MAAZ;;AACA,kBAAI5W,yDAAQQ,KAARR,KACAQ,KAAK,CAACU,UADNlB,IAEAQ,KAAK,CAACU,UAANV,CAAiBnC,IAAjBmC,CAAsB,UAAU0W,CAAV,EAAa;AAAE,uBAAOA,CAAC,CAAC5f,IAAF4f,CAAOtnB,KAAPsnB,KAAiB,QAAxB;AAArC,gBAFJ,EAE+E;AAC3E;AACH;;AACD,qBAAOjnB,iDAASA,iDAAS,EAATA,EAAa8B,IAAb9B,CAATA,EAA6B;AAAEqQ,0BAAU,EAAE4b,sDAAcA,sDAAc,EAAdA,EAAkB5b,UAAlB4b,EAA8B,IAA9BA,CAAdA,EAAmD,CAACgF,cAAD,CAAnDhF,EAAqE,KAArEA;AAAd,eAA7BjsB,CAAP;AACH;AAzBS;AADe,SAA1BiO,CAAP;AAD+B,SA8BhC;AACCwkB,aAAK,EAAE,eAAUliB,KAAV,EAAiB;AACpB,iBAAOA,KAAK,KAAK0gB,cAAjB;AACH;AAHF,OA9BgC/wB,CAA5B;;AAmCP,UAAIwyB,sBAAsB,GAAG;AACzBvO,YAAI,EAAE,cAAUjT,SAAV,EAAqB;AACvB,cAAIyhB,UAAU,GAAGzhB,SAAS,CAAC7J,IAAV6J,CAAevR,KAAfuR,KAAyB,YAA1C;;AACA,cAAIyhB,UAAJ,EAAgB;AACZ,gBAAI,CAACzhB,SAAS,CAACrM,SAAX,IACA,CAACqM,SAAS,CAACrM,SAAVqM,CAAoB9C,IAApB8C,CAAyB,UAAU7C,GAAV,EAAe;AAAE,qBAAOA,GAAG,CAAChH,IAAJgH,CAAS1O,KAAT0O,KAAmB,KAA1B;AAA1C,cADL,EACoF;AAChFpM,qBAAO,IAAI6G,8DAAe,2EACtB,+DADOA,CAAX7G;AAEH;AACJ;;AACD,iBAAO0wB,UAAP;AACH;AAXwB,OAA7B;;AAaO,eAASlT,sCAAT,CAA+CO,GAA/C,EAAoD;AACvD,eAAOuR,6BAA4B,CAAC,CAACmB,sBAAD,CAAD,EAA2BtE,+DAAcpO,GAAdoO,CAA3B,CAAnC;AACH;;AACD,eAASwE,2BAAT,CAAqC3hB,UAArC,EAAiDxB,YAAjD,EAA+DojB,WAA/D,EAA4E;AACxE,YAAIA,WAAW,KAAK,KAAK,CAAzB,EAA4B;AAAEA,qBAAW,GAAG,IAAdA;AAAqB;;AACnD,eAAQ,CAAC,CAACpjB,YAAF,IACJA,YAAY,CAACY,UADT,IAEJZ,YAAY,CAACY,UAAbZ,CAAwBrB,IAAxBqB,CAA6B,UAAUE,SAAV,EAAqB;AAC9C,iBAAOmjB,wBAAwB,CAAC7hB,UAAD,EAAatB,SAAb,EAAwBkjB,WAAxB,CAA/B;AADJ,UAFJ;AAKH;;AACD,eAASC,wBAAT,CAAkC7hB,UAAlC,EAA8CtB,SAA9C,EAAyDkjB,WAAzD,EAAsE;AAClE,YAAIA,WAAW,KAAK,KAAK,CAAzB,EAA4B;AAAEA,qBAAW,GAAG,IAAdA;AAAqB;;AACnD,YAAI,CAAC9iB,yDAAQJ,SAARI,CAAL,EAAyB;AACrB,iBAAO,IAAP;AACH;;AACD,YAAI,CAACJ,SAAS,CAACsB,UAAf,EAA2B;AACvB,iBAAO,KAAP;AACH;;AACD,eAAQtB,SAAS,CAACsB,UAAVtB,CAAqBvB,IAArBuB,CAA0ByhB,mBAAmB,CAACngB,UAAD,CAA7CtB,KACHkjB,WAAW,IACRD,2BAA2B,CAAC3hB,UAAD,EAAatB,SAAS,CAACF,YAAvB,EAAqCojB,WAArC,CAFnC;AAGH;;AACD,eAASE,kBAAT,CAA4BzJ,MAA5B,EAAoC;AAChC,eAAO,SAAS0J,eAAT,CAAyBC,QAAzB,EAAmC;AACtC,iBAAO3J,MAAM,CAAClb,IAAPkb,CAAY,UAAU4J,OAAV,EAAmB;AAClC,mBAAOD,QAAQ,CAACtzB,KAATszB,IACHA,QAAQ,CAACtzB,KAATszB,CAAe3kB,IAAf2kB,KAAwB,UADrBA,IAEHA,QAAQ,CAACtzB,KAATszB,CAAe5rB,IAFZ4rB,KAGFC,OAAO,CAAC7rB,IAAR6rB,KAAiBD,QAAQ,CAACtzB,KAATszB,CAAe5rB,IAAf4rB,CAAoBtzB,KAArCuzB,IACIA,OAAO,CAAC/O,IAAR+O,IAAgBA,OAAO,CAAC/O,IAAR+O,CAAaD,QAAbC,CAJlBD,CAAP;AADG,YAAP;AADJ;AASH;;AACM,eAASf,4BAAT,CAAqC5I,MAArC,EAA6CtJ,GAA7C,EAAkD;AACrD,YAAImT,UAAU,GAAGJ,kBAAkB,CAACzJ,MAAD,CAAnC;AACA,eAAO6H,gBAAgB,CAACljB,gDAAM+R,GAAN/R,EAAW;AAC/BmlB,6BAAmB,EAAE;AACjBjlB,iBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB,qBAAO9B,iDAASA,iDAAS,EAATA,EAAa8B,IAAb9B,CAATA,EAA6B;AAAEuV,mCAAmB,EAAEzT,IAAI,CAACyT,mBAALzT,GAA2BA,IAAI,CAACyT,mBAALzT,CAAyBuJ,MAAzBvJ,CAAgC,UAAUuxB,MAAV,EAAkB;AAChI,yBAAO,CAAC/J,MAAM,CAAClb,IAAPkb,CAAY,UAAUjb,GAAV,EAAe;AAAE,2BAAOA,GAAG,CAAChH,IAAJgH,KAAaglB,MAAM,CAAC5d,QAAP4d,CAAgBhsB,IAAhBgsB,CAAqB1zB,KAAzC;AAA7B,oBAAR;AAD8E,kBAA3BmC,GAElD;AAF2B,eAA7B9B,CAAP;AAGH;AALgB,WADU;AAQ/B6xB,eAAK,EAAE;AACH1jB,iBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB,kBAAIgwB,iBAAiB,GAAGxI,MAAM,CAAClb,IAAPkb,CAAY,UAAUgK,SAAV,EAAqB;AAAE,uBAAOA,SAAS,CAACvG,MAAjB;AAAnC,gBAAxB;;AACA,kBAAI+E,iBAAJ,EAAuB;AACnB,oBAAIyB,eAAe,GAAG,CAAtB;;AACA,oBAAIzxB,IAAI,CAAC+C,SAAT,EAAoB;AAChB/C,sBAAI,CAAC+C,SAAL/C,CAAec,OAAfd,CAAuB,UAAUuM,GAAV,EAAe;AAClC,wBAAI8kB,UAAU,CAAC9kB,GAAD,CAAd,EAAqB;AACjBklB,qCAAe,IAAI,CAAnBA;AACH;AAHL;AAKH;;AACD,oBAAIA,eAAe,KAAK,CAAxB,EAA2B;AACvB,yBAAO,IAAP;AACH;AACJ;AACJ;AAhBE,WARwB;AA0B/BC,kBAAQ,EAAE;AACNrlB,iBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB,kBAAIqxB,UAAU,CAACrxB,IAAD,CAAd,EAAsB;AAClB,uBAAO,IAAP;AACH;AACJ;AALK;AA1BqB,SAAXmM,CAAD,CAAvB;AAkCH;;AACM,eAASmkB,iCAAT,CAA0C9I,MAA1C,EAAkDtJ,GAAlD,EAAuD;AAC1D,iBAAS7R,KAAT,CAAerM,IAAf,EAAqB;AACjB,cAAIwnB,MAAM,CAAClb,IAAPkb,CAAY,UAAUvJ,GAAV,EAAe;AAAE,mBAAOA,GAAG,CAAC1Y,IAAJ0Y,KAAaje,IAAI,CAACuF,IAALvF,CAAUnC,KAA9B;AAA7B,YAAJ,EAA0E;AACtE,mBAAO,IAAP;AACH;AACJ;;AACD,eAAOwxB,gBAAgB,CAACljB,gDAAM+R,GAAN/R,EAAW;AAC/BgkB,wBAAc,EAAE;AAAE9jB,iBAAK,EAAEA;AAAT,WADe;AAE/BslB,4BAAkB,EAAE;AAAEtlB,iBAAK,EAAEA;AAAT;AAFW,SAAXF,CAAD,CAAvB;AAIH;;AACD,eAAS8jB,qCAAT,CAA+CtiB,YAA/C,EAA6D;AACzD,YAAIikB,YAAY,GAAG,EAAnB;AACAjkB,oBAAY,CAACY,UAAbZ,CAAwB7M,OAAxB6M,CAAgC,UAAUE,SAAV,EAAqB;AACjD,cAAI,CAACI,yDAAQJ,SAARI,KAAsBI,kEAAiBR,SAAjBQ,CAAvB,KACAR,SAAS,CAACF,YADd,EAC4B;AACxBsiB,iDAAqC,CAACpiB,SAAS,CAACF,YAAX,CAArCsiB,CAA8DnvB,OAA9DmvB,CAAsE,UAAUC,IAAV,EAAgB;AAAE,qBAAO0B,YAAY,CAACnxB,IAAbmxB,CAAkB1B,IAAlB0B,CAAP;AAAxF;AAFJ,iBAIK,IAAI/jB,SAAS,CAACrB,IAAVqB,KAAmB,gBAAvB,EAAyC;AAC1C+jB,wBAAY,CAACnxB,IAAbmxB,CAAkB/jB,SAAlB+jB;AACH;AAPL;AASA,eAAOA,YAAP;AACH;;AACM,eAASjlB,2BAAT,CAAoCrG,QAApC,EAA8C;AACjD,YAAI6lB,UAAU,GAAG/e,mEAAkB9G,QAAlB8G,CAAjB;AACA,YAAIH,mBAAmB,GAAGkf,UAAU,CAAC5e,SAArC;;AACA,YAAIN,mBAAmB,KAAK,OAA5B,EAAqC;AACjC,iBAAO3G,QAAP;AACH;;AACD,YAAIwpB,WAAW,GAAG3jB,gDAAM7F,QAAN6F,EAAgB;AAC9BmlB,6BAAmB,EAAE;AACjBjlB,iBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB,qBAAO9B,iDAASA,iDAAS,EAATA,EAAa8B,IAAb9B,CAATA,EAA6B;AAAEqP,yBAAS,EAAE;AAAb,eAA7BrP,CAAP;AACH;AAHgB;AADS,SAAhBiO,CAAlB;AAOA,eAAO2jB,WAAP;AACH;;AACM,eAASpkB,6BAAT,CAAsCpF,QAAtC,EAAgD;AACnDgmB,uEAAchmB,QAAdgmB;;AACA,YAAIwD,WAAW,GAAGL,6BAA4B,CAAC,CAC3C;AACIpN,cAAI,EAAE,cAAUjT,SAAV,EAAqB;AAAE,mBAAOA,SAAS,CAAC7J,IAAV6J,CAAevR,KAAfuR,KAAyB,QAAhC;AADjC;AAEI6b,gBAAM,EAAE;AAFZ,SAD2C,CAAD,EAK3C3kB,QAL2C,CAA9C;;AAMA,YAAIwpB,WAAJ,EAAiB;AACbA,qBAAW,GAAG3jB,gDAAM2jB,WAAN3jB,EAAmB;AAC7BwlB,8BAAkB,EAAE;AAChBtlB,mBAAK,EAAE,eAAUrM,IAAV,EAAgB;AACnB,oBAAIA,IAAI,CAAC2N,YAAT,EAAuB;AACnB,sBAAIkkB,cAAc,GAAG7xB,IAAI,CAAC2N,YAAL3N,CAAkBuO,UAAlBvO,CAA6BsrB,KAA7BtrB,CAAmC,UAAU6N,SAAV,EAAqB;AACzE,2BAAOI,yDAAQJ,SAARI,KAAsBJ,SAAS,CAACtI,IAAVsI,CAAehQ,KAAfgQ,KAAyB,YAAtD;AADiB,oBAArB;;AAGA,sBAAIgkB,cAAJ,EAAoB;AAChB,2BAAO,IAAP;AACH;AACJ;AACJ;AAVe;AADS,WAAnB1lB,CAAd2jB;AAcH;;AACD,eAAOA,WAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrRD,eAASgC,aAAT,CAAuBj0B,KAAvB,EAA8B;AAC1B,eAAOA,KAAK,IAAI,OAAOA,KAAK,CAACqL,IAAb,KAAsB,UAAtC;AACH;;AACD,UAAIyW,QAAO,GAAI,UAAUjQ,MAAV,EAAkB;AAC7BC,0DAAUgQ,OAAVhQ,EAAmBD,MAAnBC;;AACA,iBAASgQ,OAAT,CAAiB4J,OAAjB,EAA0B;AACtB,cAAI7pB,KAAK,GAAGgQ,MAAM,CAACG,IAAPH,CAAY,IAAZA,EAAkB,UAAUI,QAAV,EAAoB;AAC9CpQ,iBAAK,CAAC4W,WAAN5W,CAAkBoQ,QAAlBpQ;;AACA,mBAAO,YAAY;AAAE,qBAAOA,KAAK,CAAC2W,cAAN3W,CAAqBoQ,QAArBpQ,CAAP;AAArB;AAFQ,gBAGN,IAHN;;AAIAA,eAAK,CAAC0Q,SAAN1Q,GAAkB,IAAIhB,GAAJ,EAAlBgB;AACAA,eAAK,CAACqyB,QAANryB,GAAiB,CAAjBA;AACAA,eAAK,CAAC6W,OAAN7W,GAAgB,IAAIsJ,OAAJ,CAAY,UAAUC,OAAV,EAAmBoI,MAAnB,EAA2B;AACnD3R,iBAAK,CAACuJ,OAANvJ,GAAgBuJ,OAAhBvJ;AACAA,iBAAK,CAAC2R,MAAN3R,GAAe2R,MAAf3R;AAFY,YAAhBA;AAIAA,eAAK,CAACsyB,QAANtyB,GAAiB;AACb6Q,gBAAI,EAAE,cAAU1G,MAAV,EAAkB;AACpB,kBAAInK,KAAK,CAACkX,GAANlX,KAAc,IAAlB,EAAwB;AACpBA,qBAAK,CAACuyB,MAANvyB,GAAe,CAAC,MAAD,EAASmK,MAAT,CAAfnK;AACA8W,uFAAuB9W,KAAK,CAAC0Q,SAA7BoG,EAAwC,MAAxCA,EAAgD3M,MAAhD2M;AACH;AALQ;AAObzM,iBAAK,EAAE,eAAUA,OAAV,EAAiB;AACpB,kBAAI6M,GAAG,GAAGlX,KAAK,CAACkX,GAAhB;;AACA,kBAAIA,GAAG,KAAK,IAAZ,EAAkB;AACd,oBAAIA,GAAJ,EACI7Q,UAAU,CAAC,YAAY;AAAE,yBAAO6Q,GAAG,CAACpF,WAAJoF,EAAP;AAAf,kBAAV7Q;AACJrG,qBAAK,CAACkX,GAANlX,GAAY,IAAZA;AACAA,qBAAK,CAACuyB,MAANvyB,GAAe,CAAC,OAAD,EAAUqK,OAAV,CAAfrK;;AACAA,qBAAK,CAAC2R,MAAN3R,CAAaqK,OAAbrK;;AACA8W,uFAAuB9W,KAAK,CAAC0Q,SAA7BoG,EAAwC,OAAxCA,EAAiDzM,OAAjDyM;AACH;AAhBQ;AAkBbnE,oBAAQ,EAAE,oBAAY;AAClB,kBAAI3S,KAAK,CAACkX,GAANlX,KAAc,IAAlB,EAAwB;AACpB,oBAAI7B,KAAK,GAAG6B,KAAK,CAAC6pB,OAAN7pB,CAAcwyB,KAAdxyB,EAAZ;;AACA,oBAAI,CAAC7B,KAAL,EAAY;AACR6B,uBAAK,CAACkX,GAANlX,GAAY,IAAZA;;AACA,sBAAIA,KAAK,CAACuyB,MAANvyB,IACAA,KAAK,CAACuyB,MAANvyB,CAAa,CAAbA,MAAoB,MADxB,EACgC;AAC5BA,yBAAK,CAACuJ,OAANvJ,CAAcA,KAAK,CAACuyB,MAANvyB,CAAa,CAAbA,CAAdA;AAFJ,yBAIK;AACDA,yBAAK,CAACuJ,OAANvJ;AACH;;AACD8W,yFAAuB9W,KAAK,CAAC0Q,SAA7BoG,EAAwC,UAAxCA;AATJ,uBAWK,IAAIsb,aAAa,CAACj0B,KAAD,CAAjB,EAA0B;AAC3BA,uBAAK,CAACqL,IAANrL,CAAW,UAAUs0B,GAAV,EAAe;AAAE,2BAAOzyB,KAAK,CAACkX,GAANlX,GAAYyyB,GAAG,CAAChqB,SAAJgqB,CAAczyB,KAAK,CAACsyB,QAApBG,CAAnB;AAA5B;AADC,uBAGA;AACDzyB,uBAAK,CAACkX,GAANlX,GAAY7B,KAAK,CAACsK,SAANtK,CAAgB6B,KAAK,CAACsyB,QAAtBn0B,CAAZ6B;AACH;AACJ;AACJ;AAvCY,WAAjBA;;AAyCAA,eAAK,CAACoZ,MAANpZ,GAAe,UAAU2gB,MAAV,EAAkB;AAC7B3gB,iBAAK,CAAC2R,MAAN3R,CAAa2gB,MAAb3gB;;AACAA,iBAAK,CAAC6pB,OAAN7pB,GAAgB,EAAhBA;;AACAA,iBAAK,CAACsyB,QAANtyB,CAAe2S,QAAf3S;AAHJ;;AAKAA,eAAK,CAAC6W,OAAN7W,UAAoB,UAAU0yB,CAAV,EAAa,CAAjC;;AACA,cAAI,OAAO7I,OAAP,KAAmB,UAAvB,EAAmC;AAC/BA,mBAAO,GAAG,CAAC,IAAI1S,sDAAJ,CAAe0S,OAAf,CAAD,CAAVA;AACH;;AACD,cAAIuI,aAAa,CAACvI,OAAD,CAAjB,EAA4B;AACxBA,mBAAO,CAACrgB,IAARqgB,CAAa,UAAU8I,QAAV,EAAoB;AAAE,qBAAO3yB,KAAK,CAAC4yB,KAAN5yB,CAAY2yB,QAAZ3yB,CAAP;AAAnC,eAAoEA,KAAK,CAACsyB,QAANtyB,CAAeqK,KAAnFwf;AADJ,iBAGK;AACD7pB,iBAAK,CAAC4yB,KAAN5yB,CAAY6pB,OAAZ7pB;AACH;;AACD,iBAAOA,KAAP;AACH;;AACDigB,eAAO,CAACvgB,SAARugB,CAAkB2S,KAAlB3S,GAA0B,UAAU4J,OAAV,EAAmB;AACzC,cAAI,KAAK3S,GAAL,KAAa,KAAK,CAAtB,EACI;AACJ,eAAK2S,OAAL,GAAexrB,KAAK,CAACoF,IAANpF,CAAWwrB,OAAXxrB,CAAf;AACA,eAAKi0B,QAAL,CAAc3f,QAAd;AAJJ;;AAMAsN,eAAO,CAACvgB,SAARugB,CAAkB4S,kBAAlB5S,GAAuC,UAAU7P,QAAV,EAAoB;AACvD,cAAI,KAAKmiB,MAAT,EAAiB;AACb,gBAAIO,WAAW,GAAG,KAAKP,MAAL,CAAY,CAAZ,CAAlB;AACA,gBAAI7M,MAAM,GAAGtV,QAAQ,CAAC0iB,WAAD,CAArB;;AACA,gBAAIpN,MAAJ,EAAY;AACRA,oBAAM,CAACvV,IAAPuV,CAAYtV,QAAZsV,EAAsB,KAAK6M,MAAL,CAAY,CAAZ,CAAtB7M;AACH;;AACD,gBAAI,KAAKxO,GAAL,KAAa,IAAb,IACA4b,WAAW,KAAK,MADhB,IAEA1iB,QAAQ,CAACuC,QAFb,EAEuB;AACnBvC,sBAAQ,CAACuC,QAATvC;AACH;AACJ;AAZL;;AAcA6P,eAAO,CAACvgB,SAARugB,CAAkBrJ,WAAlBqJ,GAAgC,UAAU7P,QAAV,EAAoB;AAChD,cAAI,CAAC,KAAKM,SAAL,CAAe9Q,GAAf,CAAmBwQ,QAAnB,CAAL,EAAmC;AAC/B,iBAAKyiB,kBAAL,CAAwBziB,QAAxB;AACA,iBAAKM,SAAL,CAAelQ,GAAf,CAAmB4P,QAAnB;AACA,cAAE,KAAKiiB,QAAP;AACH;AALL;;AAOApS,eAAO,CAACvgB,SAARugB,CAAkBtJ,cAAlBsJ,GAAmC,UAAU7P,QAAV,EAAoB2iB,OAApB,EAA6B;AAC5D,cAAI,KAAKriB,SAAL,WAAsBN,QAAtB,KACA,EAAE,KAAKiiB,QAAP,GAAkB,CADlB,IAEA,CAACU,OAFL,EAEc;AACV,iBAAKT,QAAL,CAAcjoB,KAAd,CAAoB,IAAIwX,KAAJ,CAAU,kCAAV,CAApB;AACH;AALL;;AAOA5B,eAAO,CAACvgB,SAARugB,CAAkBC,OAAlBD,GAA4B,UAAU1G,QAAV,EAAoB;AAC5C,cAAIvZ,KAAK,GAAG,IAAZ;;AACA,cAAIgzB,MAAM,GAAG,KAAb;;AACA,cAAIC,IAAI,GAAG,SAAPA,IAAO,GAAY;AACnB,gBAAI,CAACD,MAAL,EAAa;AACTA,oBAAM,GAAG,IAATA;;AACAhzB,mBAAK,CAAC0Q,SAAN1Q,WAAuBoQ,QAAvBpQ;;AACAuZ,sBAAQ;AACX;AALL;;AAOA,cAAInJ,QAAQ,GAAG;AACXS,gBAAI,EAAEoiB,IADK;AAEX5oB,iBAAK,EAAE4oB,IAFI;AAGXtgB,oBAAQ,EAAEsgB;AAHC,WAAf;AAKA,cAAIvJ,KAAK,GAAG,KAAK2I,QAAjB;AACA,eAAKzb,WAAL,CAAiBxG,QAAjB;AACA,eAAKiiB,QAAL,GAAgB3I,KAAhB;AAjBJ;;AAmBA,eAAOzJ,OAAP;AA5HW,QA6Hb9I,sDA7Ha,CAAf;;AA+HAC,8EAAsB6I,QAAtB7I;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrIO,eAAS+E,SAAT,CAAkBsC,UAAlB,EAA8BpJ,KAA9B,EAAqC6d,OAArC,EAA8C;AACjD,eAAO,IAAI/b,sDAAJ,CAAe,UAAU/G,QAAV,EAAoB;AACtC,cAAIS,IAAI,GAAGT,QAAQ,CAACS,IAApB;AAAA,cAA0BxG,KAAK,GAAG+F,QAAQ,CAAC/F,KAA3C;AAAA,cAAkDsI,SAAQ,GAAGvC,QAAQ,CAACuC,QAAtE;AACA,cAAIwgB,mBAAmB,GAAG,CAA1B;AACA,cAAIC,SAAS,GAAG,KAAhB;AACA,cAAIC,YAAY,GAAG;AACf7pB,gBAAI,EAAE,cAAU+P,QAAV,EAAoB;AACtB,qBAAO,IAAIjQ,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AAAE,uBAAOA,OAAO,CAACgQ,QAAQ,EAAT,CAAd;AAAjC,gBAAP;AACH;AAHc,WAAnB;;AAKA,mBAAS+Z,YAAT,CAAsBC,QAAtB,EAAgCC,QAAhC,EAA0C;AACtC,gBAAID,QAAJ,EAAc;AACV,qBAAO,UAAU1mB,GAAV,EAAe;AAClB,kBAAEsmB,mBAAF;;AACA,oBAAIM,IAAI,GAAG,SAAPA,IAAO,GAAY;AAAE,yBAAOF,QAAQ,CAAC1mB,GAAD,CAAf;AAAzB;;AACAwmB,4BAAY,GAAGA,YAAY,CAAC7pB,IAAb6pB,CAAkBI,IAAlBJ,EAAwBI,IAAxBJ,EAA8B7pB,IAA9B6pB,CAAmC,UAAUlpB,MAAV,EAAkB;AAChE,oBAAEgpB,mBAAF;AACAtiB,sBAAI,IAAIA,IAAI,CAACV,IAALU,CAAUT,QAAVS,EAAoB1G,MAApB0G,CAARA;;AACA,sBAAIuiB,SAAJ,EAAe;AACXlR,2BAAO,CAACvP,QAARuP;AACH;AALU,mBAMZ,UAAU7X,KAAV,EAAiB;AAChB,oBAAE8oB,mBAAF;AACA,wBAAM9oB,KAAN;AARW,4BASN,UAAUqpB,MAAV,EAAkB;AACvBrpB,uBAAK,IAAIA,KAAK,CAAC8F,IAAN9F,CAAW+F,QAAX/F,EAAqBqpB,MAArBrpB,CAATA;AAVW,kBAAfgpB;AAHJ;AADJ,mBAkBK;AACD,qBAAO,UAAUxmB,GAAV,EAAe;AAAE,uBAAO2mB,QAAQ,IAAIA,QAAQ,CAACrjB,IAATqjB,CAAcpjB,QAAdojB,EAAwB3mB,GAAxB2mB,CAAnB;AAAxB;AACH;AACJ;;AACD,cAAItR,OAAO,GAAG;AACVrR,gBAAI,EAAEyiB,YAAY,CAACje,KAAD,EAAQxE,IAAR,CADR;AAEVxG,iBAAK,EAAEipB,YAAY,CAACJ,OAAD,EAAU7oB,KAAV,CAFT;AAGVsI,oBAAQ,EAAE,oBAAY;AAClBygB,uBAAS,GAAG,IAAZA;;AACA,kBAAI,CAACD,mBAAL,EAA0B;AACtBxgB,yBAAQ,IAAIA,SAAQ,CAACxC,IAATwC,CAAcvC,QAAduC,CAAZA;AACH;AACJ;AARS,WAAd;AAUA,cAAIuE,GAAG,GAAGuH,UAAU,CAAChW,SAAXgW,CAAqByD,OAArBzD,CAAV;AACA,iBAAO,YAAY;AAAE,mBAAOvH,GAAG,CAACpF,WAAJoF,EAAP;AAArB;AA3CG,UAAP;AA6CH;;;;;;;;;;;;;;;;;;;;;;;AC/CM,eAASJ,uBAAT,CAAgCpG,SAAhC,EAA2CgV,MAA3C,EAAmD+L,QAAnD,EAA6D;AAChE,YAAIkC,mBAAmB,GAAG,EAA1B;AACAjjB,iBAAS,CAACtP,OAAVsP,CAAkB,UAAU+hB,GAAV,EAAe;AAAE,iBAAOA,GAAG,CAAC/M,MAAD,CAAH+M,IAAekB,mBAAmB,CAAC5yB,IAApB4yB,CAAyBlB,GAAzBkB,CAAtB;AAAnC;AACAA,2BAAmB,CAACvyB,OAApBuyB,CAA4B,UAAUlB,GAAV,EAAe;AAAE,iBAAOA,GAAG,CAAC/M,MAAD,CAAH+M,CAAYhB,QAAZgB,CAAP;AAA7C;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHM,eAASrb,sBAAT,CAA+Bwc,QAA/B,EAAyC;AAC5C,iBAAS7zB,GAAT,CAAasB,GAAb,EAAkB;AACd3C,gBAAM,CAAC8S,cAAP9S,CAAsBk1B,QAAtBl1B,EAAgC2C,GAAhC3C,EAAqC;AAAEP,iBAAK,EAAEgZ;AAAT,WAArCzY;AACH;;AACD,YAAI,OAAOm1B,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,OAA3C,EAAoD;AAChD/zB,aAAG,CAAC8zB,MAAM,CAACC,OAAR,CAAH/zB;AACH;;AACDA,WAAG,CAAC,WAAD,CAAHA;AACA,eAAO6zB,QAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;ACVM,UAAI7tB,QAAO,GAAG,QAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCAP;AACA;AACA;;;AACA,UAAIguB,cAAc,GAAG,IAArB,EACA;AACA;;AACA,UAAIC,aAAa,GAAG,EAApB;AACA,UAAIC,SAAS,GAAG,CAAhB,EACA;AACA;AACA;;AACA,UAAIC,aAAa,GAAG,SAAhBA,aAAgB,GAAY;AAAE,eAAsB,YAAY;AAChE,mBAAS5xB,IAAT,GAAgB;AACZ;AACA;AACA;AACA,iBAAKgb,EAAL,GAAU,CACN,MADM,EAEN2W,SAAS,EAFH,EAGNE,IAAI,CAACC,GAALD,EAHM,EAINxK,IAAI,CAACC,MAALD,GAAcd,QAAdc,CAAuB,EAAvBA,EAA2BprB,KAA3BorB,CAAiC,CAAjCA,CAJM,EAKRlS,IALQ,CAKH,GALG,CAAV;AAMH;;AACDnV,cAAI,CAAC5C,SAAL4C,CAAe+xB,QAAf/xB,GAA0B,YAAY;AAClC,iBAAK,IAAIgyB,SAAS,GAAGP,cAArB,EAAqCO,SAArC,EAAgDA,SAAS,GAAGA,SAAS,CAACnP,MAAtE,EAA8E;AAC1E;AACA;AACA,kBAAI,KAAK7H,EAAL,IAAWgX,SAAS,CAACC,KAAzB,EAAgC;AAC5B,oBAAIp2B,KAAK,GAAGm2B,SAAS,CAACC,KAAVD,CAAgB,KAAKhX,EAArBgX,CAAZ;AACA,oBAAIn2B,KAAK,KAAK61B,aAAd,EACI;;AACJ,oBAAIM,SAAS,KAAKP,cAAlB,EAAkC;AAC9B;AACA;AACA;AACAA,gCAAc,CAACQ,KAAfR,CAAqB,KAAKzW,EAA1ByW,IAAgC51B,KAAhC41B;AACH;;AACD,uBAAO,IAAP;AACH;AACJ;;AACD,gBAAIA,cAAJ,EAAoB;AAChB;AACA;AACA;AACAA,4BAAc,CAACQ,KAAfR,CAAqB,KAAKzW,EAA1ByW,IAAgCC,aAAhCD;AACH;;AACD,mBAAO,KAAP;AAvBJ;;AAyBAzxB,cAAI,CAAC5C,SAAL4C,CAAesB,QAAftB,GAA0B,YAAY;AAClC,gBAAI,KAAK+xB,QAAL,EAAJ,EAAqB;AACjB,qBAAON,cAAc,CAACQ,KAAfR,CAAqB,KAAKzW,EAA1ByW,CAAP;AACH;AAHL;;AAKAzxB,cAAI,CAAC5C,SAAL4C,CAAekyB,SAAflyB,GAA2B,UAAUnE,KAAV,EAAiBob,QAAjB,EAC3B;AACA;AACAqV,cAH2B,EAGrB6F,OAHqB,EAGZ;AACX,gBAAI5vB,EAAJ;;AACA,gBAAI0vB,KAAK,IAAI1vB,EAAE,GAAG;AACVpG,uBAAS,EAAE;AADD,aAALoG,EAGTA,EAAE,CAAC,KAAKyY,EAAN,CAAFzY,GAAc1G,KAHL0G,EAITA,EAJK,CAAT;AAKA,gBAAIsgB,MAAM,GAAG4O,cAAb;AACAA,0BAAc,GAAG;AAAE5O,oBAAM,EAAEA,MAAV;AAAkBoP,mBAAK,EAAEA;AAAzB,aAAjBR;;AACA,gBAAI;AACA;AACA;AACA,qBAAOxa,QAAQ,CAACxB,KAATwB,CAAekb,OAAflb,EAAwBqV,IAAxBrV,CAAP;AAHJ,sBAKQ;AACJwa,4BAAc,GAAG5O,MAAjB4O;AACH;AAnBL,YA1CgE,CA+DhE;AACA;;;AACAzxB,cAAI,CAACiE,IAALjE,GAAY,UAAUiX,QAAV,EAAoB;AAC5B,gBAAIlO,OAAO,GAAG0oB,cAAd;AACA,mBAAO,YAAY;AACf,kBAAIW,KAAK,GAAGX,cAAZ;;AACA,kBAAI;AACAA,8BAAc,GAAG1oB,OAAjB0oB;AACA,uBAAOxa,QAAQ,CAACxB,KAATwB,CAAe,IAAfA,EAAqBlW,SAArBkW,CAAP;AAFJ,wBAIQ;AACJwa,8BAAc,GAAGW,KAAjBX;AACH;AARL;AAFJ,YAjEgE,CA8EhE;;;AACAzxB,cAAI,CAACqyB,SAALryB,GAAiB,UAAUiX,QAAV,EACjB;AACA;AACAqV,cAHiB,EAGX6F,OAHW,EAGF;AACX,gBAAIV,cAAJ,EAAoB;AAChB,kBAAIW,KAAK,GAAGX,cAAZ;;AACA,kBAAI;AACAA,8BAAc,GAAG,IAAjBA,CADA,CAEA;AACA;;AACA,uBAAOxa,QAAQ,CAACxB,KAATwB,CAAekb,OAAflb,EAAwBqV,IAAxBrV,CAAP;AAJJ,wBAMQ;AACJwa,8BAAc,GAAGW,KAAjBX;AACH;AAVL,mBAYK;AACD,qBAAOxa,QAAQ,CAACxB,KAATwB,CAAekb,OAAflb,EAAwBqV,IAAxBrV,CAAP;AACH;AAlBL;;AAoBA,iBAAOjX,IAAP;AAnGoD,WAAtB;AAAlC,SAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,UAAIsyB,SAAS,GAAG,mBAAhB;AACA,UAAIC,IAAI,GAAGx2B,KAAX;;AACA,UAAIiE,KAAI,GAAGuyB,IAAI,CAACD,SAAD,CAAJC,IAAmB,YAAY;AACtC,YAAIvyB,IAAI,GAAG4xB,aAAa,EAAxB;;AACA,YAAI;AACAx1B,gBAAM,CAAC8S,cAAP9S,CAAsBm2B,IAAtBn2B,EAA4Bk2B,SAA5Bl2B,EAAuC;AACnCP,iBAAK,EAAE02B,IAAI,CAACD,SAAD,CAAJC,GAAkBvyB,IADU;AAEnCmP,sBAAU,EAAE,KAFuB;AAGnCwZ,oBAAQ,EAAE,KAHyB;AAInCvZ,wBAAY,EAAE;AAJqB,WAAvChT;AADJ,kBAQQ;AACJ,iBAAO4D,IAAP;AACH;AAZyB,SAA9B;;AAeA,UAAIiE,KAAI,GAAGjE,KAAI,CAACiE,IAAhB;AAAA,UAAsBouB,UAAS,GAAGryB,KAAI,CAACqyB,SAAvC;;AACA,eAASG,qBAAT,CAA+Bvb,QAA/B,EAAyCwb,KAAzC,EAAgD;AAC5C,eAAO1uB,UAAU,CAACE,KAAI,CAACgT,QAAD,CAAL,EAAiBwb,KAAjB,CAAjB;AACH,QACD;AACA;;;AACA,eAASC,aAAT,CAAsBC,KAAtB,EAA6B;AACzB,eAAO,YAAY;AACf,cAAIC,GAAG,GAAGD,KAAK,CAACld,KAANkd,CAAY,IAAZA,EAAkB5xB,SAAlB4xB,CAAV;;AACA,cAAIE,SAAS,GAAG5uB,KAAI,CAAC2uB,GAAG,CAACrkB,IAAL,CAApB;;AACA,cAAIukB,UAAU,GAAG7uB,KAAI,CAAC2uB,GAAG,SAAJ,CAArB;;AACA,iBAAO,IAAI5rB,OAAJ,CAAY,UAAUC,OAAV,EAAmBoI,MAAnB,EAA2B;AAC1C,qBAAS0jB,MAAT,CAAgB3P,MAAhB,EAAwB+L,QAAxB,EAAkC;AAC9B,kBAAI;AACA,oBAAItnB,MAAM,GAAGub,MAAM,CAACvV,IAAPuV,CAAYwP,GAAZxP,EAAiB+L,QAAjB/L,CAAb;AADJ,gBAGA,OAAOrb,KAAP,EAAc;AACV,uBAAOsH,MAAM,CAACtH,KAAD,CAAb;AACH;;AACD,kBAAIwG,IAAI,GAAG1G,MAAM,CAACmrB,IAAPnrB,GAAcZ,OAAdY,GAAwBorB,UAAnC;;AACA,kBAAInD,aAAa,CAACjoB,MAAM,CAAChM,KAAR,CAAjB,EAAiC;AAC7BgM,sBAAM,CAAChM,KAAPgM,CAAaX,IAAbW,CAAkB0G,IAAlB1G,EAAwBA,MAAM,CAACmrB,IAAPnrB,GAAcwH,MAAdxH,GAAuBqrB,WAA/CrrB;AADJ,qBAGK;AACD0G,oBAAI,CAAC1G,MAAM,CAAChM,KAAR,CAAJ0S;AACH;AACJ;;AACD,gBAAI0kB,UAAU,GAAG,SAAbA,UAAa,CAAUp3B,KAAV,EAAiB;AAAE,qBAAOk3B,MAAM,CAACF,SAAD,EAAYh3B,KAAZ,CAAb;AAApC;;AACA,gBAAIq3B,WAAW,GAAG,SAAdA,WAAc,CAAUnrB,KAAV,EAAiB;AAAE,qBAAOgrB,MAAM,CAACD,UAAD,EAAa/qB,KAAb,CAAb;AAArC;;AACAkrB,sBAAU;AAlBP,YAAP;AAJJ;AAyBH;;AACD,eAASnD,aAAT,CAAuBj0B,KAAvB,EAA8B;AAC1B,eAAOA,KAAK,IAAI,OAAOA,KAAK,CAACqL,IAAb,KAAsB,UAAtC;AACH,QACD;AACA;AACA;;;AACA,UAAIisB,aAAa,GAAG,EAApB;;AACA,eAASC,yBAAT,CAAkCC,KAAlC,EAAyC;AACrC;AACA;AACA,YAAIF,aAAa,CAACpuB,OAAdouB,CAAsBE,KAAtBF,IAA+B,CAAnC,EAAsC;AAClC,cAAIG,IAAI,GAAG,SAAPA,IAAO,CAAUl0B,GAAV,EAAegkB,MAAf,EAAuB;AAC9B,gBAAI/b,EAAE,GAAGjI,GAAG,CAACgkB,MAAD,CAAZ;;AACAhkB,eAAG,CAACgkB,MAAD,CAAHhkB,GAAc,YAAY;AACtB,qBAAOizB,UAAS,CAAChrB,EAAD,EAAKtG,SAAL,EAAgB,IAAhB,CAAhB;AADJ;AAFJ,YADkC,CAOlC;AACA;;;AACAuyB,cAAI,CAACD,KAAD,EAAQ,OAAR,CAAJC;AACAA,cAAI,CAACD,KAAK,CAACj2B,SAAP,EAAkB,KAAlB,CAAJk2B;AACAA,cAAI,CAACD,KAAK,CAACj2B,SAAP,EAAkB,WAAlB,CAAJk2B;AACAH,uBAAa,CAAC10B,IAAd00B,CAAmBE,KAAnBF;AACH;;AACD,eAAOE,KAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnMD,UAAI9wB,EAAE,GAAGnG,MAAM,CAACgB,SAAhB;AAAA,UAA2BmpB,QAAQ,GAAGhkB,EAAE,CAACgkB,QAAzC;AAAA,UAAmDhZ,cAAc,GAAGhL,EAAE,CAACgL,cAAvE;AACA,UAAIgmB,OAAO,GAAGzK,QAAQ,CAAC1rB,SAAT0rB,CAAmBvC,QAAjC;AACA,UAAIiN,mBAAmB,GAAG,IAAIv2B,GAAJ,EAA1B;AACA;AACA;AACA;;AACA,eAASqT,MAAT,CAAemjB,CAAf,EAAkBC,CAAlB,EAAqB;AACjB,YAAI;AACA,iBAAOC,KAAK,CAACF,CAAD,EAAIC,CAAJ,CAAZ;AADJ,kBAGQ;AACJF,6BAAmB,CAACpyB,KAApBoyB;AACH;AACJ;;AACD,eAASG,KAAT,CAAeF,CAAf,EAAkBC,CAAlB,EAAqB;AACjB;AACA,YAAID,CAAC,KAAKC,CAAV,EAAa;AACT,iBAAO,IAAP;AAHa,UAKjB;AACA;;;AACA,YAAIE,IAAI,GAAGrN,QAAQ,CAAC1Y,IAAT0Y,CAAckN,CAAdlN,CAAX;AACA,YAAIsN,IAAI,GAAGtN,QAAQ,CAAC1Y,IAAT0Y,CAAcmN,CAAdnN,CAAX,CARiB,CASjB;AACA;AACA;;AACA,YAAIqN,IAAI,KAAKC,IAAb,EAAmB;AACf,iBAAO,KAAP;AACH;;AACD,gBAAQD,IAAR;AACI,eAAK,gBAAL;AACI;AACA;AACA,gBAAIH,CAAC,CAAC70B,MAAF60B,KAAaC,CAAC,CAAC90B,MAAnB,EACI,OAAO,KAAP;AACR;;AACA,eAAK,iBAAL;AAAwB;AACpB,kBAAIk1B,kBAAkB,CAACL,CAAD,EAAIC,CAAJ,CAAtB,EACI,OAAO,IAAP;AACJ,kBAAIK,KAAK,GAAGC,WAAW,CAACP,CAAD,CAAvB;AACA,kBAAIQ,KAAK,GAAGD,WAAW,CAACN,CAAD,CAAvB,CAJoB,CAKpB;AACA;;AACA,kBAAIQ,QAAQ,GAAGH,KAAK,CAACn1B,MAArB;AACA,kBAAIs1B,QAAQ,KAAKD,KAAK,CAACr1B,MAAvB,EACI,OAAO,KAAP,CATgB,CAUpB;;AACA,mBAAK,IAAIu1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAApB,EAA8B,EAAEC,CAAhC,EAAmC;AAC/B,oBAAI,CAAC5mB,cAAc,CAACM,IAAfN,CAAoBmmB,CAApBnmB,EAAuBwmB,KAAK,CAACI,CAAD,CAA5B5mB,CAAL,EAAuC;AACnC,yBAAO,KAAP;AACH;AAde,gBAgBpB;;;AACA,mBAAK,IAAI4mB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAApB,EAA8B,EAAEC,CAAhC,EAAmC;AAC/B,oBAAIp1B,GAAG,GAAGg1B,KAAK,CAACI,CAAD,CAAf;;AACA,oBAAI,CAACR,KAAK,CAACF,CAAC,CAAC10B,GAAD,CAAF,EAAS20B,CAAC,CAAC30B,GAAD,CAAV,CAAV,EAA4B;AACxB,yBAAO,KAAP;AACH;AACJ;;AACD,qBAAO,IAAP;AACH;;AACD,eAAK,gBAAL;AACI,mBAAO00B,CAAC,CAAClwB,IAAFkwB,KAAWC,CAAC,CAACnwB,IAAbkwB,IAAqBA,CAAC,CAAC1e,OAAF0e,KAAcC,CAAC,CAAC3e,OAA5C;;AACJ,eAAK,iBAAL;AACI;AACA,gBAAI0e,CAAC,KAAKA,CAAV,EACI,OAAOC,CAAC,KAAKA,CAAb;AACR;;AACA,eAAK,kBAAL;AACA,eAAK,eAAL;AACI,mBAAO,CAACD,CAAD,KAAO,CAACC,CAAf;;AACJ,eAAK,iBAAL;AACA,eAAK,iBAAL;AACI,mBAAOD,CAAC,IAAI,KAAKC,CAAjB;;AACJ,eAAK,cAAL;AACA,eAAK,cAAL;AAAqB;AACjB,kBAAID,CAAC,CAACplB,IAAFolB,KAAWC,CAAC,CAACrlB,IAAjB,EACI,OAAO,KAAP;AACJ,kBAAIylB,kBAAkB,CAACL,CAAD,EAAIC,CAAJ,CAAtB,EACI,OAAO,IAAP;AACJ,kBAAIU,SAAS,GAAGX,CAAC,CAACY,OAAFZ,EAAhB;AACA,kBAAIa,KAAK,GAAGV,IAAI,KAAK,cAArB;;AACA,qBAAO,IAAP,EAAa;AACT,oBAAIxzB,IAAI,GAAGg0B,SAAS,CAAC7lB,IAAV6lB,EAAX;AACA,oBAAIh0B,IAAI,CAAC4yB,IAAT,EACI,MAHK,CAIT;;AACA,oBAAIzwB,EAAE,GAAGnC,IAAI,CAACvE,KAAd;AAAA,oBAAqB04B,IAAI,GAAGhyB,EAAE,CAAC,CAAD,CAA9B;AAAA,oBAAmCiyB,MAAM,GAAGjyB,EAAE,CAAC,CAAD,CAA9C,CALS,CAMT;;AACA,oBAAI,CAACmxB,CAAC,CAACp2B,GAAFo2B,CAAMa,IAANb,CAAL,EAAkB;AACd,yBAAO,KAAP;AARK,kBAUT;AACA;;;AACA,oBAAIY,KAAK,IAAI,CAACX,KAAK,CAACa,MAAD,EAASd,CAAC,CAAC91B,GAAF81B,CAAMa,IAANb,CAAT,CAAnB,EAA0C;AACtC,yBAAO,KAAP;AACH;AACJ;;AACD,qBAAO,IAAP;AACH;;AACD,eAAK,sBAAL;AACA,eAAK,qBAAL,CAxEJ,CAwEgC;;AAC5B,eAAK,sBAAL;AACA,eAAK,qBAAL;AACA,eAAK,oBAAL;AACA,eAAK,qBAAL;AACA,eAAK,sBAAL;AACI;AACA;AACAD,aAAC,GAAG,IAAIgB,UAAJ,CAAehB,CAAf,CAAJA;AACAC,aAAC,GAAG,IAAIe,UAAJ,CAAef,CAAf,CAAJA;AACJ;;AACA,eAAK,mBAAL;AAA0B;AACtB,kBAAIgB,GAAG,GAAGjB,CAAC,CAACkB,UAAZ;;AACA,kBAAID,GAAG,KAAKhB,CAAC,CAACiB,UAAd,EAA0B;AACtB,uBAAOD,GAAG,MAAMjB,CAAC,CAACiB,GAAD,CAADjB,KAAWC,CAAC,CAACgB,GAAD,CAA5B,EAAmC,CAC/B;AACH;AACJ;;AACD,qBAAOA,GAAG,KAAK,CAAC,CAAhB;AACH;;AACD,eAAK,wBAAL;AACA,eAAK,4BAAL;AACA,eAAK,iCAAL;AACA,eAAK,mBAAL;AAA0B;AACtB,kBAAIE,KAAK,GAAGrB,OAAO,CAAC1lB,IAAR0lB,CAAaE,CAAbF,CAAZ;;AACA,kBAAIqB,KAAK,KAAKrB,OAAO,CAAC1lB,IAAR0lB,CAAaG,CAAbH,CAAd,EAA+B;AAC3B,uBAAO,KAAP;AAHkB,gBAKtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,qBAAO,CAACsB,QAAQ,CAACD,KAAD,EAAQE,gBAAR,CAAhB;AACH;AA5HL,SAfiB,CA6IjB;;;AACA,eAAO,KAAP;AACH;;AACD,eAASd,WAAT,CAAqB50B,GAArB,EAA0B;AACtB;AACA;AACA,eAAOhD,MAAM,CAACmC,IAAPnC,CAAYgD,GAAZhD,EAAiBmL,MAAjBnL,CAAwB24B,YAAxB34B,EAAsCgD,GAAtChD,CAAP;AACH;;AACD,eAAS24B,YAAT,CAAsBh2B,GAAtB,EAA2B;AACvB,eAAO,KAAKA,GAAL,MAAc,KAAK,CAA1B;AACH;;AACD,UAAI+1B,gBAAgB,GAAG,mBAAvB;;AACA,eAASD,QAAT,CAAkBG,IAAlB,EAAwBC,MAAxB,EAAgC;AAC5B,YAAIC,SAAS,GAAGF,IAAI,CAACp2B,MAALo2B,GAAcC,MAAM,CAACr2B,MAArC;AACA,eAAOs2B,SAAS,IAAI,CAAbA,IACHF,IAAI,CAACjwB,OAALiwB,CAAaC,MAAbD,EAAqBE,SAArBF,MAAoCE,SADxC;AAEH;;AACD,eAASpB,kBAAT,CAA4BL,CAA5B,EAA+BC,CAA/B,EAAkC;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAIyB,IAAI,GAAG3B,mBAAmB,CAAC51B,GAApB41B,CAAwBC,CAAxBD,CAAX;;AACA,YAAI2B,IAAJ,EAAU;AACN;AACA;AACA,cAAIA,IAAI,CAAC73B,GAAL63B,CAASzB,CAATyB,CAAJ,EACI,OAAO,IAAP;AAJR,eAMK;AACD3B,6BAAmB,CAAC/1B,GAApB+1B,CAAwBC,CAAxBD,EAA2B2B,IAAI,GAAG,IAAIz4B,GAAJ,EAAlC82B;AACH;;AACD2B,YAAI,CAACj3B,GAALi3B,CAASzB,CAATyB;AACA,eAAO,KAAP;AACH;;;;;;;;;;;;;;;;;;;;;UCjMD;AACA;AACA;AACA;AACA;;;AACA,UAAIC,eAAe,GAAG,SAAlBA,eAAkB,GAAY;AAAE,eAAOh5B,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAAP;AAApC,SACA;;;AACA,UAAImG,EAAE,GAAGxG,KAAK,CAACqB,SAAf;AAAA,UAA0B0B,OAAO,GAAGyD,EAAE,CAACzD,OAAvC;AAAA,UAAgD7C,KAAK,GAAGsG,EAAE,CAACtG,KAA3D;;AACA,UAAIW,KAAI,GAAkB,YAAY;AAClC,iBAASA,IAAT,CAAcy4B,QAAd,EAAwBC,QAAxB,EAAkC;AAC9B,cAAID,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,oBAAQ,GAAG,IAAXA;AAAkB;;AAC7C,cAAIC,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,oBAAQ,GAAGF,eAAXE;AAA6B;;AACxD,eAAKD,QAAL,GAAgBA,QAAhB;AACA,eAAKC,QAAL,GAAgBA,QAAhB;AACH;;AACD14B,YAAI,CAACQ,SAALR,CAAe24B,MAAf34B,GAAwB,YAAY;AAChC,cAAIkB,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIynB,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGxkB,SAAS,CAACnC,MAAhC,EAAwC2mB,EAAE,EAA1C,EAA8C;AAC1CznB,iBAAK,CAACynB,EAAD,CAALznB,GAAYiD,SAAS,CAACwkB,EAAD,CAArBznB;AACH;;AACD,iBAAO,KAAKG,WAAL,CAAiBH,KAAjB,CAAP;AALJ;;AAOAlB,YAAI,CAACQ,SAALR,CAAeqB,WAAfrB,GAA6B,UAAUkB,KAAV,EAAiB;AAC1C,cAAIE,IAAI,GAAG,IAAX;AACAc,iBAAO,CAAC+O,IAAR/O,CAAahB,KAAbgB,EAAoB,UAAUC,GAAV,EAAe;AAAE,mBAAOf,IAAI,GAAGA,IAAI,CAACw3B,YAALx3B,CAAkBe,GAAlBf,CAAd;AAArC;AACA,iBAAOA,IAAI,CAACoL,IAALpL,KAAcA,IAAI,CAACoL,IAALpL,GAAY,KAAKs3B,QAAL,CAAcr5B,KAAK,CAAC4R,IAAN5R,CAAW6B,KAAX7B,CAAd,CAA1B+B,CAAP;AAHJ;;AAKApB,YAAI,CAACQ,SAALR,CAAe44B,YAAf54B,GAA8B,UAAUmC,GAAV,EAAe;AACzC,cAAIhB,GAAG,GAAG,KAAKs3B,QAAL,IAAiBI,QAAQ,CAAC12B,GAAD,CAAzB,GACJ,KAAK22B,IAAL,KAAc,KAAKA,IAAL,GAAY,IAAI34B,OAAJ,EAA1B,CADI,GAEJ,KAAK44B,MAAL,KAAgB,KAAKA,MAAL,GAAc,IAAI14B,GAAJ,EAA9B,CAFN;AAGA,cAAI2pB,KAAK,GAAG7oB,GAAG,CAACH,GAAJG,CAAQgB,GAARhB,CAAZ;AACA,cAAI,CAAC6oB,KAAL,EACI7oB,GAAG,CAACN,GAAJM,CAAQgB,GAARhB,EAAa6oB,KAAK,GAAG,IAAIhqB,IAAJ,CAAS,KAAKy4B,QAAd,EAAwB,KAAKC,QAA7B,CAArBv3B;AACJ,iBAAO6oB,KAAP;AAPJ;;AASA,eAAOhqB,IAAP;AA5BsB,SAA1B;;AA8BA,eAAS64B,QAAT,CAAkB55B,KAAlB,EAAyB;AACrB,gBAAQ,OAAOA,KAAf;AACI,eAAK,QAAL;AACI,gBAAIA,KAAK,KAAK,IAAd,EACI;AACR;;AACA,eAAK,UAAL;AACI,mBAAO,IAAP;AANR;;AAQA,eAAO,KAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxCD,eAAS+5B,WAAT,CAAqBC,SAArB,EAAgC;AAC5B,eAAO,IAAIhhB,4CAAJ,CAAgBihB,oBAAD,EAAgB;AAClCD,mBAAS,GAAG3uB,IAAZ2uB,CAAkBhuB,gBAAD,EAAY;AACzB,gBAAI,CAACiuB,UAAU,CAACC,MAAhB,EAAwB;AACpBD,wBAAU,CAACvnB,IAAXunB,CAAgBjuB,MAAhBiuB;AACAA,wBAAU,CAACzlB,QAAXylB;AACH;AAJL,aAKI/tB,eAAD,EAAW;AACV,gBAAI,CAAC+tB,UAAU,CAACC,MAAhB,EAAwB;AACpBD,wBAAU,CAAC/tB,KAAX+tB,CAAiB/tB,KAAjB+tB;AACH;AARL;AAUA,iBAAO;AAAA,mBAAMA,UAAU,CAACtmB,WAAXsmB,EAAN;AAAA,WAAP;AAXG,UAAP;AAaH;;UACKE;AACFC,+BAAYC,IAAZD,EAAkB;AAAA;;AACd,eAAKC,IAAL,GAAYA,IAAZ;AACA,eAAKpE,GAAL,GAAWD,IAAI,CAACC,GAALD,GAAWA,IAAI,CAACC,GAAhBD,GAAsB;AAAA,mBAAM,CAAC,IAAIA,IAAJ,EAAP;AAAA,WAAjC;AACH;;;;iBACDsE,kBAASC,IAATD,EAAiC;AAAA,gBAAlB1D,KAAkB,uEAAV,CAAU;AAAA,gBAAP/sB,KAAO;AAC7B,mBAAO,KAAKwwB,IAAL,CAAUG,GAAV,CAAc;AAAA,qBAAMC,0DAAwBF,IAAxBE,EAA8B7D,KAA9B6D,EAAqC5wB,KAArC4wB,CAAN;AAAA,aAAd,CAAP;AACH;;;;;;AAEL,eAASC,aAAT,CAAuBpG,GAAvB,EAA4B;AACxBA,WAAG,CAAChU,4CAAD,CAAHgU,GAAkB;AAAA,iBAAMA,GAAN;AAAA,SAAlBA;;AACA,eAAOA,GAAP;AACH;;AACD,eAASqG,YAAT,CAAsBrG,GAAtB,EAA2BsG,MAA3B,EAAmC;AAC/B,eAAOtG,GAAG,CAACuG,IAAJvG,CAASwG,2DAAU,IAAIX,aAAJ,CAAkBS,MAAlB,CAAVE,CAATxG,CAAP;AACH;;AACD,eAASyG,QAAT,CAAkBC,KAAlB,EAAyBC,IAAzB,EAA+BjM,YAA/B,EAA6C;AACzC,eAAOgM,KAAK,IAAI,OAAOA,KAAK,CAACC,IAAD,CAAZ,KAAuB,WAAhCD,GACDA,KAAK,CAACC,IAAD,CADJD,GAEDhM,YAFN;AAGH;;UAEKkM;AACFd,2BAAYnuB,QAAZmuB,EAAsBQ,MAAtBR,EAA8Bp0B,OAA9Bo0B,EAAuC;AAAA;;AACnC,eAAKnuB,QAAL,GAAgBA,QAAhB;AACA,cAAMkvB,OAAO,GAAGR,YAAY,CAACr1B,4CAAKo1B,aAAa,CAAC,KAAKzuB,QAAN,CAAlB3G,CAAD,EAAqCs1B,MAArC,CAA5B;AACA,eAAKQ,YAAL,GAAoBp1B,OAAO,CAACq1B,iBAARr1B,GACdm1B,OAAO,CAACN,IAARM,CAAaG,2DAAU/6B,MAAM,CAACqD,MAAPrD,CAAcA,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkB,KAAK0L,QAAL,CAAc2H,gBAAd,CAA+B,KAA/B,CAAlBrT,CAAdA,EAAwE;AAAE2L,iBAAK,EAAEwT,SAAT;AAAoBhL,mBAAO,EAAEgL,SAA7B;AAAwC6b,iBAAK,EAAE;AAA/C,WAAxEh7B,CAAV+6B,CAAbH,CADcn1B,GAEdm1B,OAFN;AAGA,eAAKpoB,OAAL,GAAe,KAAK9G,QAAL,CAAc8G,OAA7B;AAPO,UASX;;;;;iBACA/G,kBAAS;AACL,mBAAO,KAAKC,QAAL,CAAcD,MAAd,EAAP;AACH;;;iBACD4H,4BAAmB;AACf,mBAAO,KAAK3H,QAAL,CAAc2H,gBAAd,EAAP;AACH;;;iBACDG,yBAAgB;AACZ,mBAAO,KAAK9H,QAAL,CAAc8H,aAAd,EAAP;AACH;;;iBACDoB,wBAAe;AACX,mBAAO,KAAKlJ,QAAL,CAAckJ,YAAd,EAAP;AACH;;;iBACDC,4BAAmB;AACf,mBAAO,KAAKnJ,QAAL,CAAcmJ,gBAAd,EAAP;AACH;;;iBACDG,iBAAQrP,SAARqP,EAAmB;AACf,mBAAO,KAAKtJ,QAAL,CAAcsJ,OAAd,CAAsBrP,SAAtB,CAAP;AACH;;;iBACD8P,mBAAUC,gBAAVD,EAA4B;AACxB,mBAAO,KAAK/J,QAAL,CAAc+J,SAAd,CAAwBC,gBAAxB,CAAP;AACH;;;iBACDU,yBAAgB3Q,OAAhB2Q,EAAyB;AACrB;AACA;AACA,mBAAO,KAAK1K,QAAL,CAAc0K,eAAd,CAA8B3Q,OAA9B,CAAP;AACH;;;iBACDwQ,qBAAYU,KAAZV,EAAmB;AACf,mBAAO,KAAKvK,QAAL,CAAcuK,WAAd,CAA0BU,KAA1B,CAAP;AACH;;;iBACDG,uBAAc;AACV,mBAAO,KAAKpL,QAAL,CAAcoL,WAAd,EAAP;AACH;;;iBACDF,sBAAa1B,YAAb0B,EAA2B;AACvB,mBAAO,KAAKlL,QAAL,CAAckL,YAAd,CAA2B1B,YAA3B,CAAP;AACH;;;iBACDsB,oBAAWykB,IAAXzkB,EAAiB;AACb,mBAAO,KAAK9K,QAAL,CAAc8K,UAAd,CAAyBykB,IAAzB,CAAP;AACH;;;iBACDvkB,sBAAa/Q,SAAb+Q,EAAwB;AACpB,mBAAO,KAAKhL,QAAL,CAAcgL,YAAd,CAA2B/Q,SAA3B,CAAP;AACH;;;;;;AAGL,UAAMu1B,aAAY,GAAG,IAAIC,yDAAJ,CAAmB,cAAnB,CAArB;;AACA,UAAMC,eAAc,GAAG,IAAID,yDAAJ,CAAmB,gBAAnB,CAAvB;;AACA,UAAME,qBAAoB,GAAG,IAAIF,yDAAJ,CAAmB,sBAAnB,CAA7B;;UAEMG;AACFzB,6BAAYQ,MAAZR,EAAoBY,KAApBZ,EAA2B0B,OAA3B1B,EAAoC;AAAA;;AAChC,eAAKQ,MAAL,GAAcA,MAAd;AACA,eAAKI,KAAL,GAAaA,KAAb;AACA,eAAKc,OAAL,GAAeA,OAAf;AACA,eAAKT,iBAAL,GAAyBN,QAAQ,CAACC,KAAD,EAAQ,mBAAR,EAA6B,KAA7B,CAAjC;AACH;;;;iBACD7yB,oBAAWnC,OAAXmC,EAAoB;AAChB,mBAAO,IAAI+yB,SAAJ,CAAa,KAAKa,YAAL,GAAoB5zB,UAApB,CAA+B5H,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,CAA/B,CAAb,EAAyE,KAAKq6B,MAA9E,EAAsFr6B,MAAM,CAACqD,MAAPrD,CAAc;AAAE86B,+BAAiB,EAAE,KAAKA;AAA1B,aAAd96B,EAA6DyF,OAA7DzF,CAAtF,CAAP;AACH;;;iBACD8H,eAAMrC,OAANqC,EAAe;AAAA;;AACX,mBAAO0xB,WAAW,CAAC;AAAA,qBAAM,OAAKgC,YAAL,GAAoB1zB,KAApB,CAA0B9H,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,CAA1B,CAAN;AAAA,aAAD,CAAlB;AACH;;;iBACD+H,gBAAOtC,OAAPsC,EAAgB;AAAA;;AACZ,mBAAOyxB,WAAW,CAAC;AAAA,qBAAM,OAAKgC,YAAL,GAAoBzzB,MAApB,CAA2B/H,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,CAA3B,CAAN;AAAA,aAAD,CAAlB;AACH;;;iBACD+J,mBAAUtE,OAAVsE,EAAmB0xB,KAAnB1xB,EAA0B;AACtB,gBAAMgqB,GAAG,GAAGhvB,4CAAKo1B,aAAa,CAAC,KAAKqB,YAAL,GAAoBzxB,SAApB,CAA8B/J,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,CAA9B,CAAD,CAAlB+E,CAAZ;AACA,mBAAO02B,KAAK,IAAIA,KAAK,CAACC,OAAND,KAAkB,IAA3BA,GACD1H,GADC0H,GAEDrB,YAAY,CAACrG,GAAD,EAAM,KAAKsG,MAAX,CAFlB;AAGH;AACD;AACJ;AACA;AACA;;;;iBACIsB,qBAAY;AACR,mBAAO,KAAK5yB,MAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;;iBACI6yB,mBAAU7yB,MAAV6yB,EAAkB;AACd,iBAAK7yB,MAAL,GAAcA,MAAd;AACH;AACD;AACJ;AACA;;;;eACc,eAAG;AACT,mBAAO,KAAKwyB,OAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;eACc,aAACxyB,MAAD,EAAS;AACf,gBAAI,KAAKwyB,OAAT,EAAkB;AACd,oBAAM,IAAIpY,KAAJ,CAAU,iCAAV,CAAN;AACH;;AACD,iBAAKoY,OAAL,GAAexyB,MAAf;AACH;;;iBACDyyB,wBAAe;AACX,iBAAKK,aAAL;AACA,mBAAO,KAAKN,OAAZ;AACH;;;iBACDM,yBAAgB;AACZ,gBAAI,CAAC,KAAKN,OAAV,EAAmB;AACf,oBAAM,IAAIpY,KAAJ,CAAU,iCAAV,CAAN;AACH;AACJ;;;;;;UAEC2Y;AAAAA;AAAAA;;AAAAA;;AACFjC,0BAAYkC,OAAZlC,EAAqBmC,aAArBnC,EAAoCoC,kBAApCpC,EAAwDY,KAAxDZ,EAA+D;AAAA;;AAAA;;AAC3D,wCAAMkC,OAAN,EAAetB,KAAf;AACA,mBAAKsB,OAAL,GAAeA,OAAf;AACA,mBAAKp6B,GAAL,GAAW,IAAId,GAAJ,EAAX;;AACA,gBAAIm7B,aAAJ,EAAmB;AACf,qBAAKE,aAAL,CAAmBF,aAAnB;AACH;;AACD,gBAAIC,kBAAkB,IAAI,OAAOA,kBAAP,KAA8B,QAAxD,EAAkE;AAC9D,mBAAK,IAAI90B,IAAT,IAAiB80B,kBAAjB,EAAqC;AACjC,oBAAIA,kBAAkB,CAAC9qB,cAAnB8qB,CAAkC90B,IAAlC80B,CAAJ,EAA6C;AACzC,sBAAMx2B,OAAO,GAAGw2B,kBAAkB,CAAC90B,IAAD,CAAlC;;AACA,yBAAKg1B,WAAL,CAAiBh1B,IAAjB,EAAuB1B,OAAvB;AACH;AACJ;AACJ;;AAd0D;AAe9D;AACD;AACJ;AACA;AACA;AACA;;;AArBMq2B;AAAAA;AAAAA,mBAsBFh5B,gBAAO2C,OAAP3C,EAAgBqE,IAAhBrE,EAAsB;AAClB,kBAAIs5B,SAAS,CAACj1B,IAAD,CAAb,EAAqB;AACjB,qBAAK+0B,aAAL,CAAmBz2B,OAAnB;AADJ,qBAGK;AACD,qBAAK02B,WAAL,CAAiBh1B,IAAjB,EAAuB1B,OAAvB;AACH;AACJ;AACD;AACJ;AACA;;AAhCMq2B;AAAAA;AAAAA,mBAiCFO,oBAAU;AACN,qBAAO,IAAP;AACH;AACD;AACJ;AACA;AACA;;AAvCMP;AAAAA;AAAAA,mBAwCFQ,aAAIn1B,IAAJm1B,EAAU;AACN,kBAAIF,SAAS,CAACj1B,IAAD,CAAb,EAAqB;AACjB,uBAAO,iBAAP;AACH;;AACD,qBAAO,KAAKxF,GAAL,CAASH,GAAT,CAAa2F,IAAb,CAAP;AACH;AACD;AACJ;AACA;AACA;;AAjDM20B;AAAAA;AAAAA,mBAkDFI,uBAAcz2B,OAAdy2B,EAAuB;AACnB,kBAAI,KAAKP,SAAL,EAAJ,EAAsB;AAClB,sBAAM,IAAIxY,KAAJ,CAAU,kCAAV,CAAN;AACH;;AACD,qBAAO,KAAKyY,SAAL,CAAe,IAAIh2B,6DAAJ,CAAiBH,OAAjB,CAAf,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;AA5DMq2B;AAAAA;AAAAA,mBA6DFK,qBAAYh1B,IAAZg1B,EAAkB12B,OAAlB02B,EAA2B;AACvB,kBAAI,KAAKx6B,GAAL,CAAST,GAAT,CAAaiG,IAAb,CAAJ,EAAwB;AACpB,sBAAM,IAAIgc,KAAJ,kBAAoBhc,IAApB,+BAAN;AACH;;AACD,mBAAKxF,GAAL,CAASN,GAAT,CAAa8F,IAAb,EAAmB,IAAIm0B,WAAJ,CAAe,KAAKS,OAApB,EAA6B,KAAKtB,KAAlC,EAAyC,IAAI70B,6DAAJ,CAAiBH,OAAjB,CAAzC,CAAnB;AACH;AACD;AACJ;AACA;AACA;;AAtEMq2B;AAAAA;AAAAA,mBAuEFS,sBAAap1B,IAAbo1B,EAAmB;AACf,kBAAIH,SAAS,CAACj1B,IAAD,CAAb,EAAqB;AACjB,qBAAKo0B,OAAL,GAAepc,SAAf;AADJ,qBAGK;AACD,qBAAKxd,GAAL,WAAgBwF,IAAhB;AACH;AACJ;AA9EC20B;;AAAAA;AAAAA,UAAeR,WAAfQ;;AAgFNA,cAAM,CAACU,IAAPV,GAAc,SAASW,cAAT,CAAwBC,CAAxB,EAA2B;AAAE,iBAAO,KAAKA,CAAC,IAAIZ,MAAV,EAAkBa,uDAAgBA,iDAAhBA,CAAlB,EAAkDA,uDAAgBvB,eAAhBuB,EAAgC,CAAhCA,CAAlD,EAAsFA,uDAAgBtB,qBAAhBsB,EAAsC,CAAtCA,CAAtF,EAAgIA,uDAAgBzB,aAAhByB,EAA8B,CAA9BA,CAAhI,CAAP;AAA3C;;AACAb,cAAM,CAACc,KAAPd,GAAee,iEAAsB;AAAEC,iBAAO,EAAE,SAASL,cAAT,GAA0B;AAAE,mBAAO,IAAIX,MAAJ,CAAWe,uDAAYA,iDAAZA,CAAX,EAAmCA,uDAAYzB,eAAZyB,EAA4B,CAA5BA,CAAnC,EAAmEA,uDAAYxB,qBAAZwB,EAAkC,CAAlCA,CAAnE,EAAyGA,uDAAY3B,aAAZ2B,EAA0B,CAA1BA,CAAzG,CAAP;AAAvC;AAAyLE,eAAK,EAAEjB,MAAhM;AAAwMkB,oBAAU,EAAE;AAApN,SAAtBH,CAAff;eAjFMA;OAAAA;;AAwFN,OAAC,YAAY;AAAE,SAAC,OAAOmB,SAAP,KAAqB,WAArB,IAAoCA,SAArC;AAAf;;AAqBA,eAASb,SAAT,CAAmBj1B,IAAnB,EAAyB;AACrB,eAAO,CAACA,IAAD,IAASA,IAAI,KAAK,SAAzB;AACH;;UAEK+1B;AAAAA;AACFrD,yBAAYsD,MAAZtD,EAAoB;AAAA;;AAChB,iBAAKsD,MAAL,GAAcA,MAAd;AACA,iBAAKp0B,MAAL,GAAc,SAAd;AACH;;AAJCm0B;AAAAA;AAAAA,mBAKFniB,eAAMpV,SAANoV,EAAiBtV,OAAjBsV,EAA0B;AACtB,qBAAO,KAAKoiB,MAAL,CAAYb,GAAZ,CAAgB,KAAKvzB,MAArB,EAA6BnB,UAA7B,CAAwC5H,MAAM,CAACqD,MAAPrD,CAAcA,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,CAAdA,EAA0C;AAAE2F,yBAAF,EAAEA,SAAF;AAAamC,qBAAK,EAAE,KAAKI;AAAzB,eAA1ClI,CAAxC,CAAP;AACH;AAPCk9B;AAAAA;AAAAA,mBAQFnmB,eAAMpR,SAANoR,EAAiBtR,OAAjBsR,EAA0B;AACtB,qBAAO,KAAKomB,MAAL,CAAYb,GAAZ,CAAgB,KAAKvzB,MAArB,EAA6BjB,KAA7B,CAAmC9H,MAAM,CAACqD,MAAPrD,CAAcA,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,CAAdA,EAA0C;AAAE2F,yBAAF,EAAEA,SAAF;AAAamC,qBAAK,EAAE,KAAKI;AAAzB,eAA1ClI,CAAnC,CAAP;AACH;AAVCk9B;;AAAAA;AAAAA;;AAYNA,aAAK,CAACV,IAANU,GAAa,SAASE,aAAT,CAAuBV,CAAvB,EAA0B;AAAE,iBAAO,KAAKA,CAAC,IAAIQ,KAAV,EAAiBP,uDAAgBb,OAAhBa,CAAjB,CAAP;AAAzC;;AACAO,aAAK,CAACN,KAANM,GAAc,aAAcP,iEAA0B;AAAEI,eAAK,EAAEG,KAAT;AAAgBJ,iBAAO,EAAEI,KAAK,CAACV;AAA/B,SAA1BG,CAA5BO;eAbMA;OAAAA;;AAiBN,OAAC,YAAY;AAAE,SAAC,OAAOD,SAAP,KAAqB,WAArB,IAAoCA,SAArC;AAAf;;UAIMI;AAAAA;AACFxD,4BAAYsD,MAAZtD,EAAoB;AAAA;;AAChB,iBAAKsD,MAAL,GAAcA,MAAd;AACA,iBAAKp0B,MAAL,GAAc,SAAd;AACH;;AAJCs0B;AAAAA;AAAAA,mBAKFt1B,gBAAOpC,SAAPoC,EAAkBtC,OAAlBsC,EAA2B;AACvB,qBAAO,KAAKo1B,MAAL,CAAYb,GAAZ,CAAgB,KAAKvzB,MAArB,EAA6BhB,MAA7B,CAAoC/H,MAAM,CAACqD,MAAPrD,CAAcA,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,CAAdA,EAA0C;AAAE2F,yBAAF,EAAEA,SAAF;AAAa6W,wBAAQ,EAAE,KAAKtU;AAA5B,eAA1ClI,CAApC,CAAP;AACH;AAPCq9B;;AAAAA;AAAAA;;AASNA,gBAAQ,CAACb,IAATa,GAAgB,SAASC,gBAAT,CAA0BZ,CAA1B,EAA6B;AAAE,iBAAO,KAAKA,CAAC,IAAIW,QAAV,EAAoBV,uDAAgBb,OAAhBa,CAApB,CAAP;AAA/C;;AACAU,gBAAQ,CAACT,KAATS,GAAiB,aAAcV,iEAA0B;AAAEI,eAAK,EAAEM,QAAT;AAAmBP,iBAAO,EAAEO,QAAQ,CAACb;AAArC,SAA1BG,CAA/BU;eAVMA;OAAAA;;AAcN,OAAC,YAAY;AAAE,SAAC,OAAOJ,SAAP,KAAqB,WAArB,IAAoCA,SAArC;AAAf;;UAIMM;AAAAA;AACF1D,gCAAYsD,MAAZtD,EAAoB;AAAA;;AAChB,iBAAKsD,MAAL,GAAcA,MAAd;AACA,iBAAKp0B,MAAL,GAAc,SAAd;AACH;;AAJCw0B;AAAAA;AAAAA,mBAKFxzB,mBAAUpE,SAAVoE,EAAqBtE,OAArBsE,EAA8B0xB,KAA9B1xB,EAAqC;AACjC,qBAAO,KAAKozB,MAAL,CAAYb,GAAZ,CAAgB,KAAKvzB,MAArB,EAA6BgB,SAA7B,CAAuC/J,MAAM,CAACqD,MAAPrD,CAAcA,MAAM,CAACqD,MAAPrD,CAAc,EAAdA,EAAkByF,OAAlBzF,CAAdA,EAA0C;AAAE2F,yBAAF,EAAEA,SAAF;AAAamC,qBAAK,EAAE,KAAKI;AAAzB,eAA1ClI,CAAvC,EAAuHy7B,KAAvH,CAAP;AACH;AAPC8B;;AAAAA;AAAAA;;AASNA,oBAAY,CAACf,IAAbe,GAAoB,SAASC,oBAAT,CAA8Bd,CAA9B,EAAiC;AAAE,iBAAO,KAAKA,CAAC,IAAIa,YAAV,EAAwBZ,uDAAgBb,OAAhBa,CAAxB,CAAP;AAAvD;;AACAY,oBAAY,CAACX,KAAbW,GAAqB,aAAcZ,iEAA0B;AAAEI,eAAK,EAAEQ,YAAT;AAAuBT,iBAAO,EAAES,YAAY,CAACf;AAA7C,SAA1BG,CAAnCY;eAVMA;OAAAA;;AAcN,OAAC,YAAY;AAAE,SAAC,OAAON,SAAP,KAAqB,WAArB,IAAoCA,SAArC;AAAf;AAIA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChVA,eAASQ,cAAT,GAA0B,CAAG;;AAC7B,UAAIC,KAAK,GAAkB,YAAY;AACnC,iBAASA,KAAT,CAAeC,GAAf,EAAoBC,OAApB,EAA6B;AACzB,cAAID,GAAG,KAAK,KAAK,CAAjB,EAAoB;AAAEA,eAAG,GAAGE,QAANF;AAAiB;;AACvC,cAAIC,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAGH,cAAVG;AAA2B;;AACrD,eAAKD,GAAL,GAAWA,GAAX;AACA,eAAKC,OAAL,GAAeA,OAAf;AACA,eAAKj8B,GAAL,GAAW,IAAId,GAAJ,EAAX;AACA,eAAKi9B,MAAL,GAAc,IAAd;AACA,eAAKC,MAAL,GAAc,IAAd;AACH;;AACDL,aAAK,CAAC18B,SAAN08B,CAAgBx8B,GAAhBw8B,GAAsB,UAAU/6B,GAAV,EAAe;AACjC,iBAAO,KAAKhB,GAAL,CAAST,GAAT,CAAayB,GAAb,CAAP;AADJ;;AAGA+6B,aAAK,CAAC18B,SAAN08B,CAAgBl8B,GAAhBk8B,GAAsB,UAAU/6B,GAAV,EAAe;AACjC,cAAIf,IAAI,GAAG,KAAKo8B,OAAL,CAAar7B,GAAb,CAAX;AACA,iBAAOf,IAAI,IAAIA,IAAI,CAACnC,KAApB;AAFJ;;AAIAi+B,aAAK,CAAC18B,SAAN08B,CAAgBM,OAAhBN,GAA0B,UAAU/6B,GAAV,EAAe;AACrC,cAAIf,IAAI,GAAG,KAAKD,GAAL,CAASH,GAAT,CAAamB,GAAb,CAAX;;AACA,cAAIf,IAAI,IAAIA,IAAI,KAAK,KAAKk8B,MAA1B,EAAkC;AAC9B,gBAAIG,KAAK,GAAGr8B,IAAI,CAACq8B,KAAjB;AAAA,gBAAwBC,KAAK,GAAGt8B,IAAI,CAACs8B,KAArC;;AACA,gBAAIA,KAAJ,EAAW;AACPA,mBAAK,CAACD,KAANC,GAAcD,KAAdC;AACH;;AACD,gBAAID,KAAJ,EAAW;AACPA,mBAAK,CAACC,KAAND,GAAcC,KAAdD;AACH;;AACDr8B,gBAAI,CAACq8B,KAALr8B,GAAa,KAAKk8B,MAAlBl8B;AACAA,gBAAI,CAACq8B,KAALr8B,CAAWs8B,KAAXt8B,GAAmBA,IAAnBA;AACAA,gBAAI,CAACs8B,KAALt8B,GAAa,IAAbA;AACA,iBAAKk8B,MAAL,GAAcl8B,IAAd;;AACA,gBAAIA,IAAI,KAAK,KAAKm8B,MAAlB,EAA0B;AACtB,mBAAKA,MAAL,GAAcG,KAAd;AACH;AACJ;;AACD,iBAAOt8B,IAAP;AAlBJ;;AAoBA87B,aAAK,CAAC18B,SAAN08B,CAAgBr8B,GAAhBq8B,GAAsB,UAAU/6B,GAAV,EAAelD,KAAf,EAAsB;AACxC,cAAImC,IAAI,GAAG,KAAKo8B,OAAL,CAAar7B,GAAb,CAAX;;AACA,cAAIf,IAAJ,EAAU;AACN,mBAAOA,IAAI,CAACnC,KAALmC,GAAanC,KAApB;AACH;;AACDmC,cAAI,GAAG;AACHe,eAAG,EAAEA,GADF;AAEHlD,iBAAK,EAAEA,KAFJ;AAGHy+B,iBAAK,EAAE,IAHJ;AAIHD,iBAAK,EAAE,KAAKH;AAJT,WAAPl8B;;AAMA,cAAI,KAAKk8B,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAYI,KAAZ,GAAoBt8B,IAApB;AACH;;AACD,eAAKk8B,MAAL,GAAcl8B,IAAd;AACA,eAAKm8B,MAAL,GAAc,KAAKA,MAAL,IAAen8B,IAA7B;AACA,eAAKD,GAAL,CAASN,GAAT,CAAasB,GAAb,EAAkBf,IAAlB;AACA,iBAAOA,IAAI,CAACnC,KAAZ;AAjBJ;;AAmBAi+B,aAAK,CAAC18B,SAAN08B,CAAgBS,KAAhBT,GAAwB,YAAY;AAChC,iBAAO,KAAKK,MAAL,IAAe,KAAKp8B,GAAL,CAASsQ,IAAT,GAAgB,KAAK0rB,GAA3C,EAAgD;AAC5C,2BAAY,KAAKI,MAAL,CAAYp7B,GAAxB;AACH;AAHL;;AAKA+6B,aAAK,CAAC18B,SAAN08B,aAAyB,UAAU/6B,GAAV,EAAe;AACpC,cAAIf,IAAI,GAAG,KAAKD,GAAL,CAASH,GAAT,CAAamB,GAAb,CAAX;;AACA,cAAIf,IAAJ,EAAU;AACN,gBAAIA,IAAI,KAAK,KAAKk8B,MAAlB,EAA0B;AACtB,mBAAKA,MAAL,GAAcl8B,IAAI,CAACq8B,KAAnB;AACH;;AACD,gBAAIr8B,IAAI,KAAK,KAAKm8B,MAAlB,EAA0B;AACtB,mBAAKA,MAAL,GAAcn8B,IAAI,CAACs8B,KAAnB;AACH;;AACD,gBAAIt8B,IAAI,CAACs8B,KAAT,EAAgB;AACZt8B,kBAAI,CAACs8B,KAALt8B,CAAWq8B,KAAXr8B,GAAmBA,IAAI,CAACq8B,KAAxBr8B;AACH;;AACD,gBAAIA,IAAI,CAACq8B,KAAT,EAAgB;AACZr8B,kBAAI,CAACq8B,KAALr8B,CAAWs8B,KAAXt8B,GAAmBA,IAAI,CAACs8B,KAAxBt8B;AACH;;AACD,iBAAKD,GAAL,WAAgBgB,GAAhB;AACA,iBAAKi7B,OAAL,CAAah8B,IAAI,CAACnC,KAAlB,EAAyBkD,GAAzB;AACA,mBAAO,IAAP;AACH;;AACD,iBAAO,KAAP;AAnBJ;;AAqBA,eAAO+6B,KAAP;AAlFuB,SAA3B;;AAqFA,UAAIU,eAAe,GAAG,IAAIx6B,8CAAJ,EAAtB;;AAEA,UAAIuC,EAAJ;;AACA,UAAIgL,cAAc,GAAGnR,MAAM,CAACgB,SAAPhB,CAAiBmR,cAAtC;AACA,UACA;AACA;AACA;AACA;AACA;AACAktB,aAAO,IAAIl4B,EAAE,GAAGxG,KAAK,CAACoF,IAAXoB,EAAiBA,EAAE,KAAK,KAAK,CAAZA,GAAgB,UAAUm4B,UAAV,EAAsB;AAC9D,YAAI58B,KAAK,GAAG,EAAZ;AACA48B,kBAAU,CAAC57B,OAAX47B,CAAmB,UAAUptB,IAAV,EAAgB;AAAE,iBAAOxP,KAAK,CAACW,IAANX,CAAWwP,IAAXxP,CAAP;AAArC;AACA,eAAOA,KAAP;AAHwB,UAIxByE,EAJG,CANP;;AAWA,eAASo4B,gBAAT,CAA0BC,UAA1B,EAAsC;AAClC,YAAIprB,WAAW,GAAGorB,UAAU,CAACprB,WAA7B;;AACA,YAAI,OAAOA,WAAP,KAAuB,UAA3B,EAAuC;AACnCorB,oBAAU,CAACprB,WAAXorB,GAAyB,KAAK,CAA9BA;AACAprB,qBAAW;AACd;AACJ;;AAED,UAAIqrB,YAAY,GAAG,EAAnB;AACA,UAAIC,gBAAgB,GAAG,GAAvB,EACA;AACA;;AACA,eAASC,MAAT,CAAgBC,SAAhB,EAA2BC,eAA3B,EAA4C;AACxC,YAAI,CAACD,SAAL,EAAgB;AACZ,gBAAM,IAAIzb,KAAJ,CAAU0b,eAAe,IAAI,mBAA7B,CAAN;AACH;AACJ;;AACD,eAASC,OAAT,CAAiBzH,CAAjB,EAAoBC,CAApB,EAAuB;AACnB,YAAIgB,GAAG,GAAGjB,CAAC,CAAC70B,MAAZ;AACA,eACA;AACA81B,aAAG,GAAG,CAANA,IACI;AACAA,aAAG,KAAKhB,CAAC,CAAC90B,MAFd81B,IAGI;AACAjB,WAAC,CAACiB,GAAG,GAAG,CAAP,CAADjB,KAAeC,CAAC,CAACgB,GAAG,GAAG,CAAP;AANpB;AAOH;;AACD,eAASyG,QAAT,CAAkBt/B,KAAlB,EAAyB;AACrB,gBAAQA,KAAK,CAAC+C,MAAd;AACI,eAAK,CAAL;AAAQ,kBAAM,IAAI2gB,KAAJ,CAAU,eAAV,CAAN;;AACR,eAAK,CAAL;AAAQ,mBAAO1jB,KAAK,CAAC,CAAD,CAAZ;;AACR,eAAK,CAAL;AAAQ,kBAAMA,KAAK,CAAC,CAAD,CAAX;AAHZ;AAKH;;AACD,eAASu/B,SAAT,CAAmBv/B,KAAnB,EAA0B;AACtB,eAAOA,KAAK,CAACI,KAANJ,CAAY,CAAZA,CAAP;AACH;;AACD,UAAIw/B,KAAK,GAAkB,YAAY;AACnC,iBAASA,KAAT,CAAeh0B,EAAf,EAAmB;AACf,eAAKA,EAAL,GAAUA,EAAV;AACA,eAAKi0B,OAAL,GAAe,IAAI5+B,GAAJ,EAAf;AACA,eAAK6+B,WAAL,GAAmB,IAAIt+B,GAAJ,EAAnB,CAHe,CAIf;AACA;AACA;;AACA,eAAKu+B,aAAL,GAAqB,IAArB;AACA,eAAKx6B,KAAL,GAAa,IAAb;AACA,eAAKy6B,WAAL,GAAmB,KAAnB;AACA,eAAK5/B,KAAL,GAAa,EAAb;AACA,eAAK6/B,IAAL,GAAY,IAAZ;AACA,YAAEL,KAAK,CAACjU,KAAR;AACH;;AACDiU,aAAK,CAACj+B,SAANi+B,CAAgBM,IAAhBN,GAAuB,YAAY;AAC/B,cAAI,KAAKx/B,KAAL,CAAW+C,MAAX,KAAsB,CAAtB,IAA2B,CAACg9B,YAAY,CAAC,IAAD,CAA5C,EAAoD;AAChDC,0BAAc,CAAC,IAAD,CAAdA;AACA,mBAAO,KAAKhgC,KAAL,CAAW,CAAX,CAAP;AACH;AAJL,UAfmC,CAqBnC;AACA;AACA;AACA;AACA;AACA;;;AACAw/B,aAAK,CAACj+B,SAANi+B,CAAgBS,SAAhBT,GAA4B,UAAU/O,IAAV,EAAgB;AACxCyO,gBAAM,CAAC,CAAC,KAAKU,WAAP,EAAoB,qBAApB,CAANV;AACAc,wBAAc,CAAC,IAAD,CAAdA;AACA,iBAAOD,YAAY,CAAC,IAAD,CAAZA,GACDG,eAAe,CAAC,IAAD,EAAOzP,IAAP,CADdsP,GAEDT,QAAQ,CAAC,KAAKt/B,KAAN,CAFd;AAHJ;;AAOAw/B,aAAK,CAACj+B,SAANi+B,CAAgBW,QAAhBX,GAA2B,YAAY;AACnC,cAAI,KAAKr6B,KAAT,EACI;AACJ,eAAKA,KAAL,GAAa,IAAb;AACA,eAAKnF,KAAL,CAAW+C,MAAX,GAAoB,CAApB;AACAq9B,qBAAW,CAAC,IAAD,CAAXA,CALmC,CAMnC;AACA;AACA;;AACAtB,0BAAgB,CAAC,IAAD,CAAhBA;AATJ;;AAWAU,aAAK,CAACj+B,SAANi+B,CAAgBrB,OAAhBqB,GAA0B,YAAY;AAClC,cAAI39B,KAAK,GAAG,IAAZ;;AACA,eAAKs+B,QAAL,GAFkC,CAGlC;AACA;AACA;;AACAE,wBAAc,CAAC,IAAD,CAAdA,CANkC,CAOlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAC,oBAAU,CAAC,IAAD,EAAO,UAAUtZ,MAAV,EAAkB+D,KAAlB,EAAyB;AACtC/D,kBAAM,CAACmZ,QAAPnZ;AACAuZ,uBAAW,CAACvZ,MAAD,EAASnlB,KAAT,CAAX0+B;AAFM,YAAVD;AAlBJ;;AAuBAd,aAAK,CAACj+B,SAANi+B,CAAgBgB,MAAhBhB,GAAyB,YAAY;AACjC;AACA;AACA;AACA,eAAKrB,OAAL;AAJJ;;AAMAqB,aAAK,CAACj+B,SAANi+B,CAAgBiB,QAAhBjB,GAA2B,UAAU/6B,GAAV,EAAe;AACtCA,aAAG,CAACpC,GAAJoC,CAAQ,IAARA;;AACA,cAAI,CAAC,KAAKo7B,IAAV,EAAgB;AACZ,iBAAKA,IAAL,GAAYb,YAAY,CAAC0B,GAAb1B,MAAsB,IAAIn+B,GAAJ,EAAlC;AACH;;AACD,eAAKg/B,IAAL,CAAUx9B,GAAV,CAAcoC,GAAd;AALJ;;AAOA+6B,aAAK,CAACj+B,SAANi+B,CAAgBmB,UAAhBnB,GAA6B,YAAY;AACrC,cAAI39B,KAAK,GAAG,IAAZ;;AACA,cAAI,KAAKg+B,IAAT,EAAe;AACXjB,mBAAO,CAAC,KAAKiB,IAAN,CAAPjB,CAAmB37B,OAAnB27B,CAA2B,UAAUn6B,GAAV,EAAe;AAAE,qBAAOA,GAAG,UAAHA,CAAW5C,KAAX4C,CAAP;AAA5C;AACA,iBAAKo7B,IAAL,CAAUt6B,KAAV;AACAy5B,wBAAY,CAACp8B,IAAbo8B,CAAkB,KAAKa,IAAvBb;AACA,iBAAKa,IAAL,GAAY,IAAZ;AACH;AAPL;;AASAL,aAAK,CAACjU,KAANiU,GAAc,CAAdA;AACA,eAAOA,KAAP;AA3FuB,SAA3B;;AA6FA,eAASQ,cAAT,CAAwBjV,KAAxB,EAA+B;AAC3B,YAAI/D,MAAM,GAAG2X,eAAe,CAACl5B,QAAhBk5B,EAAb;;AACA,YAAI3X,MAAJ,EAAY;AACR+D,eAAK,CAAC0U,OAAN1U,CAAc1oB,GAAd0oB,CAAkB/D,MAAlB+D;;AACA,cAAI,CAAC/D,MAAM,CAAC0Y,WAAP1Y,CAAmBvlB,GAAnBulB,CAAuB+D,KAAvB/D,CAAL,EAAoC;AAChCA,kBAAM,CAAC0Y,WAAP1Y,CAAmBplB,GAAnBolB,CAAuB+D,KAAvB/D,EAA8B,EAA9BA;AACH;;AACD,cAAI+Y,YAAY,CAAChV,KAAD,CAAhB,EAAyB;AACrB6V,4BAAgB,CAAC5Z,MAAD,EAAS+D,KAAT,CAAhB6V;AADJ,iBAGK;AACDC,4BAAgB,CAAC7Z,MAAD,EAAS+D,KAAT,CAAhB8V;AACH;;AACD,iBAAO7Z,MAAP;AACH;AACJ;;AACD,eAASkZ,eAAT,CAAyBY,KAAzB,EAAgCrQ,IAAhC,EAAsC;AAClC4P,sBAAc,CAACS,KAAD,CAAdT,CADkC,CAElC;;AACA1B,uBAAe,CAACtI,SAAhBsI,CAA0BmC,KAA1BnC,EAAiCoC,iBAAjCpC,EAAoD,CAACmC,KAAD,EAAQrQ,IAAR,CAApDkO;;AACA,YAAIqC,cAAc,CAACF,KAAD,EAAQrQ,IAAR,CAAlB,EAAiC;AAC7B;AACA;AACAwQ,kBAAQ,CAACH,KAAD,CAARG;AACH;;AACD,eAAO3B,QAAQ,CAACwB,KAAK,CAAC9gC,KAAP,CAAf;AACH;;AACD,eAAS+gC,iBAAT,CAA2BD,KAA3B,EAAkCrQ,IAAlC,EAAwC;AACpCqQ,aAAK,CAAClB,WAANkB,GAAoB,IAApBA,CADoC,CAEpC;;AACAA,aAAK,CAAC9gC,KAAN8gC,CAAY/9B,MAAZ+9B,GAAqB,CAArBA;;AACA,YAAI;AACA;AACAA,eAAK,CAAC9gC,KAAN8gC,CAAY,CAAZA,IAAiBA,KAAK,CAACt1B,EAANs1B,CAASlnB,KAATknB,CAAe,IAAfA,EAAqBrQ,IAArBqQ,CAAjBA;AAFJ,UAIA,OAAO1W,CAAP,EAAU;AACN;AACA0W,eAAK,CAAC9gC,KAAN8gC,CAAY,CAAZA,IAAiB1W,CAAjB0W;AAVgC,UAYpC;;;AACAA,aAAK,CAAClB,WAANkB,GAAoB,KAApBA;AACH;;AACD,eAASf,YAAT,CAAsBe,KAAtB,EAA6B;AACzB,eAAOA,KAAK,CAAC37B,KAAN27B,IAAe,CAAC,EAAEA,KAAK,CAACnB,aAANmB,IAAuBA,KAAK,CAACnB,aAANmB,CAAoBtuB,IAA7C,CAAvB;AACH;;AACD,eAASyuB,QAAT,CAAkBH,KAAlB,EAAyB;AACrBA,aAAK,CAAC37B,KAAN27B,GAAc,KAAdA;;AACA,YAAIf,YAAY,CAACe,KAAD,CAAhB,EAAyB;AACrB;AACA;AACA;AACH;;AACDI,mBAAW,CAACJ,KAAD,CAAXI;AACH;;AACD,eAASd,WAAT,CAAqBrV,KAArB,EAA4B;AACxBuV,kBAAU,CAACvV,KAAD,EAAQ6V,gBAAR,CAAVN;AACH;;AACD,eAASY,WAAT,CAAqBnW,KAArB,EAA4B;AACxBuV,kBAAU,CAACvV,KAAD,EAAQ8V,gBAAR,CAAVP;AACH;;AACD,eAASA,UAAT,CAAoBvV,KAApB,EAA2B3P,QAA3B,EAAqC;AACjC,YAAI+lB,WAAW,GAAGpW,KAAK,CAAC0U,OAAN1U,CAAcvY,IAAhC;;AACA,YAAI2uB,WAAJ,EAAiB;AACb,cAAI1B,OAAO,GAAGb,OAAO,CAAC7T,KAAK,CAAC0U,OAAP,CAArB;;AACA,eAAK,IAAIn8B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG69B,WAApB,EAAiC,EAAE79B,CAAnC,EAAsC;AAClC8X,oBAAQ,CAACqkB,OAAO,CAACn8B,CAAD,CAAR,EAAaynB,KAAb,CAAR3P;AACH;AACJ;AACJ,QACD;;;AACA,eAASwlB,gBAAT,CAA0B5Z,MAA1B,EAAkC+D,KAAlC,EAAyC;AACrC;AACA;AACAmU,cAAM,CAAClY,MAAM,CAAC0Y,WAAP1Y,CAAmBvlB,GAAnBulB,CAAuB+D,KAAvB/D,CAAD,CAANkY;AACAA,cAAM,CAACa,YAAY,CAAChV,KAAD,CAAb,CAANmU;AACA,YAAIkC,cAAc,GAAG,CAACrB,YAAY,CAAC/Y,MAAD,CAAlC;;AACA,YAAI,CAACA,MAAM,CAAC2Y,aAAZ,EAA2B;AACvB3Y,gBAAM,CAAC2Y,aAAP3Y,GAAuBgY,YAAY,CAAC0B,GAAb1B,MAAsB,IAAIn+B,GAAJ,EAA7CmmB;AADJ,eAGK,IAAIA,MAAM,CAAC2Y,aAAP3Y,CAAqBvlB,GAArBulB,CAAyB+D,KAAzB/D,CAAJ,EAAqC;AACtC;AACA;AACA;AACA;AACH;;AACDA,cAAM,CAAC2Y,aAAP3Y,CAAqB3kB,GAArB2kB,CAAyB+D,KAAzB/D,EAfqC,CAgBrC;AACA;;AACA,YAAIoa,cAAJ,EAAoB;AAChBhB,qBAAW,CAACpZ,MAAD,CAAXoZ;AACH;AACJ,QACD;;;AACA,eAASS,gBAAT,CAA0B7Z,MAA1B,EAAkC+D,KAAlC,EAAyC;AACrC;AACA;AACAmU,cAAM,CAAClY,MAAM,CAAC0Y,WAAP1Y,CAAmBvlB,GAAnBulB,CAAuB+D,KAAvB/D,CAAD,CAANkY;AACAA,cAAM,CAAC,CAACa,YAAY,CAAChV,KAAD,CAAd,CAANmU;AACA,YAAImC,UAAU,GAAGra,MAAM,CAAC0Y,WAAP1Y,CAAmBjlB,GAAnBilB,CAAuB+D,KAAvB/D,CAAjB;;AACA,YAAIqa,UAAU,CAACt+B,MAAXs+B,KAAsB,CAA1B,EAA6B;AACzBra,gBAAM,CAAC0Y,WAAP1Y,CAAmBplB,GAAnBolB,CAAuB+D,KAAvB/D,EAA8BuY,SAAS,CAACxU,KAAK,CAAC/qB,KAAP,CAAvCgnB;AADJ,eAGK,IAAI,CAACqY,OAAO,CAACgC,UAAD,EAAatW,KAAK,CAAC/qB,KAAnB,CAAZ,EAAuC;AACxCgnB,gBAAM,CAACmZ,QAAPnZ;AACH;;AACDsa,wBAAgB,CAACta,MAAD,EAAS+D,KAAT,CAAhBuW;;AACA,YAAIvB,YAAY,CAAC/Y,MAAD,CAAhB,EAA0B;AACtB;AACH;;AACDka,mBAAW,CAACla,MAAD,CAAXka;AACH;;AACD,eAASI,gBAAT,CAA0Bta,MAA1B,EAAkC+D,KAAlC,EAAyC;AACrC,YAAIwW,EAAE,GAAGva,MAAM,CAAC2Y,aAAhB;;AACA,YAAI4B,EAAJ,EAAQ;AACJA,YAAE,UAAFA,CAAUxW,KAAVwW;;AACA,cAAIA,EAAE,CAAC/uB,IAAH+uB,KAAY,CAAhB,EAAmB;AACf,gBAAIvC,YAAY,CAACj8B,MAAbi8B,GAAsBC,gBAA1B,EAA4C;AACxCD,0BAAY,CAACp8B,IAAbo8B,CAAkBuC,EAAlBvC;AACH;;AACDhY,kBAAM,CAAC2Y,aAAP3Y,GAAuB,IAAvBA;AACH;AACJ;AACJ,QACD;AACA;;;AACA,eAASqZ,cAAT,CAAwBrZ,MAAxB,EAAgC;AAC5B,YAAIA,MAAM,CAAC0Y,WAAP1Y,CAAmBxU,IAAnBwU,GAA0B,CAA9B,EAAiC;AAC7BA,gBAAM,CAAC0Y,WAAP1Y,CAAmB/jB,OAAnB+jB,CAA2B,UAAUwa,MAAV,EAAkBzW,KAAlB,EAAyB;AAChDwV,uBAAW,CAACvZ,MAAD,EAAS+D,KAAT,CAAXwV;AADJ;AAFwB,UAM5B;AACA;;;AACAvZ,cAAM,CAAC2Z,UAAP3Z,GAR4B,CAS5B;AACA;;AACAkY,cAAM,CAAClY,MAAM,CAAC2Y,aAAP3Y,KAAyB,IAA1B,CAANkY;AACH;;AACD,eAASqB,WAAT,CAAqBvZ,MAArB,EAA6B+D,KAA7B,EAAoC;AAChCA,aAAK,CAAC0U,OAAN1U,WAAqB/D,MAArB+D;AACA/D,cAAM,CAAC0Y,WAAP1Y,WAA0B+D,KAA1B/D;AACAsa,wBAAgB,CAACta,MAAD,EAAS+D,KAAT,CAAhBuW;AACH;;AACD,eAASN,cAAT,CAAwBF,KAAxB,EAA+BrQ,IAA/B,EAAqC;AACjC,YAAI,OAAOqQ,KAAK,CAACx2B,SAAb,KAA2B,UAA/B,EAA2C;AACvC,cAAI;AACAw0B,4BAAgB,CAACgC,KAAD,CAAhBhC,CADA,CACyB;;AACzBgC,iBAAK,CAACntB,WAANmtB,GAAoBA,KAAK,CAACx2B,SAANw2B,CAAgBlnB,KAAhBknB,CAAsB,IAAtBA,EAA4BrQ,IAA5BqQ,CAApBA;AAFJ,YAIA,OAAO1W,CAAP,EAAU;AACN;AACA;AACA;AACA;AACA0W,iBAAK,CAACX,QAANW;AACA,mBAAO,KAAP;AACH;AAb4B,UAejC;AACA;;;AACA,eAAO,IAAP;AACH;;AAED,UAAIW,YAAY,GAAG;AACftB,gBAAQ,EAAE,IADK;AAEfhC,eAAO,EAAE,IAFM;AAGfqC,cAAM,EAAE;AAHO,OAAnB;;AAKA,eAAS/7B,IAAT,CAAauB,OAAb,EAAsB;AAClB,YAAI07B,SAAS,GAAG,IAAItgC,GAAJ,EAAhB;AACA,YAAIkJ,SAAS,GAAGtE,OAAO,IAAIA,OAAO,CAACsE,SAAnC;;AACA,iBAASq3B,MAAT,CAAgBz+B,GAAhB,EAAqB;AACjB,cAAI8jB,MAAM,GAAG2X,eAAe,CAACl5B,QAAhBk5B,EAAb;;AACA,cAAI3X,MAAJ,EAAY;AACR,gBAAI4a,KAAK,GAAGF,SAAS,CAAC3/B,GAAV2/B,CAAcx+B,GAAdw+B,CAAZ;;AACA,gBAAI,CAACE,KAAL,EAAY;AACRF,uBAAS,CAAC9/B,GAAV8/B,CAAcx+B,GAAdw+B,EAAmBE,KAAK,GAAG,IAAI/gC,GAAJ,EAA3B6gC;AACH;;AACD1a,kBAAM,CAACyZ,QAAPzZ,CAAgB4a,KAAhB5a;;AACA,gBAAI,OAAO1c,SAAP,KAAqB,UAAzB,EAAqC;AACjCw0B,8BAAgB,CAAC8C,KAAD,CAAhB9C;AACA8C,mBAAK,CAACjuB,WAANiuB,GAAoBt3B,SAAS,CAACpH,GAAD,CAA7B0+B;AACH;AACJ;AACJ;;AACDD,cAAM,CAACx8B,KAAPw8B,GAAe,SAASx8B,KAAT,CAAejC,GAAf,EAAoB2+B,eAApB,EAAqC;AAChD,cAAIp9B,GAAG,GAAGi9B,SAAS,CAAC3/B,GAAV2/B,CAAcx+B,GAAdw+B,CAAV;;AACA,cAAIj9B,GAAJ,EAAS;AACL,gBAAIq9B,GAAG,GAAID,eAAe,IACtBnwB,cAAc,CAACM,IAAfN,CAAoB+vB,YAApB/vB,EAAkCmwB,eAAlCnwB,CADOmwB,GAC+CA,eAD/CA,GACiE,UAD5E,CADK,CAGL;AACA;AACA;;AACAjD,mBAAO,CAACn6B,GAAD,CAAPm6B,CAAa37B,OAAb27B,CAAqB,UAAUkC,KAAV,EAAiB;AAAE,qBAAOA,KAAK,CAACgB,GAAD,CAALhB,EAAP;AAAxC;AACAY,qBAAS,UAATA,CAAiBx+B,GAAjBw+B;AACA5C,4BAAgB,CAACr6B,GAAD,CAAhBq6B;AACH;AAXL;;AAaA,eAAO6C,MAAP;AACH;;AAED,eAASI,+BAAT,GAA2C;AACvC,YAAIC,OAAO,GAAG,IAAIjhC,2CAAJ,CAAS,OAAOG,OAAP,KAAmB,UAA5B,CAAd;AACA,eAAO,YAAY;AACf,iBAAO8gC,OAAO,CAAC5/B,WAAR4/B,CAAoB98B,SAApB88B,CAAP;AADJ;AAGH,QACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,UAAIC,oBAAmB,GAAGF,+BAA+B,EAAzD;;AACA,UAAIh9B,MAAM,GAAG,IAAIlE,GAAJ,EAAb;;AACA,eAAS42B,KAAT,CAAcyK,gBAAd,EAAgCl8B,OAAhC,EAAyC;AACrC,YAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,iBAAO,GAAGzF,MAAM,CAAC8C,MAAP9C,CAAc,IAAdA,CAAVyF;AAAgC;;AAC1D,YAAI1B,KAAK,GAAG,IAAI25B,KAAJ,CAAUj4B,OAAO,CAACk4B,GAARl4B,IAAewlB,IAAI,CAAC2W,GAAL3W,CAAS,CAATA,EAAY,EAAZA,CAAzB,EAA0C,UAAUsV,KAAV,EAAiB;AAAE,iBAAOA,KAAK,CAAC3C,OAAN2C,EAAP;AAA7D,UAAZ;AACA,YAAIsB,OAAO,GAAGp8B,OAAO,CAACo8B,OAAtB;AACA,YAAIC,YAAY,GAAGr8B,OAAO,CAACq8B,YAARr8B,IACf+7B,+BAA+B,EADnC;;AAEA,YAAIt3B,UAAU,GAAG,SAAbA,UAAa,GAAY;AACzB,cAAIvH,GAAG,GAAGm/B,YAAY,CAACzoB,KAAbyoB,CAAmB,IAAnBA,EAAyBD,OAAO,GAAGA,OAAO,CAACxoB,KAARwoB,CAAc,IAAdA,EAAoBl9B,SAApBk9B,CAAH,GAAoCl9B,SAApEm9B,CAAV;;AACA,cAAIn/B,GAAG,KAAK,KAAK,CAAjB,EAAoB;AAChB,mBAAOg/B,gBAAgB,CAACtoB,KAAjBsoB,CAAuB,IAAvBA,EAA6Bh9B,SAA7Bg9B,CAAP;AACH;;AACD,cAAIpB,KAAK,GAAGx8B,KAAK,CAACvC,GAANuC,CAAUpB,GAAVoB,CAAZ;;AACA,cAAI,CAACw8B,KAAL,EAAY;AACRx8B,iBAAK,CAAC1C,GAAN0C,CAAUpB,GAAVoB,EAAew8B,KAAK,GAAG,IAAItB,KAAJ,CAAU0C,gBAAV,CAAvB59B;AACAw8B,iBAAK,CAACx2B,SAANw2B,GAAkB96B,OAAO,CAACsE,SAA1Bw2B,CAFQ,CAGR;AACA;;AACAA,iBAAK,CAACN,MAANM,GAAe,YAAY;AAAE,qBAAOx8B,KAAK,UAALA,CAAapB,GAAboB,CAAP;AAA7B;AACH;;AACD,cAAItE,KAAK,GAAG8gC,KAAK,CAACb,SAANa,CAAgB5gC,KAAK,CAACqB,SAANrB,CAAgBE,KAAhBF,CAAsB8R,IAAtB9R,CAA2BgF,SAA3BhF,CAAhB4gC,CAAZ,CAbyB,CAczB;AACA;;AACAx8B,eAAK,CAAC1C,GAAN0C,CAAUpB,GAAVoB,EAAew8B,KAAfx8B;AACAS,gBAAM,CAAC1C,GAAP0C,CAAWT,KAAXS,EAjByB,CAkBzB;AACA;AACA;;AACA,cAAI,CAAC45B,eAAe,CAACzI,QAAhByI,EAAL,EAAiC;AAC7B55B,kBAAM,CAAC9B,OAAP8B,CAAe,UAAUT,KAAV,EAAiB;AAAE,qBAAOA,KAAK,CAACo6B,KAANp6B,EAAP;AAAlC;AACAS,kBAAM,CAACQ,KAAPR;AACH;;AACD,iBAAO/E,KAAP;AAzBJ;;AA2BAO,cAAM,CAAC8S,cAAP9S,CAAsBkK,UAAtBlK,EAAkC,MAAlCA,EAA0C;AACtCwB,aAAG,EAAE,eAAY;AACb,mBAAOuC,KAAK,CAAC,KAAD,CAALA,CAAakO,IAApB;AAFkC;AAItCe,sBAAY,EAAE,KAJwB;AAKtCD,oBAAU,EAAE;AAL0B,SAA1C/S;;AAOA,iBAAS+hC,QAAT,CAAkBp/B,GAAlB,EAAuB;AACnB,cAAI49B,KAAK,GAAGx8B,KAAK,CAACvC,GAANuC,CAAUpB,GAAVoB,CAAZ;;AACA,cAAIw8B,KAAJ,EAAW;AACPA,iBAAK,CAACX,QAANW;AACH;AACJ;;AACDr2B,kBAAU,CAAC63B,QAAX73B,GAAsB63B,QAAtB73B;;AACAA,kBAAU,CAACtF,KAAXsF,GAAmB,SAAStF,KAAT,GAAiB;AAChCm9B,kBAAQ,CAACD,YAAY,CAACzoB,KAAbyoB,CAAmB,IAAnBA,EAAyBn9B,SAAzBm9B,CAAD,CAARC;AADJ;;AAGA,iBAASC,OAAT,CAAiBr/B,GAAjB,EAAsB;AAClB,cAAI49B,KAAK,GAAGx8B,KAAK,CAACvC,GAANuC,CAAUpB,GAAVoB,CAAZ;;AACA,cAAIw8B,KAAJ,EAAW;AACP,mBAAOA,KAAK,CAAChB,IAANgB,EAAP;AACH;AACJ;;AACDr2B,kBAAU,CAAC83B,OAAX93B,GAAqB83B,OAArB93B;;AACAA,kBAAU,CAACq1B,IAAXr1B,GAAkB,SAASq1B,IAAT,GAAgB;AAC9B,iBAAOyC,OAAO,CAACF,YAAY,CAACzoB,KAAbyoB,CAAmB,IAAnBA,EAAyBn9B,SAAzBm9B,CAAD,CAAd;AADJ;;AAGA,iBAASG,SAAT,CAAmBt/B,GAAnB,EAAwB;AACpB,iBAAOoB,KAAK,UAALA,CAAapB,GAAboB,CAAP;AACH;;AACDmG,kBAAU,CAAC+3B,SAAX/3B,GAAuB+3B,SAAvB/3B;;AACAA,kBAAU,CAAC+1B,MAAX/1B,GAAoB,SAAS+1B,MAAT,GAAkB;AAClC,iBAAOgC,SAAS,CAACH,YAAY,CAACzoB,KAAbyoB,CAAmB,IAAnBA,EAAyBn9B,SAAzBm9B,CAAD,CAAhB;AADJ;;AAGA53B,kBAAU,CAAC43B,YAAX53B,GAA0B43B,YAA1B53B;AACAA,kBAAU,CAACg4B,MAAXh4B,GAAoB23B,OAAO,GAAG,SAASK,MAAT,GAAkB;AAC5C,iBAAOJ,YAAY,CAACzoB,KAAbyoB,CAAmB,IAAnBA,EAAyBD,OAAO,CAACxoB,KAARwoB,CAAc,IAAdA,EAAoBl9B,SAApBk9B,CAAzBC,CAAP;AADuB,YAEvBA,YAFJ53B;AAGA,eAAOlK,MAAM,CAACgC,MAAPhC,CAAckK,UAAdlK,CAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1gBD,UAAImiC,cAAc,GAAG,qBAArB;AACA,UAAIh8B,EAAE,GAAGnG,MAAM,CAACoiC,cAAhB;AAAA,UAAgCA,cAAc,GAAGj8B,EAAE,KAAK,KAAK,CAAZA,GAAgB,UAAUnD,GAAV,EAAevB,KAAf,EAAsB;AACnFuB,WAAG,CAACjD,SAAJiD,GAAgBvB,KAAhBuB;AACA,eAAOA,GAAP;AAF6C,UAG7CmD,EAHJ;;AAIA,UAAIsB,eAAc,GAAkB,UAAU6J,MAAV,EAAkB;AAClDC,0DAAU9J,cAAV8J,EAA0BD,MAA1BC;;AACA,iBAAS9J,cAAT,CAAwBkR,OAAxB,EAAiC;AAC7B,cAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,mBAAO,GAAGwpB,cAAVxpB;AAA2B;;AACrD,cAAIrX,KAAK,GAAGgQ,MAAM,CAACG,IAAPH,CAAY,IAAZA,EAAkB,OAAOqH,OAAP,KAAmB,QAAnB,GACxBwpB,cAAc,GAAG,IAAjBA,GAAwBxpB,OAAxBwpB,GAAkC,4DADV,GAExBxpB,OAFMrH,KAEM,IAFlB;;AAGAhQ,eAAK,CAAC+gC,WAAN/gC,GAAoB,CAApBA;AACAA,eAAK,CAAC6F,IAAN7F,GAAa6gC,cAAb7gC;AACA8gC,wBAAc,CAAC9gC,KAAD,EAAQmG,cAAc,CAACzG,SAAvB,CAAdohC;AACA,iBAAO9gC,KAAP;AACH;;AACD,eAAOmG,cAAP;AAZgC,QAalC0b,KAbkC,CAApC;;AAcA,eAASva,UAAT,CAAmBg2B,SAAnB,EAA8BjmB,OAA9B,EAAuC;AACnC,YAAI,CAACimB,SAAL,EAAgB;AACZ,gBAAM,IAAIn3B,eAAJ,CAAmBkR,OAAnB,CAAN;AACH;AACJ;;AACD,UAAI2pB,eAAe,GAAG,CAAC,OAAD,EAAU,KAAV,EAAiB,MAAjB,EAAyB,OAAzB,EAAkC,QAAlC,CAAtB;AACA,UAAIC,cAAc,GAAGD,eAAe,CAAC35B,OAAhB25B,CAAwB,KAAxBA,CAArB;;AACA,eAASE,iBAAT,CAA2Br7B,IAA3B,EAAiC;AAC7B,eAAO,YAAY;AACf,cAAIm7B,eAAe,CAAC35B,OAAhB25B,CAAwBn7B,IAAxBm7B,KAAiCC,cAArC,EAAqD;AACjD;AACA;AACA,gBAAIvb,MAAM,GAAGyb,OAAO,CAACt7B,IAAD,CAAPs7B,IAAiBA,OAAO,CAACC,GAAtC;AACA,mBAAO1b,MAAM,CAAC3N,KAAP2N,CAAayb,OAAbzb,EAAsBriB,SAAtBqiB,CAAP;AACH;AANL;AAQH;;AACD,OAAC,UAAUpe,SAAV,EAAqB;AAClBA,iBAAS,CAAC+5B,KAAV/5B,GAAkB45B,iBAAiB,CAAC,OAAD,CAAnC55B;AACAA,iBAAS,CAAC85B,GAAV95B,GAAgB45B,iBAAiB,CAAC,KAAD,CAAjC55B;AACAA,iBAAS,CAACg6B,IAAVh6B,GAAiB45B,iBAAiB,CAAC,MAAD,CAAlC55B;AACAA,iBAAS,CAAC+C,KAAV/C,GAAkB45B,iBAAiB,CAAC,OAAD,CAAnC55B;AAJJ,SAKGA,UAAS,KAAKA,UAAS,GAAG,EAAjB,CALZ;;AAMA,eAASi6B,aAAT,CAAsBC,KAAtB,EAA6B;AACzB,YAAIC,GAAG,GAAGT,eAAe,CAACC,cAAD,CAAzB;AACAA,sBAAc,GAAGtX,IAAI,CAAC0S,GAAL1S,CAAS,CAATA,EAAYqX,eAAe,CAAC35B,OAAhB25B,CAAwBQ,KAAxBR,CAAZrX,CAAjBsX;AACA,eAAOQ,GAAP;AACH;;AACD,UAAIC,WAAW,GAAGp6B,UAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDA,eAASqc,KAAT,CAAe+H,KAAf,EAAsB;AACpB,YAAI;AAAE,iBAAOA,KAAK,EAAZ;AAAN,UAAuB,OAAOgH,CAAP,EAAU,CAAE;AACpC;;AAED,UAAIiP,UAAU,GACZhe,KAAK,CAAC,YAAW;AAAE,eAAOwH,UAAP;AAAd,QAALxH,IACAA,KAAK,CAAC,YAAW;AAAE,eAAOxe,MAAP;AAAd,QADLwe,IAEAA,KAAK,CAAC,YAAW;AAAE,eAAO7c,IAAP;AAAd,QAFL6c,IAGAA,KAAK,CAAC,YAAW;AAAE,eAAOoH,MAAP;AAAd,QAHLpH,IAIAA,KAAK,CAAC,YAAW;AAAE,eAAOyH,QAAQ,CAAC,aAAD,CAARA,EAAP;AAAd,QALP;AAQA,UAAIwW,YAAY,GAAG,KAAnB;;AAEO,eAASC,QAAT,GAAmB;AACxB,YAAIF,UAAU,IACV,CAAChe,KAAK,CAAC,YAAW;AAAE,iBAAOqH,aAAP;AAAd,UADN2W,IAEA,CAAChe,KAAK,CAAC,YAAW;AAAE,iBAAOqH,OAAP;AAAd,UAFV,EAE2C;AACzCtsB,gBAAM,CAAC8S,cAAP9S,CAAsBijC,UAAtBjjC,EAAkC,SAAlCA,EAA6C;AAC3CP,iBAAK,EAAE;AACL2jC,iBAAG,EAAE;AACH;AACA;AACA;AACAC,wBAAQ,EAAE;AAJP;AADA,aADoC;AAS3C;AACA;AACArwB,wBAAY,EAAE,IAX6B;AAY3CD,sBAAU,EAAE,KAZ+B;AAa3CwZ,oBAAQ,EAAE;AAbiC,WAA7CvsB;AAeAkjC,sBAAY,GAAG,IAAfA;AACD;AACF,QAED;;;AACAC,cAAO;;AAEA,eAAStW,OAAT,GAAkB;AACvB,YAAIqW,YAAJ,EAAkB;AAChB,iBAAOD,UAAU,CAAC3W,OAAlB;AACA4W,sBAAY,GAAG,KAAfA;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;AC7CD,eAASI,+BAAT,CAAyCC,CAAzC,EAA4CC,cAA5C,EAA4D;AAAE,YAAIC,EAAE,GAAG,OAAOtO,MAAP,KAAkB,WAAlB,IAAiCoO,CAAC,CAACpO,MAAM,CAACuO,QAAR,CAAlC,IAAuDH,CAAC,CAAC,YAAD,CAAjE;AAAiF,YAAIE,EAAJ,EAAQ,OAAO,CAACA,EAAE,GAAGA,EAAE,CAAChyB,IAAHgyB,CAAQF,CAARE,CAAN,EAAkBtxB,IAAlB,CAAuBtK,IAAvB,CAA4B47B,EAA5B,CAAP;;AAAwC,YAAI9jC,KAAK,CAACC,OAAND,CAAc4jC,CAAd5jC,MAAqB8jC,EAAE,GAAGE,2BAA2B,CAACJ,CAAD,CAArD5jC,KAA6D6jC,cAAc,IAAID,CAAlBC,IAAuB,OAAOD,CAAC,CAAC/gC,MAAT,KAAoB,QAA5G,EAAsH;AAAE,cAAIihC,EAAJ,EAAQF,CAAC,GAAGE,EAAJF;AAAQ,cAAIxgC,CAAC,GAAG,CAAR;AAAW,iBAAO,YAAY;AAAE,gBAAIA,CAAC,IAAIwgC,CAAC,CAAC/gC,MAAX,EAAmB,OAAO;AAAEo0B,kBAAI,EAAE;AAAR,aAAP;AAAuB,mBAAO;AAAEA,kBAAI,EAAE,KAAR;AAAen3B,mBAAK,EAAE8jC,CAAC,CAACxgC,CAAC,EAAF;AAAvB,aAAP;AAA/D;AAA0G;;AAAC,cAAM,IAAI6gC,SAAJ,CAAc,uIAAd,CAAN;AAA+J;;AAE5lB,eAASD,2BAAT,CAAqCJ,CAArC,EAAwCM,MAAxC,EAAgD;AAAE,YAAI,CAACN,CAAL,EAAQ;AAAQ,YAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOO,iBAAiB,CAACP,CAAD,EAAIM,MAAJ,CAAxB;AAAqC,YAAIE,CAAC,GAAG/jC,MAAM,CAACgB,SAAPhB,CAAiBmqB,QAAjBnqB,CAA0ByR,IAA1BzR,CAA+BujC,CAA/BvjC,EAAkCH,KAAlCG,CAAwC,CAAxCA,EAA2C,CAAC,CAA5CA,CAAR;AAAwD,YAAI+jC,CAAC,KAAK,QAANA,IAAkBR,CAAC,CAAC1J,WAAxB,EAAqCkK,CAAC,GAAGR,CAAC,CAAC1J,WAAF0J,CAAcp8B,IAAlB48B;AAAwB,YAAIA,CAAC,KAAK,KAANA,IAAeA,CAAC,KAAK,KAAzB,EAAgC,OAAOpkC,KAAK,CAACoF,IAANpF,CAAW4jC,CAAX5jC,CAAP;AAAsB,YAAIokC,CAAC,KAAK,WAANA,IAAqB,2CAA2C9f,IAA3C,CAAgD8f,CAAhD,CAAzB,EAA6E,OAAOD,iBAAiB,CAACP,CAAD,EAAIM,MAAJ,CAAxB;AAAsC;;AAEha,eAASC,iBAAT,CAA2BE,GAA3B,EAAgC1L,GAAhC,EAAqC;AAAE,YAAIA,GAAG,IAAI,IAAPA,IAAeA,GAAG,GAAG0L,GAAG,CAACxhC,MAA7B,EAAqC81B,GAAG,GAAG0L,GAAG,CAACxhC,MAAV81B;;AAAkB,aAAK,IAAIv1B,CAAC,GAAG,CAAR,EAAWkhC,IAAI,GAAG,IAAItkC,KAAJ,CAAU24B,GAAV,CAAvB,EAAuCv1B,CAAC,GAAGu1B,GAA3C,EAAgDv1B,CAAC,EAAjD,EAAqD;AAAEkhC,cAAI,CAAClhC,CAAD,CAAJkhC,GAAUD,GAAG,CAACjhC,CAAD,CAAbkhC;AAAmB;;AAAC,eAAOA,IAAP;AAAc;;AAEvL,eAASC,iBAAT,CAA2BtZ,MAA3B,EAAmCuZ,KAAnC,EAA0C;AAAE,aAAK,IAAIphC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGohC,KAAK,CAAC3hC,MAA1B,EAAkCO,CAAC,EAAnC,EAAuC;AAAE,cAAIqhC,UAAU,GAAGD,KAAK,CAACphC,CAAD,CAAtB;AAA2BqhC,oBAAU,CAACrxB,UAAXqxB,GAAwBA,UAAU,CAACrxB,UAAXqxB,IAAyB,KAAjDA;AAAwDA,oBAAU,CAACpxB,YAAXoxB,GAA0B,IAA1BA;AAAgC,cAAI,WAAWA,UAAf,EAA2BA,UAAU,CAAC7X,QAAX6X,GAAsB,IAAtBA;AAA4BpkC,gBAAM,CAAC8S,cAAP9S,CAAsB4qB,MAAtB5qB,EAA8BokC,UAAU,CAACzhC,GAAzC3C,EAA8CokC,UAA9CpkC;AAA4D;AAAE;;AAE7T,eAASqkC,YAAT,CAAsBC,WAAtB,EAAmCC,UAAnC,EAA+CC,WAA/C,EAA4D;AAAE,YAAID,UAAJ,EAAgBL,iBAAiB,CAACI,WAAW,CAACtjC,SAAb,EAAwBujC,UAAxB,CAAjBL;AAAsD,YAAIM,WAAJ,EAAiBN,iBAAiB,CAACI,WAAD,EAAcE,WAAd,CAAjBN;AAA6C,eAAOI,WAAP;AAAqB,QAEvN;;;AACA,UAAIG,UAAU,GAAG,SAAbA,UAAa,GAAY;AAC3B,eAAO,OAAOtP,MAAP,KAAkB,UAAzB;AADF;;AAIA,UAAIuP,SAAS,GAAG,SAAZA,SAAY,CAAUv9B,IAAV,EAAgB;AAC9B,eAAOs9B,UAAU,MAAMrY,OAAO,CAAC+I,MAAM,CAAChuB,IAAD,CAAP,CAA9B;AADF;;AAIA,UAAIw9B,SAAS,GAAG,SAAZA,SAAY,CAAUx9B,IAAV,EAAgB;AAC9B,eAAOu9B,SAAS,CAACv9B,IAAD,CAATu9B,GAAkBvP,MAAM,CAAChuB,IAAD,CAAxBu9B,GAAiC,OAAOv9B,IAA/C;AADF;;AAIA,UAAIs9B,UAAU,MAAM,CAACC,SAAS,CAAC,YAAD,CAA9B,EAA8C;AAC5CvP,cAAM,CAACpV,UAAPoV,GAAoBA,MAAM,CAAC,YAAD,CAA1BA;AACD;;AAED,UAAIyP,cAAc,GAAGD,SAAS,CAAC,UAAD,CAA9B;AACA,UAAIE,gBAAgB,GAAGF,SAAS,CAAC,YAAD,CAAhC;AACA,UAAIG,aAAa,GAAGH,SAAS,CAAC,SAAD,CAA7B,EAA0C;;AAE1C,eAASI,SAAT,CAAmB/hC,GAAnB,EAAwBL,GAAxB,EAA6B;AAC3B,YAAIlD,KAAK,GAAGuD,GAAG,CAACL,GAAD,CAAf;AACA,YAAIlD,KAAK,IAAI,IAAb,EAAmB,OAAO0f,SAAP;AACnB,YAAI,OAAO1f,KAAP,KAAiB,UAArB,EAAiC,MAAM,IAAImkC,SAAJ,CAAcnkC,KAAK,GAAG,oBAAtB,CAAN;AACjC,eAAOA,KAAP;AACD;;AAED,eAASulC,UAAT,CAAoBhiC,GAApB,EAAyB;AACvB,YAAIiiC,IAAI,GAAGjiC,GAAG,CAAC62B,WAAf;;AAEA,YAAIoL,IAAI,KAAK9lB,SAAb,EAAwB;AACtB8lB,cAAI,GAAGA,IAAI,CAACH,aAAD,CAAXG;;AAEA,cAAIA,IAAI,KAAK,IAAb,EAAmB;AACjBA,gBAAI,GAAG9lB,SAAP8lB;AACD;AACF;;AAED,eAAOA,IAAI,KAAK9lB,SAAT8lB,GAAqBA,IAArBA,GAA4BxsB,WAAnC;AACD;;AAED,eAASysB,YAAT,CAAsBphB,CAAtB,EAAyB;AACvB,eAAOA,CAAC,YAAYrL,WAApB,CADuB,CACS;AACjC;;AAED,eAAS0sB,eAAT,CAAyBtb,CAAzB,EAA4B;AAC1B,YAAIsb,eAAe,CAACzC,GAApB,EAAyB;AACvByC,yBAAe,CAACzC,GAAhByC,CAAoBtb,CAApBsb;AADF,eAEO;AACLx9B,oBAAU,CAAC,YAAY;AACrB,kBAAMkiB,CAAN;AADQ,YAAVliB;AAGD;AACF;;AAED,eAASy9B,OAAT,CAAiBn6B,EAAjB,EAAqB;AACnBL,eAAO,CAACC,OAARD,GAAkBE,IAAlBF,CAAuB,YAAY;AACjC,cAAI;AACFK,cAAE;AADJ,YAEE,OAAO4e,CAAP,EAAU;AACVsb,2BAAe,CAACtb,CAAD,CAAfsb;AACD;AALH;AAOD;;AAED,eAASE,mBAAT,CAA6BlyB,YAA7B,EAA2C;AACzC,YAAIqO,OAAO,GAAGrO,YAAY,CAACmyB,QAA3B;AACA,YAAI9jB,OAAO,KAAKrC,SAAhB,EAA2B;AAC3BhM,oBAAY,CAACmyB,QAAbnyB,GAAwBgM,SAAxBhM;;AAEA,YAAI,CAACqO,OAAL,EAAc;AACZ;AACD;;AAED,YAAI;AACF,cAAI,OAAOA,OAAP,KAAmB,UAAvB,EAAmC;AACjCA,mBAAO;AADT,iBAEO;AACL,gBAAIpO,WAAW,GAAG2xB,SAAS,CAACvjB,OAAD,EAAU,aAAV,CAA3B;;AAEA,gBAAIpO,WAAJ,EAAiB;AACfA,yBAAW,CAAC3B,IAAZ2B,CAAiBoO,OAAjBpO;AACD;AACF;AATH,UAUE,OAAOyW,CAAP,EAAU;AACVsb,yBAAe,CAACtb,CAAD,CAAfsb;AACD;AACF;;AAED,eAASI,iBAAT,CAA2BpyB,YAA3B,EAAyC;AACvCA,oBAAY,CAACtB,SAAbsB,GAAyBgM,SAAzBhM;AACAA,oBAAY,CAACqyB,MAAbryB,GAAsBgM,SAAtBhM;AACAA,oBAAY,CAACsyB,MAAbtyB,GAAsB,QAAtBA;AACD;;AAED,eAASuyB,iBAAT,CAA2BvyB,YAA3B,EAAyC;AACvC,YAAIwyB,KAAK,GAAGxyB,YAAY,CAACqyB,MAAzB;;AAEA,YAAI,CAACG,KAAL,EAAY;AACV;AACD;;AAEDxyB,oBAAY,CAACqyB,MAAbryB,GAAsBgM,SAAtBhM;AACAA,oBAAY,CAACsyB,MAAbtyB,GAAsB,OAAtBA;;AAEA,aAAK,IAAIpQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4iC,KAAK,CAACnjC,MAA1B,EAAkC,EAAEO,CAApC,EAAuC;AACrC6iC,4BAAkB,CAACzyB,YAAD,EAAewyB,KAAK,CAAC5iC,CAAD,CAAL4iC,CAASE,IAAxB,EAA8BF,KAAK,CAAC5iC,CAAD,CAAL4iC,CAASlmC,KAAvC,CAAlBmmC;AACA,cAAIzyB,YAAY,CAACsyB,MAAbtyB,KAAwB,QAA5B,EAAsC;AACvC;AACF;;AAED,eAASyyB,kBAAT,CAA4BzyB,YAA5B,EAA0C0yB,IAA1C,EAAgDpmC,KAAhD,EAAuD;AACrD0T,oBAAY,CAACsyB,MAAbtyB,GAAsB,SAAtBA;AACA,YAAIzB,QAAQ,GAAGyB,YAAY,CAACtB,SAA5B;;AAEA,YAAI;AACF,cAAIgH,CAAC,GAAGksB,SAAS,CAACrzB,QAAD,EAAWm0B,IAAX,CAAjB;;AAEA,kBAAQA,IAAR;AACE,iBAAK,MAAL;AACE,kBAAIhtB,CAAJ,EAAOA,CAAC,CAACpH,IAAFoH,CAAOnH,QAAPmH,EAAiBpZ,KAAjBoZ;AACP;;AAEF,iBAAK,OAAL;AACE0sB,+BAAiB,CAACpyB,YAAD,CAAjBoyB;AACA,kBAAI1sB,CAAJ,EAAOA,CAAC,CAACpH,IAAFoH,CAAOnH,QAAPmH,EAAiBpZ,KAAjBoZ,EAAP,KAAoC,MAAMpZ,KAAN;AACpC;;AAEF,iBAAK,UAAL;AACE8lC,+BAAiB,CAACpyB,YAAD,CAAjBoyB;AACA,kBAAI1sB,CAAJ,EAAOA,CAAC,CAACpH,IAAFoH,CAAOnH,QAAPmH;AACP;AAbJ;AAHF,UAkBE,OAAOgR,CAAP,EAAU;AACVsb,yBAAe,CAACtb,CAAD,CAAfsb;AACD;;AAED,YAAIhyB,YAAY,CAACsyB,MAAbtyB,KAAwB,QAA5B,EAAsCkyB,mBAAmB,CAAClyB,YAAD,CAAnBkyB,CAAtC,KAA6E,IAAIlyB,YAAY,CAACsyB,MAAbtyB,KAAwB,SAA5B,EAAuCA,YAAY,CAACsyB,MAAbtyB,GAAsB,OAAtBA;AACrH;;AAED,eAAS2yB,QAAT,CAAkB3yB,YAAlB,EAAgC0yB,IAAhC,EAAsCpmC,KAAtC,EAA6C;AAC3C,YAAI0T,YAAY,CAACsyB,MAAbtyB,KAAwB,QAA5B,EAAsC;;AAEtC,YAAIA,YAAY,CAACsyB,MAAbtyB,KAAwB,WAA5B,EAAyC;AACvCA,sBAAY,CAACqyB,MAAbryB,CAAoB9Q,IAApB8Q,CAAyB;AACvB0yB,gBAAI,EAAEA,IADiB;AAEvBpmC,iBAAK,EAAEA;AAFgB,WAAzB0T;;AAKA;AACD;;AAED,YAAIA,YAAY,CAACsyB,MAAbtyB,KAAwB,OAA5B,EAAqC;AACnCA,sBAAY,CAACsyB,MAAbtyB,GAAsB,WAAtBA;AACAA,sBAAY,CAACqyB,MAAbryB,GAAsB,CAAC;AACrB0yB,gBAAI,EAAEA,IADe;AAErBpmC,iBAAK,EAAEA;AAFc,WAAD,CAAtB0T;AAIAiyB,iBAAO,CAAC,YAAY;AAClB,mBAAOM,iBAAiB,CAACvyB,YAAD,CAAxB;AADK,YAAPiyB;AAGA;AACD;;AAEDQ,0BAAkB,CAACzyB,YAAD,EAAe0yB,IAAf,EAAqBpmC,KAArB,CAAlBmmC;AACD;;AAED,UAAIrI,YAAY,GAAG,aAAa,YAAY;AAC1C,iBAASA,YAAT,CAAsB7rB,QAAtB,EAAgCgoB,UAAhC,EAA4C;AAC1C;AACA;AACA,eAAK4L,QAAL,GAAgBnmB,SAAhB;AACA,eAAKtN,SAAL,GAAiBH,QAAjB;AACA,eAAK8zB,MAAL,GAAcrmB,SAAd;AACA,eAAKsmB,MAAL,GAAc,cAAd;AACA,cAAIM,oBAAoB,GAAG,IAAIC,oBAAJ,CAAyB,IAAzB,CAA3B;;AAEA,cAAI;AACF,iBAAKV,QAAL,GAAgB5L,UAAU,CAACjoB,IAAXioB,CAAgBva,SAAhBua,EAA2BqM,oBAA3BrM,CAAhB;AADF,YAEE,OAAO7P,CAAP,EAAU;AACVkc,gCAAoB,CAACp6B,KAArBo6B,CAA2Blc,CAA3Bkc;AACD;;AAED,cAAI,KAAKN,MAAL,KAAgB,cAApB,EAAoC,KAAKA,MAAL,GAAc,OAAd;AACrC;;AAED,YAAIQ,MAAM,GAAG1I,YAAY,CAACv8B,SAA1B;;AAEAilC,cAAM,CAAC7yB,WAAP6yB,GAAqB,SAAS7yB,WAAT,GAAuB;AAC1C,cAAI,KAAKqyB,MAAL,KAAgB,QAApB,EAA8B;AAC5BF,6BAAiB,CAAC,IAAD,CAAjBA;AACAF,+BAAmB,CAAC,IAAD,CAAnBA;AACD;AAJH;;AAOAhB,oBAAY,CAAC9G,YAAD,EAAe,CAAC;AAC1B56B,aAAG,EAAE,QADqB;AAE1BnB,aAAG,EAAE,eAAY;AACf,mBAAO,KAAKikC,MAAL,KAAgB,QAAvB;AACD;AAJyB,SAAD,CAAf,CAAZpB;;AAOA,eAAO9G,YAAP;AAnC8B,SAAhC;;AAsCA,UAAIyI,oBAAoB,GAAG,aAAa,YAAY;AAClD,iBAASA,oBAAT,CAA8B7yB,YAA9B,EAA4C;AAC1C,eAAKvB,aAAL,GAAqBuB,YAArB;AACD;;AAED,YAAI+yB,OAAO,GAAGF,oBAAoB,CAAChlC,SAAnC;;AAEAklC,eAAO,CAAC/zB,IAAR+zB,GAAe,SAAS/zB,IAAT,CAAc1S,KAAd,EAAqB;AAClCqmC,kBAAQ,CAAC,KAAKl0B,aAAN,EAAqB,MAArB,EAA6BnS,KAA7B,CAARqmC;AADF;;AAIAI,eAAO,CAACv6B,KAARu6B,GAAgB,SAASv6B,KAAT,CAAelM,KAAf,EAAsB;AACpCqmC,kBAAQ,CAAC,KAAKl0B,aAAN,EAAqB,OAArB,EAA8BnS,KAA9B,CAARqmC;AADF;;AAIAI,eAAO,CAACjyB,QAARiyB,GAAmB,SAASjyB,QAAT,GAAoB;AACrC6xB,kBAAQ,CAAC,KAAKl0B,aAAN,EAAqB,UAArB,CAARk0B;AADF;;AAIAzB,oBAAY,CAAC2B,oBAAD,EAAuB,CAAC;AAClCrjC,aAAG,EAAE,QAD6B;AAElCnB,aAAG,EAAE,eAAY;AACf,mBAAO,KAAKoQ,aAAL,CAAmB6zB,MAAnB,KAA8B,QAArC;AACD;AAJiC,SAAD,CAAvB,CAAZpB;;AAOA,eAAO2B,oBAAP;AA1BsC,SAAxC;;AA6BA,UAAIvtB,WAAU,GAAG,aAAa,YAAY;AACxC,iBAASA,UAAT,CAAoBihB,UAApB,EAAgC;AAC9B,cAAI,EAAE,gBAAgBjhB,UAAlB,CAAJ,EAAmC,MAAM,IAAImrB,SAAJ,CAAc,2CAAd,CAAN;AACnC,cAAI,OAAOlK,UAAP,KAAsB,UAA1B,EAAsC,MAAM,IAAIkK,SAAJ,CAAc,2CAAd,CAAN;AACtC,eAAKuC,WAAL,GAAmBzM,UAAnB;AACD;;AAED,YAAI0M,OAAO,GAAG3tB,UAAU,CAACzX,SAAzB;;AAEAolC,eAAO,CAACr8B,SAARq8B,GAAoB,SAASr8B,SAAT,CAAmB2H,QAAnB,EAA6B;AAC/C,cAAI,OAAOA,QAAP,KAAoB,QAApB,IAAgCA,QAAQ,KAAK,IAAjD,EAAuD;AACrDA,oBAAQ,GAAG;AACTS,kBAAI,EAAET,QADG;AAET/F,mBAAK,EAAEhH,SAAS,CAAC,CAAD,CAFP;AAGTsP,sBAAQ,EAAEtP,SAAS,CAAC,CAAD;AAHV,aAAX+M;AAKD;;AAED,iBAAO,IAAI6rB,YAAJ,CAAiB7rB,QAAjB,EAA2B,KAAKy0B,WAAhC,CAAP;AATF;;AAYAC,eAAO,CAAC1jC,OAAR0jC,GAAkB,SAAS1jC,OAAT,CAAiBuI,EAAjB,EAAqB;AACrC,cAAI3J,KAAK,GAAG,IAAZ;;AAEA,iBAAO,IAAIsJ,OAAJ,CAAY,UAAUC,OAAV,EAAmBoI,MAAnB,EAA2B;AAC5C,gBAAI,OAAOhI,EAAP,KAAc,UAAlB,EAA8B;AAC5BgI,oBAAM,CAAC,IAAI2wB,SAAJ,CAAc34B,EAAE,GAAG,oBAAnB,CAAD,CAANgI;AACA;AACD;;AAED,qBAAS2jB,IAAT,GAAgB;AACdzjB,0BAAY,CAACC,WAAbD;AACAtI,qBAAO;AACR;;AAED,gBAAIsI,YAAY,GAAG7R,KAAK,CAACyI,SAANzI,CAAgB;AACjC6Q,kBAAI,EAAE,cAAU1S,KAAV,EAAiB;AACrB,oBAAI;AACFwL,oBAAE,CAACxL,KAAD,EAAQm3B,IAAR,CAAF3rB;AADF,kBAEE,OAAO4e,CAAP,EAAU;AACV5W,wBAAM,CAAC4W,CAAD,CAAN5W;AACAE,8BAAY,CAACC,WAAbD;AACD;AAP8B;AASjCxH,mBAAK,EAAEsH,MAT0B;AAUjCgB,sBAAQ,EAAEpJ;AAVuB,aAAhBvJ,CAAnB;AAXK,YAAP;AAHF;;AA6BA8kC,eAAO,CAACzkC,GAARykC,GAAc,SAASzkC,GAAT,CAAasJ,EAAb,EAAiB;AAC7B,cAAIo7B,MAAM,GAAG,IAAb;;AAEA,cAAI,OAAOp7B,EAAP,KAAc,UAAlB,EAA8B,MAAM,IAAI24B,SAAJ,CAAc34B,EAAE,GAAG,oBAAnB,CAAN;AAC9B,cAAIq7B,CAAC,GAAGtB,UAAU,CAAC,IAAD,CAAlB;AACA,iBAAO,IAAIsB,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B,mBAAO20B,MAAM,CAACt8B,SAAPs8B,CAAiB;AACtBl0B,kBAAI,EAAE,cAAU1S,KAAV,EAAiB;AACrB,oBAAI;AACFA,uBAAK,GAAGwL,EAAE,CAACxL,KAAD,CAAVA;AADF,kBAEE,OAAOoqB,CAAP,EAAU;AACV,yBAAOnY,QAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY,CAAP;AACD;;AAEDA,wBAAQ,CAACS,IAATT,CAAcjS,KAAdiS;AARoB;AAUtB/F,mBAAK,EAAE,eAAUke,CAAV,EAAa;AAClBnY,wBAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY;AAXoB;AAatBuC,sBAAQ,EAAE,oBAAY;AACpBvC,wBAAQ,CAACuC,QAATvC;AACD;AAfqB,aAAjB20B,CAAP;AADK,YAAP;AALF;;AA0BAD,eAAO,CAACj7B,MAARi7B,GAAiB,SAASj7B,MAAT,CAAgBF,EAAhB,EAAoB;AACnC,cAAIs7B,MAAM,GAAG,IAAb;;AAEA,cAAI,OAAOt7B,EAAP,KAAc,UAAlB,EAA8B,MAAM,IAAI24B,SAAJ,CAAc34B,EAAE,GAAG,oBAAnB,CAAN;AAC9B,cAAIq7B,CAAC,GAAGtB,UAAU,CAAC,IAAD,CAAlB;AACA,iBAAO,IAAIsB,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B,mBAAO60B,MAAM,CAACx8B,SAAPw8B,CAAiB;AACtBp0B,kBAAI,EAAE,cAAU1S,KAAV,EAAiB;AACrB,oBAAI;AACF,sBAAI,CAACwL,EAAE,CAACxL,KAAD,CAAP,EAAgB;AADlB,kBAEE,OAAOoqB,CAAP,EAAU;AACV,yBAAOnY,QAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY,CAAP;AACD;;AAEDA,wBAAQ,CAACS,IAATT,CAAcjS,KAAdiS;AARoB;AAUtB/F,mBAAK,EAAE,eAAUke,CAAV,EAAa;AAClBnY,wBAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY;AAXoB;AAatBuC,sBAAQ,EAAE,oBAAY;AACpBvC,wBAAQ,CAACuC,QAATvC;AACD;AAfqB,aAAjB60B,CAAP;AADK,YAAP;AALF;;AA0BAH,eAAO,CAACviB,MAARuiB,GAAiB,SAASviB,MAAT,CAAgB5Y,EAAhB,EAAoB;AACnC,cAAIu7B,MAAM,GAAG,IAAb;;AAEA,cAAI,OAAOv7B,EAAP,KAAc,UAAlB,EAA8B,MAAM,IAAI24B,SAAJ,CAAc34B,EAAE,GAAG,oBAAnB,CAAN;AAC9B,cAAIq7B,CAAC,GAAGtB,UAAU,CAAC,IAAD,CAAlB;AACA,cAAIyB,OAAO,GAAG9hC,SAAS,CAACnC,MAAVmC,GAAmB,CAAjC;AACA,cAAIgxB,QAAQ,GAAG,KAAf;AACA,cAAI+Q,IAAI,GAAG/hC,SAAS,CAAC,CAAD,CAApB;AACA,cAAIgiC,GAAG,GAAGD,IAAV;AACA,iBAAO,IAAIJ,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B,mBAAO80B,MAAM,CAACz8B,SAAPy8B,CAAiB;AACtBr0B,kBAAI,EAAE,cAAU1S,KAAV,EAAiB;AACrB,oBAAIsS,KAAK,GAAG,CAAC4jB,QAAb;AACAA,wBAAQ,GAAG,IAAXA;;AAEA,oBAAI,CAAC5jB,KAAD,IAAU00B,OAAd,EAAuB;AACrB,sBAAI;AACFE,uBAAG,GAAG17B,EAAE,CAAC07B,GAAD,EAAMlnC,KAAN,CAARknC;AADF,oBAEE,OAAO9c,CAAP,EAAU;AACV,2BAAOnY,QAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY,CAAP;AACD;AALH,uBAMO;AACLi1B,qBAAG,GAAGlnC,KAANknC;AACD;AAbmB;AAetBh7B,mBAAK,EAAE,eAAUke,CAAV,EAAa;AAClBnY,wBAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY;AAhBoB;AAkBtBuC,sBAAQ,EAAE,oBAAY;AACpB,oBAAI,CAAC0hB,QAAD,IAAa,CAAC8Q,OAAlB,EAA2B,OAAO/0B,QAAQ,CAAC/F,KAAT+F,CAAe,IAAIkyB,SAAJ,CAAc,iCAAd,CAAflyB,CAAP;AAC3BA,wBAAQ,CAACS,IAATT,CAAci1B,GAAdj1B;AACAA,wBAAQ,CAACuC,QAATvC;AACD;AAtBqB,aAAjB80B,CAAP;AADK,YAAP;AATF;;AAqCAJ,eAAO,CAACrjB,MAARqjB,GAAiB,SAASrjB,MAAT,GAAkB;AACjC,cAAI6jB,MAAM,GAAG,IAAb;;AAEA,eAAK,IAAIC,IAAI,GAAGliC,SAAS,CAACnC,MAArB,EAA6B2oB,OAAO,GAAG,IAAIxrB,KAAJ,CAAUknC,IAAV,CAAvC,EAAwDrgB,IAAI,GAAG,CAApE,EAAuEA,IAAI,GAAGqgB,IAA9E,EAAoFrgB,IAAI,EAAxF,EAA4F;AAC1F2E,mBAAO,CAAC3E,IAAD,CAAP2E,GAAgBxmB,SAAS,CAAC6hB,IAAD,CAAzB2E;AACD;;AAED,cAAImb,CAAC,GAAGtB,UAAU,CAAC,IAAD,CAAlB;AACA,iBAAO,IAAIsB,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B,gBAAIyB,YAAJ;AACA,gBAAI2zB,KAAK,GAAG,CAAZ;;AAEA,qBAASC,SAAT,CAAmB50B,IAAnB,EAAyB;AACvBgB,0BAAY,GAAGhB,IAAI,CAACpI,SAALoI,CAAe;AAC5BA,oBAAI,EAAE,cAAUmD,CAAV,EAAa;AACjB5D,0BAAQ,CAACS,IAATT,CAAc4D,CAAd5D;AAF0B;AAI5B/F,qBAAK,EAAE,eAAUke,CAAV,EAAa;AAClBnY,0BAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY;AAL0B;AAO5BuC,wBAAQ,EAAE,oBAAY;AACpB,sBAAI6yB,KAAK,KAAK3b,OAAO,CAAC3oB,MAAtB,EAA8B;AAC5B2Q,gCAAY,GAAGgM,SAAfhM;AACAzB,4BAAQ,CAACuC,QAATvC;AAFF,yBAGO;AACLq1B,6BAAS,CAACT,CAAC,CAACvhC,IAAFuhC,CAAOnb,OAAO,CAAC2b,KAAK,EAAN,CAAdR,CAAD,CAATS;AACD;AACF;AAd2B,eAAf50B,CAAfgB;AAgBD;;AAED4zB,qBAAS,CAACH,MAAD,CAATG;AACA,mBAAO,YAAY;AACjB,kBAAI5zB,YAAJ,EAAkB;AAChBA,4BAAY,CAACC,WAAbD;AACAA,4BAAY,GAAGgM,SAAfhM;AACD;AAJH;AAxBK,YAAP;AARF;;AAyCAizB,eAAO,CAACY,OAARZ,GAAkB,SAASY,OAAT,CAAiB/7B,EAAjB,EAAqB;AACrC,cAAIg8B,MAAM,GAAG,IAAb;;AAEA,cAAI,OAAOh8B,EAAP,KAAc,UAAlB,EAA8B,MAAM,IAAI24B,SAAJ,CAAc34B,EAAE,GAAG,oBAAnB,CAAN;AAC9B,cAAIq7B,CAAC,GAAGtB,UAAU,CAAC,IAAD,CAAlB;AACA,iBAAO,IAAIsB,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B,gBAAIY,aAAa,GAAG,EAApB;;AAEA,gBAAI40B,KAAK,GAAGD,MAAM,CAACl9B,SAAPk9B,CAAiB;AAC3B90B,kBAAI,EAAE,cAAU1S,KAAV,EAAiB;AACrB,oBAAIwL,EAAJ,EAAQ;AACN,sBAAI;AACFxL,yBAAK,GAAGwL,EAAE,CAACxL,KAAD,CAAVA;AADF,oBAEE,OAAOoqB,CAAP,EAAU;AACV,2BAAOnY,QAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY,CAAP;AACD;AACF;;AAED,oBAAIy1B,KAAK,GAAGb,CAAC,CAACvhC,IAAFuhC,CAAO7mC,KAAP6mC,EAAcv8B,SAAdu8B,CAAwB;AAClCn0B,sBAAI,EAAE,cAAU1S,KAAV,EAAiB;AACrBiS,4BAAQ,CAACS,IAATT,CAAcjS,KAAdiS;AAFgC;AAIlC/F,uBAAK,EAAE,eAAUke,CAAV,EAAa;AAClBnY,4BAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY;AALgC;AAOlCuC,0BAAQ,EAAE,oBAAY;AACpB,wBAAIlR,CAAC,GAAGuP,aAAa,CAAC3J,OAAd2J,CAAsB60B,KAAtB70B,CAAR;AACA,wBAAIvP,CAAC,IAAI,CAAT,EAAYuP,aAAa,CAAC80B,MAAd90B,CAAqBvP,CAArBuP,EAAwB,CAAxBA;AACZ+0B,kCAAc;AACf;AAXiC,iBAAxBf,CAAZ;AAaAh0B,6BAAa,CAACjQ,IAAdiQ,CAAmB60B,KAAnB70B;AAvByB;AAyB3B3G,mBAAK,EAAE,eAAUke,CAAV,EAAa;AAClBnY,wBAAQ,CAAC/F,KAAT+F,CAAemY,CAAfnY;AA1ByB;AA4B3BuC,sBAAQ,EAAE,oBAAY;AACpBozB,8BAAc;AACf;AA9B0B,aAAjBJ,CAAZ;;AAiCA,qBAASI,cAAT,GAA0B;AACxB,kBAAIH,KAAK,CAACvN,MAANuN,IAAgB50B,aAAa,CAAC9P,MAAd8P,KAAyB,CAA7C,EAAgDZ,QAAQ,CAACuC,QAATvC;AACjD;;AAED,mBAAO,YAAY;AACjBY,2BAAa,CAAC5P,OAAd4P,CAAsB,UAAUke,CAAV,EAAa;AACjC,uBAAOA,CAAC,CAACpd,WAAFod,EAAP;AADF;AAGA0W,mBAAK,CAAC9zB,WAAN8zB;AAJF;AAxCK,YAAP;AALF;;AAsDAd,eAAO,CAACvB,gBAAD,CAAPuB,GAA4B,YAAY;AACtC,iBAAO,IAAP;AADF;;AAIA3tB,kBAAU,CAAC1T,IAAX0T,GAAkB,SAAS1T,IAAT,CAAc+e,CAAd,EAAiB;AACjC,cAAIwiB,CAAC,GAAG,OAAO,IAAP,KAAgB,UAAhB,GAA6B,IAA7B,GAAoC7tB,UAA5C;AACA,cAAIqL,CAAC,IAAI,IAAT,EAAe,MAAM,IAAI8f,SAAJ,CAAc9f,CAAC,GAAG,mBAAlB,CAAN;AACf,cAAIkD,MAAM,GAAG+d,SAAS,CAACjhB,CAAD,EAAI+gB,gBAAJ,CAAtB;;AAEA,cAAI7d,MAAJ,EAAY;AACV,gBAAIjH,UAAU,GAAGiH,MAAM,CAACvV,IAAPuV,CAAYlD,CAAZkD,CAAjB;AACA,gBAAIhnB,MAAM,CAAC+f,UAAD,CAAN/f,KAAuB+f,UAA3B,EAAuC,MAAM,IAAI6jB,SAAJ,CAAc7jB,UAAU,GAAG,mBAA3B,CAAN;AACvC,gBAAImlB,YAAY,CAACnlB,UAAD,CAAZmlB,IAA4BnlB,UAAU,CAAC8Z,WAAX9Z,KAA2BumB,CAA3D,EAA8D,OAAOvmB,UAAP;AAC9D,mBAAO,IAAIumB,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B,qBAAOqO,UAAU,CAAChW,SAAXgW,CAAqBrO,QAArBqO,CAAP;AADK,cAAP;AAGD;;AAED,cAAI2kB,SAAS,CAAC,UAAD,CAAb,EAA2B;AACzB1d,kBAAM,GAAG+d,SAAS,CAACjhB,CAAD,EAAI8gB,cAAJ,CAAlB5d;;AAEA,gBAAIA,MAAJ,EAAY;AACV,qBAAO,IAAIsf,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B0zB,uBAAO,CAAC,YAAY;AAClB,sBAAI1zB,QAAQ,CAACioB,MAAb,EAAqB;;AAErB,uBAAK,IAAI2N,SAAS,GAAGhE,+BAA+B,CAACtc,MAAM,CAACvV,IAAPuV,CAAYlD,CAAZkD,CAAD,CAA/C,EAAiEugB,KAAtE,EAA6E,CAAC,CAACA,KAAK,GAAGD,SAAS,EAAlB,EAAsB1Q,IAApG,GAA2G;AACzG,wBAAI1lB,IAAI,GAAGq2B,KAAK,CAAC9nC,KAAjB;AACAiS,4BAAQ,CAACS,IAATT,CAAcR,IAAdQ;AACA,wBAAIA,QAAQ,CAACioB,MAAb,EAAqB;AACtB;;AAEDjoB,0BAAQ,CAACuC,QAATvC;AATK,kBAAP0zB;AADK,gBAAP;AAaD;AACF;;AAED,cAAIzlC,KAAK,CAACC,OAAND,CAAcmkB,CAAdnkB,CAAJ,EAAsB;AACpB,mBAAO,IAAI2mC,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B0zB,qBAAO,CAAC,YAAY;AAClB,oBAAI1zB,QAAQ,CAACioB,MAAb,EAAqB;;AAErB,qBAAK,IAAI52B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+gB,CAAC,CAACthB,MAAtB,EAA8B,EAAEO,CAAhC,EAAmC;AACjC2O,0BAAQ,CAACS,IAATT,CAAcoS,CAAC,CAAC/gB,CAAD,CAAf2O;AACA,sBAAIA,QAAQ,CAACioB,MAAb,EAAqB;AACtB;;AAEDjoB,wBAAQ,CAACuC,QAATvC;AARK,gBAAP0zB;AADK,cAAP;AAYD;;AAED,gBAAM,IAAIxB,SAAJ,CAAc9f,CAAC,GAAG,oBAAlB,CAAN;AAjDF;;AAoDArL,kBAAU,CAAC+uB,EAAX/uB,GAAgB,SAAS+uB,EAAT,GAAc;AAC5B,eAAK,IAAIC,KAAK,GAAG9iC,SAAS,CAACnC,MAAtB,EAA8BklC,KAAK,GAAG,IAAI/nC,KAAJ,CAAU8nC,KAAV,CAAtC,EAAwDE,KAAK,GAAG,CAArE,EAAwEA,KAAK,GAAGF,KAAhF,EAAuFE,KAAK,EAA5F,EAAgG;AAC9FD,iBAAK,CAACC,KAAD,CAALD,GAAe/iC,SAAS,CAACgjC,KAAD,CAAxBD;AACD;;AAED,cAAIpB,CAAC,GAAG,OAAO,IAAP,KAAgB,UAAhB,GAA6B,IAA7B,GAAoC7tB,UAA5C;AACA,iBAAO,IAAI6tB,CAAJ,CAAM,UAAU50B,QAAV,EAAoB;AAC/B0zB,mBAAO,CAAC,YAAY;AAClB,kBAAI1zB,QAAQ,CAACioB,MAAb,EAAqB;;AAErB,mBAAK,IAAI52B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2kC,KAAK,CAACllC,MAA1B,EAAkC,EAAEO,CAApC,EAAuC;AACrC2O,wBAAQ,CAACS,IAATT,CAAcg2B,KAAK,CAAC3kC,CAAD,CAAnB2O;AACA,oBAAIA,QAAQ,CAACioB,MAAb,EAAqB;AACtB;;AAEDjoB,sBAAQ,CAACuC,QAATvC;AARK,cAAP0zB;AADK,YAAP;AANF;;AAoBAf,oBAAY,CAAC5rB,UAAD,EAAa,IAAb,EAAmB,CAAC;AAC9B9V,aAAG,EAAEmiC,aADyB;AAE9BtjC,aAAG,EAAE,eAAY;AACf,mBAAO,IAAP;AACD;AAJ6B,SAAD,CAAnB,CAAZ6iC;;AAOA,eAAO5rB,UAAP;AA7T4B,SAA9B;;AAgUA,UAAIgsB,UAAU,EAAd,EAAkB;AAChBzkC,cAAM,CAAC8S,cAAP9S,CAAsByY,WAAtBzY,EAAkCm1B,MAAM,CAAC,YAAD,CAAxCn1B,EAAwD;AACtDP,eAAK,EAAE;AACLmoC,kBAAM,EAAE/C,gBADH;AAELM,2BAAe,EAAEA;AAFZ,WAD+C;AAKtDnyB,sBAAY,EAAE;AALwC,SAAxDhT;AAOD;;;;","names":["shallowCopy","value","isObjectOrArray","Array","isArray","slice","__assign","__proto__","Object","getPrototypeOf","ObjectCanon","known","canUseWeakSet","WeakSet","Set","pool","Trie","canUseWeakMap","passes","WeakMap","keysByJSON","Map","empty","admit","prototype","isKnown","has","pass","copy","set","_this","original","get","proto","array","map","node","lookupArray","add","__DEV__","freeze","proto_1","array_1","keys","sortedKeys","push","json","firstValueIndex_1","length","sorted","forEach","key","object","obj_1","create","i","obj","sort","JSON","stringify","canonicalStringify","assign","stringifyCanon","resetCanonicalStringify","canonical","stringifyCache","reset","cacheSlot","Slot","cacheInfoMap","getCacheInfo","cache","info","vars","dep","forgetCache","rv","recallCache","attachCache","makeVar","caches","listeners","newValue","arguments","dirty","broadcast","oldListeners","from","clear","listener","getValue","attach","onNextChange","broadcastWatches","hasSuggestedDevtools","mergeOptions","defaults","options","compact","variables","ApolloClient","defaultOptions","resetStoreCallbacks","clearStoreCallbacks","uri","credentials","headers","_a","ssrMode","_b","ssrForceFetchDelay","_c","connectToDevTools","window","__APOLLO_CLIENT__","_d","queryDeduplication","_e","assumeImmutableResults","resolvers","typeDefs","fragmentMatcher","clientAwarenessName","name","clientAwarenessVersion","version","link","HttpLink","ApolloLink","InvariantError","disableNetworkFetches","setTimeout","watchQuery","bind","query","mutate","resetStore","reFetchObservableQueries","document","top","self","__APOLLO_DEVTOOLS_GLOBAL_HOOK__","nav","navigator","ua","userAgent","url","indexOf","invariant","localState","LocalState","client","queryManager","QueryManager","clientAwareness","onBroadcast","devToolsHookCb","action","state","queries","getQueryStore","mutations","mutationStore","dataWithOptimisticResults","extract","stop","fetchPolicy","subscribe","startGraphQLSubscription","readQuery","optimistic","readFragment","writeQuery","broadcastQueries","writeFragment","__actionHookForDevTools","cb","__requestRaw","payload","execute","Promise","resolve","then","clearStore","all","fn","onResetStore","filter","c","onClearStore","includeStandby","refetchQueries","results","result","obsQuery","error","getObservableQueries","include","restore","serializedState","addResolvers","setResolvers","getResolvers","setLocalStateFragmentMatcher","setFragmentMatcher","setLink","newLink","resolverGroup","mergeDeep","runResolvers","remoteResult","context","onlyRunForcedResolvers","__awaiter","__generator","resolveDocument","data","localResult","getFragmentMatcher","clientQuery","hasDirectives","serverQuery","removeClientSetsFromDocument","prepareContext","getCacheKey","identify","addExportedVariables","buildRootValueFromCache","exportedVariables","shouldForceResolvers","forceResolvers","visit","Directive","enter","some","arg","kind","BREAK","diff","buildQueryFromSelectionSet","returnPartialData","rootValue","mainDefinition","fragments","fragmentMap","definitionOperation","defaultOperationType","execContext","getMainDefinition","getFragmentDefinitions","createFragmentMap","operation","charAt","toUpperCase","resolveSelectionSet","selectionSet","resultsToMerge","selection","fragment","typeCondition","shouldInclude","isField","resolveField","fieldResult","resultKeyNameFromField","isInlineFragment","fragmentResult","selections","mergeDeepArray","field","fieldName","aliasedFieldName","aliasUsed","defaultResult","resultPromise","resolverType","resolverMap","__typename","argumentsObjectFromField","directives","directive","resolveSubSelectedArray","item","hasOwnProperty","warnedAboutUpdateQuery","ObservableQuery","_super","__extends","queryInfo","call","observer","subObserver","_subscription","_observer","defaultSubscriptionObserverErrorCallback","first","observers","size","last","next","reobserve","tearDownQuery","subscriptions","isTornDown","queryId","generateQueryId","opDef","getOperationDefinition","queryName","initialFetchPolicy","defineProperty","enumerable","configurable","reject","removeQuery","subscription","unsubscribe","getCurrentResult","saveAsLastResult","lastResult","getLastResult","networkStatus","NetworkStatus","loading","isNetworkRequestInFlight","shouldReturnCachedData","transform","hasForcedResolvers","getDiff","complete","equal","partial","partialRefetch","logMissingFieldErrors","missing","updateLastResult","isDifferentFromLastResult","newResult","getLast","variablesMustMatch","getLastError","resetLastResults","resetQueryStoreErrors","resetErrors","refetch","reobserveOptions","pollInterval","queryDef","getQueryDefinition","variableDefinitions","v","variable","resetLastWrite","fetchMore","fetchMoreOptions","combinedOptions","qid","notifyOnNetworkStatusChange","observe","fetchQuery","fetchMoreResult","updateQuery","previous","stopQuery","subscribeToMore","subscriptionData","err","onError","setOptions","newOptions","setVariables","mapFn","startPolling","updatePolling","stopPolling","fetch","newNetworkStatus","setObservableQuery","fetchQueryObservable","pollingInfo","clearTimeout","timeout","interval","maybeFetch","poll","cloneDeep","isNonEmptyArray","errors","useDisposableConcast","oldVariables","concast","reportResult","reportError","removeObserver","addObserver","promise","iterateObserversSafely","errorResult","graphQLErrors","hasObservers","sub","Observable","fixObservableSubclass","message","stack","m","path","join","applyNextFetchPolicy","nextFetchPolicy","destructiveMethodCounts","wrapDestructiveCacheMethod","methodName","apply","cancelNotifyTimeout","QueryInfo","lastRequestId","stopped","observableQuery","init","lastDiff","networkError","getDiffOptions","updateWatch","oq","updateLastDiff","canonizeResults","setDiff","oldDiff","notifyTimeout","notify","oqListener","fromOptimisticTransaction","shouldNotify","cancel","watchOptions","watcher","callback","lastWatch","watch","lastWrite","shouldWrite","dmCount","markResult","cacheWriteBehavior","shouldWriteResult","errorPolicy","performTransaction","overwrite","diffOptions","markReady","markError","ignoreErrors","writeWithErrors","graphQLResultHasError","fetchCancelFns","transformCache","queryIdCounter","requestIdCounter","mutationIdCounter","inFlightLinkObservables","_info","stopQueryNoBroadcast","cancelPendingFetches","mutation","optimisticResponse","updateQueries","awaitRefetchQueries","updateWithProxyFn","update","onQueryUpdated","keepRootFields","mutationId","mutationStoreValue","_f","label","generateMutationId","getVariables","hasClientExports","sent","markMutationOptimistic","asyncMap","getObservableFromLink","ApolloError","storeResult","markMutationResult","removeOptimistic","cacheWrites","skipCache","dataId","updateQueries_1","updater","currentQueryResult","nextQueryResult","mutationResult","getOperationName","queryVariables","results_1","updateCache","write","id","asQuery","modify","fields","DELETE","recordOptimisticTransaction","store","undefined","transformed","transformDocument","forLink","removeConnectionDirectiveFromDocument","transformForLink","cacheEntry_1","defaultVars","getDefaultValues","definitions","def","doc","observable","String","generateRequestId","stopQueryInStore","stopQueryInStoreNoBroadcast","queryNamesAndDocs","legacyQueryOptions","desc","isDocumentNode","isNonNullObject","makeUniqueId","getQuery","included","nameOrDoc","observableQueryPromises","makeObservable","observablePromise_1","getLocalState","deduplication","inFlightLinkObservables_1","operationName","forceFetch","byVariables_1","varJson_1","Concast","cleanup","getResultsFromLink","requestId","hasErrors","aqr","isApolloError","normalized","fromVariables","fetchQueryByPolicy","reason","includedQueriesById","batch","onWatchUpdated","refetchWritePolicy","oldNetworkStatus","readCache","resultsFromCache","fromData","resolved","resultsFromLink","newContext","generateErrorMessage","clientErrors","concat","errorMessage","replace","extraInfo","Error","passthrough","op","forward","toLink","handler","isTerminating","request","LinkError","links","reduce","x","y","split","test","left","right","leftLink","rightLink","createOperation","transformOperation","validateOperation","second","firstLink","nextLink","setOnError","createHttpLink","checkFetcher","fetcher","backupFetch","maybe","linkOptions","preferredFetch","includeExtensions","useGETForQueries","includeUnusedVariables","requestOptions","__rest","linkConfig","http","fetchOptions","chosenURI","selectURI","getContext","clientAwarenessHeaders","name_1","contextHeaders","contextConfig","selectHttpOptionsAndBody","fallbackHttpConfig","body","unusedNames_1","Variable","_key","parent","controller","signal","createSignalIfSupported","_controller","definitionIsMutation","d","method","rewriteURIForGET","newURI","parseError","fromError","serializeFetchParameter","currentFetch","response","setContext","parseAndCheckHttpResponse","abort","AbortController","operations","text","bodyText","parse","statusCode","status","throwServerError","queryParams","addQueryParam","encodeURIComponent","serializedVariables","extensions","serializedExtensions","preFragment","fragmentStart","substr","queryParamsPrefix","defaultHttpOptions","includeQuery","defaultHeaders","accept","fallbackConfig","configs","_i","config","headersToLowerCase","print","normalized_1","toLowerCase","fallbackURI","contextURI","p","serialized","e","starting","errorValue","transformedOperation","OPERATION_FIELDS","product","toString","cloneDeepHelper","val","seen","copy_1","child","copy_2","objects","filterInPlace","target","elem","prefixCounts","prefix","count","Math","random","sources","merger","DeepMerger","merge","defaultReconciler","source","property","reconciler","isObject","pastCopies","sourceKey","targetValue","__spreadArray","shallowCopyForMerge","__","GLOBAL_KEY","getDEV","Boolean","global","process","writable","__webpack_exports__","globalThis","Function","removeTemporaryGlobals","isType","remove","checkDEV","DEV","thunk","getInclusionDirectives","every","ifArgument","evaledValue","getDirectiveNames","root","names","isInclusionDirective","directiveArguments","directiveName","ifValue","getFragmentQueryDocument","fragmentName","actualFragmentName","definition","symTable","getFragmentFromSelection","checkDocument","getFragmentDefinition","fragmentDef","queryDoc","fragmentDefinition","defaultValues","defs","defaultValue","valueToObjectRepresentation","makeReference","__ref","isReference","isStringValue","isBooleanValue","isIntValue","isFloatValue","isVariable","isObjectValue","isListValue","isEnumValue","isNullValue","argObj","Number","nestedArgObj_1","variableValue","values","listValue","nestedArgArrayObj","storeKeyNameFromField","directivesObj","getStoreKeyName","KNOWN_DIRECTIVES","args","filterKeys","filteredArgs_1","completeFieldName","stringifiedArgs","setStringify","s","defaultStringify","stringifyReplacer","argObj_1","alias","getTypenameFromResult","typename","TYPENAME_FIELD","isEmpty","nullIfDocIsEmpty","getDirectiveMatcher","directiveMatcher","dir","removeDirectivesFromDocument","variablesInUse","variablesToRemove","fragmentSpreadsInUse","fragmentSpreadsToRemove","modifiedDoc","Field","shouldRemoveField","getAllFragmentSpreadsFromSelectionSet","frag","FragmentSpread","removeArgumentsFromDocument","fs","removeFragmentSpreadFromDocument","addTypenameToDocument","SelectionSet","skip","lastIndexOf","added","connectionRemoveConfig","willRemove","hasDirectivesInSelectionSet","nestedCheck","hasDirectivesInSelection","getArgumentMatcher","argumentMatcher","argument","aConfig","argMatcher","OperationDefinition","varDef","argConfig","argMatchCount_1","Argument","FragmentDefinition","allFragments","isTypenameOnly","isPromiseLike","addCount","handlers","latest","shift","obs","_","iterable","start","deliverLastMessage","nextOrError","quietly","called","once","catchFn","activeCallbackCount","completed","promiseQueue","makeCallback","examiner","delegate","both","caught","observersWithMethod","subclass","Symbol","species","currentContext","MISSING_VALUE","idCounter","makeSlotClass","Date","now","hasValue","context_1","slots","withValue","thisArg","saved","noContext","globalKey","host","setTimeoutWithContext","delay","asyncFromGen","genFn","gen","boundNext","boundThrow","invoke","done","invokeNext","invokeThrow","wrappedFibers","wrapYieldingFiberMethods","Fiber","wrap","fnToStr","previousComparisons","a","b","check","aTag","bTag","previouslyCompared","aKeys","definedKeys","bKeys","keyCount","k","aIterator","entries","isMap","aKey","aValue","Uint8Array","len","byteLength","aCode","endsWith","nativeCodeSuffix","isDefinedKey","full","suffix","fromIndex","bSet","defaultMakeData","weakness","makeData","lookup","getChildTrie","isObjRef","weak","strong","fromPromise","promiseFn","subscriber","closed","ZoneScheduler","constructor","zone","schedule","work","run","queueScheduler","fixObservable","wrapWithZone","ngZone","pipe","observeOn","pickFlag","flags","flag","QueryRef","wrapped","valueChanges","useInitialLoading","startWith","stale","opts","APOLLO_FLAGS","InjectionToken","APOLLO_OPTIONS","APOLLO_NAMED_OPTIONS","ApolloBase","_client","ensureClient","extra","useZone","getClient","setClient","checkInstance","Apollo","_ngZone","apolloOptions","apolloNamedOptions","createDefault","createNamed","isDefault","default","use","removeClient","ɵfac","Apollo_Factory","t","ɵngcc0","ɵprov","i0","factory","token","providedIn","ngDevMode","Query","apollo","Query_Factory","Mutation","Mutation_Factory","Subscription","Subscription_Factory","defaultDispose","Cache","max","dispose","Infinity","newest","oldest","getNode","older","newer","clean","parentEntrySlot","toArray","collection","maybeUnsubscribe","entryOrDep","emptySetPool","POOL_TARGET_SIZE","assert","condition","optionalMessage","valueIs","valueGet","valueCopy","Entry","parents","childValues","dirtyChildren","recomputing","deps","peek","mightBeDirty","rememberParent","recompute","reallyRecompute","setDirty","reportDirty","forgetChildren","eachParent","forgetChild","forget","dependOn","pop","forgetDeps","reportDirtyChild","reportCleanChild","entry","recomputeNewValue","maybeSubscribe","setClean","reportClean","parentCount","parentWasClean","childValue","removeDirtyChild","dc","_value","EntryMethods","depsByKey","depend","dep_1","entryMethodName","m_1","makeDefaultMakeCacheKeyFunction","keyTrie","defaultMakeCacheKey","originalFunction","pow","keyArgs","makeCacheKey","dirtyKey","peekKey","forgetKey","getKey","genericMessage","setPrototypeOf","framesToPop","verbosityLevels","verbosityLevel","wrapConsoleMethod","console","log","debug","warn","setVerbosity","level","old","invariant$1","safeGlobal","needToRemove","install","env","NODE_ENV","_createForOfIteratorHelperLoose","o","allowArrayLike","it","iterator","_unsupportedIterableToArray","TypeError","minLen","_arrayLikeToArray","n","arr","arr2","_defineProperties","props","descriptor","_createClass","Constructor","protoProps","staticProps","hasSymbols","hasSymbol","getSymbol","SymbolIterator","SymbolObservable","SymbolSpecies","getMethod","getSpecies","ctor","isObservable","hostReportError","enqueue","cleanupSubscription","_cleanup","closeSubscription","_queue","_state","flushSubscription","queue","notifySubscription","type","onNotify","subscriptionObserver","SubscriptionObserver","_proto","_proto2","_subscriber","_proto3","_this2","C","_this3","_this4","hasSeed","seed","acc","_this5","_len","index","startNext","flatMap","_this6","outer","inner","splice","completeIfDone","_iterator","_step","of","_len2","items","_key2","symbol"],"sources":["webpack:///node_modules/@apollo/client/cache/inmemory/object-canon.js","webpack:///node_modules/@apollo/client/cache/inmemory/reactiveVars.js","webpack:///node_modules/@apollo/client/core/ApolloClient.js","webpack:///node_modules/@apollo/client/core/LocalState.js","webpack:///node_modules/@apollo/client/core/ObservableQuery.js","webpack:///node_modules/@apollo/client/core/QueryInfo.js","webpack:///node_modules/@apollo/client/core/QueryManager.js","webpack:///node_modules/@apollo/client/core/networkStatus.js","webpack:///node_modules/@apollo/client/errors/index.js","webpack:///node_modules/@apollo/client/link/core/ApolloLink.js","webpack:///node_modules/@apollo/client/link/core/execute.js","webpack:///node_modules/@apollo/client/link/http/HttpLink.js","webpack:///node_modules/@apollo/client/link/http/checkFetcher.js","webpack:///node_modules/@apollo/client/link/http/createHttpLink.js","webpack:///node_modules/@apollo/client/link/http/createSignalIfSupported.js","webpack:///node_modules/@apollo/client/link/http/parseAndCheckHttpResponse.js","webpack:///node_modules/@apollo/client/link/http/rewriteURIForGET.js","webpack:///node_modules/@apollo/client/link/http/selectHttpOptionsAndBody.js","webpack:///node_modules/@apollo/client/link/http/selectURI.js","webpack:///node_modules/@apollo/client/link/http/serializeFetchParameter.js","webpack:///node_modules/@apollo/client/link/utils/createOperation.js","webpack:///node_modules/@apollo/client/link/utils/fromError.js","webpack:///node_modules/@apollo/client/link/utils/throwServerError.js","webpack:///node_modules/@apollo/client/link/utils/transformOperation.js","webpack:///node_modules/@apollo/client/link/utils/validateOperation.js","webpack:///node_modules/@apollo/client/utilities/common/arrays.js","webpack:///node_modules/@apollo/client/utilities/common/canUse.js","webpack:///node_modules/@apollo/client/utilities/common/cloneDeep.js","webpack:///node_modules/@apollo/client/utilities/common/compact.js","webpack:///node_modules/@apollo/client/utilities/common/errorHandling.js","webpack:///node_modules/@apollo/client/utilities/common/filterInPlace.js","webpack:///node_modules/@apollo/client/utilities/common/makeUniqueId.js","webpack:///node_modules/@apollo/client/utilities/common/mergeDeep.js","webpack:///node_modules/@apollo/client/utilities/common/objects.js","webpack:///node_modules/@apollo/client/utilities/globals/DEV.js","webpack:///node_modules/@apollo/client/utilities/globals/global.js","webpack:///node_modules/@apollo/client/utilities/globals/graphql.js","webpack:///node_modules/@apollo/client/utilities/globals/index.js","webpack:///node_modules/@apollo/client/utilities/globals/maybe.js","webpack:///node_modules/@apollo/client/utilities/graphql/directives.js","webpack:///node_modules/@apollo/client/utilities/graphql/fragments.js","webpack:///node_modules/@apollo/client/utilities/graphql/getFromAST.js","webpack:///node_modules/@apollo/client/utilities/graphql/storeUtils.js","webpack:///node_modules/@apollo/client/utilities/graphql/transform.js","webpack:///node_modules/@apollo/client/utilities/observables/Concast.js","webpack:///node_modules/@apollo/client/utilities/observables/asyncMap.js","webpack:///node_modules/@apollo/client/utilities/observables/iteration.js","webpack:///node_modules/@apollo/client/utilities/observables/subclassing.js","webpack:///node_modules/@apollo/client/version.js","webpack:///node_modules/@wry/context/lib/context.esm.js","webpack:///node_modules/@wry/equality/lib/equality.esm.js","webpack:///node_modules/@wry/trie/lib/trie.esm.js","webpack:///node_modules/apollo-angular/fesm2015/ngApollo.js","webpack:///node_modules/optimism/lib/bundle.esm.js","webpack:///node_modules/ts-invariant/lib/invariant.esm.js","webpack:///node_modules/ts-invariant/process/index.js","webpack:///node_modules/zen-observable-ts/module.js"],"sourcesContent":["import { __assign } from \"tslib\";\r\nimport \"../../utilities/globals/index.js\";\r\nimport { Trie } from \"@wry/trie\";\r\nimport { canUseWeakMap, canUseWeakSet, isNonNullObject as isObjectOrArray, } from \"../../utilities/index.js\";\r\nfunction shallowCopy(value) {\r\n    if (isObjectOrArray(value)) {\r\n        return Array.isArray(value)\r\n            ? value.slice(0)\r\n            : __assign({ __proto__: Object.getPrototypeOf(value) }, value);\r\n    }\r\n    return value;\r\n}\r\nvar ObjectCanon = (function () {\r\n    function ObjectCanon() {\r\n        this.known = new (canUseWeakSet ? WeakSet : Set)();\r\n        this.pool = new Trie(canUseWeakMap);\r\n        this.passes = new WeakMap();\r\n        this.keysByJSON = new Map();\r\n        this.empty = this.admit({});\r\n    }\r\n    ObjectCanon.prototype.isKnown = function (value) {\r\n        return isObjectOrArray(value) && this.known.has(value);\r\n    };\r\n    ObjectCanon.prototype.pass = function (value) {\r\n        if (isObjectOrArray(value)) {\r\n            var copy = shallowCopy(value);\r\n            this.passes.set(copy, value);\r\n            return copy;\r\n        }\r\n        return value;\r\n    };\r\n    ObjectCanon.prototype.admit = function (value) {\r\n        var _this = this;\r\n        if (isObjectOrArray(value)) {\r\n            var original = this.passes.get(value);\r\n            if (original)\r\n                return original;\r\n            var proto = Object.getPrototypeOf(value);\r\n            switch (proto) {\r\n                case Array.prototype: {\r\n                    if (this.known.has(value))\r\n                        return value;\r\n                    var array = value.map(this.admit, this);\r\n                    var node = this.pool.lookupArray(array);\r\n                    if (!node.array) {\r\n                        this.known.add(node.array = array);\r\n                        if (__DEV__) {\r\n                            Object.freeze(array);\r\n                        }\r\n                    }\r\n                    return node.array;\r\n                }\r\n                case null:\r\n                case Object.prototype: {\r\n                    if (this.known.has(value))\r\n                        return value;\r\n                    var proto_1 = Object.getPrototypeOf(value);\r\n                    var array_1 = [proto_1];\r\n                    var keys = this.sortedKeys(value);\r\n                    array_1.push(keys.json);\r\n                    var firstValueIndex_1 = array_1.length;\r\n                    keys.sorted.forEach(function (key) {\r\n                        array_1.push(_this.admit(value[key]));\r\n                    });\r\n                    var node = this.pool.lookupArray(array_1);\r\n                    if (!node.object) {\r\n                        var obj_1 = node.object = Object.create(proto_1);\r\n                        this.known.add(obj_1);\r\n                        keys.sorted.forEach(function (key, i) {\r\n                            obj_1[key] = array_1[firstValueIndex_1 + i];\r\n                        });\r\n                        if (__DEV__) {\r\n                            Object.freeze(obj_1);\r\n                        }\r\n                    }\r\n                    return node.object;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    ObjectCanon.prototype.sortedKeys = function (obj) {\r\n        var keys = Object.keys(obj);\r\n        var node = this.pool.lookupArray(keys);\r\n        if (!node.keys) {\r\n            keys.sort();\r\n            var json = JSON.stringify(keys);\r\n            if (!(node.keys = this.keysByJSON.get(json))) {\r\n                this.keysByJSON.set(json, node.keys = { sorted: keys, json: json });\r\n            }\r\n        }\r\n        return node.keys;\r\n    };\r\n    return ObjectCanon;\r\n}());\r\nexport { ObjectCanon };\r\nexport var canonicalStringify = Object.assign(function (value) {\r\n    if (isObjectOrArray(value)) {\r\n        if (stringifyCanon === void 0) {\r\n            resetCanonicalStringify();\r\n        }\r\n        var canonical = stringifyCanon.admit(value);\r\n        var json = stringifyCache.get(canonical);\r\n        if (json === void 0) {\r\n            stringifyCache.set(canonical, json = JSON.stringify(canonical));\r\n        }\r\n        return json;\r\n    }\r\n    return JSON.stringify(value);\r\n}, {\r\n    reset: resetCanonicalStringify,\r\n});\r\nvar stringifyCanon;\r\nvar stringifyCache;\r\nfunction resetCanonicalStringify() {\r\n    stringifyCanon = new ObjectCanon;\r\n    stringifyCache = new (canUseWeakMap ? WeakMap : Map)();\r\n}\r\n","import { dep } from \"optimism\";\r\nimport { Slot } from \"@wry/context\";\r\nexport var cacheSlot = new Slot();\r\nvar cacheInfoMap = new WeakMap();\r\nfunction getCacheInfo(cache) {\r\n    var info = cacheInfoMap.get(cache);\r\n    if (!info) {\r\n        cacheInfoMap.set(cache, info = {\r\n            vars: new Set,\r\n            dep: dep(),\r\n        });\r\n    }\r\n    return info;\r\n}\r\nexport function forgetCache(cache) {\r\n    getCacheInfo(cache).vars.forEach(function (rv) { return rv.forgetCache(cache); });\r\n}\r\nexport function recallCache(cache) {\r\n    getCacheInfo(cache).vars.forEach(function (rv) { return rv.attachCache(cache); });\r\n}\r\nexport function makeVar(value) {\r\n    var caches = new Set();\r\n    var listeners = new Set();\r\n    var rv = function (newValue) {\r\n        if (arguments.length > 0) {\r\n            if (value !== newValue) {\r\n                value = newValue;\r\n                caches.forEach(function (cache) {\r\n                    getCacheInfo(cache).dep.dirty(rv);\r\n                    broadcast(cache);\r\n                });\r\n                var oldListeners = Array.from(listeners);\r\n                listeners.clear();\r\n                oldListeners.forEach(function (listener) { return listener(value); });\r\n            }\r\n        }\r\n        else {\r\n            var cache = cacheSlot.getValue();\r\n            if (cache) {\r\n                attach(cache);\r\n                getCacheInfo(cache).dep(rv);\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    rv.onNextChange = function (listener) {\r\n        listeners.add(listener);\r\n        return function () {\r\n            listeners.delete(listener);\r\n        };\r\n    };\r\n    var attach = rv.attachCache = function (cache) {\r\n        caches.add(cache);\r\n        getCacheInfo(cache).vars.add(rv);\r\n        return rv;\r\n    };\r\n    rv.forgetCache = function (cache) { return caches.delete(cache); };\r\n    return rv;\r\n}\r\nfunction broadcast(cache) {\r\n    if (cache.broadcastWatches) {\r\n        cache.broadcastWatches();\r\n    }\r\n}\r\n","import { __assign } from \"tslib\";\r\nimport { invariant, InvariantError } from \"../utilities/globals/index.js\";\r\nimport { ApolloLink, execute } from \"../link/core/index.js\";\r\nimport { compact } from \"../utilities/index.js\";\r\nimport { version } from \"../version.js\";\r\nimport { HttpLink } from \"../link/http/index.js\";\r\nimport { QueryManager } from \"./QueryManager.js\";\r\nimport { LocalState, } from \"./LocalState.js\";\r\nvar hasSuggestedDevtools = false;\r\nexport function mergeOptions(defaults, options) {\r\n    return compact(defaults, options, options.variables && {\r\n        variables: __assign(__assign({}, defaults.variables), options.variables),\r\n    });\r\n}\r\nvar ApolloClient = (function () {\r\n    function ApolloClient(options) {\r\n        var _this = this;\r\n        this.defaultOptions = {};\r\n        this.resetStoreCallbacks = [];\r\n        this.clearStoreCallbacks = [];\r\n        var uri = options.uri, credentials = options.credentials, headers = options.headers, cache = options.cache, _a = options.ssrMode, ssrMode = _a === void 0 ? false : _a, _b = options.ssrForceFetchDelay, ssrForceFetchDelay = _b === void 0 ? 0 : _b, _c = options.connectToDevTools, connectToDevTools = _c === void 0 ? typeof window === 'object' &&\r\n            !window.__APOLLO_CLIENT__ &&\r\n            __DEV__ : _c, _d = options.queryDeduplication, queryDeduplication = _d === void 0 ? true : _d, defaultOptions = options.defaultOptions, _e = options.assumeImmutableResults, assumeImmutableResults = _e === void 0 ? false : _e, resolvers = options.resolvers, typeDefs = options.typeDefs, fragmentMatcher = options.fragmentMatcher, clientAwarenessName = options.name, clientAwarenessVersion = options.version;\r\n        var link = options.link;\r\n        if (!link) {\r\n            link = uri\r\n                ? new HttpLink({ uri: uri, credentials: credentials, headers: headers })\r\n                : ApolloLink.empty();\r\n        }\r\n        if (!cache) {\r\n            throw __DEV__ ? new InvariantError(\"To initialize Apollo Client, you must specify a 'cache' property \" +\r\n                \"in the options object. \\n\" +\r\n                \"For more information, please visit: https://go.apollo.dev/c/docs\") : new InvariantError(9);\r\n        }\r\n        this.link = link;\r\n        this.cache = cache;\r\n        this.disableNetworkFetches = ssrMode || ssrForceFetchDelay > 0;\r\n        this.queryDeduplication = queryDeduplication;\r\n        this.defaultOptions = defaultOptions || {};\r\n        this.typeDefs = typeDefs;\r\n        if (ssrForceFetchDelay) {\r\n            setTimeout(function () { return (_this.disableNetworkFetches = false); }, ssrForceFetchDelay);\r\n        }\r\n        this.watchQuery = this.watchQuery.bind(this);\r\n        this.query = this.query.bind(this);\r\n        this.mutate = this.mutate.bind(this);\r\n        this.resetStore = this.resetStore.bind(this);\r\n        this.reFetchObservableQueries = this.reFetchObservableQueries.bind(this);\r\n        if (connectToDevTools && typeof window === 'object') {\r\n            window.__APOLLO_CLIENT__ = this;\r\n        }\r\n        if (!hasSuggestedDevtools && __DEV__) {\r\n            hasSuggestedDevtools = true;\r\n            if (typeof window !== 'undefined' &&\r\n                window.document &&\r\n                window.top === window.self &&\r\n                !window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__) {\r\n                var nav = window.navigator;\r\n                var ua = nav && nav.userAgent;\r\n                var url = void 0;\r\n                if (typeof ua === \"string\") {\r\n                    if (ua.indexOf(\"Chrome/\") > -1) {\r\n                        url = \"https://chrome.google.com/webstore/detail/\" +\r\n                            \"apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm\";\r\n                    }\r\n                    else if (ua.indexOf(\"Firefox/\") > -1) {\r\n                        url = \"https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/\";\r\n                    }\r\n                }\r\n                if (url) {\r\n                    __DEV__ && invariant.log(\"Download the Apollo DevTools for a better development \" +\r\n                        \"experience: \" + url);\r\n                }\r\n            }\r\n        }\r\n        this.version = version;\r\n        this.localState = new LocalState({\r\n            cache: cache,\r\n            client: this,\r\n            resolvers: resolvers,\r\n            fragmentMatcher: fragmentMatcher,\r\n        });\r\n        this.queryManager = new QueryManager({\r\n            cache: this.cache,\r\n            link: this.link,\r\n            queryDeduplication: queryDeduplication,\r\n            ssrMode: ssrMode,\r\n            clientAwareness: {\r\n                name: clientAwarenessName,\r\n                version: clientAwarenessVersion,\r\n            },\r\n            localState: this.localState,\r\n            assumeImmutableResults: assumeImmutableResults,\r\n            onBroadcast: connectToDevTools ? function () {\r\n                if (_this.devToolsHookCb) {\r\n                    _this.devToolsHookCb({\r\n                        action: {},\r\n                        state: {\r\n                            queries: _this.queryManager.getQueryStore(),\r\n                            mutations: _this.queryManager.mutationStore || {},\r\n                        },\r\n                        dataWithOptimisticResults: _this.cache.extract(true),\r\n                    });\r\n                }\r\n            } : void 0,\r\n        });\r\n    }\r\n    ApolloClient.prototype.stop = function () {\r\n        this.queryManager.stop();\r\n    };\r\n    ApolloClient.prototype.watchQuery = function (options) {\r\n        if (this.defaultOptions.watchQuery) {\r\n            options = mergeOptions(this.defaultOptions.watchQuery, options);\r\n        }\r\n        if (this.disableNetworkFetches &&\r\n            (options.fetchPolicy === 'network-only' ||\r\n                options.fetchPolicy === 'cache-and-network')) {\r\n            options = __assign(__assign({}, options), { fetchPolicy: 'cache-first' });\r\n        }\r\n        return this.queryManager.watchQuery(options);\r\n    };\r\n    ApolloClient.prototype.query = function (options) {\r\n        if (this.defaultOptions.query) {\r\n            options = mergeOptions(this.defaultOptions.query, options);\r\n        }\r\n        __DEV__ ? invariant(options.fetchPolicy !== 'cache-and-network', 'The cache-and-network fetchPolicy does not work with client.query, because ' +\r\n            'client.query can only return a single result. Please use client.watchQuery ' +\r\n            'to receive multiple results from the cache and the network, or consider ' +\r\n            'using a different fetchPolicy, such as cache-first or network-only.') : invariant(options.fetchPolicy !== 'cache-and-network', 10);\r\n        if (this.disableNetworkFetches && options.fetchPolicy === 'network-only') {\r\n            options = __assign(__assign({}, options), { fetchPolicy: 'cache-first' });\r\n        }\r\n        return this.queryManager.query(options);\r\n    };\r\n    ApolloClient.prototype.mutate = function (options) {\r\n        if (this.defaultOptions.mutate) {\r\n            options = mergeOptions(this.defaultOptions.mutate, options);\r\n        }\r\n        return this.queryManager.mutate(options);\r\n    };\r\n    ApolloClient.prototype.subscribe = function (options) {\r\n        return this.queryManager.startGraphQLSubscription(options);\r\n    };\r\n    ApolloClient.prototype.readQuery = function (options, optimistic) {\r\n        if (optimistic === void 0) { optimistic = false; }\r\n        return this.cache.readQuery(options, optimistic);\r\n    };\r\n    ApolloClient.prototype.readFragment = function (options, optimistic) {\r\n        if (optimistic === void 0) { optimistic = false; }\r\n        return this.cache.readFragment(options, optimistic);\r\n    };\r\n    ApolloClient.prototype.writeQuery = function (options) {\r\n        this.cache.writeQuery(options);\r\n        this.queryManager.broadcastQueries();\r\n    };\r\n    ApolloClient.prototype.writeFragment = function (options) {\r\n        this.cache.writeFragment(options);\r\n        this.queryManager.broadcastQueries();\r\n    };\r\n    ApolloClient.prototype.__actionHookForDevTools = function (cb) {\r\n        this.devToolsHookCb = cb;\r\n    };\r\n    ApolloClient.prototype.__requestRaw = function (payload) {\r\n        return execute(this.link, payload);\r\n    };\r\n    ApolloClient.prototype.resetStore = function () {\r\n        var _this = this;\r\n        return Promise.resolve()\r\n            .then(function () { return _this.queryManager.clearStore(); })\r\n            .then(function () { return Promise.all(_this.resetStoreCallbacks.map(function (fn) { return fn(); })); })\r\n            .then(function () { return _this.reFetchObservableQueries(); });\r\n    };\r\n    ApolloClient.prototype.clearStore = function () {\r\n        var _this = this;\r\n        return Promise.resolve()\r\n            .then(function () { return _this.queryManager.clearStore(); })\r\n            .then(function () { return Promise.all(_this.clearStoreCallbacks.map(function (fn) { return fn(); })); });\r\n    };\r\n    ApolloClient.prototype.onResetStore = function (cb) {\r\n        var _this = this;\r\n        this.resetStoreCallbacks.push(cb);\r\n        return function () {\r\n            _this.resetStoreCallbacks = _this.resetStoreCallbacks.filter(function (c) { return c !== cb; });\r\n        };\r\n    };\r\n    ApolloClient.prototype.onClearStore = function (cb) {\r\n        var _this = this;\r\n        this.clearStoreCallbacks.push(cb);\r\n        return function () {\r\n            _this.clearStoreCallbacks = _this.clearStoreCallbacks.filter(function (c) { return c !== cb; });\r\n        };\r\n    };\r\n    ApolloClient.prototype.reFetchObservableQueries = function (includeStandby) {\r\n        return this.queryManager.reFetchObservableQueries(includeStandby);\r\n    };\r\n    ApolloClient.prototype.refetchQueries = function (options) {\r\n        var map = this.queryManager.refetchQueries(options);\r\n        var queries = [];\r\n        var results = [];\r\n        map.forEach(function (result, obsQuery) {\r\n            queries.push(obsQuery);\r\n            results.push(result);\r\n        });\r\n        var result = Promise.all(results);\r\n        result.queries = queries;\r\n        result.results = results;\r\n        result.catch(function (error) {\r\n            __DEV__ && invariant.debug(\"In client.refetchQueries, Promise.all promise rejected with error \" + error);\r\n        });\r\n        return result;\r\n    };\r\n    ApolloClient.prototype.getObservableQueries = function (include) {\r\n        if (include === void 0) { include = \"active\"; }\r\n        return this.queryManager.getObservableQueries(include);\r\n    };\r\n    ApolloClient.prototype.extract = function (optimistic) {\r\n        return this.cache.extract(optimistic);\r\n    };\r\n    ApolloClient.prototype.restore = function (serializedState) {\r\n        return this.cache.restore(serializedState);\r\n    };\r\n    ApolloClient.prototype.addResolvers = function (resolvers) {\r\n        this.localState.addResolvers(resolvers);\r\n    };\r\n    ApolloClient.prototype.setResolvers = function (resolvers) {\r\n        this.localState.setResolvers(resolvers);\r\n    };\r\n    ApolloClient.prototype.getResolvers = function () {\r\n        return this.localState.getResolvers();\r\n    };\r\n    ApolloClient.prototype.setLocalStateFragmentMatcher = function (fragmentMatcher) {\r\n        this.localState.setFragmentMatcher(fragmentMatcher);\r\n    };\r\n    ApolloClient.prototype.setLink = function (newLink) {\r\n        this.link = this.queryManager.link = newLink;\r\n    };\r\n    return ApolloClient;\r\n}());\r\nexport { ApolloClient };\r\n","import { __assign, __awaiter, __generator } from \"tslib\";\r\nimport { invariant } from \"../utilities/globals/index.js\";\r\nimport { visit, BREAK, } from 'graphql';\r\nimport { argumentsObjectFromField, buildQueryFromSelectionSet, createFragmentMap, getFragmentDefinitions, getMainDefinition, hasDirectives, isField, isInlineFragment, mergeDeep, mergeDeepArray, removeClientSetsFromDocument, resultKeyNameFromField, shouldInclude, } from \"../utilities/index.js\";\r\nimport { cacheSlot } from \"../cache/index.js\";\r\nvar LocalState = (function () {\r\n    function LocalState(_a) {\r\n        var cache = _a.cache, client = _a.client, resolvers = _a.resolvers, fragmentMatcher = _a.fragmentMatcher;\r\n        this.cache = cache;\r\n        if (client) {\r\n            this.client = client;\r\n        }\r\n        if (resolvers) {\r\n            this.addResolvers(resolvers);\r\n        }\r\n        if (fragmentMatcher) {\r\n            this.setFragmentMatcher(fragmentMatcher);\r\n        }\r\n    }\r\n    LocalState.prototype.addResolvers = function (resolvers) {\r\n        var _this = this;\r\n        this.resolvers = this.resolvers || {};\r\n        if (Array.isArray(resolvers)) {\r\n            resolvers.forEach(function (resolverGroup) {\r\n                _this.resolvers = mergeDeep(_this.resolvers, resolverGroup);\r\n            });\r\n        }\r\n        else {\r\n            this.resolvers = mergeDeep(this.resolvers, resolvers);\r\n        }\r\n    };\r\n    LocalState.prototype.setResolvers = function (resolvers) {\r\n        this.resolvers = {};\r\n        this.addResolvers(resolvers);\r\n    };\r\n    LocalState.prototype.getResolvers = function () {\r\n        return this.resolvers || {};\r\n    };\r\n    LocalState.prototype.runResolvers = function (_a) {\r\n        var document = _a.document, remoteResult = _a.remoteResult, context = _a.context, variables = _a.variables, _b = _a.onlyRunForcedResolvers, onlyRunForcedResolvers = _b === void 0 ? false : _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                if (document) {\r\n                    return [2, this.resolveDocument(document, remoteResult.data, context, variables, this.fragmentMatcher, onlyRunForcedResolvers).then(function (localResult) { return (__assign(__assign({}, remoteResult), { data: localResult.result })); })];\r\n                }\r\n                return [2, remoteResult];\r\n            });\r\n        });\r\n    };\r\n    LocalState.prototype.setFragmentMatcher = function (fragmentMatcher) {\r\n        this.fragmentMatcher = fragmentMatcher;\r\n    };\r\n    LocalState.prototype.getFragmentMatcher = function () {\r\n        return this.fragmentMatcher;\r\n    };\r\n    LocalState.prototype.clientQuery = function (document) {\r\n        if (hasDirectives(['client'], document)) {\r\n            if (this.resolvers) {\r\n                return document;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    LocalState.prototype.serverQuery = function (document) {\r\n        return removeClientSetsFromDocument(document);\r\n    };\r\n    LocalState.prototype.prepareContext = function (context) {\r\n        var cache = this.cache;\r\n        return __assign(__assign({}, context), { cache: cache, getCacheKey: function (obj) {\r\n                return cache.identify(obj);\r\n            } });\r\n    };\r\n    LocalState.prototype.addExportedVariables = function (document, variables, context) {\r\n        if (variables === void 0) { variables = {}; }\r\n        if (context === void 0) { context = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (document) {\r\n                    return [2, this.resolveDocument(document, this.buildRootValueFromCache(document, variables) || {}, this.prepareContext(context), variables).then(function (data) { return (__assign(__assign({}, variables), data.exportedVariables)); })];\r\n                }\r\n                return [2, __assign({}, variables)];\r\n            });\r\n        });\r\n    };\r\n    LocalState.prototype.shouldForceResolvers = function (document) {\r\n        var forceResolvers = false;\r\n        visit(document, {\r\n            Directive: {\r\n                enter: function (node) {\r\n                    if (node.name.value === 'client' && node.arguments) {\r\n                        forceResolvers = node.arguments.some(function (arg) {\r\n                            return arg.name.value === 'always' &&\r\n                                arg.value.kind === 'BooleanValue' &&\r\n                                arg.value.value === true;\r\n                        });\r\n                        if (forceResolvers) {\r\n                            return BREAK;\r\n                        }\r\n                    }\r\n                },\r\n            },\r\n        });\r\n        return forceResolvers;\r\n    };\r\n    LocalState.prototype.buildRootValueFromCache = function (document, variables) {\r\n        return this.cache.diff({\r\n            query: buildQueryFromSelectionSet(document),\r\n            variables: variables,\r\n            returnPartialData: true,\r\n            optimistic: false,\r\n        }).result;\r\n    };\r\n    LocalState.prototype.resolveDocument = function (document, rootValue, context, variables, fragmentMatcher, onlyRunForcedResolvers) {\r\n        if (context === void 0) { context = {}; }\r\n        if (variables === void 0) { variables = {}; }\r\n        if (fragmentMatcher === void 0) { fragmentMatcher = function () { return true; }; }\r\n        if (onlyRunForcedResolvers === void 0) { onlyRunForcedResolvers = false; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var mainDefinition, fragments, fragmentMap, definitionOperation, defaultOperationType, _a, cache, client, execContext;\r\n            return __generator(this, function (_b) {\r\n                mainDefinition = getMainDefinition(document);\r\n                fragments = getFragmentDefinitions(document);\r\n                fragmentMap = createFragmentMap(fragments);\r\n                definitionOperation = mainDefinition\r\n                    .operation;\r\n                defaultOperationType = definitionOperation\r\n                    ? definitionOperation.charAt(0).toUpperCase() +\r\n                        definitionOperation.slice(1)\r\n                    : 'Query';\r\n                _a = this, cache = _a.cache, client = _a.client;\r\n                execContext = {\r\n                    fragmentMap: fragmentMap,\r\n                    context: __assign(__assign({}, context), { cache: cache, client: client }),\r\n                    variables: variables,\r\n                    fragmentMatcher: fragmentMatcher,\r\n                    defaultOperationType: defaultOperationType,\r\n                    exportedVariables: {},\r\n                    onlyRunForcedResolvers: onlyRunForcedResolvers,\r\n                };\r\n                return [2, this.resolveSelectionSet(mainDefinition.selectionSet, rootValue, execContext).then(function (result) { return ({\r\n                        result: result,\r\n                        exportedVariables: execContext.exportedVariables,\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    LocalState.prototype.resolveSelectionSet = function (selectionSet, rootValue, execContext) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var fragmentMap, context, variables, resultsToMerge, execute;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                fragmentMap = execContext.fragmentMap, context = execContext.context, variables = execContext.variables;\r\n                resultsToMerge = [rootValue];\r\n                execute = function (selection) { return __awaiter(_this, void 0, void 0, function () {\r\n                    var fragment, typeCondition;\r\n                    return __generator(this, function (_a) {\r\n                        if (!shouldInclude(selection, variables)) {\r\n                            return [2];\r\n                        }\r\n                        if (isField(selection)) {\r\n                            return [2, this.resolveField(selection, rootValue, execContext).then(function (fieldResult) {\r\n                                    var _a;\r\n                                    if (typeof fieldResult !== 'undefined') {\r\n                                        resultsToMerge.push((_a = {},\r\n                                            _a[resultKeyNameFromField(selection)] = fieldResult,\r\n                                            _a));\r\n                                    }\r\n                                })];\r\n                        }\r\n                        if (isInlineFragment(selection)) {\r\n                            fragment = selection;\r\n                        }\r\n                        else {\r\n                            fragment = fragmentMap[selection.name.value];\r\n                            __DEV__ ? invariant(fragment, \"No fragment named \" + selection.name.value) : invariant(fragment, 11);\r\n                        }\r\n                        if (fragment && fragment.typeCondition) {\r\n                            typeCondition = fragment.typeCondition.name.value;\r\n                            if (execContext.fragmentMatcher(rootValue, typeCondition, context)) {\r\n                                return [2, this.resolveSelectionSet(fragment.selectionSet, rootValue, execContext).then(function (fragmentResult) {\r\n                                        resultsToMerge.push(fragmentResult);\r\n                                    })];\r\n                            }\r\n                        }\r\n                        return [2];\r\n                    });\r\n                }); };\r\n                return [2, Promise.all(selectionSet.selections.map(execute)).then(function () {\r\n                        return mergeDeepArray(resultsToMerge);\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    LocalState.prototype.resolveField = function (field, rootValue, execContext) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var variables, fieldName, aliasedFieldName, aliasUsed, defaultResult, resultPromise, resolverType, resolverMap, resolve;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                variables = execContext.variables;\r\n                fieldName = field.name.value;\r\n                aliasedFieldName = resultKeyNameFromField(field);\r\n                aliasUsed = fieldName !== aliasedFieldName;\r\n                defaultResult = rootValue[aliasedFieldName] || rootValue[fieldName];\r\n                resultPromise = Promise.resolve(defaultResult);\r\n                if (!execContext.onlyRunForcedResolvers ||\r\n                    this.shouldForceResolvers(field)) {\r\n                    resolverType = rootValue.__typename || execContext.defaultOperationType;\r\n                    resolverMap = this.resolvers && this.resolvers[resolverType];\r\n                    if (resolverMap) {\r\n                        resolve = resolverMap[aliasUsed ? fieldName : aliasedFieldName];\r\n                        if (resolve) {\r\n                            resultPromise = Promise.resolve(cacheSlot.withValue(this.cache, resolve, [\r\n                                rootValue,\r\n                                argumentsObjectFromField(field, variables),\r\n                                execContext.context,\r\n                                { field: field, fragmentMap: execContext.fragmentMap },\r\n                            ]));\r\n                        }\r\n                    }\r\n                }\r\n                return [2, resultPromise.then(function (result) {\r\n                        if (result === void 0) { result = defaultResult; }\r\n                        if (field.directives) {\r\n                            field.directives.forEach(function (directive) {\r\n                                if (directive.name.value === 'export' && directive.arguments) {\r\n                                    directive.arguments.forEach(function (arg) {\r\n                                        if (arg.name.value === 'as' && arg.value.kind === 'StringValue') {\r\n                                            execContext.exportedVariables[arg.value.value] = result;\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n                        }\r\n                        if (!field.selectionSet) {\r\n                            return result;\r\n                        }\r\n                        if (result == null) {\r\n                            return result;\r\n                        }\r\n                        if (Array.isArray(result)) {\r\n                            return _this.resolveSubSelectedArray(field, result, execContext);\r\n                        }\r\n                        if (field.selectionSet) {\r\n                            return _this.resolveSelectionSet(field.selectionSet, result, execContext);\r\n                        }\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    LocalState.prototype.resolveSubSelectedArray = function (field, result, execContext) {\r\n        var _this = this;\r\n        return Promise.all(result.map(function (item) {\r\n            if (item === null) {\r\n                return null;\r\n            }\r\n            if (Array.isArray(item)) {\r\n                return _this.resolveSubSelectedArray(field, item, execContext);\r\n            }\r\n            if (field.selectionSet) {\r\n                return _this.resolveSelectionSet(field.selectionSet, item, execContext);\r\n            }\r\n        }));\r\n    };\r\n    return LocalState;\r\n}());\r\nexport { LocalState };\r\n","import { __assign, __extends } from \"tslib\";\r\nimport { invariant } from \"../utilities/globals/index.js\";\r\nimport { equal } from '@wry/equality';\r\nimport { NetworkStatus, isNetworkRequestInFlight } from \"./networkStatus.js\";\r\nimport { compact, cloneDeep, getOperationDefinition, Observable, iterateObserversSafely, isNonEmptyArray, fixObservableSubclass, getQueryDefinition, } from \"../utilities/index.js\";\r\nvar assign = Object.assign, hasOwnProperty = Object.hasOwnProperty;\r\nvar warnedAboutUpdateQuery = false;\r\nvar ObservableQuery = (function (_super) {\r\n    __extends(ObservableQuery, _super);\r\n    function ObservableQuery(_a) {\r\n        var queryManager = _a.queryManager, queryInfo = _a.queryInfo, options = _a.options;\r\n        var _this = _super.call(this, function (observer) {\r\n            try {\r\n                var subObserver = observer._subscription._observer;\r\n                if (subObserver && !subObserver.error) {\r\n                    subObserver.error = defaultSubscriptionObserverErrorCallback;\r\n                }\r\n            }\r\n            catch (_a) { }\r\n            var first = !_this.observers.size;\r\n            _this.observers.add(observer);\r\n            var last = _this.last;\r\n            if (last && last.error) {\r\n                observer.error && observer.error(last.error);\r\n            }\r\n            else if (last && last.result) {\r\n                observer.next && observer.next(last.result);\r\n            }\r\n            if (first) {\r\n                _this.reobserve().catch(function () { });\r\n            }\r\n            return function () {\r\n                if (_this.observers.delete(observer) && !_this.observers.size) {\r\n                    _this.tearDownQuery();\r\n                }\r\n            };\r\n        }) || this;\r\n        _this.observers = new Set();\r\n        _this.subscriptions = new Set();\r\n        _this.isTornDown = false;\r\n        _this.options = options;\r\n        _this.queryId = queryInfo.queryId || queryManager.generateQueryId();\r\n        var opDef = getOperationDefinition(options.query);\r\n        _this.queryName = opDef && opDef.name && opDef.name.value;\r\n        _this.initialFetchPolicy = options.fetchPolicy || \"cache-first\";\r\n        _this.queryManager = queryManager;\r\n        _this.queryInfo = queryInfo;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ObservableQuery.prototype, \"variables\", {\r\n        get: function () {\r\n            return this.options.variables;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ObservableQuery.prototype.result = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            var observer = {\r\n                next: function (result) {\r\n                    resolve(result);\r\n                    _this.observers.delete(observer);\r\n                    if (!_this.observers.size) {\r\n                        _this.queryManager.removeQuery(_this.queryId);\r\n                    }\r\n                    setTimeout(function () {\r\n                        subscription.unsubscribe();\r\n                    }, 0);\r\n                },\r\n                error: reject,\r\n            };\r\n            var subscription = _this.subscribe(observer);\r\n        });\r\n    };\r\n    ObservableQuery.prototype.getCurrentResult = function (saveAsLastResult) {\r\n        if (saveAsLastResult === void 0) { saveAsLastResult = true; }\r\n        var lastResult = this.getLastResult(true);\r\n        var networkStatus = this.queryInfo.networkStatus ||\r\n            (lastResult && lastResult.networkStatus) ||\r\n            NetworkStatus.ready;\r\n        var result = __assign(__assign({}, lastResult), { loading: isNetworkRequestInFlight(networkStatus), networkStatus: networkStatus });\r\n        var _a = this.options.fetchPolicy, fetchPolicy = _a === void 0 ? \"cache-first\" : _a;\r\n        var shouldReturnCachedData = lastResult || (fetchPolicy !== 'network-only' &&\r\n            fetchPolicy !== 'no-cache' &&\r\n            fetchPolicy !== 'standby');\r\n        if (shouldReturnCachedData &&\r\n            !this.queryManager.transform(this.options.query).hasForcedResolvers) {\r\n            var diff = this.queryInfo.getDiff();\r\n            if (diff.complete || this.options.returnPartialData) {\r\n                result.data = diff.result;\r\n            }\r\n            if (equal(result.data, {})) {\r\n                result.data = void 0;\r\n            }\r\n            if (diff.complete) {\r\n                if (result.networkStatus === NetworkStatus.loading &&\r\n                    (fetchPolicy === 'cache-first' ||\r\n                        fetchPolicy === 'cache-only')) {\r\n                    result.networkStatus = NetworkStatus.ready;\r\n                    result.loading = false;\r\n                }\r\n                delete result.partial;\r\n            }\r\n            else if (fetchPolicy !== \"no-cache\") {\r\n                result.partial = true;\r\n            }\r\n            if (__DEV__ &&\r\n                !diff.complete &&\r\n                !this.options.partialRefetch &&\r\n                !result.loading &&\r\n                !result.data &&\r\n                !result.error) {\r\n                logMissingFieldErrors(diff.missing);\r\n            }\r\n        }\r\n        if (saveAsLastResult) {\r\n            this.updateLastResult(result);\r\n        }\r\n        return result;\r\n    };\r\n    ObservableQuery.prototype.isDifferentFromLastResult = function (newResult) {\r\n        return !this.last || !equal(this.last.result, newResult);\r\n    };\r\n    ObservableQuery.prototype.getLast = function (key, variablesMustMatch) {\r\n        var last = this.last;\r\n        if (last &&\r\n            last[key] &&\r\n            (!variablesMustMatch || equal(last.variables, this.variables))) {\r\n            return last[key];\r\n        }\r\n    };\r\n    ObservableQuery.prototype.getLastResult = function (variablesMustMatch) {\r\n        return this.getLast(\"result\", variablesMustMatch);\r\n    };\r\n    ObservableQuery.prototype.getLastError = function (variablesMustMatch) {\r\n        return this.getLast(\"error\", variablesMustMatch);\r\n    };\r\n    ObservableQuery.prototype.resetLastResults = function () {\r\n        delete this.last;\r\n        this.isTornDown = false;\r\n    };\r\n    ObservableQuery.prototype.resetQueryStoreErrors = function () {\r\n        this.queryManager.resetErrors(this.queryId);\r\n    };\r\n    ObservableQuery.prototype.refetch = function (variables) {\r\n        var _a;\r\n        var reobserveOptions = {\r\n            pollInterval: 0,\r\n        };\r\n        var fetchPolicy = this.options.fetchPolicy;\r\n        if (fetchPolicy === 'no-cache') {\r\n            reobserveOptions.fetchPolicy = 'no-cache';\r\n        }\r\n        else if (fetchPolicy !== 'cache-and-network') {\r\n            reobserveOptions.fetchPolicy = 'network-only';\r\n        }\r\n        if (__DEV__ && variables && hasOwnProperty.call(variables, \"variables\")) {\r\n            var queryDef = getQueryDefinition(this.options.query);\r\n            var vars = queryDef.variableDefinitions;\r\n            if (!vars || !vars.some(function (v) { return v.variable.name.value === \"variables\"; })) {\r\n                __DEV__ && invariant.warn(\"Called refetch(\" + JSON.stringify(variables) + \") for query \" + (((_a = queryDef.name) === null || _a === void 0 ? void 0 : _a.value) || JSON.stringify(queryDef)) + \", which does not declare a $variables variable.\\nDid you mean to call refetch(variables) instead of refetch({ variables })?\");\r\n            }\r\n        }\r\n        if (variables && !equal(this.options.variables, variables)) {\r\n            reobserveOptions.variables = this.options.variables = __assign(__assign({}, this.options.variables), variables);\r\n        }\r\n        this.queryInfo.resetLastWrite();\r\n        return this.reobserve(reobserveOptions, NetworkStatus.refetch);\r\n    };\r\n    ObservableQuery.prototype.fetchMore = function (fetchMoreOptions) {\r\n        var _this = this;\r\n        var combinedOptions = __assign(__assign({}, (fetchMoreOptions.query ? fetchMoreOptions : __assign(__assign(__assign({}, this.options), fetchMoreOptions), { variables: __assign(__assign({}, this.options.variables), fetchMoreOptions.variables) }))), { fetchPolicy: \"no-cache\" });\r\n        var qid = this.queryManager.generateQueryId();\r\n        if (combinedOptions.notifyOnNetworkStatusChange) {\r\n            this.queryInfo.networkStatus = NetworkStatus.fetchMore;\r\n            this.observe();\r\n        }\r\n        return this.queryManager.fetchQuery(qid, combinedOptions, NetworkStatus.fetchMore).then(function (fetchMoreResult) {\r\n            var data = fetchMoreResult.data;\r\n            var updateQuery = fetchMoreOptions.updateQuery;\r\n            if (updateQuery) {\r\n                if (__DEV__ &&\r\n                    !warnedAboutUpdateQuery) {\r\n                    __DEV__ && invariant.warn(\"The updateQuery callback for fetchMore is deprecated, and will be removed\\nin the next major version of Apollo Client.\\n\\nPlease convert updateQuery functions to field policies with appropriate\\nread and merge functions, or use/adapt a helper function (such as\\nconcatPagination, offsetLimitPagination, or relayStylePagination) from\\n@apollo/client/utilities.\\n\\nThe field policy system handles pagination more effectively than a\\nhand-written updateQuery function, and you only need to define the policy\\nonce, rather than every time you call fetchMore.\");\r\n                    warnedAboutUpdateQuery = true;\r\n                }\r\n                _this.updateQuery(function (previous) { return updateQuery(previous, {\r\n                    fetchMoreResult: data,\r\n                    variables: combinedOptions.variables,\r\n                }); });\r\n            }\r\n            else {\r\n                _this.queryManager.cache.writeQuery({\r\n                    query: combinedOptions.query,\r\n                    variables: combinedOptions.variables,\r\n                    data: data,\r\n                });\r\n            }\r\n            return fetchMoreResult;\r\n        }).finally(function () {\r\n            _this.queryManager.stopQuery(qid);\r\n            _this.reobserve();\r\n        });\r\n    };\r\n    ObservableQuery.prototype.subscribeToMore = function (options) {\r\n        var _this = this;\r\n        var subscription = this.queryManager\r\n            .startGraphQLSubscription({\r\n            query: options.document,\r\n            variables: options.variables,\r\n            context: options.context,\r\n        })\r\n            .subscribe({\r\n            next: function (subscriptionData) {\r\n                var updateQuery = options.updateQuery;\r\n                if (updateQuery) {\r\n                    _this.updateQuery(function (previous, _a) {\r\n                        var variables = _a.variables;\r\n                        return updateQuery(previous, {\r\n                            subscriptionData: subscriptionData,\r\n                            variables: variables,\r\n                        });\r\n                    });\r\n                }\r\n            },\r\n            error: function (err) {\r\n                if (options.onError) {\r\n                    options.onError(err);\r\n                    return;\r\n                }\r\n                __DEV__ && invariant.error('Unhandled GraphQL subscription error', err);\r\n            },\r\n        });\r\n        this.subscriptions.add(subscription);\r\n        return function () {\r\n            if (_this.subscriptions.delete(subscription)) {\r\n                subscription.unsubscribe();\r\n            }\r\n        };\r\n    };\r\n    ObservableQuery.prototype.setOptions = function (newOptions) {\r\n        return this.reobserve(newOptions);\r\n    };\r\n    ObservableQuery.prototype.setVariables = function (variables) {\r\n        if (equal(this.variables, variables)) {\r\n            return this.observers.size\r\n                ? this.result()\r\n                : Promise.resolve();\r\n        }\r\n        this.options.variables = variables;\r\n        if (!this.observers.size) {\r\n            return Promise.resolve();\r\n        }\r\n        return this.reobserve({\r\n            fetchPolicy: this.initialFetchPolicy,\r\n            variables: variables,\r\n        }, NetworkStatus.setVariables);\r\n    };\r\n    ObservableQuery.prototype.updateQuery = function (mapFn) {\r\n        var queryManager = this.queryManager;\r\n        var result = queryManager.cache.diff({\r\n            query: this.options.query,\r\n            variables: this.variables,\r\n            returnPartialData: true,\r\n            optimistic: false,\r\n        }).result;\r\n        var newResult = mapFn(result, {\r\n            variables: this.variables,\r\n        });\r\n        if (newResult) {\r\n            queryManager.cache.writeQuery({\r\n                query: this.options.query,\r\n                data: newResult,\r\n                variables: this.variables,\r\n            });\r\n            queryManager.broadcastQueries();\r\n        }\r\n    };\r\n    ObservableQuery.prototype.startPolling = function (pollInterval) {\r\n        this.options.pollInterval = pollInterval;\r\n        this.updatePolling();\r\n    };\r\n    ObservableQuery.prototype.stopPolling = function () {\r\n        this.options.pollInterval = 0;\r\n        this.updatePolling();\r\n    };\r\n    ObservableQuery.prototype.fetch = function (options, newNetworkStatus) {\r\n        this.queryManager.setObservableQuery(this);\r\n        return this.queryManager.fetchQueryObservable(this.queryId, options, newNetworkStatus);\r\n    };\r\n    ObservableQuery.prototype.updatePolling = function () {\r\n        var _this = this;\r\n        if (this.queryManager.ssrMode) {\r\n            return;\r\n        }\r\n        var _a = this, pollingInfo = _a.pollingInfo, pollInterval = _a.options.pollInterval;\r\n        if (!pollInterval) {\r\n            if (pollingInfo) {\r\n                clearTimeout(pollingInfo.timeout);\r\n                delete this.pollingInfo;\r\n            }\r\n            return;\r\n        }\r\n        if (pollingInfo &&\r\n            pollingInfo.interval === pollInterval) {\r\n            return;\r\n        }\r\n        __DEV__ ? invariant(pollInterval, 'Attempted to start a polling query without a polling interval.') : invariant(pollInterval, 12);\r\n        var info = pollingInfo || (this.pollingInfo = {});\r\n        info.interval = pollInterval;\r\n        var maybeFetch = function () {\r\n            if (_this.pollingInfo) {\r\n                if (!isNetworkRequestInFlight(_this.queryInfo.networkStatus)) {\r\n                    _this.reobserve({\r\n                        fetchPolicy: \"network-only\",\r\n                    }, NetworkStatus.poll).then(poll, poll);\r\n                }\r\n                else {\r\n                    poll();\r\n                }\r\n            }\r\n            ;\r\n        };\r\n        var poll = function () {\r\n            var info = _this.pollingInfo;\r\n            if (info) {\r\n                clearTimeout(info.timeout);\r\n                info.timeout = setTimeout(maybeFetch, info.interval);\r\n            }\r\n        };\r\n        poll();\r\n    };\r\n    ObservableQuery.prototype.updateLastResult = function (newResult, variables) {\r\n        if (variables === void 0) { variables = this.variables; }\r\n        this.last = __assign(__assign({}, this.last), { result: this.queryManager.assumeImmutableResults\r\n                ? newResult\r\n                : cloneDeep(newResult), variables: variables });\r\n        if (!isNonEmptyArray(newResult.errors)) {\r\n            delete this.last.error;\r\n        }\r\n        return this.last;\r\n    };\r\n    ObservableQuery.prototype.reobserve = function (newOptions, newNetworkStatus) {\r\n        var _this = this;\r\n        this.isTornDown = false;\r\n        var useDisposableConcast = newNetworkStatus === NetworkStatus.refetch ||\r\n            newNetworkStatus === NetworkStatus.fetchMore ||\r\n            newNetworkStatus === NetworkStatus.poll;\r\n        var oldVariables = this.options.variables;\r\n        var options = useDisposableConcast\r\n            ? compact(this.options, newOptions)\r\n            : assign(this.options, compact(newOptions));\r\n        if (!useDisposableConcast) {\r\n            this.updatePolling();\r\n            if (newOptions &&\r\n                newOptions.variables &&\r\n                !newOptions.fetchPolicy &&\r\n                !equal(newOptions.variables, oldVariables)) {\r\n                options.fetchPolicy = this.initialFetchPolicy;\r\n                if (newNetworkStatus === void 0) {\r\n                    newNetworkStatus = NetworkStatus.setVariables;\r\n                }\r\n            }\r\n        }\r\n        var variables = options.variables && __assign({}, options.variables);\r\n        var concast = this.fetch(options, newNetworkStatus);\r\n        var observer = {\r\n            next: function (result) {\r\n                _this.reportResult(result, variables);\r\n            },\r\n            error: function (error) {\r\n                _this.reportError(error, variables);\r\n            },\r\n        };\r\n        if (!useDisposableConcast) {\r\n            if (this.concast && this.observer) {\r\n                this.concast.removeObserver(this.observer, true);\r\n            }\r\n            this.concast = concast;\r\n            this.observer = observer;\r\n        }\r\n        concast.addObserver(observer);\r\n        return concast.promise;\r\n    };\r\n    ObservableQuery.prototype.observe = function () {\r\n        this.reportResult(this.getCurrentResult(false), this.variables);\r\n    };\r\n    ObservableQuery.prototype.reportResult = function (result, variables) {\r\n        if (this.getLastError() || this.isDifferentFromLastResult(result)) {\r\n            this.updateLastResult(result, variables);\r\n            iterateObserversSafely(this.observers, 'next', result);\r\n        }\r\n    };\r\n    ObservableQuery.prototype.reportError = function (error, variables) {\r\n        var errorResult = __assign(__assign({}, this.getLastResult()), { error: error, errors: error.graphQLErrors, networkStatus: NetworkStatus.error, loading: false });\r\n        this.updateLastResult(errorResult, variables);\r\n        iterateObserversSafely(this.observers, 'error', this.last.error = error);\r\n    };\r\n    ObservableQuery.prototype.hasObservers = function () {\r\n        return this.observers.size > 0;\r\n    };\r\n    ObservableQuery.prototype.tearDownQuery = function () {\r\n        if (this.isTornDown)\r\n            return;\r\n        if (this.concast && this.observer) {\r\n            this.concast.removeObserver(this.observer);\r\n            delete this.concast;\r\n            delete this.observer;\r\n        }\r\n        this.stopPolling();\r\n        this.subscriptions.forEach(function (sub) { return sub.unsubscribe(); });\r\n        this.subscriptions.clear();\r\n        this.queryManager.stopQuery(this.queryId);\r\n        this.observers.clear();\r\n        this.isTornDown = true;\r\n    };\r\n    return ObservableQuery;\r\n}(Observable));\r\nexport { ObservableQuery };\r\nfixObservableSubclass(ObservableQuery);\r\nfunction defaultSubscriptionObserverErrorCallback(error) {\r\n    __DEV__ && invariant.error('Unhandled error', error.message, error.stack);\r\n}\r\nexport function logMissingFieldErrors(missing) {\r\n    if (__DEV__ && isNonEmptyArray(missing)) {\r\n        __DEV__ && invariant.debug(\"Missing cache result fields: \" + missing.map(function (m) { return m.path.join('.'); }).join(', '), missing);\r\n    }\r\n}\r\nexport function applyNextFetchPolicy(options) {\r\n    var _a = options.fetchPolicy, fetchPolicy = _a === void 0 ? \"cache-first\" : _a, nextFetchPolicy = options.nextFetchPolicy;\r\n    if (nextFetchPolicy) {\r\n        options.fetchPolicy = typeof nextFetchPolicy === \"function\"\r\n            ? nextFetchPolicy.call(options, fetchPolicy)\r\n            : nextFetchPolicy;\r\n    }\r\n}\r\n","import { __assign } from \"tslib\";\r\nimport { equal } from \"@wry/equality\";\r\nimport { isNonEmptyArray, graphQLResultHasError, canUseWeakMap, } from \"../utilities/index.js\";\r\nimport { NetworkStatus, isNetworkRequestInFlight, } from \"./networkStatus.js\";\r\n;\r\nvar destructiveMethodCounts = new (canUseWeakMap ? WeakMap : Map)();\r\nfunction wrapDestructiveCacheMethod(cache, methodName) {\r\n    var original = cache[methodName];\r\n    if (typeof original === \"function\") {\r\n        cache[methodName] = function () {\r\n            destructiveMethodCounts.set(cache, (destructiveMethodCounts.get(cache) + 1) % 1e15);\r\n            return original.apply(this, arguments);\r\n        };\r\n    }\r\n}\r\nfunction cancelNotifyTimeout(info) {\r\n    if (info[\"notifyTimeout\"]) {\r\n        clearTimeout(info[\"notifyTimeout\"]);\r\n        info[\"notifyTimeout\"] = void 0;\r\n    }\r\n}\r\nvar QueryInfo = (function () {\r\n    function QueryInfo(queryManager, queryId) {\r\n        if (queryId === void 0) { queryId = queryManager.generateQueryId(); }\r\n        this.queryId = queryId;\r\n        this.listeners = new Set();\r\n        this.document = null;\r\n        this.lastRequestId = 1;\r\n        this.subscriptions = new Set();\r\n        this.stopped = false;\r\n        this.dirty = false;\r\n        this.observableQuery = null;\r\n        var cache = this.cache = queryManager.cache;\r\n        if (!destructiveMethodCounts.has(cache)) {\r\n            destructiveMethodCounts.set(cache, 0);\r\n            wrapDestructiveCacheMethod(cache, \"evict\");\r\n            wrapDestructiveCacheMethod(cache, \"modify\");\r\n            wrapDestructiveCacheMethod(cache, \"reset\");\r\n        }\r\n    }\r\n    QueryInfo.prototype.init = function (query) {\r\n        var networkStatus = query.networkStatus || NetworkStatus.loading;\r\n        if (this.variables &&\r\n            this.networkStatus !== NetworkStatus.loading &&\r\n            !equal(this.variables, query.variables)) {\r\n            networkStatus = NetworkStatus.setVariables;\r\n        }\r\n        if (!equal(query.variables, this.variables)) {\r\n            this.lastDiff = void 0;\r\n        }\r\n        Object.assign(this, {\r\n            document: query.document,\r\n            variables: query.variables,\r\n            networkError: null,\r\n            graphQLErrors: this.graphQLErrors || [],\r\n            networkStatus: networkStatus,\r\n        });\r\n        if (query.observableQuery) {\r\n            this.setObservableQuery(query.observableQuery);\r\n        }\r\n        if (query.lastRequestId) {\r\n            this.lastRequestId = query.lastRequestId;\r\n        }\r\n        return this;\r\n    };\r\n    QueryInfo.prototype.reset = function () {\r\n        cancelNotifyTimeout(this);\r\n        this.lastDiff = void 0;\r\n        this.dirty = false;\r\n    };\r\n    QueryInfo.prototype.getDiff = function (variables) {\r\n        if (variables === void 0) { variables = this.variables; }\r\n        var options = this.getDiffOptions(variables);\r\n        if (this.lastDiff && equal(options, this.lastDiff.options)) {\r\n            return this.lastDiff.diff;\r\n        }\r\n        this.updateWatch(this.variables = variables);\r\n        var oq = this.observableQuery;\r\n        if (oq && oq.options.fetchPolicy === \"no-cache\") {\r\n            return { complete: false };\r\n        }\r\n        var diff = this.cache.diff(options);\r\n        this.updateLastDiff(diff, options);\r\n        return diff;\r\n    };\r\n    QueryInfo.prototype.updateLastDiff = function (diff, options) {\r\n        this.lastDiff = diff ? {\r\n            diff: diff,\r\n            options: options || this.getDiffOptions(),\r\n        } : void 0;\r\n    };\r\n    QueryInfo.prototype.getDiffOptions = function (variables) {\r\n        if (variables === void 0) { variables = this.variables; }\r\n        var oq = this.observableQuery;\r\n        return {\r\n            query: this.document,\r\n            variables: variables,\r\n            returnPartialData: true,\r\n            optimistic: true,\r\n            canonizeResults: !oq || oq.options.canonizeResults !== false,\r\n        };\r\n    };\r\n    QueryInfo.prototype.setDiff = function (diff) {\r\n        var _this = this;\r\n        var oldDiff = this.lastDiff && this.lastDiff.diff;\r\n        this.updateLastDiff(diff);\r\n        if (!this.dirty &&\r\n            !equal(oldDiff && oldDiff.result, diff && diff.result)) {\r\n            this.dirty = true;\r\n            if (!this.notifyTimeout) {\r\n                this.notifyTimeout = setTimeout(function () { return _this.notify(); }, 0);\r\n            }\r\n        }\r\n    };\r\n    QueryInfo.prototype.setObservableQuery = function (oq) {\r\n        var _this = this;\r\n        if (oq === this.observableQuery)\r\n            return;\r\n        if (this.oqListener) {\r\n            this.listeners.delete(this.oqListener);\r\n        }\r\n        this.observableQuery = oq;\r\n        if (oq) {\r\n            oq[\"queryInfo\"] = this;\r\n            this.listeners.add(this.oqListener = function () {\r\n                if (_this.getDiff().fromOptimisticTransaction) {\r\n                    oq[\"observe\"]();\r\n                }\r\n                else {\r\n                    oq.reobserve();\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            delete this.oqListener;\r\n        }\r\n    };\r\n    QueryInfo.prototype.notify = function () {\r\n        var _this = this;\r\n        cancelNotifyTimeout(this);\r\n        if (this.shouldNotify()) {\r\n            this.listeners.forEach(function (listener) { return listener(_this); });\r\n        }\r\n        this.dirty = false;\r\n    };\r\n    QueryInfo.prototype.shouldNotify = function () {\r\n        if (!this.dirty || !this.listeners.size) {\r\n            return false;\r\n        }\r\n        if (isNetworkRequestInFlight(this.networkStatus) &&\r\n            this.observableQuery) {\r\n            var fetchPolicy = this.observableQuery.options.fetchPolicy;\r\n            if (fetchPolicy !== \"cache-only\" &&\r\n                fetchPolicy !== \"cache-and-network\") {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    QueryInfo.prototype.stop = function () {\r\n        if (!this.stopped) {\r\n            this.stopped = true;\r\n            this.reset();\r\n            this.cancel();\r\n            this.cancel = QueryInfo.prototype.cancel;\r\n            this.subscriptions.forEach(function (sub) { return sub.unsubscribe(); });\r\n            var oq = this.observableQuery;\r\n            if (oq)\r\n                oq.stopPolling();\r\n        }\r\n    };\r\n    QueryInfo.prototype.cancel = function () { };\r\n    QueryInfo.prototype.updateWatch = function (variables) {\r\n        var _this = this;\r\n        if (variables === void 0) { variables = this.variables; }\r\n        var oq = this.observableQuery;\r\n        if (oq && oq.options.fetchPolicy === \"no-cache\") {\r\n            return;\r\n        }\r\n        var watchOptions = __assign(__assign({}, this.getDiffOptions(variables)), { watcher: this, callback: function (diff) { return _this.setDiff(diff); } });\r\n        if (!this.lastWatch ||\r\n            !equal(watchOptions, this.lastWatch)) {\r\n            this.cancel();\r\n            this.cancel = this.cache.watch(this.lastWatch = watchOptions);\r\n        }\r\n    };\r\n    QueryInfo.prototype.resetLastWrite = function () {\r\n        this.lastWrite = void 0;\r\n    };\r\n    QueryInfo.prototype.shouldWrite = function (result, variables) {\r\n        var lastWrite = this.lastWrite;\r\n        return !(lastWrite &&\r\n            lastWrite.dmCount === destructiveMethodCounts.get(this.cache) &&\r\n            equal(variables, lastWrite.variables) &&\r\n            equal(result.data, lastWrite.result.data));\r\n    };\r\n    QueryInfo.prototype.markResult = function (result, options, cacheWriteBehavior) {\r\n        var _this = this;\r\n        this.graphQLErrors = isNonEmptyArray(result.errors) ? result.errors : [];\r\n        this.reset();\r\n        if (options.fetchPolicy === 'no-cache') {\r\n            this.updateLastDiff({ result: result.data, complete: true }, this.getDiffOptions(options.variables));\r\n        }\r\n        else if (cacheWriteBehavior !== 0) {\r\n            if (shouldWriteResult(result, options.errorPolicy)) {\r\n                this.cache.performTransaction(function (cache) {\r\n                    if (_this.shouldWrite(result, options.variables)) {\r\n                        cache.writeQuery({\r\n                            query: _this.document,\r\n                            data: result.data,\r\n                            variables: options.variables,\r\n                            overwrite: cacheWriteBehavior === 1,\r\n                        });\r\n                        _this.lastWrite = {\r\n                            result: result,\r\n                            variables: options.variables,\r\n                            dmCount: destructiveMethodCounts.get(_this.cache),\r\n                        };\r\n                    }\r\n                    else {\r\n                        if (_this.lastDiff &&\r\n                            _this.lastDiff.diff.complete) {\r\n                            result.data = _this.lastDiff.diff.result;\r\n                            return;\r\n                        }\r\n                    }\r\n                    var diffOptions = _this.getDiffOptions(options.variables);\r\n                    var diff = cache.diff(diffOptions);\r\n                    if (!_this.stopped) {\r\n                        _this.updateWatch(options.variables);\r\n                    }\r\n                    _this.updateLastDiff(diff, diffOptions);\r\n                    if (diff.complete) {\r\n                        result.data = diff.result;\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                this.lastWrite = void 0;\r\n            }\r\n        }\r\n    };\r\n    QueryInfo.prototype.markReady = function () {\r\n        this.networkError = null;\r\n        return this.networkStatus = NetworkStatus.ready;\r\n    };\r\n    QueryInfo.prototype.markError = function (error) {\r\n        this.networkStatus = NetworkStatus.error;\r\n        this.lastWrite = void 0;\r\n        this.reset();\r\n        if (error.graphQLErrors) {\r\n            this.graphQLErrors = error.graphQLErrors;\r\n        }\r\n        if (error.networkError) {\r\n            this.networkError = error.networkError;\r\n        }\r\n        return error;\r\n    };\r\n    return QueryInfo;\r\n}());\r\nexport { QueryInfo };\r\nexport function shouldWriteResult(result, errorPolicy) {\r\n    if (errorPolicy === void 0) { errorPolicy = \"none\"; }\r\n    var ignoreErrors = errorPolicy === \"ignore\" ||\r\n        errorPolicy === \"all\";\r\n    var writeWithErrors = !graphQLResultHasError(result);\r\n    if (!writeWithErrors && ignoreErrors && result.data) {\r\n        writeWithErrors = true;\r\n    }\r\n    return writeWithErrors;\r\n}\r\n","import { __assign, __awaiter, __generator } from \"tslib\";\r\nimport { invariant, InvariantError } from \"../utilities/globals/index.js\";\r\nimport { equal } from '@wry/equality';\r\nimport { execute } from \"../link/core/index.js\";\r\nimport { canonicalStringify } from \"../cache/index.js\";\r\nimport { getDefaultValues, getOperationDefinition, getOperationName, hasClientExports, graphQLResultHasError, removeConnectionDirectiveFromDocument, canUseWeakMap, Observable, asyncMap, isNonEmptyArray, Concast, makeUniqueId, isDocumentNode, isNonNullObject, } from \"../utilities/index.js\";\r\nimport { ApolloError, isApolloError } from \"../errors/index.js\";\r\nimport { ObservableQuery, applyNextFetchPolicy, logMissingFieldErrors } from \"./ObservableQuery.js\";\r\nimport { NetworkStatus, isNetworkRequestInFlight } from \"./networkStatus.js\";\r\nimport { LocalState } from \"./LocalState.js\";\r\nimport { QueryInfo, shouldWriteResult, } from \"./QueryInfo.js\";\r\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\nvar QueryManager = (function () {\r\n    function QueryManager(_a) {\r\n        var cache = _a.cache, link = _a.link, _b = _a.queryDeduplication, queryDeduplication = _b === void 0 ? false : _b, onBroadcast = _a.onBroadcast, _c = _a.ssrMode, ssrMode = _c === void 0 ? false : _c, _d = _a.clientAwareness, clientAwareness = _d === void 0 ? {} : _d, localState = _a.localState, assumeImmutableResults = _a.assumeImmutableResults;\r\n        this.clientAwareness = {};\r\n        this.queries = new Map();\r\n        this.fetchCancelFns = new Map();\r\n        this.transformCache = new (canUseWeakMap ? WeakMap : Map)();\r\n        this.queryIdCounter = 1;\r\n        this.requestIdCounter = 1;\r\n        this.mutationIdCounter = 1;\r\n        this.inFlightLinkObservables = new Map();\r\n        this.cache = cache;\r\n        this.link = link;\r\n        this.queryDeduplication = queryDeduplication;\r\n        this.clientAwareness = clientAwareness;\r\n        this.localState = localState || new LocalState({ cache: cache });\r\n        this.ssrMode = ssrMode;\r\n        this.assumeImmutableResults = !!assumeImmutableResults;\r\n        if ((this.onBroadcast = onBroadcast)) {\r\n            this.mutationStore = Object.create(null);\r\n        }\r\n    }\r\n    QueryManager.prototype.stop = function () {\r\n        var _this = this;\r\n        this.queries.forEach(function (_info, queryId) {\r\n            _this.stopQueryNoBroadcast(queryId);\r\n        });\r\n        this.cancelPendingFetches(__DEV__ ? new InvariantError('QueryManager stopped while query was in flight') : new InvariantError(13));\r\n    };\r\n    QueryManager.prototype.cancelPendingFetches = function (error) {\r\n        this.fetchCancelFns.forEach(function (cancel) { return cancel(error); });\r\n        this.fetchCancelFns.clear();\r\n    };\r\n    QueryManager.prototype.mutate = function (_a) {\r\n        var mutation = _a.mutation, variables = _a.variables, optimisticResponse = _a.optimisticResponse, updateQueries = _a.updateQueries, _b = _a.refetchQueries, refetchQueries = _b === void 0 ? [] : _b, _c = _a.awaitRefetchQueries, awaitRefetchQueries = _c === void 0 ? false : _c, updateWithProxyFn = _a.update, onQueryUpdated = _a.onQueryUpdated, _d = _a.errorPolicy, errorPolicy = _d === void 0 ? 'none' : _d, _e = _a.fetchPolicy, fetchPolicy = _e === void 0 ? 'network-only' : _e, keepRootFields = _a.keepRootFields, context = _a.context;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var mutationId, mutationStoreValue, self;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        __DEV__ ? invariant(mutation, 'mutation option is required. You must specify your GraphQL document in the mutation option.') : invariant(mutation, 14);\r\n                        __DEV__ ? invariant(fetchPolicy === 'network-only' ||\r\n                            fetchPolicy === 'no-cache', \"Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write.\") : invariant(fetchPolicy === 'network-only' ||\r\n                            fetchPolicy === 'no-cache', 15);\r\n                        mutationId = this.generateMutationId();\r\n                        mutation = this.transform(mutation).document;\r\n                        variables = this.getVariables(mutation, variables);\r\n                        if (!this.transform(mutation).hasClientExports) return [3, 2];\r\n                        return [4, this.localState.addExportedVariables(mutation, variables, context)];\r\n                    case 1:\r\n                        variables = (_f.sent());\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        mutationStoreValue = this.mutationStore &&\r\n                            (this.mutationStore[mutationId] = {\r\n                                mutation: mutation,\r\n                                variables: variables,\r\n                                loading: true,\r\n                                error: null,\r\n                            });\r\n                        if (optimisticResponse) {\r\n                            this.markMutationOptimistic(optimisticResponse, {\r\n                                mutationId: mutationId,\r\n                                document: mutation,\r\n                                variables: variables,\r\n                                fetchPolicy: fetchPolicy,\r\n                                errorPolicy: errorPolicy,\r\n                                context: context,\r\n                                updateQueries: updateQueries,\r\n                                update: updateWithProxyFn,\r\n                                keepRootFields: keepRootFields,\r\n                            });\r\n                        }\r\n                        this.broadcastQueries();\r\n                        self = this;\r\n                        return [2, new Promise(function (resolve, reject) {\r\n                                return asyncMap(self.getObservableFromLink(mutation, __assign(__assign({}, context), { optimisticResponse: optimisticResponse }), variables, false), function (result) {\r\n                                    if (graphQLResultHasError(result) && errorPolicy === 'none') {\r\n                                        throw new ApolloError({\r\n                                            graphQLErrors: result.errors,\r\n                                        });\r\n                                    }\r\n                                    if (mutationStoreValue) {\r\n                                        mutationStoreValue.loading = false;\r\n                                        mutationStoreValue.error = null;\r\n                                    }\r\n                                    var storeResult = __assign({}, result);\r\n                                    if (typeof refetchQueries === \"function\") {\r\n                                        refetchQueries = refetchQueries(storeResult);\r\n                                    }\r\n                                    if (errorPolicy === 'ignore' &&\r\n                                        graphQLResultHasError(storeResult)) {\r\n                                        delete storeResult.errors;\r\n                                    }\r\n                                    return self.markMutationResult({\r\n                                        mutationId: mutationId,\r\n                                        result: storeResult,\r\n                                        document: mutation,\r\n                                        variables: variables,\r\n                                        fetchPolicy: fetchPolicy,\r\n                                        errorPolicy: errorPolicy,\r\n                                        context: context,\r\n                                        update: updateWithProxyFn,\r\n                                        updateQueries: updateQueries,\r\n                                        awaitRefetchQueries: awaitRefetchQueries,\r\n                                        refetchQueries: refetchQueries,\r\n                                        removeOptimistic: optimisticResponse ? mutationId : void 0,\r\n                                        onQueryUpdated: onQueryUpdated,\r\n                                        keepRootFields: keepRootFields,\r\n                                    });\r\n                                }).subscribe({\r\n                                    next: function (storeResult) {\r\n                                        self.broadcastQueries();\r\n                                        resolve(storeResult);\r\n                                    },\r\n                                    error: function (err) {\r\n                                        if (mutationStoreValue) {\r\n                                            mutationStoreValue.loading = false;\r\n                                            mutationStoreValue.error = err;\r\n                                        }\r\n                                        if (optimisticResponse) {\r\n                                            self.cache.removeOptimistic(mutationId);\r\n                                        }\r\n                                        self.broadcastQueries();\r\n                                        reject(err instanceof ApolloError ? err : new ApolloError({\r\n                                            networkError: err,\r\n                                        }));\r\n                                    },\r\n                                });\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QueryManager.prototype.markMutationResult = function (mutation, cache) {\r\n        var _this = this;\r\n        if (cache === void 0) { cache = this.cache; }\r\n        var result = mutation.result;\r\n        var cacheWrites = [];\r\n        var skipCache = mutation.fetchPolicy === \"no-cache\";\r\n        if (!skipCache && shouldWriteResult(result, mutation.errorPolicy)) {\r\n            cacheWrites.push({\r\n                result: result.data,\r\n                dataId: 'ROOT_MUTATION',\r\n                query: mutation.document,\r\n                variables: mutation.variables,\r\n            });\r\n            var updateQueries_1 = mutation.updateQueries;\r\n            if (updateQueries_1) {\r\n                this.queries.forEach(function (_a, queryId) {\r\n                    var observableQuery = _a.observableQuery;\r\n                    var queryName = observableQuery && observableQuery.queryName;\r\n                    if (!queryName || !hasOwnProperty.call(updateQueries_1, queryName)) {\r\n                        return;\r\n                    }\r\n                    var updater = updateQueries_1[queryName];\r\n                    var _b = _this.queries.get(queryId), document = _b.document, variables = _b.variables;\r\n                    var _c = cache.diff({\r\n                        query: document,\r\n                        variables: variables,\r\n                        returnPartialData: true,\r\n                        optimistic: false,\r\n                    }), currentQueryResult = _c.result, complete = _c.complete;\r\n                    if (complete && currentQueryResult) {\r\n                        var nextQueryResult = updater(currentQueryResult, {\r\n                            mutationResult: result,\r\n                            queryName: document && getOperationName(document) || void 0,\r\n                            queryVariables: variables,\r\n                        });\r\n                        if (nextQueryResult) {\r\n                            cacheWrites.push({\r\n                                result: nextQueryResult,\r\n                                dataId: 'ROOT_QUERY',\r\n                                query: document,\r\n                                variables: variables,\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        if (cacheWrites.length > 0 ||\r\n            mutation.refetchQueries ||\r\n            mutation.update ||\r\n            mutation.onQueryUpdated ||\r\n            mutation.removeOptimistic) {\r\n            var results_1 = [];\r\n            this.refetchQueries({\r\n                updateCache: function (cache) {\r\n                    if (!skipCache) {\r\n                        cacheWrites.forEach(function (write) { return cache.write(write); });\r\n                    }\r\n                    var update = mutation.update;\r\n                    if (update) {\r\n                        if (!skipCache) {\r\n                            var diff = cache.diff({\r\n                                id: \"ROOT_MUTATION\",\r\n                                query: _this.transform(mutation.document).asQuery,\r\n                                variables: mutation.variables,\r\n                                optimistic: false,\r\n                                returnPartialData: true,\r\n                            });\r\n                            if (diff.complete) {\r\n                                result = __assign(__assign({}, result), { data: diff.result });\r\n                            }\r\n                        }\r\n                        update(cache, result, {\r\n                            context: mutation.context,\r\n                            variables: mutation.variables,\r\n                        });\r\n                    }\r\n                    if (!skipCache && !mutation.keepRootFields) {\r\n                        cache.modify({\r\n                            id: 'ROOT_MUTATION',\r\n                            fields: function (value, _a) {\r\n                                var fieldName = _a.fieldName, DELETE = _a.DELETE;\r\n                                return fieldName === \"__typename\" ? value : DELETE;\r\n                            },\r\n                        });\r\n                    }\r\n                },\r\n                include: mutation.refetchQueries,\r\n                optimistic: false,\r\n                removeOptimistic: mutation.removeOptimistic,\r\n                onQueryUpdated: mutation.onQueryUpdated || null,\r\n            }).forEach(function (result) { return results_1.push(result); });\r\n            if (mutation.awaitRefetchQueries || mutation.onQueryUpdated) {\r\n                return Promise.all(results_1).then(function () { return result; });\r\n            }\r\n        }\r\n        return Promise.resolve(result);\r\n    };\r\n    QueryManager.prototype.markMutationOptimistic = function (optimisticResponse, mutation) {\r\n        var _this = this;\r\n        var data = typeof optimisticResponse === \"function\"\r\n            ? optimisticResponse(mutation.variables)\r\n            : optimisticResponse;\r\n        return this.cache.recordOptimisticTransaction(function (cache) {\r\n            try {\r\n                _this.markMutationResult(__assign(__assign({}, mutation), { result: { data: data } }), cache);\r\n            }\r\n            catch (error) {\r\n                __DEV__ && invariant.error(error);\r\n            }\r\n        }, mutation.mutationId);\r\n    };\r\n    QueryManager.prototype.fetchQuery = function (queryId, options, networkStatus) {\r\n        return this.fetchQueryObservable(queryId, options, networkStatus).promise;\r\n    };\r\n    QueryManager.prototype.getQueryStore = function () {\r\n        var store = Object.create(null);\r\n        this.queries.forEach(function (info, queryId) {\r\n            store[queryId] = {\r\n                variables: info.variables,\r\n                networkStatus: info.networkStatus,\r\n                networkError: info.networkError,\r\n                graphQLErrors: info.graphQLErrors,\r\n            };\r\n        });\r\n        return store;\r\n    };\r\n    QueryManager.prototype.resetErrors = function (queryId) {\r\n        var queryInfo = this.queries.get(queryId);\r\n        if (queryInfo) {\r\n            queryInfo.networkError = undefined;\r\n            queryInfo.graphQLErrors = [];\r\n        }\r\n    };\r\n    QueryManager.prototype.transform = function (document) {\r\n        var transformCache = this.transformCache;\r\n        if (!transformCache.has(document)) {\r\n            var transformed = this.cache.transformDocument(document);\r\n            var forLink = removeConnectionDirectiveFromDocument(this.cache.transformForLink(transformed));\r\n            var clientQuery = this.localState.clientQuery(transformed);\r\n            var serverQuery = forLink && this.localState.serverQuery(forLink);\r\n            var cacheEntry_1 = {\r\n                document: transformed,\r\n                hasClientExports: hasClientExports(transformed),\r\n                hasForcedResolvers: this.localState.shouldForceResolvers(transformed),\r\n                clientQuery: clientQuery,\r\n                serverQuery: serverQuery,\r\n                defaultVars: getDefaultValues(getOperationDefinition(transformed)),\r\n                asQuery: __assign(__assign({}, transformed), { definitions: transformed.definitions.map(function (def) {\r\n                        if (def.kind === \"OperationDefinition\" &&\r\n                            def.operation !== \"query\") {\r\n                            return __assign(__assign({}, def), { operation: \"query\" });\r\n                        }\r\n                        return def;\r\n                    }) })\r\n            };\r\n            var add = function (doc) {\r\n                if (doc && !transformCache.has(doc)) {\r\n                    transformCache.set(doc, cacheEntry_1);\r\n                }\r\n            };\r\n            add(document);\r\n            add(transformed);\r\n            add(clientQuery);\r\n            add(serverQuery);\r\n        }\r\n        return transformCache.get(document);\r\n    };\r\n    QueryManager.prototype.getVariables = function (document, variables) {\r\n        return __assign(__assign({}, this.transform(document).defaultVars), variables);\r\n    };\r\n    QueryManager.prototype.watchQuery = function (options) {\r\n        options = __assign(__assign({}, options), { variables: this.getVariables(options.query, options.variables) });\r\n        if (typeof options.notifyOnNetworkStatusChange === 'undefined') {\r\n            options.notifyOnNetworkStatusChange = false;\r\n        }\r\n        var queryInfo = new QueryInfo(this);\r\n        var observable = new ObservableQuery({\r\n            queryManager: this,\r\n            queryInfo: queryInfo,\r\n            options: options,\r\n        });\r\n        this.queries.set(observable.queryId, queryInfo);\r\n        queryInfo.init({\r\n            document: options.query,\r\n            observableQuery: observable,\r\n            variables: options.variables,\r\n        });\r\n        return observable;\r\n    };\r\n    QueryManager.prototype.query = function (options, queryId) {\r\n        var _this = this;\r\n        if (queryId === void 0) { queryId = this.generateQueryId(); }\r\n        __DEV__ ? invariant(options.query, 'query option is required. You must specify your GraphQL document ' +\r\n            'in the query option.') : invariant(options.query, 16);\r\n        __DEV__ ? invariant(options.query.kind === 'Document', 'You must wrap the query string in a \"gql\" tag.') : invariant(options.query.kind === 'Document', 17);\r\n        __DEV__ ? invariant(!options.returnPartialData, 'returnPartialData option only supported on watchQuery.') : invariant(!options.returnPartialData, 18);\r\n        __DEV__ ? invariant(!options.pollInterval, 'pollInterval option only supported on watchQuery.') : invariant(!options.pollInterval, 19);\r\n        return this.fetchQuery(queryId, options).finally(function () { return _this.stopQuery(queryId); });\r\n    };\r\n    QueryManager.prototype.generateQueryId = function () {\r\n        return String(this.queryIdCounter++);\r\n    };\r\n    QueryManager.prototype.generateRequestId = function () {\r\n        return this.requestIdCounter++;\r\n    };\r\n    QueryManager.prototype.generateMutationId = function () {\r\n        return String(this.mutationIdCounter++);\r\n    };\r\n    QueryManager.prototype.stopQueryInStore = function (queryId) {\r\n        this.stopQueryInStoreNoBroadcast(queryId);\r\n        this.broadcastQueries();\r\n    };\r\n    QueryManager.prototype.stopQueryInStoreNoBroadcast = function (queryId) {\r\n        var queryInfo = this.queries.get(queryId);\r\n        if (queryInfo)\r\n            queryInfo.stop();\r\n    };\r\n    QueryManager.prototype.clearStore = function () {\r\n        this.cancelPendingFetches(__DEV__ ? new InvariantError('Store reset while query was in flight (not completed in link chain)') : new InvariantError(20));\r\n        this.queries.forEach(function (queryInfo) {\r\n            if (queryInfo.observableQuery) {\r\n                queryInfo.networkStatus = NetworkStatus.loading;\r\n            }\r\n            else {\r\n                queryInfo.stop();\r\n            }\r\n        });\r\n        if (this.mutationStore) {\r\n            this.mutationStore = Object.create(null);\r\n        }\r\n        return this.cache.reset();\r\n    };\r\n    QueryManager.prototype.resetStore = function () {\r\n        var _this = this;\r\n        return this.clearStore().then(function () {\r\n            return _this.reFetchObservableQueries();\r\n        });\r\n    };\r\n    QueryManager.prototype.getObservableQueries = function (include) {\r\n        var _this = this;\r\n        if (include === void 0) { include = \"active\"; }\r\n        var queries = new Map();\r\n        var queryNamesAndDocs = new Map();\r\n        var legacyQueryOptions = new Set();\r\n        if (Array.isArray(include)) {\r\n            include.forEach(function (desc) {\r\n                if (typeof desc === \"string\") {\r\n                    queryNamesAndDocs.set(desc, false);\r\n                }\r\n                else if (isDocumentNode(desc)) {\r\n                    queryNamesAndDocs.set(_this.transform(desc).document, false);\r\n                }\r\n                else if (isNonNullObject(desc) && desc.query) {\r\n                    legacyQueryOptions.add(desc);\r\n                }\r\n            });\r\n        }\r\n        this.queries.forEach(function (_a, queryId) {\r\n            var oq = _a.observableQuery, document = _a.document;\r\n            if (oq) {\r\n                if (include === \"all\") {\r\n                    queries.set(queryId, oq);\r\n                    return;\r\n                }\r\n                var queryName = oq.queryName, fetchPolicy = oq.options.fetchPolicy;\r\n                if (fetchPolicy === \"standby\" || !oq.hasObservers()) {\r\n                    return;\r\n                }\r\n                if (include === \"active\" ||\r\n                    (queryName && queryNamesAndDocs.has(queryName)) ||\r\n                    (document && queryNamesAndDocs.has(document))) {\r\n                    queries.set(queryId, oq);\r\n                    if (queryName)\r\n                        queryNamesAndDocs.set(queryName, true);\r\n                    if (document)\r\n                        queryNamesAndDocs.set(document, true);\r\n                }\r\n            }\r\n        });\r\n        if (legacyQueryOptions.size) {\r\n            legacyQueryOptions.forEach(function (options) {\r\n                var queryId = makeUniqueId(\"legacyOneTimeQuery\");\r\n                var queryInfo = _this.getQuery(queryId).init({\r\n                    document: options.query,\r\n                    variables: options.variables,\r\n                });\r\n                var oq = new ObservableQuery({\r\n                    queryManager: _this,\r\n                    queryInfo: queryInfo,\r\n                    options: __assign(__assign({}, options), { fetchPolicy: \"network-only\" }),\r\n                });\r\n                invariant(oq.queryId === queryId);\r\n                queryInfo.setObservableQuery(oq);\r\n                queries.set(queryId, oq);\r\n            });\r\n        }\r\n        if (__DEV__ && queryNamesAndDocs.size) {\r\n            queryNamesAndDocs.forEach(function (included, nameOrDoc) {\r\n                if (!included) {\r\n                    __DEV__ && invariant.warn(\"Unknown query \" + (typeof nameOrDoc === \"string\" ? \"named \" : \"\") + JSON.stringify(nameOrDoc, null, 2) + \" requested in refetchQueries options.include array\");\r\n                }\r\n            });\r\n        }\r\n        return queries;\r\n    };\r\n    QueryManager.prototype.reFetchObservableQueries = function (includeStandby) {\r\n        var _this = this;\r\n        if (includeStandby === void 0) { includeStandby = false; }\r\n        var observableQueryPromises = [];\r\n        this.getObservableQueries(includeStandby ? \"all\" : \"active\").forEach(function (observableQuery, queryId) {\r\n            var fetchPolicy = observableQuery.options.fetchPolicy;\r\n            observableQuery.resetLastResults();\r\n            if (includeStandby ||\r\n                (fetchPolicy !== \"standby\" &&\r\n                    fetchPolicy !== \"cache-only\")) {\r\n                observableQueryPromises.push(observableQuery.refetch());\r\n            }\r\n            _this.getQuery(queryId).setDiff(null);\r\n        });\r\n        this.broadcastQueries();\r\n        return Promise.all(observableQueryPromises);\r\n    };\r\n    QueryManager.prototype.setObservableQuery = function (observableQuery) {\r\n        this.getQuery(observableQuery.queryId).setObservableQuery(observableQuery);\r\n    };\r\n    QueryManager.prototype.startGraphQLSubscription = function (_a) {\r\n        var _this = this;\r\n        var query = _a.query, fetchPolicy = _a.fetchPolicy, errorPolicy = _a.errorPolicy, variables = _a.variables, _b = _a.context, context = _b === void 0 ? {} : _b;\r\n        query = this.transform(query).document;\r\n        variables = this.getVariables(query, variables);\r\n        var makeObservable = function (variables) {\r\n            return _this.getObservableFromLink(query, context, variables).map(function (result) {\r\n                if (fetchPolicy !== 'no-cache') {\r\n                    if (shouldWriteResult(result, errorPolicy)) {\r\n                        _this.cache.write({\r\n                            query: query,\r\n                            result: result.data,\r\n                            dataId: 'ROOT_SUBSCRIPTION',\r\n                            variables: variables,\r\n                        });\r\n                    }\r\n                    _this.broadcastQueries();\r\n                }\r\n                if (graphQLResultHasError(result)) {\r\n                    throw new ApolloError({\r\n                        graphQLErrors: result.errors,\r\n                    });\r\n                }\r\n                return result;\r\n            });\r\n        };\r\n        if (this.transform(query).hasClientExports) {\r\n            var observablePromise_1 = this.localState.addExportedVariables(query, variables, context).then(makeObservable);\r\n            return new Observable(function (observer) {\r\n                var sub = null;\r\n                observablePromise_1.then(function (observable) { return sub = observable.subscribe(observer); }, observer.error);\r\n                return function () { return sub && sub.unsubscribe(); };\r\n            });\r\n        }\r\n        return makeObservable(variables);\r\n    };\r\n    QueryManager.prototype.stopQuery = function (queryId) {\r\n        this.stopQueryNoBroadcast(queryId);\r\n        this.broadcastQueries();\r\n    };\r\n    QueryManager.prototype.stopQueryNoBroadcast = function (queryId) {\r\n        this.stopQueryInStoreNoBroadcast(queryId);\r\n        this.removeQuery(queryId);\r\n    };\r\n    QueryManager.prototype.removeQuery = function (queryId) {\r\n        this.fetchCancelFns.delete(queryId);\r\n        this.getQuery(queryId).stop();\r\n        this.queries.delete(queryId);\r\n    };\r\n    QueryManager.prototype.broadcastQueries = function () {\r\n        if (this.onBroadcast)\r\n            this.onBroadcast();\r\n        this.queries.forEach(function (info) { return info.notify(); });\r\n    };\r\n    QueryManager.prototype.getLocalState = function () {\r\n        return this.localState;\r\n    };\r\n    QueryManager.prototype.getObservableFromLink = function (query, context, variables, deduplication) {\r\n        var _this = this;\r\n        var _a;\r\n        if (deduplication === void 0) { deduplication = (_a = context === null || context === void 0 ? void 0 : context.queryDeduplication) !== null && _a !== void 0 ? _a : this.queryDeduplication; }\r\n        var observable;\r\n        var serverQuery = this.transform(query).serverQuery;\r\n        if (serverQuery) {\r\n            var _b = this, inFlightLinkObservables_1 = _b.inFlightLinkObservables, link = _b.link;\r\n            var operation = {\r\n                query: serverQuery,\r\n                variables: variables,\r\n                operationName: getOperationName(serverQuery) || void 0,\r\n                context: this.prepareContext(__assign(__assign({}, context), { forceFetch: !deduplication })),\r\n            };\r\n            context = operation.context;\r\n            if (deduplication) {\r\n                var byVariables_1 = inFlightLinkObservables_1.get(serverQuery) || new Map();\r\n                inFlightLinkObservables_1.set(serverQuery, byVariables_1);\r\n                var varJson_1 = canonicalStringify(variables);\r\n                observable = byVariables_1.get(varJson_1);\r\n                if (!observable) {\r\n                    var concast = new Concast([\r\n                        execute(link, operation)\r\n                    ]);\r\n                    byVariables_1.set(varJson_1, observable = concast);\r\n                    concast.cleanup(function () {\r\n                        if (byVariables_1.delete(varJson_1) &&\r\n                            byVariables_1.size < 1) {\r\n                            inFlightLinkObservables_1.delete(serverQuery);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                observable = new Concast([\r\n                    execute(link, operation)\r\n                ]);\r\n            }\r\n        }\r\n        else {\r\n            observable = new Concast([\r\n                Observable.of({ data: {} })\r\n            ]);\r\n            context = this.prepareContext(context);\r\n        }\r\n        var clientQuery = this.transform(query).clientQuery;\r\n        if (clientQuery) {\r\n            observable = asyncMap(observable, function (result) {\r\n                return _this.localState.runResolvers({\r\n                    document: clientQuery,\r\n                    remoteResult: result,\r\n                    context: context,\r\n                    variables: variables,\r\n                });\r\n            });\r\n        }\r\n        return observable;\r\n    };\r\n    QueryManager.prototype.getResultsFromLink = function (queryInfo, cacheWriteBehavior, options) {\r\n        var requestId = queryInfo.lastRequestId = this.generateRequestId();\r\n        return asyncMap(this.getObservableFromLink(queryInfo.document, options.context, options.variables), function (result) {\r\n            var hasErrors = isNonEmptyArray(result.errors);\r\n            if (requestId >= queryInfo.lastRequestId) {\r\n                if (hasErrors && options.errorPolicy === \"none\") {\r\n                    throw queryInfo.markError(new ApolloError({\r\n                        graphQLErrors: result.errors,\r\n                    }));\r\n                }\r\n                queryInfo.markResult(result, options, cacheWriteBehavior);\r\n                queryInfo.markReady();\r\n            }\r\n            var aqr = {\r\n                data: result.data,\r\n                loading: false,\r\n                networkStatus: queryInfo.networkStatus || NetworkStatus.ready,\r\n            };\r\n            if (hasErrors && options.errorPolicy !== \"ignore\") {\r\n                aqr.errors = result.errors;\r\n            }\r\n            return aqr;\r\n        }, function (networkError) {\r\n            var error = isApolloError(networkError)\r\n                ? networkError\r\n                : new ApolloError({ networkError: networkError });\r\n            if (requestId >= queryInfo.lastRequestId) {\r\n                queryInfo.markError(error);\r\n            }\r\n            throw error;\r\n        });\r\n    };\r\n    QueryManager.prototype.fetchQueryObservable = function (queryId, options, networkStatus) {\r\n        var _this = this;\r\n        if (networkStatus === void 0) { networkStatus = NetworkStatus.loading; }\r\n        var query = this.transform(options.query).document;\r\n        var variables = this.getVariables(query, options.variables);\r\n        var queryInfo = this.getQuery(queryId);\r\n        var _a = options.fetchPolicy, fetchPolicy = _a === void 0 ? \"cache-first\" : _a, _b = options.errorPolicy, errorPolicy = _b === void 0 ? \"none\" : _b, _c = options.returnPartialData, returnPartialData = _c === void 0 ? false : _c, _d = options.notifyOnNetworkStatusChange, notifyOnNetworkStatusChange = _d === void 0 ? false : _d, _e = options.context, context = _e === void 0 ? {} : _e;\r\n        var normalized = Object.assign({}, options, {\r\n            query: query,\r\n            variables: variables,\r\n            fetchPolicy: fetchPolicy,\r\n            errorPolicy: errorPolicy,\r\n            returnPartialData: returnPartialData,\r\n            notifyOnNetworkStatusChange: notifyOnNetworkStatusChange,\r\n            context: context,\r\n        });\r\n        var fromVariables = function (variables) {\r\n            normalized.variables = variables;\r\n            return _this.fetchQueryByPolicy(queryInfo, normalized, networkStatus);\r\n        };\r\n        this.fetchCancelFns.set(queryId, function (reason) {\r\n            setTimeout(function () { return concast.cancel(reason); });\r\n        });\r\n        var concast = new Concast(this.transform(normalized.query).hasClientExports\r\n            ? this.localState.addExportedVariables(normalized.query, normalized.variables, normalized.context).then(fromVariables)\r\n            : fromVariables(normalized.variables));\r\n        concast.cleanup(function () {\r\n            _this.fetchCancelFns.delete(queryId);\r\n            applyNextFetchPolicy(options);\r\n        });\r\n        return concast;\r\n    };\r\n    QueryManager.prototype.refetchQueries = function (_a) {\r\n        var _this = this;\r\n        var updateCache = _a.updateCache, include = _a.include, _b = _a.optimistic, optimistic = _b === void 0 ? false : _b, _c = _a.removeOptimistic, removeOptimistic = _c === void 0 ? optimistic ? makeUniqueId(\"refetchQueries\") : void 0 : _c, onQueryUpdated = _a.onQueryUpdated;\r\n        var includedQueriesById = new Map();\r\n        if (include) {\r\n            this.getObservableQueries(include).forEach(function (oq, queryId) {\r\n                includedQueriesById.set(queryId, {\r\n                    oq: oq,\r\n                    lastDiff: _this.getQuery(queryId).getDiff(),\r\n                });\r\n            });\r\n        }\r\n        var results = new Map;\r\n        if (updateCache) {\r\n            this.cache.batch({\r\n                update: updateCache,\r\n                optimistic: optimistic && removeOptimistic || false,\r\n                removeOptimistic: removeOptimistic,\r\n                onWatchUpdated: function (watch, diff, lastDiff) {\r\n                    var oq = watch.watcher instanceof QueryInfo &&\r\n                        watch.watcher.observableQuery;\r\n                    if (oq) {\r\n                        if (onQueryUpdated) {\r\n                            includedQueriesById.delete(oq.queryId);\r\n                            var result = onQueryUpdated(oq, diff, lastDiff);\r\n                            if (result === true) {\r\n                                result = oq.refetch();\r\n                            }\r\n                            if (result !== false) {\r\n                                results.set(oq, result);\r\n                            }\r\n                            return false;\r\n                        }\r\n                        if (onQueryUpdated !== null) {\r\n                            includedQueriesById.set(oq.queryId, { oq: oq, lastDiff: lastDiff, diff: diff });\r\n                        }\r\n                    }\r\n                },\r\n            });\r\n        }\r\n        if (includedQueriesById.size) {\r\n            includedQueriesById.forEach(function (_a, queryId) {\r\n                var oq = _a.oq, lastDiff = _a.lastDiff, diff = _a.diff;\r\n                var result;\r\n                if (onQueryUpdated) {\r\n                    if (!diff) {\r\n                        var info = oq[\"queryInfo\"];\r\n                        info.reset();\r\n                        diff = info.getDiff();\r\n                    }\r\n                    result = onQueryUpdated(oq, diff, lastDiff);\r\n                }\r\n                if (!onQueryUpdated || result === true) {\r\n                    result = oq.refetch();\r\n                }\r\n                if (result !== false) {\r\n                    results.set(oq, result);\r\n                }\r\n                if (queryId.indexOf(\"legacyOneTimeQuery\") >= 0) {\r\n                    _this.stopQueryNoBroadcast(queryId);\r\n                }\r\n            });\r\n        }\r\n        if (removeOptimistic) {\r\n            this.cache.removeOptimistic(removeOptimistic);\r\n        }\r\n        return results;\r\n    };\r\n    QueryManager.prototype.fetchQueryByPolicy = function (queryInfo, _a, networkStatus) {\r\n        var _this = this;\r\n        var query = _a.query, variables = _a.variables, fetchPolicy = _a.fetchPolicy, refetchWritePolicy = _a.refetchWritePolicy, errorPolicy = _a.errorPolicy, returnPartialData = _a.returnPartialData, context = _a.context, notifyOnNetworkStatusChange = _a.notifyOnNetworkStatusChange;\r\n        var oldNetworkStatus = queryInfo.networkStatus;\r\n        queryInfo.init({\r\n            document: query,\r\n            variables: variables,\r\n            networkStatus: networkStatus,\r\n        });\r\n        var readCache = function () { return queryInfo.getDiff(variables); };\r\n        var resultsFromCache = function (diff, networkStatus) {\r\n            if (networkStatus === void 0) { networkStatus = queryInfo.networkStatus || NetworkStatus.loading; }\r\n            var data = diff.result;\r\n            if (__DEV__ &&\r\n                !returnPartialData &&\r\n                !equal(data, {})) {\r\n                logMissingFieldErrors(diff.missing);\r\n            }\r\n            var fromData = function (data) { return Observable.of(__assign({ data: data, loading: isNetworkRequestInFlight(networkStatus), networkStatus: networkStatus }, (diff.complete ? null : { partial: true }))); };\r\n            if (data && _this.transform(query).hasForcedResolvers) {\r\n                return _this.localState.runResolvers({\r\n                    document: query,\r\n                    remoteResult: { data: data },\r\n                    context: context,\r\n                    variables: variables,\r\n                    onlyRunForcedResolvers: true,\r\n                }).then(function (resolved) { return fromData(resolved.data || void 0); });\r\n            }\r\n            return fromData(data);\r\n        };\r\n        var cacheWriteBehavior = fetchPolicy === \"no-cache\" ? 0 :\r\n            (networkStatus === NetworkStatus.refetch &&\r\n                refetchWritePolicy !== \"merge\") ? 1\r\n                : 2;\r\n        var resultsFromLink = function () {\r\n            return _this.getResultsFromLink(queryInfo, cacheWriteBehavior, {\r\n                variables: variables,\r\n                context: context,\r\n                fetchPolicy: fetchPolicy,\r\n                errorPolicy: errorPolicy,\r\n            });\r\n        };\r\n        var shouldNotify = notifyOnNetworkStatusChange &&\r\n            typeof oldNetworkStatus === \"number\" &&\r\n            oldNetworkStatus !== networkStatus &&\r\n            isNetworkRequestInFlight(networkStatus);\r\n        switch (fetchPolicy) {\r\n            default:\r\n            case \"cache-first\": {\r\n                var diff = readCache();\r\n                if (diff.complete) {\r\n                    return [\r\n                        resultsFromCache(diff, queryInfo.markReady()),\r\n                    ];\r\n                }\r\n                if (returnPartialData || shouldNotify) {\r\n                    return [\r\n                        resultsFromCache(diff),\r\n                        resultsFromLink(),\r\n                    ];\r\n                }\r\n                return [\r\n                    resultsFromLink(),\r\n                ];\r\n            }\r\n            case \"cache-and-network\": {\r\n                var diff = readCache();\r\n                if (diff.complete || returnPartialData || shouldNotify) {\r\n                    return [\r\n                        resultsFromCache(diff),\r\n                        resultsFromLink(),\r\n                    ];\r\n                }\r\n                return [\r\n                    resultsFromLink(),\r\n                ];\r\n            }\r\n            case \"cache-only\":\r\n                return [\r\n                    resultsFromCache(readCache(), queryInfo.markReady()),\r\n                ];\r\n            case \"network-only\":\r\n                if (shouldNotify) {\r\n                    return [\r\n                        resultsFromCache(readCache()),\r\n                        resultsFromLink(),\r\n                    ];\r\n                }\r\n                return [resultsFromLink()];\r\n            case \"no-cache\":\r\n                if (shouldNotify) {\r\n                    return [\r\n                        resultsFromCache(queryInfo.getDiff()),\r\n                        resultsFromLink(),\r\n                    ];\r\n                }\r\n                return [resultsFromLink()];\r\n            case \"standby\":\r\n                return [];\r\n        }\r\n    };\r\n    QueryManager.prototype.getQuery = function (queryId) {\r\n        if (queryId && !this.queries.has(queryId)) {\r\n            this.queries.set(queryId, new QueryInfo(this, queryId));\r\n        }\r\n        return this.queries.get(queryId);\r\n    };\r\n    QueryManager.prototype.prepareContext = function (context) {\r\n        if (context === void 0) { context = {}; }\r\n        var newContext = this.localState.prepareContext(context);\r\n        return __assign(__assign({}, newContext), { clientAwareness: this.clientAwareness });\r\n    };\r\n    return QueryManager;\r\n}());\r\nexport { QueryManager };\r\n","export var NetworkStatus;\r\n(function (NetworkStatus) {\r\n    NetworkStatus[NetworkStatus[\"loading\"] = 1] = \"loading\";\r\n    NetworkStatus[NetworkStatus[\"setVariables\"] = 2] = \"setVariables\";\r\n    NetworkStatus[NetworkStatus[\"fetchMore\"] = 3] = \"fetchMore\";\r\n    NetworkStatus[NetworkStatus[\"refetch\"] = 4] = \"refetch\";\r\n    NetworkStatus[NetworkStatus[\"poll\"] = 6] = \"poll\";\r\n    NetworkStatus[NetworkStatus[\"ready\"] = 7] = \"ready\";\r\n    NetworkStatus[NetworkStatus[\"error\"] = 8] = \"error\";\r\n})(NetworkStatus || (NetworkStatus = {}));\r\nexport function isNetworkRequestInFlight(networkStatus) {\r\n    return networkStatus ? networkStatus < 7 : false;\r\n}\r\n","import { __extends } from \"tslib\";\r\nimport \"../utilities/globals/index.js\";\r\nimport { isNonEmptyArray } from \"../utilities/index.js\";\r\nexport function isApolloError(err) {\r\n    return err.hasOwnProperty('graphQLErrors');\r\n}\r\nvar generateErrorMessage = function (err) {\r\n    var message = '';\r\n    if (isNonEmptyArray(err.graphQLErrors) || isNonEmptyArray(err.clientErrors)) {\r\n        var errors = (err.graphQLErrors || [])\r\n            .concat(err.clientErrors || []);\r\n        errors.forEach(function (error) {\r\n            var errorMessage = error\r\n                ? error.message\r\n                : 'Error message not found.';\r\n            message += errorMessage + \"\\n\";\r\n        });\r\n    }\r\n    if (err.networkError) {\r\n        message += err.networkError.message + \"\\n\";\r\n    }\r\n    message = message.replace(/\\n$/, '');\r\n    return message;\r\n};\r\nvar ApolloError = (function (_super) {\r\n    __extends(ApolloError, _super);\r\n    function ApolloError(_a) {\r\n        var graphQLErrors = _a.graphQLErrors, clientErrors = _a.clientErrors, networkError = _a.networkError, errorMessage = _a.errorMessage, extraInfo = _a.extraInfo;\r\n        var _this = _super.call(this, errorMessage) || this;\r\n        _this.graphQLErrors = graphQLErrors || [];\r\n        _this.clientErrors = clientErrors || [];\r\n        _this.networkError = networkError || null;\r\n        _this.message = errorMessage || generateErrorMessage(_this);\r\n        _this.extraInfo = extraInfo;\r\n        _this.__proto__ = ApolloError.prototype;\r\n        return _this;\r\n    }\r\n    return ApolloError;\r\n}(Error));\r\nexport { ApolloError };\r\n","import { __extends } from \"tslib\";\r\nimport { InvariantError, invariant } from \"../../utilities/globals/index.js\";\r\nimport { Observable } from \"../../utilities/index.js\";\r\nimport { validateOperation, createOperation, transformOperation, } from \"../utils/index.js\";\r\nfunction passthrough(op, forward) {\r\n    return (forward ? forward(op) : Observable.of());\r\n}\r\nfunction toLink(handler) {\r\n    return typeof handler === 'function' ? new ApolloLink(handler) : handler;\r\n}\r\nfunction isTerminating(link) {\r\n    return link.request.length <= 1;\r\n}\r\nvar LinkError = (function (_super) {\r\n    __extends(LinkError, _super);\r\n    function LinkError(message, link) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.link = link;\r\n        return _this;\r\n    }\r\n    return LinkError;\r\n}(Error));\r\nvar ApolloLink = (function () {\r\n    function ApolloLink(request) {\r\n        if (request)\r\n            this.request = request;\r\n    }\r\n    ApolloLink.empty = function () {\r\n        return new ApolloLink(function () { return Observable.of(); });\r\n    };\r\n    ApolloLink.from = function (links) {\r\n        if (links.length === 0)\r\n            return ApolloLink.empty();\r\n        return links.map(toLink).reduce(function (x, y) { return x.concat(y); });\r\n    };\r\n    ApolloLink.split = function (test, left, right) {\r\n        var leftLink = toLink(left);\r\n        var rightLink = toLink(right || new ApolloLink(passthrough));\r\n        if (isTerminating(leftLink) && isTerminating(rightLink)) {\r\n            return new ApolloLink(function (operation) {\r\n                return test(operation)\r\n                    ? leftLink.request(operation) || Observable.of()\r\n                    : rightLink.request(operation) || Observable.of();\r\n            });\r\n        }\r\n        else {\r\n            return new ApolloLink(function (operation, forward) {\r\n                return test(operation)\r\n                    ? leftLink.request(operation, forward) || Observable.of()\r\n                    : rightLink.request(operation, forward) || Observable.of();\r\n            });\r\n        }\r\n    };\r\n    ApolloLink.execute = function (link, operation) {\r\n        return (link.request(createOperation(operation.context, transformOperation(validateOperation(operation)))) || Observable.of());\r\n    };\r\n    ApolloLink.concat = function (first, second) {\r\n        var firstLink = toLink(first);\r\n        if (isTerminating(firstLink)) {\r\n            __DEV__ && invariant.warn(new LinkError(\"You are calling concat on a terminating link, which will have no effect\", firstLink));\r\n            return firstLink;\r\n        }\r\n        var nextLink = toLink(second);\r\n        if (isTerminating(nextLink)) {\r\n            return new ApolloLink(function (operation) {\r\n                return firstLink.request(operation, function (op) { return nextLink.request(op) || Observable.of(); }) || Observable.of();\r\n            });\r\n        }\r\n        else {\r\n            return new ApolloLink(function (operation, forward) {\r\n                return (firstLink.request(operation, function (op) {\r\n                    return nextLink.request(op, forward) || Observable.of();\r\n                }) || Observable.of());\r\n            });\r\n        }\r\n    };\r\n    ApolloLink.prototype.split = function (test, left, right) {\r\n        return this.concat(ApolloLink.split(test, left, right || new ApolloLink(passthrough)));\r\n    };\r\n    ApolloLink.prototype.concat = function (next) {\r\n        return ApolloLink.concat(this, next);\r\n    };\r\n    ApolloLink.prototype.request = function (operation, forward) {\r\n        throw __DEV__ ? new InvariantError('request is not implemented') : new InvariantError(21);\r\n    };\r\n    ApolloLink.prototype.onError = function (error, observer) {\r\n        if (observer && observer.error) {\r\n            observer.error(error);\r\n            return false;\r\n        }\r\n        throw error;\r\n    };\r\n    ApolloLink.prototype.setOnError = function (fn) {\r\n        this.onError = fn;\r\n        return this;\r\n    };\r\n    return ApolloLink;\r\n}());\r\nexport { ApolloLink };\r\n","import { ApolloLink } from \"./ApolloLink.js\";\r\nexport var execute = ApolloLink.execute;\r\n","import { __extends } from \"tslib\";\r\nimport { ApolloLink } from \"../core/index.js\";\r\nimport { createHttpLink } from \"./createHttpLink.js\";\r\nvar HttpLink = (function (_super) {\r\n    __extends(HttpLink, _super);\r\n    function HttpLink(options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, createHttpLink(options).request) || this;\r\n        _this.options = options;\r\n        return _this;\r\n    }\r\n    return HttpLink;\r\n}(ApolloLink));\r\nexport { HttpLink };\r\n","import { InvariantError } from \"../../utilities/globals/index.js\";\r\nexport var checkFetcher = function (fetcher) {\r\n    if (!fetcher && typeof fetch === 'undefined') {\r\n        throw __DEV__ ? new InvariantError(\"\\n\\\"fetch\\\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\\n\\nimport fetch from 'cross-fetch';\\nimport { ApolloClient, HttpLink } from '@apollo/client';\\nconst client = new ApolloClient({\\n  link: new HttpLink({ uri: '/graphql', fetch })\\n});\\n    \") : new InvariantError(22);\r\n    }\r\n};\r\n","import { __assign, __rest } from \"tslib\";\r\nimport \"../../utilities/globals/index.js\";\r\nimport { visit } from 'graphql';\r\nimport { ApolloLink } from \"../core/index.js\";\r\nimport { Observable } from \"../../utilities/index.js\";\r\nimport { serializeFetchParameter } from \"./serializeFetchParameter.js\";\r\nimport { selectURI } from \"./selectURI.js\";\r\nimport { parseAndCheckHttpResponse } from \"./parseAndCheckHttpResponse.js\";\r\nimport { checkFetcher } from \"./checkFetcher.js\";\r\nimport { selectHttpOptionsAndBody, fallbackHttpConfig } from \"./selectHttpOptionsAndBody.js\";\r\nimport { createSignalIfSupported } from \"./createSignalIfSupported.js\";\r\nimport { rewriteURIForGET } from \"./rewriteURIForGET.js\";\r\nimport { fromError } from \"../utils/index.js\";\r\nimport { maybe } from \"../../utilities/index.js\";\r\nvar backupFetch = maybe(function () { return fetch; });\r\nexport var createHttpLink = function (linkOptions) {\r\n    if (linkOptions === void 0) { linkOptions = {}; }\r\n    var _a = linkOptions.uri, uri = _a === void 0 ? '/graphql' : _a, preferredFetch = linkOptions.fetch, includeExtensions = linkOptions.includeExtensions, useGETForQueries = linkOptions.useGETForQueries, _b = linkOptions.includeUnusedVariables, includeUnusedVariables = _b === void 0 ? false : _b, requestOptions = __rest(linkOptions, [\"uri\", \"fetch\", \"includeExtensions\", \"useGETForQueries\", \"includeUnusedVariables\"]);\r\n    if (__DEV__) {\r\n        checkFetcher(preferredFetch || backupFetch);\r\n    }\r\n    var linkConfig = {\r\n        http: { includeExtensions: includeExtensions },\r\n        options: requestOptions.fetchOptions,\r\n        credentials: requestOptions.credentials,\r\n        headers: requestOptions.headers,\r\n    };\r\n    return new ApolloLink(function (operation) {\r\n        var chosenURI = selectURI(operation, uri);\r\n        var context = operation.getContext();\r\n        var clientAwarenessHeaders = {};\r\n        if (context.clientAwareness) {\r\n            var _a = context.clientAwareness, name_1 = _a.name, version = _a.version;\r\n            if (name_1) {\r\n                clientAwarenessHeaders['apollographql-client-name'] = name_1;\r\n            }\r\n            if (version) {\r\n                clientAwarenessHeaders['apollographql-client-version'] = version;\r\n            }\r\n        }\r\n        var contextHeaders = __assign(__assign({}, clientAwarenessHeaders), context.headers);\r\n        var contextConfig = {\r\n            http: context.http,\r\n            options: context.fetchOptions,\r\n            credentials: context.credentials,\r\n            headers: contextHeaders,\r\n        };\r\n        var _b = selectHttpOptionsAndBody(operation, fallbackHttpConfig, linkConfig, contextConfig), options = _b.options, body = _b.body;\r\n        if (body.variables && !includeUnusedVariables) {\r\n            var unusedNames_1 = new Set(Object.keys(body.variables));\r\n            visit(operation.query, {\r\n                Variable: function (node, _key, parent) {\r\n                    if (parent && parent.kind !== 'VariableDefinition') {\r\n                        unusedNames_1.delete(node.name.value);\r\n                    }\r\n                },\r\n            });\r\n            if (unusedNames_1.size) {\r\n                body.variables = __assign({}, body.variables);\r\n                unusedNames_1.forEach(function (name) {\r\n                    delete body.variables[name];\r\n                });\r\n            }\r\n        }\r\n        var controller;\r\n        if (!options.signal) {\r\n            var _c = createSignalIfSupported(), _controller = _c.controller, signal = _c.signal;\r\n            controller = _controller;\r\n            if (controller)\r\n                options.signal = signal;\r\n        }\r\n        var definitionIsMutation = function (d) {\r\n            return d.kind === 'OperationDefinition' && d.operation === 'mutation';\r\n        };\r\n        if (useGETForQueries &&\r\n            !operation.query.definitions.some(definitionIsMutation)) {\r\n            options.method = 'GET';\r\n        }\r\n        if (options.method === 'GET') {\r\n            var _d = rewriteURIForGET(chosenURI, body), newURI = _d.newURI, parseError = _d.parseError;\r\n            if (parseError) {\r\n                return fromError(parseError);\r\n            }\r\n            chosenURI = newURI;\r\n        }\r\n        else {\r\n            try {\r\n                options.body = serializeFetchParameter(body, 'Payload');\r\n            }\r\n            catch (parseError) {\r\n                return fromError(parseError);\r\n            }\r\n        }\r\n        return new Observable(function (observer) {\r\n            var currentFetch = preferredFetch || maybe(function () { return fetch; }) || backupFetch;\r\n            currentFetch(chosenURI, options)\r\n                .then(function (response) {\r\n                operation.setContext({ response: response });\r\n                return response;\r\n            })\r\n                .then(parseAndCheckHttpResponse(operation))\r\n                .then(function (result) {\r\n                observer.next(result);\r\n                observer.complete();\r\n                return result;\r\n            })\r\n                .catch(function (err) {\r\n                if (err.name === 'AbortError')\r\n                    return;\r\n                if (err.result && err.result.errors && err.result.data) {\r\n                    observer.next(err.result);\r\n                }\r\n                observer.error(err);\r\n            });\r\n            return function () {\r\n                if (controller)\r\n                    controller.abort();\r\n            };\r\n        });\r\n    });\r\n};\r\n","export var createSignalIfSupported = function () {\r\n    if (typeof AbortController === 'undefined')\r\n        return { controller: false, signal: false };\r\n    var controller = new AbortController();\r\n    var signal = controller.signal;\r\n    return { controller: controller, signal: signal };\r\n};\r\n","import { throwServerError } from \"../utils/index.js\";\r\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\nexport function parseAndCheckHttpResponse(operations) {\r\n    return function (response) { return response\r\n        .text()\r\n        .then(function (bodyText) {\r\n        try {\r\n            return JSON.parse(bodyText);\r\n        }\r\n        catch (err) {\r\n            var parseError = err;\r\n            parseError.name = 'ServerParseError';\r\n            parseError.response = response;\r\n            parseError.statusCode = response.status;\r\n            parseError.bodyText = bodyText;\r\n            throw parseError;\r\n        }\r\n    })\r\n        .then(function (result) {\r\n        if (response.status >= 300) {\r\n            throwServerError(response, result, \"Response not successful: Received status code \" + response.status);\r\n        }\r\n        if (!Array.isArray(result) &&\r\n            !hasOwnProperty.call(result, 'data') &&\r\n            !hasOwnProperty.call(result, 'errors')) {\r\n            throwServerError(response, result, \"Server response was missing for query '\" + (Array.isArray(operations)\r\n                ? operations.map(function (op) { return op.operationName; })\r\n                : operations.operationName) + \"'.\");\r\n        }\r\n        return result;\r\n    }); };\r\n}\r\n","import { serializeFetchParameter } from \"./serializeFetchParameter.js\";\r\nexport function rewriteURIForGET(chosenURI, body) {\r\n    var queryParams = [];\r\n    var addQueryParam = function (key, value) {\r\n        queryParams.push(key + \"=\" + encodeURIComponent(value));\r\n    };\r\n    if ('query' in body) {\r\n        addQueryParam('query', body.query);\r\n    }\r\n    if (body.operationName) {\r\n        addQueryParam('operationName', body.operationName);\r\n    }\r\n    if (body.variables) {\r\n        var serializedVariables = void 0;\r\n        try {\r\n            serializedVariables = serializeFetchParameter(body.variables, 'Variables map');\r\n        }\r\n        catch (parseError) {\r\n            return { parseError: parseError };\r\n        }\r\n        addQueryParam('variables', serializedVariables);\r\n    }\r\n    if (body.extensions) {\r\n        var serializedExtensions = void 0;\r\n        try {\r\n            serializedExtensions = serializeFetchParameter(body.extensions, 'Extensions map');\r\n        }\r\n        catch (parseError) {\r\n            return { parseError: parseError };\r\n        }\r\n        addQueryParam('extensions', serializedExtensions);\r\n    }\r\n    var fragment = '', preFragment = chosenURI;\r\n    var fragmentStart = chosenURI.indexOf('#');\r\n    if (fragmentStart !== -1) {\r\n        fragment = chosenURI.substr(fragmentStart);\r\n        preFragment = chosenURI.substr(0, fragmentStart);\r\n    }\r\n    var queryParamsPrefix = preFragment.indexOf('?') === -1 ? '?' : '&';\r\n    var newURI = preFragment + queryParamsPrefix + queryParams.join('&') + fragment;\r\n    return { newURI: newURI };\r\n}\r\n","import { __assign } from \"tslib\";\r\nimport { print } from 'graphql';\r\nvar defaultHttpOptions = {\r\n    includeQuery: true,\r\n    includeExtensions: false,\r\n};\r\nvar defaultHeaders = {\r\n    accept: '*/*',\r\n    'content-type': 'application/json',\r\n};\r\nvar defaultOptions = {\r\n    method: 'POST',\r\n};\r\nexport var fallbackHttpConfig = {\r\n    http: defaultHttpOptions,\r\n    headers: defaultHeaders,\r\n    options: defaultOptions,\r\n};\r\nexport var selectHttpOptionsAndBody = function (operation, fallbackConfig) {\r\n    var configs = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        configs[_i - 2] = arguments[_i];\r\n    }\r\n    var options = __assign(__assign({}, fallbackConfig.options), { headers: fallbackConfig.headers, credentials: fallbackConfig.credentials });\r\n    var http = fallbackConfig.http || {};\r\n    configs.forEach(function (config) {\r\n        options = __assign(__assign(__assign({}, options), config.options), { headers: __assign(__assign({}, options.headers), headersToLowerCase(config.headers)) });\r\n        if (config.credentials)\r\n            options.credentials = config.credentials;\r\n        http = __assign(__assign({}, http), config.http);\r\n    });\r\n    var operationName = operation.operationName, extensions = operation.extensions, variables = operation.variables, query = operation.query;\r\n    var body = { operationName: operationName, variables: variables };\r\n    if (http.includeExtensions)\r\n        body.extensions = extensions;\r\n    if (http.includeQuery)\r\n        body.query = print(query);\r\n    return {\r\n        options: options,\r\n        body: body,\r\n    };\r\n};\r\nfunction headersToLowerCase(headers) {\r\n    if (headers) {\r\n        var normalized_1 = Object.create(null);\r\n        Object.keys(Object(headers)).forEach(function (name) {\r\n            normalized_1[name.toLowerCase()] = headers[name];\r\n        });\r\n        return normalized_1;\r\n    }\r\n    return headers;\r\n}\r\n","export var selectURI = function (operation, fallbackURI) {\r\n    var context = operation.getContext();\r\n    var contextURI = context.uri;\r\n    if (contextURI) {\r\n        return contextURI;\r\n    }\r\n    else if (typeof fallbackURI === 'function') {\r\n        return fallbackURI(operation);\r\n    }\r\n    else {\r\n        return fallbackURI || '/graphql';\r\n    }\r\n};\r\n","import { InvariantError } from \"../../utilities/globals/index.js\";\r\nexport var serializeFetchParameter = function (p, label) {\r\n    var serialized;\r\n    try {\r\n        serialized = JSON.stringify(p);\r\n    }\r\n    catch (e) {\r\n        var parseError = __DEV__ ? new InvariantError(\"Network request failed. \" + label + \" is not serializable: \" + e.message) : new InvariantError(23);\r\n        parseError.parseError = e;\r\n        throw parseError;\r\n    }\r\n    return serialized;\r\n};\r\n","import { __assign } from \"tslib\";\r\nexport function createOperation(starting, operation) {\r\n    var context = __assign({}, starting);\r\n    var setContext = function (next) {\r\n        if (typeof next === 'function') {\r\n            context = __assign(__assign({}, context), next(context));\r\n        }\r\n        else {\r\n            context = __assign(__assign({}, context), next);\r\n        }\r\n    };\r\n    var getContext = function () { return (__assign({}, context)); };\r\n    Object.defineProperty(operation, 'setContext', {\r\n        enumerable: false,\r\n        value: setContext,\r\n    });\r\n    Object.defineProperty(operation, 'getContext', {\r\n        enumerable: false,\r\n        value: getContext,\r\n    });\r\n    return operation;\r\n}\r\n","import { Observable } from \"../../utilities/index.js\";\r\nexport function fromError(errorValue) {\r\n    return new Observable(function (observer) {\r\n        observer.error(errorValue);\r\n    });\r\n}\r\n","export var throwServerError = function (response, result, message) {\r\n    var error = new Error(message);\r\n    error.name = 'ServerError';\r\n    error.response = response;\r\n    error.statusCode = response.status;\r\n    error.result = result;\r\n    throw error;\r\n};\r\n","import { getOperationName } from \"../../utilities/index.js\";\r\nexport function transformOperation(operation) {\r\n    var transformedOperation = {\r\n        variables: operation.variables || {},\r\n        extensions: operation.extensions || {},\r\n        operationName: operation.operationName,\r\n        query: operation.query,\r\n    };\r\n    if (!transformedOperation.operationName) {\r\n        transformedOperation.operationName =\r\n            typeof transformedOperation.query !== 'string'\r\n                ? getOperationName(transformedOperation.query) || undefined\r\n                : '';\r\n    }\r\n    return transformedOperation;\r\n}\r\n","import { InvariantError } from \"../../utilities/globals/index.js\";\r\nexport function validateOperation(operation) {\r\n    var OPERATION_FIELDS = [\r\n        'query',\r\n        'operationName',\r\n        'variables',\r\n        'extensions',\r\n        'context',\r\n    ];\r\n    for (var _i = 0, _a = Object.keys(operation); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        if (OPERATION_FIELDS.indexOf(key) < 0) {\r\n            throw __DEV__ ? new InvariantError(\"illegal argument: \" + key) : new InvariantError(26);\r\n        }\r\n    }\r\n    return operation;\r\n}\r\n","export function isNonEmptyArray(value) {\r\n    return Array.isArray(value) && value.length > 0;\r\n}\r\n","export var canUseWeakMap = typeof WeakMap === 'function' && !(typeof navigator === 'object' &&\r\n    navigator.product === 'ReactNative');\r\nexport var canUseWeakSet = typeof WeakSet === 'function';\r\n","var toString = Object.prototype.toString;\r\nexport function cloneDeep(value) {\r\n    return cloneDeepHelper(value);\r\n}\r\nfunction cloneDeepHelper(val, seen) {\r\n    switch (toString.call(val)) {\r\n        case \"[object Array]\": {\r\n            seen = seen || new Map;\r\n            if (seen.has(val))\r\n                return seen.get(val);\r\n            var copy_1 = val.slice(0);\r\n            seen.set(val, copy_1);\r\n            copy_1.forEach(function (child, i) {\r\n                copy_1[i] = cloneDeepHelper(child, seen);\r\n            });\r\n            return copy_1;\r\n        }\r\n        case \"[object Object]\": {\r\n            seen = seen || new Map;\r\n            if (seen.has(val))\r\n                return seen.get(val);\r\n            var copy_2 = Object.create(Object.getPrototypeOf(val));\r\n            seen.set(val, copy_2);\r\n            Object.keys(val).forEach(function (key) {\r\n                copy_2[key] = cloneDeepHelper(val[key], seen);\r\n            });\r\n            return copy_2;\r\n        }\r\n        default:\r\n            return val;\r\n    }\r\n}\r\n","export function compact() {\r\n    var objects = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        objects[_i] = arguments[_i];\r\n    }\r\n    var result = Object.create(null);\r\n    objects.forEach(function (obj) {\r\n        if (!obj)\r\n            return;\r\n        Object.keys(obj).forEach(function (key) {\r\n            var value = obj[key];\r\n            if (value !== void 0) {\r\n                result[key] = value;\r\n            }\r\n        });\r\n    });\r\n    return result;\r\n}\r\n","export function graphQLResultHasError(result) {\r\n    return (result.errors && result.errors.length > 0) || false;\r\n}\r\n","export function filterInPlace(array, test, context) {\r\n    var target = 0;\r\n    array.forEach(function (elem, i) {\r\n        if (test.call(this, elem, i, array)) {\r\n            array[target++] = elem;\r\n        }\r\n    }, context);\r\n    array.length = target;\r\n    return array;\r\n}\r\n","var prefixCounts = new Map();\r\nexport function makeUniqueId(prefix) {\r\n    var count = prefixCounts.get(prefix) || 1;\r\n    prefixCounts.set(prefix, count + 1);\r\n    return prefix + \":\" + count + \":\" + Math.random().toString(36).slice(2);\r\n}\r\n","import { __assign, __spreadArray } from \"tslib\";\r\nimport { isNonNullObject } from \"./objects.js\";\r\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\nexport function mergeDeep() {\r\n    var sources = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        sources[_i] = arguments[_i];\r\n    }\r\n    return mergeDeepArray(sources);\r\n}\r\nexport function mergeDeepArray(sources) {\r\n    var target = sources[0] || {};\r\n    var count = sources.length;\r\n    if (count > 1) {\r\n        var merger = new DeepMerger();\r\n        for (var i = 1; i < count; ++i) {\r\n            target = merger.merge(target, sources[i]);\r\n        }\r\n    }\r\n    return target;\r\n}\r\nvar defaultReconciler = function (target, source, property) {\r\n    return this.merge(target[property], source[property]);\r\n};\r\nvar DeepMerger = (function () {\r\n    function DeepMerger(reconciler) {\r\n        if (reconciler === void 0) { reconciler = defaultReconciler; }\r\n        this.reconciler = reconciler;\r\n        this.isObject = isNonNullObject;\r\n        this.pastCopies = new Set();\r\n    }\r\n    DeepMerger.prototype.merge = function (target, source) {\r\n        var _this = this;\r\n        var context = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            context[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNonNullObject(source) && isNonNullObject(target)) {\r\n            Object.keys(source).forEach(function (sourceKey) {\r\n                if (hasOwnProperty.call(target, sourceKey)) {\r\n                    var targetValue = target[sourceKey];\r\n                    if (source[sourceKey] !== targetValue) {\r\n                        var result = _this.reconciler.apply(_this, __spreadArray([target, source, sourceKey], context, false));\r\n                        if (result !== targetValue) {\r\n                            target = _this.shallowCopyForMerge(target);\r\n                            target[sourceKey] = result;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    target = _this.shallowCopyForMerge(target);\r\n                    target[sourceKey] = source[sourceKey];\r\n                }\r\n            });\r\n            return target;\r\n        }\r\n        return source;\r\n    };\r\n    DeepMerger.prototype.shallowCopyForMerge = function (value) {\r\n        if (isNonNullObject(value) && !this.pastCopies.has(value)) {\r\n            if (Array.isArray(value)) {\r\n                value = value.slice(0);\r\n            }\r\n            else {\r\n                value = __assign({ __proto__: Object.getPrototypeOf(value) }, value);\r\n            }\r\n            this.pastCopies.add(value);\r\n        }\r\n        return value;\r\n    };\r\n    return DeepMerger;\r\n}());\r\nexport { DeepMerger };\r\n","export function isNonNullObject(obj) {\r\n    return obj !== null && typeof obj === 'object';\r\n}\r\n","import global from \"./global.js\";\r\nimport { maybe } from \"./maybe.js\";\r\nvar __ = \"__\";\r\nvar GLOBAL_KEY = [__, __].join(\"DEV\");\r\nfunction getDEV() {\r\n    try {\r\n        return Boolean(__DEV__);\r\n    }\r\n    catch (_a) {\r\n        Object.defineProperty(global, GLOBAL_KEY, {\r\n            value: maybe(function () { return process.env.NODE_ENV; }) !== \"production\",\r\n            enumerable: false,\r\n            configurable: true,\r\n            writable: true,\r\n        });\r\n        return global[GLOBAL_KEY];\r\n    }\r\n}\r\nexport default getDEV();\r\n","import { maybe } from \"./maybe.js\";\r\nexport default (maybe(function () { return globalThis; }) ||\r\n    maybe(function () { return window; }) ||\r\n    maybe(function () { return self; }) ||\r\n    maybe(function () { return global; }) ||\r\n    maybe(function () { return Function(\"return this\")(); }));\r\n","import { remove } from 'ts-invariant/process';\r\nimport { isType } from 'graphql';\r\nexport function removeTemporaryGlobals() {\r\n    isType(null);\r\n    return remove();\r\n}\r\n","import { invariant, InvariantError } from \"ts-invariant\";\r\nimport DEV from \"./DEV.js\";\r\nexport { DEV };\r\nexport function checkDEV() {\r\n    __DEV__ ? invariant(\"boolean\" === typeof DEV, DEV) : invariant(\"boolean\" === typeof DEV, 38);\r\n}\r\nimport { removeTemporaryGlobals } from \"./graphql.js\";\r\nremoveTemporaryGlobals();\r\nexport { maybe } from \"./maybe.js\";\r\nexport { default as global } from \"./global.js\";\r\nexport { invariant, InvariantError };\r\ncheckDEV();\r\n","export function maybe(thunk) {\r\n    try {\r\n        return thunk();\r\n    }\r\n    catch (_a) { }\r\n}\r\n","import { invariant } from \"../globals/index.js\";\r\nimport { visit, } from 'graphql';\r\nexport function shouldInclude(_a, variables) {\r\n    var directives = _a.directives;\r\n    if (!directives || !directives.length) {\r\n        return true;\r\n    }\r\n    return getInclusionDirectives(directives).every(function (_a) {\r\n        var directive = _a.directive, ifArgument = _a.ifArgument;\r\n        var evaledValue = false;\r\n        if (ifArgument.value.kind === 'Variable') {\r\n            evaledValue = variables && variables[ifArgument.value.name.value];\r\n            __DEV__ ? invariant(evaledValue !== void 0, \"Invalid variable referenced in @\" + directive.name.value + \" directive.\") : invariant(evaledValue !== void 0, 39);\r\n        }\r\n        else {\r\n            evaledValue = ifArgument.value.value;\r\n        }\r\n        return directive.name.value === 'skip' ? !evaledValue : evaledValue;\r\n    });\r\n}\r\nexport function getDirectiveNames(root) {\r\n    var names = [];\r\n    visit(root, {\r\n        Directive: function (node) {\r\n            names.push(node.name.value);\r\n        },\r\n    });\r\n    return names;\r\n}\r\nexport function hasDirectives(names, root) {\r\n    return getDirectiveNames(root).some(function (name) { return names.indexOf(name) > -1; });\r\n}\r\nexport function hasClientExports(document) {\r\n    return (document &&\r\n        hasDirectives(['client'], document) &&\r\n        hasDirectives(['export'], document));\r\n}\r\nfunction isInclusionDirective(_a) {\r\n    var value = _a.name.value;\r\n    return value === 'skip' || value === 'include';\r\n}\r\nexport function getInclusionDirectives(directives) {\r\n    var result = [];\r\n    if (directives && directives.length) {\r\n        directives.forEach(function (directive) {\r\n            if (!isInclusionDirective(directive))\r\n                return;\r\n            var directiveArguments = directive.arguments;\r\n            var directiveName = directive.name.value;\r\n            __DEV__ ? invariant(directiveArguments && directiveArguments.length === 1, \"Incorrect number of arguments for the @\" + directiveName + \" directive.\") : invariant(directiveArguments && directiveArguments.length === 1, 40);\r\n            var ifArgument = directiveArguments[0];\r\n            __DEV__ ? invariant(ifArgument.name && ifArgument.name.value === 'if', \"Invalid argument for the @\" + directiveName + \" directive.\") : invariant(ifArgument.name && ifArgument.name.value === 'if', 41);\r\n            var ifValue = ifArgument.value;\r\n            __DEV__ ? invariant(ifValue &&\r\n                (ifValue.kind === 'Variable' || ifValue.kind === 'BooleanValue'), \"Argument for the @\" + directiveName + \" directive must be a variable or a boolean value.\") : invariant(ifValue &&\r\n                (ifValue.kind === 'Variable' || ifValue.kind === 'BooleanValue'), 42);\r\n            result.push({ directive: directive, ifArgument: ifArgument });\r\n        });\r\n    }\r\n    return result;\r\n}\r\n","import { __assign, __spreadArray } from \"tslib\";\r\nimport { invariant, InvariantError } from \"../globals/index.js\";\r\nexport function getFragmentQueryDocument(document, fragmentName) {\r\n    var actualFragmentName = fragmentName;\r\n    var fragments = [];\r\n    document.definitions.forEach(function (definition) {\r\n        if (definition.kind === 'OperationDefinition') {\r\n            throw __DEV__ ? new InvariantError(\"Found a \" + definition.operation + \" operation\" + (definition.name ? \" named '\" + definition.name.value + \"'\" : '') + \". \" +\r\n                'No operations are allowed when using a fragment as a query. Only fragments are allowed.') : new InvariantError(43);\r\n        }\r\n        if (definition.kind === 'FragmentDefinition') {\r\n            fragments.push(definition);\r\n        }\r\n    });\r\n    if (typeof actualFragmentName === 'undefined') {\r\n        __DEV__ ? invariant(fragments.length === 1, \"Found \" + fragments.length + \" fragments. `fragmentName` must be provided when there is not exactly 1 fragment.\") : invariant(fragments.length === 1, 44);\r\n        actualFragmentName = fragments[0].name.value;\r\n    }\r\n    var query = __assign(__assign({}, document), { definitions: __spreadArray([\r\n            {\r\n                kind: 'OperationDefinition',\r\n                operation: 'query',\r\n                selectionSet: {\r\n                    kind: 'SelectionSet',\r\n                    selections: [\r\n                        {\r\n                            kind: 'FragmentSpread',\r\n                            name: {\r\n                                kind: 'Name',\r\n                                value: actualFragmentName,\r\n                            },\r\n                        },\r\n                    ],\r\n                },\r\n            }\r\n        ], document.definitions, true) });\r\n    return query;\r\n}\r\nexport function createFragmentMap(fragments) {\r\n    if (fragments === void 0) { fragments = []; }\r\n    var symTable = {};\r\n    fragments.forEach(function (fragment) {\r\n        symTable[fragment.name.value] = fragment;\r\n    });\r\n    return symTable;\r\n}\r\nexport function getFragmentFromSelection(selection, fragmentMap) {\r\n    switch (selection.kind) {\r\n        case 'InlineFragment':\r\n            return selection;\r\n        case 'FragmentSpread': {\r\n            var fragment = fragmentMap && fragmentMap[selection.name.value];\r\n            __DEV__ ? invariant(fragment, \"No fragment named \" + selection.name.value + \".\") : invariant(fragment, 45);\r\n            return fragment;\r\n        }\r\n        default:\r\n            return null;\r\n    }\r\n}\r\n","import { invariant, InvariantError } from \"../globals/index.js\";\r\nimport { valueToObjectRepresentation } from \"./storeUtils.js\";\r\nexport function checkDocument(doc) {\r\n    __DEV__ ? invariant(doc && doc.kind === 'Document', \"Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a \\\"gql\\\" tag? http://docs.apollostack.com/apollo-client/core.html#gql\") : invariant(doc && doc.kind === 'Document', 46);\r\n    var operations = doc.definitions\r\n        .filter(function (d) { return d.kind !== 'FragmentDefinition'; })\r\n        .map(function (definition) {\r\n        if (definition.kind !== 'OperationDefinition') {\r\n            throw __DEV__ ? new InvariantError(\"Schema type definitions not allowed in queries. Found: \\\"\" + definition.kind + \"\\\"\") : new InvariantError(47);\r\n        }\r\n        return definition;\r\n    });\r\n    __DEV__ ? invariant(operations.length <= 1, \"Ambiguous GraphQL document: contains \" + operations.length + \" operations\") : invariant(operations.length <= 1, 48);\r\n    return doc;\r\n}\r\nexport function getOperationDefinition(doc) {\r\n    checkDocument(doc);\r\n    return doc.definitions.filter(function (definition) { return definition.kind === 'OperationDefinition'; })[0];\r\n}\r\nexport function getOperationName(doc) {\r\n    return (doc.definitions\r\n        .filter(function (definition) {\r\n        return definition.kind === 'OperationDefinition' && definition.name;\r\n    })\r\n        .map(function (x) { return x.name.value; })[0] || null);\r\n}\r\nexport function getFragmentDefinitions(doc) {\r\n    return doc.definitions.filter(function (definition) { return definition.kind === 'FragmentDefinition'; });\r\n}\r\nexport function getQueryDefinition(doc) {\r\n    var queryDef = getOperationDefinition(doc);\r\n    __DEV__ ? invariant(queryDef && queryDef.operation === 'query', 'Must contain a query definition.') : invariant(queryDef && queryDef.operation === 'query', 49);\r\n    return queryDef;\r\n}\r\nexport function getFragmentDefinition(doc) {\r\n    __DEV__ ? invariant(doc.kind === 'Document', \"Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a \\\"gql\\\" tag? http://docs.apollostack.com/apollo-client/core.html#gql\") : invariant(doc.kind === 'Document', 50);\r\n    __DEV__ ? invariant(doc.definitions.length <= 1, 'Fragment must have exactly one definition.') : invariant(doc.definitions.length <= 1, 51);\r\n    var fragmentDef = doc.definitions[0];\r\n    __DEV__ ? invariant(fragmentDef.kind === 'FragmentDefinition', 'Must be a fragment definition.') : invariant(fragmentDef.kind === 'FragmentDefinition', 52);\r\n    return fragmentDef;\r\n}\r\nexport function getMainDefinition(queryDoc) {\r\n    checkDocument(queryDoc);\r\n    var fragmentDefinition;\r\n    for (var _i = 0, _a = queryDoc.definitions; _i < _a.length; _i++) {\r\n        var definition = _a[_i];\r\n        if (definition.kind === 'OperationDefinition') {\r\n            var operation = definition.operation;\r\n            if (operation === 'query' ||\r\n                operation === 'mutation' ||\r\n                operation === 'subscription') {\r\n                return definition;\r\n            }\r\n        }\r\n        if (definition.kind === 'FragmentDefinition' && !fragmentDefinition) {\r\n            fragmentDefinition = definition;\r\n        }\r\n    }\r\n    if (fragmentDefinition) {\r\n        return fragmentDefinition;\r\n    }\r\n    throw __DEV__ ? new InvariantError('Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.') : new InvariantError(53);\r\n}\r\nexport function getDefaultValues(definition) {\r\n    var defaultValues = Object.create(null);\r\n    var defs = definition && definition.variableDefinitions;\r\n    if (defs && defs.length) {\r\n        defs.forEach(function (def) {\r\n            if (def.defaultValue) {\r\n                valueToObjectRepresentation(defaultValues, def.variable.name, def.defaultValue);\r\n            }\r\n        });\r\n    }\r\n    return defaultValues;\r\n}\r\n","import { InvariantError } from \"../globals/index.js\";\r\nimport { isNonNullObject } from \"../common/objects.js\";\r\nimport { getFragmentFromSelection } from \"./fragments.js\";\r\nexport function makeReference(id) {\r\n    return { __ref: String(id) };\r\n}\r\nexport function isReference(obj) {\r\n    return Boolean(obj && typeof obj === 'object' && typeof obj.__ref === 'string');\r\n}\r\nexport function isDocumentNode(value) {\r\n    return (isNonNullObject(value) &&\r\n        value.kind === \"Document\" &&\r\n        Array.isArray(value.definitions));\r\n}\r\nfunction isStringValue(value) {\r\n    return value.kind === 'StringValue';\r\n}\r\nfunction isBooleanValue(value) {\r\n    return value.kind === 'BooleanValue';\r\n}\r\nfunction isIntValue(value) {\r\n    return value.kind === 'IntValue';\r\n}\r\nfunction isFloatValue(value) {\r\n    return value.kind === 'FloatValue';\r\n}\r\nfunction isVariable(value) {\r\n    return value.kind === 'Variable';\r\n}\r\nfunction isObjectValue(value) {\r\n    return value.kind === 'ObjectValue';\r\n}\r\nfunction isListValue(value) {\r\n    return value.kind === 'ListValue';\r\n}\r\nfunction isEnumValue(value) {\r\n    return value.kind === 'EnumValue';\r\n}\r\nfunction isNullValue(value) {\r\n    return value.kind === 'NullValue';\r\n}\r\nexport function valueToObjectRepresentation(argObj, name, value, variables) {\r\n    if (isIntValue(value) || isFloatValue(value)) {\r\n        argObj[name.value] = Number(value.value);\r\n    }\r\n    else if (isBooleanValue(value) || isStringValue(value)) {\r\n        argObj[name.value] = value.value;\r\n    }\r\n    else if (isObjectValue(value)) {\r\n        var nestedArgObj_1 = {};\r\n        value.fields.map(function (obj) {\r\n            return valueToObjectRepresentation(nestedArgObj_1, obj.name, obj.value, variables);\r\n        });\r\n        argObj[name.value] = nestedArgObj_1;\r\n    }\r\n    else if (isVariable(value)) {\r\n        var variableValue = (variables || {})[value.name.value];\r\n        argObj[name.value] = variableValue;\r\n    }\r\n    else if (isListValue(value)) {\r\n        argObj[name.value] = value.values.map(function (listValue) {\r\n            var nestedArgArrayObj = {};\r\n            valueToObjectRepresentation(nestedArgArrayObj, name, listValue, variables);\r\n            return nestedArgArrayObj[name.value];\r\n        });\r\n    }\r\n    else if (isEnumValue(value)) {\r\n        argObj[name.value] = value.value;\r\n    }\r\n    else if (isNullValue(value)) {\r\n        argObj[name.value] = null;\r\n    }\r\n    else {\r\n        throw __DEV__ ? new InvariantError(\"The inline argument \\\"\" + name.value + \"\\\" of kind \\\"\" + value.kind + \"\\\"\" +\r\n            'is not supported. Use variables instead of inline arguments to ' +\r\n            'overcome this limitation.') : new InvariantError(54);\r\n    }\r\n}\r\nexport function storeKeyNameFromField(field, variables) {\r\n    var directivesObj = null;\r\n    if (field.directives) {\r\n        directivesObj = {};\r\n        field.directives.forEach(function (directive) {\r\n            directivesObj[directive.name.value] = {};\r\n            if (directive.arguments) {\r\n                directive.arguments.forEach(function (_a) {\r\n                    var name = _a.name, value = _a.value;\r\n                    return valueToObjectRepresentation(directivesObj[directive.name.value], name, value, variables);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    var argObj = null;\r\n    if (field.arguments && field.arguments.length) {\r\n        argObj = {};\r\n        field.arguments.forEach(function (_a) {\r\n            var name = _a.name, value = _a.value;\r\n            return valueToObjectRepresentation(argObj, name, value, variables);\r\n        });\r\n    }\r\n    return getStoreKeyName(field.name.value, argObj, directivesObj);\r\n}\r\nvar KNOWN_DIRECTIVES = [\r\n    'connection',\r\n    'include',\r\n    'skip',\r\n    'client',\r\n    'rest',\r\n    'export',\r\n];\r\nexport var getStoreKeyName = Object.assign(function (fieldName, args, directives) {\r\n    if (args &&\r\n        directives &&\r\n        directives['connection'] &&\r\n        directives['connection']['key']) {\r\n        if (directives['connection']['filter'] &&\r\n            directives['connection']['filter'].length > 0) {\r\n            var filterKeys = directives['connection']['filter']\r\n                ? directives['connection']['filter']\r\n                : [];\r\n            filterKeys.sort();\r\n            var filteredArgs_1 = {};\r\n            filterKeys.forEach(function (key) {\r\n                filteredArgs_1[key] = args[key];\r\n            });\r\n            return directives['connection']['key'] + \"(\" + stringify(filteredArgs_1) + \")\";\r\n        }\r\n        else {\r\n            return directives['connection']['key'];\r\n        }\r\n    }\r\n    var completeFieldName = fieldName;\r\n    if (args) {\r\n        var stringifiedArgs = stringify(args);\r\n        completeFieldName += \"(\" + stringifiedArgs + \")\";\r\n    }\r\n    if (directives) {\r\n        Object.keys(directives).forEach(function (key) {\r\n            if (KNOWN_DIRECTIVES.indexOf(key) !== -1)\r\n                return;\r\n            if (directives[key] && Object.keys(directives[key]).length) {\r\n                completeFieldName += \"@\" + key + \"(\" + stringify(directives[key]) + \")\";\r\n            }\r\n            else {\r\n                completeFieldName += \"@\" + key;\r\n            }\r\n        });\r\n    }\r\n    return completeFieldName;\r\n}, {\r\n    setStringify: function (s) {\r\n        var previous = stringify;\r\n        stringify = s;\r\n        return previous;\r\n    },\r\n});\r\nvar stringify = function defaultStringify(value) {\r\n    return JSON.stringify(value, stringifyReplacer);\r\n};\r\nfunction stringifyReplacer(_key, value) {\r\n    if (isNonNullObject(value) && !Array.isArray(value)) {\r\n        value = Object.keys(value).sort().reduce(function (copy, key) {\r\n            copy[key] = value[key];\r\n            return copy;\r\n        }, {});\r\n    }\r\n    return value;\r\n}\r\nexport function argumentsObjectFromField(field, variables) {\r\n    if (field.arguments && field.arguments.length) {\r\n        var argObj_1 = {};\r\n        field.arguments.forEach(function (_a) {\r\n            var name = _a.name, value = _a.value;\r\n            return valueToObjectRepresentation(argObj_1, name, value, variables);\r\n        });\r\n        return argObj_1;\r\n    }\r\n    return null;\r\n}\r\nexport function resultKeyNameFromField(field) {\r\n    return field.alias ? field.alias.value : field.name.value;\r\n}\r\nexport function getTypenameFromResult(result, selectionSet, fragmentMap) {\r\n    if (typeof result.__typename === 'string') {\r\n        return result.__typename;\r\n    }\r\n    for (var _i = 0, _a = selectionSet.selections; _i < _a.length; _i++) {\r\n        var selection = _a[_i];\r\n        if (isField(selection)) {\r\n            if (selection.name.value === '__typename') {\r\n                return result[resultKeyNameFromField(selection)];\r\n            }\r\n        }\r\n        else {\r\n            var typename = getTypenameFromResult(result, getFragmentFromSelection(selection, fragmentMap).selectionSet, fragmentMap);\r\n            if (typeof typename === 'string') {\r\n                return typename;\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function isField(selection) {\r\n    return selection.kind === 'Field';\r\n}\r\nexport function isInlineFragment(selection) {\r\n    return selection.kind === 'InlineFragment';\r\n}\r\n","import { __assign, __spreadArray } from \"tslib\";\r\nimport { invariant } from \"../globals/index.js\";\r\nimport { visit, } from 'graphql';\r\nimport { checkDocument, getOperationDefinition, getFragmentDefinition, getFragmentDefinitions, getMainDefinition, } from \"./getFromAST.js\";\r\nimport { filterInPlace } from \"../common/filterInPlace.js\";\r\nimport { isField, isInlineFragment } from \"./storeUtils.js\";\r\nimport { createFragmentMap, } from \"./fragments.js\";\r\nvar TYPENAME_FIELD = {\r\n    kind: 'Field',\r\n    name: {\r\n        kind: 'Name',\r\n        value: '__typename',\r\n    },\r\n};\r\nfunction isEmpty(op, fragments) {\r\n    return op.selectionSet.selections.every(function (selection) {\r\n        return selection.kind === 'FragmentSpread' &&\r\n            isEmpty(fragments[selection.name.value], fragments);\r\n    });\r\n}\r\nfunction nullIfDocIsEmpty(doc) {\r\n    return isEmpty(getOperationDefinition(doc) || getFragmentDefinition(doc), createFragmentMap(getFragmentDefinitions(doc)))\r\n        ? null\r\n        : doc;\r\n}\r\nfunction getDirectiveMatcher(directives) {\r\n    return function directiveMatcher(directive) {\r\n        return directives.some(function (dir) {\r\n            return (dir.name && dir.name === directive.name.value) ||\r\n                (dir.test && dir.test(directive));\r\n        });\r\n    };\r\n}\r\nexport function removeDirectivesFromDocument(directives, doc) {\r\n    var variablesInUse = Object.create(null);\r\n    var variablesToRemove = [];\r\n    var fragmentSpreadsInUse = Object.create(null);\r\n    var fragmentSpreadsToRemove = [];\r\n    var modifiedDoc = nullIfDocIsEmpty(visit(doc, {\r\n        Variable: {\r\n            enter: function (node, _key, parent) {\r\n                if (parent.kind !== 'VariableDefinition') {\r\n                    variablesInUse[node.name.value] = true;\r\n                }\r\n            },\r\n        },\r\n        Field: {\r\n            enter: function (node) {\r\n                if (directives && node.directives) {\r\n                    var shouldRemoveField = directives.some(function (directive) { return directive.remove; });\r\n                    if (shouldRemoveField &&\r\n                        node.directives &&\r\n                        node.directives.some(getDirectiveMatcher(directives))) {\r\n                        if (node.arguments) {\r\n                            node.arguments.forEach(function (arg) {\r\n                                if (arg.value.kind === 'Variable') {\r\n                                    variablesToRemove.push({\r\n                                        name: arg.value.name.value,\r\n                                    });\r\n                                }\r\n                            });\r\n                        }\r\n                        if (node.selectionSet) {\r\n                            getAllFragmentSpreadsFromSelectionSet(node.selectionSet).forEach(function (frag) {\r\n                                fragmentSpreadsToRemove.push({\r\n                                    name: frag.name.value,\r\n                                });\r\n                            });\r\n                        }\r\n                        return null;\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        FragmentSpread: {\r\n            enter: function (node) {\r\n                fragmentSpreadsInUse[node.name.value] = true;\r\n            },\r\n        },\r\n        Directive: {\r\n            enter: function (node) {\r\n                if (getDirectiveMatcher(directives)(node)) {\r\n                    return null;\r\n                }\r\n            },\r\n        },\r\n    }));\r\n    if (modifiedDoc &&\r\n        filterInPlace(variablesToRemove, function (v) { return !!v.name && !variablesInUse[v.name]; }).length) {\r\n        modifiedDoc = removeArgumentsFromDocument(variablesToRemove, modifiedDoc);\r\n    }\r\n    if (modifiedDoc &&\r\n        filterInPlace(fragmentSpreadsToRemove, function (fs) { return !!fs.name && !fragmentSpreadsInUse[fs.name]; })\r\n            .length) {\r\n        modifiedDoc = removeFragmentSpreadFromDocument(fragmentSpreadsToRemove, modifiedDoc);\r\n    }\r\n    return modifiedDoc;\r\n}\r\nexport var addTypenameToDocument = Object.assign(function (doc) {\r\n    return visit(checkDocument(doc), {\r\n        SelectionSet: {\r\n            enter: function (node, _key, parent) {\r\n                if (parent &&\r\n                    parent.kind === 'OperationDefinition') {\r\n                    return;\r\n                }\r\n                var selections = node.selections;\r\n                if (!selections) {\r\n                    return;\r\n                }\r\n                var skip = selections.some(function (selection) {\r\n                    return (isField(selection) &&\r\n                        (selection.name.value === '__typename' ||\r\n                            selection.name.value.lastIndexOf('__', 0) === 0));\r\n                });\r\n                if (skip) {\r\n                    return;\r\n                }\r\n                var field = parent;\r\n                if (isField(field) &&\r\n                    field.directives &&\r\n                    field.directives.some(function (d) { return d.name.value === 'export'; })) {\r\n                    return;\r\n                }\r\n                return __assign(__assign({}, node), { selections: __spreadArray(__spreadArray([], selections, true), [TYPENAME_FIELD], false) });\r\n            },\r\n        },\r\n    });\r\n}, {\r\n    added: function (field) {\r\n        return field === TYPENAME_FIELD;\r\n    },\r\n});\r\nvar connectionRemoveConfig = {\r\n    test: function (directive) {\r\n        var willRemove = directive.name.value === 'connection';\r\n        if (willRemove) {\r\n            if (!directive.arguments ||\r\n                !directive.arguments.some(function (arg) { return arg.name.value === 'key'; })) {\r\n                __DEV__ && invariant.warn('Removing an @connection directive even though it does not have a key. ' +\r\n                    'You may want to use the key parameter to specify a store key.');\r\n            }\r\n        }\r\n        return willRemove;\r\n    },\r\n};\r\nexport function removeConnectionDirectiveFromDocument(doc) {\r\n    return removeDirectivesFromDocument([connectionRemoveConfig], checkDocument(doc));\r\n}\r\nfunction hasDirectivesInSelectionSet(directives, selectionSet, nestedCheck) {\r\n    if (nestedCheck === void 0) { nestedCheck = true; }\r\n    return (!!selectionSet &&\r\n        selectionSet.selections &&\r\n        selectionSet.selections.some(function (selection) {\r\n            return hasDirectivesInSelection(directives, selection, nestedCheck);\r\n        }));\r\n}\r\nfunction hasDirectivesInSelection(directives, selection, nestedCheck) {\r\n    if (nestedCheck === void 0) { nestedCheck = true; }\r\n    if (!isField(selection)) {\r\n        return true;\r\n    }\r\n    if (!selection.directives) {\r\n        return false;\r\n    }\r\n    return (selection.directives.some(getDirectiveMatcher(directives)) ||\r\n        (nestedCheck &&\r\n            hasDirectivesInSelectionSet(directives, selection.selectionSet, nestedCheck)));\r\n}\r\nfunction getArgumentMatcher(config) {\r\n    return function argumentMatcher(argument) {\r\n        return config.some(function (aConfig) {\r\n            return argument.value &&\r\n                argument.value.kind === 'Variable' &&\r\n                argument.value.name &&\r\n                (aConfig.name === argument.value.name.value ||\r\n                    (aConfig.test && aConfig.test(argument)));\r\n        });\r\n    };\r\n}\r\nexport function removeArgumentsFromDocument(config, doc) {\r\n    var argMatcher = getArgumentMatcher(config);\r\n    return nullIfDocIsEmpty(visit(doc, {\r\n        OperationDefinition: {\r\n            enter: function (node) {\r\n                return __assign(__assign({}, node), { variableDefinitions: node.variableDefinitions ? node.variableDefinitions.filter(function (varDef) {\r\n                        return !config.some(function (arg) { return arg.name === varDef.variable.name.value; });\r\n                    }) : [] });\r\n            },\r\n        },\r\n        Field: {\r\n            enter: function (node) {\r\n                var shouldRemoveField = config.some(function (argConfig) { return argConfig.remove; });\r\n                if (shouldRemoveField) {\r\n                    var argMatchCount_1 = 0;\r\n                    if (node.arguments) {\r\n                        node.arguments.forEach(function (arg) {\r\n                            if (argMatcher(arg)) {\r\n                                argMatchCount_1 += 1;\r\n                            }\r\n                        });\r\n                    }\r\n                    if (argMatchCount_1 === 1) {\r\n                        return null;\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        Argument: {\r\n            enter: function (node) {\r\n                if (argMatcher(node)) {\r\n                    return null;\r\n                }\r\n            },\r\n        },\r\n    }));\r\n}\r\nexport function removeFragmentSpreadFromDocument(config, doc) {\r\n    function enter(node) {\r\n        if (config.some(function (def) { return def.name === node.name.value; })) {\r\n            return null;\r\n        }\r\n    }\r\n    return nullIfDocIsEmpty(visit(doc, {\r\n        FragmentSpread: { enter: enter },\r\n        FragmentDefinition: { enter: enter },\r\n    }));\r\n}\r\nfunction getAllFragmentSpreadsFromSelectionSet(selectionSet) {\r\n    var allFragments = [];\r\n    selectionSet.selections.forEach(function (selection) {\r\n        if ((isField(selection) || isInlineFragment(selection)) &&\r\n            selection.selectionSet) {\r\n            getAllFragmentSpreadsFromSelectionSet(selection.selectionSet).forEach(function (frag) { return allFragments.push(frag); });\r\n        }\r\n        else if (selection.kind === 'FragmentSpread') {\r\n            allFragments.push(selection);\r\n        }\r\n    });\r\n    return allFragments;\r\n}\r\nexport function buildQueryFromSelectionSet(document) {\r\n    var definition = getMainDefinition(document);\r\n    var definitionOperation = definition.operation;\r\n    if (definitionOperation === 'query') {\r\n        return document;\r\n    }\r\n    var modifiedDoc = visit(document, {\r\n        OperationDefinition: {\r\n            enter: function (node) {\r\n                return __assign(__assign({}, node), { operation: 'query' });\r\n            },\r\n        },\r\n    });\r\n    return modifiedDoc;\r\n}\r\nexport function removeClientSetsFromDocument(document) {\r\n    checkDocument(document);\r\n    var modifiedDoc = removeDirectivesFromDocument([\r\n        {\r\n            test: function (directive) { return directive.name.value === 'client'; },\r\n            remove: true,\r\n        },\r\n    ], document);\r\n    if (modifiedDoc) {\r\n        modifiedDoc = visit(modifiedDoc, {\r\n            FragmentDefinition: {\r\n                enter: function (node) {\r\n                    if (node.selectionSet) {\r\n                        var isTypenameOnly = node.selectionSet.selections.every(function (selection) {\r\n                            return isField(selection) && selection.name.value === '__typename';\r\n                        });\r\n                        if (isTypenameOnly) {\r\n                            return null;\r\n                        }\r\n                    }\r\n                },\r\n            },\r\n        });\r\n    }\r\n    return modifiedDoc;\r\n}\r\n","import { __extends } from \"tslib\";\r\nimport { Observable } from \"./Observable.js\";\r\nimport { iterateObserversSafely } from \"./iteration.js\";\r\nimport { fixObservableSubclass } from \"./subclassing.js\";\r\nfunction isPromiseLike(value) {\r\n    return value && typeof value.then === \"function\";\r\n}\r\nvar Concast = (function (_super) {\r\n    __extends(Concast, _super);\r\n    function Concast(sources) {\r\n        var _this = _super.call(this, function (observer) {\r\n            _this.addObserver(observer);\r\n            return function () { return _this.removeObserver(observer); };\r\n        }) || this;\r\n        _this.observers = new Set();\r\n        _this.addCount = 0;\r\n        _this.promise = new Promise(function (resolve, reject) {\r\n            _this.resolve = resolve;\r\n            _this.reject = reject;\r\n        });\r\n        _this.handlers = {\r\n            next: function (result) {\r\n                if (_this.sub !== null) {\r\n                    _this.latest = [\"next\", result];\r\n                    iterateObserversSafely(_this.observers, \"next\", result);\r\n                }\r\n            },\r\n            error: function (error) {\r\n                var sub = _this.sub;\r\n                if (sub !== null) {\r\n                    if (sub)\r\n                        setTimeout(function () { return sub.unsubscribe(); });\r\n                    _this.sub = null;\r\n                    _this.latest = [\"error\", error];\r\n                    _this.reject(error);\r\n                    iterateObserversSafely(_this.observers, \"error\", error);\r\n                }\r\n            },\r\n            complete: function () {\r\n                if (_this.sub !== null) {\r\n                    var value = _this.sources.shift();\r\n                    if (!value) {\r\n                        _this.sub = null;\r\n                        if (_this.latest &&\r\n                            _this.latest[0] === \"next\") {\r\n                            _this.resolve(_this.latest[1]);\r\n                        }\r\n                        else {\r\n                            _this.resolve();\r\n                        }\r\n                        iterateObserversSafely(_this.observers, \"complete\");\r\n                    }\r\n                    else if (isPromiseLike(value)) {\r\n                        value.then(function (obs) { return _this.sub = obs.subscribe(_this.handlers); });\r\n                    }\r\n                    else {\r\n                        _this.sub = value.subscribe(_this.handlers);\r\n                    }\r\n                }\r\n            },\r\n        };\r\n        _this.cancel = function (reason) {\r\n            _this.reject(reason);\r\n            _this.sources = [];\r\n            _this.handlers.complete();\r\n        };\r\n        _this.promise.catch(function (_) { });\r\n        if (typeof sources === \"function\") {\r\n            sources = [new Observable(sources)];\r\n        }\r\n        if (isPromiseLike(sources)) {\r\n            sources.then(function (iterable) { return _this.start(iterable); }, _this.handlers.error);\r\n        }\r\n        else {\r\n            _this.start(sources);\r\n        }\r\n        return _this;\r\n    }\r\n    Concast.prototype.start = function (sources) {\r\n        if (this.sub !== void 0)\r\n            return;\r\n        this.sources = Array.from(sources);\r\n        this.handlers.complete();\r\n    };\r\n    Concast.prototype.deliverLastMessage = function (observer) {\r\n        if (this.latest) {\r\n            var nextOrError = this.latest[0];\r\n            var method = observer[nextOrError];\r\n            if (method) {\r\n                method.call(observer, this.latest[1]);\r\n            }\r\n            if (this.sub === null &&\r\n                nextOrError === \"next\" &&\r\n                observer.complete) {\r\n                observer.complete();\r\n            }\r\n        }\r\n    };\r\n    Concast.prototype.addObserver = function (observer) {\r\n        if (!this.observers.has(observer)) {\r\n            this.deliverLastMessage(observer);\r\n            this.observers.add(observer);\r\n            ++this.addCount;\r\n        }\r\n    };\r\n    Concast.prototype.removeObserver = function (observer, quietly) {\r\n        if (this.observers.delete(observer) &&\r\n            --this.addCount < 1 &&\r\n            !quietly) {\r\n            this.handlers.error(new Error(\"Observable cancelled prematurely\"));\r\n        }\r\n    };\r\n    Concast.prototype.cleanup = function (callback) {\r\n        var _this = this;\r\n        var called = false;\r\n        var once = function () {\r\n            if (!called) {\r\n                called = true;\r\n                _this.observers.delete(observer);\r\n                callback();\r\n            }\r\n        };\r\n        var observer = {\r\n            next: once,\r\n            error: once,\r\n            complete: once,\r\n        };\r\n        var count = this.addCount;\r\n        this.addObserver(observer);\r\n        this.addCount = count;\r\n    };\r\n    return Concast;\r\n}(Observable));\r\nexport { Concast };\r\nfixObservableSubclass(Concast);\r\n","import { Observable } from \"./Observable.js\";\r\nexport function asyncMap(observable, mapFn, catchFn) {\r\n    return new Observable(function (observer) {\r\n        var next = observer.next, error = observer.error, complete = observer.complete;\r\n        var activeCallbackCount = 0;\r\n        var completed = false;\r\n        var promiseQueue = {\r\n            then: function (callback) {\r\n                return new Promise(function (resolve) { return resolve(callback()); });\r\n            },\r\n        };\r\n        function makeCallback(examiner, delegate) {\r\n            if (examiner) {\r\n                return function (arg) {\r\n                    ++activeCallbackCount;\r\n                    var both = function () { return examiner(arg); };\r\n                    promiseQueue = promiseQueue.then(both, both).then(function (result) {\r\n                        --activeCallbackCount;\r\n                        next && next.call(observer, result);\r\n                        if (completed) {\r\n                            handler.complete();\r\n                        }\r\n                    }, function (error) {\r\n                        --activeCallbackCount;\r\n                        throw error;\r\n                    }).catch(function (caught) {\r\n                        error && error.call(observer, caught);\r\n                    });\r\n                };\r\n            }\r\n            else {\r\n                return function (arg) { return delegate && delegate.call(observer, arg); };\r\n            }\r\n        }\r\n        var handler = {\r\n            next: makeCallback(mapFn, next),\r\n            error: makeCallback(catchFn, error),\r\n            complete: function () {\r\n                completed = true;\r\n                if (!activeCallbackCount) {\r\n                    complete && complete.call(observer);\r\n                }\r\n            },\r\n        };\r\n        var sub = observable.subscribe(handler);\r\n        return function () { return sub.unsubscribe(); };\r\n    });\r\n}\r\n","export function iterateObserversSafely(observers, method, argument) {\r\n    var observersWithMethod = [];\r\n    observers.forEach(function (obs) { return obs[method] && observersWithMethod.push(obs); });\r\n    observersWithMethod.forEach(function (obs) { return obs[method](argument); });\r\n}\r\n","import { Observable } from \"./Observable.js\";\r\nexport function fixObservableSubclass(subclass) {\r\n    function set(key) {\r\n        Object.defineProperty(subclass, key, { value: Observable });\r\n    }\r\n    if (typeof Symbol === \"function\" && Symbol.species) {\r\n        set(Symbol.species);\r\n    }\r\n    set(\"@@species\");\r\n    return subclass;\r\n}\r\n","export var version = '3.4.11';\r\n","// This currentContext variable will only be used if the makeSlotClass\r\n// function is called, which happens only if this is the first copy of the\r\n// @wry/context package to be imported.\r\nvar currentContext = null;\r\n// This unique internal object is used to denote the absence of a value\r\n// for a given Slot, and is never exposed to outside code.\r\nvar MISSING_VALUE = {};\r\nvar idCounter = 1;\r\n// Although we can't do anything about the cost of duplicated code from\r\n// accidentally bundling multiple copies of the @wry/context package, we can\r\n// avoid creating the Slot class more than once using makeSlotClass.\r\nvar makeSlotClass = function () { return /** @class */ (function () {\r\n    function Slot() {\r\n        // If you have a Slot object, you can find out its slot.id, but you cannot\r\n        // guess the slot.id of a Slot you don't have access to, thanks to the\r\n        // randomized suffix.\r\n        this.id = [\r\n            \"slot\",\r\n            idCounter++,\r\n            Date.now(),\r\n            Math.random().toString(36).slice(2),\r\n        ].join(\":\");\r\n    }\r\n    Slot.prototype.hasValue = function () {\r\n        for (var context_1 = currentContext; context_1; context_1 = context_1.parent) {\r\n            // We use the Slot object iself as a key to its value, which means the\r\n            // value cannot be obtained without a reference to the Slot object.\r\n            if (this.id in context_1.slots) {\r\n                var value = context_1.slots[this.id];\r\n                if (value === MISSING_VALUE)\r\n                    break;\r\n                if (context_1 !== currentContext) {\r\n                    // Cache the value in currentContext.slots so the next lookup will\r\n                    // be faster. This caching is safe because the tree of contexts and\r\n                    // the values of the slots are logically immutable.\r\n                    currentContext.slots[this.id] = value;\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        if (currentContext) {\r\n            // If a value was not found for this Slot, it's never going to be found\r\n            // no matter how many times we look it up, so we might as well cache\r\n            // the absence of the value, too.\r\n            currentContext.slots[this.id] = MISSING_VALUE;\r\n        }\r\n        return false;\r\n    };\r\n    Slot.prototype.getValue = function () {\r\n        if (this.hasValue()) {\r\n            return currentContext.slots[this.id];\r\n        }\r\n    };\r\n    Slot.prototype.withValue = function (value, callback, \r\n    // Given the prevalence of arrow functions, specifying arguments is likely\r\n    // to be much more common than specifying `this`, hence this ordering:\r\n    args, thisArg) {\r\n        var _a;\r\n        var slots = (_a = {\r\n                __proto__: null\r\n            },\r\n            _a[this.id] = value,\r\n            _a);\r\n        var parent = currentContext;\r\n        currentContext = { parent: parent, slots: slots };\r\n        try {\r\n            // Function.prototype.apply allows the arguments array argument to be\r\n            // omitted or undefined, so args! is fine here.\r\n            return callback.apply(thisArg, args);\r\n        }\r\n        finally {\r\n            currentContext = parent;\r\n        }\r\n    };\r\n    // Capture the current context and wrap a callback function so that it\r\n    // reestablishes the captured context when called.\r\n    Slot.bind = function (callback) {\r\n        var context = currentContext;\r\n        return function () {\r\n            var saved = currentContext;\r\n            try {\r\n                currentContext = context;\r\n                return callback.apply(this, arguments);\r\n            }\r\n            finally {\r\n                currentContext = saved;\r\n            }\r\n        };\r\n    };\r\n    // Immediately run a callback function without any captured context.\r\n    Slot.noContext = function (callback, \r\n    // Given the prevalence of arrow functions, specifying arguments is likely\r\n    // to be much more common than specifying `this`, hence this ordering:\r\n    args, thisArg) {\r\n        if (currentContext) {\r\n            var saved = currentContext;\r\n            try {\r\n                currentContext = null;\r\n                // Function.prototype.apply allows the arguments array argument to be\r\n                // omitted or undefined, so args! is fine here.\r\n                return callback.apply(thisArg, args);\r\n            }\r\n            finally {\r\n                currentContext = saved;\r\n            }\r\n        }\r\n        else {\r\n            return callback.apply(thisArg, args);\r\n        }\r\n    };\r\n    return Slot;\r\n}()); };\r\n// We store a single global implementation of the Slot class as a permanent\r\n// non-enumerable symbol property of the Array constructor. This obfuscation\r\n// does nothing to prevent access to the Slot class, but at least it ensures\r\n// the implementation (i.e. currentContext) cannot be tampered with, and all\r\n// copies of the @wry/context package (hopefully just one) will share the\r\n// same Slot implementation. Since the first copy of the @wry/context package\r\n// to be imported wins, this technique imposes a very high cost for any\r\n// future breaking changes to the Slot class.\r\nvar globalKey = \"@wry/context:Slot\";\r\nvar host = Array;\r\nvar Slot = host[globalKey] || function () {\r\n    var Slot = makeSlotClass();\r\n    try {\r\n        Object.defineProperty(host, globalKey, {\r\n            value: host[globalKey] = Slot,\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: false,\r\n        });\r\n    }\r\n    finally {\r\n        return Slot;\r\n    }\r\n}();\r\n\r\nvar bind = Slot.bind, noContext = Slot.noContext;\r\nfunction setTimeoutWithContext(callback, delay) {\r\n    return setTimeout(bind(callback), delay);\r\n}\r\n// Turn any generator function into an async function (using yield instead\r\n// of await), with context automatically preserved across yields.\r\nfunction asyncFromGen(genFn) {\r\n    return function () {\r\n        var gen = genFn.apply(this, arguments);\r\n        var boundNext = bind(gen.next);\r\n        var boundThrow = bind(gen.throw);\r\n        return new Promise(function (resolve, reject) {\r\n            function invoke(method, argument) {\r\n                try {\r\n                    var result = method.call(gen, argument);\r\n                }\r\n                catch (error) {\r\n                    return reject(error);\r\n                }\r\n                var next = result.done ? resolve : invokeNext;\r\n                if (isPromiseLike(result.value)) {\r\n                    result.value.then(next, result.done ? reject : invokeThrow);\r\n                }\r\n                else {\r\n                    next(result.value);\r\n                }\r\n            }\r\n            var invokeNext = function (value) { return invoke(boundNext, value); };\r\n            var invokeThrow = function (error) { return invoke(boundThrow, error); };\r\n            invokeNext();\r\n        });\r\n    };\r\n}\r\nfunction isPromiseLike(value) {\r\n    return value && typeof value.then === \"function\";\r\n}\r\n// If you use the fibers npm package to implement coroutines in Node.js,\r\n// you should call this function at least once to ensure context management\r\n// remains coherent across any yields.\r\nvar wrappedFibers = [];\r\nfunction wrapYieldingFiberMethods(Fiber) {\r\n    // There can be only one implementation of Fiber per process, so this array\r\n    // should never grow longer than one element.\r\n    if (wrappedFibers.indexOf(Fiber) < 0) {\r\n        var wrap = function (obj, method) {\r\n            var fn = obj[method];\r\n            obj[method] = function () {\r\n                return noContext(fn, arguments, this);\r\n            };\r\n        };\r\n        // These methods can yield, according to\r\n        // https://github.com/laverdet/node-fibers/blob/ddebed9b8ae3883e57f822e2108e6943e5c8d2a8/fibers.js#L97-L100\r\n        wrap(Fiber, \"yield\");\r\n        wrap(Fiber.prototype, \"run\");\r\n        wrap(Fiber.prototype, \"throwInto\");\r\n        wrappedFibers.push(Fiber);\r\n    }\r\n    return Fiber;\r\n}\r\n\r\nexport { Slot, asyncFromGen, bind, noContext, setTimeoutWithContext as setTimeout, wrapYieldingFiberMethods };\r\n\n","var _a = Object.prototype, toString = _a.toString, hasOwnProperty = _a.hasOwnProperty;\r\nvar fnToStr = Function.prototype.toString;\r\nvar previousComparisons = new Map();\r\n/**\r\n * Performs a deep equality check on two JavaScript values, tolerating cycles.\r\n */\r\nfunction equal(a, b) {\r\n    try {\r\n        return check(a, b);\r\n    }\r\n    finally {\r\n        previousComparisons.clear();\r\n    }\r\n}\r\nfunction check(a, b) {\r\n    // If the two values are strictly equal, our job is easy.\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    // Object.prototype.toString returns a representation of the runtime type of\r\n    // the given value that is considerably more precise than typeof.\r\n    var aTag = toString.call(a);\r\n    var bTag = toString.call(b);\r\n    // If the runtime types of a and b are different, they could maybe be equal\r\n    // under some interpretation of equality, but for simplicity and performance\r\n    // we just return false instead.\r\n    if (aTag !== bTag) {\r\n        return false;\r\n    }\r\n    switch (aTag) {\r\n        case '[object Array]':\r\n            // Arrays are a lot like other objects, but we can cheaply compare their\r\n            // lengths as a short-cut before comparing their elements.\r\n            if (a.length !== b.length)\r\n                return false;\r\n        // Fall through to object case...\r\n        case '[object Object]': {\r\n            if (previouslyCompared(a, b))\r\n                return true;\r\n            var aKeys = definedKeys(a);\r\n            var bKeys = definedKeys(b);\r\n            // If `a` and `b` have a different number of enumerable keys, they\r\n            // must be different.\r\n            var keyCount = aKeys.length;\r\n            if (keyCount !== bKeys.length)\r\n                return false;\r\n            // Now make sure they have the same keys.\r\n            for (var k = 0; k < keyCount; ++k) {\r\n                if (!hasOwnProperty.call(b, aKeys[k])) {\r\n                    return false;\r\n                }\r\n            }\r\n            // Finally, check deep equality of all child properties.\r\n            for (var k = 0; k < keyCount; ++k) {\r\n                var key = aKeys[k];\r\n                if (!check(a[key], b[key])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        case '[object Error]':\r\n            return a.name === b.name && a.message === b.message;\r\n        case '[object Number]':\r\n            // Handle NaN, which is !== itself.\r\n            if (a !== a)\r\n                return b !== b;\r\n        // Fall through to shared +a === +b case...\r\n        case '[object Boolean]':\r\n        case '[object Date]':\r\n            return +a === +b;\r\n        case '[object RegExp]':\r\n        case '[object String]':\r\n            return a == \"\" + b;\r\n        case '[object Map]':\r\n        case '[object Set]': {\r\n            if (a.size !== b.size)\r\n                return false;\r\n            if (previouslyCompared(a, b))\r\n                return true;\r\n            var aIterator = a.entries();\r\n            var isMap = aTag === '[object Map]';\r\n            while (true) {\r\n                var info = aIterator.next();\r\n                if (info.done)\r\n                    break;\r\n                // If a instanceof Set, aValue === aKey.\r\n                var _a = info.value, aKey = _a[0], aValue = _a[1];\r\n                // So this works the same way for both Set and Map.\r\n                if (!b.has(aKey)) {\r\n                    return false;\r\n                }\r\n                // However, we care about deep equality of values only when dealing\r\n                // with Map structures.\r\n                if (isMap && !check(aValue, b.get(aKey))) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        case '[object Uint16Array]':\r\n        case '[object Uint8Array]': // Buffer, in Node.js.\r\n        case '[object Uint32Array]':\r\n        case '[object Int32Array]':\r\n        case '[object Int8Array]':\r\n        case '[object Int16Array]':\r\n        case '[object ArrayBuffer]':\r\n            // DataView doesn't need these conversions, but the equality check is\r\n            // otherwise the same.\r\n            a = new Uint8Array(a);\r\n            b = new Uint8Array(b);\r\n        // Fall through...\r\n        case '[object DataView]': {\r\n            var len = a.byteLength;\r\n            if (len === b.byteLength) {\r\n                while (len-- && a[len] === b[len]) {\r\n                    // Keep looping as long as the bytes are equal.\r\n                }\r\n            }\r\n            return len === -1;\r\n        }\r\n        case '[object AsyncFunction]':\r\n        case '[object GeneratorFunction]':\r\n        case '[object AsyncGeneratorFunction]':\r\n        case '[object Function]': {\r\n            var aCode = fnToStr.call(a);\r\n            if (aCode !== fnToStr.call(b)) {\r\n                return false;\r\n            }\r\n            // We consider non-native functions equal if they have the same code\r\n            // (native functions require === because their code is censored).\r\n            // Note that this behavior is not entirely sound, since !== function\r\n            // objects with the same code can behave differently depending on\r\n            // their closure scope. However, any function can behave differently\r\n            // depending on the values of its input arguments (including this)\r\n            // and its calling context (including its closure scope), even\r\n            // though the function object is === to itself; and it is entirely\r\n            // possible for functions that are not === to behave exactly the\r\n            // same under all conceivable circumstances. Because none of these\r\n            // factors are statically decidable in JavaScript, JS function\r\n            // equality is not well-defined. This ambiguity allows us to\r\n            // consider the best possible heuristic among various imperfect\r\n            // options, and equating non-native functions that have the same\r\n            // code has enormous practical benefits, such as when comparing\r\n            // functions that are repeatedly passed as fresh function\r\n            // expressions within objects that are otherwise deeply equal. Since\r\n            // any function created from the same syntactic expression (in the\r\n            // same code location) will always stringify to the same code\r\n            // according to fnToStr.call, we can reasonably expect these\r\n            // repeatedly passed function expressions to have the same code, and\r\n            // thus behave \"the same\" (with all the caveats mentioned above),\r\n            // even though the runtime function objects are !== to one another.\r\n            return !endsWith(aCode, nativeCodeSuffix);\r\n        }\r\n    }\r\n    // Otherwise the values are not equal.\r\n    return false;\r\n}\r\nfunction definedKeys(obj) {\r\n    // Remember that the second argument to Array.prototype.filter will be\r\n    // used as `this` within the callback function.\r\n    return Object.keys(obj).filter(isDefinedKey, obj);\r\n}\r\nfunction isDefinedKey(key) {\r\n    return this[key] !== void 0;\r\n}\r\nvar nativeCodeSuffix = \"{ [native code] }\";\r\nfunction endsWith(full, suffix) {\r\n    var fromIndex = full.length - suffix.length;\r\n    return fromIndex >= 0 &&\r\n        full.indexOf(suffix, fromIndex) === fromIndex;\r\n}\r\nfunction previouslyCompared(a, b) {\r\n    // Though cyclic references can make an object graph appear infinite from the\r\n    // perspective of a depth-first traversal, the graph still contains a finite\r\n    // number of distinct object references. We use the previousComparisons cache\r\n    // to avoid comparing the same pair of object references more than once, which\r\n    // guarantees termination (even if we end up comparing every object in one\r\n    // graph to every object in the other graph, which is extremely unlikely),\r\n    // while still allowing weird isomorphic structures (like rings with different\r\n    // lengths) a chance to pass the equality test.\r\n    var bSet = previousComparisons.get(a);\r\n    if (bSet) {\r\n        // Return true here because we can be sure false will be returned somewhere\r\n        // else if the objects are not equivalent.\r\n        if (bSet.has(b))\r\n            return true;\r\n    }\r\n    else {\r\n        previousComparisons.set(a, bSet = new Set);\r\n    }\r\n    bSet.add(b);\r\n    return false;\r\n}\r\n\r\nexport { equal as default, equal };\r\n\n","// A [trie](https://en.wikipedia.org/wiki/Trie) data structure that holds\r\n// object keys weakly, yet can also hold non-object keys, unlike the\r\n// native `WeakMap`.\r\n// If no makeData function is supplied, the looked-up data will be an empty,\r\n// null-prototype Object.\r\nvar defaultMakeData = function () { return Object.create(null); };\r\n// Useful for processing arguments objects as well as arrays.\r\nvar _a = Array.prototype, forEach = _a.forEach, slice = _a.slice;\r\nvar Trie = /** @class */ (function () {\r\n    function Trie(weakness, makeData) {\r\n        if (weakness === void 0) { weakness = true; }\r\n        if (makeData === void 0) { makeData = defaultMakeData; }\r\n        this.weakness = weakness;\r\n        this.makeData = makeData;\r\n    }\r\n    Trie.prototype.lookup = function () {\r\n        var array = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            array[_i] = arguments[_i];\r\n        }\r\n        return this.lookupArray(array);\r\n    };\r\n    Trie.prototype.lookupArray = function (array) {\r\n        var node = this;\r\n        forEach.call(array, function (key) { return node = node.getChildTrie(key); });\r\n        return node.data || (node.data = this.makeData(slice.call(array)));\r\n    };\r\n    Trie.prototype.getChildTrie = function (key) {\r\n        var map = this.weakness && isObjRef(key)\r\n            ? this.weak || (this.weak = new WeakMap())\r\n            : this.strong || (this.strong = new Map());\r\n        var child = map.get(key);\r\n        if (!child)\r\n            map.set(key, child = new Trie(this.weakness, this.makeData));\r\n        return child;\r\n    };\r\n    return Trie;\r\n}());\r\nfunction isObjRef(value) {\r\n    switch (typeof value) {\r\n        case \"object\":\r\n            if (value === null)\r\n                break;\r\n        // Fall through to return true...\r\n        case \"function\":\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport { Trie };\r\n\n","import * as i0 from '@angular/core';\r\nimport { InjectionToken, Injectable, NgZone, Optional, Inject } from '@angular/core';\r\nimport { ApolloClient } from '@apollo/client/core';\r\nimport * as ɵngcc0 from '@angular/core';\r\nexport { gql, gql as graphql } from '@apollo/client/core';\r\nimport { Observable, queueScheduler, observable, from } from 'rxjs';\r\nimport { observeOn, startWith } from 'rxjs/operators';\r\n\r\nfunction fromPromise(promiseFn) {\r\n    return new Observable((subscriber) => {\r\n        promiseFn().then((result) => {\r\n            if (!subscriber.closed) {\r\n                subscriber.next(result);\r\n                subscriber.complete();\r\n            }\r\n        }, (error) => {\r\n            if (!subscriber.closed) {\r\n                subscriber.error(error);\r\n            }\r\n        });\r\n        return () => subscriber.unsubscribe();\r\n    });\r\n}\r\nclass ZoneScheduler {\r\n    constructor(zone) {\r\n        this.zone = zone;\r\n        this.now = Date.now ? Date.now : () => +new Date();\r\n    }\r\n    schedule(work, delay = 0, state) {\r\n        return this.zone.run(() => queueScheduler.schedule(work, delay, state));\r\n    }\r\n}\r\nfunction fixObservable(obs) {\r\n    obs[observable] = () => obs;\r\n    return obs;\r\n}\r\nfunction wrapWithZone(obs, ngZone) {\r\n    return obs.pipe(observeOn(new ZoneScheduler(ngZone)));\r\n}\r\nfunction pickFlag(flags, flag, defaultValue) {\r\n    return flags && typeof flags[flag] !== 'undefined'\r\n        ? flags[flag]\r\n        : defaultValue;\r\n}\r\n\r\nclass QueryRef {\r\n    constructor(obsQuery, ngZone, options) {\r\n        this.obsQuery = obsQuery;\r\n        const wrapped = wrapWithZone(from(fixObservable(this.obsQuery)), ngZone);\r\n        this.valueChanges = options.useInitialLoading\r\n            ? wrapped.pipe(startWith(Object.assign(Object.assign({}, this.obsQuery.getCurrentResult(false)), { error: undefined, partial: undefined, stale: true })))\r\n            : wrapped;\r\n        this.queryId = this.obsQuery.queryId;\r\n    }\r\n    // ObservableQuery's methods\r\n    result() {\r\n        return this.obsQuery.result();\r\n    }\r\n    getCurrentResult() {\r\n        return this.obsQuery.getCurrentResult();\r\n    }\r\n    getLastResult() {\r\n        return this.obsQuery.getLastResult();\r\n    }\r\n    getLastError() {\r\n        return this.obsQuery.getLastError();\r\n    }\r\n    resetLastResults() {\r\n        return this.obsQuery.resetLastResults();\r\n    }\r\n    refetch(variables) {\r\n        return this.obsQuery.refetch(variables);\r\n    }\r\n    fetchMore(fetchMoreOptions) {\r\n        return this.obsQuery.fetchMore(fetchMoreOptions);\r\n    }\r\n    subscribeToMore(options) {\r\n        // XXX: there's a bug in apollo-client typings\r\n        // it should not inherit types from ObservableQuery\r\n        return this.obsQuery.subscribeToMore(options);\r\n    }\r\n    updateQuery(mapFn) {\r\n        return this.obsQuery.updateQuery(mapFn);\r\n    }\r\n    stopPolling() {\r\n        return this.obsQuery.stopPolling();\r\n    }\r\n    startPolling(pollInterval) {\r\n        return this.obsQuery.startPolling(pollInterval);\r\n    }\r\n    setOptions(opts) {\r\n        return this.obsQuery.setOptions(opts);\r\n    }\r\n    setVariables(variables) {\r\n        return this.obsQuery.setVariables(variables);\r\n    }\r\n}\r\n\r\nconst APOLLO_FLAGS = new InjectionToken('APOLLO_FLAGS');\r\nconst APOLLO_OPTIONS = new InjectionToken('APOLLO_OPTIONS');\r\nconst APOLLO_NAMED_OPTIONS = new InjectionToken('APOLLO_NAMED_OPTIONS');\r\n\r\nclass ApolloBase {\r\n    constructor(ngZone, flags, _client) {\r\n        this.ngZone = ngZone;\r\n        this.flags = flags;\r\n        this._client = _client;\r\n        this.useInitialLoading = pickFlag(flags, 'useInitialLoading', false);\r\n    }\r\n    watchQuery(options) {\r\n        return new QueryRef(this.ensureClient().watchQuery(Object.assign({}, options)), this.ngZone, Object.assign({ useInitialLoading: this.useInitialLoading }, options));\r\n    }\r\n    query(options) {\r\n        return fromPromise(() => this.ensureClient().query(Object.assign({}, options)));\r\n    }\r\n    mutate(options) {\r\n        return fromPromise(() => this.ensureClient().mutate(Object.assign({}, options)));\r\n    }\r\n    subscribe(options, extra) {\r\n        const obs = from(fixObservable(this.ensureClient().subscribe(Object.assign({}, options))));\r\n        return extra && extra.useZone !== true\r\n            ? obs\r\n            : wrapWithZone(obs, this.ngZone);\r\n    }\r\n    /**\r\n     * Get an access to an instance of ApolloClient\r\n     * @deprecated use `apollo.client` instead\r\n     */\r\n    getClient() {\r\n        return this.client;\r\n    }\r\n    /**\r\n     * Set a new instance of ApolloClient\r\n     * Remember to clean up the store before setting a new client.\r\n     * @deprecated use `apollo.client = client` instead\r\n     *\r\n     * @param client ApolloClient instance\r\n     */\r\n    setClient(client) {\r\n        this.client = client;\r\n    }\r\n    /**\r\n     * Get an access to an instance of ApolloClient\r\n     */\r\n    get client() {\r\n        return this._client;\r\n    }\r\n    /**\r\n     * Set a new instance of ApolloClient\r\n     * Remember to clean up the store before setting a new client.\r\n     *\r\n     * @param client ApolloClient instance\r\n     */\r\n    set client(client) {\r\n        if (this._client) {\r\n            throw new Error('Client has been already defined');\r\n        }\r\n        this._client = client;\r\n    }\r\n    ensureClient() {\r\n        this.checkInstance();\r\n        return this._client;\r\n    }\r\n    checkInstance() {\r\n        if (!this._client) {\r\n            throw new Error('Client has not been defined yet');\r\n        }\r\n    }\r\n}\r\nclass Apollo extends ApolloBase {\r\n    constructor(_ngZone, apolloOptions, apolloNamedOptions, flags) {\r\n        super(_ngZone, flags);\r\n        this._ngZone = _ngZone;\r\n        this.map = new Map();\r\n        if (apolloOptions) {\r\n            this.createDefault(apolloOptions);\r\n        }\r\n        if (apolloNamedOptions && typeof apolloNamedOptions === 'object') {\r\n            for (let name in apolloNamedOptions) {\r\n                if (apolloNamedOptions.hasOwnProperty(name)) {\r\n                    const options = apolloNamedOptions[name];\r\n                    this.createNamed(name, options);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Create an instance of ApolloClient\r\n     * @param options Options required to create ApolloClient\r\n     * @param name client's name\r\n     */\r\n    create(options, name) {\r\n        if (isDefault(name)) {\r\n            this.createDefault(options);\r\n        }\r\n        else {\r\n            this.createNamed(name, options);\r\n        }\r\n    }\r\n    /**\r\n     * Use a default ApolloClient\r\n     */\r\n    default() {\r\n        return this;\r\n    }\r\n    /**\r\n     * Use a named ApolloClient\r\n     * @param name client's name\r\n     */\r\n    use(name) {\r\n        if (isDefault(name)) {\r\n            return this.default();\r\n        }\r\n        return this.map.get(name);\r\n    }\r\n    /**\r\n     * Create a default ApolloClient, same as `apollo.create(options)`\r\n     * @param options ApolloClient's options\r\n     */\r\n    createDefault(options) {\r\n        if (this.getClient()) {\r\n            throw new Error('Apollo has been already created.');\r\n        }\r\n        return this.setClient(new ApolloClient(options));\r\n    }\r\n    /**\r\n     * Create a named ApolloClient, same as `apollo.create(options, name)`\r\n     * @param name client's name\r\n     * @param options ApolloClient's options\r\n     */\r\n    createNamed(name, options) {\r\n        if (this.map.has(name)) {\r\n            throw new Error(`Client ${name} has been already created`);\r\n        }\r\n        this.map.set(name, new ApolloBase(this._ngZone, this.flags, new ApolloClient(options)));\r\n    }\r\n    /**\r\n     * Remember to clean up the store before removing a client\r\n     * @param name client's name\r\n     */\r\n    removeClient(name) {\r\n        if (isDefault(name)) {\r\n            this._client = undefined;\r\n        }\r\n        else {\r\n            this.map.delete(name);\r\n        }\r\n    }\r\n}\r\nApollo.ɵfac = function Apollo_Factory(t) { return new (t || Apollo)(ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(APOLLO_OPTIONS, 8), ɵngcc0.ɵɵinject(APOLLO_NAMED_OPTIONS, 8), ɵngcc0.ɵɵinject(APOLLO_FLAGS, 8)); };\r\nApollo.ɵprov = i0.ɵɵdefineInjectable({ factory: function Apollo_Factory() { return new Apollo(i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(APOLLO_OPTIONS, 8), i0.ɵɵinject(APOLLO_NAMED_OPTIONS, 8), i0.ɵɵinject(APOLLO_FLAGS, 8)); }, token: Apollo, providedIn: \"root\" });\r\nApollo.ctorParameters = () => [\r\n    { type: NgZone },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [APOLLO_OPTIONS,] }] },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [APOLLO_NAMED_OPTIONS,] }] },\r\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [APOLLO_FLAGS,] }] }\r\n];\r\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(Apollo, [{\r\n        type: Injectable,\r\n        args: [{\r\n                providedIn: 'root'\r\n            }]\r\n    }], function () { return [{ type: ɵngcc0.NgZone }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [APOLLO_OPTIONS]\r\n            }] }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [APOLLO_NAMED_OPTIONS]\r\n            }] }, { type: undefined, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [APOLLO_FLAGS]\r\n            }] }]; }, null); })();\r\nfunction isDefault(name) {\r\n    return !name || name === 'default';\r\n}\r\n\r\nclass Query {\r\n    constructor(apollo) {\r\n        this.apollo = apollo;\r\n        this.client = 'default';\r\n    }\r\n    watch(variables, options) {\r\n        return this.apollo.use(this.client).watchQuery(Object.assign(Object.assign({}, options), { variables, query: this.document }));\r\n    }\r\n    fetch(variables, options) {\r\n        return this.apollo.use(this.client).query(Object.assign(Object.assign({}, options), { variables, query: this.document }));\r\n    }\r\n}\r\nQuery.ɵfac = function Query_Factory(t) { return new (t || Query)(ɵngcc0.ɵɵinject(Apollo)); };\r\nQuery.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: Query, factory: Query.ɵfac });\r\nQuery.ctorParameters = () => [\r\n    { type: Apollo }\r\n];\r\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(Query, [{\r\n        type: Injectable\r\n    }], function () { return [{ type: Apollo }]; }, null); })();\r\n\r\nclass Mutation {\r\n    constructor(apollo) {\r\n        this.apollo = apollo;\r\n        this.client = 'default';\r\n    }\r\n    mutate(variables, options) {\r\n        return this.apollo.use(this.client).mutate(Object.assign(Object.assign({}, options), { variables, mutation: this.document }));\r\n    }\r\n}\r\nMutation.ɵfac = function Mutation_Factory(t) { return new (t || Mutation)(ɵngcc0.ɵɵinject(Apollo)); };\r\nMutation.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: Mutation, factory: Mutation.ɵfac });\r\nMutation.ctorParameters = () => [\r\n    { type: Apollo }\r\n];\r\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(Mutation, [{\r\n        type: Injectable\r\n    }], function () { return [{ type: Apollo }]; }, null); })();\r\n\r\nclass Subscription {\r\n    constructor(apollo) {\r\n        this.apollo = apollo;\r\n        this.client = 'default';\r\n    }\r\n    subscribe(variables, options, extra) {\r\n        return this.apollo.use(this.client).subscribe(Object.assign(Object.assign({}, options), { variables, query: this.document }), extra);\r\n    }\r\n}\r\nSubscription.ɵfac = function Subscription_Factory(t) { return new (t || Subscription)(ɵngcc0.ɵɵinject(Apollo)); };\r\nSubscription.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: Subscription, factory: Subscription.ɵfac });\r\nSubscription.ctorParameters = () => [\r\n    { type: Apollo }\r\n];\r\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(Subscription, [{\r\n        type: Injectable\r\n    }], function () { return [{ type: Apollo }]; }, null); })();\r\n\r\n/**\r\n * Generated bundle index. Do not edit.\r\n */\r\n\r\nexport { APOLLO_FLAGS, APOLLO_NAMED_OPTIONS, APOLLO_OPTIONS, Apollo, ApolloBase, Mutation, Query, QueryRef, Subscription };\r\n\r\n","import { Trie } from '@wry/trie';\r\nexport { Trie as KeyTrie } from '@wry/trie';\r\nimport { Slot } from '@wry/context';\r\nexport { asyncFromGen, bind as bindContext, noContext, setTimeout } from '@wry/context';\r\n\r\nfunction defaultDispose() { }\r\nvar Cache = /** @class */ (function () {\r\n    function Cache(max, dispose) {\r\n        if (max === void 0) { max = Infinity; }\r\n        if (dispose === void 0) { dispose = defaultDispose; }\r\n        this.max = max;\r\n        this.dispose = dispose;\r\n        this.map = new Map();\r\n        this.newest = null;\r\n        this.oldest = null;\r\n    }\r\n    Cache.prototype.has = function (key) {\r\n        return this.map.has(key);\r\n    };\r\n    Cache.prototype.get = function (key) {\r\n        var node = this.getNode(key);\r\n        return node && node.value;\r\n    };\r\n    Cache.prototype.getNode = function (key) {\r\n        var node = this.map.get(key);\r\n        if (node && node !== this.newest) {\r\n            var older = node.older, newer = node.newer;\r\n            if (newer) {\r\n                newer.older = older;\r\n            }\r\n            if (older) {\r\n                older.newer = newer;\r\n            }\r\n            node.older = this.newest;\r\n            node.older.newer = node;\r\n            node.newer = null;\r\n            this.newest = node;\r\n            if (node === this.oldest) {\r\n                this.oldest = newer;\r\n            }\r\n        }\r\n        return node;\r\n    };\r\n    Cache.prototype.set = function (key, value) {\r\n        var node = this.getNode(key);\r\n        if (node) {\r\n            return node.value = value;\r\n        }\r\n        node = {\r\n            key: key,\r\n            value: value,\r\n            newer: null,\r\n            older: this.newest\r\n        };\r\n        if (this.newest) {\r\n            this.newest.newer = node;\r\n        }\r\n        this.newest = node;\r\n        this.oldest = this.oldest || node;\r\n        this.map.set(key, node);\r\n        return node.value;\r\n    };\r\n    Cache.prototype.clean = function () {\r\n        while (this.oldest && this.map.size > this.max) {\r\n            this.delete(this.oldest.key);\r\n        }\r\n    };\r\n    Cache.prototype.delete = function (key) {\r\n        var node = this.map.get(key);\r\n        if (node) {\r\n            if (node === this.newest) {\r\n                this.newest = node.older;\r\n            }\r\n            if (node === this.oldest) {\r\n                this.oldest = node.newer;\r\n            }\r\n            if (node.newer) {\r\n                node.newer.older = node.older;\r\n            }\r\n            if (node.older) {\r\n                node.older.newer = node.newer;\r\n            }\r\n            this.map.delete(key);\r\n            this.dispose(node.value, key);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return Cache;\r\n}());\r\n\r\nvar parentEntrySlot = new Slot();\r\n\r\nvar _a;\r\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\nvar \r\n// This Array.from polyfill is restricted to working with Set<any> for now,\r\n// but we can improve the polyfill and add other input types, as needed. Note\r\n// that this fallback implementation will only be used if the host environment\r\n// does not support a native Array.from function. In most modern JS runtimes,\r\n// the toArray function exported here will be === Array.from.\r\ntoArray = (_a = Array.from, _a === void 0 ? function (collection) {\r\n    var array = [];\r\n    collection.forEach(function (item) { return array.push(item); });\r\n    return array;\r\n} : _a);\r\nfunction maybeUnsubscribe(entryOrDep) {\r\n    var unsubscribe = entryOrDep.unsubscribe;\r\n    if (typeof unsubscribe === \"function\") {\r\n        entryOrDep.unsubscribe = void 0;\r\n        unsubscribe();\r\n    }\r\n}\r\n\r\nvar emptySetPool = [];\r\nvar POOL_TARGET_SIZE = 100;\r\n// Since this package might be used browsers, we should avoid using the\r\n// Node built-in assert module.\r\nfunction assert(condition, optionalMessage) {\r\n    if (!condition) {\r\n        throw new Error(optionalMessage || \"assertion failure\");\r\n    }\r\n}\r\nfunction valueIs(a, b) {\r\n    var len = a.length;\r\n    return (\r\n    // Unknown values are not equal to each other.\r\n    len > 0 &&\r\n        // Both values must be ordinary (or both exceptional) to be equal.\r\n        len === b.length &&\r\n        // The underlying value or exception must be the same.\r\n        a[len - 1] === b[len - 1]);\r\n}\r\nfunction valueGet(value) {\r\n    switch (value.length) {\r\n        case 0: throw new Error(\"unknown value\");\r\n        case 1: return value[0];\r\n        case 2: throw value[1];\r\n    }\r\n}\r\nfunction valueCopy(value) {\r\n    return value.slice(0);\r\n}\r\nvar Entry = /** @class */ (function () {\r\n    function Entry(fn) {\r\n        this.fn = fn;\r\n        this.parents = new Set();\r\n        this.childValues = new Map();\r\n        // When this Entry has children that are dirty, this property becomes\r\n        // a Set containing other Entry objects, borrowed from emptySetPool.\r\n        // When the set becomes empty, it gets recycled back to emptySetPool.\r\n        this.dirtyChildren = null;\r\n        this.dirty = true;\r\n        this.recomputing = false;\r\n        this.value = [];\r\n        this.deps = null;\r\n        ++Entry.count;\r\n    }\r\n    Entry.prototype.peek = function () {\r\n        if (this.value.length === 1 && !mightBeDirty(this)) {\r\n            rememberParent(this);\r\n            return this.value[0];\r\n        }\r\n    };\r\n    // This is the most important method of the Entry API, because it\r\n    // determines whether the cached this.value can be returned immediately,\r\n    // or must be recomputed. The overall performance of the caching system\r\n    // depends on the truth of the following observations: (1) this.dirty is\r\n    // usually false, (2) this.dirtyChildren is usually null/empty, and thus\r\n    // (3) valueGet(this.value) is usually returned without recomputation.\r\n    Entry.prototype.recompute = function (args) {\r\n        assert(!this.recomputing, \"already recomputing\");\r\n        rememberParent(this);\r\n        return mightBeDirty(this)\r\n            ? reallyRecompute(this, args)\r\n            : valueGet(this.value);\r\n    };\r\n    Entry.prototype.setDirty = function () {\r\n        if (this.dirty)\r\n            return;\r\n        this.dirty = true;\r\n        this.value.length = 0;\r\n        reportDirty(this);\r\n        // We can go ahead and unsubscribe here, since any further dirty\r\n        // notifications we receive will be redundant, and unsubscribing may\r\n        // free up some resources, e.g. file watchers.\r\n        maybeUnsubscribe(this);\r\n    };\r\n    Entry.prototype.dispose = function () {\r\n        var _this = this;\r\n        this.setDirty();\r\n        // Sever any dependency relationships with our own children, so those\r\n        // children don't retain this parent Entry in their child.parents sets,\r\n        // thereby preventing it from being fully garbage collected.\r\n        forgetChildren(this);\r\n        // Because this entry has been kicked out of the cache (in index.js),\r\n        // we've lost the ability to find out if/when this entry becomes dirty,\r\n        // whether that happens through a subscription, because of a direct call\r\n        // to entry.setDirty(), or because one of its children becomes dirty.\r\n        // Because of this loss of future information, we have to assume the\r\n        // worst (that this entry might have become dirty very soon), so we must\r\n        // immediately mark this entry's parents as dirty. Normally we could\r\n        // just call entry.setDirty() rather than calling parent.setDirty() for\r\n        // each parent, but that would leave this entry in parent.childValues\r\n        // and parent.dirtyChildren, which would prevent the child from being\r\n        // truly forgotten.\r\n        eachParent(this, function (parent, child) {\r\n            parent.setDirty();\r\n            forgetChild(parent, _this);\r\n        });\r\n    };\r\n    Entry.prototype.forget = function () {\r\n        // The code that creates Entry objects in index.ts will replace this method\r\n        // with one that actually removes the Entry from the cache, which will also\r\n        // trigger the entry.dispose method.\r\n        this.dispose();\r\n    };\r\n    Entry.prototype.dependOn = function (dep) {\r\n        dep.add(this);\r\n        if (!this.deps) {\r\n            this.deps = emptySetPool.pop() || new Set();\r\n        }\r\n        this.deps.add(dep);\r\n    };\r\n    Entry.prototype.forgetDeps = function () {\r\n        var _this = this;\r\n        if (this.deps) {\r\n            toArray(this.deps).forEach(function (dep) { return dep.delete(_this); });\r\n            this.deps.clear();\r\n            emptySetPool.push(this.deps);\r\n            this.deps = null;\r\n        }\r\n    };\r\n    Entry.count = 0;\r\n    return Entry;\r\n}());\r\nfunction rememberParent(child) {\r\n    var parent = parentEntrySlot.getValue();\r\n    if (parent) {\r\n        child.parents.add(parent);\r\n        if (!parent.childValues.has(child)) {\r\n            parent.childValues.set(child, []);\r\n        }\r\n        if (mightBeDirty(child)) {\r\n            reportDirtyChild(parent, child);\r\n        }\r\n        else {\r\n            reportCleanChild(parent, child);\r\n        }\r\n        return parent;\r\n    }\r\n}\r\nfunction reallyRecompute(entry, args) {\r\n    forgetChildren(entry);\r\n    // Set entry as the parent entry while calling recomputeNewValue(entry).\r\n    parentEntrySlot.withValue(entry, recomputeNewValue, [entry, args]);\r\n    if (maybeSubscribe(entry, args)) {\r\n        // If we successfully recomputed entry.value and did not fail to\r\n        // (re)subscribe, then this Entry is no longer explicitly dirty.\r\n        setClean(entry);\r\n    }\r\n    return valueGet(entry.value);\r\n}\r\nfunction recomputeNewValue(entry, args) {\r\n    entry.recomputing = true;\r\n    // Set entry.value as unknown.\r\n    entry.value.length = 0;\r\n    try {\r\n        // If entry.fn succeeds, entry.value will become a normal Value.\r\n        entry.value[0] = entry.fn.apply(null, args);\r\n    }\r\n    catch (e) {\r\n        // If entry.fn throws, entry.value will become exceptional.\r\n        entry.value[1] = e;\r\n    }\r\n    // Either way, this line is always reached.\r\n    entry.recomputing = false;\r\n}\r\nfunction mightBeDirty(entry) {\r\n    return entry.dirty || !!(entry.dirtyChildren && entry.dirtyChildren.size);\r\n}\r\nfunction setClean(entry) {\r\n    entry.dirty = false;\r\n    if (mightBeDirty(entry)) {\r\n        // This Entry may still have dirty children, in which case we can't\r\n        // let our parents know we're clean just yet.\r\n        return;\r\n    }\r\n    reportClean(entry);\r\n}\r\nfunction reportDirty(child) {\r\n    eachParent(child, reportDirtyChild);\r\n}\r\nfunction reportClean(child) {\r\n    eachParent(child, reportCleanChild);\r\n}\r\nfunction eachParent(child, callback) {\r\n    var parentCount = child.parents.size;\r\n    if (parentCount) {\r\n        var parents = toArray(child.parents);\r\n        for (var i = 0; i < parentCount; ++i) {\r\n            callback(parents[i], child);\r\n        }\r\n    }\r\n}\r\n// Let a parent Entry know that one of its children may be dirty.\r\nfunction reportDirtyChild(parent, child) {\r\n    // Must have called rememberParent(child) before calling\r\n    // reportDirtyChild(parent, child).\r\n    assert(parent.childValues.has(child));\r\n    assert(mightBeDirty(child));\r\n    var parentWasClean = !mightBeDirty(parent);\r\n    if (!parent.dirtyChildren) {\r\n        parent.dirtyChildren = emptySetPool.pop() || new Set;\r\n    }\r\n    else if (parent.dirtyChildren.has(child)) {\r\n        // If we already know this child is dirty, then we must have already\r\n        // informed our own parents that we are dirty, so we can terminate\r\n        // the recursion early.\r\n        return;\r\n    }\r\n    parent.dirtyChildren.add(child);\r\n    // If parent was clean before, it just became (possibly) dirty (according to\r\n    // mightBeDirty), since we just added child to parent.dirtyChildren.\r\n    if (parentWasClean) {\r\n        reportDirty(parent);\r\n    }\r\n}\r\n// Let a parent Entry know that one of its children is no longer dirty.\r\nfunction reportCleanChild(parent, child) {\r\n    // Must have called rememberChild(child) before calling\r\n    // reportCleanChild(parent, child).\r\n    assert(parent.childValues.has(child));\r\n    assert(!mightBeDirty(child));\r\n    var childValue = parent.childValues.get(child);\r\n    if (childValue.length === 0) {\r\n        parent.childValues.set(child, valueCopy(child.value));\r\n    }\r\n    else if (!valueIs(childValue, child.value)) {\r\n        parent.setDirty();\r\n    }\r\n    removeDirtyChild(parent, child);\r\n    if (mightBeDirty(parent)) {\r\n        return;\r\n    }\r\n    reportClean(parent);\r\n}\r\nfunction removeDirtyChild(parent, child) {\r\n    var dc = parent.dirtyChildren;\r\n    if (dc) {\r\n        dc.delete(child);\r\n        if (dc.size === 0) {\r\n            if (emptySetPool.length < POOL_TARGET_SIZE) {\r\n                emptySetPool.push(dc);\r\n            }\r\n            parent.dirtyChildren = null;\r\n        }\r\n    }\r\n}\r\n// Removes all children from this entry and returns an array of the\r\n// removed children.\r\nfunction forgetChildren(parent) {\r\n    if (parent.childValues.size > 0) {\r\n        parent.childValues.forEach(function (_value, child) {\r\n            forgetChild(parent, child);\r\n        });\r\n    }\r\n    // Remove this parent Entry from any sets to which it was added by the\r\n    // addToSet method.\r\n    parent.forgetDeps();\r\n    // After we forget all our children, this.dirtyChildren must be empty\r\n    // and therefore must have been reset to null.\r\n    assert(parent.dirtyChildren === null);\r\n}\r\nfunction forgetChild(parent, child) {\r\n    child.parents.delete(parent);\r\n    parent.childValues.delete(child);\r\n    removeDirtyChild(parent, child);\r\n}\r\nfunction maybeSubscribe(entry, args) {\r\n    if (typeof entry.subscribe === \"function\") {\r\n        try {\r\n            maybeUnsubscribe(entry); // Prevent double subscriptions.\r\n            entry.unsubscribe = entry.subscribe.apply(null, args);\r\n        }\r\n        catch (e) {\r\n            // If this Entry has a subscribe function and it threw an exception\r\n            // (or an unsubscribe function it previously returned now throws),\r\n            // return false to indicate that we were not able to subscribe (or\r\n            // unsubscribe), and this Entry should remain dirty.\r\n            entry.setDirty();\r\n            return false;\r\n        }\r\n    }\r\n    // Returning true indicates either that there was no entry.subscribe\r\n    // function or that it succeeded.\r\n    return true;\r\n}\r\n\r\nvar EntryMethods = {\r\n    setDirty: true,\r\n    dispose: true,\r\n    forget: true,\r\n};\r\nfunction dep(options) {\r\n    var depsByKey = new Map();\r\n    var subscribe = options && options.subscribe;\r\n    function depend(key) {\r\n        var parent = parentEntrySlot.getValue();\r\n        if (parent) {\r\n            var dep_1 = depsByKey.get(key);\r\n            if (!dep_1) {\r\n                depsByKey.set(key, dep_1 = new Set);\r\n            }\r\n            parent.dependOn(dep_1);\r\n            if (typeof subscribe === \"function\") {\r\n                maybeUnsubscribe(dep_1);\r\n                dep_1.unsubscribe = subscribe(key);\r\n            }\r\n        }\r\n    }\r\n    depend.dirty = function dirty(key, entryMethodName) {\r\n        var dep = depsByKey.get(key);\r\n        if (dep) {\r\n            var m_1 = (entryMethodName &&\r\n                hasOwnProperty.call(EntryMethods, entryMethodName)) ? entryMethodName : \"setDirty\";\r\n            // We have to use toArray(dep).forEach instead of dep.forEach, because\r\n            // modifying a Set while iterating over it can cause elements in the Set\r\n            // to be removed from the Set before they've been iterated over.\r\n            toArray(dep).forEach(function (entry) { return entry[m_1](); });\r\n            depsByKey.delete(key);\r\n            maybeUnsubscribe(dep);\r\n        }\r\n    };\r\n    return depend;\r\n}\r\n\r\nfunction makeDefaultMakeCacheKeyFunction() {\r\n    var keyTrie = new Trie(typeof WeakMap === \"function\");\r\n    return function () {\r\n        return keyTrie.lookupArray(arguments);\r\n    };\r\n}\r\n// The defaultMakeCacheKey function is remarkably powerful, because it gives\r\n// a unique object for any shallow-identical list of arguments. If you need\r\n// to implement a custom makeCacheKey function, you may find it helpful to\r\n// delegate the final work to defaultMakeCacheKey, which is why we export it\r\n// here. However, you may want to avoid defaultMakeCacheKey if your runtime\r\n// does not support WeakMap, or you have the ability to return a string key.\r\n// In those cases, just write your own custom makeCacheKey functions.\r\nvar defaultMakeCacheKey = makeDefaultMakeCacheKeyFunction();\r\nvar caches = new Set();\r\nfunction wrap(originalFunction, options) {\r\n    if (options === void 0) { options = Object.create(null); }\r\n    var cache = new Cache(options.max || Math.pow(2, 16), function (entry) { return entry.dispose(); });\r\n    var keyArgs = options.keyArgs;\r\n    var makeCacheKey = options.makeCacheKey ||\r\n        makeDefaultMakeCacheKeyFunction();\r\n    var optimistic = function () {\r\n        var key = makeCacheKey.apply(null, keyArgs ? keyArgs.apply(null, arguments) : arguments);\r\n        if (key === void 0) {\r\n            return originalFunction.apply(null, arguments);\r\n        }\r\n        var entry = cache.get(key);\r\n        if (!entry) {\r\n            cache.set(key, entry = new Entry(originalFunction));\r\n            entry.subscribe = options.subscribe;\r\n            // Give the Entry the ability to trigger cache.delete(key), even though\r\n            // the Entry itself does not know about key or cache.\r\n            entry.forget = function () { return cache.delete(key); };\r\n        }\r\n        var value = entry.recompute(Array.prototype.slice.call(arguments));\r\n        // Move this entry to the front of the least-recently used queue,\r\n        // since we just finished computing its value.\r\n        cache.set(key, entry);\r\n        caches.add(cache);\r\n        // Clean up any excess entries in the cache, but only if there is no\r\n        // active parent entry, meaning we're not in the middle of a larger\r\n        // computation that might be flummoxed by the cleaning.\r\n        if (!parentEntrySlot.hasValue()) {\r\n            caches.forEach(function (cache) { return cache.clean(); });\r\n            caches.clear();\r\n        }\r\n        return value;\r\n    };\r\n    Object.defineProperty(optimistic, \"size\", {\r\n        get: function () {\r\n            return cache[\"map\"].size;\r\n        },\r\n        configurable: false,\r\n        enumerable: false,\r\n    });\r\n    function dirtyKey(key) {\r\n        var entry = cache.get(key);\r\n        if (entry) {\r\n            entry.setDirty();\r\n        }\r\n    }\r\n    optimistic.dirtyKey = dirtyKey;\r\n    optimistic.dirty = function dirty() {\r\n        dirtyKey(makeCacheKey.apply(null, arguments));\r\n    };\r\n    function peekKey(key) {\r\n        var entry = cache.get(key);\r\n        if (entry) {\r\n            return entry.peek();\r\n        }\r\n    }\r\n    optimistic.peekKey = peekKey;\r\n    optimistic.peek = function peek() {\r\n        return peekKey(makeCacheKey.apply(null, arguments));\r\n    };\r\n    function forgetKey(key) {\r\n        return cache.delete(key);\r\n    }\r\n    optimistic.forgetKey = forgetKey;\r\n    optimistic.forget = function forget() {\r\n        return forgetKey(makeCacheKey.apply(null, arguments));\r\n    };\r\n    optimistic.makeCacheKey = makeCacheKey;\r\n    optimistic.getKey = keyArgs ? function getKey() {\r\n        return makeCacheKey.apply(null, keyArgs.apply(null, arguments));\r\n    } : makeCacheKey;\r\n    return Object.freeze(optimistic);\r\n}\r\n\r\nexport { defaultMakeCacheKey, dep, wrap };\r\n\n","import { __extends } from 'tslib';\r\n\r\nvar genericMessage = \"Invariant Violation\";\r\nvar _a = Object.setPrototypeOf, setPrototypeOf = _a === void 0 ? function (obj, proto) {\r\n    obj.__proto__ = proto;\r\n    return obj;\r\n} : _a;\r\nvar InvariantError = /** @class */ (function (_super) {\r\n    __extends(InvariantError, _super);\r\n    function InvariantError(message) {\r\n        if (message === void 0) { message = genericMessage; }\r\n        var _this = _super.call(this, typeof message === \"number\"\r\n            ? genericMessage + \": \" + message + \" (see https://github.com/apollographql/invariant-packages)\"\r\n            : message) || this;\r\n        _this.framesToPop = 1;\r\n        _this.name = genericMessage;\r\n        setPrototypeOf(_this, InvariantError.prototype);\r\n        return _this;\r\n    }\r\n    return InvariantError;\r\n}(Error));\r\nfunction invariant(condition, message) {\r\n    if (!condition) {\r\n        throw new InvariantError(message);\r\n    }\r\n}\r\nvar verbosityLevels = [\"debug\", \"log\", \"warn\", \"error\", \"silent\"];\r\nvar verbosityLevel = verbosityLevels.indexOf(\"log\");\r\nfunction wrapConsoleMethod(name) {\r\n    return function () {\r\n        if (verbosityLevels.indexOf(name) >= verbosityLevel) {\r\n            // Default to console.log if this host environment happens not to provide\r\n            // all the console.* methods we need.\r\n            var method = console[name] || console.log;\r\n            return method.apply(console, arguments);\r\n        }\r\n    };\r\n}\r\n(function (invariant) {\r\n    invariant.debug = wrapConsoleMethod(\"debug\");\r\n    invariant.log = wrapConsoleMethod(\"log\");\r\n    invariant.warn = wrapConsoleMethod(\"warn\");\r\n    invariant.error = wrapConsoleMethod(\"error\");\r\n})(invariant || (invariant = {}));\r\nfunction setVerbosity(level) {\r\n    var old = verbosityLevels[verbosityLevel];\r\n    verbosityLevel = Math.max(0, verbosityLevels.indexOf(level));\r\n    return old;\r\n}\r\nvar invariant$1 = invariant;\r\n\r\nexport { InvariantError, invariant$1 as default, invariant, setVerbosity };\r\n\n","function maybe(thunk) {\r\n  try { return thunk() } catch (_) {}\r\n}\r\n\r\nvar safeGlobal = (\r\n  maybe(function() { return globalThis }) ||\r\n  maybe(function() { return window }) ||\r\n  maybe(function() { return self }) ||\r\n  maybe(function() { return global }) ||\r\n  maybe(function() { return Function(\"return this\")() })\r\n);\r\n\r\nvar needToRemove = false;\r\n\r\nexport function install() {\r\n  if (safeGlobal &&\r\n      !maybe(function() { return process.env.NODE_ENV }) &&\r\n      !maybe(function() { return process })) {\r\n    Object.defineProperty(safeGlobal, \"process\", {\r\n      value: {\r\n        env: {\r\n          // This default needs to be \"production\" instead of \"development\", to\r\n          // avoid the problem https://github.com/graphql/graphql-js/pull/2894\r\n          // will eventually solve, once merged and released.\r\n          NODE_ENV: \"production\",\r\n        },\r\n      },\r\n      // Let anyone else change global.process as they see fit, but hide it from\r\n      // Object.keys(global) enumeration.\r\n      configurable: true,\r\n      enumerable: false,\r\n      writable: true,\r\n    });\r\n    needToRemove = true;\r\n  }\r\n}\r\n\r\n// Call install() at least once, when this module is imported.\r\ninstall();\r\n\r\nexport function remove() {\r\n  if (needToRemove) {\r\n    delete safeGlobal.process;\r\n    needToRemove = false;\r\n  }\r\n}\r\n","function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\n// === Symbol Support ===\r\nvar hasSymbols = function () {\r\n  return typeof Symbol === 'function';\r\n};\r\n\r\nvar hasSymbol = function (name) {\r\n  return hasSymbols() && Boolean(Symbol[name]);\r\n};\r\n\r\nvar getSymbol = function (name) {\r\n  return hasSymbol(name) ? Symbol[name] : '@@' + name;\r\n};\r\n\r\nif (hasSymbols() && !hasSymbol('observable')) {\r\n  Symbol.observable = Symbol('observable');\r\n}\r\n\r\nvar SymbolIterator = getSymbol('iterator');\r\nvar SymbolObservable = getSymbol('observable');\r\nvar SymbolSpecies = getSymbol('species'); // === Abstract Operations ===\r\n\r\nfunction getMethod(obj, key) {\r\n  var value = obj[key];\r\n  if (value == null) return undefined;\r\n  if (typeof value !== 'function') throw new TypeError(value + ' is not a function');\r\n  return value;\r\n}\r\n\r\nfunction getSpecies(obj) {\r\n  var ctor = obj.constructor;\r\n\r\n  if (ctor !== undefined) {\r\n    ctor = ctor[SymbolSpecies];\r\n\r\n    if (ctor === null) {\r\n      ctor = undefined;\r\n    }\r\n  }\r\n\r\n  return ctor !== undefined ? ctor : Observable;\r\n}\r\n\r\nfunction isObservable(x) {\r\n  return x instanceof Observable; // SPEC: Brand check\r\n}\r\n\r\nfunction hostReportError(e) {\r\n  if (hostReportError.log) {\r\n    hostReportError.log(e);\r\n  } else {\r\n    setTimeout(function () {\r\n      throw e;\r\n    });\r\n  }\r\n}\r\n\r\nfunction enqueue(fn) {\r\n  Promise.resolve().then(function () {\r\n    try {\r\n      fn();\r\n    } catch (e) {\r\n      hostReportError(e);\r\n    }\r\n  });\r\n}\r\n\r\nfunction cleanupSubscription(subscription) {\r\n  var cleanup = subscription._cleanup;\r\n  if (cleanup === undefined) return;\r\n  subscription._cleanup = undefined;\r\n\r\n  if (!cleanup) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    if (typeof cleanup === 'function') {\r\n      cleanup();\r\n    } else {\r\n      var unsubscribe = getMethod(cleanup, 'unsubscribe');\r\n\r\n      if (unsubscribe) {\r\n        unsubscribe.call(cleanup);\r\n      }\r\n    }\r\n  } catch (e) {\r\n    hostReportError(e);\r\n  }\r\n}\r\n\r\nfunction closeSubscription(subscription) {\r\n  subscription._observer = undefined;\r\n  subscription._queue = undefined;\r\n  subscription._state = 'closed';\r\n}\r\n\r\nfunction flushSubscription(subscription) {\r\n  var queue = subscription._queue;\r\n\r\n  if (!queue) {\r\n    return;\r\n  }\r\n\r\n  subscription._queue = undefined;\r\n  subscription._state = 'ready';\r\n\r\n  for (var i = 0; i < queue.length; ++i) {\r\n    notifySubscription(subscription, queue[i].type, queue[i].value);\r\n    if (subscription._state === 'closed') break;\r\n  }\r\n}\r\n\r\nfunction notifySubscription(subscription, type, value) {\r\n  subscription._state = 'running';\r\n  var observer = subscription._observer;\r\n\r\n  try {\r\n    var m = getMethod(observer, type);\r\n\r\n    switch (type) {\r\n      case 'next':\r\n        if (m) m.call(observer, value);\r\n        break;\r\n\r\n      case 'error':\r\n        closeSubscription(subscription);\r\n        if (m) m.call(observer, value);else throw value;\r\n        break;\r\n\r\n      case 'complete':\r\n        closeSubscription(subscription);\r\n        if (m) m.call(observer);\r\n        break;\r\n    }\r\n  } catch (e) {\r\n    hostReportError(e);\r\n  }\r\n\r\n  if (subscription._state === 'closed') cleanupSubscription(subscription);else if (subscription._state === 'running') subscription._state = 'ready';\r\n}\r\n\r\nfunction onNotify(subscription, type, value) {\r\n  if (subscription._state === 'closed') return;\r\n\r\n  if (subscription._state === 'buffering') {\r\n    subscription._queue.push({\r\n      type: type,\r\n      value: value\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  if (subscription._state !== 'ready') {\r\n    subscription._state = 'buffering';\r\n    subscription._queue = [{\r\n      type: type,\r\n      value: value\r\n    }];\r\n    enqueue(function () {\r\n      return flushSubscription(subscription);\r\n    });\r\n    return;\r\n  }\r\n\r\n  notifySubscription(subscription, type, value);\r\n}\r\n\r\nvar Subscription = /*#__PURE__*/function () {\r\n  function Subscription(observer, subscriber) {\r\n    // ASSERT: observer is an object\r\n    // ASSERT: subscriber is callable\r\n    this._cleanup = undefined;\r\n    this._observer = observer;\r\n    this._queue = undefined;\r\n    this._state = 'initializing';\r\n    var subscriptionObserver = new SubscriptionObserver(this);\r\n\r\n    try {\r\n      this._cleanup = subscriber.call(undefined, subscriptionObserver);\r\n    } catch (e) {\r\n      subscriptionObserver.error(e);\r\n    }\r\n\r\n    if (this._state === 'initializing') this._state = 'ready';\r\n  }\r\n\r\n  var _proto = Subscription.prototype;\r\n\r\n  _proto.unsubscribe = function unsubscribe() {\r\n    if (this._state !== 'closed') {\r\n      closeSubscription(this);\r\n      cleanupSubscription(this);\r\n    }\r\n  };\r\n\r\n  _createClass(Subscription, [{\r\n    key: \"closed\",\r\n    get: function () {\r\n      return this._state === 'closed';\r\n    }\r\n  }]);\r\n\r\n  return Subscription;\r\n}();\r\n\r\nvar SubscriptionObserver = /*#__PURE__*/function () {\r\n  function SubscriptionObserver(subscription) {\r\n    this._subscription = subscription;\r\n  }\r\n\r\n  var _proto2 = SubscriptionObserver.prototype;\r\n\r\n  _proto2.next = function next(value) {\r\n    onNotify(this._subscription, 'next', value);\r\n  };\r\n\r\n  _proto2.error = function error(value) {\r\n    onNotify(this._subscription, 'error', value);\r\n  };\r\n\r\n  _proto2.complete = function complete() {\r\n    onNotify(this._subscription, 'complete');\r\n  };\r\n\r\n  _createClass(SubscriptionObserver, [{\r\n    key: \"closed\",\r\n    get: function () {\r\n      return this._subscription._state === 'closed';\r\n    }\r\n  }]);\r\n\r\n  return SubscriptionObserver;\r\n}();\r\n\r\nvar Observable = /*#__PURE__*/function () {\r\n  function Observable(subscriber) {\r\n    if (!(this instanceof Observable)) throw new TypeError('Observable cannot be called as a function');\r\n    if (typeof subscriber !== 'function') throw new TypeError('Observable initializer must be a function');\r\n    this._subscriber = subscriber;\r\n  }\r\n\r\n  var _proto3 = Observable.prototype;\r\n\r\n  _proto3.subscribe = function subscribe(observer) {\r\n    if (typeof observer !== 'object' || observer === null) {\r\n      observer = {\r\n        next: observer,\r\n        error: arguments[1],\r\n        complete: arguments[2]\r\n      };\r\n    }\r\n\r\n    return new Subscription(observer, this._subscriber);\r\n  };\r\n\r\n  _proto3.forEach = function forEach(fn) {\r\n    var _this = this;\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      if (typeof fn !== 'function') {\r\n        reject(new TypeError(fn + ' is not a function'));\r\n        return;\r\n      }\r\n\r\n      function done() {\r\n        subscription.unsubscribe();\r\n        resolve();\r\n      }\r\n\r\n      var subscription = _this.subscribe({\r\n        next: function (value) {\r\n          try {\r\n            fn(value, done);\r\n          } catch (e) {\r\n            reject(e);\r\n            subscription.unsubscribe();\r\n          }\r\n        },\r\n        error: reject,\r\n        complete: resolve\r\n      });\r\n    });\r\n  };\r\n\r\n  _proto3.map = function map(fn) {\r\n    var _this2 = this;\r\n\r\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\r\n    var C = getSpecies(this);\r\n    return new C(function (observer) {\r\n      return _this2.subscribe({\r\n        next: function (value) {\r\n          try {\r\n            value = fn(value);\r\n          } catch (e) {\r\n            return observer.error(e);\r\n          }\r\n\r\n          observer.next(value);\r\n        },\r\n        error: function (e) {\r\n          observer.error(e);\r\n        },\r\n        complete: function () {\r\n          observer.complete();\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  _proto3.filter = function filter(fn) {\r\n    var _this3 = this;\r\n\r\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\r\n    var C = getSpecies(this);\r\n    return new C(function (observer) {\r\n      return _this3.subscribe({\r\n        next: function (value) {\r\n          try {\r\n            if (!fn(value)) return;\r\n          } catch (e) {\r\n            return observer.error(e);\r\n          }\r\n\r\n          observer.next(value);\r\n        },\r\n        error: function (e) {\r\n          observer.error(e);\r\n        },\r\n        complete: function () {\r\n          observer.complete();\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  _proto3.reduce = function reduce(fn) {\r\n    var _this4 = this;\r\n\r\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\r\n    var C = getSpecies(this);\r\n    var hasSeed = arguments.length > 1;\r\n    var hasValue = false;\r\n    var seed = arguments[1];\r\n    var acc = seed;\r\n    return new C(function (observer) {\r\n      return _this4.subscribe({\r\n        next: function (value) {\r\n          var first = !hasValue;\r\n          hasValue = true;\r\n\r\n          if (!first || hasSeed) {\r\n            try {\r\n              acc = fn(acc, value);\r\n            } catch (e) {\r\n              return observer.error(e);\r\n            }\r\n          } else {\r\n            acc = value;\r\n          }\r\n        },\r\n        error: function (e) {\r\n          observer.error(e);\r\n        },\r\n        complete: function () {\r\n          if (!hasValue && !hasSeed) return observer.error(new TypeError('Cannot reduce an empty sequence'));\r\n          observer.next(acc);\r\n          observer.complete();\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  _proto3.concat = function concat() {\r\n    var _this5 = this;\r\n\r\n    for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\r\n      sources[_key] = arguments[_key];\r\n    }\r\n\r\n    var C = getSpecies(this);\r\n    return new C(function (observer) {\r\n      var subscription;\r\n      var index = 0;\r\n\r\n      function startNext(next) {\r\n        subscription = next.subscribe({\r\n          next: function (v) {\r\n            observer.next(v);\r\n          },\r\n          error: function (e) {\r\n            observer.error(e);\r\n          },\r\n          complete: function () {\r\n            if (index === sources.length) {\r\n              subscription = undefined;\r\n              observer.complete();\r\n            } else {\r\n              startNext(C.from(sources[index++]));\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      startNext(_this5);\r\n      return function () {\r\n        if (subscription) {\r\n          subscription.unsubscribe();\r\n          subscription = undefined;\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  _proto3.flatMap = function flatMap(fn) {\r\n    var _this6 = this;\r\n\r\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\r\n    var C = getSpecies(this);\r\n    return new C(function (observer) {\r\n      var subscriptions = [];\r\n\r\n      var outer = _this6.subscribe({\r\n        next: function (value) {\r\n          if (fn) {\r\n            try {\r\n              value = fn(value);\r\n            } catch (e) {\r\n              return observer.error(e);\r\n            }\r\n          }\r\n\r\n          var inner = C.from(value).subscribe({\r\n            next: function (value) {\r\n              observer.next(value);\r\n            },\r\n            error: function (e) {\r\n              observer.error(e);\r\n            },\r\n            complete: function () {\r\n              var i = subscriptions.indexOf(inner);\r\n              if (i >= 0) subscriptions.splice(i, 1);\r\n              completeIfDone();\r\n            }\r\n          });\r\n          subscriptions.push(inner);\r\n        },\r\n        error: function (e) {\r\n          observer.error(e);\r\n        },\r\n        complete: function () {\r\n          completeIfDone();\r\n        }\r\n      });\r\n\r\n      function completeIfDone() {\r\n        if (outer.closed && subscriptions.length === 0) observer.complete();\r\n      }\r\n\r\n      return function () {\r\n        subscriptions.forEach(function (s) {\r\n          return s.unsubscribe();\r\n        });\r\n        outer.unsubscribe();\r\n      };\r\n    });\r\n  };\r\n\r\n  _proto3[SymbolObservable] = function () {\r\n    return this;\r\n  };\r\n\r\n  Observable.from = function from(x) {\r\n    var C = typeof this === 'function' ? this : Observable;\r\n    if (x == null) throw new TypeError(x + ' is not an object');\r\n    var method = getMethod(x, SymbolObservable);\r\n\r\n    if (method) {\r\n      var observable = method.call(x);\r\n      if (Object(observable) !== observable) throw new TypeError(observable + ' is not an object');\r\n      if (isObservable(observable) && observable.constructor === C) return observable;\r\n      return new C(function (observer) {\r\n        return observable.subscribe(observer);\r\n      });\r\n    }\r\n\r\n    if (hasSymbol('iterator')) {\r\n      method = getMethod(x, SymbolIterator);\r\n\r\n      if (method) {\r\n        return new C(function (observer) {\r\n          enqueue(function () {\r\n            if (observer.closed) return;\r\n\r\n            for (var _iterator = _createForOfIteratorHelperLoose(method.call(x)), _step; !(_step = _iterator()).done;) {\r\n              var item = _step.value;\r\n              observer.next(item);\r\n              if (observer.closed) return;\r\n            }\r\n\r\n            observer.complete();\r\n          });\r\n        });\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(x)) {\r\n      return new C(function (observer) {\r\n        enqueue(function () {\r\n          if (observer.closed) return;\r\n\r\n          for (var i = 0; i < x.length; ++i) {\r\n            observer.next(x[i]);\r\n            if (observer.closed) return;\r\n          }\r\n\r\n          observer.complete();\r\n        });\r\n      });\r\n    }\r\n\r\n    throw new TypeError(x + ' is not observable');\r\n  };\r\n\r\n  Observable.of = function of() {\r\n    for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      items[_key2] = arguments[_key2];\r\n    }\r\n\r\n    var C = typeof this === 'function' ? this : Observable;\r\n    return new C(function (observer) {\r\n      enqueue(function () {\r\n        if (observer.closed) return;\r\n\r\n        for (var i = 0; i < items.length; ++i) {\r\n          observer.next(items[i]);\r\n          if (observer.closed) return;\r\n        }\r\n\r\n        observer.complete();\r\n      });\r\n    });\r\n  };\r\n\r\n  _createClass(Observable, null, [{\r\n    key: SymbolSpecies,\r\n    get: function () {\r\n      return this;\r\n    }\r\n  }]);\r\n\r\n  return Observable;\r\n}();\r\n\r\nif (hasSymbols()) {\r\n  Object.defineProperty(Observable, Symbol('extensions'), {\r\n    value: {\r\n      symbol: SymbolObservable,\r\n      hostReportError: hostReportError\r\n    },\r\n    configurable: true\r\n  });\r\n}\r\n\r\nexport { Observable };\r\n"]}