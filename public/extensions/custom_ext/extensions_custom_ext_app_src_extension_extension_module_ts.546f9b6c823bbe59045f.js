"use strict";(self.webpackChunkcustomExt=self.webpackChunkcustomExt||[]).push([["extensions_custom_ext_app_src_extension_extension_module_ts"],{6381:(j,x,e)=>{e(7255),e(6660),e(2445),e(4468),e(1090),e(9764)},2523:(j,x,e)=>{e(1180),e(2343),e(273),e(9764),e(2445),e(4468),e(1090),e(8383),e(6381)},3015:(j,x,e)=>{e.d(x,{n:()=>n});var h=e(1090),s=e(2594),O=e(8383),y=e(9764),m=e(4468);let n=(()=>{class i{}return i.\u0275fac=function(R){return new(R||i)},i.\u0275mod=m.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=m.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.AngularSvgIconModule,O.CdkTableModule,y.FieldModule,y.SortButtonModule,y.LineActionModule,y.LoadingSpinnerModule,y.LabelModule,y.FullPageSpinnerModule]]}),i})()},8906:(j,x,e)=>{e(4468),e(1090),e(2523),e(9764)},5770:(j,x,e)=>{e.d(x,{o:()=>d});var h=e(1090),s=e(2594),O=e(9764),y=e(3015),v=e(4468);let d=(()=>{class n{}return n.\u0275fac=function(D){return new(D||n)},n.\u0275mod=v.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=v.\u0275\u0275defineInjector({imports:[[h.CommonModule,O.TableHeaderModule,y.n,O.TableFooterModule,s.AngularSvgIconModule]]}),n})()},9139:(j,x,e)=>{e.d(x,{Y:()=>L});var h=e(7255),s=e(4562),O=e(1180),y=e(2343),m=e(9764),n=e(4468),D=e(1090);function c(M,E){1&M&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",3),n.\u0275\u0275elementContainerEnd())}function U(M,E){if(1&M&&n.\u0275\u0275element(0,"scrm-list-filter",8),2&M){const p=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",p.filterConfig)}}function B(M,E){1&M&&n.\u0275\u0275element(0,"scrm-loading-spinner",11),2&M&&n.\u0275\u0275property("overlay",!0)}function F(M,E){if(1&M&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,B,1,1,"scrm-loading-spinner",10),n.\u0275\u0275elementContainerEnd()),2&M){const p=E.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",p)}}function P(M,E){if(1&M&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"div",4),n.\u0275\u0275elementStart(3,"div",5),n.\u0275\u0275elementStart(4,"div",6),n.\u0275\u0275template(5,U,1,1,"scrm-list-filter",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",5),n.\u0275\u0275elementStart(7,"div",6),n.\u0275\u0275elementStart(8,"scrm-button",8),n.\u0275\u0275text(9,"Select"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"div",9),n.\u0275\u0275elementStart(11,"div",6),n.\u0275\u0275element(12,"scrm-table",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,F,2,1,"ng-container",2),n.\u0275\u0275pipe(14,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&M){const p=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",p.filterConfig),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",p.selectButton),n.\u0275\u0275advance(4),n.\u0275\u0275property("config",p.tableConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(14,4,p.loading$))}}let L=(()=>{class M{constructor(p,a,_,g){this.activeModal=p,this.storeFactory=a,this.languages=_,this.maxColumnCalculator=g,this.titleKey="",this.adapter=null,this.filterAdapter=null,this.select=!1,this.subs=[],this.store=this.storeFactory.create()}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}},this.selectButton={klass:["btn","btn-outline-dark","btn-sm"],onClick:()=>{this.subs.push(this.store.recordList.selection$.pipe((0,y.distinctUntilChanged)()).subscribe(p=>{!p||!p.selected||Object.keys(p.selected).length<1||this.activeModal.close({selection:p,records:this.store.recordList.records})}))}},this.init()}ngOnDestroy(){this.subs.forEach(p=>p.unsubscribe())}init(){!this.module||(this.initStore(),this.initTableAdapter(),this.initFilterAdapters())}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns((0,O.of)(!0))}initTableAdapter(){null===this.adapter&&(this.adapter=new m.ModalRecordListTableAdapter),this.tableConfig=this.adapter.getTable(this.store,!0),this.tableConfig.maxColumns$=this.getMaxColumns(),this.tableConfig.selection=this.store.recordList,this.tableConfig.selection$=this.store.recordList.selection$}initFilterAdapters(){null===this.filterAdapter&&(this.filterAdapter=new m.ModalRecordFilterAdapter),this.filterConfig=this.filterAdapter.getConfig(this.store)}initStore(){var p;this.store.init(this.module,null!==(p=this.parentModule)&&void 0!==p?p:""),this.loading$=this.store.metadataLoading$}}return M.\u0275fac=function(p){return new(p||M)(n.\u0275\u0275directiveInject(h.NgbActiveModal),n.\u0275\u0275directiveInject(m.RecordListModalStoreFactory),n.\u0275\u0275directiveInject(m.LanguageStore),n.\u0275\u0275directiveInject(m.MaxColumnsCalculator))},M.\u0275cmp=n.\u0275\u0275defineComponent({type:M,selectors:[["scrm-multiselect-record-list-modal"]],inputs:{titleKey:"titleKey",module:"module",parentModule:"parentModule",adapter:"adapter",filterAdapter:"filterAdapter"},features:[n.\u0275\u0275ProvidersFeature([m.MaxColumnsCalculator])],decls:4,vars:5,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","headerKlass","border-0","klass","record-list-modal",3,"closable","close","title"],["modal-body",""],[4,"ngIf"],["labelKey","LBL_CONFIG_NO_CONFIG"],[1,"container-fluid"],[1,"row","pb-3"],[1,"col"],[3,"config",4,"ngIf"],[3,"config"],[1,"row"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(p,a){1&p&&(n.\u0275\u0275elementStart(0,"scrm-modal",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275template(2,c,2,0,"ng-container",2),n.\u0275\u0275template(3,P,15,6,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&p&&(n.\u0275\u0275property("closable",!0)("close",a.closeButton)("title",a.titleKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!a.tableConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",a.tableConfig))},directives:[m.ModalComponent,D.NgIf,m.LabelComponent,m.ButtonComponent,m.TableComponent,m.ListFilterComponent,m.LoadingSpinnerComponent],pipes:[D.AsyncPipe],encapsulation:2,data:{animation:[(0,s.trigger)("modalFade",[(0,s.transition)("void <=> *",[(0,s.animate)("800ms")])])]}}),M})()},3885:(j,x,e)=>{e.d(x,{Q:()=>y});var h=e(1090),s=e(9764),O=e(4468);let y=(()=>{class v{}return v.\u0275fac=function(d){return new(d||v)},v.\u0275mod=O.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=O.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.ModalModule,s.TableModule,s.LabelModule,s.LoadingSpinnerModule,s.ListFilterModule,s.ButtonModule]]}),v})()},7190:(j,x,e)=>{e.d(x,{x:()=>y});var h=e(9764),s=e(2343),O=e(4468);let y=(()=>{class v extends h.BaseWidgetComponent{constructor(d,n,i,D){super(),this.listStoreFactory=d,this.meta=n,this.language=i,this.fieldManager=D,this.loading=!1,this.maxHeight=400,this.module="accounts",this.noData=!0,this.subs=[],this.recordList=d.create()}ngOnInit(){!this.context$||(this.recordList.init(this.module,!1),this.recordList.setPageSize(20),this.initRecordSubscription(),this.initLoading(),this.loading=!0,this.meta.getMetadata(this.module).pipe((0,s.take)(1),(0,s.shareReplay)()).subscribe(d=>{this.loading=!1,this.initFieldDefinitions(d),this.initLoadDataSubscription()}))}ngOnDestroy(){}getHeaderLabel(){return this.language.getFieldLabel("LBL_MODULE_NAME","accounts")||""}allLoaded(){const d=this.recordList.getPagination();return!!d&&d.pageSize>=d.total}getLoadMoreButton(){return{klass:"load-more-button btn btn-link btn-sm",labelKey:"LBL_LOAD_MORE",onClick:()=>{this.loadMore()}}}initField(d,n){var i;if(!d||!n)return null;if(n.fields&&n.fields[d])return n.fields[d];const D=null!==(i=null==this?void 0:this.fieldDefs[d])&&void 0!==i?i:null;return D?this.fieldManager.addField(n,D):null}initRecordSubscription(){this.subs.push(this.recordList.records$.subscribe(d=>{this.records=d}))}initLoading(){this.subs.push(this.recordList.loading$.subscribe(d=>{this.loading=!0===d}))}updateSearchCriteria(){this.recordList.updateSearchCriteria({filters:{},orderBy:"DESC",sortOrder:"",searchModule:this.module})}initLoadDataSubscription(){this.subs.push(this.context$.subscribe(d=>{this.context=d,this.loadData()}))}loadData(){this.updateSearchCriteria(),this.recordList.load().pipe((0,s.take)(1)).subscribe()}initFieldDefinitions(d){var n,i;const D=null!==(i=null===(n=null==d?void 0:d.listView)||void 0===n?void 0:n.fields)&&void 0!==i?i:[];this.fieldDefs=[],D.forEach(R=>{!R||!R.name||(this.fieldDefs[R.name]=R)})}loadMore(d=10){let D=(this.recordList.getPagination().pageSize||0)+d;this.recordList.setPageSize(D),this.recordList.updatePagination(0)}}return v.\u0275fac=function(d){return new(d||v)(O.\u0275\u0275directiveInject(h.RecordListStoreFactory),O.\u0275\u0275directiveInject(h.MetadataStore),O.\u0275\u0275directiveInject(h.LanguageStore),O.\u0275\u0275directiveInject(h.FieldManager))},v.\u0275cmp=O.\u0275\u0275defineComponent({type:v,selectors:[["scrm-account-tree-sidebar-widget"]],features:[O.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"title"],["widget-body","",1,"account-tree-sidebar-widget"]],template:function(d,n){1&d&&(O.\u0275\u0275elementStart(0,"scrm-widget-panel",0),O.\u0275\u0275element(1,"div",1),O.\u0275\u0275elementEnd()),2&d&&O.\u0275\u0275property("title","Account Tree Widget")},directives:[h.WidgetPanelComponent],encapsulation:2}),v})()},3825:(j,x,e)=>{e.d(x,{q:()=>y});var h=e(1090),s=e(9764),O=e(4468);let y=(()=>{class v{}return v.\u0275fac=function(d){return new(d||v)},v.\u0275mod=O.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=O.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.LoadingSpinnerModule,s.WidgetPanelModule]]}),v})()},9605:(j,x,e)=>{e.d(x,{Yn:()=>c.Y}),e(1400),e(4738),e(6707),e(7094),e(8906),e(5770),e(2523),e(3015),e(6381),e(6660),e(6511),e(9878),e(6400),e(8302);var c=e(9139);e(3885),e(6357),e(4190),e(9827),e(6829),e(3827),e(1643),e(2894),e(166),e(9150)},181:(j,x,e)=>{e.r(x),e.d(x,{ExtensionModule:()=>o});var h=e(1090),s=e(9764),O=e(2445),y=e(3825),v=e(7190),m=e(4738),d=e(7094),n=e(5770),i=e(3015),D=e(8302),R=e(4190),c=e(6829),U=e(1643),B=e(3885),F=e(6357),P=e(9827),L=e(3827),M=e(2894),E=e(166),p=e(273),_=e(9150),g=e(4468);let o=(()=>{class l{constructor(f,u,b){this.fieldRegistry=f,this.sidebarWidgetRegistry=u,this.recordMapperRegistry=b,f.register("default","multirelate","list",P.D),f.register("default","multirelate","detail",P.D),f.register("default","multirelate","edit",F.P),f.register("default","multirelate","filter",L.b),f.register("default","relate","edit",M.H),u.register("default","account-tree",v.x),b.register("default","multirelate",new _.M)}init(){}}return l.\u0275fac=function(f){return new(f||l)(g.\u0275\u0275inject(s.FieldRegistry),g.\u0275\u0275inject(s.SidebarWidgetRegistry),g.\u0275\u0275inject(p.RecordMapperRegistry))},l.\u0275mod=g.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=g.\u0275\u0275defineInjector({providers:[],imports:[[h.CommonModule,O.HttpClientModule,y.q,d.d,m.G,i.n,n.o,D.q,R.E,c.h,U.v,B.Q,E.U]]}),l})()},9827:(j,x,e)=>{e.d(x,{D:()=>n});var h=e(4762),K=e(2445),S=e(9764),C=e(4468),v=e(1090);function d(i,D){if(1&i&&(C.\u0275\u0275elementStart(0,"li"),C.\u0275\u0275elementStart(1,"a",2),C.\u0275\u0275text(2),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd()),2&i){const R=D.$implicit,c=C.\u0275\u0275nextContext();C.\u0275\u0275advance(1),C.\u0275\u0275propertyInterpolate2("href","#/",c.field.definition.module,"/record/",R.id,"",C.\u0275\u0275sanitizeUrl),C.\u0275\u0275advance(1),C.\u0275\u0275textInterpolate(R.name)}}let n=(()=>{class i extends S.BaseFieldComponent{constructor(R,c,U){super(c,U),this.http=R,this.typeFormatter=c,this.logic=U,this.fieldsArr=[],this.getMultiRelatedIds=()=>(0,h.mG)(this,void 0,void 0,function*(){let B=new K.HttpHeaders;return B.set("Content-Type","application/json; charset=utf-8"),yield new Promise((F,P)=>{this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=getMultiRelatedIds&id="+this.record.id+"&module="+this.record.module+"&field="+this.field.definition.name,{headers:B,responseType:"text"}).subscribe(L=>{F(L)},L=>{P(L)})})})}ngOnInit(){(()=>{(0,h.mG)(this,void 0,void 0,function*(){let R=(yield this.getMultiRelatedIds()).split(", "),c=this.field.value.split(", ");for(let U=0;U<R.length;++U)this.fieldsArr.push({id:R[U],name:c[U]})})})(),super.ngOnInit()}}return i.\u0275fac=function(R){return new(R||i)(C.\u0275\u0275directiveInject(K.HttpClient),C.\u0275\u0275directiveInject(S.DataTypeFormatter),C.\u0275\u0275directiveInject(S.FieldLogicManager))},i.\u0275cmp=C.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multirelate-detail"]],features:[C.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[2,"list-style-type","none"],[4,"ngFor","ngForOf"],[3,"href"]],template:function(R,c){1&R&&(C.\u0275\u0275elementStart(0,"ul",0),C.\u0275\u0275template(1,d,3,3,"li",1),C.\u0275\u0275elementEnd()),2&R&&(C.\u0275\u0275advance(1),C.\u0275\u0275property("ngForOf",c.fieldsArr))},directives:[v.NgForOf],encapsulation:2}),i})()},6829:(j,x,e)=>{e.d(x,{h:()=>O});var h=e(1090),s=e(4468);let O=(()=>{class C{}return C.\u0275fac=function(v){return new(v||C)},C.\u0275mod=s.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=s.\u0275\u0275defineInjector({imports:[[h.CommonModule]]}),C})()},6357:(j,x,e)=>{e.d(x,{P:()=>a});var h=e(4762),K=e(3227),S=e(273),C=e(7255),v=e(1180),d=e(2445),i=e(9764),R=e(9605),c=e(4468),B=e(1090),P=e(5864);const M=["tag"];function E(_,g){if(1&_){const t=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"div",3),c.\u0275\u0275elementStart(2,"tag-input",4,5),c.\u0275\u0275listener("keyup.enter",function(){return c.\u0275\u0275restoreView(t),c.\u0275\u0275nextContext().selectFirstElement()})("onAdd",function(l){return c.\u0275\u0275restoreView(t),c.\u0275\u0275nextContext().onAdd(l)})("onBlur",function(){return c.\u0275\u0275restoreView(t),c.\u0275\u0275nextContext().resetStatus()})("onRemove",function(l){return c.\u0275\u0275restoreView(t),c.\u0275\u0275nextContext().onRemove(l)})("ngModelChange",function(l){return c.\u0275\u0275restoreView(t),c.\u0275\u0275nextContext().selectedValues=l}),c.\u0275\u0275element(4,"tag-input-dropdown",6),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(5,"div",7),c.\u0275\u0275element(6,"scrm-button",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementContainerEnd()}if(2&_){const t=c.\u0275\u0275nextContext();c.\u0275\u0275advance(2),c.\u0275\u0275classMap(t.getInvalidClass()),c.\u0275\u0275property("identifyBy","id")("ngModel",t.selectedValues)("clearOnBlur",!0)("displayBy",t.getRelateFieldName())("inputClass",t.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel()),c.\u0275\u0275advance(2),c.\u0275\u0275property("autocompleteObservable",t.search)("identifyBy","id")("displayBy",t.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),c.\u0275\u0275advance(2),c.\u0275\u0275property("config",t.selectButton)}}function p(_,g){if(1&_&&(c.\u0275\u0275elementStart(0,"small",9),c.\u0275\u0275element(1,"scrm-label",10),c.\u0275\u0275elementEnd()),2&_){const t=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("labelKey",t.getMessage())("module",t.module)}}let a=(()=>{class _ extends i.BaseRelateComponent{constructor(t,o,l,r,f,u,b){super(o,l,r,f,b),this.http=t,this.languages=o,this.typeFormatter=l,this.relateService=r,this.moduleNameMapper=f,this.modalService=u,this.logic=b,this.getMultiRelatedIds=()=>(0,h.mG)(this,void 0,void 0,function*(){let V=new d.HttpHeaders;return V.set("Content-Type","application/json; charset=utf-8"),yield new Promise((I,A)=>{this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=getMultiRelatedIds&id="+this.record.id+"&module="+this.record.module+"&field="+this.field.definition.name,{headers:V,responseType:"text"}).subscribe(T=>{I(T)},T=>{A(T)})})}),this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){super.ngOnInit(),(()=>{(0,h.mG)(this,void 0,void 0,function*(){if(!this.field.valueList){this.field.valueList||(this.field.valueList=[]),this.field.valueObjectArray||(this.field.valueObjectArray=[]);const t=this.field.value&&this.field.criteria&&this.field.criteria.values||[];t.length>0&&(this.field.valueList=t,this.selectedTags=t);const o=this.field&&this.field.valueObjectArray||[];if(this.field.value&&void 0!==this.field.value){let l=(yield this.getMultiRelatedIds()).split(", "),r=this.field.value.split(", ");for(let f=0;f<l.length;++f)o.push({id:l[f],name:r[f]}),this.field.valueList.push(r[f])}o.length>0&&(this.field.valueObjectArray=(0,S.deepClone)(o),this.selectedTags=(0,S.deepClone)(o)),this.init()}})})()}init(){super.init(),this.initValue();const t=this.getRelateIdField();t&&this.record&&this.record.fields&&this.record.fields[t]&&(this.idField=this.record.fields[t])}initValue(){this.field.valueObjectArray?(this.selectedValues=[],this.field.valueObjectArray.forEach(t=>{""!==t.id.trim()&&this.selectedValues.push(t)})):this.selectedValues=[]}onAdd(t){t&&this.setValue(t)}onRemove(t){var o,l;const r=null!==(o=t.id)&&void 0!==o?o:"",f=null!==(l=t.name)&&void 0!==l?l:"";this.field.valueList=this.field.valueList.filter(u=>u!==f),this.field.valueObjectArray=this.field.valueObjectArray.filter(u=>u.id!==r),this.idField&&r&&(this.idField.valueList=this.idField.valueList.filter(u=>u!==r)),setTimeout(()=>{this.tag.focus(!0,!0)},200)}setValue(t){const o=this.getRelateFieldName(),l=t.id,r=t[o];if(this.idField&&this.idField.valueList.includes(l)||!this.idField&&this.field.valueList.includes(r))return;this.field.valueList.push(r);const f=this.buildRelate(l,r);this.field.valueObjectArray.push(f),this.idField&&this.idField.valueList.push(l),this.field.formControl.setValue(this.field.valueObjectArray),this.field.formControl.markAsDirty()}onAdding(t){if(!t||this.idField&&this.idField.valueList.includes(t.id))return v.EMPTY;const o=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(t[o])?v.EMPTY:(0,v.of)(t)}showSelectModal(){const t=this.modalService.open(R.Yn,{size:"xl",scrollable:!0});t.componentInstance.module=this.getRelatedModule(),t.result.then(o=>{o&&o.selection&&o.selection.selected&&this.getSelectedRecord(o).forEach(r=>this.setItem(r))})}getSelectedRecord(t){let o=[];Object.keys(t.selection.selected).forEach(r=>{o.push(r)});let l=[];return t.records.forEach(r=>{r&&o.includes(r.id)&&l.push(r)}),l}setItem(t){this.field.valueList.includes(t.attributes[this.getRelateFieldName()])||(this.tag.appendTag(t.attributes),this.onAdd(t.attributes))}selectFirstElement(){const t=this.tag.dropdown.items;if(0!==t.length){const o=t[0];this.tag.appendTag(o),this.onAdd(o),this.tag.dropdown.hide()}}}return _.\u0275fac=function(t){return new(t||_)(c.\u0275\u0275directiveInject(d.HttpClient),c.\u0275\u0275directiveInject(i.LanguageStore),c.\u0275\u0275directiveInject(i.DataTypeFormatter),c.\u0275\u0275directiveInject(i.RelateService),c.\u0275\u0275directiveInject(i.ModuleNameMapper),c.\u0275\u0275directiveInject(C.NgbModal),c.\u0275\u0275directiveInject(i.FieldLogicManager))},_.\u0275cmp=c.\u0275\u0275defineComponent({type:_,selectors:[["scrm-multirelate-edit"]],viewQuery:function(t,o){if(1&t&&c.\u0275\u0275viewQuery(M,5),2&t){let l;c.\u0275\u0275queryRefresh(l=c.\u0275\u0275loadQuery())&&(o.tag=l.first)}},features:[c.\u0275\u0275ProvidersFeature([i.RelateService]),c.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],[3,"identifyBy","ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(t,o){1&t&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275template(1,E,7,17,"ng-container",1),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(2,p,2,2,"small",2)),2&t&&(c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.initModule),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.getMessage()))},directives:[B.NgIf,K.TagInputComponent,P.NgControlStatus,P.NgModel,K.TagInputDropdown,i.ButtonComponent,i.LabelComponent],encapsulation:2}),_})()},4190:(j,x,e)=>{e.d(x,{E:()=>n});var h=e(1090),s=e(3227),O=e(5864),y=e(9764),m=e(4468);let n=(()=>{class i{}return i.\u0275fac=function(R){return new(R||i)},i.\u0275mod=m.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=m.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.TagInputModule,y.LabelModule,O.FormsModule,y.InlineLoadingSpinnerModule,y.ButtonModule,y.TableModule]]}),i})()},3827:(j,x,e)=>{e.d(x,{b:()=>P});var h=e(3227),s=e(273),O=e(7255),y=e(1180),m=e(9764),n=e(4468),D=e(5864),c=e(1090);const B=["tag"];function F(L,M){if(1&L&&(n.\u0275\u0275elementStart(0,"small",8),n.\u0275\u0275element(1,"scrm-label",9),n.\u0275\u0275elementEnd()),2&L){const E=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",E.getMessage())("module",E.module)}}let P=(()=>{class L extends m.BaseRelateComponent{constructor(E,p,a,_,g,t){super(E,p,a,_,t),this.languages=E,this.typeFormatter=p,this.relateService=a,this.moduleNameMapper=_,this.modalService=g,this.logic=t,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){const E=this.record;this.field.valueList=[],this.field.valueObjectArray=[];const p=this.field&&this.field.criteria&&this.field.criteria.values||[];p.length>0&&(this.field.valueList=p,this.selectedTags=p);const a=this.field&&this.field.criteria&&this.field.criteria.valueObjectArray||[];a.length>0&&(this.field.valueObjectArray=(0,s.deepClone)(a),this.selectedTags=(0,s.deepClone)(a)),super.ngOnInit();const _=this.getRelateIdField();if(_&&E&&E.criteriaFields&&E.criteriaFields[_]){this.idField=E.criteriaFields[_],this.idField.valueList=[];const g=this.idField&&this.idField.criteria&&this.idField.criteria.values||[];g.length>0&&(this.idField.valueList=(0,s.deepClone)(g))}}onAdd(E){E&&this.setValue(E)}onAdding(E){if(!E||this.idField&&this.idField.valueList.includes(E.id))return y.EMPTY;const p=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(E[p])?y.EMPTY:(0,y.of)(E)}onRemove(E){var p,a;const _=null!==(p=E.id)&&void 0!==p?p:"",g=null!==(a=E.name)&&void 0!==a?a:"";this.field.valueList=this.field.valueList.filter(t=>t!==g),this.field.valueObjectArray=this.field.valueObjectArray.filter(t=>t.id!==_),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray=(0,s.deepClone)(this.field.valueObjectArray),this.idField&&_&&(this.idField.valueList=this.idField.valueList.filter(t=>t!==_),this.updateSearchCriteria(this.idField)),setTimeout(()=>{this.tag.focus(!0,!0)},200)}selectFirstElement(){const E=this.tag.dropdown.items;if(0!==E.length){const p=E[0];this.tag.appendTag(p),this.onAdd(p),this.tag.dropdown.hide()}}setValue(E){const p=this.getRelateFieldName(),a=E.id,_=E[p];if(this.idField&&this.idField.valueList.includes(a)||!this.idField&&this.field.valueList.includes(_))return;const g={};g.id=a,g[p]=_,this.field.valueObjectArray.push(g),this.field.valueList.push(_),this.idField&&(this.idField.valueList.push(a),this.updateSearchCriteria(this.idField)),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray||(this.field.criteria.valueObjectArray=[]),this.field.criteria.valueObjectArray.push(g)}updateSearchCriteria(E){E.criteria.operator="=",E.criteria.values=E.valueList,E.formControl.setValue(E.valueList),E.formControl.markAsDirty()}showSelectModal(){const E=this.modalService.open(m.RecordListModalComponent,{size:"xl",scrollable:!0});E.componentInstance.module=this.getRelatedModule(),E.result.then(p=>{if(!p||!p.selection||!p.selection.selected)return;const a=this.getSelectedRecord(p);this.field.valueObjectArray.find(g=>g.id===a.id)||this.setItem(a)})}getSelectedRecord(E){let p="";Object.keys(E.selection.selected).some(_=>(p=_,!0));let a=null;return E.records.some(_=>{if(_&&_.id===p)return a=_,!0}),a}setItem(E){this.tag.appendTag(E.attributes),this.onAdd(E.attributes)}}return L.\u0275fac=function(E){return new(E||L)(n.\u0275\u0275directiveInject(m.LanguageStore),n.\u0275\u0275directiveInject(m.DataTypeFormatter),n.\u0275\u0275directiveInject(m.RelateService),n.\u0275\u0275directiveInject(m.ModuleNameMapper),n.\u0275\u0275directiveInject(O.NgbModal),n.\u0275\u0275directiveInject(m.FieldLogicManager))},L.\u0275cmp=n.\u0275\u0275defineComponent({type:L,selectors:[["scrm-multirelate-filter"]],viewQuery:function(E,p){if(1&E&&n.\u0275\u0275viewQuery(B,5),2&E){let a;n.\u0275\u0275queryRefresh(a=n.\u0275\u0275loadQuery())&&(p.tag=a.first)}},features:[n.\u0275\u0275ProvidersFeature([m.RelateService]),n.\u0275\u0275InheritDefinitionFeature],decls:8,vars:18,consts:[[1,"d-flex"],[1,"flex-grow-1"],[3,"ngModel","clearOnBlur","identifyBy","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(E,p){1&E&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275elementStart(2,"tag-input",2,3),n.\u0275\u0275listener("keyup.enter",function(){return p.selectFirstElement()})("onAdd",function(_){return p.onAdd(_)})("onBlur",function(){return p.resetStatus()})("onRemove",function(_){return p.onRemove(_)})("ngModelChange",function(_){return p.selectedTags=_}),n.\u0275\u0275element(4,"tag-input-dropdown",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",5),n.\u0275\u0275element(6,"scrm-button",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,F,2,2,"small",7)),2&E&&(n.\u0275\u0275advance(2),n.\u0275\u0275classMap(p.getInvalidClass()),n.\u0275\u0275property("ngModel",p.selectedTags)("clearOnBlur",!0)("identifyBy","id")("displayBy",p.getRelateFieldName())("inputClass",p.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",p.getPlaceholderLabel())("secondaryPlaceholder",p.getPlaceholderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("autocompleteObservable",p.search)("identifyBy","id")("displayBy",p.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",p.selectButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",p.getMessage()))},directives:[h.TagInputComponent,D.NgControlStatus,D.NgModel,h.TagInputDropdown,m.ButtonComponent,c.NgIf,m.LabelComponent],encapsulation:2}),L})()},1643:(j,x,e)=>{e.d(x,{v:()=>n});var h=e(1090),s=e(3227),O=e(5864),y=e(9764),m=e(4468);let n=(()=>{class i{}return i.\u0275fac=function(R){return new(R||i)},i.\u0275mod=m.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=m.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.TagInputModule,y.LabelModule,O.FormsModule,y.InlineLoadingSpinnerModule,y.ButtonModule,s.TagInputModule]]}),i})()},2894:(j,x,e)=>{e.d(x,{H:()=>M});var h=e(4762),K=e(3227),S=e(7255),C=e(2445),v=e(8510),d=e(9764),i=e(4468),R=e(1090),U=e(5864);const F=["tag"];function P(E,p){if(1&E){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275elementStart(2,"tag-input",4,5),i.\u0275\u0275listener("keyup.enter",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275nextContext().selectFirstElement()})("onAdd",function(g){return i.\u0275\u0275restoreView(a),i.\u0275\u0275nextContext().onAdd(g)})("onBlur",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275nextContext().resetStatus()})("onRemove",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275nextContext().onRemove()})("ngModelChange",function(g){return i.\u0275\u0275restoreView(a),i.\u0275\u0275nextContext().selectedValues=g}),i.\u0275\u0275element(4,"tag-input-dropdown",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",7),i.\u0275\u0275element(6,"scrm-button",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&E){const a=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275classMap(a.getInvalidClass()),i.\u0275\u0275property("ngModel",a.selectedValues)("clearOnBlur",!0)("displayBy",a.getRelateFieldName())("inputClass",a.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",a.getPlaceholderLabel())("secondaryPlaceholder",a.getPlaceholderLabel()),i.\u0275\u0275advance(2),i.\u0275\u0275property("autocompleteObservable",a.search)("displayBy",a.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("config",a.selectButton)}}function L(E,p){if(1&E&&(i.\u0275\u0275elementStart(0,"small",9),i.\u0275\u0275element(1,"scrm-label",10),i.\u0275\u0275elementEnd()),2&E){const a=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("labelKey",a.getMessage())("module",a.module)}}let M=(()=>{class E extends d.BaseRelateComponent{constructor(a,_,g,t,o,l,r,f){super(g,t,o,l,f),this.http=a,this.router=_,this.languages=g,this.typeFormatter=t,this.relateService=o,this.moduleNameMapper=l,this.modalService=r,this.logic=f,this.getUnrelatedProfiles=()=>(0,h.mG)(this,void 0,void 0,function*(){let u=new C.HttpHeaders;return u.set("Content-Type","application/json; charset=utf-8"),yield new Promise((b,V)=>{this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=checkRelatedProfilesAccounts&profileID="+this.rec,{headers:u,responseType:"text"}).subscribe(I=>{b(parseInt(I))},I=>{V(I)})})}),this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){super.ngOnInit(),(()=>{(0,h.mG)(this,void 0,void 0,function*(){let a=this.router.url.split("/");this.pModule=a[1],this.rec=a[a.length-1],this.unrelated=yield this.getUnrelatedProfiles()})})(),this.init()}init(){super.init(),this.initValue();const a=this.getRelateIdField();a&&this.record&&this.record.fields&&this.record.fields[a]&&(this.idField=this.record.fields[a])}runPMSProfilesAction(){let a=new C.HttpHeaders;a.set("Content-Type","application/json; charset=utf-8"),this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=relateProfilesToAccount&profileID="+this.rec,{headers:a,responseType:"text"}).subscribe(_=>{},_=>console.log("Error: "+_))}initValue(){this.field.valueObject&&this.field.valueObject.id?(this.selectedValues=[],this.selectedValues.push(this.field.valueObject)):this.selectedValues=[]}onAdd(a){if(a){const _=this.getRelateFieldName();this.setValue(a.id,a[_]);let g=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/;if("accounts"===this.field.definition.module.toLowerCase()&&"cb2b_pmsprofiles"===this.module.toLowerCase()&&null!==this.rec&&""!==this.rec&&void 0!==this.rec&&g.test(this.rec)&&this.unrelated>0){const t=this.modalService.open(d.MessageModalComponent);t.componentInstance.textKey="LBL_POPUP_PROFILES",t.componentInstance.buttons=[{labelKey:"LBL_POPUP_NO",klass:["btn-secondary"],onClick:o=>{o.dismiss()}},{labelKey:"LBL_POPUP_YES",klass:["btn-main"],onClick:o=>{this.runPMSProfilesAction(),o.close()}}]}}else this.setValue("",""),this.selectedValues=[]}onRemove(){this.setValue("",""),this.selectedValues=[],setTimeout(()=>{this.tag.focus(!0,!0)},200)}setValue(a,_){const g=this.buildRelate(a,_);this.field.value=_,this.field.valueObject=g,this.field.formControl.setValue(_),this.field.formControl.markAsDirty(),this.idField&&(this.idField.value=a,this.idField.formControl.setValue(a),this.idField.formControl.markAsDirty())}showSelectModal(){const a=this.modalService.open(d.RecordListModalComponent,{size:"xl",scrollable:!0});a.componentInstance.module=this.getRelatedModule(),a.result.then(_=>{if(!_||!_.selection||!_.selection.selected)return;const g=this.getSelectedRecord(_);this.setItem(g)})}getSelectedRecord(a){let _="";Object.keys(a.selection.selected).some(t=>(_=t,!0));let g=null;return a.records.some(t=>{if(t&&t.id===_)return g=t,!0}),g}setItem(a){this.tag.writeValue([a.attributes]),this.onAdd(a.attributes)}selectFirstElement(){const a=this.tag.dropdown.items;if(0!==a.length){const _=a[0];this.selectedValues.push(_),this.onAdd(_),this.tag.dropdown.hide()}}}return E.\u0275fac=function(a){return new(a||E)(i.\u0275\u0275directiveInject(C.HttpClient),i.\u0275\u0275directiveInject(v.Router),i.\u0275\u0275directiveInject(d.LanguageStore),i.\u0275\u0275directiveInject(d.DataTypeFormatter),i.\u0275\u0275directiveInject(d.RelateService),i.\u0275\u0275directiveInject(d.ModuleNameMapper),i.\u0275\u0275directiveInject(S.NgbModal),i.\u0275\u0275directiveInject(d.FieldLogicManager))},E.\u0275cmp=i.\u0275\u0275defineComponent({type:E,selectors:[["scrm-override-relate-edit"]],viewQuery:function(a,_){if(1&a&&i.\u0275\u0275viewQuery(F,5),2&a){let g;i.\u0275\u0275queryRefresh(g=i.\u0275\u0275loadQuery())&&(_.tag=g.first)}},features:[i.\u0275\u0275ProvidersFeature([d.RelateService]),i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],["maxItems","1",3,"ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(a,_){1&a&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,P,7,15,"ng-container",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,L,2,2,"small",2)),2&a&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",_.initModule),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",_.getMessage()))},directives:[R.NgIf,K.TagInputComponent,U.NgControlStatus,U.NgModel,K.TagInputDropdown,d.ButtonComponent,d.LabelComponent],encapsulation:2}),E})()},166:(j,x,e)=>{e.d(x,{U:()=>n});var h=e(1090),s=e(3227),O=e(5864),y=e(9764),m=e(4468);let n=(()=>{class i{}return i.\u0275fac=function(R){return new(R||i)},i.\u0275mod=m.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=m.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.TagInputModule,y.LabelModule,O.FormsModule,y.InlineLoadingSpinnerModule,y.ButtonModule]]}),i})()},9150:(j,x,e)=>{e.d(x,{M:()=>O}),e(273);var s=e(4468);let O=(()=>{class C{getKey(){return"multirelate"}map(v){!v.fields||!Object.keys(v.fields).length||Object.keys(v.fields).forEach(m=>{const d=v.fields[m],n=d.type||"",i=d.definition.source||"",R=d.definition.id_name||"";if("multirelate"!==n||"non-db"!==i||R!==m){if("multirelate"===n&&"non-db"===i&&""!==(d.definition.rname||"name")&&d.valueObjectArray){var c=[];return d.valueObjectArray.forEach(U=>{c.push(U.id)}),v.attributes[m]=d.valueObjectArray,void(v.attributes[R]=c.join(", "))}}else v.attributes[m]=d.value})}}return C.\u0275fac=function(v){return new(v||C)},C.\u0275prov=s.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},6707:(j,x,e)=>{e(1180),e(2343),e(9764),e(4468),e(1090),e(8906)},7094:(j,x,e)=>{e.d(x,{d:()=>d});var h=e(1090),s=e(2594),O=e(9764),y=e(5770),v=e(4468);let d=(()=>{class n{}return n.\u0275fac=function(D){return new(D||n)},n.\u0275mod=v.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=v.\u0275\u0275defineInjector({imports:[[h.CommonModule,y.o,O.WidgetPanelModule,s.AngularSvgIconModule,O.SidebarWidgetModule]]}),n})()},1400:(j,x,e)=>{e(9764),e(4468),e(1090),e(6707)},4738:(j,x,e)=>{e.d(x,{G:()=>d});var h=e(1090),s=e(9764),O=e(7094),C=e(8383),v=e(4468);let d=(()=>{class n{}return n.\u0275fac=function(D){return new(D||n)},n.\u0275mod=v.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=v.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.ListHeaderModule,O.d,s.FieldModule,C.CdkTableModule,s.ModalModule,s.LoadingSpinnerModule,s.FullPageSpinnerModule]]}),n})()},6660:(j,x,e)=>{e(7255),e(4468),e(9764),e(1090)},6511:(j,x,e)=>{e(9764),e(4468),e(1090),e(6381)},9878:(j,x,e)=>{e.d(x,{C:()=>v});var h=e(1090),s=e(9764),O=e(3015),C=e(4468);let v=(()=>{class m{}return m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=C.\u0275\u0275defineNgModule({type:m}),m.\u0275inj=C.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.ModuleTitleModule,s.DynamicLabelModule,s.ActionGroupMenuModule,s.FavoriteToggleModule,O.n]]}),m})()},6400:(j,x,e)=>{e(9764),e(8510),e(4468),e(1090),e(6511)},8302:(j,x,e)=>{e.d(x,{q:()=>v});var h=e(1090),s=e(9764),O=e(9878),C=e(4468);let v=(()=>{class m{}return m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=C.\u0275\u0275defineNgModule({type:m}),m.\u0275inj=C.\u0275\u0275defineInjector({imports:[[h.CommonModule,s.FieldModule,s.RecordContainerModule,O.C,s.StatusBarModule,s.SubpanelModule]]}),m})()},4762:(j,x,e)=>{e.d(x,{ZT:()=>K,pi:()=>s,_T:()=>S,gn:()=>O,mG:()=>v,Jh:()=>m,ev:()=>U});var h=function(t,o){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(l[f]=r[f])})(t,o)};function K(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function l(){this.constructor=t}h(t,o),t.prototype=null===o?Object.create(o):(l.prototype=o.prototype,new l)}var s=function(){return(s=Object.assign||function(o){for(var l,r=1,f=arguments.length;r<f;r++)for(var u in l=arguments[r])Object.prototype.hasOwnProperty.call(l,u)&&(o[u]=l[u]);return o}).apply(this,arguments)};function S(t,o){var l={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&o.indexOf(r)<0&&(l[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var f=0;for(r=Object.getOwnPropertySymbols(t);f<r.length;f++)o.indexOf(r[f])<0&&Object.prototype.propertyIsEnumerable.call(t,r[f])&&(l[r[f]]=t[r[f]])}return l}function O(t,o,l,r){var b,f=arguments.length,u=f<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,l):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,o,l,r);else for(var V=t.length-1;V>=0;V--)(b=t[V])&&(u=(f<3?b(u):f>3?b(o,l,u):b(o,l))||u);return f>3&&u&&Object.defineProperty(o,l,u),u}function v(t,o,l,r){return new(l||(l=Promise))(function(u,b){function V(T){try{A(r.next(T))}catch(W){b(W)}}function I(T){try{A(r.throw(T))}catch(W){b(W)}}function A(T){T.done?u(T.value):function(u){return u instanceof l?u:new l(function(b){b(u)})}(T.value).then(V,I)}A((r=r.apply(t,o||[])).next())})}function m(t,o){var r,f,u,b,l={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return b={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function V(A){return function(T){return function(A){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,f&&(u=2&A[0]?f.return:A[0]?f.throw||((u=f.return)&&u.call(f),0):f.next)&&!(u=u.call(f,A[1])).done)return u;switch(f=0,u&&(A=[2&A[0],u.value]),A[0]){case 0:case 1:u=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,f=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(!(u=(u=l.trys).length>0&&u[u.length-1])&&(6===A[0]||2===A[0])){l=0;continue}if(3===A[0]&&(!u||A[1]>u[0]&&A[1]<u[3])){l.label=A[1];break}if(6===A[0]&&l.label<u[1]){l.label=u[1],u=A;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(A);break}u[2]&&l.ops.pop(),l.trys.pop();continue}A=o.call(t,l)}catch(T){A=[6,T],f=0}finally{r=u=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,T])}}}function U(t,o,l){if(l||2===arguments.length)for(var u,r=0,f=o.length;r<f;r++)(u||!(r in o))&&(u||(u=Array.prototype.slice.call(o,0,r)),u[r]=o[r]);return t.concat(u||Array.prototype.slice.call(o))}}}]);