"use strict";(self.webpackChunkcustomExt=self.webpackChunkcustomExt||[]).push([["extensions_custom_ext_app_src_extension_extension_module_ts"],{6381:(j,L,e)=>{e(7255),e(6660),e(2445),e(4468),e(1090),e(9764)},2523:(j,L,e)=>{e(1180),e(2343),e(273),e(9764),e(2445),e(4468),e(1090),e(8383),e(6381)},3015:(j,L,e)=>{e.d(L,{n:()=>n});var g=e(1090),u=e(2594),C=e(8383),D=e(9764),f=e(4468);let n=(()=>{class o{}return o.\u0275fac=function(R){return new(R||o)},o.\u0275mod=f.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=f.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.AngularSvgIconModule,C.CdkTableModule,D.FieldModule,D.SortButtonModule,D.LineActionModule,D.LoadingSpinnerModule,D.LabelModule,D.FullPageSpinnerModule]]}),o})()},8906:(j,L,e)=>{e(4468),e(1090),e(2523),e(9764)},5770:(j,L,e)=>{e.d(L,{o:()=>m});var g=e(1090),u=e(2594),C=e(9764),D=e(3015),M=e(4468);let m=(()=>{class n{}return n.\u0275fac=function(P){return new(P||n)},n.\u0275mod=M.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=M.\u0275\u0275defineInjector({imports:[[g.CommonModule,C.TableHeaderModule,D.n,C.TableFooterModule,u.AngularSvgIconModule]]}),n})()},9139:(j,L,e)=>{e.d(L,{Y:()=>x});var g=e(7255),u=e(4562),C=e(1180),D=e(2343),f=e(9764),n=e(4468),P=e(1090);function d(h,r){1&h&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",3),n.\u0275\u0275elementContainerEnd())}function U(h,r){if(1&h&&n.\u0275\u0275element(0,"scrm-list-filter",8),2&h){const s=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",s.filterConfig)}}function B(h,r){1&h&&n.\u0275\u0275element(0,"scrm-loading-spinner",11),2&h&&n.\u0275\u0275property("overlay",!0)}function F(h,r){if(1&h&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,B,1,1,"scrm-loading-spinner",10),n.\u0275\u0275elementContainerEnd()),2&h){const s=r.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",s)}}function O(h,r){if(1&h&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"div",4),n.\u0275\u0275elementStart(3,"div",5),n.\u0275\u0275elementStart(4,"div",6),n.\u0275\u0275template(5,U,1,1,"scrm-list-filter",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",5),n.\u0275\u0275elementStart(7,"div",6),n.\u0275\u0275elementStart(8,"scrm-button",8),n.\u0275\u0275text(9,"Select"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"div",9),n.\u0275\u0275elementStart(11,"div",6),n.\u0275\u0275element(12,"scrm-table",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,F,2,1,"ng-container",2),n.\u0275\u0275pipe(14,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&h){const s=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",s.filterConfig),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",s.selectButton),n.\u0275\u0275advance(4),n.\u0275\u0275property("config",s.tableConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(14,4,s.loading$))}}let x=(()=>{class h{constructor(s,l,_,T){this.activeModal=s,this.storeFactory=l,this.languages=_,this.maxColumnCalculator=T,this.titleKey="",this.adapter=null,this.filterAdapter=null,this.select=!1,this.subs=[],this.store=this.storeFactory.create()}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}},this.selectButton={klass:["btn","btn-outline-dark","btn-sm"],onClick:()=>{this.subs.push(this.store.recordList.selection$.pipe((0,D.distinctUntilChanged)()).subscribe(s=>{!s||!s.selected||Object.keys(s.selected).length<1||this.activeModal.close({selection:s,records:this.store.recordList.records})}))}},this.init()}ngOnDestroy(){this.subs.forEach(s=>s.unsubscribe())}init(){!this.module||(this.initStore(),this.initTableAdapter(),this.initFilterAdapters())}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns((0,C.of)(!0))}initTableAdapter(){null===this.adapter&&(this.adapter=new f.ModalRecordListTableAdapter),this.tableConfig=this.adapter.getTable(this.store,!0),this.tableConfig.maxColumns$=this.getMaxColumns(),this.tableConfig.selection=this.store.recordList,this.tableConfig.selection$=this.store.recordList.selection$}initFilterAdapters(){null===this.filterAdapter&&(this.filterAdapter=new f.ModalRecordFilterAdapter),this.filterConfig=this.filterAdapter.getConfig(this.store)}initStore(){var s;this.store.init(this.module,null!==(s=this.parentModule)&&void 0!==s?s:""),this.loading$=this.store.metadataLoading$}}return h.\u0275fac=function(s){return new(s||h)(n.\u0275\u0275directiveInject(g.NgbActiveModal),n.\u0275\u0275directiveInject(f.RecordListModalStoreFactory),n.\u0275\u0275directiveInject(f.LanguageStore),n.\u0275\u0275directiveInject(f.MaxColumnsCalculator))},h.\u0275cmp=n.\u0275\u0275defineComponent({type:h,selectors:[["scrm-multiselect-record-list-modal"]],inputs:{titleKey:"titleKey",module:"module",parentModule:"parentModule",adapter:"adapter",filterAdapter:"filterAdapter"},features:[n.\u0275\u0275ProvidersFeature([f.MaxColumnsCalculator])],decls:4,vars:5,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","headerKlass","border-0","klass","record-list-modal",3,"closable","close","title"],["modal-body",""],[4,"ngIf"],["labelKey","LBL_CONFIG_NO_CONFIG"],[1,"container-fluid"],[1,"row","pb-3"],[1,"col"],[3,"config",4,"ngIf"],[3,"config"],[1,"row"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(s,l){1&s&&(n.\u0275\u0275elementStart(0,"scrm-modal",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275template(2,d,2,0,"ng-container",2),n.\u0275\u0275template(3,O,15,6,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&s&&(n.\u0275\u0275property("closable",!0)("close",l.closeButton)("title",l.titleKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!l.tableConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",l.tableConfig))},directives:[f.ModalComponent,P.NgIf,f.LabelComponent,f.ButtonComponent,f.TableComponent,f.ListFilterComponent,f.LoadingSpinnerComponent],pipes:[P.AsyncPipe],encapsulation:2,data:{animation:[(0,u.trigger)("modalFade",[(0,u.transition)("void <=> *",[(0,u.animate)("800ms")])])]}}),h})()},3885:(j,L,e)=>{e.d(L,{Q:()=>D});var g=e(1090),u=e(9764),C=e(4468);let D=(()=>{class M{}return M.\u0275fac=function(m){return new(m||M)},M.\u0275mod=C.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=C.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.ModalModule,u.TableModule,u.LabelModule,u.LoadingSpinnerModule,u.ListFilterModule,u.ButtonModule]]}),M})()},7190:(j,L,e)=>{e.d(L,{x:()=>D});var g=e(9764),u=e(2343),C=e(4468);let D=(()=>{class M extends g.BaseWidgetComponent{constructor(m,n,o,P){super(),this.listStoreFactory=m,this.meta=n,this.language=o,this.fieldManager=P,this.loading=!1,this.maxHeight=400,this.module="accounts",this.noData=!0,this.subs=[],this.recordList=m.create()}ngOnInit(){!this.context$||(this.recordList.init(this.module,!1),this.recordList.setPageSize(20),this.initRecordSubscription(),this.initLoading(),this.loading=!0,this.meta.getMetadata(this.module).pipe((0,u.take)(1),(0,u.shareReplay)()).subscribe(m=>{this.loading=!1,this.initFieldDefinitions(m),this.initLoadDataSubscription()}))}ngOnDestroy(){}getHeaderLabel(){return this.language.getFieldLabel("LBL_MODULE_NAME","accounts")||""}allLoaded(){const m=this.recordList.getPagination();return!!m&&m.pageSize>=m.total}getLoadMoreButton(){return{klass:"load-more-button btn btn-link btn-sm",labelKey:"LBL_LOAD_MORE",onClick:()=>{this.loadMore()}}}initField(m,n){var o;if(!m||!n)return null;if(n.fields&&n.fields[m])return n.fields[m];const P=null!==(o=null==this?void 0:this.fieldDefs[m])&&void 0!==o?o:null;return P?this.fieldManager.addField(n,P):null}initRecordSubscription(){this.subs.push(this.recordList.records$.subscribe(m=>{this.records=m}))}initLoading(){this.subs.push(this.recordList.loading$.subscribe(m=>{this.loading=!0===m}))}updateSearchCriteria(){this.recordList.updateSearchCriteria({filters:{},orderBy:"DESC",sortOrder:"",searchModule:this.module})}initLoadDataSubscription(){this.subs.push(this.context$.subscribe(m=>{this.context=m,this.loadData()}))}loadData(){this.updateSearchCriteria(),this.recordList.load().pipe((0,u.take)(1)).subscribe()}initFieldDefinitions(m){var n,o;const P=null!==(o=null===(n=null==m?void 0:m.listView)||void 0===n?void 0:n.fields)&&void 0!==o?o:[];this.fieldDefs=[],P.forEach(R=>{!R||!R.name||(this.fieldDefs[R.name]=R)})}loadMore(m=10){let P=(this.recordList.getPagination().pageSize||0)+m;this.recordList.setPageSize(P),this.recordList.updatePagination(0)}}return M.\u0275fac=function(m){return new(m||M)(C.\u0275\u0275directiveInject(g.RecordListStoreFactory),C.\u0275\u0275directiveInject(g.MetadataStore),C.\u0275\u0275directiveInject(g.LanguageStore),C.\u0275\u0275directiveInject(g.FieldManager))},M.\u0275cmp=C.\u0275\u0275defineComponent({type:M,selectors:[["scrm-account-tree-sidebar-widget"]],features:[C.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"title"],["widget-body","",1,"account-tree-sidebar-widget"]],template:function(m,n){1&m&&(C.\u0275\u0275elementStart(0,"scrm-widget-panel",0),C.\u0275\u0275element(1,"div",1),C.\u0275\u0275elementEnd()),2&m&&C.\u0275\u0275property("title","Account Tree Widget")},directives:[g.WidgetPanelComponent],encapsulation:2}),M})()},3825:(j,L,e)=>{e.d(L,{q:()=>D});var g=e(1090),u=e(9764),C=e(4468);let D=(()=>{class M{}return M.\u0275fac=function(m){return new(m||M)},M.\u0275mod=C.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=C.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.LoadingSpinnerModule,u.WidgetPanelModule]]}),M})()},9605:(j,L,e)=>{e.d(L,{Yn:()=>d.Y}),e(1400),e(4738),e(6707),e(7094),e(8906),e(5770),e(2523),e(3015),e(6381),e(6660),e(6511),e(9878),e(6400),e(8302);var d=e(9139);e(3885),e(6357),e(4190),e(9827),e(6829),e(3827),e(1643),e(2894),e(166),e(9150)},181:(j,L,e)=>{e.r(L),e.d(L,{ExtensionModule:()=>i});var g=e(1090),u=e(9764),C=e(2445),D=e(3825),M=e(7190),f=e(4738),m=e(7094),n=e(5770),o=e(3015),P=e(8302),R=e(4190),d=e(6829),U=e(1643),B=e(3885),F=e(6357),O=e(9827),x=e(3827),h=e(2894),r=e(166),s=e(273),_=e(9150),T=e(4468);let i=(()=>{class a{constructor(E,p,b){this.fieldRegistry=E,this.sidebarWidgetRegistry=p,this.recordMapperRegistry=b,E.register("default","multirelate","list",O.D),E.register("default","multirelate","detail",O.D),E.register("default","multirelate","edit",F.P),E.register("default","multirelate","filter",x.b),E.register("default","relate","edit",h.H),p.register("default","account-tree",M.x),b.register("default","multirelate",new _.M)}init(){}}return a.\u0275fac=function(E){return new(E||a)(T.\u0275\u0275inject(u.FieldRegistry),T.\u0275\u0275inject(u.SidebarWidgetRegistry),T.\u0275\u0275inject(s.RecordMapperRegistry))},a.\u0275mod=T.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=T.\u0275\u0275defineInjector({providers:[],imports:[[g.CommonModule,C.HttpClientModule,D.q,m.d,f.G,o.n,n.o,P.q,R.E,d.h,U.v,B.Q,r.U]]}),a})()},9827:(j,L,e)=>{e.d(L,{D:()=>n});var g=e(4762),K=e(2445),S=e(9764),v=e(4468),M=e(1090);function m(o,P){if(1&o&&(v.\u0275\u0275elementStart(0,"li"),v.\u0275\u0275elementStart(1,"a",2),v.\u0275\u0275text(2),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementEnd()),2&o){const R=P.$implicit,d=v.\u0275\u0275nextContext();v.\u0275\u0275advance(1),v.\u0275\u0275propertyInterpolate2("href","#/",d.field.definition.module,"/record/",R.id,"",v.\u0275\u0275sanitizeUrl),v.\u0275\u0275advance(1),v.\u0275\u0275textInterpolate(R.name)}}let n=(()=>{class o extends S.BaseFieldComponent{constructor(R,d,U){super(d,U),this.http=R,this.typeFormatter=d,this.logic=U,this.fieldsArr=[],this.getMultiRelatedIds=()=>(0,g.mG)(this,void 0,void 0,function*(){let B=new K.HttpHeaders;return B.set("Content-Type","application/json; charset=utf-8"),yield new Promise((F,O)=>{this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=getMultiRelatedIds&id="+this.record.id+"&module="+this.record.module+"&field="+this.field.definition.name,{headers:B,responseType:"text"}).subscribe(x=>{F(x)},x=>{O(x)})})})}ngOnInit(){(()=>{(0,g.mG)(this,void 0,void 0,function*(){let R=(yield this.getMultiRelatedIds()).split(", "),d=this.field.value.split(", ");for(let U=0;U<R.length;++U)this.fieldsArr.push({id:R[U],name:d[U]})})})(),super.ngOnInit()}}return o.\u0275fac=function(R){return new(R||o)(v.\u0275\u0275directiveInject(K.HttpClient),v.\u0275\u0275directiveInject(S.DataTypeFormatter),v.\u0275\u0275directiveInject(S.FieldLogicManager))},o.\u0275cmp=v.\u0275\u0275defineComponent({type:o,selectors:[["scrm-multirelate-detail"]],features:[v.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[2,"list-style-type","none"],[4,"ngFor","ngForOf"],[3,"href"]],template:function(R,d){1&R&&(v.\u0275\u0275elementStart(0,"ul",0),v.\u0275\u0275template(1,m,3,3,"li",1),v.\u0275\u0275elementEnd()),2&R&&(v.\u0275\u0275advance(1),v.\u0275\u0275property("ngForOf",d.fieldsArr))},directives:[M.NgForOf],encapsulation:2}),o})()},6829:(j,L,e)=>{e.d(L,{h:()=>C});var g=e(1090),u=e(4468);let C=(()=>{class v{}return v.\u0275fac=function(M){return new(M||v)},v.\u0275mod=u.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=u.\u0275\u0275defineInjector({imports:[[g.CommonModule]]}),v})()},6357:(j,L,e)=>{e.d(L,{P:()=>l});var g=e(4762),K=e(3227),S=e(273),v=e(7255),M=e(1180),m=e(2445),o=e(9764),R=e(9605),d=e(4468),B=e(1090),O=e(5864);const h=["tag"];function r(_,T){if(1&_){const t=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275elementStart(1,"div",3),d.\u0275\u0275elementStart(2,"tag-input",4,5),d.\u0275\u0275listener("keyup.enter",function(){return d.\u0275\u0275restoreView(t),d.\u0275\u0275nextContext().selectFirstElement()})("onAdd",function(a){return d.\u0275\u0275restoreView(t),d.\u0275\u0275nextContext().onAdd(a)})("onBlur",function(){return d.\u0275\u0275restoreView(t),d.\u0275\u0275nextContext().resetStatus()})("onRemove",function(a){return d.\u0275\u0275restoreView(t),d.\u0275\u0275nextContext().onRemove(a)})("ngModelChange",function(a){return d.\u0275\u0275restoreView(t),d.\u0275\u0275nextContext().selectedValues=a}),d.\u0275\u0275element(4,"tag-input-dropdown",6),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"div",7),d.\u0275\u0275element(6,"scrm-button",8),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementContainerEnd()}if(2&_){const t=d.\u0275\u0275nextContext();d.\u0275\u0275advance(2),d.\u0275\u0275classMap(t.getInvalidClass()),d.\u0275\u0275property("identifyBy","id")("ngModel",t.selectedValues)("clearOnBlur",!0)("displayBy",t.getRelateFieldName())("inputClass",t.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel()),d.\u0275\u0275advance(2),d.\u0275\u0275property("autocompleteObservable",t.search)("identifyBy","id")("displayBy",t.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),d.\u0275\u0275advance(2),d.\u0275\u0275property("config",t.selectButton)}}function s(_,T){if(1&_&&(d.\u0275\u0275elementStart(0,"small",9),d.\u0275\u0275element(1,"scrm-label",10),d.\u0275\u0275elementEnd()),2&_){const t=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("labelKey",t.getMessage())("module",t.module)}}let l=(()=>{class _ extends o.BaseRelateComponent{constructor(t,i,a,c,E,p,b){super(i,a,c,E,b),this.http=t,this.languages=i,this.typeFormatter=a,this.relateService=c,this.moduleNameMapper=E,this.modalService=p,this.logic=b,this.getMultiRelatedIds=()=>(0,g.mG)(this,void 0,void 0,function*(){let V=new m.HttpHeaders;return V.set("Content-Type","application/json; charset=utf-8"),yield new Promise((I,y)=>{this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=getMultiRelatedIds&id="+this.record.id+"&module="+this.record.module+"&field="+this.field.definition.name,{headers:V,responseType:"text"}).subscribe(A=>{I(A)},A=>{y(A)})})}),this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){super.ngOnInit(),(()=>{(0,g.mG)(this,void 0,void 0,function*(){if(!this.field.valueList){this.field.valueList||(this.field.valueList=[]),this.field.valueObjectArray||(this.field.valueObjectArray=[]);const t=this.field.value&&this.field.criteria&&this.field.criteria.values||[];t.length>0&&(this.field.valueList=t,this.selectedTags=t);const i=this.field&&this.field.valueObjectArray||[];if(this.field.value&&void 0!==this.field.value){let a=(yield this.getMultiRelatedIds()).split(", "),c=this.field.value.split(", ");for(let E=0;E<a.length;++E)i.push({id:a[E],name:c[E]}),this.field.valueList.push(c[E])}i.length>0&&(this.field.valueObjectArray=(0,S.deepClone)(i),this.selectedTags=(0,S.deepClone)(i)),this.init()}})})()}init(){super.init(),this.initValue();const t=this.getRelateIdField();t&&this.record&&this.record.fields&&this.record.fields[t]&&(this.idField=this.record.fields[t])}initValue(){this.field.valueObjectArray?(this.selectedValues=[],this.field.valueObjectArray.forEach(t=>{""!==t.id.trim()&&this.selectedValues.push(t)})):this.selectedValues=[]}onAdd(t){t&&this.setValue(t)}onRemove(t){var i,a;const c=null!==(i=t.id)&&void 0!==i?i:"",E=null!==(a=t.name)&&void 0!==a?a:"";this.field.valueList=this.field.valueList.filter(p=>p!==E),this.field.valueObjectArray=this.field.valueObjectArray.filter(p=>p.id!==c),this.idField&&c&&(this.idField.valueList=this.idField.valueList.filter(p=>p!==c)),setTimeout(()=>{this.tag.focus(!0,!0)},200)}setValue(t){const i=this.getRelateFieldName(),a=t.id,c=t[i];if(this.idField&&this.idField.valueList.includes(a)||!this.idField&&this.field.valueList.includes(c))return;this.field.valueList.push(c);const E=this.buildRelate(a,c);this.field.valueObjectArray.push(E),this.idField&&this.idField.valueList.push(a),this.field.formControl.setValue(this.field.valueObjectArray),this.field.formControl.markAsDirty()}onAdding(t){if(!t||this.idField&&this.idField.valueList.includes(t.id))return M.EMPTY;const i=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(t[i])?M.EMPTY:(0,M.of)(t)}showSelectModal(){const t=this.modalService.open(R.Yn,{size:"xl",scrollable:!0});t.componentInstance.module=this.getRelatedModule(),t.result.then(i=>{i&&i.selection&&i.selection.selected&&this.getSelectedRecord(i).forEach(c=>this.setItem(c))})}getSelectedRecord(t){let i=[];Object.keys(t.selection.selected).forEach(c=>{i.push(c)});let a=[];return t.records.forEach(c=>{c&&i.includes(c.id)&&a.push(c)}),a}setItem(t){this.field.valueList.includes(t.attributes[this.getRelateFieldName()])||(this.tag.appendTag(t.attributes),this.onAdd(t.attributes))}selectFirstElement(){const t=this.tag.dropdown.items;if(0!==t.length){const i=t[0];this.tag.appendTag(i),this.onAdd(i),this.tag.dropdown.hide()}}}return _.\u0275fac=function(t){return new(t||_)(d.\u0275\u0275directiveInject(m.HttpClient),d.\u0275\u0275directiveInject(o.LanguageStore),d.\u0275\u0275directiveInject(o.DataTypeFormatter),d.\u0275\u0275directiveInject(o.RelateService),d.\u0275\u0275directiveInject(o.ModuleNameMapper),d.\u0275\u0275directiveInject(v.NgbModal),d.\u0275\u0275directiveInject(o.FieldLogicManager))},_.\u0275cmp=d.\u0275\u0275defineComponent({type:_,selectors:[["scrm-multirelate-edit"]],viewQuery:function(t,i){if(1&t&&d.\u0275\u0275viewQuery(h,5),2&t){let a;d.\u0275\u0275queryRefresh(a=d.\u0275\u0275loadQuery())&&(i.tag=a.first)}},features:[d.\u0275\u0275ProvidersFeature([o.RelateService]),d.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],[3,"identifyBy","ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(t,i){1&t&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275template(1,r,7,17,"ng-container",1),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(2,s,2,2,"small",2)),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",i.initModule),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",i.getMessage()))},directives:[B.NgIf,K.TagInputComponent,O.NgControlStatus,O.NgModel,K.TagInputDropdown,o.ButtonComponent,o.LabelComponent],encapsulation:2}),_})()},4190:(j,L,e)=>{e.d(L,{E:()=>n});var g=e(1090),u=e(3227),C=e(5864),D=e(9764),f=e(4468);let n=(()=>{class o{}return o.\u0275fac=function(R){return new(R||o)},o.\u0275mod=f.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=f.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.TagInputModule,D.LabelModule,C.FormsModule,D.InlineLoadingSpinnerModule,D.ButtonModule,D.TableModule]]}),o})()},3827:(j,L,e)=>{e.d(L,{b:()=>O});var g=e(3227),u=e(273),C=e(7255),D=e(1180),f=e(9764),n=e(4468),P=e(5864),d=e(1090);const B=["tag"];function F(x,h){if(1&x&&(n.\u0275\u0275elementStart(0,"small",8),n.\u0275\u0275element(1,"scrm-label",9),n.\u0275\u0275elementEnd()),2&x){const r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",r.getMessage())("module",r.module)}}let O=(()=>{class x extends f.BaseRelateComponent{constructor(r,s,l,_,T,t){super(r,s,l,_,t),this.languages=r,this.typeFormatter=s,this.relateService=l,this.moduleNameMapper=_,this.modalService=T,this.logic=t,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){const r=this.record;this.field.valueList=[],this.field.valueObjectArray=[];const s=this.field&&this.field.criteria&&this.field.criteria.values||[];s.length>0&&(this.field.valueList=s,this.selectedTags=s);const l=this.field&&this.field.criteria&&this.field.criteria.valueObjectArray||[];l.length>0&&(this.field.valueObjectArray=(0,u.deepClone)(l),this.selectedTags=(0,u.deepClone)(l)),super.ngOnInit();const _=this.getRelateIdField();if(_&&r&&r.criteriaFields&&r.criteriaFields[_]){this.idField=r.criteriaFields[_],this.idField.valueList=[];const T=this.idField&&this.idField.criteria&&this.idField.criteria.values||[];T.length>0&&(this.idField.valueList=(0,u.deepClone)(T))}}onAdd(r){r&&this.setValue(r)}onAdding(r){if(!r||this.idField&&this.idField.valueList.includes(r.id))return D.EMPTY;const s=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(r[s])?D.EMPTY:(0,D.of)(r)}onRemove(r){var s,l;const _=null!==(s=r.id)&&void 0!==s?s:"",T=null!==(l=r.name)&&void 0!==l?l:"";this.field.valueList=this.field.valueList.filter(t=>t!==T),this.field.valueObjectArray=this.field.valueObjectArray.filter(t=>t.id!==_),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray=(0,u.deepClone)(this.field.valueObjectArray),this.idField&&_&&(this.idField.valueList=this.idField.valueList.filter(t=>t!==_),this.updateSearchCriteria(this.idField)),setTimeout(()=>{this.tag.focus(!0,!0)},200)}selectFirstElement(){const r=this.tag.dropdown.items;if(0!==r.length){const s=r[0];this.tag.appendTag(s),this.onAdd(s),this.tag.dropdown.hide()}}setValue(r){const s=this.getRelateFieldName(),l=r.id,_=r[s];if(this.idField&&this.idField.valueList.includes(l)||!this.idField&&this.field.valueList.includes(_))return;const T={};T.id=l,T[s]=_,this.field.valueObjectArray.push(T),this.field.valueList.push(_),this.idField&&(this.idField.valueList.push(l),this.updateSearchCriteria(this.idField)),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray||(this.field.criteria.valueObjectArray=[]),this.field.criteria.valueObjectArray.push(T)}updateSearchCriteria(r){r.criteria.operator="=",r.criteria.values=r.valueList,r.formControl.setValue(r.valueList),r.formControl.markAsDirty()}showSelectModal(){const r=this.modalService.open(f.RecordListModalComponent,{size:"xl",scrollable:!0});r.componentInstance.module=this.getRelatedModule(),r.result.then(s=>{if(!s||!s.selection||!s.selection.selected)return;const l=this.getSelectedRecord(s);this.field.valueObjectArray.find(T=>T.id===l.id)||this.setItem(l)})}getSelectedRecord(r){let s="";Object.keys(r.selection.selected).some(_=>(s=_,!0));let l=null;return r.records.some(_=>{if(_&&_.id===s)return l=_,!0}),l}setItem(r){this.tag.appendTag(r.attributes),this.onAdd(r.attributes)}}return x.\u0275fac=function(r){return new(r||x)(n.\u0275\u0275directiveInject(f.LanguageStore),n.\u0275\u0275directiveInject(f.DataTypeFormatter),n.\u0275\u0275directiveInject(f.RelateService),n.\u0275\u0275directiveInject(f.ModuleNameMapper),n.\u0275\u0275directiveInject(C.NgbModal),n.\u0275\u0275directiveInject(f.FieldLogicManager))},x.\u0275cmp=n.\u0275\u0275defineComponent({type:x,selectors:[["scrm-multirelate-filter"]],viewQuery:function(r,s){if(1&r&&n.\u0275\u0275viewQuery(B,5),2&r){let l;n.\u0275\u0275queryRefresh(l=n.\u0275\u0275loadQuery())&&(s.tag=l.first)}},features:[n.\u0275\u0275ProvidersFeature([f.RelateService]),n.\u0275\u0275InheritDefinitionFeature],decls:8,vars:18,consts:[[1,"d-flex"],[1,"flex-grow-1"],[3,"ngModel","clearOnBlur","identifyBy","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(r,s){1&r&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275elementStart(2,"tag-input",2,3),n.\u0275\u0275listener("keyup.enter",function(){return s.selectFirstElement()})("onAdd",function(_){return s.onAdd(_)})("onBlur",function(){return s.resetStatus()})("onRemove",function(_){return s.onRemove(_)})("ngModelChange",function(_){return s.selectedTags=_}),n.\u0275\u0275element(4,"tag-input-dropdown",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",5),n.\u0275\u0275element(6,"scrm-button",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,F,2,2,"small",7)),2&r&&(n.\u0275\u0275advance(2),n.\u0275\u0275classMap(s.getInvalidClass()),n.\u0275\u0275property("ngModel",s.selectedTags)("clearOnBlur",!0)("identifyBy","id")("displayBy",s.getRelateFieldName())("inputClass",s.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",s.getPlaceholderLabel())("secondaryPlaceholder",s.getPlaceholderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("autocompleteObservable",s.search)("identifyBy","id")("displayBy",s.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",s.selectButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",s.getMessage()))},directives:[g.TagInputComponent,P.NgControlStatus,P.NgModel,g.TagInputDropdown,f.ButtonComponent,d.NgIf,f.LabelComponent],encapsulation:2}),x})()},1643:(j,L,e)=>{e.d(L,{v:()=>n});var g=e(1090),u=e(3227),C=e(5864),D=e(9764),f=e(4468);let n=(()=>{class o{}return o.\u0275fac=function(R){return new(R||o)},o.\u0275mod=f.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=f.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.TagInputModule,D.LabelModule,C.FormsModule,D.InlineLoadingSpinnerModule,D.ButtonModule,u.TagInputModule]]}),o})()},2894:(j,L,e)=>{e.d(L,{H:()=>h});var g=e(4762),K=e(3227),S=e(7255),v=e(2445),M=e(8510),m=e(9764),o=e(4468),R=e(1090),U=e(5864);const F=["tag"];function O(r,s){if(1&r){const l=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",3),o.\u0275\u0275elementStart(2,"tag-input",4,5),o.\u0275\u0275listener("keyup.enter",function(){return o.\u0275\u0275restoreView(l),o.\u0275\u0275nextContext().selectFirstElement()})("onAdd",function(T){return o.\u0275\u0275restoreView(l),o.\u0275\u0275nextContext().onAdd(T)})("onBlur",function(){return o.\u0275\u0275restoreView(l),o.\u0275\u0275nextContext().resetStatus()})("onRemove",function(){return o.\u0275\u0275restoreView(l),o.\u0275\u0275nextContext().onRemove()})("ngModelChange",function(T){return o.\u0275\u0275restoreView(l),o.\u0275\u0275nextContext().selectedValues=T}),o.\u0275\u0275element(4,"tag-input-dropdown",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",7),o.\u0275\u0275element(6,"scrm-button",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&r){const l=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275classMap(l.getInvalidClass()),o.\u0275\u0275property("ngModel",l.selectedValues)("clearOnBlur",!0)("displayBy",l.getRelateFieldName())("inputClass",l.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",l.getPlaceholderLabel())("secondaryPlaceholder",l.getPlaceholderLabel()),o.\u0275\u0275advance(2),o.\u0275\u0275property("autocompleteObservable",l.search)("displayBy",l.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),o.\u0275\u0275advance(2),o.\u0275\u0275property("config",l.selectButton)}}function x(r,s){if(1&r&&(o.\u0275\u0275elementStart(0,"small",9),o.\u0275\u0275element(1,"scrm-label",10),o.\u0275\u0275elementEnd()),2&r){const l=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("labelKey",l.getMessage())("module",l.module)}}let h=(()=>{class r extends m.BaseRelateComponent{constructor(l,_,T,t,i,a,c,E){super(T,t,i,a,E),this.http=l,this.router=_,this.languages=T,this.typeFormatter=t,this.relateService=i,this.moduleNameMapper=a,this.modalService=c,this.logic=E,this.getUnrelatedProfiles=()=>(0,g.mG)(this,void 0,void 0,function*(){let p=new v.HttpHeaders;return p.set("Content-Type","application/json; charset=utf-8"),yield new Promise((b,V)=>{this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=checkRelatedProfilesAccounts&profileID="+this.rec,{headers:p,responseType:"text"}).subscribe(I=>{b(parseInt(I))},I=>{V(I)})})}),this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){super.ngOnInit(),(()=>{(0,g.mG)(this,void 0,void 0,function*(){let l=this.router.url.split("/");this.pModule=l[1],this.rec=l[l.length-1],this.unrelated=yield this.getUnrelatedProfiles()})})(),this.init()}init(){super.init(),this.initValue();const l=this.getRelateIdField();l&&this.record&&this.record.fields&&this.record.fields[l]&&(this.idField=this.record.fields[l])}runPMSProfilesAction(){let l=new v.HttpHeaders;l.set("Content-Type","application/json; charset=utf-8"),this.http.get(location.origin+location.pathname+"legacy/index.php?entryPoint=relateProfilesToAccount&profileID="+this.rec,{headers:l,responseType:"text"}).subscribe(_=>{},_=>console.log("Error: "+_))}initValue(){this.field.valueObject&&this.field.valueObject.id?(this.selectedValues=[],this.selectedValues.push(this.field.valueObject)):this.selectedValues=[]}onAdd(l){if(l){const _=this.getRelateFieldName();this.setValue(l.id,l[_]);let T=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/;if("accounts"===this.field.definition.module.toLowerCase()&&"cb2b_pmsprofiles"===this.module.toLowerCase()&&null!==this.rec&&""!==this.rec&&void 0!==this.rec&&T.test(this.rec)&&this.unrelated>0){const t=this.modalService.open(m.MessageModalComponent);t.componentInstance.textKey="LBL_POPUP_PROFILES",t.componentInstance.buttons=[{labelKey:"LBL_POPUP_NO",klass:["btn-secondary"],onClick:i=>{i.dismiss()}},{labelKey:"LBL_POPUP_YES",klass:["btn-main"],onClick:i=>{this.runPMSProfilesAction(),i.close()}}]}}else this.setValue("",""),this.selectedValues=[]}onRemove(){this.setValue("",""),this.selectedValues=[],setTimeout(()=>{this.tag.focus(!0,!0)},200)}setValue(l,_){const T=this.buildRelate(l,_);this.field.value=_,this.field.valueObject=T,this.field.formControl.setValue(_),this.field.formControl.markAsDirty(),this.idField&&(this.idField.value=l,this.idField.formControl.setValue(l),this.idField.formControl.markAsDirty())}showSelectModal(){const l=this.modalService.open(m.RecordListModalComponent,{size:"xl",scrollable:!0});l.componentInstance.module=this.getRelatedModule(),l.result.then(_=>{if(!_||!_.selection||!_.selection.selected)return;const T=this.getSelectedRecord(_);this.setItem(T)})}getSelectedRecord(l){let _="";Object.keys(l.selection.selected).some(t=>(_=t,!0));let T=null;return l.records.some(t=>{if(t&&t.id===_)return T=t,!0}),T}setItem(l){this.tag.writeValue([l.attributes]),this.onAdd(l.attributes)}selectFirstElement(){const l=this.tag.dropdown.items;if(0!==l.length){const _=l[0];this.selectedValues.push(_),this.onAdd(_),this.tag.dropdown.hide()}}}return r.\u0275fac=function(l){return new(l||r)(o.\u0275\u0275directiveInject(v.HttpClient),o.\u0275\u0275directiveInject(M.Router),o.\u0275\u0275directiveInject(m.LanguageStore),o.\u0275\u0275directiveInject(m.DataTypeFormatter),o.\u0275\u0275directiveInject(m.RelateService),o.\u0275\u0275directiveInject(m.ModuleNameMapper),o.\u0275\u0275directiveInject(S.NgbModal),o.\u0275\u0275directiveInject(m.FieldLogicManager))},r.\u0275cmp=o.\u0275\u0275defineComponent({type:r,selectors:[["scrm-override-relate-edit"]],viewQuery:function(l,_){if(1&l&&o.\u0275\u0275viewQuery(F,5),2&l){let T;o.\u0275\u0275queryRefresh(T=o.\u0275\u0275loadQuery())&&(_.tag=T.first)}},features:[o.\u0275\u0275ProvidersFeature([m.RelateService]),o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],["maxItems","1",3,"ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(l,_){1&l&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,O,7,15,"ng-container",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(2,x,2,2,"small",2)),2&l&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",_.initModule),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",_.getMessage()))},directives:[R.NgIf,K.TagInputComponent,U.NgControlStatus,U.NgModel,K.TagInputDropdown,m.ButtonComponent,m.LabelComponent],encapsulation:2}),r})()},166:(j,L,e)=>{e.d(L,{U:()=>n});var g=e(1090),u=e(3227),C=e(5864),D=e(9764),f=e(4468);let n=(()=>{class o{}return o.\u0275fac=function(R){return new(R||o)},o.\u0275mod=f.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=f.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.TagInputModule,D.LabelModule,C.FormsModule,D.InlineLoadingSpinnerModule,D.ButtonModule]]}),o})()},9150:(j,L,e)=>{e.d(L,{M:()=>C}),e(273);var u=e(4468);let C=(()=>{class v{getKey(){return"multirelate"}map(M){!M.fields||!Object.keys(M.fields).length||Object.keys(M.fields).forEach(f=>{const m=M.fields[f],n=m.type||"",o=m.definition.source||"",R=m.definition.id_name||"";if("multirelate"!==n||"non-db"!==o||R!==f){if("multirelate"===n&&"non-db"===o&&""!==(m.definition.rname||"name")&&m.valueObjectArray){var d=[];return m.valueObjectArray.forEach(U=>{d.push(U.id)}),M.attributes[f]=m.valueObjectArray,void(M.attributes[R]=d.join(", "))}}else M.attributes[f]=m.value})}}return v.\u0275fac=function(M){return new(M||v)},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},6707:(j,L,e)=>{e(1180),e(2343),e(9764),e(4468),e(1090),e(8906)},7094:(j,L,e)=>{e.d(L,{d:()=>m});var g=e(1090),u=e(2594),C=e(9764),D=e(5770),M=e(4468);let m=(()=>{class n{}return n.\u0275fac=function(P){return new(P||n)},n.\u0275mod=M.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=M.\u0275\u0275defineInjector({imports:[[g.CommonModule,D.o,C.WidgetPanelModule,u.AngularSvgIconModule,C.SidebarWidgetModule]]}),n})()},1400:(j,L,e)=>{e(9764),e(4468),e(1090),e(6707)},4738:(j,L,e)=>{e.d(L,{G:()=>m});var g=e(1090),u=e(9764),C=e(7094),v=e(8383),M=e(4468);let m=(()=>{class n{}return n.\u0275fac=function(P){return new(P||n)},n.\u0275mod=M.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=M.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.ListHeaderModule,C.d,u.FieldModule,v.CdkTableModule,u.ModalModule,u.LoadingSpinnerModule,u.FullPageSpinnerModule]]}),n})()},6660:(j,L,e)=>{e(7255),e(4468),e(9764),e(1090)},6511:(j,L,e)=>{e(9764),e(4468),e(1090),e(6381)},9878:(j,L,e)=>{e.d(L,{C:()=>M});var g=e(1090),u=e(9764),C=e(3015),v=e(4468);let M=(()=>{class f{}return f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=v.\u0275\u0275defineNgModule({type:f}),f.\u0275inj=v.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.ModuleTitleModule,u.DynamicLabelModule,u.ActionGroupMenuModule,u.FavoriteToggleModule,C.n]]}),f})()},6400:(j,L,e)=>{e(9764),e(8510),e(4468),e(1090),e(6511)},8302:(j,L,e)=>{e.d(L,{q:()=>M});var g=e(1090),u=e(9764),C=e(9878),v=e(4468);let M=(()=>{class f{}return f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=v.\u0275\u0275defineNgModule({type:f}),f.\u0275inj=v.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.FieldModule,u.RecordContainerModule,C.C,u.StatusBarModule,u.SubpanelModule]]}),f})()},4762:(j,L,e)=>{e.d(L,{ZT:()=>K,pi:()=>u,_T:()=>S,gn:()=>C,mG:()=>M,Jh:()=>f,ev:()=>U});var g=function(t,i){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&(a[E]=c[E])})(t,i)};function K(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function a(){this.constructor=t}g(t,i),t.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}var u=function(){return(u=Object.assign||function(i){for(var a,c=1,E=arguments.length;c<E;c++)for(var p in a=arguments[c])Object.prototype.hasOwnProperty.call(a,p)&&(i[p]=a[p]);return i}).apply(this,arguments)};function S(t,i){var a={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&i.indexOf(c)<0&&(a[c]=t[c]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var E=0;for(c=Object.getOwnPropertySymbols(t);E<c.length;E++)i.indexOf(c[E])<0&&Object.prototype.propertyIsEnumerable.call(t,c[E])&&(a[c[E]]=t[c[E]])}return a}function C(t,i,a,c){var b,E=arguments.length,p=E<3?i:null===c?c=Object.getOwnPropertyDescriptor(i,a):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(t,i,a,c);else for(var V=t.length-1;V>=0;V--)(b=t[V])&&(p=(E<3?b(p):E>3?b(i,a,p):b(i,a))||p);return E>3&&p&&Object.defineProperty(i,a,p),p}function M(t,i,a,c){return new(a||(a=Promise))(function(p,b){function V(A){try{y(c.next(A))}catch(W){b(W)}}function I(A){try{y(c.throw(A))}catch(W){b(W)}}function y(A){A.done?p(A.value):function(p){return p instanceof a?p:new a(function(b){b(p)})}(A.value).then(V,I)}y((c=c.apply(t,i||[])).next())})}function f(t,i){var c,E,p,b,a={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return b={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function V(y){return function(A){return function(y){if(c)throw new TypeError("Generator is already executing.");for(;a;)try{if(c=1,E&&(p=2&y[0]?E.return:y[0]?E.throw||((p=E.return)&&p.call(E),0):E.next)&&!(p=p.call(E,y[1])).done)return p;switch(E=0,p&&(y=[2&y[0],p.value]),y[0]){case 0:case 1:p=y;break;case 4:return a.label++,{value:y[1],done:!1};case 5:a.label++,E=y[1],y=[0];continue;case 7:y=a.ops.pop(),a.trys.pop();continue;default:if(!(p=(p=a.trys).length>0&&p[p.length-1])&&(6===y[0]||2===y[0])){a=0;continue}if(3===y[0]&&(!p||y[1]>p[0]&&y[1]<p[3])){a.label=y[1];break}if(6===y[0]&&a.label<p[1]){a.label=p[1],p=y;break}if(p&&a.label<p[2]){a.label=p[2],a.ops.push(y);break}p[2]&&a.ops.pop(),a.trys.pop();continue}y=i.call(t,a)}catch(A){y=[6,A],E=0}finally{c=p=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,A])}}}function U(t,i,a){if(a||2===arguments.length)for(var p,c=0,E=i.length;c<E;c++)(p||!(c in i))&&(p||(p=Array.prototype.slice.call(i,0,c)),p[c]=i[c]);return t.concat(p||Array.prototype.slice.call(i))}}}]);