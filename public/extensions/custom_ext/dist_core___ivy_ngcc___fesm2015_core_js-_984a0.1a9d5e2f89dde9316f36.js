var Co=Math.pow;(self.webpackChunkcustomExt=self.webpackChunkcustomExt||[]).push([["dist_core___ivy_ngcc___fesm2015_core_js-_984a0"],{1950:(je,ce,I)=>{"use strict";I.r(ce),I.d(ce,{ActionBarUiComponent:()=>c_,ActionBarUiModule:()=>d_,ActionGroupMenuComponent:()=>Aa,ActionGroupMenuModule:()=>Na,ActionMenuComponent:()=>r0,ActionMenuModule:()=>qu,ActionNameMapper:()=>Jr,AppMetadataStore:()=>Qr,AppStateStore:()=>At,AsyncActionHandler:()=>Ka,AsyncActionService:()=>tn,AsyncProcessLineAction:()=>ed,AsyncProcessRecordAction:()=>Ud,AsyncProcessRecordThreadItemAction:()=>pd,AsyncProcessSubpanelAction:()=>Ou,AsyncProcessSubpanelLineAction:()=>Fd,AttributeBuilder:()=>ll,AuthGuard:()=>W4,AuthService:()=>Rn,BaseActionManager:()=>vi,BaseActionsAdapter:()=>d0,BaseBooleanComponent:()=>Pc,BaseChartComponent:()=>Rs,BaseChartModule:()=>d4,BaseComposite:()=>Vy,BaseDateTimeComponent:()=>po,BaseEnumComponent:()=>qr,BaseFavoritesComponent:()=>Su,BaseFieldComponent:()=>Dn,BaseFieldGridComponent:()=>wc,BaseFieldModule:()=>j4,BaseFieldRegistry:()=>_i,BaseGroupedMenuItemComponent:()=>ub,BaseHomeMenuItemComponent:()=>_b,BaseLineActionsAdapter:()=>f0,BaseLineItemsComponent:()=>Gy,BaseMenuFavoritesComponent:()=>Bb,BaseMenuItemComponent:()=>Mb,BaseMenuItemLinkComponent:()=>lb,BaseMenuItemsListComponent:()=>pb,BaseMenuRecentlyViewedComponent:()=>gb,BaseMetadataResolver:()=>Nd,BaseMobileGroupedMenuComponent:()=>Db,BaseMobileMenuComponent:()=>xb,BaseMobileModuleMenuComponent:()=>Ab,BaseModuleResolver:()=>aM,BaseMultiEnumComponent:()=>Bs,BaseNameComponent:()=>T_,BaseNavbarComponent:()=>ib,BaseNumberComponent:()=>Vs,BaseRecordActionsAdapter:()=>Zi,BaseRecordContainerStore:()=>dd,BaseRecordResolver:()=>J4,BaseRelateComponent:()=>Wc,BaseRouteService:()=>_u,BaseSaveRecordMapper:()=>bo,BaseSubMenuFavoritesComponent:()=>Ob,BaseSubMenuRecentlyViewedComponent:()=>Lb,BaseWidgetComponent:()=>qi,BaseWidgetModule:()=>O4,BooleanDetailFieldComponent:()=>Jo,BooleanDetailFieldModule:()=>cy,BooleanEditFieldComponent:()=>tl,BooleanEditFieldModule:()=>sy,BooleanFilterFieldComponent:()=>qs,BooleanFilterFieldModule:()=>H_,BottomWidgetAdapter:()=>Gd,BulkActionMenuComponent:()=>Mc,BulkActionMenuModule:()=>Cc,BulkActionsAdapter:()=>hM,BulkActionsAdapterFactory:()=>gM,ButtonComponent:()=>ir,ButtonGroupComponent:()=>co,ButtonGroupModule:()=>Vi,ButtonLoadingDirective:()=>yc,ButtonLoadingUiModule:()=>bc,ButtonModule:()=>Sn,ButtonUtils:()=>m_,CancelCreateAction:()=>kd,CancelRecordPanelAction:()=>tf,ChangelogAsyncAction:()=>Lu,ChartComponent:()=>S_,ChartDataStore:()=>O0,ChartDataStoreFactory:()=>j0,ChartMessageAreaComponent:()=>Go,ChartMessageAreaModule:()=>Wo,ChartModule:()=>x_,ChartRegistry:()=>C_,ChartSidebarWidgetComponent:()=>B0,ChartSidebarWidgetModule:()=>P0,ClassicModalComponent:()=>Ub,ClassicModalModule:()=>E4,ClassicViewResolver:()=>rU,ClassicViewUiComponent:()=>tU,ClassicViewUiModule:()=>nU,CloseButtonComponent:()=>xc,CloseButtonModule:()=>Ta,CollectionGQL:()=>Ia,ColumnChooserComponent:()=>w_,ColumnChooserModule:()=>E_,CompositeComponent:()=>ta,CompositeModule:()=>$y,ConfirmationModalService:()=>In,CreateRecordComponent:()=>iU,CreateRecordModule:()=>aU,CreateRelatedLineAction:()=>Yu,CreateViewStore:()=>Il,CurrencyDetailFieldComponent:()=>$s,CurrencyDetailFieldModule:()=>B_,CurrencyFormatter:()=>Os,CurrencyService:()=>$i,CurrencyUnitConverter:()=>Cd,CurrencyValidator:()=>nu,DataTypeFormatter:()=>vt,DataTypeSeriesMapper:()=>xd,DataTypeUnitConverter:()=>Sd,DateAdapter:()=>Bc,DateDetailFieldComponent:()=>Us,DateDetailFieldModule:()=>R_,DateEditFieldComponent:()=>$c,DateEditFieldModule:()=>ry,DateFilterFieldComponent:()=>zs,DateFilterFieldModule:()=>my,DateFormatter:()=>li,DateParserFormatter:()=>jc,DateTimeDetailFieldComponent:()=>Gs,DateTimeDetailFieldModule:()=>k_,DateTimeEditFieldComponent:()=>Oc,DateTimeEditFieldModule:()=>P_,DateTimeFilterFieldComponent:()=>U_,DateTimeFilterFieldModule:()=>V_,DateTimeModel:()=>ci,DateTimeValidator:()=>iu,DateValidator:()=>ru,DatetimeFormatter:()=>si,DisplayTypeAction:()=>Dc,DropdownButtonComponent:()=>Ls,DropdownButtonModule:()=>Ui,DropdownEnumDetailFieldComponent:()=>il,DropdownEnumDetailFieldModule:()=>vy,DropdownEnumEditFieldComponent:()=>Jc,DropdownEnumEditFieldModule:()=>gy,DropdownSubmenuComponent:()=>f_,DropdownSubmenuModule:()=>p_,DuplicateEmailValidator:()=>fu,DynamicEnumDetailFieldComponent:()=>B4,DynamicEnumDetailFieldModule:()=>P4,DynamicEnumEditFieldComponent:()=>k4,DynamicEnumEditFieldModule:()=>U4,DynamicFieldComponent:()=>Va,DynamicFieldModule:()=>$a,DynamicLabelComponent:()=>Ra,DynamicLabelModule:()=>Oa,DynamicLabelService:()=>I_,EmailDetailFieldsComponent:()=>V4,EmailDetailFieldsModule:()=>$4,EmailFormatter:()=>su,EmailListFieldsComponent:()=>Hs,EmailListFieldsModule:()=>$_,EmailPrimarySelectAction:()=>Ic,EmailValidator:()=>lu,EntityGQL:()=>Zr,EntityMutationGQL:()=>_c,EnumDetailFieldComponent:()=>zi,EnumDetailFieldModule:()=>N_,EnumEditFieldComponent:()=>Ba,EnumEditFieldModule:()=>z_,ErrorInterceptor:()=>K4,ExportAsyncAction:()=>Fu,ExtensionLoader:()=>q4,FavoriteToggleComponent:()=>h0,FavoriteToggleModule:()=>g0,FavoritesService:()=>p0,FieldBuilder:()=>ea,FieldComponent:()=>yi,FieldGridComponent:()=>Ec,FieldGridModule:()=>vo,FieldLayoutComponent:()=>Hy,FieldLayoutModule:()=>vu,FieldLogicActionHandler:()=>fo,FieldLogicManager:()=>Nt,FieldManager:()=>Yn,FieldModule:()=>cr,FieldRegistry:()=>ul,FilterAdapter:()=>rf,FilterAttributeBuilder:()=>mu,FilterFieldBuilder:()=>cl,FilterListStore:()=>Yb,FilterListStoreFactory:()=>e0,FilterUiComponent:()=>m4,FilterUiModule:()=>h4,FiltersListGQL:()=>vl,FloatDetailFieldComponent:()=>Zs,FloatDetailFieldModule:()=>W_,FloatValidator:()=>ou,FooterUiComponent:()=>g4,FooterUiModule:()=>Jy,FormControlUtils:()=>yr,FormatCurrencyModule:()=>j_,FormatCurrencyPipe:()=>O_,FormatNumberModule:()=>Vc,FormatNumberPipe:()=>Uc,FullNameDetailFieldsComponent:()=>ks,FullNameDetailFieldsModule:()=>L_,FullPageSpinnerComponent:()=>v4,FullPageSpinnerModule:()=>_4,GlobalSearch:()=>l_,GridWidgetComponent:()=>yu,GridWidgetModule:()=>bu,GroupFieldBuilder:()=>pu,GroupFieldComponent:()=>Yo,GroupFieldModule:()=>Fy,GroupedMenuItemComponent:()=>fb,GroupedMenuItemRegistry:()=>db,HistorySidebarWidgetComponent:()=>V0,HistorySidebarWidgetModule:()=>$0,HistoryTimelineAdapter:()=>wd,HistoryTimelineAdapterFactory:()=>U0,HistoryTimelineStore:()=>k0,HistoryTimelineStoreFactory:()=>wl,HomeMenuItemComponent:()=>bb,HomeMenuItemRegistry:()=>yb,HomeUiComponent:()=>eb,HomeUiModule:()=>C4,HomeUiRoutes:()=>tb,HtmlDetailFieldComponent:()=>by,HtmlDetailFieldModule:()=>My,HtmlSanitizeModule:()=>G4,HtmlSanitizePipe:()=>z4,IconDetailFieldComponent:()=>Ua,IconListFieldModule:()=>Ey,IframePageChangeObserver:()=>Tu,IframeResizeHandlerHandler:()=>Nu,ImageComponent:()=>An,ImageModule:()=>En,ImmediateDebounce:()=>m0,InlineLoadingSpinnerComponent:()=>Hc,InlineLoadingSpinnerModule:()=>go,InstallAction:()=>Jd,InstallActionManager:()=>Qd,InstallActionsAdapter:()=>Xd,InstallAuthGuard:()=>H4,InstallContainerComponent:()=>dM,InstallContainerModule:()=>fM,InstallContentAdapter:()=>Yd,InstallErrorModalComponent:()=>Eu,InstallErrorModalModule:()=>S4,InstallHeaderComponent:()=>pM,InstallHeaderModule:()=>mM,InstallViewActionHandler:()=>cM,InstallViewComponent:()=>sU,InstallViewModule:()=>lU,InstallViewStore:()=>sa,IntDetailFieldComponent:()=>rl,IntDetailFieldModule:()=>fy,IntValidator:()=>au,LabelComponent:()=>gn,LabelModule:()=>dn,LanguageStore:()=>Ke,LineActionActionHandler:()=>Xu,LineActionActionManager:()=>bl,LineActionMenuComponent:()=>Vb,LineActionModule:()=>$b,LineActionsAdapter:()=>vM,LineChartComponent:()=>y_,LineChartModule:()=>b_,LineItemBuilder:()=>hu,LineItemsComponent:()=>Wy,LineItemsModule:()=>Ky,LinkModel:()=>I4,LinkTarget:()=>yo,ListComponent:()=>cU,ListContainerComponent:()=>bM,ListContainerModule:()=>MM,ListFilterComponent:()=>cd,ListFilterModule:()=>ud,ListFilterStore:()=>ld,ListFilterStoreFactory:()=>C0,ListGQL:()=>Pa,ListHeaderComponent:()=>CM,ListHeaderModule:()=>SM,ListModule:()=>uU,ListViewRecordPanelActionAdapterFactory:()=>yM,ListViewRecordPanelActionHandler:()=>ef,ListViewRecordPanelActionsAdapter:()=>_M,ListViewSidebarWidgetAdapter:()=>af,ListViewStore:()=>br,LoadingBuffer:()=>i_,LoadingBufferFactory:()=>Ns,LoadingSpinnerComponent:()=>oa,LoadingSpinnerModule:()=>aa,LocalStorageService:()=>Fr,LoginAuthGuard:()=>Z4,LoginUiComponent:()=>xM,LoginUiModule:()=>dU,LoginUiRoutes:()=>wM,LogoAbstract:()=>nb,LogoUiComponent:()=>ml,LogoUiModule:()=>hl,LogoutComponent:()=>fU,LogoutModule:()=>pU,LogoutUiComponent:()=>ab,LogoutUiModule:()=>sb,MaxColumnsCalculator:()=>ho,MenuFavoritesComponent:()=>wu,MenuFavoritesRegistry:()=>Pb,MenuItemComponent:()=>Sb,MenuItemLinkComponent:()=>Ki,MenuItemLinkRegistry:()=>cb,MenuItemRegistry:()=>Cb,MenuItemsListComponent:()=>hb,MenuItemsListRegistry:()=>mb,MenuRecentlyViewedComponent:()=>Mu,MenuRecentlyViewedRegistry:()=>vb,MessageModalComponent:()=>Ha,MessageModalModule:()=>D4,MessageService:()=>it,MessageUiComponent:()=>x4,MessageUiModule:()=>w4,MetadataStore:()=>St,MinimiseButtonComponent:()=>Xy,MinimiseButtonModule:()=>Yy,MobileGroupedMenuComponent:()=>Fb,MobileGroupedMenuRegistry:()=>Ib,MobileMenuComponent:()=>Eb,MobileMenuRegistry:()=>wb,MobileModuleMenuComponent:()=>Tb,MobileModuleMenuRegistry:()=>Nb,ModalButtonGroupComponent:()=>zb,ModalButtonGroupModule:()=>Gb,ModalComponent:()=>Ko,ModalModule:()=>uo,ModalRecordFilterAdapter:()=>Z_,ModalRecordListTableAdapter:()=>q_,ModuleNameMapper:()=>on,ModuleNavigation:()=>xn,ModuleTitleComponent:()=>Bu,ModuleTitleModule:()=>Za,MultiEnumDetailFieldComponent:()=>Ws,MultiEnumDetailFieldModule:()=>G_,MultiEnumEditFieldComponent:()=>nl,MultiEnumEditFieldModule:()=>dy,MultiEnumFilterFieldComponent:()=>Ps,MultiEnumFilterFieldModule:()=>iy,NavbarAbstract:()=>rb,NavbarRegistry:()=>ob,NavbarUiComponent:()=>M4,NavbarUiModule:()=>kb,NavigationStore:()=>tr,NoopAsyncAction:()=>Au,NumberFormatter:()=>Pr,PaginationComponent:()=>Pu,PaginationModule:()=>ku,PanelComponent:()=>ia,PanelModule:()=>Gi,PasswordDetailFieldComponent:()=>al,PasswordDetailFieldModule:()=>Cy,PasswordEditFieldComponent:()=>Xc,PasswordEditFieldModule:()=>Sy,PhoneDetailFieldComponent:()=>js,PhoneDetailFieldModule:()=>ny,PhoneFormatter:()=>La,PhoneValidator:()=>cu,PieGridChartComponent:()=>h_,PieGridChartModule:()=>__,PrimaryEmailValidator:()=>du,ProcessService:()=>Ar,RadioEnumDetailFieldComponent:()=>ol,RadioEnumDetailFieldModule:()=>_y,RadioEnumEditFieldComponent:()=>Qc,RadioEnumEditFieldModule:()=>yy,RangeValidator:()=>uu,RecentlyViewedService:()=>es,RecordActionHandler:()=>bi,RecordActionManager:()=>Vd,RecordActionsAdapter:()=>Hd,RecordCancelAction:()=>Ld,RecordComponent:()=>oU,RecordContainerComponent:()=>Wd,RecordContainerModule:()=>Kd,RecordContentAdapter:()=>$d,RecordContentComponent:()=>Uu,RecordContentModule:()=>Vu,RecordContentSkeletonComponent:()=>Wb,RecordContentSkeletonModule:()=>Kb,RecordCreateAction:()=>Bd,RecordEditAction:()=>jd,RecordFetchGQL:()=>kr,RecordFlexboxComponent:()=>Hb,RecordFlexboxModule:()=>Zb,RecordGridComponent:()=>$u,RecordGridModule:()=>qa,RecordHeaderComponent:()=>Zd,RecordHeaderModule:()=>qd,RecordListModalComponent:()=>ka,RecordListModalModule:()=>N4,RecordListModalStore:()=>X_,RecordListModalStoreFactory:()=>Y_,RecordListStore:()=>zc,RecordListStoreFactory:()=>lr,RecordManager:()=>er,RecordModule:()=>lM,RecordPanelActionHandler:()=>x0,RecordPanelActionManager:()=>Fl,RecordPanelAdapter:()=>of,RecordPanelComponent:()=>S0,RecordPanelModule:()=>w0,RecordPanelStore:()=>fd,RecordPanelStoreFactory:()=>D0,RecordSaveAction:()=>Rd,RecordSaveGQL:()=>Xr,RecordSaveNewAction:()=>Pd,RecordStore:()=>Ku,RecordStoreFactory:()=>Hi,RecordStoreList:()=>I0,RecordThreadComponent:()=>T0,RecordThreadItemActionHandler:()=>Qa,RecordThreadItemActionManager:()=>Sl,RecordThreadItemActionsAdapter:()=>F0,RecordThreadItemActionsAdapterFactory:()=>A0,RecordThreadItemCancelAction:()=>md,RecordThreadItemComponent:()=>L0,RecordThreadItemEditAction:()=>hd,RecordThreadItemModule:()=>yd,RecordThreadItemSaveAction:()=>gd,RecordThreadItemStore:()=>vd,RecordThreadItemStoreFactory:()=>Xa,RecordThreadModule:()=>R0,RecordThreadSidebarWidgetComponent:()=>z0,RecordThreadSidebarWidgetModule:()=>R4,RecordThreadStore:()=>_d,RecordThreadStoreFactory:()=>N0,RecordToggleWidgetsAction:()=>Od,RecordViewStore:()=>Lr,RecoverPasswordService:()=>sM,RedirectAsyncAction:()=>Iu,RelateDetailFieldComponent:()=>Js,RelateDetailFieldsModule:()=>oy,RelateEditFieldComponent:()=>Kc,RelateEditFieldModule:()=>ey,RelateFilterFieldComponent:()=>Zc,RelateFilterFieldModule:()=>ay,RelateService:()=>Xo,RequiredAction:()=>Fc,RequiredValidator:()=>ja,RouteConverter:()=>Tr,RunBulkActionRecordPanelAction:()=>nf,SaveFilterStoreFactory:()=>Cl,SavedFilterActionAdapterFactory:()=>M0,SavedFilterActionHandler:()=>td,SavedFilterActionManager:()=>Ml,SavedFilterActionsAdapter:()=>b0,SavedFilterDeleteAction:()=>rd,SavedFilterRecordStore:()=>_0,SavedFilterRecordStoreFactory:()=>id,SavedFilterSaveAction:()=>nd,SavedFilterSaveGQL:()=>ad,SavedFilterStore:()=>od,SavedSearchRecordMapper:()=>sd,ScreenSize:()=>Xn,ScreenSizeObserverService:()=>lo,SelectModalService:()=>Pn,SeriesMapper:()=>xl,SeriesStatisticsStore:()=>bd,SeriesStatisticsStoreFactory:()=>Y4,SeriesTraverser:()=>Md,SettingsMenuComponent:()=>i0,SettingsMenuModule:()=>Ju,SidebarWidgetAdapter:()=>Td,SidebarWidgetComponent:()=>Dd,SidebarWidgetModule:()=>Id,SidebarWidgetRegistry:()=>H0,SingleValueStatisticsStore:()=>Qy,SingleValueStatisticsStoreFactory:()=>ra,SortButtonComponent:()=>qb,SortButtonModule:()=>Jb,StandardFieldRegistry:()=>sl,StateManager:()=>za,StatisticsBatch:()=>Wu,StatisticsFetchGQL:()=>mr,StatisticsSidebarWidgetComponent:()=>G0,StatisticsSidebarWidgetModule:()=>W0,StatisticsStore:()=>pl,StatisticsStoreFactory:()=>eU,StatisticsTopWidgetComponent:()=>eM,StatisticsTopWidgetModule:()=>tM,StatusBarComponent:()=>Hu,StatusBarModule:()=>Qu,SubMenuFavoritesComponent:()=>xu,SubMenuFavoritesRegistry:()=>jb,SubMenuRecentlyViewedComponent:()=>Cu,SubMenuRecentlyViewedRegistry:()=>Rb,SubpanelActionHandler:()=>gl,SubpanelActionManager:()=>ju,SubpanelComponent:()=>Q0,SubpanelContainerComponent:()=>X0,SubpanelContainerModule:()=>Y0,SubpanelCreateAction:()=>Du,SubpanelLineActionHandler:()=>Z0,SubpanelLineActionManager:()=>Ya,SubpanelLineActionsAdapter:()=>q0,SubpanelLineActionsAdapterFactory:()=>El,SubpanelModule:()=>Dl,SubpanelSelectAction:()=>Ru,SubpanelStore:()=>Ja,SubpanelStoreFactory:()=>zu,SubpanelTableAdapter:()=>Ad,SubpanelTableAdapterFactory:()=>J0,SystemConfigStore:()=>yt,SystemNameService:()=>Q4,TableAdapter:()=>sf,TableBodyComponent:()=>s0,TableBodyModule:()=>l0,TableComponent:()=>_l,TableFooterComponent:()=>c0,TableFooterModule:()=>u0,TableHeaderComponent:()=>o0,TableHeaderModule:()=>a0,TableModule:()=>yl,TextDetailFieldComponent:()=>Lc,TextDetailFieldModule:()=>ty,TextEditFieldComponent:()=>qc,TextEditFieldModule:()=>hy,ThemeImagesStore:()=>_r,TinymceDetailFieldComponent:()=>Yc,TinymceDetailFieldModule:()=>xy,TinymceEditFieldComponent:()=>eu,TinymceEditFieldModule:()=>wy,TopWidgetAdapter:()=>zd,TopWidgetComponent:()=>iM,TopWidgetModule:()=>oM,UpdateBaseCurrencyAction:()=>Ac,UpdateCurrencyAction:()=>Nc,UpdateFlexRelateModuleAction:()=>Tc,UrlDetailFieldComponent:()=>qo,UrlDetailFieldModule:()=>uy,UserActionMenuUiComponent:()=>F4,UserActionMenuUiModule:()=>A4,UserPreferenceStore:()=>Vt,UserService:()=>X4,ValidationManager:()=>Nr,VarcharDetailFieldComponent:()=>Zo,VarcharDetailFieldModule:()=>py,VarcharEditFieldComponent:()=>Rc,VarcharEditFieldModule:()=>ly,VarcharFilterFieldComponent:()=>kc,VarcharFilterFieldModule:()=>K_,VerticalBarChartComponent:()=>g_,VerticalBarChartModule:()=>v_,ViewStore:()=>Gu,WidgetPanelComponent:()=>Ga,WidgetPanelModule:()=>Wi,alertTypes:()=>Wa,baseFieldComponents:()=>Iy,baseFieldModules:()=>Dy,baseViewFieldsMap:()=>tu,booleanRequiredValidator:()=>A_,chartModules:()=>M_,chartTypeMap:()=>Sc,componentTypeMap:()=>Ed,currencyValidator:()=>Ay,dateTimeValidator:()=>Ty,dateValidator:()=>Ny,duplicateEmailValidator:()=>Uy,emailValidator:()=>Oy,fieldComponents:()=>p4,fieldModules:()=>zy,floatValidator:()=>Ly,intValidator:()=>Ry,maxValidator:()=>Py,minValidator:()=>By,phoneValidator:()=>jy,primaryEmailValidator:()=>ky,requiredValidator:()=>F_,sidebarWidgetModules:()=>K0,topWidgetComponentTypeMap:()=>rM,topWidgetModules:()=>nM,viewFieldsMap:()=>gu});var t=I(4468),w=I(1180),v=I(2343),W=I(8193),X=I(4832),q=I.n(X),D=I(273),ie=I(9298),z=I(8510),_=I(1090),y=I(5864),O=I(2594),B=I(4762),de=I(9490),le=I(9642);const re=new Set;let Ce,xe=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Fe}matchMedia(e){return this._platform.WEBKIT&&function(n){if(!re.has(n))try{Ce||(Ce=document.createElement("style"),Ce.setAttribute("type","text/css"),document.head.appendChild(Ce)),Ce.sheet&&(Ce.sheet.insertRule(`@media ${n} {.fx-query-test{ }}`,0),re.add(n))}catch(i){console.error(i)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(le.t4))},n.\u0275prov=(0,t.\u0275\u0275defineInjectable)({factory:function(){return new n((0,t.\u0275\u0275inject)(le.t4))},token:n,providedIn:"root"}),n})();function Fe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let ke=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new w.Subject}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return et((0,de.Eq)(e)).some(o=>this._registerQuery(o).mql.matches)}observe(e){const o=et((0,de.Eq)(e)).map(s=>this._registerQuery(s).observable);let a=(0,w.combineLatest)(o);return a=(0,w.concat)(a.pipe((0,v.take)(1)),a.pipe((0,v.skip)(1),(0,v.debounceTime)(0))),a.pipe((0,v.map)(s=>{const l={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:f})=>{l.matches=l.matches||c,l.breakpoints[f]=c}),l}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),a={observable:new w.Observable(s=>{const l=c=>this._zone.run(()=>s.next(c));return r.addListener(l),()=>{r.removeListener(l)}}).pipe((0,v.startWith)(r),(0,v.map)(({matches:s})=>({query:e,matches:s})),(0,v.takeUntil)(this._destroySubject)),mql:r};return this._queries.set(e,a),a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(xe),t.\u0275\u0275inject(t.NgZone))},n.\u0275prov=(0,t.\u0275\u0275defineInjectable)({factory:function(){return new n((0,t.\u0275\u0275inject)(xe),(0,t.\u0275\u0275inject)(t.NgZone))},token:n,providedIn:"root"}),n})();function et(n){return n.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}var be=I(7255),He=I(6013),tt=I(6670);const dt=new t.InjectionToken("EventArgument",{providedIn:"root",factory:function(){return"$event"}}),Ue=new t.InjectionToken("DynamicComponentInjector");let Ye=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})();function Bt(n){return new t.SimpleChange(void 0,n,!0)}function lt(){}let Yt=(()=>{class n{constructor(e,r,o){this.differs=e,this.cfr=r,this.eventArgument=o,this.checkInit=this.failInit,this.lastComponentInst=null,this.inputsDiffer=this.differs.find({}).create(),this.compFactory=null,this.outputsShouldDisconnect$=new w.Subject,this.outputsChanged=()=>!1}get compRef(){return this.compInjector.componentRef}get componentInst(){return this.compRef?this.compRef.instance:null}get componentInstChanged(){return this.lastComponentInst!==this.componentInst&&(this.lastComponentInst=this.componentInst,!0)}get compCdr(){return this.compRef?this.compRef.injector.get(t.ChangeDetectorRef):null}ngOnDestroy(){this._disconnectOutputs()}init(e,r={}){if(this.checkInit=e?lt:this.failInit,this.compInjector=e,r.trackOutputChanges){const o=this.differs.find({}).create();this.outputsChanged=a=>!!o.diff(a)}}update(e,r,o,a){this.checkInit(),this.updateIO(e,r);const s=this.componentInstChanged;if(s||o){const l=this._getInputsChanges();l&&this._updateInputChanges(l),this.updateInputs(s||!this.lastInputChanges)}(s||a)&&this.bindOutputs()}maybeUpdate(){if(this.checkInit(),this.componentInstChanged)return this.updateInputs(!0),void this.bindOutputs();if(this.outputsChanged(this.outputs)&&this.bindOutputs(),!this.inputs)return;const e=this._getInputsChanges();if(e){const r=!!this.lastInputChanges;this._updateInputChanges(e),r&&this.updateInputs()}}updateIO(e,r){this.inputs=e,this.outputs=r}updateInputs(e=!1){e&&this._updateCompFactory();const r=this.componentInst;let o=this.inputs;!o||!r||(o=this._resolveInputs(o),Object.keys(o).forEach(a=>r[a]=o[a]),this.compCdr&&this.compCdr.markForCheck(),this.notifyOnInputChanges(this.lastInputChanges,e))}bindOutputs(){this._disconnectOutputs();const e=this.componentInst;let r=this.outputs;!r||!e||(r=this._resolveOutputs(r),Object.keys(r).filter(o=>e[o]).forEach(o=>e[o].pipe((0,v.takeUntil)(this.outputsShouldDisconnect$)).subscribe(a=>r[o](a))))}notifyOnInputChanges(e={},r){!this.componentInst.ngOnChanges||(r&&(e=this._collectFirstChanges()),this.componentInst.ngOnChanges(e))}_disconnectOutputs(){this.outputsShouldDisconnect$.next()}_getInputsChanges(){return this.inputsDiffer.diff(this.inputs)}_updateInputChanges(e){this.lastInputChanges=this._collectChangesFromDiffer(e)}_collectFirstChanges(){const e={},r=this.inputs;return Object.keys(r).forEach(o=>e[o]=Bt(r[o])),this._resolveChanges(e)}_collectChangesFromDiffer(e){const r={};return e.forEachAddedItem(o=>r[o.key]=Bt(o.currentValue)),e.forEachChangedItem(o=>r[o.key]=function(n,i){return new t.SimpleChange(i,n,!1)}(o.currentValue,o.previousValue)),this._resolveChanges(r)}_resolveCompFactory(){try{try{return this.cfr.resolveComponentFactory(this.compRef.componentType)}catch(e){return this.cfr.resolveComponentFactory(this.compRef.instance.constructor)}}catch(e){return null}}_updateCompFactory(){this.compFactory=this._resolveCompFactory()}_resolveInputs(e){return this.compFactory?this._remapIO(e,this.compFactory.inputs):e}_resolveOutputs(e){return e=this._processOutputs(e),this.compFactory?this._remapIO(e,this.compFactory.outputs):e}_processOutputs(e){const r={};return Object.keys(e).forEach(o=>{const a=e[o];r[o]="function"==typeof a?a:a&&this._processOutputArgs(a)}),r}_processOutputArgs(e){const{handler:r}=e,o="args"in e?e.args||[]:[this.eventArgument];return a=>r(...o.map(s=>s===this.eventArgument?a:s))}_resolveChanges(e){return this.compFactory?this._remapIO(e,this.compFactory.inputs):e}_remapIO(e,r){const o={};return Object.keys(e).forEach(a=>{const s=this._findPropByTplInMapping(a,r)||a;o[s]=e[a]}),o}_findPropByTplInMapping(e,r){for(const o of r)if(o.templateName===e)return o.propName;return null}failInit(){throw Error("IoService: ComponentInjector was not set! Please call init() method!")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(t.KeyValueDiffers),t.\u0275\u0275inject(t.ComponentFactoryResolver),t.\u0275\u0275inject(dt))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Lt=(()=>{class n{constructor(e,r){this.ioService=e,this.componentInjector=r,this.ioService.init(this.componentInjector)}get inputs(){return this.ndcDynamicInputs||this.ngComponentOutletNdcDynamicInputs}get outputs(){return this.ndcDynamicOutputs||this.ngComponentOutletNdcDynamicOutputs}ngOnChanges(e){this.ioService.update(this.inputs,this.outputs,this.inputsChanged(e),this.outputsChanged(e))}ngDoCheck(){this.ioService.maybeUpdate()}inputsChanged(e){return"ngComponentOutletNdcDynamicInputs"in e||"ndcDynamicInputs"in e}outputsChanged(e){return"ngComponentOutletNdcDynamicOutputs"in e||"ndcDynamicOutputs"in e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Yt),t.\u0275\u0275directiveInject(Ue,8))},n.\u0275dir=t.\u0275\u0275defineDirective({type:n,selectors:[["","ndcDynamicInputs",""],["","ndcDynamicOutputs",""],["","ngComponentOutletNdcDynamicInputs",""],["","ngComponentOutletNdcDynamicOutputs",""]],inputs:{ndcDynamicInputs:"ndcDynamicInputs",ngComponentOutletNdcDynamicInputs:"ngComponentOutletNdcDynamicInputs",ndcDynamicOutputs:"ndcDynamicOutputs",ngComponentOutletNdcDynamicOutputs:"ngComponentOutletNdcDynamicOutputs"},features:[t.\u0275\u0275ProvidersFeature([Yt]),t.\u0275\u0275NgOnChangesFeature]}),n})(),rn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule],Ye]}),n})(),Gt=(()=>{class n{constructor(e,r){this.vcr=e,this.cfr=r,this.ndcDynamicCreated=new t.EventEmitter}ngOnChanges(e){e.ndcDynamicComponent&&this.createDynamicComponent()}createDynamicComponent(){this.vcr.clear(),this.componentRef=null,this.ndcDynamicComponent&&(this.componentRef=this.vcr.createComponent(this.cfr.resolveComponentFactory(this.ndcDynamicComponent),0,this._resolveInjector(),this.ndcDynamicContent),this.ndcDynamicCreated.emit(this.componentRef))}_resolveInjector(){let e=this.ndcDynamicInjector||this.vcr.injector;return this.ndcDynamicProviders&&(e=t.Injector.create({providers:this.ndcDynamicProviders,parent:e})),e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(t.ComponentFactoryResolver))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ndc-dynamic"]],inputs:{ndcDynamicComponent:"ndcDynamicComponent",ndcDynamicInjector:"ndcDynamicInjector",ndcDynamicProviders:"ndcDynamicProviders",ndcDynamicContent:"ndcDynamicContent"},outputs:{ndcDynamicCreated:"ndcDynamicCreated"},features:[t.\u0275\u0275ProvidersFeature([{provide:Ue,useExisting:n}]),t.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),Jt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,rn],rn]}),n})();new t.InjectionToken("WindowRef",{providedIn:"root",factory:function(){return window}});var pt=I(7544),$t=I(6794);function Hn(n,i){for(let e in i)i.hasOwnProperty(e)&&(n[e]=i[e]);return n}function kn(n,i){const e=i?"":"none";Hn(n.style,{touchAction:i?"":"none",webkitUserDrag:i?"":"none",webkitTapHighlightColor:i?"":"transparent",userSelect:e,msUserSelect:e,webkitUserSelect:e,MozUserSelect:e})}function Zn(n,i){const e=n.style;e.position=i?"":"fixed",e.top=e.opacity=i?"":"0",e.left=i?"":"-999em"}function ui(n){const i=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*i}function Mi(n,i){return n.getPropertyValue(i).split(",").map(r=>r.trim())}function Ci(n){const i=n.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}function Yr(n,i,e){const{top:r,bottom:o,left:a,right:s}=n;return e>=r&&e<=o&&i>=a&&i<=s}function Ur(n,i,e){n.top+=i,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function Si(n,i,e,r){const{top:o,right:a,bottom:s,left:l,width:c,height:f}=n,u=c*i,d=f*i;return r>o-d&&r<s+d&&e>l-u&&e<a+u}class Vr{constructor(i,e){this._document=i,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),i.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Ci(e)})})}handleScroll(i){const e=i.target,r=this.positions.get(e);if(!r)return null;const o=e===this._document?e.documentElement:e,a=r.scrollPosition;let s,l;if(e===this._document){const u=this._viewportRuler.getViewportScrollPosition();s=u.top,l=u.left}else s=e.scrollTop,l=e.scrollLeft;const c=a.top-s,f=a.left-l;return this.positions.forEach((u,d)=>{u.clientRect&&e!==d&&o.contains(d)&&Ur(u.clientRect,c,f)}),a.top=s,a.left=l,{top:c,left:f}}}function xi(n){const i=n.cloneNode(!0),e=i.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();i.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return"canvas"===r?wi(n,i):("input"===r||"select"===r||"textarea"===r)&&hr(n,i),$r("canvas",n,i,wi),$r("input, textarea, select",n,i,hr),i}function $r(n,i,e,r){const o=i.querySelectorAll(n);if(o.length){const a=e.querySelectorAll(n);for(let s=0;s<o.length;s++)r(o[s],a[s])}}let Ji=0;function hr(n,i){"file"!==i.type&&(i.value=n.value),"radio"===i.type&&i.name&&(i.name=`mat-clone-${i.name}-${Ji++}`)}function wi(n,i){const e=i.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch(r){}}const Ei=(0,le.i$)({passive:!0}),Di=(0,le.i$)({passive:!1});class wo{constructor(i,e,r,o,a,s){this._config=e,this._document=r,this._ngZone=o,this._viewportRuler=a,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new w.Subject,this._pointerMoveSubscription=w.Subscription.EMPTY,this._pointerUpSubscription=w.Subscription.EMPTY,this._scrollSubscription=w.Subscription.EMPTY,this._resizeSubscription=w.Subscription.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new w.Subject,this.started=new w.Subject,this.released=new w.Subject,this.ended=new w.Subject,this.entered=new w.Subject,this.exited=new w.Subject,this.dropped=new w.Subject,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const c=this._handles.find(f=>{const u=l.target;return!!u&&(u===f||f.contains(u))});c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const c=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const h=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),m=this._dropContainer;if(!h)return void this._endDragSequence(l);(!m||!m.isDragging()&&!m.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),l.preventDefault();const f=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(f),this._dropContainer)this._updateActiveDropContainer(f,c);else{const u=this._activeTransform;u.x=f.x-this._pickupPositionOnPage.x+this._passiveTransform.x,u.y=f.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(u.x,u.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${u.x} ${u.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:f,event:l,distance:this._getDragDistance(f),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this.withRootElement(i).withParent(e.parentDragRef||null),this._parentPositions=new Vr(r,a),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(i){const e=(0,de.Ig)(i);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(r=>kn(r,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(r=>(0,de.fI)(r)),this._handles.forEach(r=>kn(r,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&e.add(r)}),this._disabledHandles=e,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){const e=(0,de.fI)(i);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,Di),e.addEventListener("touchstart",this._pointerDown,Ei)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?(0,de.fI)(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&ei(this._rootElement),ei(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),kn(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),kn(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){const i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}_sortFromLastPointerPosition(){const i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&ei(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&ei(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){!this._dragDropRegistry.isDragging(this)||(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(i))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(i){Gr(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const r=this._rootElement,o=r.parentNode,a=this._preview=this._createPreviewElement(),s=this._placeholder=this._createPlaceholderElement(),l=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();o.insertBefore(l,r),Zn(r,!1),this._document.body.appendChild(o.replaceChild(s,r)),function(n,i){return i||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}(this._document,c).appendChild(a),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(i,e){this._parentDragRef&&e.stopPropagation();const r=this.isDragging(),o=Gr(e),a=!o&&0!==e.button,s=this._rootElement,l=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),r||a||l)return;this._handles.length&&(this._rootElementTapHighlight=s.style.webkitTapHighlightColor||"",s.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(u=>{this._updateOnScroll(u)}),this._boundaryElement&&(this._boundaryRect=Ci(this._boundaryElement));const c=this._previewTemplate;this._pickupPositionInElement=c&&c.template&&!c.matchSize?{x:0,y:0}:this._getPointerPositionInElement(i,e);const f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(i){Zn(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const e=this._dropContainer,r=e.getItemIndex(this),o=this._getPointerPositionOnPage(i),a=this._getDragDistance(this._getPointerPositionOnPage(i)),s=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:a}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:a}),e.drop(this,r,this._initialIndex,this._initialContainer,s,a),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:e},{x:r,y:o}){let a=this._initialContainer._getSiblingContainerFromPosition(this,i,e);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,e)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=a,this._dropContainer.enter(this,i,e,a===this._initialContainer&&a.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:a,currentIndex:a.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(r,o),this._dropContainer._sortItem(this,i,e,this._pointerDirectionDelta),this._preview.style.transform=zr(i-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y)}_createPreviewElement(){const i=this._previewTemplate,e=this.previewClass,r=i?i.template:null;let o;if(r&&i){const a=i.matchSize?this._rootElement.getBoundingClientRect():null,s=i.viewContainer.createEmbeddedView(r,i.context);s.detectChanges(),o=Fi(s,this._document),this._previewRef=s,i.matchSize?Qi(o,a):o.style.transform=zr(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const a=this._rootElement;o=xi(a),Qi(o,a.getBoundingClientRect())}return Hn(o.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:`${this._config.zIndex||1e3}`}),kn(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(a=>o.classList.add(a)):o.classList.add(e)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const i=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=zr(i.left,i.top);const e=function(n){const i=getComputedStyle(n),e=Mi(i,"transition-property"),r=e.find(l=>"transform"===l||"all"===l);if(!r)return 0;const o=e.indexOf(r),a=Mi(i,"transition-duration"),s=Mi(i,"transition-delay");return ui(a[o])+ui(s[o])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const o=s=>{(!s||s.target===this._preview&&"transform"===s.propertyName)&&(this._preview.removeEventListener("transitionend",o),r(),clearTimeout(a))},a=setTimeout(o,1.5*e);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const i=this._placeholderTemplate,e=i?i.template:null;let r;return e?(this._placeholderRef=i.viewContainer.createEmbeddedView(e,i.context),this._placeholderRef.detectChanges(),r=Fi(this._placeholderRef,this._document)):r=xi(this._rootElement),r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(i,e){const r=this._rootElement.getBoundingClientRect(),o=i===this._rootElement?null:i,a=o?o.getBoundingClientRect():r,s=Gr(e)?e.targetTouches[0]:e,l=this._getViewportScrollPosition();return{x:a.left-r.left+(s.pageX-a.left-l.left),y:a.top-r.top+(s.pageY-a.top-l.top)}}_getPointerPositionOnPage(i){const e=this._getViewportScrollPosition(),r=Gr(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,o=r.pageX-e.left,a=r.pageY-e.top;if(this._ownerSVGElement){const s=this._ownerSVGElement.getScreenCTM();if(s){const l=this._ownerSVGElement.createSVGPoint();return l.x=o,l.y=a,l.matrixTransform(s.inverse())}}return{x:o,y:a}}_getConstrainedPointerPosition(i){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:o}=this.constrainPosition?this.constrainPosition(i,this):i;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:a,y:s}=this._pickupPositionInElement,l=this._boundaryRect,c=this._previewRect,f=l.top+s,u=l.bottom-(c.height-s);r=Ii(r,l.left+a,l.right-(c.width-a)),o=Ii(o,f,u)}return{x:r,y:o}}_updatePointerDirectionDelta(i){const{x:e,y:r}=i,o=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-a.x),l=Math.abs(r-a.y);return s>this._config.pointerDirectionChangeThreshold&&(o.x=e>a.x?1:-1,a.x=e),l>this._config.pointerDirectionChangeThreshold&&(o.y=r>a.y?1:-1,a.y=r),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,kn(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,Di),i.removeEventListener("touchstart",this._pointerDown,Ei)}_applyRootElementTransform(i,e){const r=zr(i,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?r+" "+this._initialTransform:r}_getDragDistance(i){const e=this._pickupPositionOnPage;return e?{x:i.x-e.x,y:i.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:e}=this._passiveTransform;if(0===i&&0===e||this.isDragging()||!this._boundaryElement)return;const r=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===o.width&&0===o.height)return;const a=r.left-o.left,s=o.right-r.right,l=r.top-o.top,c=o.bottom-r.bottom;r.width>o.width?(a>0&&(i+=a),s>0&&(i-=s)):i=0,r.height>o.height?(l>0&&(e+=l),c>0&&(e-=c)):e=0,(i!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:i})}_getDragStartDelay(i){const e=this.dragStartDelay;return"number"==typeof e?e:Gr(i)?e.touch:e?e.mouse:0}_updateOnScroll(i){const e=this._parentPositions.handleScroll(i);if(e){const r=i.target;this._boundaryRect&&(r===this._document||r!==this._boundaryElement&&r.contains(this._boundaryElement))&&Ur(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const i=this._parentPositions.positions.get(this._document);return i?i.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,le.kV)(this._rootElement)),this._cachedShadowRoot}}function zr(n,i){return`translate3d(${Math.round(n)}px, ${Math.round(i)}px, 0)`}function Ii(n,i,e){return Math.max(i,Math.min(e,n))}function ei(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Gr(n){return"t"===n.type[0]}function Fi(n,i){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===i.ELEMENT_NODE)return e[0];const r=i.createElement("div");return e.forEach(o=>r.appendChild(o)),r}function Qi(n,i){n.style.width=`${i.width}px`,n.style.height=`${i.height}px`,n.style.transform=zr(i.left,i.top)}function Xi(n,i,e){const r=Cr(i,n.length-1),o=Cr(e,n.length-1);if(r===o)return;const a=n[r],s=o<r?-1:1;for(let l=r;l!==o;l+=s)n[l]=n[l+s];n[o]=a}function Cr(n,i){return Math.max(0,Math.min(i,n))}class M{constructor(i,e,r,o,a){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new w.Subject,this.entered=new w.Subject,this.exited=new w.Subject,this.dropped=new w.Subject,this.sorted=new w.Subject,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=w.Subscription.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new w.Subject,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,w.interval)(0,w.animationFrameScheduler).pipe((0,v.takeUntil)(this._stopScrollTimers)).subscribe(()=>{const s=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?L(s,-l):2===this._verticalScrollDirection&&L(s,l),1===this._horizontalScrollDirection?j(s,-l):2===this._horizontalScrollDirection&&j(s,l)})},this.element=(0,de.fI)(i),this._document=r,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Vr(r,a)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,e,r,o){let a;this._draggingStarted(),null==o?(a=this.sortingDisabled?this._draggables.indexOf(i):-1,-1===a&&(a=this._getItemIndexFromPointerPosition(i,e,r))):a=o;const s=this._activeDraggables,l=s.indexOf(i),c=i.getPlaceholderElement();let f=s[a];if(f===i&&(f=s[a+1]),l>-1&&s.splice(l,1),f&&!this._dragDropRegistry.isDragging(f)){const u=f.getRootElement();u.parentElement.insertBefore(c,u),s.splice(a,0,i)}else if(this._shouldEnterAsFirstChild(e,r)){const u=s[0].getRootElement();u.parentNode.insertBefore(c,u),s.unshift(i)}else(0,de.fI)(this.element).appendChild(c),s.push(i);c.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,e,r,o,a,s){this._reset(),this.dropped.next({item:i,currentIndex:e,previousIndex:r,container:this,previousContainer:o,isPointerOverContainer:a,distance:s})}withItems(i){const e=this._draggables;return this._draggables=i,i.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>-1===i.indexOf(o))?this._reset():this._cacheItems()),this}withDirection(i){return this._direction=i,this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){return this._orientation=i,this}withScrollableParents(i){const e=(0,de.fI)(this.element);return this._scrollableElements=-1===i.indexOf(e)?[e,...i]:i.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?N("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,r=>r.drag===i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,e,r,o){if(this.sortingDisabled||!this._clientRect||!Si(this._clientRect,.05,e,r))return;const a=this._itemPositions,s=this._getItemIndexFromPointerPosition(i,e,r,o);if(-1===s&&a.length>0)return;const l="horizontal"===this._orientation,c=N(a,x=>x.drag===i),f=a[s],d=f.clientRect,p=c>s?1:-1,h=this._getItemOffsetPx(a[c].clientRect,d,p),m=this._getSiblingOffsetPx(c,a,p),g=a.slice();Xi(a,c,s),this.sorted.next({previousIndex:c,currentIndex:s,container:this,item:i}),a.forEach((x,C)=>{if(g[C]===x)return;const A=x.drag===i,S=A?h:m,E=A?i.getPlaceholderElement():x.drag.getRootElement();x.offset+=S,l?(E.style.transform=`translate3d(${Math.round(x.offset)}px, 0, 0)`,Ur(x.clientRect,0,S)):(E.style.transform=`translate3d(0, ${Math.round(x.offset)}px, 0)`,Ur(x.clientRect,S,0))}),this._previousSwap.overlaps=Yr(d,e,r),this._previousSwap.drag=f.drag,this._previousSwap.delta=l?o.x:o.y}_startScrollingIfNecessary(i,e){if(this.autoScrollDisabled)return;let r,o=0,a=0;if(this._parentPositions.positions.forEach((s,l)=>{l===this._document||!s.clientRect||r||Si(s.clientRect,.05,i,e)&&([o,a]=function(n,i,e,r){const o=V(i,r),a=$(i,e);let s=0,l=0;if(o){const c=n.scrollTop;1===o?c>0&&(s=1):n.scrollHeight-c>n.clientHeight&&(s=2)}if(a){const c=n.scrollLeft;1===a?c>0&&(l=1):n.scrollWidth-c>n.clientWidth&&(l=2)}return[s,l]}(l,s.clientRect,i,e),(o||a)&&(r=l))}),!o&&!a){const{width:s,height:l}=this._viewportRuler.getViewportSize(),c={width:s,height:l,top:0,right:s,bottom:l,left:0};o=V(c,e),a=$(c,i),r=window}r&&(o!==this._verticalScrollDirection||a!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=a,this._scrollNode=r,(o||a)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const i=(0,de.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const i=(0,de.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(i).clientRect}_cacheItemPositions(){const i="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const r=e.getVisibleElement();return{drag:e,offset:0,clientRect:Ci(r)}}).sort((e,r)=>i?e.clientRect.left-r.clientRect.left:e.clientRect.top-r.clientRect.top)}_reset(){this._isDragging=!1;const i=(0,de.fI)(this.element).style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{const r=e.getRootElement();r&&(r.style.transform="")}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(i,e,r){const o="horizontal"===this._orientation,a=e[i].clientRect,s=e[i+-1*r];let l=a[o?"width":"height"]*r;if(s){const c=o?"left":"top",f=o?"right":"bottom";-1===r?l-=s.clientRect[c]-a[f]:l+=a[c]-s.clientRect[f]}return l}_getItemOffsetPx(i,e,r){const o="horizontal"===this._orientation;let a=o?e.left-i.left:e.top-i.top;return-1===r&&(a+=o?e.width-i.width:e.height-i.height),a}_shouldEnterAsFirstChild(i,e){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,o="horizontal"===this._orientation;if(r[0].drag!==this._activeDraggables[0]){const s=r[r.length-1].clientRect;return o?i>=s.right:e>=s.bottom}{const s=r[0].clientRect;return o?i<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(i,e,r,o){const a="horizontal"===this._orientation,s=N(this._itemPositions,({drag:l,clientRect:c},f,u)=>{if(l===i)return u.length<2;if(o){const d=a?o.x:o.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return a?e>=Math.floor(c.left)&&e<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return-1!==s&&this.sortPredicate(s,i,this)?s:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(i,e){return null!=this._clientRect&&Yr(this._clientRect,i,e)}_getSiblingContainerFromPosition(i,e,r){return this._siblings.find(o=>o._canReceive(i,e,r))}_canReceive(i,e,r){if(!this._clientRect||!Yr(this._clientRect,e,r)||!this.enterPredicate(i,this))return!1;const o=this._getShadowRoot().elementFromPoint(e,r);if(!o)return!1;const a=(0,de.fI)(this.element);return o===a||a.contains(o)}_startReceiving(i,e){const r=this._activeSiblings;!r.has(i)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(r.add(i),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(i=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(i);e&&(this._itemPositions.forEach(({clientRect:r})=>{Ur(r,e.top,e.left)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const i=(0,le.kV)((0,de.fI)(this.element));this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const i=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,i))}}function N(n,i){for(let e=0;e<n.length;e++)if(i(n[e],e,n))return e;return-1}function L(n,i){n===window?n.scrollBy(0,i):n.scrollTop+=i}function j(n,i){n===window?n.scrollBy(i,0):n.scrollLeft+=i}function V(n,i){const{top:e,bottom:r,height:o}=n,a=.05*o;return i>=e-a&&i<=e+a?1:i>=r-a&&i<=r+a?2:0}function $(n,i){const{left:e,right:r,width:o}=n,a=.05*o;return i>=e-a&&i<=e+a?1:i>=r-a&&i<=r+a?2:0}const pe=(0,le.i$)({passive:!1,capture:!0});let Se=(()=>{class n{constructor(e,r){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new w.Subject,this.pointerUp=new w.Subject,this.scroll=new w.Subject,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=r}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,pe)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,pe)}startDragging(e,r){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const o=r.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:a=>this.pointerUp.next(a),options:!0}).set("scroll",{handler:a=>this.scroll.next(a),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:pe}),o||this._globalListeners.set("mousemove",{handler:a=>this.pointerMove.next(a),options:pe}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((a,s)=>{this._document.addEventListener(s,a.handler,a.options)})})}}stopDragging(e){const r=this._activeDragInstances.indexOf(e);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,r)=>{this._document.removeEventListener(r,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(t.NgZone),t.\u0275\u0275inject(_.DOCUMENT))},n.\u0275prov=(0,t.\u0275\u0275defineInjectable)({factory:function(){return new n((0,t.\u0275\u0275inject)(t.NgZone),(0,t.\u0275\u0275inject)(_.DOCUMENT))},token:n,providedIn:"root"}),n})();const ye={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Ne=(()=>{class n{constructor(e,r,o,a){this._document=e,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=a}createDrag(e,r=ye){return new wo(e,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new M(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(_.DOCUMENT),t.\u0275\u0275inject(t.NgZone),t.\u0275\u0275inject(pt.rL),t.\u0275\u0275inject(Se))},n.\u0275prov=(0,t.\u0275\u0275defineInjectable)({factory:function(){return new n((0,t.\u0275\u0275inject)(_.DOCUMENT),(0,t.\u0275\u0275inject)(t.NgZone),(0,t.\u0275\u0275inject)(pt.rL),(0,t.\u0275\u0275inject)(Se))},token:n,providedIn:"root"}),n})();const Be=new t.InjectionToken("CDK_DRAG_PARENT"),J=new t.InjectionToken("CdkDropListGroup"),Z=new t.InjectionToken("CDK_DRAG_CONFIG");let Ve=0;const mt=new t.InjectionToken("CdkDropList");let Ut=(()=>{class n{constructor(e,r,o,a,s,l,c){this.element=e,this._changeDetectorRef=o,this._scrollDispatcher=a,this._dir=s,this._group=l,this._destroyed=new w.Subject,this.connectedTo=[],this.id="cdk-drop-list-"+Ve++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new t.EventEmitter,this.entered=new t.EventEmitter,this.exited=new t.EventEmitter,this.sorted=new t.EventEmitter,this._unsortedItems=new Set,this._dropListRef=r.createDropList(e),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(f,u)=>this.enterPredicate(f.data,u.data),this._dropListRef.sortPredicate=(f,u,d)=>this.sortPredicate(f,u.data,d.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),l&&l._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=(0,de.Ig)(e)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,r)=>e._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=n._dropLists.indexOf(this);e>-1&&n._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,v.startWith)(this._dir.value),(0,v.takeUntil)(this._destroyed)).subscribe(r=>e.withDirection(r)),e.beforeStarted.subscribe(()=>{const r=(0,de.Eq)(this.connectedTo).map(o=>"string"==typeof o?n._dropLists.find(s=>s.id===o):o);if(this._group&&this._group._items.forEach(o=>{-1===r.indexOf(o)&&r.push(o)}),!this._scrollableParentsResolved){const o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(a=>a.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=(0,de.Ig)(this.sortingDisabled),e.autoScrollDisabled=(0,de.Ig)(this.autoScrollDisabled),e.autoScrollStep=(0,de.su)(this.autoScrollStep,2),e.connectedTo(r.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),e.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),e.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:r,draggingDisabled:o,sortingDisabled:a,listAutoScrollDisabled:s,listOrientation:l}=e;this.disabled=null!=o&&o,this.sortingDisabled=null!=a&&a,this.autoScrollDisabled=null!=s&&s,this.orientation=l||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(Ne),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(pt.mF),t.\u0275\u0275directiveInject($t.Is,8),t.\u0275\u0275directiveInject(J,12),t.\u0275\u0275directiveInject(Z,8))},n.\u0275dir=t.\u0275\u0275defineDirective({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,r){2&e&&(t.\u0275\u0275attribute("id",r.id),t.\u0275\u0275classProp("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[t.\u0275\u0275ProvidersFeature([{provide:J,useValue:void 0},{provide:mt,useExisting:n}])]}),n._dropLists=[],n})();const mn=new t.InjectionToken("CdkDragHandle"),Rr=new t.InjectionToken("CdkDragPlaceholder"),eo=new t.InjectionToken("CdkDragPreview");let Sr=(()=>{class n{constructor(e,r,o,a,s,l,c,f,u,d,p){this.element=e,this.dropContainer=r,this._ngZone=a,this._viewContainerRef=s,this._dir=c,this._changeDetectorRef=u,this._selfHandle=d,this._parentDrag=p,this._destroyed=new w.Subject,this.started=new t.EventEmitter,this.released=new t.EventEmitter,this.ended=new t.EventEmitter,this.entered=new t.EventEmitter,this.exited=new t.EventEmitter,this.dropped=new t.EventEmitter,this.moved=new w.Observable(h=>{const m=this._dragRef.moved.pipe((0,v.map)(g=>({source:this,pointerPosition:g.pointerPosition,event:g.event,delta:g.delta,distance:g.distance}))).subscribe(h);return()=>{m.unsubscribe()}}),this._dragRef=f.createDrag(e,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:null==l?void 0:l.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),l&&this._assignDefaults(l),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=(0,de.Ig)(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.pipe((0,v.take)(1),(0,v.takeUntil)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe((0,v.startWith)(this._handles),(0,v.tap)(e=>{const r=e.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),(0,v.switchMap)(e=>(0,w.merge)(...e.map(r=>r._stateChanges.pipe((0,v.startWith)(r))))),(0,v.takeUntil)(this._destroyed)).subscribe(e=>{const r=this._dragRef,o=e.element.nativeElement;e.disabled?r.disableHandle(o):r.enableHandle(o)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const r=e.rootElementSelector,o=e.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=n._dragInstances.indexOf(this);e>-1&&n._dragInstances.splice(e,1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,r=this.rootElementSelector?to(e,this.rootElementSelector):e;this._dragRef.withRootElement(r||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?to(this.element.nativeElement,e):(0,de.fI)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const r=this._dir,o=this.dragStartDelay,a=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof o&&o?o:(0,de.su)(o),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(s),r&&e.withDirection(r.value)}}),e.beforeStarted.pipe((0,v.take)(1)).subscribe(()=>{var r,o;if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let a=this.element.nativeElement.parentElement;for(;a;){if(null===(r=a.classList)||void 0===r?void 0:r.contains("cdk-drag")){e.withParent((null===(o=n._dragInstances.find(s=>s.element.nativeElement===a))||void 0===o?void 0:o._dragRef)||null);break}a=a.parentElement}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),e.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),e.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance})})}_assignDefaults(e){const{lockAxis:r,dragStartDelay:o,constrainPosition:a,previewClass:s,boundaryElement:l,draggingDisabled:c,rootElementSelector:f}=e;this.disabled=null!=c&&c,this.dragStartDelay=o||0,r&&(this.lockAxis=r),a&&(this.constrainPosition=a),s&&(this.previewClass=s),l&&(this.boundaryElement=l),f&&(this.rootElementSelector=f)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(mt,12),t.\u0275\u0275directiveInject(_.DOCUMENT),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(Z,8),t.\u0275\u0275directiveInject($t.Is,8),t.\u0275\u0275directiveInject(Ne),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(mn,10),t.\u0275\u0275directiveInject(Be,12))},n.\u0275dir=t.\u0275\u0275defineDirective({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(e,r,o){if(1&e&&(t.\u0275\u0275contentQuery(o,eo,5),t.\u0275\u0275contentQuery(o,Rr,5),t.\u0275\u0275contentQuery(o,mn,5)),2&e){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r._previewTemplate=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r._placeholderTemplate=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,r){2&e&&t.\u0275\u0275classProp("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[t.\u0275\u0275ProvidersFeature([{provide:Be,useExisting:n}]),t.\u0275\u0275NgOnChangesFeature]}),n._dragInstances=[],n})();function to(n,i){let e=n.parentElement;for(;e;){if(e.matches?e.matches(i):e.msMatchesSelector(i))return e;e=e.parentElement}return null}let no=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({providers:[Ne],imports:[pt.ZD]}),n})();var ti=I(3593),On=I(271);function an(){return(an=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}var pf={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},Xe=function(i){if(i)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(pf)};function bn(n){return"number"==typeof n}function sn(n){return!(!n||"object"!=typeof n||"function"!=typeof n.constructor)&&(!0===n.isBigNumber&&"object"==typeof n.constructor.prototype&&!0===n.constructor.prototype.isBigNumber||"function"==typeof n.constructor.isDecimal&&!0===n.constructor.isDecimal(n))}function Ni(n){return n&&"object"==typeof n&&!0===Object.getPrototypeOf(n).isComplex||!1}function ua(n){return n&&"object"==typeof n&&!0===Object.getPrototypeOf(n).isFraction||!1}function rs(n){return n&&!0===n.constructor.prototype.isUnit||!1}function xr(n){return"string"==typeof n}an(Xe,pf,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var Mn=Array.isArray;function Ht(n){return n&&!0===n.constructor.prototype.isMatrix||!1}function is(n){return Array.isArray(n)||Ht(n)}function os(n){return n&&n.isDenseMatrix&&!0===n.constructor.prototype.isMatrix||!1}function ro(n){return n&&n.isSparseMatrix&&!0===n.constructor.prototype.isMatrix||!1}function Ll(n){return n&&!0===n.constructor.prototype.isRange||!1}function da(n){return n&&!0===n.constructor.prototype.isIndex||!1}function FM(n){return"boolean"==typeof n}function hf(n){return n&&!0===n.constructor.prototype.isResultSet||!1}function gf(n){return n&&!0===n.constructor.prototype.isHelp||!1}function AM(n){return"function"==typeof n}function NM(n){return n instanceof Date}function TM(n){return n instanceof RegExp}function LM(n){return!(!n||"object"!=typeof n||n.constructor!==Object||Ni(n)||ua(n))}function RM(n){return null===n}function OM(n){return void 0===n}function jM(n){return n&&!0===n.isAccessorNode&&!0===n.constructor.prototype.isNode||!1}function BM(n){return n&&!0===n.isArrayNode&&!0===n.constructor.prototype.isNode||!1}function PM(n){return n&&!0===n.isAssignmentNode&&!0===n.constructor.prototype.isNode||!1}function kM(n){return n&&!0===n.isBlockNode&&!0===n.constructor.prototype.isNode||!1}function UM(n){return n&&!0===n.isConditionalNode&&!0===n.constructor.prototype.isNode||!1}function VM(n){return n&&!0===n.isConstantNode&&!0===n.constructor.prototype.isNode||!1}function $M(n){return n&&!0===n.isFunctionAssignmentNode&&!0===n.constructor.prototype.isNode||!1}function zM(n){return n&&!0===n.isFunctionNode&&!0===n.constructor.prototype.isNode||!1}function GM(n){return n&&!0===n.isIndexNode&&!0===n.constructor.prototype.isNode||!1}function vf(n){return n&&!0===n.isNode&&!0===n.constructor.prototype.isNode||!1}function WM(n){return n&&!0===n.isObjectNode&&!0===n.constructor.prototype.isNode||!1}function KM(n){return n&&!0===n.isOperatorNode&&!0===n.constructor.prototype.isNode||!1}function HM(n){return n&&!0===n.isParenthesisNode&&!0===n.constructor.prototype.isNode||!1}function ZM(n){return n&&!0===n.isRangeNode&&!0===n.constructor.prototype.isNode||!1}function qM(n){return n&&!0===n.isSymbolNode&&!0===n.constructor.prototype.isNode||!1}function _f(n){return n&&!0===n.constructor.prototype.isChain||!1}function Un(n){var i=typeof n;return"object"===i?null===n?"null":Array.isArray(n)?"Array":n instanceof Date?"Date":n instanceof RegExp?"RegExp":sn(n)?"BigNumber":Ni(n)?"Complex":ua(n)?"Fraction":Ht(n)?"Matrix":rs(n)?"Unit":da(n)?"Index":Ll(n)?"Range":hf(n)?"ResultSet":vf(n)?n.type:_f(n)?"Chain":gf(n)?"Help":"Object":"function"===i?"Function":i}function Ot(n){var i=typeof n;if("number"===i||"string"===i||"boolean"===i||null==n)return n;if("function"==typeof n.clone)return n.clone();if(Array.isArray(n))return n.map(function(e){return Ot(e)});if(n instanceof Date)return new Date(n.valueOf());if(sn(n))return n;if(n instanceof RegExp)throw new TypeError("Cannot clone "+n);return function(n,i){var e={};for(var r in n)_n(n,r)&&(e[r]=i(n[r]));return e}(n,Ot)}function Rl(n,i){for(var e in i)_n(i,e)&&(n[e]=i[e]);return n}function fa(n,i){var e,r,o;if(Array.isArray(n)){if(!Array.isArray(i)||n.length!==i.length)return!1;for(r=0,o=n.length;r<o;r++)if(!fa(n[r],i[r]))return!1;return!0}if("function"==typeof n)return n===i;if(n instanceof Object){if(Array.isArray(i)||!(i instanceof Object))return!1;for(e in n)if(!(e in i)||!fa(n[e],i[e]))return!1;for(e in i)if(!(e in n)||!fa(n[e],i[e]))return!1;return!0}return n===i}function _n(n,i){return n&&Object.hasOwnProperty.call(n,i)}function ne(n,i,e,r){function o(a){var s=function(n,i){for(var e={},r=0;r<i.length;r++){var o=i[r],a=n[o];void 0!==a&&(e[o]=a)}return e}(a,i.map(r1));return function(n,i,e){if(!i.filter(a=>!function(n){return n&&"?"===n[0]}(a)).every(a=>void 0!==e[a])){var o=i.filter(a=>void 0===e[a]);throw new Error('Cannot create function "'.concat(n,'", ')+"some dependencies are missing: ".concat(o.map(a=>'"'.concat(a,'"')).join(", "),"."))}}(n,i,a),e(s)}return o.isFactory=!0,o.fn=n,o.dependencies=i.slice().sort(),r&&(o.meta=r),o}function r1(n){return n&&"?"===n[0]?n.slice(1):n}var gr=I(5635);function wt(n){return"boolean"==typeof n||!!isFinite(n)&&n===Math.round(n)}Math,Math,Math,Math,Math,Math;function jl(n,i,e){var o={2:"0b",8:"0o",16:"0x"}[i],a="";if(e){if(e<1)throw new Error("size must be in greater than 0");if(!wt(e))throw new Error("size must be an integer");if(n>Co(2,e-1)-1||n<-Co(2,e-1))throw new Error("Value must be in range [-2^".concat(e-1,", 2^").concat(e-1,"-1]"));if(!wt(n))throw new Error("Value must be an integer");n<0&&(n+=Co(2,e)),a="i".concat(e)}var s="";return n<0&&(n=-n,s="-"),"".concat(s).concat(o).concat(n.toString(i)).concat(a)}function io(n,i){if("function"==typeof i)return i(n);if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";if(isNaN(n))return"NaN";var r,o,e="auto";if(i&&(i.notation&&(e=i.notation),bn(i)?r=i:bn(i.precision)&&(r=i.precision),i.wordSize&&"number"!=typeof(o=i.wordSize)))throw new Error('Option "wordSize" must be a number');switch(e){case"fixed":return xf(n,r);case"exponential":return wf(n,r);case"engineering":return function(n,i){if(isNaN(n)||!isFinite(n))return String(n);var r=ss(as(n),i),o=r.exponent,a=r.coefficients,s=o%3==0?o:o<0?o-3-o%3:o-o%3;if(bn(i))for(;i>a.length||o-s+1>a.length;)a.push(0);else for(var l=Math.abs(o-s)-(a.length-1),c=0;c<l;c++)a.push(0);for(var f=Math.abs(o-s),u=1;f>0;)u++,f--;var d=a.slice(u).join(""),p=bn(i)&&d.length||d.match(/[1-9]/)?"."+d:"",h=a.slice(0,u).join("")+p+"e"+(o>=0?"+":"")+s.toString();return r.sign+h}(n,r);case"bin":return jl(n,2,o);case"oct":return jl(n,8,o);case"hex":return jl(n,16,o);case"auto":return function(n,i,e){if(isNaN(n)||!isFinite(n))return String(n);var r=e&&void 0!==e.lowerExp?e.lowerExp:-3,o=e&&void 0!==e.upperExp?e.upperExp:5,a=as(n),s=i?ss(a,i):a;if(s.exponent<r||s.exponent>=o)return wf(n,i);var l=s.coefficients,c=s.exponent;l.length<i&&(l=l.concat(Io(i-l.length))),l=l.concat(Io(c-l.length+1+(l.length<i?i-l.length:0)));var f=c>0?c:0;return f<(l=Io(-c).concat(l)).length-1&&l.splice(f+1,0,"."),s.sign+l.join("")}(n,r,i&&i).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return"."!==a?a+s:s});default:throw new Error('Unknown notation "'+e+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function as(n){var i=String(n).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!i)throw new SyntaxError("Invalid number "+n);var e=i[1],r=i[2],o=parseFloat(i[4]||"0"),a=r.indexOf(".");o+=-1!==a?a-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(l){return o-=l.length,""}).replace(/0*$/,"").split("").map(function(l){return parseInt(l)});return 0===s.length&&(s.push(0),o++),{sign:e,coefficients:s,exponent:o}}function xf(n,i){if(isNaN(n)||!isFinite(n))return String(n);var e=as(n),r="number"==typeof i?ss(e,e.exponent+1+i):e,o=r.coefficients,a=r.exponent+1,s=a+(i||0);return o.length<s&&(o=o.concat(Io(s-o.length))),a<0&&(o=Io(1-a).concat(o),a=1),a<o.length&&o.splice(a,0,0===a?"0.":"."),r.sign+o.join("")}function wf(n,i){if(isNaN(n)||!isFinite(n))return String(n);var e=as(n),r=i?ss(e,i):e,o=r.coefficients,a=r.exponent;o.length<i&&(o=o.concat(Io(i-o.length)));var s=o.shift();return r.sign+s+(o.length>0?"."+o.join(""):"")+"e"+(a>=0?"+":"")+a}function ss(n,i){for(var e={sign:n.sign,coefficients:n.coefficients,exponent:n.exponent},r=e.coefficients;i<=0;)r.unshift(0),e.exponent++,i++;if(r.length>i&&r.splice(i,r.length-i)[0]>=5){var a=i-1;for(r[a]++;10===r[a];)r.pop(),0===a&&(r.unshift(0),e.exponent++,a++),r[--a]++}return e}function Io(n){for(var i=[],e=0;e<n;e++)i.push(0);return i}var m1=Number.EPSILON||2220446049250313e-31;function wr(n,i,e){if(null==e)return n===i;if(n===i)return!0;if(isNaN(n)||isNaN(i))return!1;if(isFinite(n)&&isFinite(i)){var r=Math.abs(n-i);return r<m1||r<=Math.max(Math.abs(n),Math.abs(i))*e}return!1}Math,Math,Math,Math,Math;var M1=(Math,ne("Complex",[],()=>(gr.prototype.type="Complex",gr.prototype.isComplex=!0,gr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},gr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},gr.prototype.format=function(n){var e=this.im,r=this.re,o=io(this.re,n),a=io(this.im,n),s=bn(n)?n:n?n.precision:null;if(null!==s){var l=Math.pow(10,-s);Math.abs(r/e)<l&&(r=0),Math.abs(e/r)<l&&(e=0)}return 0===e?o:0===r?1===e?"i":-1===e?"-i":a+"i":e<0?-1===e?o+" - i":o+" - "+a.substring(1)+"i":1===e?o+" + i":o+" + "+a+"i"},gr.fromPolar=function(n){switch(arguments.length){case 1:var i=arguments[0];if("object"==typeof i)return gr(i);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var e=arguments[0],r=arguments[1];if(bn(e)){if(rs(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),bn(r))return new gr({r:e,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},gr.prototype.valueOf=gr.prototype.toString,gr.fromJSON=function(n){return new gr(n)},gr.compare=function(n,i){return n.re>i.re?1:n.re<i.re?-1:n.im>i.im?1:n.im<i.im?-1:0},gr),{isClass:!0}));function E1(n){var i=0,e=1,r=Object.create(null),o=Object.create(null),a=0,s=function(c){var f=o[c];if(f&&(delete r[f],delete o[c],--i,e===f)){if(!i)return a=0,void(e=1);for(;!hasOwnProperty.call(r,++e););}};return n=Math.abs(n),{hit:function(c){var f=o[c],u=++a;if(r[u]=c,o[c]=u,!f)return++i<=n?void 0:(s(c=r[e]),c);if(delete r[f],e===f)for(;!hasOwnProperty.call(r,++e););},delete:s,clear:function(){i=a=0,e=1,r=Object.create(null),o=Object.create(null)}}}function pa(n){var{hasher:i,limit:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=null==e?Number.POSITIVE_INFINITY:e,i=null==i?JSON.stringify:i,function r(){"object"!=typeof r.cache&&(r.cache={values:new Map,lru:E1(e||Number.POSITIVE_INFINITY)});for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=i(o);if(r.cache.values.has(s))return r.cache.lru.hit(s),r.cache.values.get(s);var l=n.apply(n,o);return r.cache.values.set(s,l),r.cache.values.delete(r.cache.lru.hit(s)),l}}pa(function(n){return new n(1).exp()},{hasher:ls}),pa(function(n){return new n(1).plus(new n(5).sqrt()).div(2)},{hasher:ls});var Pl=pa(function(n){return n.acos(-1)},{hasher:ls});function ls(n){return n[0].precision}pa(function(n){return Pl(n).times(2)},{hasher:ls}),Math,Math,Math;var cs=I(1071),Y1=ne("BigNumber",["?on","config"],n=>{var{on:i,config:e}=n,r=cs.clone({precision:e.precision,modulo:cs.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(o){return new r(o.value)},i&&i("config",function(o,a){o.precision!==a.precision&&r.config({precision:o.precision})}),r},{isClass:!0}),nC=ne("Matrix",[],()=>{function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.type="Matrix",n.prototype.isMatrix=!0,n.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},n.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},n.prototype.create=function(i,e){throw new Error("Cannot invoke create on a Matrix interface")},n.prototype.subset=function(i,e,r){throw new Error("Cannot invoke subset on a Matrix interface")},n.prototype.get=function(i){throw new Error("Cannot invoke get on a Matrix interface")},n.prototype.set=function(i,e,r){throw new Error("Cannot invoke set on a Matrix interface")},n.prototype.resize=function(i,e){throw new Error("Cannot invoke resize on a Matrix interface")},n.prototype.reshape=function(i,e){throw new Error("Cannot invoke reshape on a Matrix interface")},n.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},n.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},n.prototype.map=function(i,e){throw new Error("Cannot invoke map on a Matrix interface")},n.prototype.forEach=function(i){throw new Error("Cannot invoke forEach on a Matrix interface")},n.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},n.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},n.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},n.prototype.format=function(i){throw new Error("Cannot invoke format on a Matrix interface")},n.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},n},{isClass:!0});function us(n,i){return ne(n,["config","BigNumber"],r=>{var{config:o,BigNumber:a}=r;return"BigNumber"===o.number?new a(i):i})}us("fineStructure",.0072973525693),us("weakMixingAngle",.2229),us("efimovFactor",22.7),us("sackurTetrode",-1.16487052358);var Fo=I(9597),iS=ne("Fraction",[],()=>(Fo.prototype.type="Fraction",Fo.prototype.isFraction=!0,Fo.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Fo.fromJSON=function(n){return new Fo(n)},Fo),{isClass:!0});function kl(n,i,e){var o=new(0,n.constructor)(2),a="";if(e){if(e<1)throw new Error("size must be in greater than 0");if(!wt(e))throw new Error("size must be an integer");if(n.greaterThan(o.pow(e-1).sub(1))||n.lessThan(o.pow(e-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(e-1,", 2^").concat(e-1,"-1]"));if(!n.isInteger())throw new Error("Value must be an integer");n.lessThan(0)&&(n=n.add(o.pow(e))),a="i".concat(e)}switch(i){case 2:return"".concat(n.toBinary()).concat(a);case 8:return"".concat(n.toOctal()).concat(a);case 16:return"".concat(n.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(i," not supported "))}}function If(n,i){return void 0!==i?n.toExponential(i-1):n.toExponential()}function en(n,i){return"number"==typeof n?io(n,i):sn(n)?function(n,i){if("function"==typeof i)return i(n);if(!n.isFinite())return n.isNaN()?"NaN":n.gt(0)?"Infinity":"-Infinity";var r,o,e="auto";if(void 0!==i&&(i.notation&&(e=i.notation),"number"==typeof i?r=i:i.precision&&(r=i.precision),i.wordSize&&"number"!=typeof(o=i.wordSize)))throw new Error('Option "wordSize" must be a number');switch(e){case"fixed":return function(n,i){return n.toFixed(i)}(n,r);case"exponential":return If(n,r);case"engineering":return function(n,i){var e=n.e,r=e%3==0?e:e<0?e-3-e%3:e-e%3,o=n.mul(Math.pow(10,-r)),a=o.toPrecision(i);return-1!==a.indexOf("e")&&(a=o.toString()),a+"e"+(e>=0?"+":"")+r.toString()}(n,r);case"bin":return kl(n,2,o);case"oct":return kl(n,8,o);case"hex":return kl(n,16,o);case"auto":var a=i&&void 0!==i.lowerExp?i.lowerExp:-3,s=i&&void 0!==i.upperExp?i.upperExp:5;if(n.isZero())return"0";var c=n.toSignificantDigits(r),f=c.e;return(f>=a&&f<s?c.toFixed():If(n,r)).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],d=arguments[4];return"."!==u?u+d:d});default:throw new Error('Unknown notation "'+e+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(n,i):function(n){return n&&"object"==typeof n&&"number"==typeof n.s&&"number"==typeof n.n&&"number"==typeof n.d||!1}(n)?i&&"decimal"===i.fraction?n.toString():n.s*n.n+"/"+n.d:Array.isArray(n)?Ff(n,i):xr(n)?'"'+n+'"':"function"==typeof n?n.syntax?String(n.syntax):"function":n&&"object"==typeof n?"function"==typeof n.format?n.format(i):n&&n.toString(i)!=={}.toString()?n.toString(i):"{"+Object.keys(n).map(r=>'"'+r+'": '+en(n[r],i)).join(", ")+"}":String(n)}function Ff(n,i){if(Array.isArray(n)){for(var e="[",r=n.length,o=0;o<r;o++)0!==o&&(e+=", "),e+=Ff(n[o],i);return e+"]"}return en(n,i)}function Zt(n,i,e){if(!(this instanceof Zt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=n,this.expected=i,this.relation=e,this.message="Dimension mismatch ("+(Array.isArray(n)?"["+n.join(", ")+"]":n)+" "+(this.relation||"!=")+" "+(Array.isArray(i)?"["+i.join(", ")+"]":i)+")",this.stack=(new Error).stack}function di(n,i,e){if(!(this instanceof di))throw new SyntaxError("Constructor must be called with the new operator");this.index=n,arguments.length<3?(this.min=0,this.max=i):(this.min=i,this.max=e),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function ln(n){for(var i=[];Array.isArray(n);)i.push(n.length),n=n[0];return i}function Af(n,i,e){var r,o=n.length;if(o!==i[e])throw new Zt(o,i[e]);if(e<i.length-1){var a=e+1;for(r=0;r<o;r++){if(!Array.isArray(n[r]))throw new Zt(i.length-1,i.length,"<");Af(n[r],i,a)}}else for(r=0;r<o;r++)if(Array.isArray(n[r]))throw new Zt(i.length+1,i.length,">")}function Nf(n,i){if(0===i.length){if(Array.isArray(n))throw new Zt(n.length,0)}else Af(n,i,0)}function wn(n,i){if(!bn(n)||!wt(n))throw new TypeError("Index must be an integer (value: "+n+")");if(n<0||"number"==typeof i&&n>=i)throw new di(n,i)}function No(n,i,e){if(!Array.isArray(n)||!Array.isArray(i))throw new TypeError("Array expected");if(0===i.length)throw new Error("Resizing to scalar is not supported");return i.forEach(function(o){if(!bn(o)||!wt(o)||o<0)throw new TypeError("Invalid size, must contain positive integers (size: "+en(i)+")")}),Ul(n,i,0,void 0!==e?e:0),n}function Ul(n,i,e,r){var o,a,l=i[e],c=Math.min(n.length,l);if(n.length=l,e<i.length-1){var f=e+1;for(o=0;o<c;o++)a=n[o],Array.isArray(a)||(n[o]=a=[a]),Ul(a,i,f,r);for(o=c;o<l;o++)n[o]=a=[],Ul(a,i,f,r)}else{for(o=0;o<c;o++)for(;Array.isArray(n[o]);)n[o]=n[o][0];for(o=c;o<l;o++)n[o]=r}}function Tf(n,i){var e=function(n){if(!Array.isArray(n))return n;var i=[];return n.forEach(function e(r){Array.isArray(r)?r.forEach(e):i.push(r)}),i}(n),r=e.length;if(!Array.isArray(n)||!Array.isArray(i))throw new TypeError("Array expected");if(0===i.length)throw new Zt(0,r,"!=");var o=Lf(i=Vl(i,r));if(r!==o)throw new Zt(o,r,"!=");try{return function(n,i){for(var r,e=n,o=i.length-1;o>0;o--){var a=i[o];r=[];for(var s=e.length/a,l=0;l<s;l++)r.push(e.slice(l*a,(l+1)*a));e=r}return e}(e,i)}catch(a){throw a instanceof Zt?new Zt(o,r,"!="):a}}function Vl(n,i){var e=Lf(n),r=n.slice(),a=n.indexOf(-1);if(n.indexOf(-1,a+1)>=0)throw new Error("More than one wildcard in sizes");if(a>=0){if(i%e!=0)throw new Error("Could not replace wildcard, since "+i+" is no multiple of "+-e);r[a]=-i/e}return r}function Lf(n){return n.reduce((i,e)=>i*e,1)}function Of(n,i,e,r){var o=r||ln(n);if(e)for(var a=0;a<e;a++)n=[n],o.unshift(1);for(n=jf(n,i,0);o.length<i;)o.push(1);return n}function jf(n,i,e){var r,o;if(Array.isArray(n)){var a=e+1;for(r=0,o=n.length;r<o;r++)n[r]=jf(n[r],i,a)}else for(var s=e;s<i;s++)n=[n];return n}function ma(n,i){for(var e,r=0,o=0;o<n.length;o++){var a=n[o],s=Array.isArray(a);if(0===o&&s&&(r=a.length),s&&a.length!==r)return;var l=s?ma(a,i):i(a);if(void 0===e)e=l;else if(e!==l)return"mixed"}return e}(Zt.prototype=new RangeError).constructor=RangeError,Zt.prototype.name="DimensionError",Zt.prototype.isDimensionError=!0,(di.prototype=new RangeError).constructor=RangeError,di.prototype.name="IndexError",di.prototype.isIndexError=!0;var hS=ne("DenseMatrix",["Matrix"],n=>{var{Matrix:i}=n;function e(u,d){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!xr(d))throw new Error("Invalid datatype: "+d);if(Ht(u))"DenseMatrix"===u.type?(this._data=Ot(u._data),this._size=Ot(u._size),this._datatype=d||u._datatype):(this._data=u.toArray(),this._size=u.size(),this._datatype=d||u._datatype);else if(u&&Mn(u.data)&&Mn(u.size))this._data=u.data,this._size=u.size,Nf(this._data,this._size),this._datatype=d||u.datatype;else if(Mn(u))this._data=f(u),this._size=ln(this._data),Nf(this._data,this._size),this._datatype=d;else{if(u)throw new TypeError("Unsupported type of data ("+Un(u)+")");this._data=[],this._size=[0],this._datatype=d}}function r(u,d){if(!da(d))throw new TypeError("Invalid index");if(d.isScalar())return u.get(d.min());var h=d.size();if(h.length!==u._size.length)throw new Zt(h.length,u._size.length);for(var m=d.min(),g=d.max(),x=0,C=u._size.length;x<C;x++)wn(m[x],u._size[x]),wn(g[x],u._size[x]);return new e(o(u._data,d,h.length,0),u._datatype)}function o(u,d,p,h){var m=h===p-1,g=d.dimension(h);return m?g.map(function(x){return wn(x,u.length),u[x]}).valueOf():g.map(function(x){return wn(x,u.length),o(u[x],d,p,h+1)}).valueOf()}function a(u,d,p,h){if(!d||!0!==d.isIndex)throw new TypeError("Invalid index");var x,m=d.size(),g=d.isScalar();if(Ht(p)?(x=p.size(),p=p.valueOf()):x=ln(p),g){if(0!==x.length)throw new TypeError("Scalar expected");u.set(d.min(),p,h)}else{if(m.length<u._size.length)throw new Zt(m.length,u._size.length,"<");if(x.length<m.length){for(var C=0,A=0;1===m[C]&&1===x[C];)C++;for(;1===m[C];)A++,C++;p=Of(p,m.length,A,x)}if(!fa(m,x))throw new Zt(m,x,">");c(u,d.max().map(function(b){return b+1}),h),s(u._data,d,p,m.length,0)}return u}function s(u,d,p,h,m){var g=m===h-1;d.dimension(m).forEach(g?function(C,A){wn(C),u[C]=p[A[0]]}:function(C,A){wn(C),s(u[C],d,p[A[0]],h,m+1)})}function l(u,d,p){if(0===d.length){for(var h=u._data;Mn(h);)h=h[0];return h}return u._size=d.slice(0),u._data=No(u._data,u._size,p),u}function c(u,d,p){for(var h=u._size.slice(0),m=!1;h.length<d.length;)h.push(0),m=!0;for(var g=0,x=d.length;g<x;g++)d[g]>h[g]&&(h[g]=d[g],m=!0);m&&l(u,h,p)}function f(u){for(var d=0,p=u.length;d<p;d++){var h=u[d];Mn(h)?u[d]=f(h):h&&!0===h.isMatrix&&(u[d]=f(h.valueOf()))}return u}return(e.prototype=new i).createDenseMatrix=function(u,d){return new e(u,d)},e.prototype.type="DenseMatrix",e.prototype.isDenseMatrix=!0,e.prototype.getDataType=function(){return ma(this._data,Un)},e.prototype.storage=function(){return"dense"},e.prototype.datatype=function(){return this._datatype},e.prototype.create=function(u,d){return new e(u,d)},e.prototype.subset=function(u,d,p){switch(arguments.length){case 1:return r(this,u);case 2:case 3:return a(this,u,d,p);default:throw new SyntaxError("Wrong number of arguments")}},e.prototype.get=function(u){if(!Mn(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new Zt(u.length,this._size.length);for(var d=0;d<u.length;d++)wn(u[d],this._size[d]);for(var p=this._data,h=0,m=u.length;h<m;h++){var g=u[h];wn(g,p.length),p=p[g]}return p},e.prototype.set=function(u,d,p){if(!Mn(u))throw new TypeError("Array expected");if(u.length<this._size.length)throw new Zt(u.length,this._size.length,"<");var h,m,g;c(this,u.map(function(A){return A+1}),p);var C=this._data;for(h=0,m=u.length-1;h<m;h++)wn(g=u[h],C.length),C=C[g];return wn(g=u[u.length-1],C.length),C[g]=d,this},e.prototype.resize=function(u,d,p){if(!is(u))throw new TypeError("Array or Matrix expected");var h=u.valueOf().map(g=>Array.isArray(g)&&1===g.length?g[0]:g);return l(p?this.clone():this,h,d)},e.prototype.reshape=function(u,d){var p=d?this.clone():this;p._data=Tf(p._data,u);var h=p._size.reduce((m,g)=>m*g);return p._size=Vl(u,h),p},e.prototype.clone=function(){return new e({data:Ot(this._data),size:Ot(this._size),datatype:this._datatype})},e.prototype.size=function(){return this._size.slice(0)},e.prototype.map=function(u){var d=this,h=function g(x,C){return Mn(x)?x.map(function(A,S){return g(A,C.concat(S))}):u(x,C,d)}(this._data,[]);return new e(h,void 0!==this._datatype?ma(h,Un):void 0)},e.prototype.forEach=function(u){var d=this;!function h(m,g){Mn(m)?m.forEach(function(x,C){h(x,g.concat(C))}):u(m,g,d)}(this._data,[])},e.prototype[Symbol.iterator]=function*(){yield*function*d(p,h){if(Mn(p))for(var m=0;m<p.length;m++)yield*d(p[m],h.concat(m));else yield{value:p,index:h}}(this._data,[])},e.prototype.rows=function(){var u=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var h of p)u.push(new e([h],this._datatype));return u},e.prototype.columns=function(){var u=this,d=[],p=this.size();if(2!==p.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(C){var A=h.map(S=>[S[C]]);d.push(new e(A,u._datatype))},g=0;g<p[1];g++)m(g);return d},e.prototype.toArray=function(){return Ot(this._data)},e.prototype.valueOf=function(){return this._data},e.prototype.format=function(u){return en(this._data,u)},e.prototype.toString=function(){return en(this._data)},e.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},e.prototype.diagonal=function(u){if(u){if(sn(u)&&(u=u.toNumber()),!bn(u)||!wt(u))throw new TypeError("The parameter k must be an integer number")}else u=0;for(var d=u>0?u:0,p=u<0?-u:0,g=Math.min(this._size[0]-p,this._size[1]-d),x=[],C=0;C<g;C++)x[C]=this._data[C+p][C+d];return new e({data:x,size:[g],datatype:this._datatype})},e.diagonal=function(u,d,p,h){if(!Mn(u))throw new TypeError("Array expected, size parameter");if(2!==u.length)throw new Error("Only two dimensions matrix are supported");if(u=u.map(function(k){if(sn(k)&&(k=k.toNumber()),!bn(k)||!wt(k)||k<1)throw new Error("Size values must be positive integers");return k}),p){if(sn(p)&&(p=p.toNumber()),!bn(p)||!wt(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var S,m=p>0?p:0,g=p<0?-p:0,x=u[0],C=u[1],A=Math.min(x-g,C-m);if(Mn(d)){if(d.length!==A)throw new Error("Invalid value array length");S=function(U){return d[U]}}else if(Ht(d)){var E=d.size();if(1!==E.length||E[0]!==A)throw new Error("Invalid matrix length");S=function(U){return d.get([U])}}else S=function(){return d};h||(h=sn(S(0))?S(0).mul(0):0);var F=[];if(u.length>0){F=No(F,u,h);for(var b=0;b<A;b++)F[b+g][b+m]=S(b)}return new e({data:F,size:[x,C]})},e.fromJSON=function(u){return new e(u)},e.prototype.swapRows=function(u,d){if(!(bn(u)&&wt(u)&&bn(d)&&wt(d)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return wn(u,this._size[0]),wn(d,this._size[0]),e._swapRows(u,d,this._data),this},e._swapRows=function(u,d,p){var h=p[u];p[u]=p[d],p[d]=h},e},{isClass:!0}),Pf=I(6898);function kf(n,i){if(zf(n)&&Vf(n,i))return n[i];throw"function"==typeof n[i]&&function(n,i){return!(null==n||"function"!=typeof n[i]||_n(n,i)&&Object.getPrototypeOf&&i in Object.getPrototypeOf(n)||!_n(_S,i)&&(i in Object.prototype||i in Function.prototype))}(n,i)?new Error('Cannot access method "'+i+'" as a property'):new Error('No access to property "'+i+'"')}function Vf(n,i){return!(!n||"object"!=typeof n||!_n(vS,i)&&(i in Object.prototype||i in Function.prototype))}function zf(n){return"object"==typeof n&&n&&n.constructor===Object}var vS={length:!0,name:!0},_S={toString:!0,valueOf:!0,toLocaleString:!0};function zl(n){return!!n&&(n instanceof Map||n instanceof class{constructor(i){this.wrappedObject=i}keys(){return Object.keys(this.wrappedObject)}get(i){return kf(this.wrappedObject,i)}set(i,e){return function(n,i,e){if(zf(n)&&Vf(n,i))return n[i]=e,e;throw new Error('No access to property "'+i+'"')}(this.wrappedObject,i,e),this}has(i){return function(n,i){return i in n}(this.wrappedObject,i)}}||"function"==typeof n.set&&"function"==typeof n.get&&"function"==typeof n.keys&&"function"==typeof n.has)}var Gf=function(){return Gf=Pf.create,Pf},MS=ne("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(i){var{BigNumber:e,Complex:r,DenseMatrix:o,Fraction:a}=i,s=Gf();return s.types=[{name:"number",test:bn},{name:"Complex",test:Ni},{name:"BigNumber",test:sn},{name:"Fraction",test:ua},{name:"Unit",test:rs},{name:"string",test:xr},{name:"Chain",test:_f},{name:"Array",test:Mn},{name:"Matrix",test:Ht},{name:"DenseMatrix",test:os},{name:"SparseMatrix",test:ro},{name:"Range",test:Ll},{name:"Index",test:da},{name:"boolean",test:FM},{name:"ResultSet",test:hf},{name:"Help",test:gf},{name:"function",test:AM},{name:"Date",test:NM},{name:"RegExp",test:TM},{name:"null",test:RM},{name:"undefined",test:OM},{name:"AccessorNode",test:jM},{name:"ArrayNode",test:BM},{name:"AssignmentNode",test:PM},{name:"BlockNode",test:kM},{name:"ConditionalNode",test:UM},{name:"ConstantNode",test:VM},{name:"FunctionNode",test:zM},{name:"FunctionAssignmentNode",test:$M},{name:"IndexNode",test:GM},{name:"Node",test:vf},{name:"ObjectNode",test:WM},{name:"OperatorNode",test:KM},{name:"ParenthesisNode",test:HM},{name:"RangeNode",test:ZM},{name:"SymbolNode",test:qM},{name:"Map",test:zl},{name:"Object",test:LM}],s.conversions=[{from:"number",to:"BigNumber",convert:function(c){if(e||Gl(c),c.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+c+"). Use function bignumber(x) to convert to BigNumber.");return new e(c)}},{from:"number",to:"Complex",convert:function(c){return r||ps(c),new r(c,0)}},{from:"number",to:"string",convert:function(c){return c+""}},{from:"BigNumber",to:"Complex",convert:function(c){return r||ps(c),new r(c.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(c){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(c){return r||ps(c),new r(c.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(c){a||Wl(c);var f=new a(c);if(f.valueOf()!==c)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+c+"). Use function fraction(x) to convert to Fraction.");return f}},{from:"string",to:"number",convert:function(c){var f=Number(c);if(isNaN(f))throw new Error('Cannot convert "'+c+'" to a number');return f}},{from:"string",to:"BigNumber",convert:function(c){e||Gl(c);try{return new e(c)}catch(f){throw new Error('Cannot convert "'+c+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(c){a||Wl(c);try{return new a(c)}catch(f){throw new Error('Cannot convert "'+c+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(c){r||ps(c);try{return new r(c)}catch(f){throw new Error('Cannot convert "'+c+'" to Complex')}}},{from:"boolean",to:"number",convert:function(c){return+c}},{from:"boolean",to:"BigNumber",convert:function(c){return e||Gl(c),new e(+c)}},{from:"boolean",to:"Fraction",convert:function(c){return a||Wl(c),new a(+c)}},{from:"boolean",to:"string",convert:function(c){return String(c)}},{from:"Array",to:"Matrix",convert:function(c){return o||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new o(c)}},{from:"Matrix",to:"Array",convert:function(c){return c.valueOf()}}],s});function Gl(n){throw new Error("Cannot convert value ".concat(n," into a BigNumber: no class 'BigNumber' provided"))}function ps(n){throw new Error("Cannot convert value ".concat(n," into a Complex number: no class 'Complex' provided"))}function Wl(n){throw new Error("Cannot convert value ".concat(n," into a Fraction, no class 'Fraction' provided."))}function bt(n,i,e){return n&&"function"==typeof n.map?n.map(function(r){return bt(r,i,e)}):i(n)}function ni(n,i,e){if(null==e)return n.eq(i);if(n.eq(i))return!0;if(n.isNaN()||i.isNaN())return!1;if(n.isFinite()&&i.isFinite()){var r=n.minus(i).abs();if(r.isZero())return!0;var o=n.constructor.max(n.abs(),i.abs());return r.lte(o.times(e))}return!1}var gs="equalScalar",OS=ne(gs,["typed","config"],n=>{var{typed:i,config:e}=n;return i(gs,{"boolean, boolean":function(o,a){return o===a},"number, number":function(o,a){return wr(o,a,e.epsilon)},"BigNumber, BigNumber":function(o,a){return o.eq(a)||ni(o,a,e.epsilon)},"Fraction, Fraction":function(o,a){return o.equals(a)},"Complex, Complex":function(o,a){return function(n,i,e){return wr(n.re,i.re,e)&&wr(n.im,i.im,e)}(o,a,e.epsilon)},"Unit, Unit":function(o,a){if(!o.equalBase(a))throw new Error("Cannot compare units with different base");return this(o.value,a.value)}})});ne(gs,["typed","config"],n=>{var{typed:i,config:e}=n;return i(gs,{"number, number":function(o,a){return wr(o,a,e.epsilon)}})});var US=ne("number",["typed"],n=>{var{typed:i}=n,e=i("number",{"":function(){return 0},number:function(o){return o},string:function(o){if("NaN"===o)return NaN;var a=function(n){var i=n.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return i?{input:n,radix:{"0b":2,"0o":8,"0x":16}[i[1]],integerPart:i[2],fractionalPart:i[3]}:null}(o);if(a)return function(n){for(var i=parseInt(n.integerPart,n.radix),e=0,r=0;r<n.fractionalPart.length;r++)e+=parseInt(n.fractionalPart[r],n.radix)/Math.pow(n.radix,r+1);var a=i+e;if(isNaN(a))throw new SyntaxError('String "'+n.input+'" is no valid number');return a}(a);var s=0,l=o.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);l&&(s=Number(l[2]),o=l[1]);var c=Number(o);if(isNaN(c))throw new SyntaxError('String "'+o+'" is no valid number');if(l){if(c>Co(2,s)-1)throw new SyntaxError('String "'.concat(o,'" is out of range'));c>=Co(2,s-1)&&(c-=Co(2,s))}return c},BigNumber:function(o){return o.toNumber()},Fraction:function(o){return o.valueOf()},Unit:function(o){throw new Error("Second argument with valueless unit expected")},null:function(o){return 0},"Unit, string | Unit":function(o,a){return o.toNumber(a)},"Array | Matrix":function(o){return bt(o,this)}});return e.fromJSON=function(r){return parseFloat(r.value)},e}),qn="number",Wr="number, number";function np(n){return Math.abs(n)}function rp(n,i){return n+i}function ip(n,i){return n*i}function op(n){return-n}function Zl(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(xf(n,i))}np.signature=qn,rp.signature=Wr,ip.signature=Wr,op.signature=qn,Zl.signature=Wr;var mx=ne("multiplyScalar",["typed"],n=>{var{typed:i}=n;return i("multiplyScalar",{"number, number":ip,"Complex, Complex":function(r,o){return r.mul(o)},"BigNumber, BigNumber":function(r,o){return r.times(o)},"Fraction, Fraction":function(r,o){return r.mul(o)},"number | Fraction | BigNumber | Complex, Unit":function(r,o){var a=o.clone();return a.value=null===a.value?a._normalize(r):this(a.value,r),a},"Unit, number | Fraction | BigNumber | Complex":function(r,o){var a=r.clone();return a.value=null===a.value?a._normalize(o):this(a.value,o),a},"Unit, Unit":function(r,o){return r.multiply(o)}})});Math.pow(2,53),ne("oct",["typed","format"],n=>{var{typed:i,format:e}=n;return i("oct",{"number | BigNumber":function(o){return e(o,{notation:"oct"})},"number | BigNumber, number":function(o,a){return e(o,{notation:"oct",wordSize:a})}})});I(4901);Date.now();var iE=ne("fraction",["typed","Fraction"],n=>{var{typed:i,Fraction:e}=n;return i("fraction",{number:function(o){if(!isFinite(o)||isNaN(o))throw new Error(o+" cannot be represented as a fraction");return new e(o)},string:function(o){return new e(o)},"number, number":function(o,a){return new e(o,a)},null:function(o){return new e(0)},BigNumber:function(o){return new e(o.toString())},Fraction:function(o){return o},Object:function(o){return new e(o)},"Array | Matrix":function(o){return bt(o,this)}})}),Lm="unaryMinus",aE=ne(Lm,["typed"],n=>{var{typed:i}=n;return i(Lm,{number:op,Complex:function(r){return r.neg()},BigNumber:function(r){return r.neg()},Fraction:function(r){return r.neg()},Unit:function(r){var o=r.clone();return o.value=this(r.value),o},"Array | Matrix":function(r){return bt(r,this,!0)}})}),Rm="addScalar",lE=ne(Rm,["typed"],n=>{var{typed:i}=n;return i(Rm,{"number, number":rp,"Complex, Complex":function(r,o){return r.add(o)},"BigNumber, BigNumber":function(r,o){return r.plus(o)},"Fraction, Fraction":function(r,o){return r.add(o)},"Unit, Unit":function(r,o){if(null==r.value)throw new Error("Parameter x contains a unit with undefined value");if(null==o.value)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(o))throw new Error("Units do not match");var a=r.clone();return a.value=this(a.value,o.value),a.fixPrefix=!1,a}})}),vE=ne("conj",["typed"],n=>{var{typed:i}=n;return i("conj",{number:function(r){return r},BigNumber:function(r){return r},Complex:function(r){return r.conjugate()},"Array | Matrix":function(r){return bt(r,this)}})});ne("bin",["typed","format"],n=>{var{typed:i,format:e}=n;return i("bin",{"number | BigNumber":function(o){return e(o,{notation:"bin"})},"number | BigNumber, number":function(o,a){return e(o,{notation:"bin",wordSize:a})}})});var WE=ne("SparseMatrix",["typed","equalScalar","Matrix"],n=>{var{typed:i,equalScalar:e,Matrix:r}=n;function o(g,x){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(x&&!xr(x))throw new Error("Invalid datatype: "+x);if(Ht(g))!function(g,x,C){"SparseMatrix"===x.type?(g._values=x._values?Ot(x._values):void 0,g._index=Ot(x._index),g._ptr=Ot(x._ptr),g._size=Ot(x._size),g._datatype=C||x._datatype):s(g,x.valueOf(),C||x._datatype)}(this,g,x);else if(g&&Mn(g.index)&&Mn(g.ptr)&&Mn(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=x||g.datatype;else if(Mn(g))s(this,g,x);else{if(g)throw new TypeError("Unsupported type of data ("+Un(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=x}}function s(g,x,C){g._values=[],g._index=[],g._ptr=[],g._datatype=C;var A=x.length,S=0,E=e,F=0;if(xr(C)&&(E=i.find(e,[C,C])||e,F=i.convert(0,C)),A>0){var b=0;do{g._ptr.push(g._index.length);for(var k=0;k<A;k++){var U=x[k];if(Mn(U)){if(0===b&&S<U.length&&(S=U.length),b<U.length){var R=U[b];E(R,F)||(g._values.push(R),g._index.push(k))}}else 0===b&&S<1&&(S=1),E(U,F)||(g._values.push(U),g._index.push(k))}b++}while(b<S)}g._ptr.push(g._index.length),g._size=[A,S]}function l(g,x){if(!da(x))throw new TypeError("Invalid index");if(x.isScalar())return g.get(x.min());var A=x.size();if(A.length!==g._size.length)throw new Zt(A.length,g._size.length);var S,E,F,b,k=x.min(),U=x.max();for(S=0,E=g._size.length;S<E;S++)wn(k[S],g._size[S]),wn(U[S],g._size[S]);var R=g._values,T=g._index,H=g._ptr,K=x.dimension(0),te=x.dimension(1),ae=[],ge=[];K.forEach(function(P,fe){ge[P]=fe[0],ae[P]=!0});var ue=R?[]:void 0,G=[],we=[];return te.forEach(function(P){for(we.push(G.length),F=H[P],b=H[P+1];F<b;F++)!0===ae[S=T[F]]&&(G.push(ge[S]),ue&&ue.push(R[F]))}),we.push(G.length),new o({values:ue,index:G,ptr:we,size:A,datatype:g._datatype})}function c(g,x,C,A){if(!x||!0!==x.isIndex)throw new TypeError("Invalid index");var F,S=x.size(),E=x.isScalar();if(Ht(C)?(F=C.size(),C=C.toArray()):F=ln(C),E){if(0!==F.length)throw new TypeError("Scalar expected");g.set(x.min(),C,A)}else{if(1!==S.length&&2!==S.length)throw new Zt(S.length,g._size.length,"<");if(F.length<S.length){for(var b=0,k=0;1===S[b]&&1===F[b];)b++;for(;1===S[b];)k++,b++;C=Of(C,S.length,k,F)}if(!fa(S,F))throw new Zt(S,F,">");for(var U=x.min()[0],R=x.min()[1],T=F[0],H=F[1],K=0;K<T;K++)for(var te=0;te<H;te++)g.set([K+U,te+R],C[K][te],A)}return g}function f(g,x,C,A){if(C-x==0)return C;for(var S=x;S<C;S++)if(A[S]===g)return S;return x}function d(g,x,C,A,S,E,F){S.splice(g,0,A),E.splice(g,0,x);for(var b=C+1;b<F.length;b++)F[b]++}function p(g,x,C,A){var S=A||0,E=e,F=0;xr(g._datatype)&&(E=i.find(e,[g._datatype,g._datatype])||e,F=i.convert(0,g._datatype),S=i.convert(S,g._datatype));var R,T,H,b=!E(S,F),k=g._size[0],U=g._size[1];if(C>U){for(T=U;T<C;T++)if(g._ptr[T]=g._values.length,b)for(R=0;R<k;R++)g._values.push(S),g._index.push(R);g._ptr[C]=g._values.length}else C<U&&(g._ptr.splice(C+1,U-C),g._values.splice(g._ptr[C],g._values.length),g._index.splice(g._ptr[C],g._index.length));if(U=C,x>k){if(b){var K=0;for(T=0;T<U;T++){g._ptr[T]=g._ptr[T]+K,H=g._ptr[T+1]+K;var te=0;for(R=k;R<x;R++,te++)g._values.splice(H+te,0,S),g._index.splice(H+te,0,R),K++}g._ptr[U]=g._values.length}}else if(x<k){var ae=0;for(T=0;T<U;T++){g._ptr[T]=g._ptr[T]-ae;var ue=g._ptr[T+1]-ae;for(H=g._ptr[T];H<ue;H++)(R=g._index[H])>x-1&&(g._values.splice(H,1),g._index.splice(H,1),ae++)}g._ptr[T]=g._values.length}return g._size[0]=x,g._size[1]=C,g}function m(g,x,C,A,S){var k,U,E=A[0],F=A[1],b=[];for(k=0;k<E;k++)for(b[k]=[],U=0;U<F;U++)b[k][U]=0;for(U=0;U<F;U++)for(var T=C[U+1],H=C[U];H<T;H++)b[k=x[H]][U]=g?S?Ot(g[H]):g[H]:1;return b}return(o.prototype=new r).createSparseMatrix=function(g,x){return new o(g,x)},o.prototype.type="SparseMatrix",o.prototype.isSparseMatrix=!0,o.prototype.getDataType=function(){return ma(this._values,Un)},o.prototype.storage=function(){return"sparse"},o.prototype.datatype=function(){return this._datatype},o.prototype.create=function(g,x){return new o(g,x)},o.prototype.density=function(){var g=this._size[0],x=this._size[1];return 0!==g&&0!==x?this._index.length/(g*x):0},o.prototype.subset=function(g,x,C){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return l(this,g);case 2:case 3:return c(this,g,x,C);default:throw new SyntaxError("Wrong number of arguments")}},o.prototype.get=function(g){if(!Mn(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Zt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var x=g[0],C=g[1];wn(x,this._size[0]),wn(C,this._size[1]);var A=f(x,this._ptr[C],this._ptr[C+1],this._index);return A<this._ptr[C+1]&&this._index[A]===x?this._values[A]:0},o.prototype.set=function(g,x,C){if(!Mn(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Zt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var A=g[0],S=g[1],E=this._size[0],F=this._size[1],b=e,k=0;xr(this._datatype)&&(b=i.find(e,[this._datatype,this._datatype])||e,k=i.convert(0,this._datatype)),(A>E-1||S>F-1)&&(p(this,Math.max(A+1,E),Math.max(S+1,F),C),E=this._size[0],F=this._size[1]),wn(A,E),wn(S,F);var U=f(A,this._ptr[S],this._ptr[S+1],this._index);return U<this._ptr[S+1]&&this._index[U]===A?b(x,k)?function(g,x,C,A,S){C.splice(g,1),A.splice(g,1);for(var E=x+1;E<S.length;E++)S[E]--}(U,S,this._values,this._index,this._ptr):this._values[U]=x:d(U,A,S,x,this._values,this._index,this._ptr),this},o.prototype.resize=function(g,x,C){if(!is(g))throw new TypeError("Array or Matrix expected");var A=g.valueOf().map(E=>Array.isArray(E)&&1===E.length?E[0]:E);if(2!==A.length)throw new Error("Only two dimensions matrix are supported");return A.forEach(function(E){if(!bn(E)||!wt(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+en(A)+")")}),p(C?this.clone():this,A[0],A[1],x)},o.prototype.reshape=function(g,x){if(!Mn(g))throw new TypeError("Array expected");if(2!==g.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(P){if(!bn(P)||!wt(P)||P<=-2||0===P)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+en(g)+")")});var C=this._size[0]*this._size[1];if(C!==(g=Vl(g,C))[0]*g[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var S=x?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return S;for(var E=[],F=0;F<S._ptr.length;F++)for(var b=0;b<S._ptr[F+1]-S._ptr[F];b++)E.push(F);for(var k=S._values.slice(),U=S._index.slice(),R=0;R<S._index.length;R++){var K=U[R]*S._size[1]+E[R];E[R]=K%g[1],U[R]=Math.floor(K/g[1])}S._values.length=0,S._index.length=0,S._ptr.length=g[1]+1,S._size=g.slice();for(var te=0;te<S._ptr.length;te++)S._ptr[te]=0;for(var ae=0;ae<k.length;ae++){var ge=U[ae],ue=E[ae],G=k[ae];d(f(ge,S._ptr[ue],S._ptr[ue+1],S._index),ge,ue,G,S._values,S._index,S._ptr)}return S},o.prototype.clone=function(){return new o({values:this._values?Ot(this._values):void 0,index:Ot(this._index),ptr:Ot(this._ptr),size:Ot(this._size),datatype:this._datatype})},o.prototype.size=function(){return this._size.slice(0)},o.prototype.map=function(g,x){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var C=this;return function(g,x,C,A,S,E,F){var b=[],k=[],U=[],R=e,T=0;xr(g._datatype)&&(R=i.find(e,[g._datatype,g._datatype])||e,T=i.convert(0,g._datatype));for(var H=function(_e,Ie,$e){_e=E(_e,Ie,$e),R(_e,T)||(b.push(_e),k.push(Ie))},K=0;K<=S;K++){U.push(b.length);var te=g._ptr[K],ae=g._ptr[K+1];if(F)for(var ge=te;ge<ae;ge++){var ue=g._index[ge];ue>=0&&ue<=C&&H(g._values[ge],ue-0,K-0)}else{for(var G={},we=te;we<ae;we++)G[g._index[we]]=g._values[we];for(var fe=0;fe<=C;fe++)H(fe in G?G[fe]:0,fe-0,K-0)}}return U.push(b.length),new o({values:b,index:k,ptr:U,size:[C-0+1,S-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,function(b,k,U){return g(b,[k,U],C)},x)},o.prototype.forEach=function(g,x){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var A=this._size[0],S=this._size[1],E=0;E<S;E++){var F=this._ptr[E],b=this._ptr[E+1];if(x)for(var k=F;k<b;k++)g(this._values[k],[this._index[k],E],this);else{for(var R={},T=F;T<b;T++)R[this._index[T]]=this._values[T];for(var K=0;K<A;K++)g(K in R?R[K]:0,[K,E],this)}}},o.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],x=0;x<g;x++)for(var A=this._ptr[x+1],S=this._ptr[x];S<A;S++){var E=this._index[S];yield{value:this._values[S],index:[E,x]}}},o.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},o.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)},o.prototype.format=function(g){for(var x=this._size[0],C=this._size[1],A=this.density(),S="Sparse Matrix ["+en(x,g)+" x "+en(C,g)+"] density: "+en(A,g)+"\n",E=0;E<C;E++)for(var b=this._ptr[E+1],k=this._ptr[E];k<b;k++)S+="\n    ("+en(this._index[k],g)+", "+en(E,g)+") ==> "+(this._values?en(this._values[k],g):"X");return S},o.prototype.toString=function(){return en(this.toArray())},o.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},o.prototype.diagonal=function(g){if(g){if(sn(g)&&(g=g.toNumber()),!bn(g)||!wt(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var x=g>0?g:0,C=g<0?-g:0,S=this._size[1],E=Math.min(this._size[0]-C,S-x),F=[],b=[],k=[];k[0]=0;for(var U=x;U<S&&F.length<E;U++)for(var T=this._ptr[U+1],H=this._ptr[U];H<T;H++){var K=this._index[H];if(K===U-x+C){F.push(this._values[H]),b[F.length-1]=K-C;break}}return k.push(F.length),new o({values:F,index:b,ptr:k,size:[E,1]})},o.fromJSON=function(g){return new o(g)},o.diagonal=function(g,x,C,A,S){if(!Mn(g))throw new TypeError("Array expected, size parameter");if(2!==g.length)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(P){if(sn(P)&&(P=P.toNumber()),!bn(P)||!wt(P)||P<1)throw new Error("Size values must be positive integers");return P}),C){if(sn(C)&&(C=C.toNumber()),!bn(C)||!wt(C))throw new TypeError("The parameter k must be an integer number")}else C=0;var E=e,F=0;xr(S)&&(E=i.find(e,[S,S])||e,F=i.convert(0,S));var H,b=C>0?C:0,k=C<0?-C:0,U=g[0],R=g[1],T=Math.min(U-k,R-b);if(Mn(x)){if(x.length!==T)throw new Error("Invalid value array length");H=function(fe){return x[fe]}}else if(Ht(x)){var K=x.size();if(1!==K.length||K[0]!==T)throw new Error("Invalid matrix length");H=function(fe){return x.get([fe])}}else H=function(){return x};for(var te=[],ae=[],ge=[],ue=0;ue<R;ue++){ge.push(te.length);var G=ue-b;if(G>=0&&G<T){var we=H(G);E(we,F)||(ae.push(G+k),te.push(we))}}return ge.push(te.length),new o({values:te,index:ae,ptr:ge,size:[U,R]})},o.prototype.swapRows=function(g,x){if(!(bn(g)&&wt(g)&&bn(x)&&wt(x)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return wn(g,this._size[0]),wn(x,this._size[0]),o._swapRows(g,x,this._size[1],this._values,this._index,this._ptr),this},o._forEachRow=function(g,x,C,A,S){for(var F=A[g+1],b=A[g];b<F;b++)S(C[b],x[b])},o._swapRows=function(g,x,C,A,S,E){for(var F=0;F<C;F++){var b=E[F],k=E[F+1],U=f(g,b,k,S),R=f(x,b,k,S);if(U<k&&R<k&&S[U]===g&&S[R]===x){if(A){var T=A[U];A[U]=A[R],A[R]=T}}else if(U<k&&S[U]===g&&(R>=k||S[R]!==x)){var H=A?A[U]:void 0;S.splice(R,0,x),A&&A.splice(R,0,H),S.splice(R<=U?U+1:U,1),A&&A.splice(R<=U?U+1:U,1)}else if(R<k&&S[R]===x&&(U>=k||S[U]!==g)){var K=A?A[R]:void 0;S.splice(U,0,g),A&&A.splice(U,0,K),S.splice(U<=R?R+1:R,1),A&&A.splice(U<=R?R+1:R,1)}}},o},{isClass:!0}),HE=ne("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],n=>{var{typed:i,DenseMatrix:r,SparseMatrix:o}=n;return i("matrix",{"":function(){return a([])},string:function(l){return a([],l)},"string, string":function(l,c){return a([],l,c)},Array:function(l){return a(l)},Matrix:function(l){return a(l,l.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,l,c){if("dense"===l||"default"===l||void 0===l)return new r(s,c);if("sparse"===l)return new o(s,c);throw new TypeError("Unknown matrix type "+JSON.stringify(l)+".")}}),qE=ne("abs",["typed"],n=>{var{typed:i}=n;return i("abs",{number:np,Complex:function(r){return r.abs()},BigNumber:function(r){return r.abs()},Fraction:function(r){return r.abs()},"Array | Matrix":function(r){return bt(r,this,!0)},Unit:function(r){return r.abs()}})}),Li=ne("algorithm01",["typed"],n=>{var{typed:i}=n;return function(r,o,a,s){var l=r._data,c=r._size,f=r._datatype,u=o._values,d=o._index,p=o._ptr,h=o._size,m=o._datatype;if(c.length!==h.length)throw new Zt(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var S,E,g=c[0],x=c[1],C="string"==typeof f&&f===m?f:void 0,A=C?i.find(a,[C,C]):a,F=[];for(S=0;S<g;S++)F[S]=[];var b=[],k=[];for(E=0;E<x;E++){for(var U=E+1,T=p[E+1],H=p[E];H<T;H++)b[S=d[H]]=s?A(u[H],l[S][E]):A(l[S][E],u[H]),k[S]=U;for(S=0;S<g;S++)F[S][E]=k[S]===U?b[S]:l[S][E]}return r.createDenseMatrix({data:F,size:[g,x],datatype:C})}}),oo=ne("algorithm10",["typed","DenseMatrix"],n=>{var{typed:i,DenseMatrix:e}=n;return function(o,a,s,l){var c=o._values,f=o._index,u=o._ptr,d=o._size,p=o._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g,h=d[0],m=d[1],x=s;"string"==typeof p&&(a=i.convert(a,g=p),x=i.find(s,[g,g]));for(var C=[],A=[],S=[],E=0;E<m;E++){for(var F=E+1,k=u[E+1],U=u[E];U<k;U++){var R=f[U];A[R]=c[U],S[R]=F}for(var T=0;T<h;T++)0===E&&(C[T]=[]),C[T][E]=S[T]===F?l?x(a,A[T]):x(A[T],a):a}return new e({data:C,size:[h,m],datatype:g})}}),Cn=ne("algorithm13",["typed"],n=>{var{typed:i}=n;return function(o,a,s){var l=o._data,c=o._size,f=o._datatype,u=a._data,d=a._size,p=a._datatype,h=[];if(c.length!==d.length)throw new Zt(c.length,d.length);for(var m=0;m<c.length;m++){if(c[m]!==d[m])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");h[m]=c[m]}var g,x=s;"string"==typeof f&&f===p&&(x=i.find(s,[g=f,g]));var C=h.length>0?e(x,0,h,h[0],l,u):[];return o.createDenseMatrix({data:C,size:h,datatype:g})};function e(r,o,a,s,l,c){var f=[];if(o===a.length-1)for(var u=0;u<s;u++)f[u]=r(l[u],c[u]);else for(var d=0;d<s;d++)f[d]=e(r,o+1,a,a[o+1],l[d],c[d]);return f}}),cn=ne("algorithm14",["typed"],n=>{var{typed:i}=n;return function(o,a,s,l){var d,c=o._data,f=o._size,u=o._datatype,p=s;"string"==typeof u&&(a=i.convert(a,d=u),p=i.find(s,[d,d]));var h=f.length>0?e(p,0,f,f[0],c,a,l):[];return o.createDenseMatrix({data:h,size:Ot(f),datatype:d})};function e(r,o,a,s,l,c,f){var u=[];if(o===a.length-1)for(var d=0;d<s;d++)u[d]=f?r(c,l[d]):r(l[d],c);else for(var p=0;p<s;p++)u[p]=e(r,o+1,a,a[o+1],l[p],c,f);return u}}),fr=ne("algorithm03",["typed"],n=>{var{typed:i}=n;return function(r,o,a,s){var l=r._data,c=r._size,f=r._datatype,u=o._values,d=o._index,p=o._ptr,h=o._size,m=o._datatype;if(c.length!==h.length)throw new Zt(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var C,g=c[0],x=c[1],A=0,S=a;"string"==typeof f&&f===m&&(A=i.convert(0,C=f),S=i.find(a,[C,C]));for(var E=[],F=0;F<g;F++)E[F]=[];for(var b=[],k=[],U=0;U<x;U++){for(var R=U+1,H=p[U+1],K=p[U];K<H;K++){var te=d[K];b[te]=s?S(u[K],l[te][U]):S(l[te][U],u[K]),k[te]=R}for(var ae=0;ae<g;ae++)E[ae][U]=k[ae]===R?b[ae]:s?S(A,l[ae][U]):S(l[ae][U],A)}return r.createDenseMatrix({data:E,size:[g,x],datatype:C})}}),ys=ne("algorithm05",["typed","equalScalar"],n=>{var{typed:i,equalScalar:e}=n;return function(o,a,s){var l=o._values,c=o._index,f=o._ptr,u=o._size,d=o._datatype,p=a._values,h=a._index,m=a._ptr,g=a._size,x=a._datatype;if(u.length!==g.length)throw new Zt(u.length,g.length);if(u[0]!==g[0]||u[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+g+")");var S,C=u[0],A=u[1],E=e,F=0,b=s;"string"==typeof d&&d===x&&(E=i.find(e,[S=d,S]),F=i.convert(0,S),b=i.find(s,[S,S]));var ae,ge,ue,G,k=l&&p?[]:void 0,U=[],R=[],T=k?[]:void 0,H=k?[]:void 0,K=[],te=[];for(ge=0;ge<A;ge++){R[ge]=U.length;var we=ge+1;for(ue=f[ge],G=f[ge+1];ue<G;ue++)U.push(ae=c[ue]),K[ae]=we,T&&(T[ae]=l[ue]);for(ue=m[ge],G=m[ge+1];ue<G;ue++)K[ae=h[ue]]!==we&&U.push(ae),te[ae]=we,H&&(H[ae]=p[ue]);if(k)for(ue=R[ge];ue<U.length;){var P=K[ae=U[ue]],fe=te[ae];if(P===we||fe===we){var _e=b(P===we?T[ae]:F,fe===we?H[ae]:F);E(_e,F)?U.splice(ue,1):(k.push(_e),ue++)}}}return R[A]=U.length,o.createSparseMatrix({values:k,index:U,ptr:R,size:[C,A],datatype:S})}}),nr=ne("algorithm11",["typed","equalScalar"],n=>{var{typed:i,equalScalar:e}=n;return function(o,a,s,l){var c=o._values,f=o._index,u=o._ptr,d=o._size,p=o._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g,h=d[0],m=d[1],x=e,C=0,A=s;"string"==typeof p&&(x=i.find(e,[g=p,g]),C=i.convert(0,g),a=i.convert(a,g),A=i.find(s,[g,g]));for(var S=[],E=[],F=[],b=0;b<m;b++){F[b]=E.length;for(var U=u[b+1],R=u[b];R<U;R++){var T=f[R],H=l?A(a,c[R]):A(c[R],a);x(H,C)||(E.push(T),S.push(H))}}return F[m]=E.length,o.createSparseMatrix({values:S,index:E,ptr:F,size:[h,m],datatype:g})}}),pr=ne("algorithm12",["typed","DenseMatrix"],n=>{var{typed:i,DenseMatrix:e}=n;return function(o,a,s,l){var c=o._values,f=o._index,u=o._ptr,d=o._size,p=o._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g,h=d[0],m=d[1],x=s;"string"==typeof p&&(a=i.convert(a,g=p),x=i.find(s,[g,g]));for(var C=[],A=[],S=[],E=0;E<m;E++){for(var F=E+1,k=u[E+1],U=u[E];U<k;U++){var R=f[U];A[R]=c[U],S[R]=F}for(var T=0;T<h;T++)0===E&&(C[T]=[]),C[T][E]=S[T]===F?l?x(a,A[T]):x(A[T],a):l?x(a,0):x(0,a)}return new e({data:C,size:[h,m],datatype:g})}}),ri=ne("algorithm07",["typed","DenseMatrix"],n=>{var{typed:i,DenseMatrix:e}=n;return function(a,s,l){var c=a._size,f=a._datatype,u=s._size,d=s._datatype;if(c.length!==u.length)throw new Zt(c.length,u.length);if(c[0]!==u[0]||c[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+u+")");var m,p=c[0],h=c[1],g=0,x=l;"string"==typeof f&&f===d&&(g=i.convert(0,m=f),x=i.find(l,[m,m]));var C,A,S=[];for(C=0;C<p;C++)S[C]=[];var E=[],F=[],b=[],k=[];for(A=0;A<h;A++){var U=A+1;for(r(a,A,b,E,U),r(s,A,k,F,U),C=0;C<p;C++)S[C][A]=x(b[C]===U?E[C]:g,k[C]===U?F[C]:g)}return new e({data:S,size:[p,h],datatype:m})};function r(o,a,s,l,c){for(var f=o._values,u=o._index,d=o._ptr,p=d[a],h=d[a+1];p<h;p++){var m=u[p];s[m]=c,l[m]=f[p]}}}),lh="identity",kD=ne(lh,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],n=>{var{typed:i,config:e,matrix:r,BigNumber:o,DenseMatrix:a,SparseMatrix:s}=n;return i(lh,{"":function(){return"Matrix"===e.matrix?r([]):[]},string:function(u){return r(u)},"number | BigNumber":function(u){return c(u,u,"Matrix"===e.matrix?"dense":void 0)},"number | BigNumber, string":function(u,d){return c(u,u,d)},"number | BigNumber, number | BigNumber":function(u,d){return c(u,d,"Matrix"===e.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(u,d,p){return c(u,d,p)},Array:function(u){return l(u)},"Array, string":function(u,d){return l(u,d)},Matrix:function(u){return l(u.valueOf(),u.storage())},"Matrix, string":function(u,d){return l(u.valueOf(),d)}});function l(f,u){switch(f.length){case 0:return u?r(u):[];case 1:return c(f[0],f[0],u);case 2:return c(f[0],f[1],u);default:throw new Error("Vector containing two values expected")}}function c(f,u,d){var p=sn(f)||sn(u)?o:null;if(sn(f)&&(f=f.toNumber()),sn(u)&&(u=u.toNumber()),!wt(f)||f<1)throw new Error("Parameters in function identity must be positive integers");if(!wt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");var h=p?new o(1):1,m=p?new p(0):0,g=[f,u];if(d){if("sparse"===d)return s.diagonal(g,h,0,m);if("dense"===d)return a.diagonal(g,h,0,m);throw new TypeError('Unknown matrix type "'.concat(d,'"'))}for(var x=No([],g,m),C=f<u?f:u,A=0;A<C;A++)x[A][A]=h;return x}});function uh(){throw new Error('No "bignumber" implementation available')}function WD(){throw new Error('No "fraction" implementation available')}var HD=ne("size",["typed","config","?matrix"],n=>{var{typed:i,config:e,matrix:r}=n;return i("size",{Matrix:function(a){return a.create(a.size())},Array:ln,string:function(a){return"Array"===e.matrix?[a.length]:r([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return"Array"===e.matrix?[]:r?r([]):function(){throw new Error('No "matrix" implementation available')}()}})}),eI=ne("zeros",["typed","config","matrix","BigNumber"],n=>{var{typed:i,config:e,matrix:r,BigNumber:o}=n;return i("zeros",{"":function(){return"Array"===e.matrix?a([]):a([],"default")},"...number | BigNumber | string":function(f){if("string"==typeof f[f.length-1]){var d=f.pop();return a(f,d)}return"Array"===e.matrix?a(f):a(f,"default")},Array:a,Matrix:function(f){var u=f.storage();return a(f.valueOf(),u)},"Array | Matrix, string":function(f,u){return a(f.valueOf(),u)}});function a(c,f){var d=function(c){var f=!1;return c.forEach(function(u,d,p){sn(u)&&(f=!0,p[d]=u.toNumber())}),f}(c)?new o(0):0;if(function(c){c.forEach(function(f){if("number"!=typeof f||!wt(f)||f<0)throw new Error("Parameters in function zeros must be positive integers")})}(c),f){var p=r(f);return c.length>0?p.resize(c,d):p}var h=[];return c.length>0?No(h,c,d):h}});function vh(n,i,e){return i in n?Object.defineProperty(n,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[i]=e,n}function _h(n,i){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);i&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,r)}return e}function yh(n){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?_h(Object(e),!0).forEach(function(r){vh(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):_h(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}ne("hex",["typed","format"],n=>{var{typed:i,format:e}=n;return i("hex",{"number | BigNumber":function(o){return e(o,{notation:"hex"})},"number | BigNumber, number":function(o,a){return e(o,{notation:"hex",wordSize:a})}})});var jo="Number of decimals in function round must be an integer",iI=ne("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],n=>{var{typed:i,matrix:e,equalScalar:r,zeros:o,BigNumber:a,DenseMatrix:s}=n,l=nr({typed:i,equalScalar:r}),c=pr({typed:i,DenseMatrix:s}),f=cn({typed:i});return i("round",yh(yh({},oI),{},{Complex:function(d){return d.round()},"Complex, number":function(d,p){if(p%1)throw new TypeError(jo);return d.round(p)},"Complex, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(jo);var h=p.toNumber();return d.round(h)},"number, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(jo);return new a(d).toDecimalPlaces(p.toNumber())},BigNumber:function(d){return d.toDecimalPlaces(0)},"BigNumber, BigNumber":function(d,p){if(!p.isInteger())throw new TypeError(jo);return d.toDecimalPlaces(p.toNumber())},Fraction:function(d){return d.round()},"Fraction, number":function(d,p){if(p%1)throw new TypeError(jo);return d.round(p)},"Array | Matrix":function(d){return bt(d,this,!0)},"SparseMatrix, number | BigNumber":function(d,p){return l(d,p,this,!1)},"DenseMatrix, number | BigNumber":function(d,p){return f(d,p,this,!1)},"number | Complex | BigNumber, SparseMatrix":function(d,p){return r(d,0)?o(p.size(),p.storage()):c(p,d,this,!0)},"number | Complex | BigNumber, DenseMatrix":function(d,p){return r(d,0)?o(p.size(),p.storage()):f(p,d,this,!0)},"Array, number | BigNumber":function(d,p){return f(e(d),p,this,!1).valueOf()},"number | Complex | BigNumber, Array":function(d,p){return f(e(p),d,this,!0).valueOf()}}))}),oI={number:Zl,"number, number":function(i,e){if(!wt(e))throw new TypeError(jo);if(e<0||e>15)throw new Error("Number of decimals in function round must be in the range of 0-15");return Zl(i,e)}},wh="smaller",vI=ne(wh,["typed","config","matrix","DenseMatrix"],n=>{var{typed:i,config:e,matrix:r,DenseMatrix:o}=n,a=fr({typed:i}),s=ri({typed:i,DenseMatrix:o}),l=pr({typed:i,DenseMatrix:o}),c=Cn({typed:i}),f=cn({typed:i});return i(wh,{"boolean, boolean":function(d,p){return d<p},"number, number":function(d,p){return d<p&&!wr(d,p,e.epsilon)},"BigNumber, BigNumber":function(d,p){return d.lt(p)&&!ni(d,p,e.epsilon)},"Fraction, Fraction":function(d,p){return-1===d.compare(p)},"Complex, Complex":function(d,p){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(d,p){if(!d.equalBase(p))throw new Error("Cannot compare units with different base");return this(d.value,p.value)},"SparseMatrix, SparseMatrix":function(d,p){return s(d,p,this)},"SparseMatrix, DenseMatrix":function(d,p){return a(p,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,p){return a(d,p,this,!1)},"DenseMatrix, DenseMatrix":function(d,p){return c(d,p,this)},"Array, Array":function(d,p){return this(r(d),r(p)).valueOf()},"Array, Matrix":function(d,p){return this(r(d),p)},"Matrix, Array":function(d,p){return this(d,r(p))},"SparseMatrix, any":function(d,p){return l(d,p,this,!1)},"DenseMatrix, any":function(d,p){return f(d,p,this,!1)},"any, SparseMatrix":function(d,p){return l(p,d,this,!0)},"any, DenseMatrix":function(d,p){return f(p,d,this,!0)},"Array, any":function(d,p){return f(r(d),p,this,!1).valueOf()},"any, Array":function(d,p){return f(r(p),d,this,!0).valueOf()}})}),yI=ne("larger",["typed","config","matrix","DenseMatrix"],n=>{var{typed:i,config:e,matrix:r,DenseMatrix:o}=n,a=fr({typed:i}),s=ri({typed:i,DenseMatrix:o}),l=pr({typed:i,DenseMatrix:o}),c=Cn({typed:i}),f=cn({typed:i});return i("larger",{"boolean, boolean":function(d,p){return d>p},"number, number":function(d,p){return d>p&&!wr(d,p,e.epsilon)},"BigNumber, BigNumber":function(d,p){return d.gt(p)&&!ni(d,p,e.epsilon)},"Fraction, Fraction":function(d,p){return 1===d.compare(p)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(d,p){if(!d.equalBase(p))throw new Error("Cannot compare units with different base");return this(d.value,p.value)},"SparseMatrix, SparseMatrix":function(d,p){return s(d,p,this)},"SparseMatrix, DenseMatrix":function(d,p){return a(p,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,p){return a(d,p,this,!1)},"DenseMatrix, DenseMatrix":function(d,p){return c(d,p,this)},"Array, Array":function(d,p){return this(r(d),r(p)).valueOf()},"Array, Matrix":function(d,p){return this(r(d),p)},"Matrix, Array":function(d,p){return this(d,r(p))},"SparseMatrix, any":function(d,p){return l(d,p,this,!1)},"DenseMatrix, any":function(d,p){return f(d,p,this,!1)},"any, SparseMatrix":function(d,p){return l(p,d,this,!0)},"any, DenseMatrix":function(d,p){return f(p,d,this,!0)},"Array, any":function(d,p){return f(r(d),p,this,!1).valueOf()},"any, Array":function(d,p){return f(r(p),d,this,!0).valueOf()}})}),ec="unequal",DI=(ne(ec,["typed","equalScalar"],n=>{var{typed:i,equalScalar:e}=n;return i(ec,{"any, any":function(o,a){return null===o?null!==a:null===a?null!==o:void 0===o?void 0!==a:void 0===a?void 0!==o:!e(o,a)}})}),ne("FibonacciHeap",["smaller","larger"],n=>{var{smaller:i,larger:e}=n,r=1/Math.log((1+Math.sqrt(5))/2);function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function s(u,d,p){d.left.right=d.right,d.right.left=d.left,p.degree--,p.child===d&&(p.child=d.right),0===p.degree&&(p.child=null),d.left=u,d.right=u.right,u.right=d,d.right.left=d,d.parent=null,d.mark=!1}function l(u,d){var p=d.parent;!p||(d.mark?(s(u,d,p),l(p)):d.mark=!0)}o.prototype.type="FibonacciHeap",o.prototype.isFibonacciHeap=!0,o.prototype.insert=function(u,d){var p={key:u,value:d,degree:0};if(this._minimum){var h=this._minimum;p.left=h,p.right=h.right,h.right=p,p.right.left=p,i(u,h.key)&&(this._minimum=p)}else p.left=p,p.right=p,this._minimum=p;return this._size++,p},o.prototype.size=function(){return this._size},o.prototype.clear=function(){this._minimum=null,this._size=0},o.prototype.isEmpty=function(){return 0===this._size},o.prototype.extractMinimum=function(){var u=this._minimum;if(null===u)return u;for(var d=this._minimum,p=u.degree,h=u.child;p>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=d,h.right=d.right,d.right=h,h.right.left=h,h.parent=null,h=m,p--}return u.left.right=u.right,u.right.left=u.left,d=u===u.right?null:function(u,d){var x,p=Math.floor(Math.log(d)*r)+1,h=new Array(p),m=0,g=u;if(g)for(m++,g=g.right;g!==u;)m++,g=g.right;for(;m>0;){for(var C=g.degree,A=g.right;x=h[C];){if(e(g.key,x.key)){var S=x;x=g,g=S}c(x,g),h[C]=null,C++}h[C]=g,g=A,m--}u=null;for(var E=0;E<p;E++)(x=h[E])&&(u?(x.left.right=x.right,x.right.left=x.left,x.left=u,x.right=u.right,u.right=x,x.right.left=x,i(x.key,u.key)&&(u=x)):u=x);return u}(d=u.right,this._size),this._size--,this._minimum=d,u},o.prototype.remove=function(u){this._minimum=function(u,d,p){d.key=-1;var h=d.parent;return h&&i(d.key,h.key)&&(s(u,d,h),l(u,h)),i(d.key,u.key)&&(u=d),u}(this._minimum,u),this.extractMinimum()};var c=function(d,p){d.left.right=d.right,d.right.left=d.left,d.parent=p,p.child?(d.left=p.child,d.right=p.child.right,p.child.right=d,d.right.left=d):(p.child=d,d.right=d,d.left=d),p.degree++,d.mark=!1};return o},{isClass:!0})),VI=ne("dot",["typed","addScalar","multiplyScalar","conj","size"],n=>{var{typed:i,addScalar:e,multiplyScalar:r,conj:o,size:a}=n;return i("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(u,d){var p=s(u,d),h=Ht(u)?u._data:u,m=Ht(u)?u._datatype:void 0,g=Ht(d)?d._data:d,x=Ht(d)?d._datatype:void 0,C=2===f(u).length,A=2===f(d).length,S=e,E=r;if(m&&x&&m===x&&"string"==typeof m){var F=m;S=i.find(e,[F,F]),E=i.find(r,[F,F])}if(!C&&!A){for(var b=E(o(h[0]),g[0]),k=1;k<p;k++)b=S(b,E(o(h[k]),g[k]));return b}if(!C&&A){for(var U=E(o(h[0]),g[0][0]),R=1;R<p;R++)U=S(U,E(o(h[R]),g[R][0]));return U}if(C&&!A){for(var T=E(o(h[0][0]),g[0]),H=1;H<p;H++)T=S(T,E(o(h[H][0]),g[H]));return T}if(C&&A){for(var K=E(o(h[0][0]),g[0][0]),te=1;te<p;te++)K=S(K,E(o(h[te][0]),g[te][0]));return K}},"SparseMatrix, SparseMatrix":function(u,d){s(u,d);for(var p=u._index,h=u._values,m=d._index,g=d._values,x=0,C=e,A=r,S=0,E=0;S<p.length&&E<m.length;){var F=p[S],b=m[E];F<b?S++:F>b?E++:F===b&&(x=C(x,A(h[S],g[E])),S++,E++)}return x}});function s(u,d){var m,g,p=f(u),h=f(d);if(1===p.length)m=p[0];else{if(2!==p.length||1!==p[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");m=p[0]}if(1===h.length)g=h[0];else{if(2!==h.length||1!==h[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");g=h[0]}if(m!==g)throw new RangeError("Vectors must have equal length ("+m+" != "+g+")");if(0===m)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function f(u){return Ht(u)?u.size():a(u)}}),Ph="multiply",eF=ne(Ph,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],n=>{var{typed:i,matrix:e,addScalar:r,multiplyScalar:o,equalScalar:a,dot:s}=n,l=nr({typed:i,equalScalar:a}),c=cn({typed:i});function f(F,b){switch(F.length){case 1:switch(b.length){case 1:if(F[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(F[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+F[0]+") must match Matrix rows ("+b[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)")}break;case 2:switch(b.length){case 1:if(F[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+F[1]+") must match Vector length ("+b[0]+")");break;case 2:if(F[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+F[1]+") must match Matrix B rows ("+b[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+F.length+" dimensions)")}}var h=i("_multiplyMatrixVector",{"DenseMatrix, any":function(F,b){var ae,k=F._data,U=F._size,R=F._datatype,T=b._data,H=b._datatype,K=U[0],te=U[1],ge=r,ue=o;R&&H&&R===H&&"string"==typeof R&&(ge=i.find(r,[ae=R,ae]),ue=i.find(o,[ae,ae]));for(var G=[],we=0;we<K;we++){for(var P=k[we],fe=ue(P[0],T[0]),De=1;De<te;De++)fe=ge(fe,ue(P[De],T[De]));G[we]=fe}return F.createDenseMatrix({data:G,size:[K],datatype:ae})},"SparseMatrix, any":function(F,b){var k=F._values,U=F._index,R=F._ptr,T=F._datatype;if(!k)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var we,H=b._data,K=b._datatype,te=F._size[0],ae=b._size[0],ge=[],ue=[],G=[],P=r,fe=o,De=a,Ge=0;T&&K&&T===K&&"string"==typeof T&&(P=i.find(r,[we=T,we]),fe=i.find(o,[we,we]),De=i.find(a,[we,we]),Ge=i.convert(0,we));var _e=[],Ie=[];G[0]=0;for(var $e=0;$e<ae;$e++){var Le=H[$e];if(!De(Le,Ge))for(var rt=R[$e+1],ct=R[$e];ct<rt;ct++){var We=U[ct];Ie[We]?_e[We]=P(_e[We],fe(Le,k[ct])):(Ie[We]=!0,ue.push(We),_e[We]=fe(Le,k[ct]))}}for(var jt=ue.length,Et=0;Et<jt;Et++)ge[Et]=_e[ue[Et]];return G[1]=ue.length,F.createSparseMatrix({values:ge,index:ue,ptr:G,size:[te,1],datatype:we})}}),m=i("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(F,b){var ue,k=F._data,U=F._size,R=F._datatype,T=b._data,K=b._datatype,te=U[0],ae=U[1],ge=b._size[1],G=r,we=o;R&&K&&R===K&&"string"==typeof R&&(G=i.find(r,[ue=R,ue]),we=i.find(o,[ue,ue]));for(var P=[],fe=0;fe<te;fe++){var De=k[fe];P[fe]=[];for(var Ge=0;Ge<ge;Ge++){for(var _e=we(De[0],T[0][Ge]),Ie=1;Ie<ae;Ie++)_e=G(_e,we(De[Ie],T[Ie][Ge]));P[fe][Ge]=_e}}return F.createDenseMatrix({data:P,size:[te,ge],datatype:ue})},"DenseMatrix, SparseMatrix":function(F,b){var k=F._data,U=F._size,R=F._datatype,T=b._values,H=b._index,K=b._ptr,te=b._size,ae=b._datatype;if(!T)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var G,ge=U[0],ue=te[1],we=r,P=o,fe=a,De=0;R&&ae&&R===ae&&"string"==typeof R&&(we=i.find(r,[G=R,G]),P=i.find(o,[G,G]),fe=i.find(a,[G,G]),De=i.convert(0,G));for(var Ge=[],_e=[],Ie=[],$e=b.createSparseMatrix({values:Ge,index:_e,ptr:Ie,size:[ge,ue],datatype:G}),Le=0;Le<ue;Le++){Ie[Le]=_e.length;var Je=K[Le],rt=K[Le+1];if(rt>Je)for(var ct=0,We=0;We<ge;We++){for(var jt=We+1,Et=void 0,ft=Je;ft<rt;ft++){var It=H[ft];ct!==jt?(Et=P(k[We][It],T[ft]),ct=jt):Et=we(Et,P(k[We][It],T[ft]))}ct===jt&&!fe(Et,De)&&(_e.push(We),Ge.push(Et))}}return Ie[ue]=_e.length,$e},"SparseMatrix, DenseMatrix":function(F,b){var k=F._values,U=F._index,R=F._ptr,T=F._datatype;if(!k)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var ue,H=b._data,K=b._datatype,te=F._size[0],ae=b._size[0],ge=b._size[1],G=r,we=o,P=a,fe=0;T&&K&&T===K&&"string"==typeof T&&(G=i.find(r,[ue=T,ue]),we=i.find(o,[ue,ue]),P=i.find(a,[ue,ue]),fe=i.convert(0,ue));for(var De=[],Ge=[],_e=[],Ie=F.createSparseMatrix({values:De,index:Ge,ptr:_e,size:[te,ge],datatype:ue}),$e=[],Le=[],Je=0;Je<ge;Je++){_e[Je]=Ge.length;for(var rt=Je+1,ct=0;ct<ae;ct++){var We=H[ct][Je];if(!P(We,fe))for(var Et=R[ct+1],ft=R[ct];ft<Et;ft++){var It=U[ft];Le[It]!==rt?(Le[It]=rt,Ge.push(It),$e[It]=we(We,k[ft])):$e[It]=G($e[It],we(We,k[ft]))}}for(var se=Ge.length,ze=_e[Je];ze<se;ze++)De[ze]=$e[Ge[ze]]}return _e[ge]=Ge.length,Ie},"SparseMatrix, SparseMatrix":function(F,b){var we,k=F._values,U=F._index,R=F._ptr,T=F._datatype,H=b._values,K=b._index,te=b._ptr,ae=b._datatype,ge=F._size[0],ue=b._size[1],G=k&&H,P=r,fe=o;T&&ae&&T===ae&&"string"==typeof T&&(P=i.find(r,[we=T,we]),fe=i.find(o,[we,we]));for(var Je,ct,We,Et,ft,It,De=G?[]:void 0,Ge=[],_e=[],Ie=F.createSparseMatrix({values:De,index:Ge,ptr:_e,size:[ge,ue],datatype:we}),$e=G?[]:void 0,Le=[],Q=0;Q<ue;Q++){_e[Q]=Ge.length;var se=Q+1;for(Et=te[Q+1],We=te[Q];We<Et;We++)if(It=K[We],G)for(ct=R[It+1],Je=R[It];Je<ct;Je++)Le[ft=U[Je]]!==se?(Le[ft]=se,Ge.push(ft),$e[ft]=fe(H[We],k[Je])):$e[ft]=P($e[ft],fe(H[We],k[Je]));else for(ct=R[It+1],Je=R[It];Je<ct;Je++)Le[ft=U[Je]]!==se&&(Le[ft]=se,Ge.push(ft));if(G)for(var Re=Ge.length,nt=_e[Q];nt<Re;nt++)De[nt]=$e[Ge[nt]]}return _e[ue]=Ge.length,Ie}});return i(Ph,Rl({"Array, Array":function(b,k){f(ln(b),ln(k));var U=this(e(b),e(k));return Ht(U)?U.valueOf():U},"Matrix, Matrix":function(b,k){var U=b.size(),R=k.size();return f(U,R),1===U.length?1===R.length?function(F,b,k){if(0===k)throw new Error("Cannot multiply two empty vectors");return s(F,b)}(b,k,U[0]):function(F,b){if("dense"!==b.storage())throw new Error("Support for SparseMatrix not implemented");return function(F,b){var ge,k=F._data,R=F._datatype,T=b._data,K=b._datatype,te=F._size[0],ae=b._size[1],ue=r,G=o;R&&K&&R===K&&"string"==typeof R&&(ue=i.find(r,[ge=R,ge]),G=i.find(o,[ge,ge]));for(var we=[],P=0;P<ae;P++){for(var fe=G(k[0],T[0][P]),De=1;De<te;De++)fe=ue(fe,G(k[De],T[De][P]));we[P]=fe}return F.createDenseMatrix({data:we,size:[ae],datatype:ge})}(F,b)}(b,k):1===R.length?h(b,k):m(b,k)},"Matrix, Array":function(b,k){return this(b,e(k))},"Array, Matrix":function(b,k){return this(e(b,k.storage()),k)},"SparseMatrix, any":function(b,k){return l(b,k,o,!1)},"DenseMatrix, any":function(b,k){return c(b,k,o,!1)},"any, SparseMatrix":function(b,k){return l(k,b,o,!0)},"any, DenseMatrix":function(b,k){return c(k,b,o,!0)},"Array, any":function(b,k){return c(e(b),k,o,!1).valueOf()},"any, Array":function(b,k){return c(e(k),b,o,!0).valueOf()},"any, any":o,"any, any, ...any":function(b,k,U){for(var R=this(b,k),T=0;T<U.length;T++)R=this(R,U[T]);return R}},o.signatures))});function Bo(n,i,e,r){if(!(this instanceof Bo))throw new SyntaxError("Constructor must be called with the new operator");this.fn=n,this.count=i,this.min=e,this.max=r,this.message="Wrong number of arguments in function "+n+" ("+i+" provided, "+e+(null!=r?"-"+r:"")+" expected)",this.stack=(new Error).stack}(Bo.prototype=new Error).constructor=Error,Bo.prototype.name="ArgumentsError",Bo.prototype.isArgumentsError=!0,I(5555);var eA=ne("bignumber",["typed","BigNumber"],n=>{var{typed:i,BigNumber:e}=n;return i("bignumber",{"":function(){return new e(0)},number:function(o){return new e(o+"")},string:function(o){var a=o.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var s=a[2],l=e(a[1]),c=new e(2).pow(Number(s));if(l.gt(c.sub(1)))throw new SyntaxError('String "'.concat(o,'" is out of range'));var f=new e(2).pow(Number(s)-1);return l.gte(f)?l.sub(c):l}return new e(o)},BigNumber:function(o){return o},Fraction:function(o){return new e(o.n).div(o.d).times(o.s)},null:function(o){return new e(0)},"Array | Matrix":function(o){return bt(o,this)}})}),mA=ne("numeric",["number","?bignumber","?fraction"],n=>{var{number:i,bignumber:e,fraction:r}=n,o={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:s=>i(s),BigNumber:e?s=>e(s):uh,Fraction:r?s=>r(s):WD};return function(l,c){var f=Un(l);if(!(f in o))throw new TypeError("Cannot convert "+l+' of type "'+f+'"; valid input types are '+Object.keys(o).join(", "));if(!(c in a))throw new TypeError("Cannot convert "+l+' to type "'+c+'"; valid output types are '+Object.keys(a).join(", "));return c===f?l:a[c](l)}}),Cg="subtract",UA=ne(Cg,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],n=>{var{typed:i,matrix:e,equalScalar:r,addScalar:o,unaryMinus:a,DenseMatrix:s}=n,l=Li({typed:i}),c=fr({typed:i}),f=ys({typed:i,equalScalar:r}),u=oo({typed:i,DenseMatrix:s}),d=Cn({typed:i}),p=cn({typed:i});return i(Cg,{"number, number":function(m,g){return m-g},"Complex, Complex":function(m,g){return m.sub(g)},"BigNumber, BigNumber":function(m,g){return m.minus(g)},"Fraction, Fraction":function(m,g){return m.sub(g)},"Unit, Unit":function(m,g){if(null===m.value)throw new Error("Parameter x contains a unit with undefined value");if(null===g.value)throw new Error("Parameter y contains a unit with undefined value");if(!m.equalBase(g))throw new Error("Units do not match");var x=m.clone();return x.value=this(x.value,g.value),x.fixPrefix=!1,x},"SparseMatrix, SparseMatrix":function(m,g){return Ms(m,g),f(m,g,this)},"SparseMatrix, DenseMatrix":function(m,g){return Ms(m,g),c(g,m,this,!0)},"DenseMatrix, SparseMatrix":function(m,g){return Ms(m,g),l(m,g,this,!1)},"DenseMatrix, DenseMatrix":function(m,g){return Ms(m,g),d(m,g,this)},"Array, Array":function(m,g){return this(e(m),e(g)).valueOf()},"Array, Matrix":function(m,g){return this(e(m),g)},"Matrix, Array":function(m,g){return this(m,e(g))},"SparseMatrix, any":function(m,g){return u(m,a(g),o)},"DenseMatrix, any":function(m,g){return p(m,g,this)},"any, SparseMatrix":function(m,g){return u(g,m,this,!0)},"any, DenseMatrix":function(m,g){return p(g,m,this,!0)},"Array, any":function(m,g){return p(e(m),g,this,!1).valueOf()},"any, Array":function(m,g){return p(e(g),m,this,!0).valueOf()}})});function Ms(n,i){var e=n.size(),r=i.size();if(e.length!==r.length)throw new Zt(e.length,r.length)}var jg=(ne("equal",["typed","equalScalar"],n=>{var{typed:i,equalScalar:e}=n;return i("equal",{"any, any":function(o,a){return null===o?null===a:null===a?null===o:void 0===o?void 0===a:void 0===a?void 0===o:e(o,a)}})}),"divideScalar"),C2=ne(jg,["typed","numeric"],n=>{var{typed:i,numeric:e}=n;return i(jg,{"number, number":function(o,a){return o/a},"Complex, Complex":function(o,a){return o.div(a)},"BigNumber, BigNumber":function(o,a){return o.div(a)},"Fraction, Fraction":function(o,a){return o.div(a)},"Unit, number | Fraction | BigNumber":function(o,a){var s=o.clone(),l=e(1,Un(a));return s.value=this(null===s.value?s._normalize(l):s.value,a),s},"number | Fraction | BigNumber, Unit":function(o,a){var s=a.clone();s=s.pow(-1);var l=e(1,Un(o));return s.value=this(o,null===a.value?a._normalize(l):a.value),s},"Unit, Unit":function(o,a){return o.divide(a)}})}),N2=ne("Spa",["addScalar","equalScalar","FibonacciHeap"],n=>{var{addScalar:i,equalScalar:e,FibonacciHeap:r}=n;function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return o.prototype.type="Spa",o.prototype.isSpa=!0,o.prototype.set=function(a,s){if(this._values[a])this._values[a].value=s;else{var l=this._heap.insert(a,s);this._values[a]=l}},o.prototype.get=function(a){var s=this._values[a];return s?s.value:0},o.prototype.accumulate=function(a,s){var l=this._values[a];l?l.value=i(l.value,s):(l=this._heap.insert(a,s),this._values[a]=l)},o.prototype.forEach=function(a,s,l){var c=this._heap,f=this._values,u=[],d=c.extractMinimum();for(d&&u.push(d);d&&d.key<=s;)d.key>=a&&(e(d.value,0)||l(d.key,d.value,this)),(d=c.extractMinimum())&&u.push(d);for(var p=0;p<u.length;p++){var h=u[p];f[(d=c.insert(h.key,h.value)).key]=d}},o.prototype.swap=function(a,s){var l=this._values[a],c=this._values[s];if(!l&&c)l=this._heap.insert(a,c.value),this._heap.remove(c),this._values[a]=l,this._values[s]=void 0;else if(l&&!c)c=this._heap.insert(s,l.value),this._heap.remove(l),this._values[s]=c,this._values[a]=void 0;else if(l&&c){var f=l.value;l.value=c.value,c.value=f}},o},{isClass:!0}),O2=ne("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],n=>{var{typed:i,matrix:e,abs:r,addScalar:o,divideScalar:a,multiplyScalar:s,subtract:l,larger:c,equalScalar:f,unaryMinus:u,DenseMatrix:d,SparseMatrix:p,Spa:h}=n;return i("lup",{DenseMatrix:function(C){return m(C)},SparseMatrix:function(C){return function(x){var ge,ue,G,C=x._size[0],A=x._size[1],S=Math.min(C,A),E=x._values,F=x._index,b=x._ptr,k=[],U=[],R=[],T=[C,S],H=[],K=[],te=[],ae=[S,A],we=[],P=[];for(ge=0;ge<C;ge++)we[ge]=ge,P[ge]=ge;var De=function(){var _e=new h;ue<C&&(R.push(k.length),k.push(1),U.push(ue)),te.push(H.length);var $e=b[ue+1];for(G=b[ue];G<$e;G++)_e.set(we[ge=F[G]],E[G]);ue>0&&_e.forEach(0,ue-1,function(ct,We){p._forEachRow(ct,k,U,R,function(jt,Et){jt>ct&&_e.accumulate(jt,u(s(Et,We)))})});var Le=ue,Je=_e.get(ue),rt=r(Je);_e.forEach(ue+1,C-1,function(ct,We){var jt=r(We);c(jt,rt)&&(Le=ct,rt=jt,Je=We)}),ue!==Le&&(p._swapRows(ue,Le,T[1],k,U,R),p._swapRows(ue,Le,ae[1],H,K,te),_e.swap(ue,Le),function(_e,Ie){var $e=P[_e],Le=P[Ie];we[$e]=Ie,we[Le]=_e,P[_e]=Le,P[Ie]=$e}(ue,Le)),_e.forEach(0,C-1,function(ct,We){ct<=ue?(H.push(We),K.push(ct)):(We=a(We,Je),f(We,0)||(k.push(We),U.push(ct)))})};for(ue=0;ue<A;ue++)De();return te.push(H.length),R.push(k.length),{L:new p({values:k,index:U,ptr:R,size:T}),U:new p({values:H,index:K,ptr:te,size:ae}),p:we,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(C)},Array:function(C){var S=m(e(C));return{L:S.L.valueOf(),U:S.U.valueOf(),p:S.p}}});function m(x){var R,T,H,C=x._size[0],A=x._size[1],S=Math.min(C,A),E=Ot(x._data),F=[],b=[C,S],k=[],U=[S,A],K=[];for(R=0;R<C;R++)K[R]=R;for(T=0;T<A;T++){if(T>0)for(R=0;R<C;R++){var te=Math.min(R,T),ae=0;for(H=0;H<te;H++)ae=o(ae,s(E[R][H],E[H][T]));E[R][T]=l(E[R][T],ae)}var ge=T,ue=0,G=0;for(R=T;R<C;R++){var we=E[R][T],P=r(we);c(P,ue)&&(ge=R,ue=P,G=we)}if(T!==ge&&(K[T]=[K[ge],K[ge]=K[T]][0],d._swapRows(T,ge,E)),T<C)for(R=T+1;R<C;R++)f(E[R][T],0)||(E[R][T]=a(E[R][T],G))}for(T=0;T<A;T++)for(R=0;R<C;R++)0===T&&(R<A&&(k[R]=[]),F[R]=[]),R<T?(R<A&&(k[R][T]=E[R][T]),T<C&&(F[R][T]=0)):R!==T?(R<A&&(k[R][T]=0),T<C&&(F[R][T]=E[R][T])):(R<A&&(k[R][T]=E[R][T]),T<C&&(F[R][T]=1));var De=new d({data:F,size:b}),Ge=new d({data:k,size:U}),_e=[];for(R=0,S=K.length;R<S;R++)_e[K[R]]=R;return{L:De,U:Ge,p:_e,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}),sN=ne("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],n=>{var{typed:i,matrix:e,subtract:r,multiply:o,unaryMinus:a,lup:s}=n;return i("det",{any:function(f){return Ot(f)},"Array | Matrix":function(f){var u;switch((u=Ht(f)?f.size():Array.isArray(f)?(f=e(f)).size():[]).length){case 0:return Ot(f);case 1:if(1===u[0])return Ot(f.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+en(u)+")");case 2:var d=u[0];if(d===u[1])return function(c,f,u){if(1===f)return Ot(c[0][0]);if(2===f)return r(o(c[0][0],c[1][1]),o(c[1][0],c[0][1]));for(var d=s(c),p=d.U[0][0],h=1;h<f;h++)p=o(p,d.U[h][h]);for(var m=0,g=0,x=[];;){for(;x[g];)g++;if(g>=f)break;for(var C=g,A=0;!x[d.p[C]];)x[d.p[C]]=!0,C=d.p[C],A++;A%2==0&&m++}return m%2==0?p:a(p)}(f.clone().valueOf(),d);throw new RangeError("Matrix must be square (size: "+en(u)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+en(u)+")")}}})}),DN=ne("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],n=>{var{typed:i,matrix:e,divideScalar:r,addScalar:o,multiply:a,unaryMinus:s,det:l,identity:c,abs:f}=n;return i("inv",{"Array | Matrix":function(p){var h=Ht(p)?p.size():ln(p);switch(h.length){case 1:if(1===h[0])return Ht(p)?e([r(1,p.valueOf()[0])]):[r(1,p[0])];throw new RangeError("Matrix must be square (size: "+en(h)+")");case 2:var m=h[0],g=h[1];if(m===g)return Ht(p)?e(u(p.valueOf(),m,g),p.storage()):u(p,m,g);throw new RangeError("Matrix must be square (size: "+en(h)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+en(h)+")")}},any:function(p){return r(1,p)}});function u(d,p,h){var m,g,x,C,A;if(1===p){if(0===(C=d[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,C)]]}if(2===p){var S=l(d);if(0===S)throw Error("Cannot calculate inverse, determinant is zero");return[[r(d[1][1],S),r(s(d[0][1]),S)],[r(s(d[1][0]),S),r(d[0][0],S)]]}var E=d.concat();for(m=0;m<p;m++)E[m]=E[m].concat();for(var F=c(p).valueOf(),b=0;b<h;b++){var k=f(E[b][b]),U=b;for(m=b+1;m<p;)f(E[m][b])>k&&(k=f(E[m][b]),U=m),m++;if(0===k)throw Error("Cannot calculate inverse, determinant is zero");(m=U)!==b&&(A=E[b],E[b]=E[m],E[m]=A,A=F[b],F[b]=F[m],F[m]=A);var R=E[b],T=F[b];for(m=0;m<p;m++){var H=E[m],K=F[m];if(m!==b){if(0!==H[b]){for(x=r(s(H[b]),R[b]),g=b;g<h;g++)H[g]=o(H[g],a(x,R[g]));for(g=0;g<h;g++)K[g]=o(K[g],a(x,T[g]))}}else{for(x=R[b],g=b;g<h;g++)H[g]=r(H[g],x);for(g=0;g<h;g++)K[g]=r(K[g],x)}}}return F}}),TN=ne("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],n=>{var{typed:i,matrix:e,multiply:r,equalScalar:o,divideScalar:a,inv:s}=n,l=nr({typed:i,equalScalar:o}),c=cn({typed:i});return i("divide",Rl({"Array | Matrix, Array | Matrix":function(u,d){return r(u,s(d))},"DenseMatrix, any":function(u,d){return c(u,d,a,!1)},"SparseMatrix, any":function(u,d){return l(u,d,a,!1)},"Array, any":function(u,d){return c(e(u),d,a,!1).valueOf()},"any, Array | Matrix":function(u,d){return r(u,s(d))}},a.signatures))}),jn=M1({}),ot=Y1({config:Xe}),oc=nC({}),ko=iS({}),Qt=hS({Matrix:oc}),ve=MS({BigNumber:ot,Complex:jn,DenseMatrix:Qt,Fraction:ko}),un=OS({config:Xe,typed:ve}),Ma=US({typed:ve}),zn=mx({typed:ve}),Sv=iE({Fraction:ko,typed:ve}),Bi=aE({typed:ve}),Jn=lE({typed:ve}),xs=vE({typed:ve}),Pi=WE({Matrix:oc,equalScalar:un,typed:ve}),gt=HE({DenseMatrix:Qt,Matrix:oc,SparseMatrix:Pi,typed:ve}),jr=qE({typed:ve}),Sa=kD({BigNumber:ot,DenseMatrix:Qt,SparseMatrix:Pi,config:Xe,matrix:gt,typed:ve}),vr=HD({matrix:gt,config:Xe,typed:ve}),ws=iI({BigNumber:ot,DenseMatrix:Qt,equalScalar:un,matrix:gt,typed:ve,zeros:eI({BigNumber:ot,config:Xe,matrix:gt,typed:ve})}),ki=vI({DenseMatrix:Qt,config:Xe,matrix:gt,typed:ve}),hi=yI({DenseMatrix:Qt,config:Xe,matrix:gt,typed:ve}),LT=DI({larger:hi,smaller:ki}),rr=eF({addScalar:Jn,dot:VI({addScalar:Jn,conj:xs,multiplyScalar:zn,size:vr,typed:ve}),equalScalar:un,matrix:gt,multiplyScalar:zn,typed:ve}),Ea=mA({bignumber:eA({BigNumber:ot,typed:ve}),fraction:Sv,number:Ma}),Qn=UA({DenseMatrix:Qt,addScalar:Jn,equalScalar:un,matrix:gt,typed:ve,unaryMinus:Bi}),Gn=C2({numeric:Ea,typed:ve}),Vo=TN({divideScalar:Gn,equalScalar:un,inv:DN({abs:jr,addScalar:Jn,det:sN({lup:O2({DenseMatrix:Qt,Spa:N2({FibonacciHeap:LT,addScalar:Jn,equalScalar:un}),SparseMatrix:Pi,abs:jr,addScalar:Jn,divideScalar:Gn,equalScalar:un,larger:hi,matrix:gt,multiplyScalar:zn,subtract:Qn,typed:ve,unaryMinus:Bi}),matrix:gt,multiply:rr,subtract:Qn,typed:ve,unaryMinus:Bi}),divideScalar:Gn,identity:Sa,matrix:gt,multiply:rr,typed:ve,unaryMinus:Bi}),matrix:gt,multiply:rr,typed:ve}),Vn=I(3227),Xt=I(4562);function lL(n,i){}const Fs=()=>{const n="undefined"!=typeof window?window:void 0;return n&&n.tinymce?n.tinymce:null};let cL=(()=>{class n{constructor(){this.onBeforePaste=new t.EventEmitter,this.onBlur=new t.EventEmitter,this.onClick=new t.EventEmitter,this.onContextMenu=new t.EventEmitter,this.onCopy=new t.EventEmitter,this.onCut=new t.EventEmitter,this.onDblclick=new t.EventEmitter,this.onDrag=new t.EventEmitter,this.onDragDrop=new t.EventEmitter,this.onDragEnd=new t.EventEmitter,this.onDragGesture=new t.EventEmitter,this.onDragOver=new t.EventEmitter,this.onDrop=new t.EventEmitter,this.onFocus=new t.EventEmitter,this.onFocusIn=new t.EventEmitter,this.onFocusOut=new t.EventEmitter,this.onKeyDown=new t.EventEmitter,this.onKeyPress=new t.EventEmitter,this.onKeyUp=new t.EventEmitter,this.onMouseDown=new t.EventEmitter,this.onMouseEnter=new t.EventEmitter,this.onMouseLeave=new t.EventEmitter,this.onMouseMove=new t.EventEmitter,this.onMouseOut=new t.EventEmitter,this.onMouseOver=new t.EventEmitter,this.onMouseUp=new t.EventEmitter,this.onPaste=new t.EventEmitter,this.onSelectionChange=new t.EventEmitter,this.onActivate=new t.EventEmitter,this.onAddUndo=new t.EventEmitter,this.onBeforeAddUndo=new t.EventEmitter,this.onBeforeExecCommand=new t.EventEmitter,this.onBeforeGetContent=new t.EventEmitter,this.onBeforeRenderUI=new t.EventEmitter,this.onBeforeSetContent=new t.EventEmitter,this.onChange=new t.EventEmitter,this.onClearUndos=new t.EventEmitter,this.onDeactivate=new t.EventEmitter,this.onDirty=new t.EventEmitter,this.onExecCommand=new t.EventEmitter,this.onGetContent=new t.EventEmitter,this.onHide=new t.EventEmitter,this.onInit=new t.EventEmitter,this.onInitNgModel=new t.EventEmitter,this.onLoadContent=new t.EventEmitter,this.onNodeChange=new t.EventEmitter,this.onPostProcess=new t.EventEmitter,this.onPostRender=new t.EventEmitter,this.onPreInit=new t.EventEmitter,this.onPreProcess=new t.EventEmitter,this.onProgressState=new t.EventEmitter,this.onRedo=new t.EventEmitter,this.onRemove=new t.EventEmitter,this.onReset=new t.EventEmitter,this.onResizeEditor=new t.EventEmitter,this.onSaveContent=new t.EventEmitter,this.onSetAttrib=new t.EventEmitter,this.onObjectResizeStart=new t.EventEmitter,this.onObjectResized=new t.EventEmitter,this.onObjectSelected=new t.EventEmitter,this.onSetContent=new t.EventEmitter,this.onShow=new t.EventEmitter,this.onSubmit=new t.EventEmitter,this.onUndo=new t.EventEmitter,this.onVisualAid=new t.EventEmitter}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.\u0275\u0275defineDirective({type:n,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),n})();const Ov=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],jv=(n,i)=>"string"==typeof n?n.split(",").map(e=>e.trim()):Array.isArray(n)?n:i;let Bv=0;const Pv=n=>{const e=(new Date).getTime(),r=Math.floor(1e9*Math.random());return Bv++,n+"_"+r+Bv+String(e)},kv=n=>void 0!==n&&"textarea"===n.tagName.toLowerCase(),Uv=n=>void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" "),fL=(n,i)=>Uv(n).concat(Uv(i)),pL=()=>{},Vv=n=>null==n,$v=()=>({listeners:[],scriptId:Pv("tiny-script"),scriptLoaded:!1}),hL=(()=>{let n=$v();return{load:(o,a,s)=>{n.scriptLoaded?s():(n.listeners.push(s),o.getElementById(n.scriptId)||((o,a,s,l)=>{const c=a.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=o,c.src=s;const f=()=>{c.removeEventListener("load",f),n.listeners.forEach(l=>l()),n.scriptLoaded=!0};c.addEventListener("load",f),a.head&&a.head.appendChild(c)})(n.scriptId,o,a))},reinitialize:()=>{n=$v()}}})(),pc=new t.InjectionToken("TINYMCE_SCRIPT_SRC"),gL={provide:y.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>mc),multi:!0};let mc=(()=>{class n extends cL{constructor(e,r,o,a){super(),this.platformId=o,this.tinymceScriptSrc=a,this.cloudChannel="5",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=pL,this._elementRef=e,this.ngZone=r,this.initialise=this.initialise.bind(this)}set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&this._editor.setMode(e?"readonly":"design")}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(Vv(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this._editor?this._editor.setMode(e?"readonly":"design"):e&&(this.init=Object.assign(Object.assign({},this.init),{readonly:!0}))}ngAfterViewInit(){var e;(0,_.isPlatformBrowser)(this.platformId)&&(this.id=this.id||Pv("tiny-angular"),this.inline=void 0!==this.inline?!1!==this.inline:!!(null===(e=this.init)||void 0===e?void 0:e.inline),this.createElement(),null!==Fs()?this.initialise():this._element&&this._element.ownerDocument&&hL.load(this._element.ownerDocument,this.getScriptSrc(),this.initialise.bind(this)))}ngOnDestroy(){null!==Fs()&&Fs().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,kv(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise(){const e=Object.assign(Object.assign({},this.init),{target:this._element,inline:this.inline,readonly:this.disabled,plugins:fL(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:r=>{this._editor=r,r.on("init",o=>{this.initEditor(r)}),((n,i)=>{(n=>{const i=jv(n.ignoreEvents,[]);return jv(n.allowedEvents,Ov).filter(r=>Ov.includes(r)&&!i.includes(r))})(n).forEach(r=>{const o=n[r];i.on(r.substring(2),a=>n.ngZone.run(()=>o.emit({event:a,editor:i})))})})(this,r),this.init&&"function"==typeof this.init.setup&&this.init.setup(r)}});kv(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{Fs().init(e)})}getScriptSrc(){return Vv(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){e.on("blur",()=>this.ngZone.run(()=>this.onTouchedCallback())),e.on(this.modelEvents,()=>this.ngZone.run(()=>this.emitOnChange(e))),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(t.PLATFORM_ID),t.\u0275\u0275directiveInject(pc,8))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",id:"id",modelEvents:"modelEvents",disabled:"disabled",initialValue:"initialValue",init:"init",inline:"inline",outputFormat:"outputFormat",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents"},features:[t.\u0275\u0275ProvidersFeature([gL]),t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,template:function(e,r){1&e&&t.\u0275\u0275template(0,lL,0,0,"ng-template")},styles:["[_nghost-%COMP%] { display: block; }"]}),n})(),zv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule]]}),n})();var Gv=I(6539),Da=I(7376),ii=I(2445),Wv=I(2064),As=I(9370),vL=I(4604),_L=I(4960),Hr=I(8383);const Kv={},Hv={};let Zv=!1;function CL(n){return(0,B.mG)(this,void 0,void 0,function*(){return n.remoteEntry&&(yield function(n,i){return new Promise((e,r)=>{if(Kv[n])return void e();const o=document.createElement("script");o.src=n,o.onerror=r,o.onload=()=>{(function(n){(0,B.mG)(this,void 0,void 0,function*(){const i=window[n];return Hv[n]||(Zv||(yield I.I("default"),Zv=!0),yield i.init(I.S.default),Hv[n]=!0),i})})(i),Kv[n]=!0,e()},document.body.appendChild(o)})}(n.remoteEntry,n.remoteName)),yield function(n,i){return(0,B.mG)(this,void 0,void 0,function*(){return(yield window[n].get(i))()})}(n.remoteName,n.exposedModule)})}var qv=I(1211);function SL(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",15),t.\u0275\u0275elementStart(1,"a",16),t.\u0275\u0275element(2,"scrm-image",17),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",e.route),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",r.appListStrings.moduleList&&r.appListStrings.moduleList[e.label]," ")}}function xL(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275elementStart(1,"div",2),t.\u0275\u0275elementStart(2,"form",3),t.\u0275\u0275elementStart(3,"div",4),t.\u0275\u0275elementStart(4,"input",5),t.\u0275\u0275listener("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().searchTerm=o}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",6),t.\u0275\u0275elementStart(6,"button",7),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().search()}),t.\u0275\u0275element(7,"scrm-image",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",9),t.\u0275\u0275elementStart(9,"div",10),t.\u0275\u0275elementStart(10,"div",11),t.\u0275\u0275elementStart(11,"button",12),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"ul",13),t.\u0275\u0275template(14,SL,4,2,"li",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate1("placeholder","",e.appStrings.LBL_SEARCH||"","..."),t.\u0275\u0275property("ngModel",r.searchTerm),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_NEW||""," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",r.actionBar.createLinks)}}function wL(n,i){if(1&n&&t.\u0275\u0275element(0,"svg-icon",3),2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("name",e.name),t.\u0275\u0275property("svgClass",r.klass||"")("title",r.title||"")}}function EL(n,i){if(1&n&&t.\u0275\u0275element(0,"img",4),2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMap(r.klass),t.\u0275\u0275propertyInterpolate("src",e.path,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275property("title",r.title||"")}}function DL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,wL,1,3,"svg-icon",1),t.\u0275\u0275template(2,EL,1,5,"img",2),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","svg"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","svg"!==e.type)}}function IL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,DL,3,2,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.getImage(e,r.image))}}function FL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-button-group",2),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config$",e.config$)}}function AL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,FL,1,1,"scrm-button-group",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("",e.klass," float-right"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config$)}}function NL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-image",7),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")}}function TL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.config.label," ")}}function LL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",8),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.config.labelKey)}}function RL(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-image",7),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("image",e.icon)("klass",e.iconKlass||"")}}function OL(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",9),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext(),s=t.\u0275\u0275reference(1);return o&&a.click(o.onClick,s)}),t.\u0275\u0275elementStart(2,"div",10),t.\u0275\u0275template(3,RL,2,2,"div",4),t.\u0275\u0275elementStart(4,"div",11),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e&&e.klass),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e&&e.label," ")}}function jL(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"scrm-dropdown-submenu",12),t.\u0275\u0275listener("item-clicked",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2),a=t.\u0275\u0275reference(1);return o.close(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e)}}function BL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,OL,6,3,"ng-container",4),t.\u0275\u0275template(2,jL,2,1,"ng-container",4),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&!r.isDropdown(e)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&r.isDropdown(e))}}const hc=["*"];function PL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-image",5),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("image",e.item.icon)}}function kL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-image",5),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("image",e.icon)}}function UL(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",9),t.\u0275\u0275elementStart(1,"a",10),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(2).click(a)}),t.\u0275\u0275template(2,kL,1,1,"scrm-image",2),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e&&e.klass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e&&e.label," ")}}function VL(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275elementStart(1,"ul",7),t.\u0275\u0275template(2,UL,4,3,"li",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngbCollapse",e.isCollapsed),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.item.items)}}function $L(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.labelKey,e.module)," ")}}function zL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.language.getListLabel(e.listKey,e.labelKey)," ")}}function GL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,$L,2,1,"ng-container",0),t.\u0275\u0275template(2,zL,2,1,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.listKey&&e.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.listKey&&e.labelKey)}}function WL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-image",3),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")("title",e.language.getFieldLabel(e.config.titleKey||""))}}function KL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-label",4),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("labelKey",e.config.labelKey)}}function HL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-button",4),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("config",e)}}function ZL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-dropdown-button",4),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("config",e)}}function qL(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,HL,1,1,"scrm-button",3),t.\u0275\u0275template(2,ZL,1,1,"scrm-dropdown-button",3),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&!r.isDropdown(e)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&r.isDropdown(e))}}function JL(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-dropdown-button",5),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.dropdownConfig)}}function QL(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,qL,3,2,"ng-container",1),t.\u0275\u0275template(2,JL,1,1,"scrm-dropdown-button",2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.buttons.expanded),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.buttons.collapsed.length)}}function XL(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275elementStart(1,"div",2),t.\u0275\u0275elementStart(2,"button",3),t.\u0275\u0275elementStart(3,"label",4),t.\u0275\u0275elementStart(4,"input",5),t.\u0275\u0275listener("change",function(){const a=t.\u0275\u0275restoreView(e).ngIf;return t.\u0275\u0275nextContext().toggleSelection(a.status)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"span",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"span",7),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",8),t.\u0275\u0275elementStart(9,"a",9),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().selectAll()}),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"a",10),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().selectPage()}),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"a",11),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().deselectAll()}),t.\u0275\u0275text(14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(15,"scrm-dropdown-button",12),t.\u0275\u0275elementEnd()}if(2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("checked",r.checked(e.status))("indeterminate",r.intermediate(e.status)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate2("",e.count>0&&e.appStrings.LBL_LISTVIEW_SELECTED_OBJECTS||""," ",e.count>0?e.count:"",""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LISTVIEW_OPTION_ENTIRE||""," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LISTVIEW_OPTION_CURRENT||""," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LISTVIEW_NONE||""," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("disabled",e.count<1)("config",r.getDropdownConfig(e.actions,e.appStrings))}}function YL(n,i){1&n&&t.\u0275\u0275element(0,"scrm-chart-message-area",2)}function eR(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ngx-charts-pie-grid",3),t.\u0275\u0275listener("resize",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onResize()},!1,t.\u0275\u0275resolveWindow),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("animations",!1)("view",e.view)("scheme",e.scheme)("label",e.language.getFieldLabel(e.label))("results",e.results)}}function tR(n,i){1&n&&t.\u0275\u0275element(0,"scrm-chart-message-area",2)}function nR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()),2&n){const e=i.model,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(r.formatTooltipValue(e.value))}}function rR(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ngx-charts-bar-vertical",3),t.\u0275\u0275listener("resize",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onResize()},!1,t.\u0275\u0275resolveWindow),t.\u0275\u0275template(1,nR,4,2,"ng-template",null,4,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view)("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("legendPosition","below")("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabel)("yAxisTickFormatting",e.yAxisTickFormatting)}}function iR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275element(1,"scrm-label",3),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.labelKey)}}function oR(n,i){1&n&&t.\u0275\u0275element(0,"scrm-chart-message-area",2)}function aR(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ngx-charts-line-chart",3),t.\u0275\u0275listener("resize",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onResize()},!1,t.\u0275\u0275resolveWindow),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view)("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("xScaleMin",e.xScaleMin)("xScaleMax",e.xScaleMax)("xAxisTicks",e.xAxisTicks)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("legendPosition","below")("autoScale",!0)("yAxisTickFormatting",e.yAxisTickFormatting)("xAxisTickFormatting",e.xAxisTickFormatting)("tooltipDisabled",e.tooltipDisabled)("yAxisLabel",e.yAxisLabel)}}function sR(n,i){1&n&&t.\u0275\u0275element(0,"scrm-chart-message-area",2)}const lR=function(n){return{dataSource:n}};function cR(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",3),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.chartType)("ndcDynamicInputs",t.\u0275\u0275pureFunction1(2,lR,e.dataSource))}}function uR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"scrm-button",1),t.\u0275\u0275elementStart(1,"span",2),t.\u0275\u0275text(2,"\xd7"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config",e.getConfig())}}function dR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.getColumnLabel(e.label)," ")}}function fR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.getColumnLabel(e.label)," ")}}const gc=function(n){return[n]};function pR(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-label",3),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("labelKey",e.titleKey)}}function mR(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-close-button",4),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config",e.close)}}const hR=[[["","modal-body",""]],[["","modal-footer",""]]],gR=["[modal-body]","[modal-footer]"];function vR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",1),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.parsedLabel)}}function _R(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"label",1),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",r.labelClass),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.field.label)}}function yR(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-label",8),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("labelKey",e.field.labelKey)("ngClass",r.labelClass)}}function bR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,_R,2,2,"label",6),t.\u0275\u0275template(2,yR,1,2,"scrm-label",7),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("pr-3","inline"===r.labelDisplay),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.field.label&&e.field.labelKey)}}function MR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-field",9),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("flex-grow-1","inline"===r.labelDisplay),t.\u0275\u0275advance(1),t.\u0275\u0275property("field",e.field)("klass",r.inputClass)("mode",r.fieldMode)("record",r.record)("type",e.field.type)}}function CR(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275projection(1),t.\u0275\u0275elementContainerEnd())}function SR(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275projection(1,1),t.\u0275\u0275elementContainerEnd())}function xR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275elementContainerStart(1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275template(3,bR,3,4,"div",3),t.\u0275\u0275template(4,MR,2,7,"div",4),t.\u0275\u0275template(5,CR,2,0,"ng-container",5),t.\u0275\u0275template(6,SR,2,0,"ng-container",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",r.colClass),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("align-items-center","inline"===r.labelDisplay)("flex-column","top"===r.labelDisplay)("flex-row","inline"===r.labelDisplay)("justify-content-end",!e.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.actionSlot),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialSlot)}}function wR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,xR,7,13,"div",0),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",r.rowClass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.cols)}}const ER=[[["","field-grid-actions",""]],[["","field-grid-actions",""]]],DR=["[field-grid-actions]","[field-grid-actions]"],so=["tag"];function IR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"date"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,e.field.value,e.getDateFormat()),"\n")}}function FR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"formatCurrency"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,e.getCurrencyValue(),e.getOptions()),"\n")}}function AR(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275elementStart(2,"ngb-datepicker",5),t.\u0275\u0275listener("dateSelect",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onDateChange(o)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",6),t.\u0275\u0275elementStart(4,"ngb-timepicker",7),t.\u0275\u0275listener("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onTimeChange(o)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}function NR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"date"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind3(2,1,e.toDateTime(e.field.value),e.getDateTimeFormat(),e.getUserTimeZone())," ")}}function TR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,NR,3,5,"span",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field.value)}}function LR(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275elementStart(2,"ngb-datepicker",5),t.\u0275\u0275listener("dateSelect",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onDateChange(o)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",6),t.\u0275\u0275elementStart(4,"ngb-timepicker",7),t.\u0275\u0275listener("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onTimeChange(o)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}function RR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.label)}}function OR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"a",3),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("href","mailto:",e.field.value,"",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.field.value)}}function jR(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"a",4),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().openEmail()}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.field.value)}}function BR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"formatNumber"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}function PR(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",3),t.\u0275\u0275elementContainerEnd())}function kR(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-list-filter",9),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.filterConfig)}}function UR(n,i){1&n&&t.\u0275\u0275element(0,"scrm-loading-spinner",11),2&n&&t.\u0275\u0275property("overlay",!0)}function VR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,UR,1,1,"scrm-loading-spinner",10),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e)}}function $R(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",9),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.buildSelectButton())}}function zR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275elementStart(2,"div",4),t.\u0275\u0275elementStart(3,"div",5),t.\u0275\u0275elementStart(4,"div",6),t.\u0275\u0275template(5,kR,1,1,"scrm-list-filter",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",8),t.\u0275\u0275elementStart(7,"div",6),t.\u0275\u0275element(8,"scrm-table",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,VR,2,1,"ng-container",2),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,$R,2,1,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",e.filterConfig),t.\u0275\u0275advance(3),t.\u0275\u0275property("config",e.tableConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(10,4,e.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.multiSelect)}}function GR(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275elementStart(2,"tag-input",4,5),t.\u0275\u0275listener("keyup.enter",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().selectFirstElement()})("onAdd",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onAdd(o)})("onBlur",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().resetStatus()})("onRemove",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onRemove()})("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().selectedValues=o}),t.\u0275\u0275element(4,"tag-input-dropdown",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",7),t.\u0275\u0275element(6,"scrm-button",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275classMap(e.getInvalidClass()),t.\u0275\u0275property("ngModel",e.selectedValues)("clearOnBlur",!0)("displayBy",e.getRelateFieldName())("inputClass",e.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",e.getPlaceholderLabel())("secondaryPlaceholder",e.getPlaceholderLabel()),t.\u0275\u0275advance(2),t.\u0275\u0275property("autocompleteObservable",e.search)("displayBy",e.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.selectButton)}}function WR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"small",9),t.\u0275\u0275element(1,"scrm-label",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.getMessage())("module",e.module)}}function KR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"small",8),t.\u0275\u0275element(1,"scrm-label",9),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.getMessage())("module",e.module)}}function HR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.field.value)}}function ZR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"formatNumber"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}function qR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"option",4),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMap(r.getId(e)),t.\u0275\u0275property("ngValue",e.value),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.label," ")}}function JR(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,qR,2,5,"option",3),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.options)}}function QR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"input",2),t.\u0275\u0275elementStart(2,"label",3),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275classMapInterpolate1("form-check radioenum-input ",r.getId(e),""),t.\u0275\u0275classProp("form-check-inline","row"===r.displayDirection),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("id",r.getId(e)),t.\u0275\u0275property("checked",r.field.value===e.value)("formControl",r.field.formControl)("value",e.value),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("for",r.getId(e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.label," ")}}function XR(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",1),t.\u0275\u0275elementContainerEnd())}function YR(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"span",7),t.\u0275\u0275elementStart(1,"label"),t.\u0275\u0275element(2,"scrm-label",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.labelKey)("module",r.getModule())}}function eO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"span",9),t.\u0275\u0275element(1,"scrm-dynamic-field",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("componentType",r.getComponentType(e.type,e.definition))("field",e)("klass",r.klass)("mode",r.mode)("record",r.record)("parent",r.parent)("type",e.type)}}function tO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275template(1,YR,3,2,"span",5),t.\u0275\u0275template(2,eO,2,7,"span",6),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("flex-fill","edit"===r.mode&&"flex-row"===r.getDirection()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.labelKey&&r.showLabel(e.definition.name)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.type)}}function nO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,tO,3,4,"div",3),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isModeEnabled(r.mode,e))}}function rO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,nO,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-start field-group h-100"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.getFields())}}const vc=function(n,i,e,r,o){return{mode:n,field:i,klass:e,record:r,parent:o}};function iO(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",1),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onClick()}),t.\u0275\u0275element(2,"ndc-dynamic",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction5(2,vc,e.mode,e.field,e.klass,e.record,e.parent))}}function oO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",3),t.\u0275\u0275element(2,"ndc-dynamic",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",e.getLink()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction5(3,vc,e.mode,e.field,e.klass,e.record,e.parent))}}function aO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"ndc-dynamic",2),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction5(2,vc,e.mode,e.field,e.klass,e.record,e.parent))}}const Jv=function(n){return{field:n}};function sO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275element(1,"scrm-dynamic-label",6),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("context",r.getMessageContext(e.value,r.record))("fields",t.\u0275\u0275pureFunction1(3,Jv,r.field))("labelKey",r.getMessageLabelKey(e.value))}}function lO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,sO,2,5,"div",4),t.\u0275\u0275pipe(2,"keyvalue"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,1,e.field.formControl.errors))}}function cO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,lO,3,3,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field.formControl.invalid&&e.field.formControl.touched)}}function uO(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",1),t.\u0275\u0275elementContainerEnd())}function dO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"label"),t.\u0275\u0275element(1,"scrm-label",6),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.labelKey)("module",r.getModule())}}function fO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"span",7),t.\u0275\u0275element(1,"scrm-dynamic-field",8),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("componentType",r.getComponentType(e.type,e.definition))("field",e)("klass",r.klass)("mode",r.getMode())("record",r.record)("parent",r.parent)("type",e.type)}}function pO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275elementStart(1,"span",4),t.\u0275\u0275template(2,dO,2,2,"label",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,fO,2,7,"span",5),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("flex-fill","edit"===r.mode&&"flex-row"===r.getDirection())("align-self-start","flex-row"===r.getDirection()&&e.labelKey&&r.showLabel(e)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.labelKey&&r.showLabel(e)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.type)}}function mO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,pO,4,6,"div",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end field-group h-100 composite-field-wrapper"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.getAttributes())}}function hO(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-dynamic-field",3),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("componentType",e.componentType)("field",e.field)("klass",e.klass)("mode",e.componentMode)("record",e.record)("parent",e.record)("type",e.type)}}function gO(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-line-items-field",4),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("field",e.field)("klass",e.klass)("mode",e.componentMode)("record",e.record)("parent",e.record)}}function vO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,hO,1,7,"scrm-dynamic-field",1),t.\u0275\u0275template(2,gO,1,5,"scrm-line-items-field",2),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","line-items"!==e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","line-items"===e.type)}}function _O(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",1),t.\u0275\u0275elementContainerEnd())}function yO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-dynamic-field",10),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2).$implicit,o=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMapInterpolate2("",e.type," ",e.name,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("componentType",o.getComponentType(e.type,e.definition))("field",e)("klass",o.klass)("mode",o.mode)("record",r)("parent",o.parent)("type",e.type)}}function bO(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-button",11),2&n){const e=t.\u0275\u0275nextContext(2),r=e.$implicit,o=e.index,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",a.getRemoveItemButton(r,o))}}function MO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275elementStart(1,"div",7),t.\u0275\u0275template(2,yO,2,11,"div",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",9),t.\u0275\u0275template(4,bO,1,1,"scrm-button",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",r.getItemFields(e)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.isEditable())}}function CO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,MO,5,2,"div",5),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(e&&e.attributes&&e.attributes.deleted))}}function SO(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-button",11),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.getAddItemButton())}}function xO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275element(1,"scrm-dynamic-label",14),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("context",r.getMessageContext(e.value,r.record))("fields",t.\u0275\u0275pureFunction1(3,Jv,r.field))("labelKey",r.getMessageLabelKey(e.value))}}function wO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,xO,2,5,"div",12),t.\u0275\u0275pipe(2,"keyvalue"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,1,e.field.itemFormArray.errors))}}function EO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,wO,3,3,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field.itemFormArray.invalid)}}function DO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275template(3,CO,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275template(5,SO,1,1,"scrm-button",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,EO,2,1,"ng-container",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate2("line-items d-flex flex-column ",e.field.type," ",e.field.name,""),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end line-item h-100"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.getItems()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.isEditable()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isEditable()&&e.field.itemFormArray&&e.field.itemFormArray.errors)}}function IO(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",10),t.\u0275\u0275text(2,"*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function FO(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",11),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(4).dataSource.getEditAction()}),t.\u0275\u0275element(1,"scrm-image",12),t.\u0275\u0275elementEnd()}}const AO=function(){return["edit","create"]};function NO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",5),t.\u0275\u0275elementStart(2,"strong"),t.\u0275\u0275elementStart(3,"label",1),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"uppercase"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6,": "),t.\u0275\u0275template(7,IO,3,0,"ng-container",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",6),t.\u0275\u0275elementStart(9,"div",7),t.\u0275\u0275element(10,"scrm-field",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div"),t.\u0275\u0275template(12,FO,2,0,"button",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("ngClass",r.labelClass),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,9,e.field.label)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.field.definition.required&&t.\u0275\u0275pureFunction0(11,AO).includes(r.config.mode)),t.\u0275\u0275advance(3),t.\u0275\u0275property("type",e.field.type)("mode",r.config.mode)("klass",r.inputClass)("field",e.field)("record",r.record),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!1!==e.field.definition.inline_edit&&!e.field.definition.readonly&&r.dataSource.inlineEdit&&"detail"===r.config.mode)}}function TO(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275projection(1),t.\u0275\u0275elementContainerEnd())}function LO(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275projection(1,1),t.\u0275\u0275elementContainerEnd())}function RO(n,i){1&n&&t.\u0275\u0275element(0,"div",13)}function OO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,NO,13,12,"ng-container",3),t.\u0275\u0275template(2,TO,2,0,"ng-container",3),t.\u0275\u0275template(3,LO,2,0,"ng-container",3),t.\u0275\u0275template(4,RO,1,0,"div",4),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=i.index,o=t.\u0275\u0275nextContext(),a=o.$implicit,s=o.index,l=t.\u0275\u0275nextContext();t.\u0275\u0275classProp("field-column-bordered",a.cols.length>1&&r<a.cols.length-1),t.\u0275\u0275property("ngClass",l.colClass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.actionSlot),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialSlot),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field&&s<l.fieldGrid.length-1)}}function jO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,OO,5,7,"div",2),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",r.rowClass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.cols)}}const BO=[[["","field-grid-actions",""]],[["","field-grid-special",""]]],PO=["[field-grid-actions]","[field-grid-special]"];function kO(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275elementStart(1,"div",18),t.\u0275\u0275elementStart(2,"label",19),t.\u0275\u0275text(3,"Opportunity Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"input",20),t.\u0275\u0275elementStart(5,"label",21),t.\u0275\u0275element(6,"input",22),t.\u0275\u0275element(7,"span",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"p",24),t.\u0275\u0275text(9," My Items "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"label",21),t.\u0275\u0275element(11,"input",22),t.\u0275\u0275element(12,"span",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"p",24),t.\u0275\u0275text(14," Open Items "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"label",21),t.\u0275\u0275element(16,"input",22),t.\u0275\u0275element(17,"span",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"p",24),t.\u0275\u0275text(19," My Favourites "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function UO(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275elementStart(1,"div",18),t.\u0275\u0275elementStart(2,"label",19),t.\u0275\u0275text(3,"Opportunity Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"input",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",17),t.\u0275\u0275elementStart(6,"div",18),t.\u0275\u0275elementStart(7,"div",26),t.\u0275\u0275elementStart(8,"label",19),t.\u0275\u0275text(9,"Account Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",17),t.\u0275\u0275elementStart(11,"div",13),t.\u0275\u0275element(12,"input",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",12),t.\u0275\u0275elementStart(14,"div",26),t.\u0275\u0275elementStart(15,"button",27),t.\u0275\u0275element(16,"scrm-image",28),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"button",29),t.\u0275\u0275element(18,"scrm-image",30),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",17),t.\u0275\u0275elementStart(20,"div",18),t.\u0275\u0275elementStart(21,"label",19),t.\u0275\u0275text(22,"Opportunity Amount"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",17),t.\u0275\u0275elementStart(24,"div",13),t.\u0275\u0275elementStart(25,"div",31),t.\u0275\u0275elementStart(26,"select"),t.\u0275\u0275elementStart(27,"option"),t.\u0275\u0275text(28,"Equals"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"option"),t.\u0275\u0275text(30,"Greater than"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"option"),t.\u0275\u0275text(32,"Less than"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"div",12),t.\u0275\u0275element(34,"input",32),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(35,"div",17),t.\u0275\u0275elementStart(36,"div",18),t.\u0275\u0275elementStart(37,"label",19),t.\u0275\u0275text(38,"Expected Close Date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"div",17),t.\u0275\u0275elementStart(40,"div",33),t.\u0275\u0275elementStart(41,"div",31),t.\u0275\u0275elementStart(42,"select"),t.\u0275\u0275elementStart(43,"option"),t.\u0275\u0275text(44,"Equals"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(45,"option"),t.\u0275\u0275text(46,"Greater than"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(47,"option"),t.\u0275\u0275text(48,"Less than"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(49,"div",34),t.\u0275\u0275element(50,"input",35),t.\u0275\u0275elementStart(51,"button",36),t.\u0275\u0275element(52,"scrm-image",37),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(53,"div",17),t.\u0275\u0275elementStart(54,"div",18),t.\u0275\u0275elementStart(55,"label",19),t.\u0275\u0275text(56,"Next Step"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(57,"input",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(58,"div",17),t.\u0275\u0275elementStart(59,"div",13),t.\u0275\u0275elementStart(60,"label",19),t.\u0275\u0275text(61,"Save Filter as:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(62,"div",17),t.\u0275\u0275elementStart(63,"div",13),t.\u0275\u0275elementStart(64,"div",31),t.\u0275\u0275elementStart(65,"select"),t.\u0275\u0275elementStart(66,"option"),t.\u0275\u0275text(67,"Lorem Ipsum"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(68,"option"),t.\u0275\u0275text(69,"Lorem Ipsum"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(70,"option"),t.\u0275\u0275text(71,"Lorem Ipsum"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(72,"div",12),t.\u0275\u0275elementStart(73,"button",38),t.\u0275\u0275text(74,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(75,"div",17),t.\u0275\u0275elementStart(76,"div",18),t.\u0275\u0275elementStart(77,"label",19),t.\u0275\u0275text(78,"Order by column"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(79,"div",31),t.\u0275\u0275elementStart(80,"select"),t.\u0275\u0275elementStart(81,"option"),t.\u0275\u0275text(82,"Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(83,"option"),t.\u0275\u0275text(84,"Date Created"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(85,"option"),t.\u0275\u0275text(86,"Date Modified"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function VO(n,i){1&n&&(t.\u0275\u0275elementStart(0,"button",39),t.\u0275\u0275text(1," My Filters "),t.\u0275\u0275elementEnd())}function $O(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",40),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).toggleAdvancedFilter()}),t.\u0275\u0275text(1," Advanced "),t.\u0275\u0275elementEnd()}}function zO(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",40),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).toggleQuickFilter()}),t.\u0275\u0275text(1," Quick "),t.\u0275\u0275elementEnd()}}function GO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275elementStart(1,"div",4),t.\u0275\u0275elementStart(2,"div",5),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",6),t.\u0275\u0275listener("click",function(){return i.$implicit.dismiss("Cross click")}),t.\u0275\u0275element(5,"scrm-image",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",8),t.\u0275\u0275template(7,kO,20,0,"ng-template",9),t.\u0275\u0275template(8,UO,87,0,"ng-template",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",10),t.\u0275\u0275elementStart(10,"div",11),t.\u0275\u0275element(11,"div",12),t.\u0275\u0275elementStart(12,"div",13),t.\u0275\u0275elementStart(13,"div",14),t.\u0275\u0275elementStart(14,"button",15),t.\u0275\u0275text(15," Clear "),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,VO,2,0,"ng-template",9),t.\u0275\u0275template(17,$O,2,0,"ng-template",9),t.\u0275\u0275template(18,zO,2,0,"ng-template",9),t.\u0275\u0275elementStart(19,"button",16),t.\u0275\u0275text(20," Search "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.modalTitle),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.quickFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.advancedFilter),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",e.advancedFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.quickFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.advancedFilter)}}function WO(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",8),t.\u0275\u0275elementStart(2,"a",9),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().backToTop()}),t.\u0275\u0275elementStart(3,"span"),t.\u0275\u0275text(4," Back To Top "),t.\u0275\u0275element(5,"scrm-image",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}}function KO(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275elementStart(1,"div",12),t.\u0275\u0275elementStart(2,"h5",13),t.\u0275\u0275text(3,"\xa9 Powered By SugarCRM"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",14),t.\u0275\u0275listener("click",function(){return i.$implicit.dismiss("Cross click")}),t.\u0275\u0275element(5,"scrm-image",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",16),t.\u0275\u0275elementStart(7,"p"),t.\u0275\u0275text(8," \xa9 2004-2013 SugarCRM Inc. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"p"),t.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"p"),t.\u0275\u0275text(12," SugarCRM is a trademark of SugarCRM, Inc. All other company and product names may be trademarks of the respective companies with which they are associated. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function HO(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275elementStart(1,"div",12),t.\u0275\u0275elementStart(2,"h5",13),t.\u0275\u0275text(3,"\xa9 Supercharged by SuiteCRM"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",14),t.\u0275\u0275listener("click",function(){return i.$implicit.dismiss("Cross click")}),t.\u0275\u0275element(5,"scrm-image",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",16),t.\u0275\u0275elementStart(7,"p"),t.\u0275\u0275text(8," SuiteCRM has been written and assembled by SalesAgility. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"p"),t.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"p"),t.\u0275\u0275text(12," SuiteCRM is a trademark of SalesAgility Ltd. All other company and product names may be trademarks of the respective companies with which they are associated. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function ZO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275element(1,"scrm-label",3),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.messageLabelKey)}}function qO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",8),t.\u0275\u0275element(2,"scrm-image",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("image",e.icon)("klass",e.iconClass)}}function JO(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275element(1,"scrm-field",13),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("type",e.field.type)("field",e.field)}}function QO(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275element(1,"scrm-inline-loading-spinner"),t.\u0275\u0275elementEnd())}function XO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,JO,2,2,"div",10),t.\u0275\u0275template(2,QO,2,0,"div",11),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading&&r.loading)}}function YO(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",15),t.\u0275\u0275element(2,"scrm-label",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.labelKey)("module",r.getContextModule())}}function ej(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",17),t.\u0275\u0275elementStart(2,"label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(4).ngIf;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.description)}}function tj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275element(1,"scrm-dynamic-label",20),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(3).$implicit,r=t.\u0275\u0275nextContext(2).ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("context",o.getMessageContext())("fields",o.getMessageFields(r.statistics))("labelKey",e.dynamicLabel)}}function nj(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275element(1,"scrm-inline-loading-spinner"),t.\u0275\u0275elementEnd())}function rj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,tj,2,3,"div",18),t.\u0275\u0275template(2,nj,2,0,"div",11),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading)}}function ij(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275text(2," - "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("widget-entry-value ",r.getSizeClass(e.size),"")}}function oj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,qO,3,2,"ng-container",7),t.\u0275\u0275template(2,XO,3,2,"ng-container",7),t.\u0275\u0275template(3,YO,3,2,"ng-container",7),t.\u0275\u0275template(4,ej,4,1,"ng-container",7),t.\u0275\u0275template(5,rj,3,2,"ng-container",7),t.\u0275\u0275template(6,ij,3,3,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2).ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.statistic&&r.statistics[e.statistic]),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.descriptionKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dynamicLabel),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.statistic&&!o.loading&&(!r.statistics[e.statistic].field||r.statistics[e.statistic].field&&o.isEmptyFieldValue(r.statistics[e.statistic].field.value)))}}function aj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,oj,7,6,"ng-container",7),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275classMapInterpolate2("",r.getColClass()," ",r.getClass(e),""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","hidden"!==e.display)}}function sj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,aj,2,5,"div",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate4("d-flex ",r.getJustify(e.justify)," ",r.getAlign(e.align)," ",r.getRowClass()," ",r.getLayoutRowClass(e),""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.cols)}}function lj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275template(1,sj,3,7,"ng-container",5),t.\u0275\u0275elementEnd()),2&n){const e=i.ngIf;t.\u0275\u0275propertyInterpolate("ngbTooltip",e.tooltipTitleText),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.layout)}}function cj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275projection(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("@widgetContentFade",e.displayContent?"true":"false")}}const uj=[[["","widget-body",""]]],dj=["[widget-body]"];function fj(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-close-button",8),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config",e.getCloseButton())}}function pj(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-minimise-button",9),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config",e.minimiseButton)("status",e.minimiseStatus)}}function mj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.title)}}function hj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275element(1,"scrm-label",11),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.titleKey)}}const gj=[[["","panel-icon-area",""]],[["","panel-header-button",""]],[["","panel-body",""]]],vj=["[panel-icon-area]","[panel-header-button]","[panel-body]"];function _j(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.internalConfig)}}function yj(n,i){1&n&&(t.\u0275\u0275elementStart(0,"nav",4),t.\u0275\u0275elementStart(1,"div",5),t.\u0275\u0275elementStart(2,"ul",6),t.\u0275\u0275elementStart(3,"li",7),t.\u0275\u0275text(4,"\xa0 "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function bj(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"nav",8),t.\u0275\u0275elementStart(2,"div",9),t.\u0275\u0275elementStart(3,"ul",6),t.\u0275\u0275elementStart(4,"li",10),t.\u0275\u0275element(5,"scrm-logo-ui"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function Mj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-mobile-menu",23),t.\u0275\u0275elementContainerEnd()),2&n){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(3),r=t.\u0275\u0275nextContext(2).ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("all",o.navbar.all.modules)("current",o.navbar.current)("items",o.navbar.menu)("navigationType",r.userPreferences.navigation_paradigm||"")("onClose",o.getCloseCallBack(e))}}function Cj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"a",25),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275propertyInterpolate("href",e.link.url,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275propertyInterpolate("target",e.link.target),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",e.link.label," ")}}function Sj(n,i){if(1&n&&t.\u0275\u0275template(0,Cj,2,3,"a",24),2&n){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function xj(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ul",11),t.\u0275\u0275elementStart(2,"div",12,13),t.\u0275\u0275elementStart(4,"button",14),t.\u0275\u0275element(5,"scrm-image",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",16),t.\u0275\u0275template(7,Mj,2,5,"ng-container",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",17),t.\u0275\u0275elementStart(9,"li",18),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275reference(3).close()}),t.\u0275\u0275elementStart(10,"a",19,20),t.\u0275\u0275element(12,"scrm-image",21),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",22),t.\u0275\u0275template(15,Sj,1,1,"ng-template",2),t.\u0275\u0275element(16,"scrm-logout-ui"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(17,"scrm-action-bar-ui"),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275reference(11),r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("autoClose",!1),t.\u0275\u0275advance(4),t.\u0275\u0275property("@mobileNavFade",void 0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.navbar&&r.navbar.menu&&r.navbar.menu.length),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate2(" ",r.navbar.currentUser.firstName," ",r.navbar.currentUser.lastName," "),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("min-width",e.offsetWidth,"px"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.navbar.globalActions)}}function wj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",37),t.\u0275\u0275element(1,"scrm-menu-item",38),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e.navbar.current)}}function Ej(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",39),t.\u0275\u0275element(1,"scrm-grouped-menu-item",40),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e)("subNavCollapse",r.subNavCollapse)}}function Dj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ul",33),t.\u0275\u0275template(2,wj,2,1,"li",34),t.\u0275\u0275template(3,Ej,2,2,"li",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"scrm-menu-items-list",36),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.navbar.current),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.navbar.menu),t.\u0275\u0275advance(1),t.\u0275\u0275property("items",e.navbar.all.modules)}}function Ij(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",37),t.\u0275\u0275element(1,"scrm-menu-item",38),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e.navbar.current)}}function Fj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",43),t.\u0275\u0275element(1,"scrm-menu-item",38),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e)}}function Aj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ul",6),t.\u0275\u0275template(2,Ij,2,1,"li",34),t.\u0275\u0275template(3,Fj,2,1,"li",41),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"scrm-menu-items-list",42),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.navbar.current),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.navbar.menu),t.\u0275\u0275advance(1),t.\u0275\u0275property("items",e.navbar.all.modules)}}function Nj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"a",25),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275propertyInterpolate("href",e.link.url,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275propertyInterpolate("target",e.link.target),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",e.link.label," ")}}function Tj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Nj,2,3,"a",24),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function Lj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"nav",26),t.\u0275\u0275elementStart(2,"div",27),t.\u0275\u0275element(3,"scrm-home-menu-item",28),t.\u0275\u0275template(4,Dj,5,3,"ng-container",3),t.\u0275\u0275template(5,Aj,5,3,"ng-container",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",17),t.\u0275\u0275elementStart(7,"ul",6),t.\u0275\u0275elementStart(8,"li",29),t.\u0275\u0275elementStart(9,"a",19,30),t.\u0275\u0275element(11,"scrm-image",21),t.\u0275\u0275elementStart(12,"span",31),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",32),t.\u0275\u0275template(15,Tj,2,1,"ng-container",3),t.\u0275\u0275element(16,"scrm-logout-ui"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(17,"scrm-action-bar-ui"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275reference(10),r=t.\u0275\u0275nextContext(2).ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngbCollapse",o.mainNavCollapse),t.\u0275\u0275advance(1),t.\u0275\u0275property("active",r.appState.module&&"home"===r.appState.module)("route",o.getHomePage()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","gm"==r.userPreferences.navigation_paradigm),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","gm"!=r.userPreferences.navigation_paradigm),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate2(" ",o.navbar.currentUser.firstName," ",o.navbar.currentUser.lastName," "),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("min-width",e.offsetWidth,"px"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.navbar.globalActions)}}function Rj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,bj,6,0,"ng-container",3),t.\u0275\u0275template(2,xj,18,8,"ng-container",3),t.\u0275\u0275template(3,Lj,18,10,"ng-container",3),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.isUserLoggedIn),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isUserLoggedIn&&e.mobileNavbar),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isUserLoggedIn&&!e.mobileNavbar)}}function Oj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,yj,5,0,"ng-template",2),t.\u0275\u0275template(2,Rj,4,3,"ng-container",3),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loaded),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loaded)}}function jj(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",1),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().doLogout()}),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.appStrings[r.logout.logoutAction.label]||"")}}function Bj(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-image",4),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("image",e.icon)}}function Pj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"a",2),t.\u0275\u0275template(1,Bj,1,1,"scrm-image",3),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",e.class)("queryParams",e.link.params)("routerLink",e.link.route),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.link.label,"\n")}}function kj(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-image",4),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("image",e.icon)}}function Uj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"a",5),t.\u0275\u0275template(1,kj,1,1,"scrm-image",3),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("href",e.link.url,t.\u0275\u0275sanitizeUrl)("ngClass",e.class),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.link.label,"\n")}}const Vj=function(n,i,e){return{link:n,icon:i,class:e}};function $j(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,Vj,e.link,e.icon,e.class))}}function zj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",11),t.\u0275\u0275element(1,"scrm-menu-item-link",12),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),t.\u0275\u0275property("icon",e.icon)("link",e.link)}}function Gj(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",13),t.\u0275\u0275element(2,"scrm-sub-menu-favorites",13),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("module",e.module),t.\u0275\u0275advance(1),t.\u0275\u0275property("module",e.module)}}function Wj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"ul",8),t.\u0275\u0275template(1,zj,2,4,"li",9),t.\u0275\u0275template(2,Gj,3,2,"ng-container",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275classProp("rounded-0",e.submenu&&1===e.submenu.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.submenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&e.module)}}const Kj=function(n,i){return{"sub-nav-link":!0,"nav-link":!0,"action-link":!0,"dropdown-item":n,"dropdown-toggle":i}};function Hj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",5),t.\u0275\u0275element(1,"scrm-menu-item-link",6),t.\u0275\u0275template(2,Wj,3,4,"ul",7),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap(t.\u0275\u0275pureFunction2(4,Kj,e.submenu.length,e.submenu.length)),t.\u0275\u0275property("link",e.link),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.submenu.length)}}function Zj(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ul",3),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().hideDropdown()}),t.\u0275\u0275template(1,Hj,3,7,"li",4),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngbCollapse",e.subNavCollapse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.item.submenu)}}const qj=function(n,i){return{item:n,subNavCollapse:i}};function Jj(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,qj,e.item,e.subNavCollapse))}}function Qj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"scrm-menu-item-link",9),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap("nav-link action-link"),t.\u0275\u0275property("link",e.link)}}function Xj(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).hideDropdown()}),t.\u0275\u0275template(1,Qj,2,3,"div",7),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.items)}}function Yj(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"ul",1),t.\u0275\u0275elementStart(1,"li",2),t.\u0275\u0275elementStart(2,"a",3),t.\u0275\u0275element(3,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,Xj,2,1,"div",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("labelKey",e.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.showDropdown)}}const eB=function(n,i){return{items:n,labelKey:i}};function tB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,eB,e.items,e.labelKey))}}function nB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return o.onClick&&o.onClick()}),t.\u0275\u0275elementStart(1,"a",5),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",r.buildRoute(e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.attributes.item_summary," ")}}function rB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,nB,3,2,"div",3),t.\u0275\u0275pipe(2,"slice"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function iB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"h4",1),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().toggleCollapse()}),t.\u0275\u0275element(2,"scrm-label",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,rB,3,5,"ng-container",0),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.collapsed)}}const Qv=function(n,i,e){return{module:n,onClick:i,collapsible:e}};function oB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,Qv,e.module,e.onClick,e.collapsible))}}const aB=function(n,i){return{route:n,active:i}};function sB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,aB,e.route,e.active))}}function lB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-menu-item-link",7),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap("sub-nav-link nav-link action-link"),t.\u0275\u0275property("icon",e.icon)("link",e.link)}}function cB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",8),t.\u0275\u0275element(2,"scrm-sub-menu-favorites",8),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("module",e.item.module),t.\u0275\u0275advance(1),t.\u0275\u0275property("module",e.item.module)}}function uB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().hideDropdown()}),t.\u0275\u0275template(1,lB,2,4,"div",4),t.\u0275\u0275template(2,cB,3,2,"ng-container",5),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.item.submenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.item&&e.item.module)}}const dB=function(n){return{"top-nav-link":!0,"nav-link-nongrouped":!0,"dropdown-toggle":n}},fB=function(n){return{item:n}};function pB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction1(2,fB,e.item))}}function mB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",5),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().navBackLink()}),t.\u0275\u0275element(2,"scrm-image",6),t.\u0275\u0275elementStart(3,"a",7),t.\u0275\u0275element(4,"scrm-label",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}}function hB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",11),t.\u0275\u0275listener("click",function(o){const s=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(3);return l.changeSubNav(o,s.submenu,l.navigationType,s)}),t.\u0275\u0275elementStart(1,"a",12),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"scrm-image",14),t.\u0275\u0275elementEnd()}if(2&n){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.link.label)}}function gB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",9),t.\u0275\u0275template(2,hB,4,1,"li",10),t.\u0275\u0275elementContainerStart(3),t.\u0275\u0275elementStart(4,"li",11),t.\u0275\u0275listener("click",function(o){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return a.changeSubNav(o,a.all,"gm",null)}),t.\u0275\u0275elementStart(5,"a",12),t.\u0275\u0275element(6,"scrm-label",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"scrm-image",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.mainItems)}}function vB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",9),t.\u0275\u0275elementStart(2,"li",16),t.\u0275\u0275element(3,"scrm-menu-recently-viewed",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"li",16),t.\u0275\u0275element(5,"scrm-menu-favorites",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(3),t.\u0275\u0275property("collapsible",!0)("module",e.subNavItem.module)("onClick",e.onClose),t.\u0275\u0275advance(2),t.\u0275\u0275property("collapsible",!0)("module",e.subNavItem.module)("onClick",e.onClose)}}function _B(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-mobile-module-menu",15),t.\u0275\u0275template(2,vB,6,6,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("items",e.submenu)("onClose",e.onClose),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.subNavItem&&e.subNavItem.module)}}function yB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-mobile-grouped-menu",15),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("items",e.submenu)("onClose",e.onClose)}}function bB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,_B,3,3,"ng-container",0),t.\u0275\u0275template(2,yB,2,2,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","gm"!==e.subNavigationType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","gm"===e.subNavigationType)}}function MB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,gB,8,1,"ng-container",0),t.\u0275\u0275template(2,bB,3,2,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.mainNavLink),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.mobileSubNav)}}const CB=function(n,i,e,r,o){return{current:n,items:i,all:e,onClose:r,navigationType:o}};function SB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction5(2,CB,e.current,e.items,e.all,e.onClose,e.navigationType))}}function xB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return o.onClose&&o.onClose()}),t.\u0275\u0275element(1,"scrm-menu-item-link",8),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-5 pr-3 pt-2 pb-2"),t.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function wB(n,i){1&n&&(t.\u0275\u0275elementStart(0,"ngb-panel",5),t.\u0275\u0275template(1,xB,2,4,"ng-template",6),t.\u0275\u0275elementEnd()),2&n&&t.\u0275\u0275property("cardClass","mobile-nav-group-item disabled")("disabled",!0)}function EB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",13),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(4);return o.onClose&&o.onClose()}),t.\u0275\u0275element(1,"scrm-menu-item-link",8),t.\u0275\u0275elementEnd()}if(2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap("mobile-nav-link action-link pl-1 pr-3 pt-2 pb-2 w-100"),t.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function DB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li"),t.\u0275\u0275element(2,"scrm-menu-recently-viewed",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"li"),t.\u0275\u0275element(4,"scrm-menu-favorites",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(3).$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("collapsible",!0)("module",e.module)("onClick",r.onClose),t.\u0275\u0275advance(2),t.\u0275\u0275property("collapsible",!0)("module",e.module)("onClick",r.onClose)}}function IB(n,i){if(1&n&&(t.\u0275\u0275template(0,EB,2,4,"li",11),t.\u0275\u0275template(1,DB,5,6,"ng-container",12)),2&n){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275property("ngForOf",e.submenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&e.module)}}function FB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"ngb-panel",9),t.\u0275\u0275template(1,IB,2,2,"ng-template",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("title",e.link.label)}}function AB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,wB,2,2,"ngb-panel",3),t.\u0275\u0275template(2,FB,2,1,"ngb-panel",4),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.submenu||!e.submenu.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.submenu&&e.submenu.length)}}const Xv=function(n,i){return{items:n,onClose:i}};function NB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,Xv,e.items,e.onClose))}}function TB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"li",2),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return o.onClose&&o.onClose()}),t.\u0275\u0275element(3,"scrm-menu-item-link",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=i.$implicit;t.\u0275\u0275advance(3),t.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-3 pr-3 pt-2 pb-2"),t.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function LB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,Xv,e.items,e.onClose))}}const Yv=function(n,i,e){return{label:n,url:i,route:e}};function RB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",7),t.\u0275\u0275element(1,"scrm-menu-item-link",8),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),t.\u0275\u0275property("link",t.\u0275\u0275pureFunction3(3,Yv,e.attributes.item_summary,r.buildRoute(e),r.buildRoute(e)))}}function OB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",1),t.\u0275\u0275elementStart(2,"a",2),t.\u0275\u0275element(3,"scrm-image",3),t.\u0275\u0275element(4,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ul",5),t.\u0275\u0275template(6,RB,2,7,"li",6),t.\u0275\u0275pipe(7,"slice"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind3(7,1,e.records,0,e.maxDisplayed))}}const e_=function(n){return{module:n}};function jB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction1(2,e_,e.module))}}function BB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",7),t.\u0275\u0275element(1,"scrm-menu-item-link",8),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),t.\u0275\u0275property("link",t.\u0275\u0275pureFunction3(3,Yv,e.attributes.parent_name,r.buildRoute(e),r.buildRoute(e)))}}function PB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",1),t.\u0275\u0275elementStart(2,"a",2),t.\u0275\u0275element(3,"scrm-image",3),t.\u0275\u0275element(4,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ul",5),t.\u0275\u0275template(6,BB,2,7,"li",6),t.\u0275\u0275pipe(7,"slice"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind3(7,1,e.records,0,e.maxDisplayed))}}function kB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction1(2,e_,e.module))}}function UB(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return o.onClick&&o.onClick()}),t.\u0275\u0275elementStart(1,"a",5),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",r.buildRoute(e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.attributes.parent_name," ")}}function VB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,UB,3,2,"div",3),t.\u0275\u0275pipe(2,"slice"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function $B(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"h4",1),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().toggleCollapse()}),t.\u0275\u0275element(2,"scrm-label",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,VB,3,5,"ng-container",0),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.collapsed)}}function zB(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,Qv,e.module,e.onClick,e.collapsible))}}function GB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275elementStart(1,"div",6),t.\u0275\u0275elementStart(2,"strong"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",7),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.getColumnLabel("LBL_CHECKSYS_TITLE")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.getColumnLabel("ERR_CHECKSYS")," ")}}function WB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275elementStart(1,"strong"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",r.getColumnLabel(e.value.info)," ")}}function KB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.getColumnLabel(e.value.error)," ")}}function HB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," ")}}function ZB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275elementStart(1,"ul"),t.\u0275\u0275template(2,HB,2,1,"li",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.value.data)}}function qB(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li"),t.\u0275\u0275elementStart(1,"div",8),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275elementStart(3,"span"),t.\u0275\u0275element(4,"scrm-image",9),t.\u0275\u0275elementStart(5,"strong",10),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,WB,3,1,"span",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,KB,2,1,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,ZB,3,1,"div",13),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("alert ",r.getAlertType(e.value),""),t.\u0275\u0275advance(3),t.\u0275\u0275property("image",r.getAlertIcon(e.value)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",r.getColumnLabel(e.value.label)," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",""!==e.value.info),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",""!==e.value.error),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0!==e.value.data.length)}}const t_=["dataContainer"];function JB(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-button-group",3),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config$",e.config$)}}function QB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275template(3,JB,1,1,"scrm-button-group",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275classMap(e.klass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config$)}}function XB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(r[e.labelKey]||"")}}function YB(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.text)}}function eP(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(3).close(a)}),t.\u0275\u0275template(1,XB,2,1,"ng-container",6),t.\u0275\u0275template(2,YB,2,1,"ng-container",6),t.\u0275\u0275elementStart(3,"a",7),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(3).close(a)}),t.\u0275\u0275elementStart(4,"span",8),t.\u0275\u0275text(5,"\xd7"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=i.$implicit;t.\u0275\u0275classMapInterpolate1("message ",e.type," alert-dismissible fade show shadow"),t.\u0275\u0275property("@fade",void 0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.text)}}function tP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275template(1,eP,6,6,"div",4),t.\u0275\u0275elementEnd()),2&n){const e=i.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e)}}function nP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,tP,2,1,"div",2),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.messages$))}}const rP=function(n){return{"hide-pagination-count":n}};function iP(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275elementStart(1,"button",2),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().first()}),t.\u0275\u0275element(2,"scrm-image",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",4),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().previous()}),t.\u0275\u0275element(4,"scrm-image",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"span",6),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",7),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().next()}),t.\u0275\u0275element(8,"scrm-image",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"button",9),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().last()}),t.\u0275\u0275element(10,"scrm-image",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(5,rP,r.displayResponsiveTable)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate4(" (",e.pageCount.pageFirst," - ",e.pageCount.pageLast," ",e.appStrings.LBL_LIST_OF||""," ",e.pageCount.total,") ")}}function oP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275elementStart(1,"div",6),t.\u0275\u0275elementStart(2,"scrm-panel",7),t.\u0275\u0275elementStart(3,"div",8),t.\u0275\u0275element(4,"scrm-field-layout",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("title",e.label),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("panel-",e.key,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",r.getLayoutDataSource(e))}}function aP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275template(1,oP,5,5,"div",4),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.panels)}}function sP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-field-layout",9),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275classMapInterpolate1("tab-",e.key,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",r.getLayoutDataSource(e))}}function lP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"li",15),t.\u0275\u0275elementStart(1,"a",16),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,sP,2,4,"ng-template",17),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275property("ngbNavItem",i.index+1),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.label)}}function cP(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275elementStart(1,"ul",11,12),t.\u0275\u0275listener("activeIdChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).active=o}),t.\u0275\u0275template(3,lP,4,2,"li",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"div",14),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275reference(2),r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("activeId",r.active),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",r.panels),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngbNavOutlet",e)}}function uP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,aP,2,1,"div",1),t.\u0275\u0275template(2,cP,5,3,"div",2),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config&&"panels"===e.config.layout),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config&&"tabs"===e.config.layout)}}function dP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"label",3),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(3).ngIf,r=t.\u0275\u0275nextContext(4).$implicit,o=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("ngClass",o.getLabelClass(r)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.label," ")}}function fP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-label",8),2&n){const e=t.\u0275\u0275nextContext(3).ngIf,r=t.\u0275\u0275nextContext(4).$implicit,o=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("labelKey",e.labelKey)("ngClass",o.getLabelClass(r))}}function pP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,dP,2,2,"label",6),t.\u0275\u0275template(3,fP,1,2,"scrm-label",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2).ngIf,r=t.\u0275\u0275nextContext(4).$implicit,o=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("pr-3","inline"===o.getLabelDisplay(r,o.mode)&&"none"!==o.getDisplay(r)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.label&&e.labelKey)}}function mP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275element(2,"scrm-field",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2).ngIf,r=t.\u0275\u0275nextContext(4).$implicit,o=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("flex-grow-1","inline"===o.getLabelDisplay(r,o.mode)),t.\u0275\u0275advance(1),t.\u0275\u0275property("field",e)("klass",o.getFieldClass(r))("mode",o.mode)("type",e.type)}}function hP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,pP,4,4,"ng-container",1),t.\u0275\u0275template(2,mP,3,6,"ng-container",1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(5).$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","none"!==r.getLabelDisplay(e,r.mode)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","none"!==r.getDisplay(e))}}function gP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,hP,3,2,"ng-container",1),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext(4).$implicit,o=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.shouldDisplay(r,e,o.mode))}}function vP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,gP,2,1,"ng-container",1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(3).$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.getField(r.record,e.field))}}function _P(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-action-group-menu",10),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(7);t.\u0275\u0275advance(1),t.\u0275\u0275property("buttonClass",e.config.buttonClass)("config",e.config.actions)}}function yP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",5),t.\u0275\u0275template(2,vP,2,1,"ng-container",1),t.\u0275\u0275template(3,_P,2,2,"ng-container",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("align-items-center","inline"===r.getLabelDisplay(e,r.mode))("flex-column","top"===r.getLabelDisplay(e,r.mode))("flex-row","inline"===r.getLabelDisplay(e,r.mode))("justify-content-end",!e.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.record),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.actionSlot&&r.config.actions)}}function bP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275template(1,yP,4,10,"ng-container",1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(4);let o;t.\u0275\u0275classMapInterpolate1("record-flexbox-col ",r.getClass(e),""),t.\u0275\u0275property("ngClass",null!==(o=r.config.colClass)&&void 0!==o?o:null),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","hidden"!==e.display&&r.shouldColDisplayInMode(e,r.mode))}}function MP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,bP,2,5,"div",4),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","hidden"!==e.display&&r.shouldColDisplayInMode(e,r.mode))}}function CP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275template(2,MP,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);let o;t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate3("d-flex record-flexbox-row ",r.getJustify(e.justify)," ",r.getAlign(e.align)," ",r.getLayoutRowClass(e),""),t.\u0275\u0275property("ngClass",null!==(o=r.config.rowClass)&&void 0!==o?o:null),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.cols)}}function SP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,CP,3,7,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.layout.rows)}}function xP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,SP,2,1,"ng-container",1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMapInterpolate1("d-flex flex-column ",e.config&&e.config.klass||"",""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.layout&&e.layout.rows)}}function wP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"span",4),t.\u0275\u0275element(1,"scrm-action-group-menu",5),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("buttonClass",e.config.buttonClass)("config",e.config.actions)}}function EP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"scrm-field-grid",2),t.\u0275\u0275template(2,wP,2,2,"span",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMapInterpolate1("record-grid ",e.config&&e.config.klass||"",""),t.\u0275\u0275advance(1),t.\u0275\u0275property("actions",!!e.config.actions)("appendActions",e.config&&e.config.appendActions||!1)("colClass",e.config&&e.config.colClass)("fieldMode",e.mode)("fields",e.fields)("inputClass",e.config&&e.config.inputClass)("labelClass",e.config&&e.config.labelClass)("labelDisplay",e.config&&e.config.labelDisplay||"top")("maxColumns",e.maxColumns)("rowClass",e.config&&e.config.rowClass)("sizeMap",e.sizeMap),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config.actions)}}function DP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,EP,3,15,"div",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.vm$))}}function IP(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",1),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).ngIf;return t.\u0275\u0275nextContext().changeSorting(a)}),t.\u0275\u0275element(2,"scrm-image",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("image",r.getStatusIcon(e))}}function FP(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275elementStart(2,"div",4),t.\u0275\u0275element(3,"div",5),t.\u0275\u0275elementStart(4,"div",6),t.\u0275\u0275elementStart(5,"div",7),t.\u0275\u0275elementStart(6,"div"),t.\u0275\u0275text(7,"Record Status Bar Component"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function AP(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275elementStart(1,"div",9),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275text(3,"Record Status Bar Component"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function NP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"scrm-button-group",2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config$",e.config$)}}function TP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-button-group",3),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config$",e.config$)}}function LP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,TP,1,1,"scrm-button-group",2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config$)}}function RP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-table-header",2),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("selection",e.config.selection)("bulkActions",e.config.bulkActions)("pagination",e.config.pagination)}}function OP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-table-footer",2),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("selection",e.config.selection)("bulkActions",e.config.bulkActions)("pagination",e.config.pagination)}}function jP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-bulk-action-menu",5),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function BP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-pagination",6),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("state",e.pagination)}}function PP(n,i){1&n&&t.\u0275\u0275element(0,"th",12)}function kP(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",13),t.\u0275\u0275elementStart(1,"label",14),t.\u0275\u0275elementStart(2,"input",15),t.\u0275\u0275listener("change",function(){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(3).toggleSelection(a.id)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"span",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2).ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("checked",e.id&&r.selected[e.id]||o.allSelected(r.selectionStatus))("disabled",o.allSelected(r.selectionStatus))}}function UP(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0,11),t.\u0275\u0275template(1,PP,1,0,"th",6),t.\u0275\u0275template(2,kP,4,2,"td",7),t.\u0275\u0275elementContainerEnd())}function VP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-sort-button",20),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("state",r.getFieldSort(e))}}function $P(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275element(1,"scrm-label",18),t.\u0275\u0275template(2,VP,1,1,"scrm-sort-button",19),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.label)("module",r.config.module||""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.sort$&&e.sortable)}}function zP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"td",13),t.\u0275\u0275element(1,"scrm-field",21),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("mode","list")("type",r.type)("field",o.getField(r,e))("record",e)}}function GP(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0,17),t.\u0275\u0275template(1,$P,3,3,"th",6),t.\u0275\u0275template(2,zP,2,4,"td",7),t.\u0275\u0275elementContainerEnd()),2&n&&t.\u0275\u0275property("cdkColumnDef",i.$implicit.name)}function WP(n,i){1&n&&t.\u0275\u0275element(0,"th",12)}function KP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-line-action-menu",23),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",r.config.lineActions)("record",e)}}function HP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"td",13),t.\u0275\u0275template(1,KP,1,2,"scrm-line-action-menu",22),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&r.config.lineActions)}}function ZP(n,i){1&n&&t.\u0275\u0275element(0,"tr",24)}function qP(n,i){1&n&&t.\u0275\u0275element(0,"tr",25)}function JP(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"p",26),t.\u0275\u0275element(2,"scrm-label",27),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function QP(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-loading-spinner",28),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275classProp("m-5",!e.records||0===e.records.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("overlay",!0)}}function XP(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"table",2),t.\u0275\u0275template(3,UP,3,0,"ng-container",3),t.\u0275\u0275template(4,GP,3,1,"ng-container",4),t.\u0275\u0275elementContainerStart(5,5),t.\u0275\u0275template(6,WP,1,0,"th",6),t.\u0275\u0275template(7,HP,2,1,"td",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(8,ZP,1,0,"tr",8),t.\u0275\u0275template(9,qP,1,0,"tr",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,JP,3,0,"div",0),t.\u0275\u0275template(11,QP,2,3,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("dataSource",r.config.dataSource),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.selection),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.columns),t.\u0275\u0275advance(4),t.\u0275\u0275property("cdkHeaderRowDef",e.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("cdkRowDefColumns",e.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loading&&0===e.records.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading)}}function YP(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-bulk-action-menu",5),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function e3(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-pagination",6),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("state",e.pagination)}}function t3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.addButton)}}function n3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",1),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.removeButton)}}function r3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-dropdown-button",7),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.store.myFilterButton)}}function i3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275element(1,"input",14),t.\u0275\u0275elementStart(2,"label",15),t.\u0275\u0275element(3,"scrm-label",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("value",e.value),t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.labelKey)}}function o3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275template(1,i3,4,2,"div",12),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.store.special)}}function a3(n,i){1&n&&t.\u0275\u0275element(0,"scrm-button",7),2&n&&t.\u0275\u0275property("config",i.$implicit)}function s3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275template(1,a3,1,1,"scrm-button",18),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.store.gridButtons)}}function l3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"scrm-field-grid",8),t.\u0275\u0275template(1,o3,2,1,"div",9),t.\u0275\u0275template(2,s3,2,1,"div",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275property("actions",!0)("appendActions",!1)("fieldMode",r.store.mode)("fields",r.store.displayFields)("record",e)("special",r.store.special.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.store.special.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.store.gridButtons)}}function c3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-grid",7),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getGridConfig())}}function u3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"scrm-panel",1),t.\u0275\u0275template(1,r3,2,1,"div",2),t.\u0275\u0275elementStart(2,"div",3),t.\u0275\u0275template(3,l3,3,8,"scrm-field-grid",4),t.\u0275\u0275template(4,c3,2,1,"ng-container",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("klass","filter-panel ",e.config&&e.config.klass||"",""),t.\u0275\u0275property("titleKey","LBL_BASIC_FILTER")("close",e.store.closeButton)("isCollapsed$",e.store.isCollapsed$)("mode",e.store.panelMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.store.myFilterButton),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.store.displayFields&&e.store.displayFields.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config&&e.config.savedFilterEdit)}}function d3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-grid",4),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getGridConfig())}}function f3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"scrm-panel",1),t.\u0275\u0275elementStart(1,"div",2),t.\u0275\u0275template(2,d3,2,1,"ng-container",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("klass","record-panel ",e.config&&e.config.klass||"",""),t.\u0275\u0275property("close",e.closeButton)("isCollapsed$",e.isCollapsed$)("mode",e.panelMode)("titleKey",e.config.title||""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.config)}}const p3=["list"];function m3(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275element(1,"scrm-label",5),t.\u0275\u0275elementEnd())}function h3(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-loading-spinner",7),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("overlay",!0))}function g3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275element(1,"scrm-button",13),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getLoadMoreButton())}}function v3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",null,14),t.\u0275\u0275element(2,"scrm-record-thread-item",13),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275reference(1),o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("config",o.buildItem(e,r))}}function _3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275element(1,"scrm-button",13),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getLoadMoreButton())}}function y3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",8,9),t.\u0275\u0275template(2,g3,2,1,"div",10),t.\u0275\u0275template(3,v3,3,1,"div",11),t.\u0275\u0275template(4,_3,2,1,"div",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngStyle",e.getMaxHeight()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","asc"===e.direction&&!e.allLoaded()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.records),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","desc"===e.direction&&!e.allLoaded())}}function b3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",16),t.\u0275\u0275elementStart(1,"div",17),t.\u0275\u0275element(2,"scrm-record-thread-item",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",18),t.\u0275\u0275element(4,"scrm-button",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.buildCreateItem()),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.getCreateButton())}}function M3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,b3,5,2,"div",15),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loading)}}const C3=["body"];function S3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-flexbox",6),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.buildConfig(e.config.metadata.headerLayout))}}function x3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-flexbox",6),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.buildConfig(e.config.metadata.bodyLayout))}}function w3(n,i){1&n&&t.\u0275\u0275element(0,"div",7)}function E3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"scrm-button",6),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getCollapseButton())}}function D3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275template(2,S3,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",null,3),t.\u0275\u0275template(5,x3,2,1,"ng-container",2),t.\u0275\u0275template(6,w3,1,0,"div",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,E3,2,1,"div",5),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMapInterpolate2("d-flex flex-column record-thread-item ",e.config&&e.config.klass||""," ",e.dynamicClass,""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.headerLayout),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("record-thread-item-body flex-grow-1 ",e.getBodyClass(),""),t.\u0275\u0275classProp("collapsed",e.collapsible&&e.collapsed)("expanded",e.collapsible&&!e.collapsed),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.bodyLayout),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.collapsible&&e.collapsed),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.collapsible)}}function I3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"option",18),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("value",r.getKey(e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.language.getFieldLabel(e.labelKey)," ")}}function F3(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275elementStart(1,"div",14),t.\u0275\u0275elementStart(2,"form",15),t.\u0275\u0275elementStart(3,"select",16),t.\u0275\u0275listener("ngModelChange",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).onChartSelect()})("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).selectedChart=o}),t.\u0275\u0275template(4,I3,2,2,"option",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("ngModel",e.selectedChart),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.configuredCharts)}}function A3(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-chart",20),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("dataSource",e.dataSource)("type",e.chartType)}}function N3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,A3,1,2,"scrm-chart",19),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dataSource&&e.chartType)}}function T3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275element(1,"scrm-loading-spinner",22),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("m-5",!e.dataSource),t.\u0275\u0275advance(1),t.\u0275\u0275property("overlay",!0)}}function L3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"p",23),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.messageLabelKey)," ")}}function R3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"scrm-widget-panel",1),t.\u0275\u0275elementStart(1,"div",2),t.\u0275\u0275elementStart(2,"div",3),t.\u0275\u0275elementStart(3,"div",4),t.\u0275\u0275elementStart(4,"div",5),t.\u0275\u0275template(5,F3,5,2,"div",6),t.\u0275\u0275elementStart(6,"div",7),t.\u0275\u0275elementStart(7,"div",8),t.\u0275\u0275elementStart(8,"div",9),t.\u0275\u0275template(9,N3,2,1,"ng-container",10),t.\u0275\u0275template(10,T3,2,3,"div",11),t.\u0275\u0275template(11,L3,2,1,"p",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("title",e.title),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",e.isConfigured&&e.chartOptions.toggle),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.selectedChart&&!e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(e.loading||e.isConfigured()&&e.dataSource))}}function O3(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"scrm-loading-spinner",9),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("overlay",!0))}function j3(n,i){1&n&&t.\u0275\u0275element(0,"scrm-chart-message-area",10)}function B3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"a",30),t.\u0275\u0275element(1,"scrm-field",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("routerLink",r.redirectLink(e.record.module,e.record.id)),t.\u0275\u0275advance(1),t.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record)}}function P3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"a"),t.\u0275\u0275element(1,"scrm-field",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record)}}function k3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",31),t.\u0275\u0275elementStart(1,"small",26),t.\u0275\u0275element(2,"scrm-field",32),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("type",e.description.type)("field",e.description)("record",e.record)}}function U3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"div",12),t.\u0275\u0275elementStart(2,"div",13),t.\u0275\u0275elementStart(3,"div",14),t.\u0275\u0275element(4,"scrm-image",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",12),t.\u0275\u0275elementStart(6,"div",16),t.\u0275\u0275element(7,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",18),t.\u0275\u0275elementStart(9,"div",19),t.\u0275\u0275elementStart(10,"div",20),t.\u0275\u0275elementStart(11,"p",21),t.\u0275\u0275template(12,B3,2,4,"a",22),t.\u0275\u0275template(13,P3,2,3,"a",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(14,k3,3,3,"div",24),t.\u0275\u0275elementStart(15,"div",25),t.\u0275\u0275elementStart(16,"small",26),t.\u0275\u0275element(17,"scrm-field",27),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",28),t.\u0275\u0275elementStart(19,"small",29),t.\u0275\u0275element(20,"scrm-field",27),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275classMapInterpolate1("d-flex flex-row m-2 history-timeline-entry entry-",e.color,""),t.\u0275\u0275advance(4),t.\u0275\u0275property("image",e.icon),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf","audit"!==e.record.module),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","audit"===e.record.module),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.description),t.\u0275\u0275advance(3),t.\u0275\u0275property("type",e.user.type)("field",e.user)("record",e.record),t.\u0275\u0275advance(3),t.\u0275\u0275property("type",e.date.type)("field",e.date)("record",e.record)}}function V3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,U3,21,13,"div",11),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.length>0)}}function $3(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275template(2,O3,2,1,"div",4),t.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",5),t.\u0275\u0275listener("scroll",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().onScroll()}),t.\u0275\u0275template(4,j3,1,0,"scrm-chart-message-area",6),t.\u0275\u0275template(5,V3,2,1,"div",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==r.adapter?null:r.adapter.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(4,gc,e.length<=0?"history-timeline-viewport-no-data":"history-timeline-viewport")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=r.adapter&&r.adapter.loading)&&e.length<=0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e)}}function z3(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275element(2,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function G3(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-thread",5),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.recordThreadConfig)}}function W3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275element(2,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.getErrorMessage())}}const K3=function(n,i,e){return{config:n,context:i,context$:e}};function H3(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",5),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,K3,e.config,e.context,e.context$))}}function Z3(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-button-group",7),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config$",e.config$)}}function q3(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"a",8),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).toggleSubPanels()}),t.\u0275\u0275elementStart(1,"div",9),t.\u0275\u0275element(2,"scrm-label",10),t.\u0275\u0275element(3,"scrm-image",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("image",e.toggleIcon),t.\u0275\u0275attribute("aria-expanded",!e.isCollapsed)}}const J3=function(n){return{"sub-panel-banner-button-active":n}};function Q3(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(3).showSubpanel(a.key,a.value)}),t.\u0275\u0275element(1,"scrm-grid-widget",16),t.\u0275\u0275elementEnd()}if(2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(2,J3,!0===e.value.show)),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.getGridConfig(e.value))}}function X3(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275elementStart(1,"div",13),t.\u0275\u0275template(2,Q3,2,4,"div",14),t.\u0275\u0275pipe(3,"keyvalue"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngbCollapse",r.isCollapsed),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(3,2,e.subpanels))}}function Y3(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-subpanel",18),2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("maxColumns$",o.maxColumns$)("store",e)("onClose",o.getCloseCallBack(r,e))}}function ek(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Y3,1,3,"scrm-subpanel",17),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.show)}}function tk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,ek,2,1,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.subpanels[e])}}function nk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ngb-accordion",1,2),t.\u0275\u0275elementStart(3,"ngb-panel",3),t.\u0275\u0275template(4,q3,4,2,"ng-template",4),t.\u0275\u0275template(5,X3,4,4,"ng-template",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275template(7,tk,2,1,"ng-container",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(7),t.\u0275\u0275property("ngForOf",e.openSubpanels)}}function rk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,e.appStrings[r.messageLabelKey]||"")," ")}}function ik(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(3).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,r.getLabel(e.value.labelKey)),": ")}}function ok(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(3).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,r.getLabel(e.value.labelKey))," ")}}function ak(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275template(1,ik,3,3,"ng-container",6),t.\u0275\u0275template(2,ok,3,3,"ng-container",6),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext().ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.isValueEmpty(r.statistics[e.key])),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.isValueEmpty(r.statistics[e.key]))}}function sk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,ak,3,2,"div",8),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.value.labelKey&&r.getLabel(e.value.labelKey))}}function lk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-field",12),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(3).$implicit,r=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("type",r.statistics[e.key].field.type)("field",r.statistics[e.key].field)}}function ck(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275template(1,lk,2,2,"ng-container",6),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext().ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.isValueEmpty(r.statistics[e.key])||!0!==e.value.hideValueIfEmpty)}}function uk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,ck,2,1,"div",10),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.statistics[e.key].loading&&r.statistics[e.key].field)}}function dk(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1," - "),t.\u0275\u0275elementContainerEnd())}function fk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275element(1,"scrm-inline-loading-spinner"),t.\u0275\u0275template(2,dk,2,0,"ng-container",6),t.\u0275\u0275elementEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!(e||r.key&&o.statistics[r.key]))}}function pk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,r.getLabel(e.value.endLabelKey))," ")}}function mk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,pk,3,3,"div",14),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.value.endLabelKey&&r.getLabel(e.value.endLabelKey))}}function hk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",5),t.\u0275\u0275template(2,sk,2,1,"ng-container",6),t.\u0275\u0275template(3,uk,2,1,"ng-container",6),t.\u0275\u0275template(4,fk,3,1,"div",7),t.\u0275\u0275pipe(5,"async"),t.\u0275\u0275template(6,mk,2,1,"ng-container",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext().ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!o.shouldHide(r.statistics[e.key],e.value)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.key&&r.statistics[e.key]&&!o.shouldHide(r.statistics[e.key],e.value)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(5,4,e.value.store.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!o.shouldHide(r.statistics[e.key],e.value))}}function gk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,rk,3,3,"div",2),t.\u0275\u0275template(2,hk,7,6,"ng-container",3),t.\u0275\u0275pipe(3,"keyvalue"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.messageLabelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(3,2,e.statistics))}}const vk=function(n,i){return{config:n,context:i}};function _k(n,i){if(1&n&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,vk,e.config,e.context))}}function yk(n,i){1&n&&t.\u0275\u0275element(0,"scrm-status-bar")}function bk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"scrm-record-header"),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"hr",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,yk,1,0,"scrm-status-bar",4),t.\u0275\u0275element(5,"scrm-record-container"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.showStatusBar)}}function Mk(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275elementStart(1,"div",12),t.\u0275\u0275elementStart(2,"div",13),t.\u0275\u0275element(3,"div",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function Ck(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275elementStart(1,"div",12),t.\u0275\u0275element(2,"scrm-top-widget",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.topWidgetConfig.widget)("context",r.getViewContext())("type",e.topWidgetConfig.widget.type)}}function Sk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Ck,3,3,"div",5),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.topWidgetConfig.show&&r.hasTopWidgetMetadata(e.topWidgetConfig.widget))}}function xk(n,i){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-content-skeleton"),t.\u0275\u0275elementContainerEnd())}function wk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-content",16),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",e.getContentAdapter())}}function Ek(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275element(1,"scrm-sidebar-widget",20),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e)("context$",r.getViewContext$())("context",r.getViewContext())("type",e.type)}}function Dk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275elementStart(1,"div",8),t.\u0275\u0275template(2,Ek,2,4,"div",18),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.bottomWidgetConfig.widgets)}}function Ik(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275elementStart(1,"div",8),t.\u0275\u0275element(2,"scrm-subpanel-container",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.getSubpanelsConfig())}}function Fk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275element(1,"scrm-sidebar-widget",24),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("type",e.type)("context",r.getViewContext())("context$",r.getViewContext$())("config",e)}}function Ak(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275template(1,Fk,2,4,"div",18),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}const n_=function(n){return{"col-lg-12":n}};function Nk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275elementStart(1,"div",2),t.\u0275\u0275elementStart(2,"div",3),t.\u0275\u0275elementStart(3,"div",4),t.\u0275\u0275template(4,Mk,4,0,"div",5),t.\u0275\u0275template(5,Sk,2,1,"ng-container",6),t.\u0275\u0275elementStart(6,"div",7),t.\u0275\u0275elementStart(7,"div",8),t.\u0275\u0275template(8,xk,2,0,"ng-container",6),t.\u0275\u0275template(9,wk,2,1,"ng-container",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,Dk,3,1,"div",9),t.\u0275\u0275template(11,Ik,3,1,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(12,Ak,2,1,"div",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(8,n_,!e.sidebarWidgetConfig.show)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.loading),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.bottomWidgetConfig.show&&e.bottomWidgetConfig.widgets),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.showSubpanels),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.sidebarWidgetConfig.show&&e.sidebarWidgetConfig.widgets)}}function Tk(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-dynamic-label",14),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function Lk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275element(1,"scrm-favorite-toggle",16),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("record",e.record)}}function Rk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275element(1,"scrm-action-group-menu",18),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.actionsAdapter)}}function Ok(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275elementStart(2,"div",4),t.\u0275\u0275elementStart(3,"div",5),t.\u0275\u0275element(4,"div",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"div",7),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275elementStart(7,"div",8),t.\u0275\u0275element(8,"scrm-module-title",9),t.\u0275\u0275elementStart(9,"div",10),t.\u0275\u0275template(10,Tk,1,2,"scrm-dynamic-label",11),t.\u0275\u0275template(11,Lk,2,1,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(12,"div",7),t.\u0275\u0275elementStart(13,"div",5),t.\u0275\u0275template(14,Rk,2,1,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(8),t.\u0275\u0275property("title",e.moduleTitle),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.record&&e.record.fields),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.record)}}function jk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",20),t.\u0275\u0275elementStart(1,"div",21),t.\u0275\u0275element(2,"scrm-module-title",9),t.\u0275\u0275element(3,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("title",e.moduleTitle)}}function Bk(n,i){if(1&n&&t.\u0275\u0275element(0,"scrm-dynamic-label",14),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function Pk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275element(1,"scrm-favorite-toggle",16),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("record",e.record)}}function kk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275element(1,"scrm-action-group-menu",26),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.actionsAdapter)("actionContext",e.getActionContext(e.record))}}function Uk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",20),t.\u0275\u0275elementStart(1,"div",21),t.\u0275\u0275element(2,"scrm-module-title",9),t.\u0275\u0275elementStart(3,"div",10),t.\u0275\u0275template(4,Bk,1,2,"scrm-dynamic-label",11),t.\u0275\u0275template(5,Pk,2,1,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",23),t.\u0275\u0275elementStart(7,"div",24),t.\u0275\u0275element(8,"div",7),t.\u0275\u0275template(9,kk,2,2,"div",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("title",e.moduleTitle),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.record&&e.record.fields),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.record)}}function Vk(n,i){if(1&n&&(t.\u0275\u0275template(0,jk,4,1,"div",19),t.\u0275\u0275template(1,Uk,10,4,"div",19)),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngIf",e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loading)}}function $k(n,i){1&n&&t.\u0275\u0275element(0,"scrm-status-bar")}function zk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"scrm-record-header"),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"hr",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,$k,1,0,"scrm-status-bar",4),t.\u0275\u0275element(5,"scrm-record-container"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.showStatusBar)}}function Gk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275element(5,"scrm-label",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275element(7,"scrm-label",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",8),t.\u0275\u0275elementStart(9,"div",9),t.\u0275\u0275elementStart(10,"div",10),t.\u0275\u0275elementStart(11,"div",11),t.\u0275\u0275elementStart(12,"div",12),t.\u0275\u0275elementStart(13,"label",13),t.\u0275\u0275element(14,"scrm-label",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(15,": "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",15),t.\u0275\u0275elementStart(17,"div",16),t.\u0275\u0275element(18,"scrm-field",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div"),t.\u0275\u0275element(20,"scrm-action-group-menu",18),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(14),t.\u0275\u0275property("labelKey",r.store.getIgnoreSystemChecksField().definition.vname),t.\u0275\u0275advance(4),t.\u0275\u0275property("field",r.store.getIgnoreSystemChecksField())("mode","edit")("record",e.record)("type",r.store.getIgnoreSystemChecksField().type),t.\u0275\u0275advance(2),t.\u0275\u0275property("actionContext",r.getActionContext(e.record))("config",r.actionsAdapter)}}function Wk(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"scrm-install-header"),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"hr",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"scrm-install-container"),t.\u0275\u0275elementEnd())}function Kk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"scrm-sidebar-widget",9),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e)("context",r.getViewContext())("context$",r.store.context$)("type",e.type)}}function Hk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",6),t.\u0275\u0275template(2,Kk,2,4,"div",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("display",r.getDisplay(!(!e.sidebarWidgetConfig.show||!e.sidebarWidgetConfig.widgets))),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}function Zk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275elementStart(1,"div",2),t.\u0275\u0275elementStart(2,"div",3),t.\u0275\u0275element(3,"scrm-table",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,Hk,3,3,"ng-container",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(3,n_,!r.getDisplayWidgets())),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.tableConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.sidebarWidgetConfig.widgetsEnabled)}}function qk(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275elementStart(2,"div",4),t.\u0275\u0275elementStart(3,"div",5),t.\u0275\u0275elementStart(4,"div",6),t.\u0275\u0275element(5,"scrm-action-menu"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"div",7),t.\u0275\u0275elementStart(7,"div",5),t.\u0275\u0275elementStart(8,"div",8),t.\u0275\u0275element(9,"scrm-module-title",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"div",7),t.\u0275\u0275elementStart(11,"div",5),t.\u0275\u0275elementStart(12,"div",10),t.\u0275\u0275element(13,"scrm-settings-menu"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(9),t.\u0275\u0275property("title",e.moduleTitle)}}function Jk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275elementStart(1,"div",4),t.\u0275\u0275elementStart(2,"div",5),t.\u0275\u0275element(3,"scrm-list-filter",19),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("config",e.filterAdapter.getConfig())}}function Qk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275elementStart(1,"div",4),t.\u0275\u0275elementStart(2,"div",5),t.\u0275\u0275element(3,"scrm-record-panel",19),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("config",e.recordPanelConfig)}}function Xk(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275elementStart(1,"div",12),t.\u0275\u0275element(2,"scrm-module-title",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",13),t.\u0275\u0275elementStart(4,"div",14),t.\u0275\u0275elementStart(5,"div",7),t.\u0275\u0275element(6,"scrm-action-menu"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",7),t.\u0275\u0275element(8,"scrm-settings-menu"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",15),t.\u0275\u0275element(10,"hr",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,Jk,4,1,"div",17),t.\u0275\u0275template(12,Qk,4,1,"div",17)),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("title",e.moduleTitle),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngIf","filters"===e.actionPanel),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","recordPanel"===e.actionPanel&&e.recordPanelConfig)}}function Yk(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"scrm-list-header"),t.\u0275\u0275element(2,"scrm-list-container"),t.\u0275\u0275elementEnd())}function e4(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"option",17),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,r=t.\u0275\u0275nextContext(3);let o;t.\u0275\u0275property("selected",(null!==(o=r.language)&&void 0!==o?o:"en_us")===e)("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.getEnabledLanguages()[e]," ")}}function t4(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275elementStart(1,"div",5),t.\u0275\u0275elementStart(2,"label",11),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"div",12),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275elementStart(6,"div",13),t.\u0275\u0275elementStart(7,"select",14,15),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275reference(8);return t.\u0275\u0275nextContext(2).onLanguageSelect(o.value)}),t.\u0275\u0275template(9,e4,2,3,"option",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.appStrings.LBL_LANGUAGE),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",r.getEnabledLanguagesKeys())}}function n4(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function r4(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function i4(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",29),t.\u0275\u0275elementStart(1,"a",30),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(3).flipCard()}),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LOGIN_FORGOT_PASSWORD," ")}}function o4(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275elementStart(1,"div",13),t.\u0275\u0275element(2,"scrm-image",19),t.\u0275\u0275elementStart(3,"input",20,21),t.\u0275\u0275listener("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).uname=o}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,n4,2,1,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",13),t.\u0275\u0275element(7,"scrm-image",23),t.\u0275\u0275elementStart(8,"input",24,25),t.\u0275\u0275listener("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).passw=o}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,r4,2,1,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"button",26),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext();const o=t.\u0275\u0275reference(2),a=t.\u0275\u0275nextContext();return o.control.markAllAsTouched(),o.valid&&a.doLogin()}),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(13,i4,3,1,"div",27),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275reference(4),r=t.\u0275\u0275reference(9),o=t.\u0275\u0275nextContext().ngIf,a=t.\u0275\u0275nextContext();t.\u0275\u0275property("@fade",void 0),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),t.\u0275\u0275propertyInterpolate("placeholder",o.appStrings.LBL_USER_NAME),t.\u0275\u0275property("ngModel",a.uname),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.invalid&&e.touched),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("is-invalid",r.invalid&&r.touched),t.\u0275\u0275propertyInterpolate("placeholder",o.appStrings.LBL_PASSWORD),t.\u0275\u0275property("ngModel",a.passw),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.invalid&&r.touched),t.\u0275\u0275advance(1),t.\u0275\u0275property("scrm-button-loading",a.loading),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",o.appStrings.LBL_LOGIN_BUTTON_LABEL," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.showForgotPassword)}}function a4(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function s4(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function l4(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",31),t.\u0275\u0275elementStart(1,"div",13),t.\u0275\u0275element(2,"scrm-image",19),t.\u0275\u0275elementStart(3,"input",20,21),t.\u0275\u0275listener("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).uname=o}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,a4,2,1,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",13),t.\u0275\u0275element(7,"scrm-image",32),t.\u0275\u0275elementStart(8,"input",33,34),t.\u0275\u0275listener("ngModelChange",function(o){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).email=o}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,s4,2,1,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"button",35),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext();const o=t.\u0275\u0275reference(2),a=t.\u0275\u0275nextContext();return o.control.markAllAsTouched(),o.valid&&a.recoverPassword()}),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div"),t.\u0275\u0275elementStart(14,"a",36),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(2).flipCard()}),t.\u0275\u0275text(15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275reference(4),r=t.\u0275\u0275reference(9),o=t.\u0275\u0275nextContext().ngIf,a=t.\u0275\u0275nextContext();t.\u0275\u0275property("@fade",void 0),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),t.\u0275\u0275propertyInterpolate("placeholder",o.appStrings.LBL_USER_NAME),t.\u0275\u0275property("ngModel",a.uname),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.invalid&&e.touched),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("is-invalid",r.invalid&&r.touched),t.\u0275\u0275propertyInterpolate("placeholder",o.appStrings.LBL_EMAIL),t.\u0275\u0275property("ngModel",a.email),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.invalid&&r.touched),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",o.appStrings.LBL_GENERATE_PASSWORD_BUTTON_TITLE," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",o.appStrings.LBL_BACK," ")}}function c4(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275elementStart(1,"form",2,3),t.\u0275\u0275elementStart(3,"div",4),t.\u0275\u0275elementStart(4,"div",5),t.\u0275\u0275element(5,"scrm-logo-ui"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,t4,10,2,"div",6),t.\u0275\u0275elementStart(7,"div",7),t.\u0275\u0275template(8,o4,14,14,"div",8),t.\u0275\u0275template(9,l4,16,13,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=i.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",e.showLanguages),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","front"===r.cardState),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","back"===r.cardState)}}let Zr=(()=>{class n{constructor(e){this.apollo=e}fetch(e,r,o){const a=o.fields,s={query:q()`
              query ${e}($id: ID!) {
                ${e}(id: $id) {
                  ${a.join("\n")}
                }
              }
            `,variables:{id:r}};return this.apollo.query(s)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})(),Ia=(()=>{class n{constructor(e){this.apollo=e}fetchAll(e,r){const o=r.fields,a={query:q()`
                query ${e}{
                    ${e} {
                        edges {
                            node {
                                ${o.join("\n")}
                            }
                        }
                    }
                }
            `};return this.apollo.query(a)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})();const r_={configs:{},loading:!1};let oi=(0,D.deepClone)(r_),$o=null,yt=(()=>{class n{constructor(e){this.collectionGQL=e,this.store=new w.BehaviorSubject(oi),this.state$=this.store.asObservable(),this.resourceName="systemConfigs",this.fieldsMetadata={fields:["id","_id","value","items"]},this.configs$=this.state$.pipe((0,v.map)(r=>r.configs),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(r=>r.loading))}getConfigValue(e){return oi.configs&&oi.configs[e]?null!==oi.configs[e].value?oi.configs[e].value:oi.configs[e].items:null}getHomePage(){let e="home";const r=this.getConfigValue("default_module");return r&&(e=r),e}clear(){$o=null,this.updateState((0,D.deepClone)(r_))}clearAuthBased(){this.clear()}load(){return this.updateState(Object.assign(Object.assign({},oi),{loading:!0})),this.getSystemConfigs().pipe((0,v.tap)(e=>{this.updateState(Object.assign(Object.assign({},oi),{configs:e,loading:!1}))}))}isCached(){return null!==$o}set(e){$o=(0,w.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},oi),{configs:e,loading:!1}))}updateState(e){this.store.next(oi=e)}getSystemConfigs(){return null==$o&&($o=this.fetch().pipe((0,v.shareReplay)(1))),$o}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,v.map)(({data:e})=>{const r={};return e.systemConfigs&&e.systemConfigs.edges&&e.systemConfigs.edges.forEach(o=>{r[o.node._id]=o.node}),r}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ia))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ia))},token:n,providedIn:"root"}),n})(),i_=(()=>{class n{constructor(e,r="loading_display_delay"){var o,a,s;this.config=e,this.delayConfigKey=r,this.loadingStore=new w.BehaviorSubject(!1),this.loadingBufferStore=new w.BehaviorSubject(!1),this.subs=[],this.buffered=!1,this.loading$=this.loadingStore.asObservable();const l=null!==(o=e.getConfigValue("ui"))&&void 0!==o?o:{},c=null!==(s=parseInt(null!==(a=l[r])&&void 0!==a?a:""))&&void 0!==s?s:1500;this.loadingBufferStore$=this.loadingBufferStore.asObservable().pipe((0,v.debounceTime)(c)),this.subs.push(this.loadingBufferStore$.subscribe(f=>{!this.buffered||this.loadingStore.next(f)}))}updateLoading(e){if(!0===e)return this.buffered=!0,void this.loadingBufferStore.next(e);this.buffered=!1,this.loadingStore.next(e),this.loadingBufferStore.next(e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(String))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Ns=(()=>{class n{constructor(e){this.config=e}create(e="loading_display_delay"){return new i_(this.config,e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt))},token:n,providedIn:"root"}),n})();const o_={loading:!1,initialAppLoading:!0,module:null,view:null,loaded:!1,routeUrl:null,preLoginUrl:null,activeRequests:0};let Ln=(0,D.deepClone)(o_),At=(()=>{class n{constructor(e){this.loadingBufferFactory=e,this.store=new w.BehaviorSubject(Ln),this.state$=this.store.asObservable(),this.loadingQueue={},this.subs=[],this.loading$=this.state$.pipe((0,v.map)(r=>r.loading),(0,v.distinctUntilChanged)()),this.module$=this.state$.pipe((0,v.map)(r=>r.module),(0,v.distinctUntilChanged)()),this.view$=this.state$.pipe((0,v.map)(r=>r.view),(0,v.distinctUntilChanged)()),this.initialAppLoading$=this.state$.pipe((0,v.map)(r=>r.initialAppLoading),(0,v.distinctUntilChanged)()),this.activeRequests$=this.state$.pipe((0,v.map)(r=>r.activeRequests),(0,v.distinctUntilChanged)()),this.vm$=(0,w.combineLatest)([this.loading$,this.module$,this.view$,this.initialAppLoading$]).pipe((0,v.map)(([r,o,a,s])=>({loading:r,module:o,view:a,loaded:Ln.loaded,initialAppLoading:s})))}clear(){this.loadingQueue={},this.updateState((0,D.deepClone)(o_)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}init(){this.initLoadingBuffer()}getActiveRequests(){return Ln.activeRequests}addActiveRequest(){let e=Ln.activeRequests;(0,D.isVoid)(e)&&(e=0),e++,this.updateState(Object.assign(Object.assign({},Ln),{activeRequests:e}))}removeActiveRequest(){let e=Ln.activeRequests;(0,D.isVoid)(e)?e=0:e--,e<0&&(e=0),this.updateState(Object.assign(Object.assign({},Ln),{activeRequests:e}))}updateLoading(e,r,o=!0){if(this.initLoadingBuffer(),!0===r)return this.addToLoadingQueue(e),this.loadingBuffer.updateLoading(r),void(o||this.updateState(Object.assign(Object.assign({},Ln),{loading:r})));this.removeFromLoadingQueue(e),this.hasActiveLoading()&&(this.loadingBuffer.updateLoading(r),this.updateState(Object.assign(Object.assign({},Ln),{loading:r})))}updateInitialAppLoading(e){this.updateState(Object.assign(Object.assign({},Ln),{initialAppLoading:e}))}isLoaded(){return Ln.loaded}setLoaded(e){this.updateState(Object.assign(Object.assign({},Ln),{loaded:e}))}setModule(e){this.updateState(Object.assign(Object.assign({},Ln),{module:e}))}getModule(){var e;return null!==(e=null==Ln?void 0:Ln.module)&&void 0!==e?e:""}setView(e){this.updateState(Object.assign(Object.assign({},Ln),{view:e}))}getView(){return Ln.view}setRouteUrl(e){this.updateState(Object.assign(Object.assign({},Ln),{routeUrl:e}))}getRouteUrl(){return Ln.routeUrl}setPreLoginUrl(e){this.updateState(Object.assign(Object.assign({},Ln),{preLoginUrl:e}))}getPreLoginUrl(){var e;return null!==(e=Ln.preLoginUrl)&&void 0!==e?e:""}initLoadingBuffer(){this.loadingBuffer||(this.loadingBuffer=this.loadingBufferFactory.create(),this.subs.push(this.loadingBuffer.loading$.subscribe(e=>{this.updateState(Object.assign(Object.assign({},Ln),{loading:e}))})))}hasActiveLoading(){return Object.keys(this.loadingQueue).length<1}removeFromLoadingQueue(e){this.loadingQueue[e]&&delete this.loadingQueue[e]}addToLoadingQueue(e){this.loadingQueue[e]=!0}updateState(e){this.store.next(Ln=e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ns))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ns))},token:n,providedIn:"root"}),n})(),Fr=(()=>{class n{constructor(){this.storageKey="scrm-session-storage",this.stickyStorageKey="scrm-sticky-session-storage"}clear(){this.getLocalStorage().removeItem(this.storageKey);const e=this.getLocalStorage().getItem(this.stickyStorageKey);e&&this.getLocalStorage().setItem(this.storageKey,e)}set(e,r,o=!1){this.store(this.storageKey,e,r),o&&this.store(this.stickyStorageKey,e,r)}store(e,r,o){const a=this.getLocalStorage().getItem(e);let s={};a&&(s=JSON.parse(a)),s[r]=o,this.getLocalStorage().setItem(e,JSON.stringify(s))}get(e){const r=this.getLocalStorage().getItem(this.storageKey);let o={};return r&&(o=JSON.parse(r)),o[e]}getLocalStorage(){return localStorage}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),_c=(()=>{class n{constructor(e){this.apollo=e}create(e,r,o,a){const s=a.fields,l={mutation:q()`
                mutation create${r}($input: create${r}Input!) {
                  create${r}(input: $input) {
                    ${e} {
                      ${s.join("\n")}
                    }
                    clientMutationId
                  }
                }
            `,variables:{input:o}};return this.apollo.mutate(l)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})();const u4={id:null,_id:null,status:null,async:null,type:null,options:null,messages:[]};let Ar=(()=>{class n{constructor(e){this.recordMutationGQL=e,this.graphqlName="process",this.coreName="Process",this.createFieldsMetadata={fields:["_id","status","async","type","messages","data"]}}submit(e,r){return this.create(e,r)}create(e,r){return this.recordMutationGQL.create(this.graphqlName,this.coreName,{type:e,options:r},this.createFieldsMetadata).pipe((0,v.map)(({data:a})=>{const s=Object.assign({},u4);return a.createProcess&&a.createProcess.process?a.createProcess.process:s}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(_c))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(_c))},token:n,providedIn:"root"}),n})();const a_={appStrings:{},appListStrings:{},modStrings:{},languageKey:"en_us",loaded:{},hasChanged:!1};let Bn=(0,D.deepClone)(a_);const s_={appStrings:{},appListStrings:{},modStrings:{}};let ai={},ar=(0,D.deepClone)(s_),Ke=(()=>{class n{constructor(e,r,o,a,s){this.recordGQL=e,this.appStateStore=r,this.localStorage=o,this.processService=a,this.configs=s,this.store=new w.BehaviorSubject(Bn),this.state$=this.store.asObservable(),this.config={appStrings:{fetch:"fetchAppStrings",resourceName:"appStrings",metadata:{fields:["id","_id","items"]}},appListStrings:{fetch:"fetchAppListStrings",resourceName:"appListStrings",metadata:{fields:["id","_id","items"]}},modStrings:{fetch:"fetchModStrings",resourceName:"modStrings",metadata:{fields:["id","_id","items"]}}},this.appStrings$=this.state$.pipe((0,v.map)(l=>l.appStrings),(0,v.distinctUntilChanged)()),this.appListStrings$=this.state$.pipe((0,v.map)(l=>l.appListStrings),(0,v.distinctUntilChanged)()),this.modStrings$=this.state$.pipe((0,v.map)(l=>l.modStrings),(0,v.distinctUntilChanged)()),this.languageKey$=this.state$.pipe((0,v.map)(l=>l.languageKey),(0,v.distinctUntilChanged)()),this.vm$=(0,w.combineLatest)([this.appStrings$,this.appListStrings$,this.modStrings$,this.languageKey$]).pipe((0,v.map)(([l,c,f,u])=>({appStrings:l,appListStrings:c,modStrings:f,languageKey:u})))}clear(){ai={},ar=(0,D.deepClone)(s_),this.updateState((0,D.deepClone)(a_))}clearAuthBased(){["modStrings","appListStrings"].forEach(r=>{ai&&ai[r]&&delete ai[r]}),ar.modStrings={},ar.appListStrings={}}changeLanguage(e,r=!1){const o=[];Object.keys(ai).forEach(a=>ai[a]&&o.push(a)),Bn.hasChanged=!0,this.appStateStore.updateLoading("change-language",!0),this.load(e,o,r).pipe((0,v.tap)(()=>{this.localStorage.set("selected_language",e,!0),this.appStateStore.updateLoading("change-language",!1)})).subscribe()}getLanguageStrings(){return Bn?{appStrings:Bn.appStrings,appListStrings:Bn.appListStrings,modStrings:Bn.modStrings,languageKey:Bn.languageKey}:null}getAppString(e){return Bn.appStrings&&Bn.appStrings[e]?Bn.appStrings[e]:null}getAppListString(e){return Bn.appListStrings&&Bn.appListStrings[e]?Bn.appListStrings[e]:null}getModString(e){return Bn.modStrings&&Bn.modStrings[e]?Bn.modStrings[e]:null}getFieldLabel(e,r=null,o=null){let a=o;if(o||(a=this.getLanguageStrings()),!a||!a.modStrings||!e)return"";let s="";return r&&(s=a.modStrings[r]&&a.modStrings[r][e]),s||(s=a.appStrings&&a.appStrings[e]),s||""}getListLabel(e,r){if(!e||!r)return"";const o=this.getAppListString(e);return o&&o[r]||""}getAvailableStringsTypes(){return Object.keys(this.config)}hasLanguageChanged(){return Bn.hasChanged}getCurrentLanguage(){var e;return this.localStorage.get("selected_language")||(null!==(e=Bn.languageKey)&&void 0!==e?e:"en_us")}getActiveLanguage(){var e;return null!==(e=Bn.languageKey)&&void 0!==e?e:""}getSelectedLanguage(){var e;return null!==(e=this.localStorage.get("selected_language"))&&void 0!==e?e:""}isLanguageEnabled(e){var r;if(!e)return!1;const o=null!==(r=this.configs.getConfigValue("languages"))&&void 0!==r?r:{},a=this.getDisabledLanguages(),s=Object.keys(o);return!!s.length&&s.includes(e)&&!a.includes(e)}getDisabledLanguages(){var e;const r=null!==(e=this.configs.getConfigValue("disabled_languages"))&&void 0!==e?e:"";return(0,ie.isString)(r)&&""!==r?r.replace(" ","").split(","):[]}getEnabledLanguages(){var e;const r=null!==(e=this.configs.getConfigValue("languages"))&&void 0!==e?e:{},o=this.getDisabledLanguages(),a={};return Object.keys(r).filter(l=>!o.includes(l)).forEach(l=>{a[l]=r[l]}),a}getFirstLanguage(){var e,r;const o=null!==(e=this.configs.getConfigValue("languages"))&&void 0!==e?e:{};return null!==(r=Object.keys(o).sort()[0])&&void 0!==r?r:""}load(e,r,o=!1){const a={};return r.forEach(s=>a[s]=this.getStrings(e,s,o)),(0,w.forkJoin)(a).pipe((0,v.first)(),(0,v.tap)(s=>{const l=Object.assign(Object.assign({},Bn),{languageKey:e});r.forEach(c=>{l[c]=s[c],ai[c]=!0}),this.updateState(l)}))}areAllCached(){var e,r,o;let a=!0;return a=a&&!(0,D.emptyObject)(null!==(e=null==ar?void 0:ar.appStrings)&&void 0!==e?e:{}),a=a&&!(0,D.emptyObject)(null!==(r=null==ar?void 0:ar.appListStrings)&&void 0!==r?r:{}),a=a&&!(0,D.emptyObject)(null!==(o=null==ar?void 0:ar.modStrings)&&void 0!==o?o:{}),a}set(e,r){const o=Object.assign(Object.assign({},Bn),{languageKey:e});r.appStrings&&!(0,D.emptyObject)(r.appStrings)&&(ar.appStrings[e]=(0,w.of)(r.appStrings).pipe((0,v.shareReplay)(1)),o.appStrings=r.appStrings,ai.appStrings=!0),r.appListStrings&&!(0,D.emptyObject)(r.appListStrings)&&(ar.appListStrings[e]=(0,w.of)(r.appListStrings).pipe((0,v.shareReplay)(1)),o.appListStrings=r.appListStrings,ai.appListStrings=!0),r.modStrings&&!(0,D.emptyObject)(r.modStrings)&&(ar.modStrings[e]=(0,w.of)(r.modStrings).pipe((0,v.shareReplay)(1)),o.modStrings=r.modStrings,ai.modStrings=!0),this.updateState(o)}setSessionLanguage(){return this.processService.submit("set-session-language",{language:Bn.languageKey}).pipe((0,v.take)(1))}updateState(e){this.store.next(Bn=e)}getStrings(e,r,o=!1){const a=ar[r];return a[e]&&!1===o||(a[e]=this[this.config[r].fetch](e).pipe((0,v.shareReplay)(1))),a[e]}fetchAppStrings(e){return this.recordGQL.fetch(this.config.appStrings.resourceName,`/api/app-strings/${e}`,this.config.appStrings.metadata).pipe((0,v.map)(({data:a})=>{let s={};return a.appStrings&&(s=a.appStrings.items),s}))}fetchAppListStrings(e){return this.recordGQL.fetch(this.config.appListStrings.resourceName,`/api/app-list-strings/${e}`,this.config.appListStrings.metadata).pipe((0,v.map)(({data:a})=>{let s={};return a.appListStrings&&(s=a.appListStrings.items),s}))}fetchModStrings(e){return this.recordGQL.fetch(this.config.modStrings.resourceName,`/api/mod-strings/${e}`,this.config.modStrings.metadata).pipe((0,v.map)(({data:a})=>{let s={};return a.modStrings&&(s=a.modStrings.items),s}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Zr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Fr),t.\u0275\u0275inject(Ar),t.\u0275\u0275inject(yt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Zr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Fr),t.\u0275\u0275inject(Ar),t.\u0275\u0275inject(yt))},token:n,providedIn:"root"}),n})(),l_=(()=>{class n{constructor(e){this.router=e}navigateToSearch(e){let o="";return e&&(o=e),this.router.navigate(["/home/unified-search"],{queryParams:{query_string:o}})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(z.Router))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(z.Router))},token:n,providedIn:"root"}),n})(),c_=(()=>{class n{constructor(e,r){this.languageStore=e,this.globalSearch=r,this.searchTerm="",this.actionBar={createLinks:[{label:"Accounts",route:"/accounts/edit"},{label:"Contacts",route:"/contacts/edit"},{label:"Leads",route:"/leads/edit"},{label:"Opportunities",route:"/opportunities/edit"},{label:"AOS_Quotes",route:"/quotes/edit"},{label:"AOS_Contracts",route:"/contracts/edit"}],favoriteRecords:[]},this.languages$=this.languageStore.vm$,this.vm$=(0,w.combineLatest)([this.languages$]).pipe((0,v.map)(([o])=>({appStrings:o.appStrings||{},appListStrings:o.appListStrings||{}})))}search(){this.globalSearch.navigateToSearch(this.searchTerm).finally(()=>{this.clearSearchTerm()})}clearSearchTerm(){this.searchTerm=""}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(l_))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-action-bar-ui"]],decls:2,vars:3,consts:[["class","global-action-bar row pb-2 pt-2 mr-0",4,"ngIf"],[1,"global-action-bar","row","pb-2","pt-2","mr-0"],[1,"col-6"],["name","global-search",1,"global-search"],[1,"input-group"],["type","text","name","global-search-term","aria-label","Search","required","",1,"form-control","global-search-term",3,"ngModel","placeholder","ngModelChange"],[1,"input-group-append"],["aria-label","Search","scrm-button-loading","",1,"btn","btn-default","search-button",3,"click"],["image","search",1,"search-icon","sicon"],[1,"col","justify-content-right"],[1,"action-group"],[1,"action-new","dropdown"],["type","button","aria-label","Quick Create",1,"quickcreate-button","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-right"],["class","new-list-item",4,"ngFor","ngForOf"],[1,"new-list-item"],[3,"routerLink"],["image","plus",1,"action-btn-icon"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,xL,15,4,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:function(){return[_.NgIf,y.\u0275NgNoValidate,y.NgControlStatusGroup,y.NgForm,y.DefaultValueAccessor,y.RequiredValidator,y.NgControlStatus,y.NgModel,yc,An,_.NgForOf,z.RouterLinkWithHref]},pipes:function(){return[_.AsyncPipe]},encapsulation:2}),n})(),yc=(()=>{class n{constructor(e,r){this.el=e,this.appStateStore=r,this.appLoading=!1}ngOnInit(){this.subscription=this.appStateStore.loading$.pipe((0,v.tap)(e=>{this.appLoading=e,this.updateComponent()})).subscribe(),this.updateComponent()}ngOnChanges(e){e.state&&this.updateComponent()}ngOnDestroy(){this.subscription.unsubscribe()}clickEvent(){this.updateComponent()}updateComponent(){const e=this.isLoading();this.setDisabledState(e)}isLoading(){let e=!1;return(!0===this.state||!0===this.appLoading)&&(e=!0),e}setDisabledState(e){this.el.nativeElement.disabled=e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(At))},n.\u0275dir=t.\u0275\u0275defineDirective({type:n,selectors:[["","scrm-button-loading",""]],hostBindings:function(e,r){1&e&&t.\u0275\u0275listener("click",function(){return r.clickEvent()})},inputs:{state:["scrm-button-loading","state"]},features:[t.\u0275\u0275NgOnChangesFeature]}),n})(),bc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})();const u_={theme:null,images:{}};let Fa=(0,D.deepClone)(u_),Ts=null,zo=null,_r=(()=>{class n{constructor(e,r,o){this.recordGQL=e,this.appStateStore=r,this.iconRegistry=o,this.store=new w.BehaviorSubject(Fa),this.state$=this.store.asObservable(),this.resourceName="themeImages",this.frontendName="theme-images",this.fieldsMetadata={fields:["id","_id","items"]},this.images$=this.state$.pipe((0,v.map)(a=>a.images),(0,v.distinctUntilChanged)())}clear(){Ts=null,zo=null,this.updateState((0,D.deepClone)(u_))}clearAuthBased(){}changeTheme(e){this.appStateStore.updateLoading("change-theme",!0),this.load(e).pipe((0,v.tap)(()=>this.appStateStore.updateLoading("change-theme",!1))).subscribe()}getTheme(){return Fa.theme}load(e){return this.getThemeImages(e).pipe((0,v.tap)(r=>{this.updateState(Object.assign(Object.assign({},Fa),{images:r,theme:e}))}))}isCached(){return null!==zo}set(e,r){Ts=e,this.registerSvgs(r),zo=(0,w.of)(r).pipe((0,v.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},Fa),{images:r}))}updateState(e){this.store.next(Fa=e)}getThemeImages(e){return(Ts!==e||null===zo)&&(Ts=e,zo=this.fetch(e).pipe((0,v.shareReplay)(1))),zo}registerSvgs(e){Object.keys(e).forEach(r=>{var o,a;const s=e[r],l=null!==(o=s.content)&&void 0!==o?o:"",c=null!==(a=s.name)&&void 0!==a?a:"";""===l||""===c||this.iconRegistry.addSvg(c,l)})}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/${this.frontendName}/${e}`,this.fieldsMetadata).pipe((0,v.map)(({data:r})=>{let o={};if(r&&r.themeImages&&(o=r.themeImages.items),!(0,D.emptyObject)(o)){const a={};return this.registerSvgs(o),Object.keys(o).forEach(s=>{var l;const c=null!==(l=o[s])&&void 0!==l?l:{},u=(0,B._T)(c,["content"]);a[s]=u}),a}return o}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Zr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(O.SvgIconRegistryService))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Zr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(O.SvgIconRegistryService))},token:n,providedIn:"root"}),n})(),An=(()=>{class n{constructor(e){this.themeImagesStore=e,this.klass="",this.title="",this.images$=this.themeImagesStore.images$,this.vm$=(0,w.combineLatest)([this.images$]).pipe((0,v.map)(([r])=>({images:r})))}getImage(e,r){if(!e||!e.images||Object.keys(e.images).length<1)return null;const o=e.images[r];return o||console.warn(`Image with name '${r}' not found`),o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(_r))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-image"]],inputs:{klass:"klass",title:"title",image:"image"},decls:2,vars:3,consts:[[4,"ngIf"],["class","sicon",3,"svgClass","title","name",4,"ngIf"],["alt","",3,"src","class","title",4,"ngIf"],[1,"sicon",3,"svgClass","title","name"],["alt","",3,"src","title"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,IL,2,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,O.SvgIconComponent],pipes:[_.AsyncPipe],encapsulation:2}),n})(),En=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,O.AngularSvgIconModule]]}),n})(),d_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En,z.RouterModule,y.FormsModule,bc]]}),n})();var Xn=(()=>{return(n=Xn||(Xn={})).XSmall="XSmall",n.Small="Small",n.Medium="Medium",n.Large="Large",n.XLarge="XLarge",Xn;var n})();let lo=(()=>{class n{constructor(e){this.breakpointObserver=e,this.screenSize=new w.BehaviorSubject(Xn.Medium),this.screenSize$=this.screenSize.asObservable(),this.initScreenSizeObservable()}initScreenSizeObservable(){(0,w.merge)(this.breakpointObserver.observe(["(max-width: 599.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return Xn.XSmall})),this.breakpointObserver.observe(["(min-width: 600px) and (max-width: 959.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return Xn.Small})),this.breakpointObserver.observe(["(min-width: 960px) and (max-width: 1279.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return Xn.Medium})),this.breakpointObserver.observe(["(min-width: 1280px) and (max-width: 1919.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return Xn.Large})),this.breakpointObserver.observe(["(min-width: 1920px)"]).pipe((0,v.map)(e=>{if(e.matches)return Xn.XLarge}))).subscribe(e=>{e&&this.screenSize.next(e)})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(ke))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(ke))},token:n,providedIn:"root"}),n})(),Aa=(()=>{class n{constructor(e,r,o){this.languages=e,this.screenSize=r,this.systemConfigStore=o,this.klass="",this.buttonClass="btn btn-sm",this.configState=new w.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.buttonGroupClass="dropdown-button-secondary",this.screen=Xn.Medium,this.defaultBreakpoint=3}ngOnInit(){this.vm$=(0,w.combineLatest)([this.config.getActions(),this.screenSize.screenSize$,this.languages.vm$]).pipe((0,v.map)(([e,r,o])=>(r&&(this.screen=r),this.configState.next(this.getButtonGroupConfig(e)),{actions:e,screenSize:r,languages:o})))}isXSmallScreen(){return this.screen===Xn.XSmall}getButtonGroupConfig(e){const r=[],o=[];e.forEach(l=>{const c=this.buildButton(l);l.params&&l.params.expanded?r.push(c):o.push(c)});let a=this.getBreakpoint();r.length<a&&(a=r.length);const s=r.concat(o);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:a,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupClass]},buttons:s}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue("recordview_actions_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){var r,o;const a={label:e.label||"",klass:this.buttonClass,titleKey:e.titleKey||"",onClick:()=>{this.config.runAction(e,this.actionContext)}},s=null!==(o=null===(r=null==e?void 0:e.params)||void 0===r?void 0:r.debounceClick)&&void 0!==o?o:null;return a.debounceClick=!0,(0,D.isFalse)(s)&&(a.debounceClick=!1),e.icon&&(a.icon=e.icon),e.status&&D.Button.appendClasses(a,[e.status]),e.klass&&D.Button.appendClasses(a,e.klass),a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(lo),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-action-group-menu"]],inputs:{klass:"klass",buttonClass:"buttonClass",actionContext:"actionContext",config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,AL,3,4,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:function(){return[_.NgIf,co]},pipes:function(){return[_.AsyncPipe]},encapsulation:2}),n})(),Ls=(()=>{class n{constructor(e){this.language=e,this.disabled=!1,this.autoClose=!0}isDropdown(e){return!!e&&"items"in e}click(e,r){e(),r.close()}close(e){e.close()}ngOnInit(){this.config&&!this.config.placement&&(this.config.placement=["bottom-left","bottom-right","top-left","top-right"])}getPlacement(){return this.config&&!this.config.placement?["bottom-left","bottom-right","top-left","top-right"]:this.config.placement}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-dropdown-button"]],inputs:{disabled:"disabled",autoClose:"autoClose",config:"config"},ngContentSelectors:hc,decls:9,vars:10,consts:[["ngbDropdown","",1,"d-inline-block","dropdown-button",3,"autoClose","placement","ngClass"],["dropDown","ngbDropdown"],["ngbDropdownToggle","",3,"disabled","ngClass","title"],[3,"image","klass",4,"ngIf"],[4,"ngIf"],["ngbDropdownMenu",""],[4,"ngFor","ngForOf"],[3,"image","klass"],[3,"labelKey"],["ngbDropdownItem","",3,"ngClass","click"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[3,"item","item-clicked"]],template:function(e,r){1&e&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"div",0,1),t.\u0275\u0275elementStart(2,"button",2),t.\u0275\u0275template(3,NL,1,2,"scrm-image",3),t.\u0275\u0275template(4,TL,2,1,"ng-container",4),t.\u0275\u0275template(5,LL,2,1,"ng-container",4),t.\u0275\u0275projection(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",5),t.\u0275\u0275template(8,BL,3,2,"ng-container",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("autoClose",r.autoClose)("placement",r.getPlacement())("ngClass",r.config.wrapperKlass),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",r.disabled)("ngClass",r.config.klass)("title",r.language.getFieldLabel(r.config.titleKey)||""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.icon),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.config.label&&r.config.labelKey),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",r.config.items))},directives:function(){return[be.NgbDropdown,_.NgClass,be.NgbDropdownToggle,_.NgIf,be.NgbDropdownMenu,_.NgForOf,An,gn,be.NgbDropdownItem,f_]},encapsulation:2}),n})(),f_=(()=>{class n{constructor(){this.itemClicked=new t.EventEmitter,this.isCollapsed=!0}ngOnInit(){}click(e){e&&e.onClick&&e.onClick(),this.itemClicked.emit(!0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-dropdown-submenu"]],inputs:{item:"item"},outputs:{itemClicked:"item-clicked"},ngContentSelectors:hc,decls:8,vars:3,consts:[[1,"dropdown-submenu-items-container"],[1,"dropdown-submenu-parent-button","dropdown-item","dropdown-toggle",3,"click"],[3,"image",4,"ngIf"],[3,"ngbCollapse",4,"ngIf"],[1,"dropdown-submenu-extra"],[3,"image"],[3,"ngbCollapse"],[1,"dropdown-submenu","pl-2","mb-1"],["class","dropdown-submenu-item dropdown-item",4,"ngFor","ngForOf"],[1,"dropdown-submenu-item","dropdown-item"],[1,"action-link","dropdown-submenu-item-link",3,"ngClass","click"]],template:function(e,r){1&e&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"div",0),t.\u0275\u0275elementStart(2,"a",1),t.\u0275\u0275listener("click",function(){return r.isCollapsed=!r.isCollapsed}),t.\u0275\u0275template(3,PL,1,1,"scrm-image",2),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,VL,3,2,"div",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",4),t.\u0275\u0275projection(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.item&&r.item.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.item&&r.item.label," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.item&&r.item.items.length))},directives:[_.NgIf,An,be.NgbCollapse,_.NgForOf,_.NgClass],encapsulation:2}),n})(),p_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En,be.NgbModule]]}),n})(),gn=(()=>{class n{constructor(e){this.language=e,this.labelKey="",this.module=null,this.listKey=null,this.languages$=this.language.vm$}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-label"]],inputs:{labelKey:"labelKey",module:"module",listKey:"listKey"},decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,GL,3,2,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.languages$))},directives:[_.NgIf],pipes:[_.AsyncPipe],encapsulation:2}),n})(),dn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),Ui=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,be.NgbDropdownModule,En,p_,dn,be.NgbTooltipModule]]}),n})(),ir=(()=>{class n{constructor(e){this.language=e,this.clickBuffer=new w.Subject,this.clickBuffer$=this.clickBuffer.asObservable(),this.subs=[]}ngOnInit(){var e,r,o,a;const s=null!==(r=null===(e=this.config)||void 0===e?void 0:e.debounceClick)&&void 0!==r?r:null;this.clickCallBack=null!==(a=null===(o=this.config)||void 0===o?void 0:o.onClick)&&void 0!==a?a:null;const l=this.getDebounceTime();s&&this.clickCallBack&&this.subs.push(this.clickBuffer$.pipe((0,v.debounceTime)(l)).subscribe(c=>{this.clickCallBack(null!=c?c:null)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}runClick(e){var r,o;const a=null!==(o=null===(r=this.config)||void 0===r?void 0:r.debounceClick)&&void 0!==o?o:null;if(this.clickCallBack){if(a&&this.clickCallBack)return void this.clickBuffer.next(null!=e?e:null);this.clickCallBack(null!=e?e:null)}}getDebounceTime(){var e,r;let o=null!==(r=null===(e=this.config)||void 0===e?void 0:e.clickDebounceTime)&&void 0!==r?r:625;return isFinite(o)||(o=625),o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-button"]],inputs:{config:"config"},ngContentSelectors:hc,decls:5,vars:5,consts:[["type","button",3,"ngClass","title","click"],[3,"image","klass","title",4,"ngIf"],[3,"labelKey",4,"ngIf"],[3,"image","klass","title"],[3,"labelKey"]],template:function(e,r){1&e&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"button",0),t.\u0275\u0275listener("click",function(){return r.runClick()}),t.\u0275\u0275template(1,WL,1,3,"scrm-image",1),t.\u0275\u0275text(2),t.\u0275\u0275template(3,KL,1,1,"scrm-label",2),t.\u0275\u0275projection(4),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("ngClass",r.config.klass)("title",r.language.getFieldLabel(r.config.titleKey)||""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.config.label||""," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.labelKey))},directives:[_.NgClass,_.NgIf,An,gn],encapsulation:2}),n})(),Sn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En,dn,be.NgbTooltipModule]]}),n})(),co=(()=>{class n{constructor(){this.buttons={expanded:[],collapsed:[]}}ngOnInit(){this.sub=this.config$.subscribe(e=>{this.internalConfig=Object.assign({},e),this.splitButtons()})}ngOnDestroy(){this.sub.unsubscribe()}isDropdown(e){return!!e&&"items"in e}buildDropdownConfig(){var e,r;let o=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(o=o.concat(this.internalConfig.buttonKlass)),(null===(r=null===(e=null==this?void 0:this.internalConfig)||void 0===e?void 0:e.dropdownOptions)||void 0===r?void 0:r.klass)&&(o=o.concat(this.internalConfig.dropdownOptions.klass));let a=["button-group-dropdown"];const s=this.internalConfig.dropdownOptions,l=s&&s.wrapperKlass;l&&l.length>0&&(a=a.concat(l)),this.dropdownConfig={label:this.internalConfig.dropdownLabel,klass:[...o],wrapperKlass:a,items:this.buttons.collapsed},this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.placement&&(this.dropdownConfig.placement=this.internalConfig.dropdownOptions.placement),this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.icon&&(this.dropdownConfig.icon=this.internalConfig.dropdownOptions.icon)}getBreakpoint(){return this.internalConfig.breakpoint?this.internalConfig.breakpoint:4}splitButtons(){if(this.buttons.expanded=[],this.buttons.collapsed=[],!this.internalConfig.buttons||this.internalConfig.buttons.length<1)return;let e=0;this.internalConfig.buttons.forEach(r=>{if(r){if(e<this.getBreakpoint()){let o=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(o=o.concat(this.internalConfig.buttonKlass));const a=Object.assign({},r);D.Button.appendClasses(a,[...o]),this.buttons.expanded.push(a)}else this.buttons.collapsed.push(Object.assign({},r));e++}}),this.buildDropdownConfig()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-button-group"]],inputs:{config$:"config$"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["autoClose","outside",3,"config",4,"ngIf"],[3,"config",4,"ngIf"],[3,"config"],["autoClose","outside",3,"config"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,QL,3,2,"div",0),2&e&&t.\u0275\u0275property("ngIf",r.config$)},directives:[_.NgIf,_.NgForOf,ir,Ls],encapsulation:2}),n})(),Vi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn,Ui]]}),n})(),Na=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En,Sn,Vi]]}),n})(),Mc=(()=>{class n{constructor(e){this.languageStore=e,this.appStrings$=this.languageStore.appStrings$,this.vm$=null}ngOnInit(){const e=this.selectionSource.getSelectionStatus(),r=this.selectionSource.getSelectedCount(),o=this.actionSource.getBulkActions();this.vm$=(0,w.combineLatest)([this.appStrings$,e,r,o]).pipe((0,v.map)(([a,s,l,c])=>({appStrings:a,status:s,count:l,actions:c})))}checked(e){return e===D.SelectionStatus.ALL}intermediate(e){return e===D.SelectionStatus.SOME||e===D.SelectionStatus.PAGE}selectPage(){this.selectionSource.updateSelection(D.SelectionStatus.PAGE)}selectAll(){this.selectionSource.updateSelection(D.SelectionStatus.ALL)}deselectAll(){this.selectionSource.updateSelection(D.SelectionStatus.NONE)}toggleSelection(e){this.selectionSource.updateSelection(e!==D.SelectionStatus.ALL?D.SelectionStatus.ALL:D.SelectionStatus.NONE)}getDropdownConfig(e,r){const a={label:r&&r.LBL_BULK_ACTION_BUTTON_LABEL||"",klass:["bulk-action-button","btn","btn-sm"],wrapperKlass:["bulk-action-group","float-left"],items:[]};return Object.keys(e).forEach(s=>{const l=e[s];a.items.push({label:r&&r[l.labelKey]||"",klass:[`${s}-bulk-action`],onClick:()=>{this.actionSource.executeBulkAction(l.key)}})}),a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-bulk-action-menu"]],inputs:{selectionSource:"selectionSource",actionSource:"actionSource"},decls:2,vars:3,consts:[["class","bulk-action float-left",4,"ngIf"],[1,"bulk-action","float-left"],["ngbDropdown","",1,"dropdown","select-action-group","float-left"],["type","button","ngbDropdownToggle","","aria-haspopup","true","aria-expanded","false","aria-hidden","true","aria-label","Select Action Menu",1,"bulk-action-button","dropdown-toggle","btn","btn-sm"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","indeterminate","change"],[1,"checkmark"],[1,"bulk-action-selected-number"],["ngbDropdownMenu","","aria-hidden","true",1,"dropdown-menu"],[1,"dropdown-item","select-all",3,"click"],[1,"dropdown-item","select-page",3,"click"],[1,"dropdown-item","deselect-all",3,"click"],[3,"disabled","config"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,XL,16,9,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,be.NgbDropdown,be.NgbDropdownToggle,be.NgbDropdownMenu,Ls],pipes:[_.AsyncPipe],encapsulation:2}),n})(),Cc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,be.NgbModule,Ui]]}),n})(),m_=(()=>{class n{constructor(){}addOnClickPartial(e,r){const o=Object.assign({},e);if(e&&"items"in o){const a=o.items;return o.items=[],a.forEach(s=>{o.items.push(this.addOnClickPartial(s,r))}),o}return o.onClick=o.onClick&&(0,He.Z)(o.onClick,r),o}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Rs=(()=>{class n{constructor(e){this.elementRef=e,this.height=300,this.view=[300,this.height]}onResize(){this.calculateView()}calculateView(){let e;const r=this.elementRef&&this.elementRef.nativeElement||{},o=r.parentElement&&r.parentElement.parentElement||{},a=o&&o.offsetWidth||0;a>0?e=a:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view=[e,this.height]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ElementRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],inputs:{dataSource:"dataSource"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),d4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),h_=(()=>{class n extends Rs{constructor(e,r){super(r),this.language=e,this.elementRef=r,this.height=700,this.view=[300,this.height],this.subs=[]}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.parseResults(e),this.calculateHeightBasedOnResults(),this.calculateView()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get label(){return this.dataSource.options.label||""}onResize(){this.calculateHeightBasedOnResults(),this.calculateView()}calculateHeightBasedOnResults(){if(this.results&&this.results.length){const e=Math.floor(this.view[0]/170);this.height=200*Math.floor(this.results.length/e)}else this.height=50}parseResults(e){this.results=[],e.singleSeries&&e.singleSeries.length&&e.singleSeries.forEach(r=>{const o=parseFloat(""+r.value);this.results.push(o?{name:r.name,value:o}:r)})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(t.ElementRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-pie-grid-chart"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[3,"animations","view","scheme","label","results","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[3,"animations","view","scheme","label","results","resize"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,YL,1,0,"scrm-chart-message-area",0),t.\u0275\u0275template(1,eR,1,5,"ngx-charts-pie-grid",1)),2&e&&(t.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.results&&r.results.length>0))},directives:function(){return[_.NgIf,Go,tt.PieGridComponent]},encapsulation:2}),n})(),g_=(()=>{class n extends Rs{constructor(e){super(e),this.elementRef=e,this.subs=[]}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.results=e.singleSeries}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get gradient(){return this.dataSource.options.gradient||!1}get xAxis(){return this.dataSource.options.xAxis||!1}get yAxis(){return!(0,D.isFalse)(this.dataSource.options.yAxis)}get legend(){return!(0,D.isFalse)(this.dataSource.options.legend)}get showXAxisLabel(){return this.dataSource.options.showXAxisLabel||!1}get showYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}get xAxisLabel(){return this.dataSource.options.xAxisLabel||""}get yAxisLabel(){return this.dataSource.options.yAxisLabel||""}get yAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting?this.dataSource.tickFormatting:null}formatTooltipValue(e){return this.dataSource&&this.dataSource.tooltipFormatting?this.dataSource.tooltipFormatting(e):e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ElementRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-vertical-bar-chart"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],["class","vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[1,"vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","resize"],["tooltipTemplate",""]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,tR,1,0,"scrm-chart-message-area",0),t.\u0275\u0275template(1,rR,3,14,"ngx-charts-bar-vertical",1)),2&e&&(t.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.results&&r.results.length>0))},directives:function(){return[_.NgIf,Go,tt.BarVerticalComponent]},encapsulation:2}),n})(),Go=(()=>{class n{constructor(e){this.language=e,this.labelKey=""}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-chart-message-area"]],inputs:{labelKey:"labelKey"},decls:2,vars:1,consts:[[1,"d-flex","mb-4","mt-4","justify-content-center"],["class","lead",4,"ngIf"],[1,"lead"],[3,"labelKey"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,iR,2,1,"div",1),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.labelKey))},directives:[_.NgIf,gn],encapsulation:2}),n})(),Wo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,dn]]}),n})(),v_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,tt.NgxChartsModule,Wo]]}),n})(),__=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,tt.NgxChartsModule,Wo]]}),n})(),y_=(()=>{class n extends Rs{constructor(e){super(e),this.elementRef=e,this.subs=[]}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.results=e.multiSeries})),this.scheme=this.getScheme(),this.gradient=this.getGradient(),this.xAxis=this.getXAxis(),this.yAxis=this.getYAxis(),this.legend=this.getLegend(),this.xScaleMin=this.getXScaleMin(),this.xScaleMax=this.getXScaleMax(),this.xAxisTicks=this.getXAxisTicks(),this.showXAxisLabel=this.getShowXAxisLabel(),this.showYAxisLabel=this.getShowYAxisLabel(),this.xAxisLabel=this.getXAxisLabel(),this.yAxisLabel=this.getYAxisLabel(),this.yAxisTickFormatting=this.getYAxisTickFormatting(),this.xAxisTickFormatting=this.getXAxisTickFormatting(),this.tooltipDisabled=this.getTooltipDisabled()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getScheme(){return this.dataSource.options.scheme||"picnic"}getGradient(){return this.dataSource.options.gradient||!1}getXAxis(){return!(0,D.isFalse)(this.dataSource.options.xAxis)}getYAxis(){return!(0,D.isFalse)(this.dataSource.options.yAxis)}getLegend(){return!(0,D.isFalse)(this.dataSource.options.legend)}getXScaleMin(){return this.dataSource.options.xScaleMin||null}getXScaleMax(){return this.dataSource.options.xScaleMax||null}getXAxisTicks(){return this.dataSource.options.xAxisTicks||null}getShowXAxisLabel(){return!(0,D.isFalse)(this.dataSource.options.showXAxisLabel)}getShowYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}getXAxisLabel(){return this.dataSource.options.xAxisLabel||""}getYAxisLabel(){return this.dataSource.options.yAxisLabel||""}getYAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting&&this.dataSource.tickFormatting||null}getXAxisTickFormatting(){return this.dataSource.options.xAxisTickFormatting&&this.dataSource.tickFormatting||null}getTooltipDisabled(){return this.dataSource.options.tooltipDisabled||!1}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ElementRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-line-chart"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],["class","line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[1,"line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel","resize"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,oR,1,0,"scrm-chart-message-area",0),t.\u0275\u0275template(1,aR,1,20,"ngx-charts-line-chart",1)),2&e&&(t.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.results&&r.results.length>0))},directives:[_.NgIf,Go,tt.LineChartComponent],encapsulation:2}),n})(),b_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,tt.NgxChartsModule,Wo]]}),n})();const M_=[b_,__,v_],Sc={"line-chart":y_,"pie-grid":h_,"vertical-bar":g_};let C_=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(Sc).forEach(e=>{this.register("default",e,Sc[e])})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),S_=(()=>{class n{constructor(e){this.registry=e,this.dataSource=null}get chartType(){return this.registry.get("default",this.type)}ngOnInit(){}isConfigured(){return!!(this.type&&this.dataSource&&this.chartType)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(C_))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-chart"]],inputs:{dataSource:"dataSource",type:"type"},decls:2,vars:2,consts:[["labelKey","LBL_BAD_CONFIG",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],["labelKey","LBL_BAD_CONFIG"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,sR,1,0,"scrm-chart-message-area",0),t.\u0275\u0275template(1,cR,1,4,"ndc-dynamic",1)),2&e&&(t.\u0275\u0275property("ngIf",!r.isConfigured()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isConfigured()))},directives:[_.NgIf,Go,Gt,Lt],encapsulation:2}),n})(),x_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,...M_,Jt,Wo]]}),n})(),xc=(()=>{class n{constructor(){this.buttonClasses=["close-button"]}getConfig(){const e=D.Button.fromButton(this.config);return e.addClasses(this.buttonClasses),e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-close-button"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"config",4,"ngIf"],[3,"config"],["aria-hidden","true"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,uR,3,1,"scrm-button",0),2&e&&t.\u0275\u0275property("ngIf",r.config)},directives:[_.NgIf,ir],encapsulation:2}),n})(),Ta=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn]]}),n})(),w_=(()=>{class n{constructor(e,r,o){this.appState=e,this.languageStore=r,this.modal=o,this.titleKey="LBL_COLUMN_SELECTOR_MODAL_TITLE"}drop(e){e.previousContainer===e.container?Xi(e.container.data,e.previousIndex,e.currentIndex):function(n,i,e,r){const o=Cr(e,n.length-1),a=Cr(r,i.length);n.length&&i.splice(a,0,n.splice(o,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_COLUMN_SELECTOR_MODAL_TITLE")}getColumnLabel(e){return this.languageStore.getFieldLabel(e,this.appState.getModule())}ngOnInit(){this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}},this.saveButton={klass:["btn","modal-button-save"],labelKey:"LBL_COLUMN_SELECTOR_SAVE_BUTTON",onClick:()=>{this.modal.close({type:"close-button",displayed:this.displayed,hidden:this.hidden})}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(At),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(be.NgbActiveModal))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-columnchooser"]],inputs:{displayed:"displayed",hidden:"hidden"},decls:19,vars:16,consts:[["klass","column-chooser-modal",3,"closable","close","title","titleKey"],["modal-body",""],[1,"d-flex","bd-highlight"],[1,"p-2","flex-fill","bd-highlight","column-chooser-container"],[1,"column-chooser-title"],["labelKey","LBL_COLUMN_SELECTOR_DISPLAYED_COLS"],["cdkDropList","",1,"column-chooser-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["displayedList","cdkDropList"],["class","column-chooser-item column-displayed","cdkDrag","",4,"ngFor","ngForOf"],["labelKey","LBL_COLUMN_SELECTOR_HIDDEN_COLS"],["hiddenList","cdkDropList"],["class","column-chooser-item column-hidden","cdkDrag","",4,"ngFor","ngForOf"],["modal-footer",""],[1,"modal-buttons"],["data-dismiss","modal",3,"config"],[3,"config"],["cdkDrag","",1,"column-chooser-item","column-displayed"],["cdkDrag","",1,"column-chooser-item","column-hidden"]],template:function(e,r){if(1&e&&(t.\u0275\u0275elementStart(0,"scrm-modal",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"h2",4),t.\u0275\u0275element(5,"scrm-label",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",6,7),t.\u0275\u0275listener("cdkDropListDropped",function(a){return r.drop(a)}),t.\u0275\u0275template(8,dR,2,1,"div",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",3),t.\u0275\u0275elementStart(10,"h2",4),t.\u0275\u0275element(11,"scrm-label",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",6,10),t.\u0275\u0275listener("cdkDropListDropped",function(a){return r.drop(a)}),t.\u0275\u0275template(14,fR,2,1,"div",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"div",12),t.\u0275\u0275elementStart(16,"div",13),t.\u0275\u0275element(17,"scrm-button",14),t.\u0275\u0275element(18,"scrm-button",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e){const o=t.\u0275\u0275reference(7),a=t.\u0275\u0275reference(13);t.\u0275\u0275property("closable",!0)("close",r.closeButtonIcon)("title",r.getHeaderLabel())("titleKey",r.titleKey),t.\u0275\u0275advance(6),t.\u0275\u0275property("cdkDropListData",r.displayed)("cdkDropListConnectedTo",t.\u0275\u0275pureFunction1(12,gc,a)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",r.displayed),t.\u0275\u0275advance(4),t.\u0275\u0275property("cdkDropListData",r.hidden)("cdkDropListConnectedTo",t.\u0275\u0275pureFunction1(14,gc,o)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",r.hidden),t.\u0275\u0275advance(3),t.\u0275\u0275property("config",r.closeButton),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.saveButton)}},directives:function(){return[Ko,gn,Ut,_.NgForOf,ir,Sr]},encapsulation:2}),n})(),Ko=(()=>{class n{constructor(){this.klass="",this.headerKlass="",this.bodyKlass="",this.footerKlass="",this.titleKey="",this.closable=!1,this.close={klass:["btn","btn-outline-light","btn-sm"]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-modal"]],inputs:{klass:"klass",headerKlass:"headerKlass",bodyKlass:"bodyKlass",footerKlass:"footerKlass",titleKey:"titleKey",closable:"closable",close:"close"},ngContentSelectors:gR,decls:9,vars:13,consts:[[1,"modal-title"],[3,"labelKey",4,"ngIf"],[3,"config",4,"ngIf"],[3,"labelKey"],[3,"config"]],template:function(e,r){1&e&&(t.\u0275\u0275projectionDef(hR),t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275elementStart(2,"div",0),t.\u0275\u0275template(3,pR,1,1,"scrm-label",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,mR,1,1,"scrm-close-button",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div"),t.\u0275\u0275projection(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div"),t.\u0275\u0275projection(8,1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275classMap(r.klass),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("modal-header ",r.headerKlass," d-flex align-items-center"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.titleKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.closable),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("modal-body ",r.bodyKlass,""),t.\u0275\u0275advance(2),t.\u0275\u0275classMapInterpolate1("modal-footer ",r.footerKlass,""))},directives:[_.NgIf,gn,xc],encapsulation:2}),n})(),uo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,O.AngularSvgIconModule,Ta,dn]]}),n})(),E_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,no,Ta,uo,dn,Sn]]}),n})();const D_={userPreferences:{},loading:!1};let sr=(0,D.deepClone)(D_),Ho=null,Vt=(()=>{class n{constructor(e,r,o,a){var s,l;this.collectionGQL=e,this.config=r,this.processService=o,this.localStorage=a,this.store=new w.BehaviorSubject(sr),this.state$=this.store.asObservable(),this.saveBufferStore=new w.BehaviorSubject(!1),this.subs=[],this.resourceName="userPreferences",this.fieldsMetadata={fields:["id","_id","value","items"]},this.userPreferences$=this.state$.pipe((0,v.map)(u=>u.userPreferences),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(u=>u.loading));const f=null!==(l=(null!==(s=r.getConfigValue("ui"))&&void 0!==s?s:{}).user_preferences_save_delay)&&void 0!==l?l:5e3;this.saveBuffer$=this.saveBufferStore.asObservable().pipe((0,v.debounceTime)(null!=f?f:5e3)),this.subs.push(this.saveBuffer$.subscribe(u=>{!u||this.saveUiPreferences()}))}clear(){Ho=null,this.updateState((0,D.deepClone)(D_)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.clear()}getUserPreference(e){return sr.userPreferences&&sr.userPreferences[e]?sr.userPreferences[e]:null}getUi(e,r){var o,a,s;const l=e+"-"+r,c=this.storageLoad(e,l);return null!=c?c:null!==(s=(null!==(a=null===(o=null==sr?void 0:sr.userPreferences)||void 0===o?void 0:o.ui)&&void 0!==a?a:{})[l])&&void 0!==s?s:null}setUi(e,r,o){var a,s;const l=e+"-"+r;this.storageSave(e,l,o);const c=null!==(s=null===(a=null==sr?void 0:sr.userPreferences)||void 0===a?void 0:a.ui)&&void 0!==s?s:{};c[l]=o,sr.userPreferences.ui=c,this.saveBufferStore.next(!0)}saveUiPreferences(){this.processService.submit("save-ui-user-preferences",{preferences:sr.userPreferences.ui}).pipe((0,v.take)(1)).subscribe()}storageSave(e,r,o){let a=this.localStorage.get(r);a||(a={}),a[e]=o,this.localStorage.set(r,a)}storageLoad(e,r){const o=this.localStorage.get(r);return o&&o[e]?o[e]:null}load(){return this.updateState(Object.assign(Object.assign({},sr),{loading:!0})),this.getUserPreferences().pipe((0,v.tap)(e=>{this.updateState(Object.assign(Object.assign({},sr),{userPreferences:e,loading:!1}))}))}isCached(){return null!==Ho}set(e){Ho=(0,w.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},sr),{userPreferences:e,loading:!1}))}updateState(e){this.store.next(sr=e)}getUserPreferences(){return null==Ho&&(Ho=this.fetch().pipe((0,v.shareReplay)(1))),Ho}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,v.map)(({data:e})=>{const r={};return e.userPreferences&&e.userPreferences.edges&&e.userPreferences.edges.forEach(o=>{!o.node.items||Object.keys(o.node.items).forEach(a=>{r[a]=o.node.items[a]})}),r}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ia),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ar),t.\u0275\u0275inject(Fr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ia),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ar),t.\u0275\u0275inject(Fr))},token:n,providedIn:"root"}),n})(),yr=(()=>{class n{getTrimmedInputValue(e){return"string"!=typeof e?e:e.trim()}isEmptyInputValue(e){return null==e||void 0===e||""===e||0===e.length}isEmptyTrimmedInputValue(e){return this.isEmptyInputValue(this.getTrimmedInputValue(e))}isEmptyBooleanInputValue(e){return this.isEmptyInputValue(e)||"false"===e||!1===e||""===e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Pr=(()=>{class n{constructor(e,r,o){this.preferences=e,this.formUtils=r,this.locale=o}toUserFormat(e){if((0,D.isVoid)(e)||""===e)return"";const r=(0,_.formatNumber)(Number(e),this.locale);return this.replaceSeparators(r)}toInternalFormat(e){if(!e)return e;const r=this.getDecimalsSymbol()||".",o=this.getGroupSymbol()||",";let a=new RegExp(r,"g");"."===r&&(a=new RegExp("\\.","g"));let s=new RegExp(o,"g");return"."===o&&(s=new RegExp("\\.","g")),(e=(e=(e=e.replace(s,"group_separator")).replace(a,"decimal_separator")).replace(/decimal_separator/g,".")).replace(/group_separator/g,"")}getFloatUserFormatPattern(){const e=this.getGroupSymbol(),r=this.getDecimalsSymbol();let o="^(";return o+="(\\d{1,3}(\\"+e+"\\d{3})*(\\"+r+"\\d+)?)|",o+="\\d*|",o+="(\\d+(\\"+r+"\\d+)?)|",o+="(\\d+(\\.\\d+)?)",o+=")$",o}getIntUserFormatPattern(){let r="^(";return r+="(\\d{1,3}(\\"+this.getGroupSymbol()+"\\d{3})*)|",r+="\\d*",r+=")$",r}getGroupSymbol(){return this.preferences.getUserPreference("num_grp_sep")||","}getDecimalsSymbol(){return this.preferences.getUserPreference("dec_sep")||"."}replaceSeparators(e){if(!e)return e;e=(e=e.replace(/,/g,"group_separator")).replace(/\./g,"decimal_separator");const r=this.getDecimalsSymbol()||".",o=this.getGroupSymbol()||",";return(e=e.replace(/decimal_separator/g,r)).replace(/group_separator/g,o)}validateIntUserFormat(e){const r=this.formUtils.getTrimmedInputValue(e);if(this.formUtils.isEmptyInputValue(r)||new RegExp(this.getIntUserFormatPattern()).test(r))return!1}validateFloatUserFormat(e){const r=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(r)&&!new RegExp(this.getFloatUserFormatPattern()).test(r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(yr),t.\u0275\u0275inject(t.LOCALE_ID))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(yr),t.\u0275\u0275inject(t.LOCALE_ID))},token:n,providedIn:"root"}),n})(),si=(()=>{class n{constructor(e,r,o){this.preferences=e,this.formUtils=r,this.locale=o,this.format$=(0,w.combineLatest)([this.preferences.userPreferences$]).pipe((0,v.map)(()=>({date:this.getDateFormat(),time:this.getTimeFormat()})))}getDateFormat(){return this.preferences.getUserPreference("date_format")||this.getInternalTimeFormat()}getTimeFormat(){const e=this.preferences.getUserPreference("time_format");if(e){let r=e;return r.includes("aaaaaa")&&(r=r.replace("aaaaaa","aaaaa'm'")),r}return this.getInternalTimeFormat()}getDateTimeFormat(){return this.getDateFormat()+" "+this.getTimeFormat()}getInternalDateFormat(){return"yyyy-MM-dd"}getInternalTimeFormat(){return"HH:mm:ss"}getInternalDateTimeFormat(){return this.getInternalDateFormat()+" "+this.getInternalTimeFormat()}getInternalFormat(){return this.getInternalDateTimeFormat()}getUserFormat(){return this.getDateTimeFormat()}toUserFormat(e,r){const o=r&&r.fromFormat||this.getInternalFormat();if(e){const a=this.toDateTime(e,o,{zone:"GMT"});return a.isValid?(0,_.formatDate)(a.toJSDate(),this.getUserFormat(),this.locale,this.userTimeZone()):e}return""}toInternalFormat(e,r){const o=r&&r.fromFormat||this.getUserFormat();if(e){let a=this.toDateTime(e,o,{zone:this.preferences.getUserPreference("timezone")});return(0,_.formatDate)(a.toJSDate(),this.getInternalFormat(),this.locale,"GMT")}return""}formatDateTime(e,r,o="",a=this.locale,s=""){const l=this.toDateTime(e,o);return l.isValid?(0,_.formatDate)(l.toJSDate(),r,a,s):e}toDateTime(e,r="",o){if(!e)return ti.DateTime.invalid("empty");if(r)return ti.DateTime.fromFormat(e,r,o);let a=this.fromUserFormat(e,o);return a.isValid||(a=this.fromInternalFormat(e,o)),a}userDateTimeFormatToStruct(e){if(!e)return null;const r=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return r.isValid?{date:{day:r.day,month:r.month,year:r.year},time:{hour:r.hour,minute:r.minute,second:r.second}}:null}internalDateTimeFormatToStruct(e){if(!e)return null;const r=this.toDateTime(e,this.getInternalDateTimeFormat(),{zone:"GMT"}),o=r.setZone(this.preferences.getUserPreference("timezone"));return r.isValid?{date:{day:o.day,month:o.month,year:o.year},time:{hour:o.hour,minute:o.minute,second:o.second}}:null}userDateFormatToStruct(e){if(!e)return null;const r=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return r.isValid?{day:r.day,month:r.month,year:r.year}:null}dateFormatToStruct(e,r=""){if(!e)return null;const o=this.toDateTime(e,r);return o.isValid?{day:o.day,month:o.month,year:o.year}:null}userTimeFormatToStruct(e){if(!e)return null;const r=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return r.isValid?{hour:r.hour,minute:r.minute,second:r.second}:null}fromUserFormat(e,r){e=(e=(e=(e=e.toString()).replace("a","A")).replace("p","P")).replace("m","M");let o=this.getUserFormat();return o=o.replace("aaaaa'm'","a"),ti.DateTime.fromFormat(e,o,r)}fromInternalFormat(e,r){const o=this.getInternalFormat();return ti.DateTime.fromFormat(e.toString(),o,r)}validateUserFormat(e){const r=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(r)&&!this.fromUserFormat(r).isValid}userTimeZone(){const e=this.preferences.getUserPreference("timezone"),r=ti.DateTime.now().setZone(e).toMillis();return ti.IANAZone.create(e).formatOffset(r,"techie")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(yr),t.\u0275\u0275inject(t.LOCALE_ID))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(yr),t.\u0275\u0275inject(t.LOCALE_ID))},token:n,providedIn:"root"}),n})(),Os=(()=>{class n{constructor(e,r,o){this.preferences=e,this.numberFormatter=r,this.locale=o}toUserFormat(e,r=null){if((0,D.isVoid)(e)||""===e)return"";const o=r&&r.symbol||this.getSymbol(),a=r&&r.code||this.getCode();let s=null;r&&null!==r.digits&&isFinite(r.digits)&&(s=r.digits);const l=this.getDigitsInfo(s);let c;return r&&"edit"===r.mode?(c=(0,_.formatNumber)(Number(e),this.locale,l),this.replaceSeparators(c)):(c=(0,_.formatCurrency)(Number(e),this.locale,o,a,l),this.replaceSeparators(c))}toInternalFormat(e){if(!e)return"";const r=e.replace(this.getSymbol(),"");return this.numberFormatter.toInternalFormat(r)}getCurrencyFormat(){return this.preferences.getUserPreference("currency")||this.getDefaultFormat()}getDefaultFormat(){return{iso4217:"USD",name:"US Dollars",symbol:"$"}}getCode(){return this.getCurrencyFormat().iso4217}getSymbol(){return this.getCurrencyFormat().symbol}getDigits(){return this.preferences.getUserPreference("default_currency_significant_digits")||2}getDigitsInfo(e){let r="1.2-2",o=this.getDigits();return null!==e&&isFinite(e)&&(o=e),null!==o&&isFinite(o)&&(r=o<1?"1.0-0":`1.${o}-${o}`),r}replaceSeparators(e){return this.numberFormatter.replaceSeparators(e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(Pr),t.\u0275\u0275inject(t.LOCALE_ID))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(Pr),t.\u0275\u0275inject(t.LOCALE_ID))},token:n,providedIn:"root"}),n})(),li=(()=>{class n extends si{getInternalFormat(){return this.getInternalDateFormat()}getUserFormat(){return this.getDateFormat()}toInternalFormat(e,r){const o=r&&r.fromFormat||this.getUserFormat();if(e){let a=this.toDateTime(e,o);return(!a||!a.isValid)&&(a=this.toDateTime(e)),(0,_.formatDate)(a.toJSDate(),this.getInternalFormat(),this.locale)}return""}toUserFormat(e,r){const o=r&&r.fromFormat||this.getInternalFormat();if(e){const a=this.toDateTime(e,o);return a.isValid?(0,_.formatDate)(a.toJSDate(),this.getUserFormat(),this.locale):e}return""}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=t.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(yr),t.\u0275\u0275inject(t.LOCALE_ID))},token:n,providedIn:"root"}),n})(),La=(()=>{class n{constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return"^([\\+]?|00)((([(]{0,1}\\s*[0-9]{1,4}\\s*[)]{0,1})\\s*)*|([\\-\\s\\./0-9])*)+$"}validateUserFormat(e){const r=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(r)&&!new RegExp(this.getUserFormatPattern()).test(r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yr))},token:n,providedIn:"root"}),n})(),vt=(()=>{class n{constructor(e,r,o,a,s){this.currencyFormatter=e,this.numberFormatter=r,this.dateFormatter=o,this.datetimeFormatter=a,this.phoneFormatter=s,this.map={},this.map.int=r,this.map.float=r,this.map.date=o,this.map.datetime=a,this.map.currency=e,this.map.phone=s}toUserFormat(e,r,o){if(!e)return r;const a=this.map[e];return a?a.toUserFormat(r,o):r}toInternalFormat(e,r){if(!e)return r;const o=this.map[e];return o?o.toInternalFormat(r):r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Os),t.\u0275\u0275inject(Pr),t.\u0275\u0275inject(li),t.\u0275\u0275inject(si),t.\u0275\u0275inject(La))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Os),t.\u0275\u0275inject(Pr),t.\u0275\u0275inject(li),t.\u0275\u0275inject(si),t.\u0275\u0275inject(La))},token:n,providedIn:"root"}),n})(),I_=(()=>{class n{constructor(e,r){this.typeFormatter=e,this.language=r,this.valuePipes={},this.fieldPipes={},this.valuePipes.int=o=>this.valueTypeFormat("int",o),this.valuePipes.float=o=>this.valueTypeFormat("float",o),this.valuePipes.date=o=>this.valueTypeFormat("date",o),this.valuePipes.datetime=o=>this.valueTypeFormat("datetime",o),this.valuePipes.currency=o=>this.valueTypeFormat("currency",o),this.valuePipes.phone=o=>this.valueTypeFormat("phone",o),this.fieldPipes.int=o=>this.fieldTypeFormat("int",o),this.fieldPipes.float=o=>this.fieldTypeFormat("float",o),this.fieldPipes.date=o=>this.fieldTypeFormat("date",o),this.fieldPipes.datetime=o=>this.fieldTypeFormat("datetime",o),this.fieldPipes.currency=o=>this.fieldTypeFormat("currency",o),this.fieldPipes.phone=o=>this.fieldTypeFormat("phone",o),this.fieldPipes.enum=o=>this.enumFormat(o),this.fieldPipes.dynamicenum=o=>this.enumFormat(o),this.fieldPipes.multienum=o=>this.multiEnumFormat(o)}addValuePipe(e,r){this.valuePipes[e]=r}addFieldPipe(e,r){this.fieldPipes[e]=r}parse(e,r,o){if(!e)return e;const s=e.match(/({{[\s\S]+?}})/g);if(!s||s.length<1)return e;let l=e;const c=r&&r.module||"";return s.forEach(f=>{if(!l.includes(f))return;let u="",d="",p="context",h=[],m=""+f;m=m.replace("{{",""),m=m.replace("}}",""),m=m.trim();let g=m;if(m.includes("|")){const[C,A]=m.split("|");u=A.trim(),m=C.trim(),g=C.trim()}m.includes(".")&&(h=m.split("."),p=h[0],m=h[1]);let x=r;if("fields"===p&&(x=o),x&&m in x){if("fields"===p){const C=o[m];return C?h[2]&&"value"===h[2]&&C.type in this.fieldPipes?(d=this.fieldPipes[C.type](C),void(l=l.replace(f,d))):h[2]&&"label"===h[2]?(d=this.getFieldLabel(C.labelKey,c),void(l=l.replace(f,d))):(d=(0,On.Z)({fields:o},g,""),void(l=l.replace(f,d))):void(l=l.replace(f,""))}d=(0,On.Z)({context:r},g,""),u in this.valuePipes&&(d=this.valuePipes[u](d)),l=l.replace(f,d)}else l=l.replace(f,d)}),l}valueTypeFormat(e,r){return this.typeFormatter.toUserFormat(e,r)}fieldTypeFormat(e,r){return this.typeFormatter.toUserFormat(e,r.value)}enumFormat(e){return(0,D.isVoid)(e.definition.options)||(0,D.isVoid)(e.value)?"":this.language.getListLabel(e.definition.options,e.value)}multiEnumFormat(e){if((0,D.isVoid)(e.definition.options)||(0,D.isVoid)(e.valueList)||e.valueList.length<1)return"";const r=[];return e.valueList.forEach(o=>{(0,D.isVoid)(o)||r.push(this.language.getListLabel(e.definition.options,o))}),r.join(", ")}getFieldLabel(e,r=""){return(0,D.isVoid)(e)?"":this.language.getFieldLabel(e,r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(vt),t.\u0275\u0275inject(Ke))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(vt),t.\u0275\u0275inject(Ke))},token:n,providedIn:"root"}),n})(),Ra=(()=>{class n{constructor(e,r){this.dynamicLabels=e,this.language=r,this.template="",this.labelKey="",this.context={},this.fields={},this.module=null,this.parsedLabel=""}ngOnInit(){this.vm$=this.language.vm$.pipe((0,v.tap)(()=>{this.labelKey&&(this.template=this.language.getFieldLabel(this.labelKey,this.module)),this.parseLabel()}))}ngOnChanges(e){(e.template||e.context||e.labelKey||e.fields)&&this.parseLabel()}parseLabel(){this.parsedLabel=this.dynamicLabels.parse(this.template,this.context,this.fields)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(I_),t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-dynamic-label"]],inputs:{template:"template",labelKey:"labelKey",context:"context",fields:"fields",module:"module"},features:[t.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dynamic-label"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,vR,3,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf],pipes:[_.AsyncPipe],encapsulation:2}),n})(),Oa=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),wc=(()=>{class n{constructor(e){this.breakpointObserver=e,this.special=!1,this.actions=!1,this.appendActions=!1,this.labelDisplay="top",this.labelClass={},this.inputClass={},this.rowClass={},this.colClass={},this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.baseColClass={col:!0,"form-group":!0,"m-1":!0},this.baseRowClass={"form-row":!0,"align-items-center":!0},this.baseLabelClass={"col-form-label-sm":!0,"mb-0":!0},this.baseInputClass={"form-control":!0,"form-control-sm":!0},this.currentSize="web",this.subscriptions=[]}ngOnInit(){this.initScreenSizeObserver(this.breakpointObserver),this.buildGrid(),this.colClass=Object.assign(Object.assign({},this.colClass),this.baseColClass),this.rowClass=Object.assign(Object.assign({},this.rowClass),this.baseRowClass),this.labelClass=Object.assign(Object.assign({},this.labelClass),this.baseLabelClass),this.inputClass=Object.assign(Object.assign({},this.inputClass),this.baseInputClass)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get colNumber(){const e=this.sizeMap[this.currentSize];return this.maxColumns&&e>this.maxColumns?this.maxColumns:e}addSpecialSlots(e){if(!e||0===e.length)return;const r=this.getNeededExtraSlots();if(0!==r.length)if(1===this.colNumber)r.reverse().forEach(o=>{const a={cols:[]};this.fillRow(a),e.push(a),a.cols[0][o]=!0});else if(!0===this.appendActions){const o=e[e.length-1],a=this.colNumber-1;r.forEach(s=>{o.cols[a][s]=!0})}else{let a=e[e.length-1];a.cols[this.colNumber-r.length].field&&(a={cols:[]},this.fillRow(a),e.push(a));let s=this.colNumber-1;r.forEach(l=>{a.cols[s][l]=!0,s--})}}getNeededExtraSlots(){const e=[];return this.actions&&e.push("actionSlot"),this.special&&e.push("specialSlot"),e}fillRow(e){for(let o=e.cols.length;o<this.colNumber;o++)e.cols.push({})}initScreenSizeObserver(e){this.subscriptions.push(e.observe(["(max-width: 599.98px) and (orientation: portrait)"]).subscribe(r=>{r.matches&&(this.currentSize="handset",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)"]).subscribe(r=>{r.matches&&(this.currentSize="tablet",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)","(min-width: 840px) and (orientation: portrait)","(min-width: 1280px) and (orientation: landscape)"]).subscribe(r=>{r.matches&&(this.currentSize="web",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 1920px)"]).subscribe(r=>{r.matches&&(this.currentSize="wide",this.buildGrid())}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ke))},n.\u0275dir=t.\u0275\u0275defineDirective({type:n,inputs:{special:"special",actions:"actions",appendActions:"appendActions",labelDisplay:"labelDisplay",labelClass:"labelClass",inputClass:"inputClass",rowClass:"rowClass",colClass:"colClass",sizeMap:"sizeMap",maxColumns:"maxColumns"}}),n})(),Ec=(()=>{class n extends wc{constructor(e){super(e),this.breakpointObserver=e,this.fieldMode="detail"}ngOnChanges(){this.buildGrid()}buildGrid(){const e=[];if(!this.fields||0===this.fields.length)return void(this.fieldGrid=[]);let r=0,o={cols:[]};e.push(o),this.fields.forEach(s=>{r>=this.colNumber&&(r=0,o={cols:[]},e.push(o)),o.cols.push({field:s}),r++}),r<this.colNumber&&this.fillRow(e[e.length-1]),this.addSpecialSlots(e),this.fieldGrid=e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-field-grid"]],inputs:{fieldMode:"fieldMode",fields:"fields",record:"record"},features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275NgOnChangesFeature],ngContentSelectors:DR,decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"d-flex"],[3,"pr-3",4,"ngIf"],[3,"flex-grow-1",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","ngClass"],[3,"field","klass","mode","record","type"]],template:function(e,r){1&e&&(t.\u0275\u0275projectionDef(ER),t.\u0275\u0275elementStart(0,"form"),t.\u0275\u0275template(1,wR,2,2,"div",0),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.fieldGrid))},directives:function(){return[_.NgForOf,_.NgClass,_.NgIf,gn,yi]},encapsulation:2}),n})(),vi=(()=>{class n{constructor(){this.actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}}}run(e,r,o){!this.actions||!this.actions[r]||!this.actions[r][e.key]||this.actions[r][e.key].run(o,e)}getHandler(e,r){let o=e.key;return e&&e.asyncProcess&&(o="async-process"),this.actions&&this.actions[r]&&this.actions[r][o]?this.actions[r][o]:null}addHandler(e,r,o){this.actions[r]||(this.actions[r]={}),this.actions[r][e.key]=o}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})();class fo extends D.ActionHandler{shouldDisplay(i){return!0}}let Dc=(()=>{class n extends fo{constructor(){super(),this.key="displayType",this.modes=["edit","detail","list","create","massupdate","filter"]}run(e,r){const o=e.record;if(!o||!e.field)return;const s=r.params&&r.params.activeOnFields||{},l=Object.keys(s),c=r.params&&r.params.activeOnAttributes||{},f=Object.keys(c);if(!l.length&&!f.length)return;const u=r.params&&r.params.targetDisplayType;if(!u)return;let d=this.isActive(l,o,s,f,c),p=e.field.defaultDisplay;d&&(p=u),e.field.display=p,(r.params&&r.params.resetOn||"none")===p&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}isActive(e,r,o,a,s){let l=this.areFieldsActive(e,r,o);return l||(l=this.areAttributesActive(a,r,s)),l}areAttributesActive(e,r,o){return e.some(a=>{const l=r.fields&&r.fields[a]||null,c=o[a]&&Object.keys(o[a]);if(l&&c&&c.length)return c.some(f=>{const u=o[a][f],d=l.attributes&&l.attributes[f];if(u&&u.length&&d)return this.isValueActive(d,u)})})}areFieldsActive(e,r,o){return e.some(a=>{const l=r.fields&&r.fields[a]||null,c=o[a];if(l&&c&&c.length)return this.isValueActive(l,c)})}isValueActive(e,r){let o=!1;return e.valueList&&e.valueList.length?(e.valueList.some(a=>r.some(s=>{if(s===a)return o=!0,!0})),o):(e.value&&r.some(a=>{a===e.value&&(o=!0)}),o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Ic=(()=>{class n extends fo{constructor(){super(),this.key="emailPrimarySelect",this.modes=["edit","create","massupdate"]}run(e,r){const a=e.field;if(!e.record||!a)return;const s=a.items;if(!a||!s||!s.length)return;const l=s.filter(d=>!(d&&d.attributes&&d.attributes.deleted));if(l&&1!==l.length)return;const c=l[0],f=c.fields&&c.fields["email-fields"]||{},u=f.attributes&&f.attributes.primary_address||null;u&&!(0,D.isTrue)(u.value)&&(u.value="true",u.formControl.setValue("true"),f.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})();const F_=n=>i=>n.isEmptyTrimmedInputValue(i.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:i.value}}}}:null,A_=n=>i=>n.isEmptyBooleanInputValue(i.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:i.value}}}}:null;let ja=(()=>{class n{constructor(e){this.utils=e}applies(e,r){return!(!r||!r.fieldDefinition||!r.fieldDefinition.required)}getValidator(e){return"boolean"===e.type?[A_(this.utils)]:[F_(this.utils)]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yr))},token:n,providedIn:"root"}),n})(),Fc=(()=>{class n extends fo{constructor(e){super(),this.requiredValidator=e,this.key="required",this.modes=["edit","create","massupdate","filter"]}run(e,r){const o=e.record,a=e.field;if(!o||!a)return;const s=r.params&&r.params.activeOnFields||{},l=Object.keys(s),c=r.params&&r.params.activeOnAttributes||{},f=Object.keys(c);if(!l.length&&!f.length)return;const u=this.isActive(l,o,s,f,c);let d=!1,p=[...e.field.validators||[]];u&&(d=!0,p=p.concat(this.requiredValidator.getValidator(a))),e.field.definition.required=d,e.field.formControl.setValidators(p),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),o.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}isActive(e,r,o,a,s){let l=this.areFieldsActive(e,r,o);return l||(l=this.areAttributesActive(a,r,s)),l}areAttributesActive(e,r,o){return e.some(a=>{const l=r.fields&&r.fields[a]||null,c=o[a]&&Object.keys(o[a]);if(l&&c&&c.length)return c.some(f=>{const u=o[a][f],d=l.attributes&&l.attributes[f];if(u&&u.length&&d)return this.isValueActive(d,u)})})}areFieldsActive(e,r,o){return e.some(a=>{const l=r.fields&&r.fields[a]||null,c=o[a];if(l&&c&&c.length)return this.isValueActive(l,c)})}isValueActive(e,r){let o=!1;return e.valueList&&e.valueList.length?(e.valueList.some(a=>r.some(s=>{if(s===a)return o=!0,!0})),o):(e.value&&r.some(a=>{a===e.value&&(o=!0)}),o)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(ja))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(ja))},token:n,providedIn:"root"}),n})(),$i=(()=>{class n{constructor(e,r){this.config=e,this.preferences=r}getFieldCurrencyValue(e,r){const o=this.isBase(e),a=this.getCurrencyId(r);if(!o&&null!==a)return e.value;const s=parseFloat(e.value);if(!isFinite(s))return e.value;const l=this.getUserCurrency();return this.baseToCurrency(l.id,s).toString()}baseToCurrency(e,r){const o=this.getConversionRate(e);return isFinite(o)?this.round(rr(r,o)):r}currencyToBase(e,r){const o=this.getConversionRate(e);return isFinite(o)?this.round(Vo(r,o)):r}round(e){const r=this.getPrecision();return ws(e,r)}getCurrencyId(e){var r,o,a;return null!==(a=null===(o=null===(r=null==e?void 0:e.fields)||void 0===r?void 0:r.currency_id)||void 0===o?void 0:o.value)&&void 0!==a?a:null}isBase(e){var r,o;return null!==(o=null===(r=null==e?void 0:e.metadata)||void 0===r?void 0:r.isBaseCurrency)&&void 0!==o&&o}getCurrency(e){var r;return null!==(r=this.config.getConfigValue("currencies")[e])&&void 0!==r?r:[]}getBaseCurrency(){return this.config.getConfigValue("currency")}getUserCurrency(){return this.preferences.getUserPreference("currency")}getPrecision(){const e=parseInt(this.preferences.getUserPreference("default_currency_significant_digits"));if(isFinite(e))return e;const r=parseInt(this.config.getConfigValue("default_currency_significant_digits"));return isFinite(r)?r:0}getConversionRate(e){const r=this.getCurrency(e);return parseFloat(r.conversion_rate)}getCode(e){return this.getCurrency(e).iso4217}getSymbol(e){return this.getCurrency(e).symbol}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt))},token:n,providedIn:"root"}),n})(),Ac=(()=>{class n extends fo{constructor(e){super(),this.currencyService=e,this.key="update-base-currency",this.modes=["edit","create","massupdate","filter"]}run(e,r){var o,a,s,l,c,f;const u=e.record,d=e.field;if(!u||!d)return;const p=null!==(o=r.params.currencyIdField)&&void 0!==o?o:"currency_id",h=null!==(a=r.params.currencyField)&&void 0!==a?a:"amount",m=null!==(l=null===(s=null==u?void 0:u.fields[p])||void 0===s?void 0:s.value)&&void 0!==l?l:null;let g=parseFloat(null!==(f=null===(c=null==u?void 0:u.fields[h])||void 0===c?void 0:c.value)&&void 0!==f?f:null);if(!isFinite(g))return;null===m&&this.updateValue(d,g,u);const x=this.currencyService.currencyToBase(m,g);!isFinite(x)||this.updateValue(d,x,u)}updateValue(e,r,o){e.value=r.toString(),e.formControl.setValue(r.toString()),o.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject($i))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject($i))},token:n,providedIn:"root"}),n})(),Nc=(()=>{class n extends fo{constructor(e){super(),this.currencyService=e,this.key="update-currency",this.modes=["edit","create","massupdate","filter"]}run(e,r){var o,a,s,l,c,f,u,d,p,h;const m=e.record,g=e.field,x=null!==(s=null===(a=null===(o=null==g?void 0:g.definition)||void 0===o?void 0:o.metadata)||void 0===a?void 0:a.isBaseCurrency)&&void 0!==s&&s;if(!m||!g||x)return;const C=null!==(l=r.params.currencyIdField)&&void 0!==l?l:"currency_id",A=null!==(c=r.params.baseCurrencyField)&&void 0!==c?c:"amount_usdollar",S=null!==(u=null===(f=null==m?void 0:m.fields[C])||void 0===f?void 0:f.value)&&void 0!==u?u:null;let E=parseFloat(null!==(d=null==g?void 0:g.value)&&void 0!==d?d:null),F=parseFloat(null!==(h=null===(p=null==m?void 0:m.fields[A])||void 0===p?void 0:p.value)&&void 0!==h?h:null);if(!isFinite(E)||!isFinite(F)||null===S)return;const b=this.currencyService.baseToCurrency(S,F);!isFinite(b)||this.updateValue(g,b,m)}updateValue(e,r,o){e.value=r.toString(),e.formControl.setValue(r.toString()),o.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject($i))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject($i))},token:n,providedIn:"root"}),n})(),Tc=(()=>{class n extends fo{constructor(){super(),this.key="update-flex-relate-module",this.modes=["edit","create","massupdate","filter"]}run(e,r){var o,a,s,l,c,f,u;const d=e.record,p=e.field;if(!d||!p)return;const h=null!==(o=p.definition.type_name)&&void 0!==o?o:"";""!==h&&(null!==(s=null===(a=null==d?void 0:d.fields[h])||void 0===a?void 0:a.value)&&void 0!==s?s:"")!==(null!==(c=null===(l=null==p?void 0:p.definition)||void 0===l?void 0:l.module)&&void 0!==c?c:"")&&(p.definition.module=null!==(u=null===(f=null==d?void 0:d.fields[h])||void 0===f?void 0:f.value)&&void 0!==u?u:"",this.updateValue(p,{},"",d))}updateValue(e,r,o,a){e.value=o,e.valueObject=r,e.formControl.setValue(o),a.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Nt=(()=>{class n extends vi{constructor(e,r,o,a,s,l){super(),e.modes.forEach(c=>this.actions[c][e.key]=e),r.modes.forEach(c=>this.actions[c][r.key]=r),o.modes.forEach(c=>this.actions[c][o.key]=o),a.modes.forEach(c=>this.actions[c][a.key]=a),s.modes.forEach(c=>this.actions[c][s.key]=s),l.modes.forEach(c=>this.actions[c][l.key]=l)}runLogic(e,r,o){if(!e.logic)return;const a=Object.keys(e.logic).map(c=>e.logic[c]),s=this.parseModeActions(a,r),l={record:o,field:e,module:o.module};s.forEach(c=>{this.runAction(c,r,l)})}runAction(e,r,o=null){this.runFrontEndAction(e,r,o)}runFrontEndAction(e,r,o=null){const a=this.buildActionData(e,o);this.run(e,r,a)}getModuleName(e){return e.module}buildActionData(e,r){return{field:r.field,record:r&&r.record||null}}parseModeActions(e,r){if(!e)return[];const o={list:[],detail:[],edit:[],create:[],massupdate:[],filter:[]};e&&e.length&&e.forEach(s=>{!s.modes||!s.modes.length||s.modes.forEach(l=>{!o[l]&&!s.asyncProcess||o[l].push(s)})});const a=[];return o[r].forEach(s=>{a.push(s)}),a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Dc),t.\u0275\u0275inject(Ic),t.\u0275\u0275inject(Fc),t.\u0275\u0275inject(Ac),t.\u0275\u0275inject(Nc),t.\u0275\u0275inject(Tc))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Dc),t.\u0275\u0275inject(Ic),t.\u0275\u0275inject(Fc),t.\u0275\u0275inject(Ac),t.\u0275\u0275inject(Nc),t.\u0275\u0275inject(Tc))},token:n,providedIn:"root"}),n})(),Dn=(()=>{class n{constructor(e,r){this.typeFormatter=e,this.logic=r,this.klass=null,this.dependentFields=[],this.dependentAttributes=[],this.subs=[]}ngOnInit(){this.baseInit()}baseInit(){this.initDependencyHandlers()}initDependencyHandlers(){if(!this.record)return;const e=this.record.fields&&Object.keys(this.record.fields)||[];e.length>1&&(this.calculateDependentFields(e),this.field.valueChanges$&&(this.dependentFields.length||this.dependentAttributes.length)&&this.subs.push(this.field.valueChanges$.pipe((0,v.debounceTime)(500)).subscribe(()=>{this.dependentFields.forEach(r=>{const o=this.record.fields[r]||null;!o||this.logic.runLogic(o,this.mode,this.record)}),this.dependentAttributes.forEach(r=>{const o=this.record.fields[r.field]||{},a=o&&o.attributes&&o.attributes[r.attribute]||null;!a||this.logic.runLogic(a,this.mode,this.record)})})))}calculateDependentFields(e){e.forEach(r=>{"field"!==this.field.source?"attribute"!==this.field.source||this.addAttributeDependency(r,this.dependentFields,this.dependentAttributes):this.addFieldDependency(r,this.dependentFields,this.dependentAttributes)})}addFieldDependency(e,r,o){const a=this.record.fields[e];e!==(this.field.name||this.field.definition.name||"")&&a&&(a.fieldDependencies&&a.fieldDependencies.length&&this.isDependencyField(a.fieldDependencies)&&r.push(e),(a.attributes&&Object.keys(a.attributes)||[]).forEach(c=>{const f=a.attributes[c];!f||!f.fieldDependencies||!f.fieldDependencies.length||this.isDependencyField(f.fieldDependencies)&&o.push({field:e,attribute:c})}))}isDependencyField(e){const r=this.field.name||this.field.definition.name||"";return e.some(o=>r===o)}addAttributeDependency(e,r,o){const a=this.record.fields[e];e!==(this.field.name||this.field.definition.name||"")&&a&&(a.attributeDependencies&&a.attributeDependencies.length&&this.isDependencyAttribute(a.attributeDependencies)&&r.push(e),(a.attributes&&Object.keys(a.attributes)||[]).forEach(c=>{const f=a.attributes[c];!f||!f.attributeDependencies||!f.attributeDependencies.length||this.isDependencyAttribute(f.attributeDependencies)&&o.push({field:e,attribute:c})}))}isDependencyAttribute(e){const r=this.field.parentKey||"",o=this.field.name||this.field.definition.name||"";return e.some(a=>r===a.field&&o===a.attribute)}subscribeValueChanges(){this.field&&this.field.formControl&&this.subs.push(this.field.formControl.valueChanges.subscribe(e=>{e=(0,D.isVoid)(e)?"":e.trim(),this.typeFormatter&&this.field.type&&(e=this.typeFormatter.toInternalFormat(this.field.type,e)),this.setFieldValue(e)}))}setFieldValue(e){this.field.value=e}unsubscribeAll(){this.subs.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],inputs:{klass:"klass",mode:"mode",field:"field",record:"record",parent:"parent"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),js=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}getTelLink(e){return e?"tel:"+this.getUnFormatted(e):null}getUnFormatted(e){return e?e.replace(/\s+/g,""):""}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-phone-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[3,"href"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"a",0),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("href",r.getTelLink(r.field.value),t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2}),n})(),qr=(()=>{class n extends Dn{constructor(e,r,o){super(r,o),this.languages=e,this.typeFormatter=r,this.logic=o,this.selectedValues=[],this.valueLabel="",this.options=[],this.subs=[],this.isDynamicEnum=!1}ngOnInit(){super.ngOnInit(),this.field.metadata&&this.field.metadata.options$?this.subs.push(this.field.metadata.options$.subscribe(e=>{this.buildProvidedOptions(e),this.initValue()})):this.field.definition&&this.field.definition.options&&this.subs.push(this.languages.vm$.subscribe(e=>{this.buildAppStringListOptions(e.appListStrings),this.initValue()}))}ngOnDestroy(){this.isDynamicEnum=!1,this.subs.forEach(e=>e.unsubscribe())}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched?"is-invalid":""}buildProvidedOptions(e){this.options=e,this.optionsMap={},e.forEach(r=>{this.optionsMap[r.value]=r.label})}buildAppStringListOptions(e){if(this.optionsMap={},this.addExtraOptions(),e&&this.field.definition.options&&e[this.field.definition.options]){const r=e[this.field.definition.options];this.options&&Object.keys(this.options)&&(this.optionsMap=Object.assign(Object.assign({},this.optionsMap),r))}this.buildOptionsArray(e)}addExtraOptions(){(this.field.metadata&&this.field.metadata.extraOptions||[]).forEach(r=>{if((0,D.isVoid)(r.value))return;let o=r.label||"";r.labelKey&&(o=this.languages.getFieldLabel(r.labelKey)),this.optionsMap[r.value]=o})}buildOptionsArray(e){this.options=[],Object.keys(this.optionsMap).forEach(r=>{this.options.push({value:r,label:this.optionsMap[r]})}),this.isDynamicEnum&&this.buildDynamicEnumOptions(e)}initValue(){this.selectedValues=[],this.field.value?"string"==typeof this.field.value&&(!this.optionsMap||"string"==typeof this.optionsMap[this.field.value]&&this.field.value&&(this.valueLabel=this.optionsMap[this.field.value],this.selectedValues.push({value:this.field.value,label:this.valueLabel}))):this.initEnumDefault()}initEnumDefault(){var e,r,o;if(!(0,D.isEmptyString)(null===(e=this.record)||void 0===e?void 0:e.id))return;let a=null===(o=null===(r=this.field)||void 0===r?void 0:r.definition)||void 0===o?void 0:o.default;"string"==typeof a&&(a=a.trim()),a&&(this.selectedValues.push({value:a,label:this.optionsMap[a]}),this.initEnumDefaultFieldValues(a))}initEnumDefaultFieldValues(e){if("multienum"===this.field.type){const r=this.selectedValues.map(o=>o.value);this.field.valueList=r,this.field.formControl.setValue(r)}else this.field.value=e,this.field.formControl.setValue(e);this.field.formControl.markAsDirty()}checkAndInitAsDynamicEnum(){const e=this.field&&this.field.definition||{},o=e&&e.parentenum||"",a=this.record&&this.record.fields||null;if(e&&e.dynamic&&o&&a){this.isDynamicEnum=!0;const s=a[o];s&&this.subscribeToParentValueChanges(s)}}buildDynamicEnumOptions(e){const r=this.record.fields[this.field.definition.parentenum];if(r){const o=e[r.definition.options];if(o&&0!==Object.keys(o).length){this.mappedOptions=this.createParentChildOptionsMap(o,this.options);let a=[];"multienum"===r.definition.type?a=r.valueList:a.push(r.value),this.options=this.filterMatchingOptions(a)}}}filterMatchingOptions(e){let r=[];return e&&e.length?(e.forEach(o=>{!this.mappedOptions[o]||(r=r.concat([...this.mappedOptions[o]]))}),r):[]}createParentChildOptionsMap(e,r){const o={};return Object.keys(e).forEach(a=>{o[a]=r.filter(s=>String(s.value).startsWith(a))}),o}subscribeToParentValueChanges(e){e.formControl&&this.subs.push(e.formControl.valueChanges.subscribe(r=>{"string"==typeof r&&(r=[r]),this.field.value="",this.field.formControl.setValue(""),this.options=this.filterMatchingOptions(r),this.initValue()}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),Bs=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}initValue(){this.selectedValues=[],!this.field.valueList||this.field.valueList.length<1?this.initEnumDefault():this.field.valueList.forEach(e=>{"string"==typeof this.optionsMap[e]&&this.selectedValues.push({value:e,label:this.optionsMap[e]})})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),Ps=(()=>{class n extends Bs{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}ngOnInit(){this.field.valueList=[],this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.valueList=this.field.criteria.values),super.ngOnInit()}onAdd(){const e=this.selectedValues.map(r=>r.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e}onRemove(){let e=this.selectedValues.map(r=>r.value);e||(e=[]),this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e,setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-multienum-filter"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(so,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"tag-input",0,1),t.\u0275\u0275listener("ngModelChange",function(a){return r.selectedValues=a})("onAdd",function(){return r.onAdd()})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),t.\u0275\u0275element(2,"tag-input-dropdown",2),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),t.\u0275\u0275advance(2),t.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},directives:[Vn.TagInputComponent,y.NgControlStatus,y.NgModel,Vn.TagInputDropdown],encapsulation:2}),n})(),zi=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-enum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,r){1&e&&t.\u0275\u0275text(0),2&e&&t.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2}),n})(),N_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule]]}),n})(),T_=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}getNameField(e,r){if(!e.value||!r.attributes)return;const o=e.value.split(" "),a=[];return o.forEach(s=>{r.attributes[s]&&a.push(r.attributes[s])}),a.join(" ")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),ks=(()=>{class n extends T_{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}ngOnInit(){super.ngOnInit(),this.data=this.getNameField(this.field,this.record)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-fullname-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,r){1&e&&t.\u0275\u0275text(0),2&e&&t.\u0275\u0275textInterpolate1("\n",r.data,"\n")},encapsulation:2}),n})(),L_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),Zo=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-varchar-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,r){1&e&&t.\u0275\u0275text(0),2&e&&t.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2}),n})(),qo=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}get target(){return this.field.metadata&&this.field.metadata.target?this.field.metadata.target:"_blank"}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-url-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"target","href"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"a",0),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275propertyInterpolate("href",r.field.value,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275property("target",r.target),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2}),n})(),po=(()=>{class n extends Dn{constructor(e,r,o){super(r,o),this.formatter=e,this.typeFormatter=r,this.logic=o,this.vm$=this.formatter.format$}getDateFormat(){return this.formatter.getDateFormat()}getDateTimeFormat(){return this.formatter.getDateTimeFormat()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(si),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),Us=(()=>{class n extends po{constructor(e,r,o){super(e,r,o),this.formatter=e,this.typeFormatter=r,this.logic=o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-date-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,IR,3,4,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf],pipes:[_.AsyncPipe,_.DatePipe],encapsulation:2}),n})(),R_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),O_=(()=>{class n{constructor(e){this.formatter=e}transform(e,r=null){return this.formatter.toUserFormat(e,r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Os,16))},n.\u0275pipe=t.\u0275\u0275definePipe({name:"formatCurrency",type:n,pure:!0}),n})(),j_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),Vs=(()=>{class n extends Dn{constructor(e,r,o,a){super(o,a),this.userPreferences=e,this.systemConfig=r,this.typeFormatter=o,this.logic=a,this.preferences$=this.userPreferences.userPreferences$,this.configs$=this.systemConfig.configs$,this.vm$=(0,w.combineLatest)([this.configs$,this.preferences$]).pipe((0,v.map)(([s,l])=>({configs:s,preferences:l})))}get format(){return!this.field.metadata||!1!==this.field.metadata.format}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Vt),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),$s=(()=>{class n extends Vs{constructor(e,r,o,a,s){super(e,r,o,a),this.userPreferences=e,this.systemConfig=r,this.typeFormatter=o,this.logic=a,this.currencyService=s}getOptions(){let e={};this.field&&this.field.metadata&&null!==this.field.metadata.digits&&isFinite(this.field.metadata.digits)&&(e={digits:this.field.metadata.digits});const r=this.currencyService.isBase(this.field);let o=this.currencyService.getCurrencyId(this.record);return(r||null===o)&&(o=this.currencyService.getUserCurrency().id),e.symbol=this.currencyService.getSymbol(o),e.code=this.currencyService.getCode(o),e}getCurrencyValue(){return this.currencyService.getFieldCurrencyValue(this.field,this.record)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Vt),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt),t.\u0275\u0275directiveInject($i))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-currency-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,FR,3,4,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf],pipes:[_.AsyncPipe,O_],encapsulation:2}),n})(),B_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,j_]]}),n})(),Lc=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-text-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[["readonly","",3,"rows","cols","ngClass"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"textarea",0),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("rows",r.rows)("cols",r.cols)("ngClass",r.klass),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(r.field.value))},directives:[_.NgClass],encapsulation:2}),n})(),Rc=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-varchar-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"input",0),2&e&&(t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("formControl",r.field.formControl)("value",r.field.value)("ngClass",r.klass))},directives:[y.DefaultValueAccessor,y.NgControlStatus,y.FormControlDirective,_.NgClass],encapsulation:2}),n})();class ci{constructor(i){this.hourStep=1,this.minuteStep=15,this.secondStep=30,this.displaySeconds=!1,Object.assign(this,i)}static toDateTimeStruct(i,e){if(!e)return null;const r=i.userDateTimeFormatToStruct(e);if(!r)return null;const{date:o,time:a}=r;return new ci({date:o,time:a})}static internalToDateTimeStruct(i,e){if(!e)return null;const r=i.internalDateTimeFormatToStruct(e);if(!r)return null;const{date:o,time:a}=r;return new ci({date:o,time:a})}toUserFormat(i){const o=[[this.date.year,this.date.month,this.date.day].join("-"),[this.time.hour,this.time.minute,this.time.second].join(":")].join(" "),a=i.toInternalFormat(o,{fromFormat:"yyyy-M-d H:m:s"});return i.toUserFormat(a,{fromFormat:"yyyy-M-d H:m:s"})}}let Oc=(()=>{class n extends po{constructor(e,r,o,a,s){super(e,r,s),this.formatter=e,this.typeFormatter=r,this.calendar=o,this.config=a,this.logic=s,this.dateTimeModel=new ci,a.autoClose="outside",a.placement=this.getPlacement()}ngOnInit(){if((0,D.isEmptyString)(this.field.value))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=ci.internalToDateTimeStruct(this.formatter,this.field.value),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const r=ci.toDateTimeStruct(this.formatter,e.target.value);!r||(this.dateTimeModel=r)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(si),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(be.NgbCalendar),t.\u0275\u0275directiveInject(be.NgbPopoverConfig),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-datetime-edit"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(be.NgbPopover,7),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.popover=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(e,r){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"input",1),t.\u0275\u0275listener("change",function(a){return r.onInputChange(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"scrm-button",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,AR,5,7,"ng-template",null,4,t.\u0275\u0275templateRefExtractor)),2&e){const o=t.\u0275\u0275reference(5);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("ngClass",r.klass)("placeholder",r.getDateTimeFormat().toLowerCase())("formControl",r.field.formControl),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.getOpenButton())("ngbPopover",o)}},directives:[y.DefaultValueAccessor,_.NgClass,y.NgControlStatus,y.FormControlDirective,ir,be.NgbPopover,be.NgbDatepicker,y.NgModel,be.NgbTimepicker],encapsulation:2}),n})(),P_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,be.NgbDatepickerModule,be.NgbTimepickerModule,En,Sn,y.ReactiveFormsModule,be.NgbModule]]}),n})(),jc=(()=>{class n extends be.NgbDateParserFormatter{constructor(e){super(),this.formatter=e}parse(e){return e?this.formatter.dateFormatToStruct(e,this.formatter.getUserFormat()):null}format(e){if(!e)return null;const r=[e.year,e.month,e.day].join("-");return this.formatter.toUserFormat(r,{fromFormat:"yyyy-M-d"})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(li))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Bc=(()=>{class n extends be.NgbDateAdapter{constructor(e){super(),this.formatter=e}fromModel(e){return e?this.formatter.dateFormatToStruct(e):null}toModel(e){if(!e)return null;const r=[e.year,e.month,e.day].join("-");return this.formatter.toUserFormat(r,{fromFormat:"yyyy-M-d"})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(li))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),zs=(()=>{class n extends po{constructor(e,r,o){super(e,r,o),this.formatter=e,this.typeFormatter=r,this.logic=o}ngOnInit(){super.ngOnInit();let e="";this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]);let r=null;(0,D.isEmptyString)(e)||(e=e.trim(),r=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"})),this.field.value=e,this.field.formControl.setValue(r),this.field.formControl.markAsDirty(),this.setModel(e),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setModel(e){this.field.formControl.setValue(e),this.field.value=this.formatter.toInternalFormat(e),this.dateModel=this.formatter.dateFormatToStruct(e,this.formatter.getUserFormat())}getOpenButton(e){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:()=>{e.toggle(),e.navigateTo(this.dateModel)},icon:"calendar"}}getPlacement(){return["bottom-left","bottom-right","top-left","top-right"]}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-date-filter"]],features:[t.\u0275\u0275ProvidersFeature([{provide:be.NgbDateAdapter,useClass:Bc},{provide:be.NgbDateParserFormatter,useClass:jc}]),t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(e,r){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"input",1,2),t.\u0275\u0275listener("ngModelChange",function(a){return r.setModel(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span",3),t.\u0275\u0275element(4,"scrm-button",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e){const o=t.\u0275\u0275reference(2);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("ngClass",r.klass)("placement",r.getPlacement())("placeholder",r.getDateFormat().toLowerCase())("formControl",r.field.formControl)("startDate",r.dateModel),t.\u0275\u0275advance(3),t.\u0275\u0275property("config",r.getOpenButton(o))}},directives:[be.NgbInputDatepicker,y.DefaultValueAccessor,_.NgClass,y.NgControlStatus,y.FormControlDirective,ir],encapsulation:2}),n})(),Gs=(()=>{class n extends po{constructor(e,r,o){super(e,r,o),this.formatter=e,this.typeFormatter=r,this.logic=o}getUserTimeZone(){return this.formatter.userTimeZone()}toDateTime(e){return this.formatter.toDateTime(e,this.formatter.getInternalFormat(),{zone:"GMT"}).toJSDate()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(si),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-datetime-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,TR,2,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf],pipes:[_.AsyncPipe,_.DatePipe],encapsulation:2}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),U_=(()=>{class n extends po{constructor(e,r,o,a,s){super(e,r,s),this.formatter=e,this.typeFormatter=r,this.calendar=o,this.config=a,this.logic=s,this.dateTimeModel=new ci,a.autoClose="outside",a.placement=this.getPlacement()}ngOnInit(){super.ngOnInit();let r="";if((this.field&&this.field.criteria&&this.field.criteria.values||[]).length>0&&(r=this.field.criteria.values[0]),(0,D.isEmptyString)(r))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=ci.internalToDateTimeStruct(this.formatter,r),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const r=ci.toDateTimeStruct(this.formatter,e.target.value);!r||(this.dateTimeModel=r)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(si),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(be.NgbCalendar),t.\u0275\u0275directiveInject(be.NgbPopoverConfig),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-datetime-filter"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(be.NgbPopover,7),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.popover=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(e,r){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"input",1),t.\u0275\u0275listener("change",function(a){return r.onInputChange(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"scrm-button",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,LR,5,7,"ng-template",null,4,t.\u0275\u0275templateRefExtractor)),2&e){const o=t.\u0275\u0275reference(5);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("ngClass",r.klass)("placeholder",r.getDateTimeFormat().toLowerCase())("formControl",r.field.formControl),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.getOpenButton())("ngbPopover",o)}},directives:[y.DefaultValueAccessor,_.NgClass,y.NgControlStatus,y.FormControlDirective,ir,be.NgbPopover,be.NgbDatepicker,y.NgModel,be.NgbTimepicker],encapsulation:2}),n})(),V_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,be.NgbDatepickerModule,be.NgbTimepickerModule,En,Sn,y.ReactiveFormsModule,be.NgbModule]]}),n})(),Ws=(()=>{class n extends Bs{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-multienum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"ul"),t.\u0275\u0275template(1,RR,2,1,"li",0),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.selectedValues))},directives:[_.NgForOf],encapsulation:2}),n})(),Ba=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const r=e[0];this.selectedValues.push(r),this.onAdd(r),this.tag.dropdown.hide()}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-enum-edit"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(so,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"tag-input",0,1),t.\u0275\u0275listener("ngModelChange",function(a){return r.selectedValues=a})("onAdd",function(a){return r.onAdd(a)})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),t.\u0275\u0275element(2,"tag-input-dropdown",2),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275classMap(r.getInvalidClass()),t.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),t.\u0275\u0275advance(2),t.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},directives:[Vn.TagInputComponent,y.NgControlStatus,y.NgModel,Vn.TagInputDropdown],encapsulation:2}),n})(),Pc=(()=>{class n extends Dn{get checked(){return(0,D.isTrue)(this.field.value)}toggle(){let e="true";this.checked&&(e="false"),this.field.value=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=t.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),Jo=(()=>{class n extends Pc{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-boolean-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"checkbox-container"],["type","checkbox","disabled","","readonly","","aria-hidden","true",3,"checked"],[1,"checkmark"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"label",0),t.\u0275\u0275element(1,"input",1),t.\u0275\u0275element(2,"span",2),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",r.checked))},encapsulation:2}),n})(),on=(()=>{class n{constructor(e){this.systemConfig=e}toFrontend(e){const r=this.getLegacyToFrontendMap();return r[e]?r[e]:e}toLegacy(e){const r=this.getFrontendToLegacyMap();return r[e]?r[e]:e}isValid(e){let o=!1;return this.getFrontendToLegacyMap()[e]&&(o=!0),o}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("module_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("module_name_map"),r={};return Object.keys(e).forEach(o=>{r[e[o]]=o}),r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt))},token:n,providedIn:"root"}),n})(),Jr=(()=>{class n{constructor(e){this.systemConfig=e}toFrontend(e){const r=this.getLegacyToFrontendMap();return r[e]?r[e]:e}toLegacy(e){const r=this.getFrontendToLegacyMap();return r[e]?r[e]:e}isValid(e){let o=!1;return this.getFrontendToLegacyMap()[e]&&(o=!0),o}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("action_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("action_name_map"),r={};return Object.keys(e).forEach(o=>{r[e[o]]=o}),r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt))},token:n,providedIn:"root"}),n})();const Ks="./#";let xn=(()=>{class n{constructor(e,r,o){this.router=e,this.moduleNameMapper=r,this.actionNameMapper=o}getModuleInfo(e,r){return r&&r.modules?r.modules[e]:null}getModuleLabel(e,r){if(!r||!r.moduleList||!e)return"";const o=e&&e.labelKey||"";return r.moduleList[o]||o}getModuleRoute(e){let r=e&&e.defaultRoute||"",o=null;return r.startsWith(Ks)&&(o=r.replace(Ks,""),r=null),{route:o,url:r,params:null}}navigate(e){const r=this.getActionRoute(e);return this.router.navigate([r.route],{queryParams:r.params})}getActionRoute(e){let r=e.url,o=null,a=null;return r.startsWith(Ks)&&(o=r.replace(Ks,""),r=null,e.params&&(a=e.params)),{route:o,url:r,params:a}}getActionLabel(e,r,o,a=""){if(!(o&&o.modStrings&&r&&e))return"";let s=a;s||(s=r.labelKey);let l=o.modStrings[e]&&o.modStrings[e][s];return l||(l=o.appStrings&&o.appStrings[s]),!l&&r.module&&(l=o.modStrings[r.module]&&o.modStrings[r.module][s]),l||(l=o.modStrings.administration&&o.modStrings.administration[s]),l||""}getRecordRouterLink(e,r){return`/${e}/record/${r}`}navigateBack(e,r,o){let a=this.getReturnModule(o),s=this.getReturnAction(o);const l=this.getReturnId(o);let c="";a&&(c+="/"+a),s&&(c+="/"+s),l&&(c+="/"+l),a===r&&"record"===s&&(c="/"+r+"/record/"+(l||e.id)),!c&&e&&e.id&&(c="/"+r+"/record/"+e.id),!c&&e&&e.id&&(c="/"+r),this.router.navigate([c]).then()}getReturnId(e){return e.return_id||""}getReturnAction(e){let r="";return e.return_action&&(r=this.actionNameMapper.toFrontend(e.return_action)),r}getReturnModule(e){let r="";return e.return_module&&(r=this.moduleNameMapper.toFrontend(e.return_module)),r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(on),t.\u0275\u0275inject(Jr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(on),t.\u0275\u0275inject(Jr))},token:n,providedIn:"root"}),n})(),Hs=(()=>{class n extends Dn{constructor(e,r,o,a,s,l,c,f,u){super(e,r),this.typeFormatter=e,this.logic=r,this.preferences=o,this.navigation=a,this.moduleNameMapper=s,this.actionNameMapper=l,this.appState=c,this.modalService=f,this.router=u}ngOnInit(){this.linkType=this.preferences.getUserPreference("email_link_type")||"mailto"}openEmail(){const e=this.actionNameMapper.toLegacy(this.appState.getView()),r=this.moduleNameMapper.toLegacy(this.parent.module),o=this.parent.id;let l;"ListView"!==e&&"index"!==e&&(l=o),this.router.navigate(["emails","compose"],{queryParams:{return_module:r,return_action:e,return_id:l,to_addrs_names:this.field.value,parent_type:r,parent_name:this.parent.attributes.name,parent_id:o}})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt),t.\u0275\u0275directiveInject(Vt),t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(Jr),t.\u0275\u0275directiveInject(At),t.\u0275\u0275directiveInject(be.NgbModal),t.\u0275\u0275directiveInject(z.Router))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-email-list"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"mailto-field"],[3,"href",4,"ngIf"],["class","clickable field-link",3,"click",4,"ngIf"],[3,"href"],[1,"clickable","field-link",3,"click"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,OR,2,2,"a",1),t.\u0275\u0275template(2,jR,2,1,"a",2),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","mailto"===r.linkType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","sugar"===r.linkType))},directives:[_.NgIf],encapsulation:2}),n})(),$_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),kc=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}ngOnInit(){super.ngOnInit();let e="";this.field.criteria&&this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),e=(0,D.isVoid)(e)?"":e.trim(),this.field.value=e;const r=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"});this.field.formControl.setValue(r),this.field.formControl.markAsDirty(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-varchar-filter"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"input",0),2&e&&(t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("formControl",r.field.formControl)("value",r.field.value)("ngClass",r.klass))},directives:[y.DefaultValueAccessor,y.NgControlStatus,y.FormControlDirective,_.NgClass],encapsulation:2}),n})(),z_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Vn.TagInputModule,y.FormsModule]]}),n})(),G_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule]]}),n})(),Zs=(()=>{class n extends Vs{constructor(e,r,o,a){super(e,r,o,a),this.userPreferences=e,this.systemConfig=r,this.typeFormatter=o,this.logic=a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Vt),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-float-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,BR,3,3,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:function(){return[_.NgIf]},pipes:function(){return[_.AsyncPipe,Uc]},encapsulation:2}),n})(),Uc=(()=>{class n extends _.DecimalPipe{constructor(e,r){super(r),this.formatter=e,this.locale=r}transform(e,r,o){return e?this.formatter.toUserFormat(""+e):null}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Pr,16),t.\u0275\u0275directiveInject(t.LOCALE_ID,16))},n.\u0275pipe=t.\u0275\u0275definePipe({name:"formatNumber",type:n,pure:!0}),n})(),Vc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),W_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Vc]]}),n})(),$c=(()=>{class n extends po{constructor(e,r,o,a){super(e,o,a),this.formatter=e,this.dateAdapter=r,this.typeFormatter=o,this.logic=a}ngOnInit(){(0,D.isEmptyString)(this.field.value)&&this.field.formControl.setValue(null),this.dateModel=this.formatter.dateFormatToStruct(this.field.value,this.formatter.getInternalFormat()),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setModel(e){this.field.value=this.formatter.toInternalFormat(e),this.dateModel=this.formatter.dateFormatToStruct(e,this.formatter.getUserFormat())}getOpenButton(e){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:()=>{e.toggle(),e.navigateTo(this.dateModel)},icon:"calendar"}}getPlacement(){return["bottom-left","bottom-right","top-left","top-right"]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(be.NgbDateAdapter),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-date-edit"]],features:[t.\u0275\u0275ProvidersFeature([{provide:be.NgbDateAdapter,useClass:Bc},{provide:be.NgbDateParserFormatter,useClass:jc}]),t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"field-datetime-edit","input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(e,r){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"input",1,2),t.\u0275\u0275listener("ngModelChange",function(a){return r.setModel(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span",3),t.\u0275\u0275element(4,"scrm-button",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e){const o=t.\u0275\u0275reference(2);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("ngClass",r.klass)("placement",r.getPlacement())("placeholder",r.getDateFormat().toLowerCase())("formControl",r.field.formControl)("startDate",r.dateModel),t.\u0275\u0275advance(3),t.\u0275\u0275property("config",r.getOpenButton(o))}},directives:[be.NgbInputDatepicker,y.DefaultValueAccessor,_.NgClass,y.NgControlStatus,y.FormControlDirective,ir],encapsulation:2}),n})(),qs=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}ngOnInit(){this.field.value="",this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.value=this.field.criteria.values[0]),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",void(this.field.criteria.values=[e.value]);this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[],this.field.criteria.operator="",this.field.criteria.values=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.field.criteria.operator="",this.field.criteria.values=[],setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-boolean-filter"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(so,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","clearOnBlur","displayBy","identifyBy","inputClass","onlyFromAutocomplete","placeholder","secondaryPlaceholder","onAdd","onRemove","ngModelChange"],["tag",""],[3,"autocompleteItems","displayBy","identifyBy","keepOpen","showDropdownIfEmpty"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"tag-input",0,1),t.\u0275\u0275listener("onAdd",function(a){return r.onAdd(a)})("onRemove",function(){return r.onRemove()})("ngModelChange",function(a){return r.selectedValues=a}),t.\u0275\u0275element(2,"tag-input-dropdown",2),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275classMap(r.getInvalidClass()),t.\u0275\u0275property("ngModel",r.selectedValues)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("inputClass",r.getInvalidClass())("onlyFromAutocomplete",!0)("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel()),t.\u0275\u0275advance(2),t.\u0275\u0275property("autocompleteItems",r.options)("displayBy","label")("identifyBy","value")("keepOpen",!1)("showDropdownIfEmpty",!0))},directives:[Vn.TagInputComponent,y.NgControlStatus,y.NgModel,Vn.TagInputDropdown],encapsulation:2}),n})(),K_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,y.ReactiveFormsModule]]}),n})(),H_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,y.ReactiveFormsModule,Vn.TagInputModule]]}),n})(),Js=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-relate-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,r){1&e&&t.\u0275\u0275text(0),2&e&&t.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2}),n})(),Z_=(()=>{class n{getConfig(e){return{klass:"light-filter",panelMode:"collapsible",isCollapsed:!0,collapseOnSearch:!0,savedFilterEdit:!1,module:e.recordList.getModule(),filter$:e.recordList.criteria$.pipe((0,v.map)(r=>({key:"default",criteria:r}))),savedFilters$:(0,w.of)([]),searchFields$:e.searchMetadata$.pipe((0,v.map)(r=>{if(!r)return{};let o="advanced";return r.layout.advanced||(o="basic"),r.layout[o]})),listFields:[],onClose:()=>{},onSearch:()=>{},updateFilter:(r,o=!0)=>{e.recordList.updateSearchCriteria(r.criteria,o)},resetFilter:r=>{e.recordList.resetSearchCriteria(r)},addSavedFilter:r=>{},removeSavedFilter:r=>{},setOpenFilter:r=>{}}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();class q_{getTable(i,e=!1){const r={showHeader:!0,showFooter:!0,klass:"light-table",module:i.recordList.getModule(),columns:i.columns$.pipe((0,v.map)(o=>this.mapColumns(i,o))),sort$:i.recordList.sort$,maxColumns$:(0,w.of)(5),loading$:i.recordList.loading$,dataSource:i.recordList,pagination:i.recordList,toggleRecordSelection:o=>{i.recordList.toggleSelection(o)},updateSorting:(o,a)=>{i.recordList.updateSorting(o,a),i.saveCurrentSort()}};return e&&(r.selection$=i.recordList.selection$,r.selectedCount$=i.recordList.selectedCount$,r.selectedStatus$=i.recordList.selectedStatus$),r}mapColumns(i,e){const r=[];return e.forEach(o=>{const a=Object.assign({},o);a.metadata=Object.assign({},o.metadata||{}),this.disableRelateFieldsLink(a),this.addLinkSelectHandler(i,a),r.push(a)}),r}disableRelateFieldsLink(i){"relate"===i.type&&(i.link=!1,i.metadata.link=!1)}addLinkSelectHandler(i,e){!e.link||(e.metadata.onClick=(r,o)=>{i.recordList.clearSelection(),i.recordList.toggleSelection(o.id),i.emitLinkClicked()})}}let Pa=(()=>{class n{constructor(e){this.apollo=e,this.fieldsMetadata={fields:["id","_id","meta","records"]}}fetch(e,r,o,a,s,l){const c=l.fields,f={query:q()`
              query getRecordList($module: String!, $limit: Int, $offset: Int, $criteria: Iterable, $sort: Iterable) {
                getRecordList(module: $module, limit: $limit, offset: $offset, criteria: $criteria, sort: $sort) {
                  ${c.join("\n")}
                }
              }
            `,variables:{module:e,limit:r,offset:o,criteria:a,sort:s}};return this.apollo.query(f)}get(e,r,o,a){const s=this.mapSort(o);return this.fetch(e,a.pageSize,a.current,r,s,this.fieldsMetadata).pipe((0,v.map)(({data:l})=>{const c={records:[],pagination:Object.assign({},a)};if(!l||!l.getRecordList)return c;const f=l.getRecordList;if(f.records&&f.records.forEach(u=>{c.records.push(this.mapRecord(u))}),!f.meta)return c;if(f.meta.offsets){const u={current:"current",next:"next",prev:"previous",total:"total",end:"last"};Object.keys(u).forEach(d=>{d in f.meta.offsets&&(c.pagination[u[d]]=f.meta.offsets[d])})}return c}))}mapSort(e){return{sortOrder:{NONE:"",ASC:"ASC",DESC:"DESC"}[e.sortOrder],orderBy:e.orderBy}}mapRecord(e){return e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})(),it=(()=>{class n{constructor(e){this.config=e,this.messages=[],this.timeout=3,this.messagesStage=new w.BehaviorSubject([]),this.messages$=this.messagesStage.asObservable(),this.initTimeOut()}updateState(e){this.messagesStage.next(this.messages=e)}removeMessages(){this.updateState([])}contains(e,r=!1){let o=!1;for(let a=0;a<this.messages.length;a++)if(e.text===this.messages[a].text){if(o=!0,r){const s=[...this.messages];s.splice(a,1),this.updateState(s)}break}return o}addMessage(e){let r=-1;if(!this.contains(e)){const o=[...this.messages];r=o.push(e),(e.type===D.MessageTypes.success||e.type===D.MessageTypes.warning)&&setTimeout(()=>{this.contains(e,!0)},1e3*this.timeout),this.updateState(o)}return r}addPrimaryMessage(e){return this.addMessage({type:D.MessageTypes.primary,text:e})}addSecondaryMessage(e){return this.addMessage({type:D.MessageTypes.secondary,text:e})}addSuccessMessage(e){return this.addMessage({type:D.MessageTypes.success,text:e})}addSuccessMessageByKey(e){return this.addMessage({type:D.MessageTypes.success,labelKey:e})}addDangerMessage(e){return this.addMessage({type:D.MessageTypes.danger,text:e})}addDangerMessageByKey(e){return this.addMessage({type:D.MessageTypes.danger,labelKey:e})}addWarningMessage(e){return this.addMessage({type:D.MessageTypes.warning,text:e})}addWarningMessageByKey(e){return this.addMessage({type:D.MessageTypes.warning,labelKey:e})}addInfoMessage(e){return this.addMessage({type:D.MessageTypes.info,text:e})}addDarkMessage(e){return this.addMessage({type:D.MessageTypes.dark,text:e})}log(...e){console.log.apply(console,e)}error(...e){console.error.apply(console,e)}initTimeOut(){const e=this.config.getConfigValue("ui");if(e&&e.alert_timeout){const r=parseInt(e.alert_timeout,10);isNaN(r)||(this.timeout=r)}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt))},token:n,providedIn:"root"}),n})();const Qs={filters:{}},Xs={orderBy:"",sortOrder:D.SortDirection.DESC},Ys={all:!1,status:D.SelectionStatus.NONE,selected:{},count:0},f4={module:"",records:[],criteria:(0,D.deepClone)(Qs),sort:(0,D.deepClone)(Xs),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},selection:(0,D.deepClone)(Ys),loading:!1};let zc=(()=>{class n{constructor(e,r,o,a,s,l){this.listGQL=e,this.configStore=r,this.preferencesStore=o,this.appStateStore=a,this.languageStore=s,this.message=l,this.cache$=null,this.internalState=(0,D.deepClone)(f4),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.records$=this.state$.pipe((0,v.map)(c=>c.records),(0,v.distinctUntilChanged)()),this.criteria$=this.state$.pipe((0,v.map)(c=>c.criteria),(0,v.distinctUntilChanged)()),this.sort$=this.state$.pipe((0,v.map)(c=>c.sort),(0,v.distinctUntilChanged)()),this.pagination$=this.state$.pipe((0,v.map)(c=>c.pagination),(0,v.distinctUntilChanged)()),this.selection$=this.state$.pipe((0,v.map)(c=>c.selection),(0,v.distinctUntilChanged)()),this.selectedCount$=this.state$.pipe((0,v.map)(c=>c.selection.count),(0,v.distinctUntilChanged)()),this.selectedStatus$=this.state$.pipe((0,v.map)(c=>c.selection.status),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading))}connect(){return this.records$}disconnect(){}get criteria(){return(0,D.deepClone)(this.internalState.criteria?this.internalState.criteria:Qs)}set criteria(e){this.updateState(Object.assign(Object.assign({},this.internalState),{criteria:e}))}get sort(){return(0,D.deepClone)(this.internalState.sort?this.internalState.sort:Xs)}set sort(e){this.updateState(Object.assign(Object.assign({},this.internalState),{sort:e}))}get selection(){return(0,D.deepClone)(this.internalState.selection?this.internalState.selection:Ys)}get records(){return this.internalState.records?this.internalState.records:[]}getModule(){return this.internalState.module}getRecord(e){let r=null;return this.records.some(o=>{if(o.id===e)return r=o,!0}),r}destroy(){this.clear()}init(e,r=!0,o="list_max_entries_per_page"){return this.internalState.module=e,this.watchPageSize(o),!1===r?null:this.load()}load(e=!0){return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.getRecords(this.internalState.module,this.internalState.criteria,this.internalState.sort,this.internalState.pagination,e).pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_GET_RECORD_LIST_ERROR"),(0,w.of)({records:[],criteria:(0,D.deepClone)(Qs),sort:(0,D.deepClone)(Xs),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},selection:(0,D.deepClone)(Ys)}))),(0,v.tap)(r=>{this.calculatePageCount(r.records,r.pagination),this.updateState(Object.assign(Object.assign({},this.internalState),{records:r.records,pagination:r.pagination,loading:!1}))}))}updateSearchCriteria(e,r=!0){this.updateState(Object.assign(Object.assign({},this.internalState),{criteria:e})),r&&(this.updateSelection(D.SelectionStatus.NONE),this.resetPagination())}resetSearchCriteria(e=!0){this.updateSearchCriteria((0,D.deepClone)(Qs),e)}updateSorting(e,r,o=!0){r===D.SortDirection.NONE&&(e="",r=D.SortDirection.DESC);const a={orderBy:e,sortOrder:r};this.updateState(Object.assign(Object.assign({},this.internalState),{sort:a})),o&&this.load(!1).pipe((0,v.take)(1)).subscribe()}mapSortOrder(e){let r=D.SortDirection.NONE;const o=e.toLowerCase();return"asc"===o?r=D.SortDirection.ASC:"desc"===o&&(r=D.SortDirection.DESC),r}updatePagination(e){const r=Object.assign(Object.assign({},this.internalState.pagination),{current:e});this.updateState(Object.assign(Object.assign({},this.internalState),{pagination:r})),this.load(!1).pipe((0,v.take)(1)).subscribe()}resetPagination(){this.updatePagination(0)}clear(){this.cache$=null,this.store.unsubscribe(),this.preferencesSub.unsubscribe()}clearAuthBased(){this.clear()}getSelectionStatus(){return this.selectedStatus$}getSelectedCount(){return this.selectedCount$}updateSelection(e){e!==D.SelectionStatus.NONE?e!==D.SelectionStatus.ALL?e!==D.SelectionStatus.PAGE||this.selectPage():this.selectAll():this.clearSelection()}clearSelection(){this.updateState(Object.assign(Object.assign({},this.internalState),{selection:(0,D.deepClone)(Ys)}))}clearSort(){this.updateState(Object.assign(Object.assign({},this.internalState),{sort:(0,D.deepClone)(Xs)}))}selectAll(){const e=this.internalState.pagination.total;this.updateState(Object.assign(Object.assign({},this.internalState),{selection:{all:!0,status:D.SelectionStatus.ALL,selected:{},count:e}}))}selectPage(){const e=Object.assign({},this.internalState.selection.selected);this.internalState.records&&this.internalState.records.length&&this.internalState.records.forEach(r=>{r&&r.id&&(e[r.id]=r.id)}),this.updateState(Object.assign(Object.assign({},this.internalState),{selection:{all:!1,status:D.SelectionStatus.SOME,selected:e,count:Object.keys(e).length}}))}toggleSelection(e){const r=(0,D.deepClone)(this.internalState.selection);r.selected[e]?delete r.selected[e]:r.selected[e]=e,r.count=Object.keys(r.selected).length,r.status=0===r.count?D.SelectionStatus.NONE:D.SelectionStatus.SOME,this.updateState(Object.assign(Object.assign({},this.internalState),{selection:r}))}getPaginationCount(){return this.pagination$.pipe((0,v.map)(e=>({pageFirst:e.pageFirst,pageLast:e.pageLast,total:e.total})),(0,v.distinctUntilChanged)())}getPagination(){return this.store.value.pagination}changePage(e){let r=0;const o={};if(o[D.PageSelection.FIRST]=0,o[D.PageSelection.PREVIOUS]=this.internalState.pagination.previous,o[D.PageSelection.NEXT]=this.internalState.pagination.next,o[D.PageSelection.LAST]=this.internalState.pagination.last,e in o&&o[e]>=0){if(r=o[e],r>this.internalState.pagination.last||r<0)return;this.updatePagination(r)}}setPageSize(e){const r=Object.assign(Object.assign({},this.internalState.pagination),{pageSize:e});this.updateState(Object.assign(Object.assign({},this.internalState),{pagination:r}))}watchPageSize(e){const r=this.preferencesStore.getUserPreference(e),o=this.configStore.getConfigValue(e);this.determinePageSize(r,o),this.preferencesSub=(0,w.combineLatest)([this.configStore.configs$,this.preferencesStore.userPreferences$]).pipe((0,v.tap)(([a,s])=>{this.determinePageSize(s&&s[e]||null,a&&a[e]&&a[e].value||null)})).subscribe()}determinePageSize(e,r){let o=0;e?o=e:r&&(o=parseInt(r,10)),this.setPageSize(o)}updateState(e){this.store.next(this.internalState=e)}calculatePageCount(e,r){const o=e&&e.length||0;let a=0,s=0;o>0&&(a=r.current+1,s=r.current+o),r.pageFirst=a,r.pageLast=s}getRecords(e,r,o,a,s=!0){return(null==this.cache$||!1===s)&&(this.cache$=this.listGQL.get(e,r,o,a).pipe((0,v.shareReplay)(1))),this.cache$}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Pa),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(it))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),lr=(()=>{class n{constructor(e,r,o,a,s,l){this.listGQL=e,this.configStore=r,this.preferencesStore=o,this.appStateStore=a,this.languageStore=s,this.message=l}create(){return new zc(this.listGQL,this.configStore,this.preferencesStore,this.appStateStore,this.languageStore,this.message)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Pa),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(it))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Pa),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(it))},token:n,providedIn:"root"}),n})();const Gc={module:"",detailView:{},editView:{},listView:{},search:{},recordView:{},subPanel:{},massUpdate:{},recentlyViewed:[],favorites:[]},J_={};let el=(0,D.deepClone)(Gc),Qo=(0,D.deepClone)(J_);const Q_={};let mo=(0,D.deepClone)(Q_),St=(()=>{class n{constructor(e,r){this.recordGQL=e,this.appState=r,this.typeKeys={listView:"listView",search:"search",recordView:"recordView",subPanel:"subPanel",massUpdate:"massUpdate",recentlyViewed:"recentlyViewed",favorites:"favorites"},this.store=new w.BehaviorSubject(el),this.state$=this.store.asObservable(),this.allModuleStore=new w.BehaviorSubject(Qo),this.allModulesState$=this.allModuleStore.asObservable(),this.resourceName="moduleMetadata",this.fieldsMetadata={fields:["id","_id"]},this.types=["listView","search","recordView","subPanel","massUpdate","recentlyViewed","favorites"],this.baseTypes=["listView","search","recordView","favorites"],this.listViewColumns$=this.state$.pipe((0,v.map)(o=>o.listView.fields),(0,v.distinctUntilChanged)()),this.listViewLineActions$=this.state$.pipe((0,v.map)(o=>o.listView.lineActions),(0,v.distinctUntilChanged)()),this.listMetadata$=this.state$.pipe((0,v.map)(o=>o.listView),(0,v.distinctUntilChanged)()),this.searchMetadata$=this.state$.pipe((0,v.map)(o=>o.search),(0,v.distinctUntilChanged)()),this.recordViewMetadata$=this.state$.pipe((0,v.map)(o=>o.recordView),(0,v.distinctUntilChanged)()),this.subPanelMetadata$=this.state$.pipe((0,v.map)(o=>o.subPanel),(0,v.distinctUntilChanged)()),this.metadata$=this.state$,this.allModuleMetadata$=this.allModulesState$}clear(){mo=(0,D.deepClone)(Q_),Qo=(0,D.deepClone)(J_),this.updateState("",(0,D.deepClone)(Gc))}clearAuthBased(){this.clear()}getMetadataTypes(){return this.types}getModule(){return el.module}get(){return el}getModuleMeta(e){var r;const o=null!==(r=Qo[e])&&void 0!==r?r:{};return Object.assign({},o)}setModuleMetadata(e,r){mo[e]=(0,w.of)(r).pipe((0,v.shareReplay)(1)),this.updateAllModulesState(e,r)}reloadModuleMetadata(e,r,o=!0){return r||(r=this.getMetadataTypes()),this.getMetadata(e,r,o).pipe((0,v.tap)(a=>{this.updateAllModulesState(e,a)}))}load(e,r,o=!0){return r||(r=this.getMetadataTypes()),this.getMetadata(e,r,o).pipe((0,v.tap)(a=>{this.updateState(e,a)}))}isCached(e){var r;return null!==(null!==(r=mo[e])&&void 0!==r?r:null)}getEmpty(){return(0,D.deepClone)(Gc)}set(e,r){mo[e]=(0,w.of)(r).pipe((0,v.shareReplay)(1)),this.updateState(e,r)}getMetadata(e,r=null,o=!0){return(null==mo[e]||!1===o)&&(mo[e]=this.fetchMetadata(e,r).pipe((0,v.shareReplay)(1))),mo[e]}mapMetadata(e,r){var o;const a=null!==(o=Qo[e])&&void 0!==o?o:{},s=Object.assign({},a);return this.parseListViewMetadata(r,s),this.parseSearchMetadata(r,s),this.parseRecordViewMetadata(r,s),this.parseSubPanelMetadata(r,s),this.parseMassUpdateMetadata(r,s),this.parseRecentlyViewedMetadata(r,s),this.parseFavoritesMetadata(r,s),s}updateState(e,r){this.updateAllModulesState(e,r),this.store.next(el=Object.assign(Object.assign({},r),{module:e}))}updateAllModulesState(e,r){if(""!==e){const o=Object.assign({},Qo);o[e]=Object.assign({},r),this.allModuleStore.next(Qo=o)}}fetchMetadata(e,r){const o={fields:[...this.fieldsMetadata.fields,...null!=r?r:this.baseTypes]};return this.recordGQL.fetch(this.resourceName,`/api/module-metadata/${e}`,o).pipe((0,v.map)(({data:a})=>this.mapMetadata(e,a.moduleMetadata)))}parseListViewMetadata(e,r){if(!e||!e.listView)return;const o={fields:[],bulkActions:{},lineActions:[],chartTypes:{},filters:[]};e.listView.columns&&e.listView.columns.forEach(s=>{o.fields.push(s)}),this.addDefinedMeta(o,e.listView,{bulkActions:"bulkActions",lineActions:"lineActions",sidebarWidgets:"sidebarWidgets",availableFilters:"filters"}),r.listView=o}parseSearchMetadata(e,r){e&&e.search&&(r.search=e.search)}parseSubPanelMetadata(e,r){e&&e.subPanel&&(r.subPanel=e.subPanel)}parseMassUpdateMetadata(e,r){e&&e.massUpdate&&(r.massUpdate=e.massUpdate)}parseRecordViewMetadata(e,r){if(!e||!e.recordView)return;const o={actions:[],templateMeta:{},panels:[]};this.addDefinedMeta(o,e.recordView,{templateMeta:"templateMeta",actions:"actions",panels:"panels",topWidget:"topWidget",sidebarWidgets:"sidebarWidgets",bottomWidgets:"bottomWidgets",summaryTemplates:"summaryTemplates",vardefs:"vardefs"}),r.recordView=o}parseRecentlyViewedMetadata(e,r){e&&e.recentlyViewed&&(r.recentlyViewed=e.recentlyViewed)}parseFavoritesMetadata(e,r){e&&e.favorites&&(r.favorites=e.favorites)}addDefinedMeta(e,r,o){Object.keys(o).forEach(a=>{r[a]&&(e[o[a]]=r[a])})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Zr),t.\u0275\u0275inject(At))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Zr),t.\u0275\u0275inject(At))},token:n,providedIn:"root"}),n})(),X_=(()=>{class n{constructor(e,r,o){this.listStoreFactory=e,this.meta=r,this.preferences=o,this.module="",this.parentModule="",this.recordList=e.create(),this.loading$=this.recordList.loading$,this.metadataLoadingState=new w.BehaviorSubject(!1),this.linkClickedState=new w.BehaviorSubject(!1),this.linkClicked$=this.linkClickedState.asObservable(),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e,r=""){this.module=e,this.parentModule=r,this.loadCurrentSort(),this.metadataLoadingState.next(!0);const o=this.meta.getMetadata(e).pipe((0,v.tap)(()=>{this.metadataLoadingState.next(!1),this.recordList.load().pipe((0,v.take)(1)).subscribe()}));this.listMetadata$=o.pipe((0,v.map)(a=>a.listView)),this.searchMetadata$=o.pipe((0,v.map)(a=>a.search)),this.recordList.init(e,!1,"list_max_entries_per_subpanel"),this.columns$=this.listMetadata$.pipe((0,v.map)(a=>a.fields))}load(e=!0){return this.recordList.load(e)}loadCurrentSort(){if(!this.parentModule)return;const e=this.loadPreference(this.parentModule,"current-sort");!e||(0,D.emptyObject)(e)||(this.recordList.sort=e)}saveCurrentSort(){!this.parentModule||this.savePreference(this.parentModule,"current-sort",this.recordList.sort)}emitLinkClicked(){this.linkClickedState.next(!0)}getPreferenceKey(e){return this.module+"-record-list-modal-"+e}savePreference(e,r,o){this.preferences.setUi(e,this.getPreferenceKey(r),o)}loadPreference(e,r){return this.preferences.getUi(e,this.getPreferenceKey(r))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Y_=(()=>{class n{constructor(e,r,o){this.listStoreFactory=e,this.metadataStore=r,this.preferences=o}create(){return new X_(this.listStoreFactory,this.metadataStore,this.preferences)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Vt))},token:n,providedIn:"root"}),n})(),ho=(()=>{class n{constructor(e,r){this.screenSize=e,this.systemConfigStore=r,this.screen=Xn.Medium,this.maxColumns=5}getMaxColumns(e){return(0,w.combineLatest)([e,this.screenSize.screenSize$]).pipe((0,v.map)(([r,o])=>(o&&(this.screen=o),this.calculateMaxColumns(r))),(0,v.distinctUntilChanged)())}calculateMaxColumns(e=!0){let r;if(r=this.systemConfigStore.getConfigValue("listview_column_limits"),r=e?r.with_sidebar:r.without_sidebar,this.screen&&r){const o=r[this.screen];o&&(this.maxColumns=o)}return this.maxColumns}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lo),t.\u0275\u0275inject(yt))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),ka=(()=>{class n{constructor(e,r,o,a){this.activeModal=e,this.storeFactory=r,this.languages=o,this.maxColumnCalculator=a,this.titleKey="",this.multiSelect=!1,this.multiSelectButtonLabel="LBL_SAVE",this.adapter=null,this.filterAdapter=null,this.subs=[],this.store=this.storeFactory.create()}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}},this.init()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}init(){!this.module||(this.initStore(),this.initTableAdapter(),this.initFilterAdapters())}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns((0,w.of)(!0))}linkSelectedRecords(){this.activeModal.close({selection:this.store.recordList.selection,records:this.store.recordList.records})}buildSelectButton(){return{klass:["btn","btn-primary","btn-sm"],onClick:()=>{this.linkSelectedRecords()},labelKey:this.multiSelectButtonLabel}}initTableAdapter(){null===this.adapter&&(this.adapter=new q_),this.tableConfig=this.adapter.getTable(this.store,this.multiSelect),this.tableConfig.maxColumns$=this.getMaxColumns()}initFilterAdapters(){null===this.filterAdapter&&(this.filterAdapter=new Z_),this.filterConfig=this.filterAdapter.getConfig(this.store)}initStore(){var e;this.store.init(this.module,null!==(e=this.parentModule)&&void 0!==e?e:""),this.loading$=this.store.metadataLoading$,this.subs.push(this.store.linkClicked$.pipe((0,v.distinctUntilChanged)(),(0,v.skip)(1)).subscribe(r=>{!r||this.linkSelectedRecords()}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(be.NgbActiveModal),t.\u0275\u0275directiveInject(Y_),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(ho))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-list-modal"]],inputs:{titleKey:"titleKey",multiSelect:"multiSelect",multiSelectButtonLabel:"multiSelectButtonLabel",adapter:"adapter",filterAdapter:"filterAdapter",module:"module",parentModule:"parentModule"},features:[t.\u0275\u0275ProvidersFeature([ho])],decls:4,vars:5,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","headerKlass","border-0","klass","record-list-modal",3,"closable","close","title"],["modal-body",""],[4,"ngIf"],["labelKey","LBL_CONFIG_NO_CONFIG"],[1,"container-fluid"],[1,"row","pb-3"],[1,"col"],[3,"config",4,"ngIf"],[1,"row"],[3,"config"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"scrm-modal",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275template(2,PR,2,0,"ng-container",2),t.\u0275\u0275template(3,zR,12,6,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("closable",!0)("close",r.closeButton)("title",r.titleKey),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.tableConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.tableConfig))},directives:function(){return[Ko,_.NgIf,gn,_l,cd,oa,ir]},pipes:function(){return[_.AsyncPipe]},encapsulation:2,data:{animation:[(0,Xt.trigger)("modalFade",[(0,Xt.transition)("void <=> *",[(0,Xt.animate)("800ms")])])]}}),n})(),Xo=(()=>{class n{constructor(e){this.recordList=e.create()}init(e){this.recordList.init(e,!1)}search(e,r){const o=this.recordList.criteria;return o.filters[r]={field:r,operator:"=",values:[e]},this.recordList.updateSearchCriteria(o,!1),this.recordList.load(!1).pipe((0,v.map)(a=>a.records),(0,v.take)(1),(0,v.shareReplay)(1))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Wc=(()=>{class n extends Dn{constructor(e,r,o,a,s){super(r,s),this.languages=e,this.typeFormatter=r,this.relateService=o,this.moduleNameMapper=a,this.logic=s,this.selectedValues=[],this.status="",this.initModule="",this.search=l=>(this.status="searching",this.relateService.search(l,this.getRelateFieldName()).pipe((0,v.tap)(()=>this.status="found"),(0,v.catchError)(()=>(this.status="error",(0,w.of)([]))),(0,v.map)(c=>{if(!c||c.length<1)return this.status="not-found",[];const f=[];return c.forEach(u=>{u&&u.attributes&&f.push(u.attributes)}),this.status="",f})))}get module(){return this.record&&this.record.module?this.record.module:null}ngOnInit(){super.ngOnInit(),this.init(),this.subs.push(this.field.valueChanges$.subscribe(()=>{this.onModuleChange()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onModuleChange(){var e,r,o;const a=this.initModule,s=null!==(o=null===(r=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.definition)||void 0===r?void 0:r.module)&&void 0!==o?o:"";a!==s&&(this.initModule=s,""===a&&a!==s&&this.init(),this.status=""===s?"no-module":"")}getRelateFieldName(){return this.field&&this.field.definition&&this.field.definition.rname||"name"}getRelateIdField(){return this.field&&this.field.definition&&this.field.definition.id_name||""}getRelatedModule(){const e=this.field&&this.field.definition&&this.field.definition.module||"";return e?this.moduleNameMapper.toFrontend(e):""}getMessage(){const e={searching:"LBL_SEARCHING","not-found":"LBL_NOT_FOUND",error:"LBL_SEARCH_ERROR",found:"LBL_FOUND","no-module":"LBL_NO_MODULE_SELECTED"};return e[this.status]?e[this.status]:""}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched||this.hasSearchError()?"is-invalid":""}hasSearchError(){return"error"===this.status||"not-found"===this.status}resetStatus(){this.status=""}getPlaceholderLabel(){return this.languages.getAppString("LBL_TYPE_TO_SEARCH")||""}init(){var e,r,o;this.initModule=null!==(o=null===(r=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.definition)||void 0===r?void 0:r.module)&&void 0!==o?o:"",this.relateService&&this.relateService.init(this.getRelatedModule())}buildRelate(e,r){const o={id:e};return this.getRelateFieldName()&&(o[this.getRelateFieldName()]=r),o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Xo),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),Kc=(()=>{class n extends Wc{constructor(e,r,o,a,s,l){super(e,r,o,a,l),this.languages=e,this.typeFormatter=r,this.relateService=o,this.moduleNameMapper=a,this.modalService=s,this.logic=l,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){super.ngOnInit(),this.init()}init(){super.init(),this.initValue();const e=this.getRelateIdField();e&&this.record&&this.record.fields&&this.record.fields[e]&&(this.idField=this.record.fields[e])}initValue(){this.field.valueObject&&this.field.valueObject.id?(this.selectedValues=[],this.selectedValues.push(this.field.valueObject)):this.selectedValues=[]}onAdd(e){if(e){const r=this.getRelateFieldName();this.setValue(e.id,e[r])}else this.setValue("",""),this.selectedValues=[]}onRemove(){this.setValue("",""),this.selectedValues=[],setTimeout(()=>{this.tag.focus(!0,!0)},200)}setValue(e,r){const o=this.buildRelate(e,r);this.field.value=r,this.field.valueObject=o,this.field.formControl.setValue(r),this.field.formControl.markAsDirty(),this.idField&&(this.idField.value=e,this.idField.formControl.setValue(e),this.idField.formControl.markAsDirty())}showSelectModal(){const e=this.modalService.open(ka,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(r=>{if(!r||!r.selection||!r.selection.selected)return;const o=this.getSelectedRecord(r);this.setItem(o)})}getSelectedRecord(e){let r="";Object.keys(e.selection.selected).some(a=>(r=a,!0));let o=null;return e.records.some(a=>{if(a&&a.id===r)return o=a,!0}),o}setItem(e){this.tag.writeValue([e.attributes]),this.onAdd(e.attributes)}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const r=e[0];this.selectedValues.push(r),this.onAdd(r),this.tag.dropdown.hide()}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Xo),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(be.NgbModal),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-relate-edit"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(so,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[t.\u0275\u0275ProvidersFeature([Xo]),t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],["maxItems","1",3,"ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,GR,7,15,"ng-container",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(2,WR,2,2,"small",2)),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.initModule),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.getMessage()))},directives:[_.NgIf,Vn.TagInputComponent,y.NgControlStatus,y.NgModel,Vn.TagInputDropdown,ir,gn],encapsulation:2}),n})(),Hc=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-inline-loading-spinner"]],decls:4,vars:0,consts:[[1,"inline-spinner"],[1,"bounce1"],[1,"bounce2"],[1,"bounce3"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"div",1),t.\u0275\u0275element(2,"div",2),t.\u0275\u0275element(3,"div",3),t.\u0275\u0275elementEnd())},styles:[".inline-spinner[_ngcontent-%COMP%]{text-align:center}.inline-spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s infinite ease-in-out both;animation:sk-bouncedelay 1.4s infinite ease-in-out both}.inline-spinner[_ngcontent-%COMP%]   .bounce1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.inline-spinner[_ngcontent-%COMP%]   .bounce2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes sk-bouncedelay{0%,80%,to{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]}),n})(),go=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),ey=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Vn.TagInputModule,dn,y.FormsModule,go,Sn]]}),n})(),Zc=(()=>{class n extends Wc{constructor(e,r,o,a,s,l){super(e,r,o,a,l),this.languages=e,this.typeFormatter=r,this.relateService=o,this.moduleNameMapper=a,this.modalService=s,this.logic=l,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){const e=this.record;this.field.valueList=[],this.field.valueObjectArray=[];const r=this.field&&this.field.criteria&&this.field.criteria.values||[];r.length>0&&(this.field.valueList=r,this.selectedTags=r);const o=this.field&&this.field.criteria&&this.field.criteria.valueObjectArray||[];o.length>0&&(this.field.valueObjectArray=(0,D.deepClone)(o),this.selectedTags=(0,D.deepClone)(o)),super.ngOnInit();const a=this.getRelateIdField();if(a&&e&&e.criteriaFields&&e.criteriaFields[a]){this.idField=e.criteriaFields[a],this.idField.valueList=[];const s=this.idField&&this.idField.criteria&&this.idField.criteria.values||[];s.length>0&&(this.idField.valueList=(0,D.deepClone)(s))}}onAdd(e){e&&this.setValue(e)}onAdding(e){if(!e||this.idField&&this.idField.valueList.includes(e.id))return w.EMPTY;const r=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(e[r])?w.EMPTY:(0,w.of)(e)}onRemove(e){var r,o;const a=null!==(r=e.id)&&void 0!==r?r:"",s=null!==(o=e.name)&&void 0!==o?o:"";this.field.valueList=this.field.valueList.filter(l=>l!==s),this.field.valueObjectArray=this.field.valueObjectArray.filter(l=>l.id!==a),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray=(0,D.deepClone)(this.field.valueObjectArray),this.idField&&a&&(this.idField.valueList=this.idField.valueList.filter(l=>l!==a),this.updateSearchCriteria(this.idField)),setTimeout(()=>{this.tag.focus(!0,!0)},200)}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const r=e[0];this.tag.appendTag(r),this.onAdd(r),this.tag.dropdown.hide()}}setValue(e){const r=this.getRelateFieldName(),o=e.id,a=e[r];if(this.idField&&this.idField.valueList.includes(o)||!this.idField&&this.field.valueList.includes(a))return;const s={};s.id=o,s[r]=a,this.field.valueObjectArray.push(s),this.field.valueList.push(a),this.idField&&(this.idField.valueList.push(o),this.updateSearchCriteria(this.idField)),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray||(this.field.criteria.valueObjectArray=[]),this.field.criteria.valueObjectArray.push(s)}updateSearchCriteria(e){e.criteria.operator="=",e.criteria.values=e.valueList,e.formControl.setValue(e.valueList),e.formControl.markAsDirty()}showSelectModal(){const e=this.modalService.open(ka,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(r=>{if(!r||!r.selection||!r.selection.selected)return;const o=this.getSelectedRecord(r);this.field.valueObjectArray.find(s=>s.id===o.id)||this.setItem(o)})}getSelectedRecord(e){let r="";Object.keys(e.selection.selected).some(a=>(r=a,!0));let o=null;return e.records.some(a=>{if(a&&a.id===r)return o=a,!0}),o}setItem(e){this.tag.appendTag(e.attributes),this.onAdd(e.attributes)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Xo),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(be.NgbModal),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-relate-filter"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(so,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[t.\u0275\u0275ProvidersFeature([Xo]),t.\u0275\u0275InheritDefinitionFeature],decls:8,vars:18,consts:[[1,"d-flex"],[1,"flex-grow-1"],[3,"ngModel","clearOnBlur","identifyBy","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"tag-input",2,3),t.\u0275\u0275listener("keyup.enter",function(){return r.selectFirstElement()})("onAdd",function(a){return r.onAdd(a)})("onBlur",function(){return r.resetStatus()})("onRemove",function(a){return r.onRemove(a)})("ngModelChange",function(a){return r.selectedTags=a}),t.\u0275\u0275element(4,"tag-input-dropdown",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275element(6,"scrm-button",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,KR,2,2,"small",7)),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275classMap(r.getInvalidClass()),t.\u0275\u0275property("ngModel",r.selectedTags)("clearOnBlur",!0)("identifyBy","id")("displayBy",r.getRelateFieldName())("inputClass",r.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel()),t.\u0275\u0275advance(2),t.\u0275\u0275property("autocompleteObservable",r.search)("identifyBy","id")("displayBy",r.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.selectButton),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.getMessage()))},directives:[Vn.TagInputComponent,y.NgControlStatus,y.NgModel,Vn.TagInputDropdown,ir,_.NgIf,gn],encapsulation:2}),n})(),ty=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule]]}),n})(),ny=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),ry=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,be.NgbDatepickerModule,Sn,y.ReactiveFormsModule]]}),n})(),iy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,y.ReactiveFormsModule,Vn.TagInputModule]]}),n})(),oy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),ay=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Vn.TagInputModule,dn,y.FormsModule,go,Sn,Vn.TagInputModule]]}),n})(),tl=(()=>{class n extends Pc{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-boolean-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[1,"pb-4","checkbox-field"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","change"],[1,"checkmark"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"label",1),t.\u0275\u0275elementStart(2,"input",2),t.\u0275\u0275listener("change",function(){return r.toggle()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"span",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("checked",r.checked))},encapsulation:2}),n})(),sy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),ly=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,y.ReactiveFormsModule,dn]]}),n})(),cy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),uy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),nl=(()=>{class n extends Bs{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(){const e=this.selectedValues.map(r=>r.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onRemove(){const e=this.selectedValues.map(r=>r.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-multienum-edit"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(so,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"tag-input",0,1),t.\u0275\u0275listener("ngModelChange",function(a){return r.selectedValues=a})("onAdd",function(){return r.onAdd()})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),t.\u0275\u0275element(2,"tag-input-dropdown",2),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),t.\u0275\u0275advance(2),t.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},directives:[Vn.TagInputComponent,y.NgControlStatus,y.NgModel,Vn.TagInputDropdown],encapsulation:2}),n})(),rl=(()=>{class n extends Vs{constructor(e,r,o,a){super(e,r,o,a),this.userPreferences=e,this.systemConfig=r,this.typeFormatter=o,this.logic=a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Vt),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-int-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,HR,2,1,"ng-container",0),t.\u0275\u0275template(1,ZR,3,3,"ng-container",0),t.\u0275\u0275pipe(2,"async")),2&e&&(t.\u0275\u0275property("ngIf",!r.format),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.format&&t.\u0275\u0275pipeBind1(2,2,r.vm$)))},directives:[_.NgIf],pipes:[_.AsyncPipe,Uc],encapsulation:2}),n})(),dy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Vn.TagInputModule,y.FormsModule]]}),n})(),fy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Vc]]}),n})(),py=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),qc=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-text-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:6,consts:[[3,"rows","cols","ngClass","formControl"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"textarea",0),2&e&&(t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("rows",r.rows)("cols",r.cols)("ngClass",r.klass)("formControl",r.field.formControl))},directives:[y.DefaultValueAccessor,_.NgClass,y.NgControlStatus,y.FormControlDirective],encapsulation:2}),n})(),my=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,be.NgbDatepickerModule,Sn,y.ReactiveFormsModule]]}),n})(),hy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,y.ReactiveFormsModule]]}),n})(),Jc=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new y.FormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-dropdownenum-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"dropdownenum"],[1,"custom-select","custom-select-sm",3,"formControl"],[4,"ngIf"],[3,"class","ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"select",1),t.\u0275\u0275template(2,JR,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("formControl",r.field.formControl),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.options&&r.options.length))},directives:[y.SelectControlValueAccessor,y.NgControlStatus,y.FormControlDirective,_.NgIf,_.NgForOf,y.NgSelectOption,y.\u0275NgSelectMultipleOption],encapsulation:2}),n})(),gy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,y.ReactiveFormsModule]]}),n})(),il=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-dropdownenum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,r){1&e&&t.\u0275\u0275text(0),2&e&&t.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2}),n})(),vy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule]]}),n})(),ol=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-radioenum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,r){1&e&&t.\u0275\u0275text(0),2&e&&t.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2}),n})(),_y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule]]}),n})(),Qc=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}get displayDirection(){return this.field&&this.field.definition&&this.field.definition.displayDirection?this.field.definition.displayDirection:""}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new y.FormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-radioenum-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"radioenum"],[3,"form-check-inline","class",4,"ngFor","ngForOf"],["type","radio",1,"form-check-input",3,"checked","formControl","value","id"],[1,"form-check-label",3,"for"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,QR,4,11,"div",1),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.options))},directives:[_.NgForOf,y.RadioControlValueAccessor,y.DefaultValueAccessor,y.NgControlStatus,y.FormControlDirective],encapsulation:2}),n})(),yy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,y.ReactiveFormsModule]]}),n})(),by=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-html-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[1,"field-html","text-break",3,"innerHTML"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"div",0),2&e&&t.\u0275\u0275property("innerHTML",r.field.value,t.\u0275\u0275sanitizeHtml)},encapsulation:2}),n})(),My=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule]]}),n})(),al=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-password-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1,"*****"),t.\u0275\u0275elementEnd())},encapsulation:2}),n})(),Cy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),Xc=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-password-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","password",3,"formControl","ngClass","value"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"input",0),2&e&&(t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("formControl",r.field.formControl)("ngClass",r.klass)("value",r.field.value))},directives:[y.DefaultValueAccessor,y.NgControlStatus,y.FormControlDirective,_.NgClass],encapsulation:2}),n})(),Sy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule,y.ReactiveFormsModule,dn]]}),n})(),Yc=(()=>{class n extends Dn{constructor(e,r,o){super(e,r),this.typeFormatter=e,this.logic=r,this.config=o,this.settings={},this.initialValue=""}ngOnInit(){super.ngOnInit(),this.initSettings(),this.initialValue=this.field.value}initSettings(){var e,r,o,a,s,l;const f=this.config.getConfigValue("ui"),u=null!==(r=null===(e=null==f?void 0:f.tinymce)||void 0===e?void 0:e.detail)&&void 0!==r?r:{},d=null!==(l=null===(s=null===(a=null===(o=this.field)||void 0===o?void 0:o.metadata)||void 0===a?void 0:a.tinymce)||void 0===s?void 0:s.detail)&&void 0!==l?l:{};let p={};p=(0,ie.merge)(p,{toolbar:!1,menubar:!1,readonly:!0,deprecation_warnings:!1},u,d),this.settings=p}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-tinymce-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[1,"field-html","text-break",3,"initialValue","init","disabled"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"editor",0),2&e&&t.\u0275\u0275property("initialValue",r.initialValue)("init",r.settings)("disabled",!0)},directives:[mc],encapsulation:2,changeDetection:0}),n})(),xy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({providers:[{provide:pc,useValue:"tinymce/tinymce.min.js"}],imports:[[_.CommonModule,y.FormsModule,zv,y.ReactiveFormsModule]]}),n})(),eu=(()=>{class n extends Dn{constructor(e,r,o){super(e,r),this.typeFormatter=e,this.logic=r,this.config=o,this.settings={},this.modelEvents="change",this.ignoreEvents="onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.value=""}ngOnInit(){var e;super.ngOnInit(),this.initSettings(),this.subscribeValueChanges(),this.value=null!==(e=this.field.value)&&void 0!==e?e:""}ngOnDestroy(){this.unsubscribeAll()}initSettings(){var e,r,o,a,s,l,c,f;const d=this.config.getConfigValue("ui"),p=null!==(r=null===(e=null==d?void 0:d.tinymce)||void 0===e?void 0:e.edit)&&void 0!==r?r:{},h=null!==(l=null===(s=null===(a=null===(o=null==this?void 0:this.field)||void 0===o?void 0:o.metadata)||void 0===a?void 0:a.tinymce)||void 0===s?void 0:s.edit)&&void 0!==l?l:{};let m={};m=(0,ie.merge)(m,{height:300,menubar:!1,deprecation_warnings:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | help",toolbar_mode:"floating"},p,h),this.modelEvents=null!==(c=null==m?void 0:m.modelEvents)&&void 0!==c?c:"change",this.ignoreEvents=null!==(f=null==m?void 0:m.ignoreEvents)&&void 0!==f?f:"onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.settings=m}setModel(){this.field.formControl.setValue(this.value)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-tinymce-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[[1,"field-html",3,"init","modelEvents","ignoreEvents","formControl"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"editor",0),2&e&&t.\u0275\u0275property("init",r.settings)("modelEvents",r.modelEvents)("ignoreEvents",r.ignoreEvents)("formControl",r.field.formControl)},directives:[mc,y.NgControlStatus,y.FormControlDirective],encapsulation:2,changeDetection:0}),n})(),wy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({providers:[{provide:pc,useValue:"tinymce/tinymce.min.js"}],imports:[[_.CommonModule,y.FormsModule,zv,y.ReactiveFormsModule]]}),n})(),Ua=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-icon-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"image"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"scrm-image",0),2&e&&t.\u0275\u0275property("image",r.field.value)},directives:[An],encapsulation:2}),n})(),Ey=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En]]}),n})();const Dy=[py,ly,K_,Cy,Sy,fy,Ey,W_,ny,R_,ry,my,k_,P_,V_,uy,B_,$_,ty,hy,oy,ey,ay,L_,N_,z_,vy,gy,_y,yy,G_,dy,iy,cy,sy,H_,My,xy,wy],Iy=[Zo,Rc,kc,al,Xc,rl,Zs,js,Us,$c,zs,Gs,Oc,U_,qo,Ua,$s,Hs,Lc,qc,Js,Kc,Zc,ks,zi,Ba,il,Jc,ol,Qc,Ws,nl,Ps,Jo,tl,qs,by,Yc,eu],tu={"varchar.list":Zo,"varchar.detail":Zo,"varchar.edit":Rc,"varchar.filter":kc,"password.list":al,"password.detail":al,"password.edit":Xc,"char.list":Zo,"char.detail":Zo,"int.list":rl,"int.detail":rl,"float.list":Zs,"float.detail":Zs,"phone.list":js,"phone.detail":js,"date.list":Us,"date.detail":Us,"date.edit":$c,"date.filter":zs,"datetime.list":Gs,"datetime.detail":Gs,"datetime.edit":Oc,"datetime.filter":zs,"url.list":qo,"url.detail":qo,"icon.detail":Ua,"icon.edit":Ua,"icon.list":Ua,"link.list":qo,"link.detail":qo,"currency.list":$s,"currency.detail":$s,"email.list":Hs,"email.detail":Hs,"text.detail":Lc,"text.edit":qc,"relate.list":Js,"relate.edit":Kc,"relate.detail":Js,"relate.filter":Zc,"fullname.list":ks,"fullname.detail":ks,"enum-radio.list":ol,"enum-radio.detail":ol,"enum-radio.edit":Qc,"enum-dropdown.list":il,"enum-dropdown.detail":il,"enum-dropdown.edit":Jc,"enum-chips.list":zi,"enum-chips.detail":zi,"enum-chips.edit":Ba,"enum.list":zi,"enum.detail":zi,"enum.edit":Ba,"enum.filter":Ps,"multienum.list":Ws,"multienum.detail":Ws,"multienum.edit":nl,"multienum.filter":Ps,"dynamicenum.list":zi,"dynamicenum.detail":zi,"dynamicenum.edit":Ba,"dynamicenum.filter":nl,"boolean.list":Jo,"boolean.detail":Jo,"boolean.edit":tl,"boolean.filter":qs,"bool.list":Jo,"bool.detail":Jo,"bool.edit":tl,"bool.filter":qs,"html.detail":Yc,"html.edit":eu};class _i{constructor(){this.init()}register(i,e,r,o){this.map.addEntry(i,_i.getKey(e,r),o)}exclude(i,e){this.map.excludeEntry(i,e)}getDisplayType(i,e,r,o){const a=this.getDisplayTypeKey(e,r);return r&&this.has(i,a,o)?this.get(i,a,o):this.get(i,e,o)}get(i,e,r){const o=this.map.getGroupEntries(i);let a=_i.getKey(e,r);return o[a]||"massupdate"===r&&(a=_i.getKey(e,"edit"),o[a])?o[a]:o[_i.getKey("varchar",r)]}has(i,e,r){return!!this.map.getGroupEntries(i)[_i.getKey(e,r)]}static getKey(i,e){return i+"."+e}getDisplayTypeKey(i,e){return i&&e?i+"-"+e:""}init(){this.map=new D.OverridableMap,Object.keys(this.getDefaultMap()).forEach(i=>{const[e,r]=i.split(".",2);this.register("default",e,r,this.getDefaultMap()[i])})}getDefaultMap(){return{}}}let sl=(()=>{class n extends _i{constructor(){super()}getDefaultMap(){return tu}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Yo=(()=>{class n extends Dn{constructor(e,r,o){super(e,o),this.typeFormatter=e,this.registry=r,this.logic=o}getComponentType(e,r){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,r&&r.displayType||"",this.mode)}getFields(){const e=[];return this.field.definition.layout.forEach(r=>{!this.record.fields[r]||"none"===this.record.fields[r].display||e.push(this.record.fields[r])}),e}getModule(){return this.record?this.record.module:null}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasGroupFields()}showLabel(e){const r=this.field.definition||null;if(!r||!r.showLabel)return!1;const a=r.showLabel[this.mode]||null;return!(!a||void 0===a)&&(a.includes("*")||a.includes(e))}isModeEnabled(e,r){const o=r.definition.modes;return!o||o.length<1||o.includes(e)}hasGroupFields(){return!(!this.field.definition.groupFields||!Object.keys(this.field.definition.groupFields).length)}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(sl),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-group-field"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],[4,"ngFor","ngForOf"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill",4,"ngIf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],["class","field-group-label pt-2 pr-1",4,"ngIf"],["class","field-group-field pr-1",4,"ngIf"],[1,"field-group-label","pt-2","pr-1"],[3,"labelKey","module"],[1,"field-group-field","pr-1"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,XR,2,0,"ng-container",0),t.\u0275\u0275template(1,rO,3,4,"ng-container",0)),2&e&&(t.\u0275\u0275property("ngIf",!r.isConfigured()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isConfigured()))},directives:function(){return[_.NgIf,gn,_.NgForOf,Va]},encapsulation:2}),n})(),Va=(()=>{class n{constructor(e,r,o){this.navigation=e,this.moduleNameMapper=r,this.router=o,this.record=null,this.parent=null,this.klass=null,this.class="dynamic-field"}get getRelateLink(){if(this.field.definition.id_name&&this.field.definition.module){const e=this.moduleNameMapper.toFrontend(this.field.definition.module);return this.navigation.getRecordRouterLink(e,this.record.attributes[this.field.definition.id_name])}return""}ngOnInit(){this.setHostClass()}ngOnChanges(e){!e.mode||(this.isEdit()?this.initValidators():this.resetValidators())}initValidators(){var e,r,o,a,s,l,c,f,u,d;if(null===(r=null===(e=this.field)||void 0===e?void 0:e.formControl)||void 0===r||!r)return;this.resetValidators();const h=null!==(a=null===(o=this.field)||void 0===o?void 0:o.validators)&&void 0!==a?a:[],m=null!==(l=null===(s=this.field)||void 0===s?void 0:s.asyncValidators)&&void 0!==l?l:[];h.length&&(null===(f=null===(c=this.field)||void 0===c?void 0:c.formControl)||void 0===f||f.setValidators(h)),m.length&&(null===(d=null===(u=this.field)||void 0===u?void 0:u.formControl)||void 0===d||d.setAsyncValidators(m))}resetValidators(){var e,r,o,a;null===(r=null===(e=this.field)||void 0===e?void 0:e.formControl)||void 0===r||r.clearValidators(),null===(a=null===(o=this.field)||void 0===o?void 0:o.formControl)||void 0===a||a.clearAsyncValidators()}isLink(){return!!(("detail"===this.mode||"list"===this.mode)&&this.field&&this.record&&("relate"===this.type&&this.field.metadata&&!1!==this.field.metadata.link||this.field.metadata&&this.field.metadata.link))}hasOnClick(){return!!(this.field&&this.field.metadata&&this.field.metadata.onClick)}isEdit(){return"edit"===this.mode||"filter"===this.mode}getLink(){return"relate"===this.type?this.getRelateLink:this.navigation.getRecordRouterLink(this.record.module,this.record.id)}getMessageContext(e,r){const o=e&&e.message&&e.message.context||{};return o.module=r&&r.module||"",o}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}onClick(){if(!this.field.metadata.onClick)return this.router.navigateByUrl(this.getLink()).then(),!1;this.field.metadata.onClick(this.field,this.record)}setHostClass(){const e=[];e.push("dynamic-field"),this.mode&&e.push("dynamic-field-mode-"+this.mode),this.type&&e.push("dynamic-field-type-"+this.type),this.field&&this.field.name&&e.push("dynamic-field-name-"+this.field.name),this.class=e.join(" ")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(z.Router))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-dynamic-field"]],hostVars:2,hostBindings:function(e,r){2&e&&t.\u0275\u0275classMap(r.class)},inputs:{record:"record",parent:"parent",klass:"klass",mode:"mode",type:"type",field:"field",componentType:"componentType"},features:[t.\u0275\u0275NgOnChangesFeature],decls:4,vars:4,consts:[[4,"ngIf"],[1,"clickable","field-link",3,"click"],[3,"ndcDynamicComponent","ndcDynamicInputs"],[1,"field-link",3,"routerLink"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,iO,3,8,"ng-container",0),t.\u0275\u0275template(1,oO,3,9,"ng-container",0),t.\u0275\u0275template(2,aO,2,8,"ng-container",0),t.\u0275\u0275template(3,cO,2,1,"ng-container",0)),2&e&&(t.\u0275\u0275property("ngIf",r.hasOnClick()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isLink()&&!r.hasOnClick()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.isLink()&&!r.hasOnClick()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isEdit()&&r.field.formControl&&r.field.formControl.errors))},directives:[_.NgIf,Gt,Lt,z.RouterLinkWithHref,_.NgForOf,Ra],pipes:[_.KeyValuePipe],encapsulation:2}),n})(),$a=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,z.RouterModule,Oa,Jt]]}),n})(),Fy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,dn,$a]]}),n})();const Ay=n=>i=>n.validateFloatUserFormat(i.value)?{currencyValidator:{valid:!1,format:n.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_CURRENCY_FORMAT",context:{value:i.value,expected:n.toUserFormat("1000.50")}}}}:null;let nu=(()=>{class n{constructor(e){this.formatter=e}applies(e,r){return!(!r||!r.fieldDefinition)&&"currency"===r.type}getValidator(e){return e&&e.fieldDefinition?[Ay(this.formatter)]:[]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Pr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Pr))},token:n,providedIn:"root"}),n})();const Ny=n=>i=>n.validateUserFormat(i.value)?{invalidDate:{value:i.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATE_FORMAT",context:{value:i.value,expected:n.toUserFormat("2020-01-23")}}}}:null;let ru=(()=>{class n{constructor(e,r){this.formatter=e,this.utils=r}applies(e,r){return!(!r||!r.fieldDefinition)&&"date"===r.type}getValidator(e){return e&&e.fieldDefinition?[Ny(this.formatter)]:[]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(li),t.\u0275\u0275inject(yr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(li),t.\u0275\u0275inject(yr))},token:n,providedIn:"root"}),n})();const Ty=n=>i=>n.validateUserFormat(i.value)?{dateTimeValidator:{value:i.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATETIME_FORMAT",context:{value:i.value,expected:n.toUserFormat("2020-01-23 12:30:40")}}}}:null;let iu=(()=>{class n{constructor(e){this.formatter=e}applies(e,r){return!(!r||!r.fieldDefinition)&&"datetime"===r.type}getValidator(e){return e&&e.fieldDefinition?[Ty(this.formatter)]:[]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(si))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(si))},token:n,providedIn:"root"}),n})();const Ly=n=>i=>n.validateFloatUserFormat(i.value)?{floatValidator:{valid:!1,format:n.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_FLOAT_FORMAT",context:{value:i.value,expected:n.toUserFormat("1000.50")}}}}:null;let ou=(()=>{class n{constructor(e){this.formatter=e}applies(e,r){return!(!r||!r.fieldDefinition)&&"float"===r.type}getValidator(e){return e&&e.fieldDefinition?[Ly(this.formatter)]:[]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Pr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Pr))},token:n,providedIn:"root"}),n})();const Ry=n=>i=>n.validateIntUserFormat(i.value)?{intValidator:{valid:!1,format:n.getIntUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_INT_FORMAT",context:{value:i.value,expected:n.toUserFormat("1000")}}}}:null;let au=(()=>{class n{constructor(e){this.formatter=e}applies(e,r){return!(!r||!r.fieldDefinition)&&"int"===r.type}getValidator(e){return e&&e.fieldDefinition?[Ry(this.formatter)]:[]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Pr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Pr))},token:n,providedIn:"root"}),n})(),su=(()=>{class n{constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/}validateUserFormat(e){const r=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(r)&&!new RegExp(this.getUserFormatPattern()).test(r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yr))},token:n,providedIn:"root"}),n})();const Oy=n=>i=>n.validateUserFormat(i.value)?{emailValidator:{valid:!1,format:n.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_EMAIL_FORMAT",context:{value:i.value,expected:"example@example.org"}}}}:null;let lu=(()=>{class n{constructor(e){this.formatter=e}applies(e,r){return!(!r||!r.fieldDefinition)&&"email"===r.type}getValidator(e){return e&&e.fieldDefinition?[Oy(this.formatter)]:[]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(su))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(su))},token:n,providedIn:"root"}),n})();const jy=n=>i=>n.validateUserFormat(i.value)?{phoneValidator:{valid:!1,format:n.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_PHONE_FORMAT",context:{value:i.value}}}}:null;let cu=(()=>{class n{constructor(e){this.formatter=e}applies(e,r){return!(!r||!r.fieldDefinition)&&"phone"===r.type}getValidator(e){return e&&e.fieldDefinition?[jy(this.formatter)]:[]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(La))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(La))},token:n,providedIn:"root"}),n})();const By=n=>i=>{const e=y.Validators.min(n)(i);return null===e?null:{emailValidator:Object.assign(Object.assign({},e),{message:{labelKey:"LBL_VALIDATION_ERROR_MIN",context:{value:i.value,min:""+n}}})}},Py=n=>i=>{const e=y.Validators.max(n)(i);return null===e?null:{emailValidator:Object.assign(Object.assign({},e),{message:{labelKey:"LBL_VALIDATION_ERROR_MAX",context:{value:i.value,max:""+n}}})}};let uu=(()=>{class n{applies(e,r){return!(!r||!r.fieldDefinition)&&null!==this.getRangeValidation(r.fieldDefinition)}getValidator(e){if(!e||!e.fieldDefinition)return[];const r=this.getRangeValidation(e.fieldDefinition);if(!r)return[];const o=r.min&&parseInt(""+r.min,10),a=r.max&&parseInt(""+r.max,10),s=[];return isFinite(o)&&s.push(By(o)),isFinite(a)&&s.push(Py(a)),s}getRangeValidation(e){if(this.isRangeValidation(e.validation))return e.validation;if(!e.validations||!e.validations.length)return null;let r=null;return e.validations.some(o=>(r=o,this.isRangeValidation(o))),r}isRangeValidation(e){return e&&"range"===e.type}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})();const ky=(n,i)=>e=>{const r=n.name||"";if(!r||!i||!i.fields)return null;const o=i.fields[r]||{},a=o.items;if(!o||!a||!a.length)return null;let s=0;const l=a.filter(c=>!(c&&c.attributes&&c.attributes.deleted));return l&&l.length<1||(l.some(c=>{const f=c.fields&&c.fields["email-fields"]||{},u=f.attributes&&f.attributes.primary_address||null;return!!u&&((0,D.isTrue)(u.value)&&s++,s>1)}),1==s)?null:0==s?{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_NO_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}:{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_MULTIPLE_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}};let du=(()=>{class n{constructor(){}applies(e,r){return!(!r||!r.fieldDefinition)&&("line-items"===(r.type||r.fieldDefinition.type||"")&&"email_addresses"===(r.name||r.fieldDefinition.name||""))}getValidator(e,r){return e&&e.fieldDefinition&&r?[ky(e,r)]:[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Uy=(n,i)=>e=>{const r=n.name||"";if(!r||!i||!i.fields)return null;const o=i.fields[r]||{},a=o.items;if(!o||!a||!a.length)return null;const s={};let l=0;const c=a.filter(f=>!(f&&f.attributes&&f.attributes.deleted));return c&&c.length<1||(c.some(f=>{const u=f.fields&&f.fields["email-fields"]||{},d=u.attributes&&u.attributes.email_address||null;if(!d.value)return!1;const p=(""+d.value).toUpperCase();return s[p]?(l++,!0):(s[p]=!0,l>1)}),0==l)?null:{duplicateEmailValidation:{valid:!1,message:{labelKey:"LBL_DUPLICATE_EMAIL_VALIDATION_ERROR",context:{}}}}};let fu=(()=>{class n{constructor(){}applies(e,r){return!(!r||!r.fieldDefinition)&&("line-items"===(r.type||r.fieldDefinition.type||"")&&"email_addresses"===(r.name||r.fieldDefinition.name||""))}getValidator(e,r){return e&&e.fieldDefinition&&r?[Uy(e,r)]:[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Nr=(()=>{class n{constructor(e,r,o,a,s,l,c,f,u,d,p){this.requiredValidator=e,this.rangeValidator=r,this.currencyValidator=o,this.dateValidator=a,this.datetimeValidator=s,this.emailValidator=l,this.floatValidator=c,this.intValidator=f,this.phoneValidator=u,this.primaryEmailValidator=d,this.duplicateEmailValidator=p,this.filterFieldExclusion={default:{}},this.saveFieldExclusions={default:{}},this.saveValidators=new D.OverridableMap,this.asyncSaveValidators=new D.OverridableMap,this.filterValidators=new D.OverridableMap,this.saveValidators.addEntry("default",this.getKey("required","all"),e),this.saveValidators.addEntry("default",this.getKey("range","all"),r),this.saveValidators.addEntry("default",this.getKey("currency","all"),o),this.saveValidators.addEntry("default",this.getKey("date","all"),a),this.saveValidators.addEntry("default",this.getKey("datetime","all"),s),this.saveValidators.addEntry("default",this.getKey("email","all"),l),this.saveValidators.addEntry("default",this.getKey("float","all"),c),this.saveValidators.addEntry("default",this.getKey("int","all"),f),this.saveValidators.addEntry("default",this.getKey("phone","all"),u),this.saveValidators.addEntry("default",this.getKey("primary-email","all"),d),this.saveValidators.addEntry("default",this.getKey("duplicate-email","all"),p),this.filterValidators.addEntry("default",this.getKey("date","all"),a),this.filterValidators.addEntry("default",this.getKey("datetime","all"),s),this.filterValidators.addEntry("default",this.getKey("float","all"),c),this.filterValidators.addEntry("default",this.getKey("currency","all"),o),this.filterValidators.addEntry("default",this.getKey("int","all"),f),this.filterValidators.addEntry("default",this.getKey("phone","all"),u)}registerFieldSaveValidator(e,r,o,a){this.saveValidators.addEntry(e,this.getKey(r,o),a)}registerSaveValidator(e,r,o){this.saveValidators.addEntry(e,this.getKey(r,"all"),o)}registerFieldFilterValidator(e,r,o,a){this.filterValidators.addEntry(e,this.getKey(r,o),a)}registerFilterValidator(e,r,o){this.filterValidators.addEntry(e,this.getKey(r,"all"),o)}excludeFieldSaveValidator(e,r,o){const a=this.saveFieldExclusions[e]||{},s=this.getKey(r,o);a[s]=s,this.saveFieldExclusions[e]=a}excludeSaveValidator(e,r){this.saveValidators.excludeEntry(e,this.getKey(r,"all"))}excludeFieldFilterValidator(e,r,o){const a=this.filterFieldExclusion[e]||{},s=this.getKey(r,o);a[s]=s,this.filterFieldExclusion[e]=a}excludeFilterValidator(e,r){this.filterValidators.excludeEntry(e,this.getKey(r,"all"))}registerAsyncSaveValidator(e,r,o){this.asyncSaveValidators.addEntry(e,this.getKey(r,"all"),o)}excludeAsyncSaveValidator(e,r){this.saveValidators.excludeEntry(e,this.getKey(r,"all"))}getSaveValidations(e,r,o){const a=this.saveValidators.getGroupEntries(e),s=this.getExclusions(e,this.saveFieldExclusions);return this.filterValidations(a,s,o,r)}getFilterValidations(e,r,o){const a=this.filterValidators.getGroupEntries(e),s=this.getExclusions(e,this.filterFieldExclusion);return this.filterValidations(a,s,o,r)}getAsyncSaveValidations(e,r,o){const a=[],s=this.asyncSaveValidators.getGroupEntries(e);return Object.keys(s).forEach(l=>{const c=s[l];c.applies(o,r)&&a.push(c.getValidator(r,o))}),a}getKey(e,r){return`${e}.${r}`}parseType(e){return(e.split(".")||[])[0]||""}getExclusions(e,r){const a=r[e]||{};return Object.assign(Object.assign({},r.default||{}),a)}filterValidations(e,r,o,a){let s=[];return Object.keys(e).forEach(l=>{const c=this.getKey(this.parseType(l),a.name);if(r[l]||r[c])return;const f=e[l];f.applies(o,a)&&(s=s.concat(f.getValidator(a,o)))}),s}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(ja),t.\u0275\u0275inject(uu),t.\u0275\u0275inject(nu),t.\u0275\u0275inject(ru),t.\u0275\u0275inject(iu),t.\u0275\u0275inject(lu),t.\u0275\u0275inject(ou),t.\u0275\u0275inject(au),t.\u0275\u0275inject(cu),t.\u0275\u0275inject(du),t.\u0275\u0275inject(fu))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(ja),t.\u0275\u0275inject(uu),t.\u0275\u0275inject(nu),t.\u0275\u0275inject(ru),t.\u0275\u0275inject(iu),t.\u0275\u0275inject(lu),t.\u0275\u0275inject(ou),t.\u0275\u0275inject(au),t.\u0275\u0275inject(cu),t.\u0275\u0275inject(du),t.\u0275\u0275inject(fu))},token:n,providedIn:"root"}),n})(),ea=(()=>{class n{constructor(e,r){this.validationManager=e,this.typeFormatter=r}buildField(e,r,o=null){const a=r&&r.fieldDefinition||{},{value:s,valueList:l,valueObject:c}=this.parseValue(r,a,e),{validators:f,asyncValidators:u}=this.getSaveValidators(e,r);return this.setupField(e.module,r,s,l,c,e,a,f,u,o)}getFieldLabel(e,r,o){const a=o.getLanguageStrings();return o.getFieldLabel(e,r,a)}parseValue(e,r,o){const a=e&&e.type||"",l=r&&r.rname||"name",c=e.name||"";let f=null,u=null;if(c&&o.attributes[c]){if("relate"===a&&"non-db"===(r&&r.source||"")&&""!==l)return f=o.attributes[c][l],{value:f,valueList:u,valueObject:o.attributes[c]};f=o.attributes[c]}else f="";return"line-items"===a?{value:null,valueList:u}:(Array.isArray(f)&&(u=f,f=null),!f&&r.default?f=r.default:null===f&&(f=""),{value:f,valueList:u})}setupField(e,r,o,a,s,l,c,f,u,d){const p=this.typeFormatter.toUserFormat(r.type,o,{mode:"edit"}),h=r.metadata||c.metadata||{};r.link&&(h.link=r.link);const m=new D.BaseField;if(m.type=r.type||c.type,m.name=r.name||c.name||"",m.display=r.display||c.display||"default",m.defaultDisplay=m.display,m.value=o,m.metadata=h,m.definition=c,m.labelKey=r.label||c.vname||"",m.validators=f,m.asyncValidators=u,"line-items"===m.type?(m.valueObjectArray=l.attributes[m.name],m.itemFormArray=new y.FormArray([]),m.formControl=new y.FormControl(p)):m.formControl=new y.FormControl(p),m.attributes={},m.source="field",m.logic=r.logic||c.logic||null,m.logic&&Object.keys(m.logic).length){const g={},x={};Object.keys(m.logic).forEach(C=>{const A=m.logic[C]||{};!A.params||(A.params&&A.params.attributeDependencies&&A.params.attributeDependencies.forEach(S=>{g[S.field+"."+S.attribute]=S}),A.params&&A.params.fieldDependencies&&A.params.fieldDependencies.forEach(S=>{x[S]=S}))}),m.attributeDependencies=Object.keys(g).map(C=>g[C]),m.fieldDependencies=Object.keys(x)}return a&&(m.valueList=a),s&&(m.valueObject=s),d&&(m.label=this.getFieldLabel(r.label,e,d)),!m.labelKey&&r.label&&(m.labelKey=r.label),m}getSaveValidators(e,r){return{validators:this.validationManager.getSaveValidations(e.module,r,e),asyncValidators:this.validationManager.getAsyncSaveValidations(e.module,r,e)}}getParentValue(e,r,o,a){var s;const l=null!==(s=a.valueParent)&&void 0!==s?s:"field";return a.valuePath?(0,On.Z)("record"===l?e:r,a.valuePath,""):(0,On.Z)("record"===l?e.attributes:r.valueObject,o,"")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},token:n,providedIn:"root"}),n})(),pu=(()=>{class n extends ea{constructor(e,r){super(e,r),this.validationManager=e,this.typeFormatter=r}addGroupFields(e,r,o,a,s,l){const f=(r&&r.fieldDefinition||{}).groupFields||{};Object.keys(f).forEach(d=>{const p=f[d];if(a(e,d))return;const m=s(e,{name:p.name,label:p.vname,type:p.type,fieldDefinition:p},o);l(e,p.name,m)})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},token:n,providedIn:"root"}),n})(),ll=(()=>{class n extends ea{constructor(e,r){super(e,r),this.validationManager=e,this.typeFormatter=r}addAttributes(e,r,o,a,s,l){const c=Object.keys(r)||[];c.length<1||c.forEach(f=>{this.addFieldAttributes(e,r[f],a,s,l)})}addFieldAttributes(e,r,o,a,s){const c=(r&&r.definition||{}).attributeFields||{};Object.keys(c).forEach(u=>{const d=c[u];if(r.attributes[u])return;const h=a(e,r,{name:d.name,label:d.vname,type:d.type,fieldDefinition:d},o);s(e,r,d.name,h)})}buildAttribute(e,r,o,a=null){const s=o&&o.fieldDefinition||{},{value:l,valueList:c,valueObject:f}=this.parseAttributeValue(o,s,e,r),{validators:u,asyncValidators:d}=this.getSaveValidators(e,o),h=this.setupField(e.module,o,l,c,f,e,s,u,d,a);return h.valuePath=s.valuePath,h.valueParent=s.valueParent,h.source="attribute",h.parentKey=r.name,h}addAttributeToRecord(e,r,o,a){!e||!o||!r||!a||(r.attributes=r.attributes||{},r.attributes[o]=a,e.formGroup&&a.formControl&&e.formGroup.addControl(o,a.formControl))}parseAttributeValue(e,r,o,a){const c=r&&r.rname||"name",f=e.name||"";let u;return"relate"===(e&&e.type||"")&&"non-db"===(r&&r.source||"")&&""!==c?(u=this.getParentValue(o,a,f,r)[c],{value:u,valueList:null,valueObject:this.getParentValue(o,a,f,r)}):(u=f?this.getParentValue(o,a,f,r):"",u=this.getParentValue(o,a,f,r),Array.isArray(u)?{value:null,valueList:u,valueObject:null}:(0,Gv.Z)(u)?{value:null,valueList:null,valueObject:u}:{value:u,valueList:null,valueObject:null})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},token:n,providedIn:"root"}),n})(),cl=(()=>{class n extends ea{constructor(e,r){super(e,r),this.validationManager=e,this.typeFormatter=r}buildFilterField(e,r,o=null){const a=r&&r.fieldDefinition||{},{validators:s,asyncValidators:l}=this.getFilterValidators(e,r),c=this.setupField(e.searchModule,r,null,null,null,e,a,s,l,o);return c.criteria=this.initFieldFilter(e.criteria,r,c),c}getFilterValidators(e,r){return{validators:this.validationManager.getFilterValidations(e.searchModule,r,e),asyncValidators:[]}}initFieldFilter(e,r,o){let a;const s=r.name;let l=r.type;return"composite"===l&&(l=o.definition.type),a=e.filters[s]?(0,D.deepClone)(e.filters[s]):{field:s,fieldType:l,operator:"",values:[]},a}isCriteriaFieldInitialized(e,r){return!!e.criteriaFields[r]}addToSavedFilter(e,r,o){!e||!r||!o||(e.criteriaFields||(e.criteriaFields={}),e.criteriaFields[r]=o,e.criteria.filters||(e.criteria.filters={}),e.criteria.filters[r]=o.criteria,e.criteriaFormGroup&&o.formControl&&e.criteriaFormGroup.addControl(r,o.formControl))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},token:n,providedIn:"root"}),n})(),mu=(()=>{class n extends cl{constructor(e,r){super(e,r),this.validationManager=e,this.typeFormatter=r}buildFilterAttribute(e,r,o,a=null){const s=o&&o.fieldDefinition||{};s.valuePath||(s.valuePath="criteria."+(o.name||s.name));const{value:l,valueList:c,valueObject:f}=this.parseFilterAttributeValue(o,s,e,r),{validators:u,asyncValidators:d}=this.getFilterValidators(e,o),h=this.setupField(e.searchModule,o,l,c,f,e,s,u,d,a);return h.valuePath=s.valuePath,h.source="attribute",h.parentKey=r.definition.name,h}addAttributeToSavedFilter(e,r,o,a){!e||!o||!r||!a||(r.attributes=r.attributes||{},r.attributes[o]=a,e.criteriaFormGroup&&a.formControl&&e.criteriaFormGroup.addControl(o,a.formControl))}parseFilterAttributeValue(e,r,o,a){const s=e.name||"";let l;return l=s?this.getParentValue(o,a,s,r):"",Array.isArray(l)?{value:null,valueList:l,valueObject:null}:(0,Gv.Z)(l)?{value:null,valueList:null,valueObject:l}:{value:l,valueList:null,valueObject:null}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},token:n,providedIn:"root"}),n})(),hu=(()=>{class n extends ll{constructor(e,r){super(e,r),this.validationManager=e,this.typeFormatter=r}addLineItems(e,r,o,a,s){const l=Object.keys(r)||[];l.length<1||l.forEach(c=>{this.addFieldLineItems(e,r[c],a,s)})}addFieldLineItems(e,r,o,a){const s=r&&r.definition||{},c=r.valueObjectArray&&r.valueObjectArray||[];if("line-items"!==(r&&r.type||"")||!c.length)return;const f=s.lineItems&&s.lineItems.definition||{};r.items=[],c.forEach(u=>{this.addLineItem(f,u,a,o,e,r)})}addLineItem(e,r,o,a,s,l){const c={name:e.name,label:e.vname,type:e.type,fieldDefinition:(0,D.deepClone)(e)},f={id:r.id||"",type:r.type||"",module:r.module||"",attributes:r.attributes||{},fields:{},formGroup:new y.FormGroup({})};o(f,c,a),l.itemFormArray.push(f.formGroup),l.items.push(f)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Nr),t.\u0275\u0275inject(vt))},token:n,providedIn:"root"}),n})(),Yn=(()=>{class n{constructor(e,r,o,a,s,l,c){this.fieldBuilder=e,this.groupFieldBuilder=r,this.attributeBuilder=o,this.filterFieldBuilder=a,this.filterAttributeBuilder=s,this.lineItemBuilder=l,this.languageStore=c}buildShallowField(e,r){return{type:e,value:r,definition:{type:e}}}addField(e,r,o=null){const a=this.fieldBuilder.buildField(e,r,o);return this.addToRecord(e,r.name,a),this.groupFieldBuilder.addGroupFields(e,r,o,this.isFieldInitialized.bind(this),this.fieldBuilder.buildField.bind(this.fieldBuilder),this.addToRecord.bind(this)),this.attributeBuilder.addAttributes(e,e.fields,r,o,this.attributeBuilder.buildAttribute.bind(this.attributeBuilder),this.attributeBuilder.addAttributeToRecord.bind(this.attributeBuilder)),this.lineItemBuilder.addLineItems(e,e.fields,r,o,this.addField.bind(this)),a}addFilterField(e,r,o=null){const a=this.filterFieldBuilder.buildFilterField(e,r,o);return this.filterFieldBuilder.addToSavedFilter(e,r.name,a),this.groupFieldBuilder.addGroupFields(e,r,o,this.filterFieldBuilder.isCriteriaFieldInitialized.bind(this.filterFieldBuilder),this.filterFieldBuilder.buildFilterField.bind(this.filterFieldBuilder),this.filterFieldBuilder.addToSavedFilter.bind(this.filterFieldBuilder)),this.attributeBuilder.addAttributes(e,e.criteriaFields,r,o,this.filterAttributeBuilder.buildFilterAttribute.bind(this.filterAttributeBuilder),this.filterAttributeBuilder.addAttributeToSavedFilter.bind(this.filterAttributeBuilder)),a}addLineItem(e,r,o,a=null){a||(a={id:"",module:o.definition.module||"",attributes:{},fields:{},formGroup:new y.FormGroup({})}),this.lineItemBuilder.addLineItem(e,a,this.addField.bind(this),this.languageStore,r,o),o.itemFormArray.updateValueAndValidity()}removeLineItem(e,r){const o=e.items[r];!o||(o.id?o.attributes.deleted=1:e.items=r>-1?[...e.items.slice(0,r),...e.items.slice(r+1)]:e.items,e.itemFormArray.clear(),e.items.forEach(a=>{!a||a&&a.attributes&&a.attributes.deleted||e.itemFormArray.push(a.formGroup)}),e.itemFormArray.updateValueAndValidity())}addToRecord(e,r,o){!e||!r||!o||(e.fields||(e.fields={}),e.fields[r]=o,e.formGroup&&o.itemFormArray&&e.formGroup.addControl(r+"-items",o.itemFormArray),e.formGroup&&o.formControl&&e.formGroup.addControl(r,o.formControl))}isFieldInitialized(e,r){return!!e.fields[r]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(ea),t.\u0275\u0275inject(pu),t.\u0275\u0275inject(ll),t.\u0275\u0275inject(cl),t.\u0275\u0275inject(mu),t.\u0275\u0275inject(hu),t.\u0275\u0275inject(Ke))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(ea),t.\u0275\u0275inject(pu),t.\u0275\u0275inject(ll),t.\u0275\u0275inject(cl),t.\u0275\u0275inject(mu),t.\u0275\u0275inject(hu),t.\u0275\u0275inject(Ke))},token:n,providedIn:"root"}),n})(),er=(()=>{class n{constructor(e,r){this.fieldManager=e,this.language=r}buildEmptyRecord(e){return{id:"",module:e,attributes:{id:""},fields:{},formGroup:new y.FormGroup({})}}initFields(e,r){return e.fields||(e.fields={}),e.formGroup||(e.formGroup=new y.FormGroup({})),r.forEach(o=>{!o||!o.name||this.fieldManager.addField(e,o,this.language)}),e.fields}injectParamFields(e,r,o){Object.keys(e).forEach(a=>{var s;const l=o[a];if((0,D.isVoid)(l))this.handleLinkTypeRelationship(a,e,o,r);else{const c=l.type||"";let f=l.id_name||"";const u=l.name||"";let d=l.rname||"";if("relate"===c&&f===u)return void(r.attributes[a]=e[a]);if("parent"===c){const p={};let h="name",m="parent_id";const C=(null!==(s=o[a+"-group"])&&void 0!==s?s:{}).groupFields[a];return C&&C.rname&&(h=C.rname),h&&(p[h]=e[a]),m&&e[m]&&(p.id=e[m]),void(r.attributes[a]=p)}if("relate"===c){const p={};return d&&(p[d]=e[a]),f&&e[f]&&(p.id=e[f]),void(r.attributes[a]=p)}r.attributes[a]=e[a]}})}handleLinkTypeRelationship(e,r,o,a){if("return_relationship"===e){const s=r.return_relationship;if(!s)return;Object.keys(o).forEach(l=>{var c,f,u,d;const p=o[l];if("link"!==(p.type||""))return;const m=p.relationship||"";if(m&&m===s){const x=null!==(f=null!==(c=p.module)&&void 0!==c?c:r.return_module)&&void 0!==f?f:"";if(!x)return;const C=r.parent_name;if(!C)return;const A=null===(u=null==p?void 0:p.relationshipMetadata)||void 0===u?void 0:u.related_id,S=null!==(d=r[A])&&void 0!==d?d:"";if(!S)return;a.attributes[p.name]=[{id:S,module:x,attributes:{id:S,name:C}}]}})}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Ke))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Ke))},token:n,providedIn:"root"}),n})(),Vy=(()=>{class n extends Dn{constructor(e,r,o,a){super(e,a),this.typeFormatter=e,this.registry=r,this.recordManager=o,this.logic=a}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,r){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,r&&r.displayType||"",this.getMode())}getAttributes(){const e=[];return this.field.definition.layout.forEach(r=>{!this.field.attributes[r]||"none"===this.field.attributes[r].display||e.push(this.field.attributes[r])}),e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasAttributes()}showLabel(e){const r=e.definition||null,o=r.showLabel||null;return!(!r||!o||"hide"===(e.metadata&&e.metadata.labelDisplay||""))&&(o.includes("*")||o.includes(this.mode))}hasAttributes(){return!(!this.field.definition.attributeFields||(0,D.emptyObject)(this.field.definition.attributeFields))}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}initUpdateParentSubscription(){!this.field.attributes||Object.keys(this.field.attributes).forEach(e=>{const r=this.field.attributes[e];!r.valueChanges$||this.subs.push(r.valueChanges$.subscribe(o=>{this.setValueOnParent(r,o.valueObject||o.valueList||o.value)}))})}setValueOnParent(e,r){var o;const a=null!==(o=e.valueParent)&&void 0!==o?o:"field";e.valuePath?(0,Da.Z)("record"===a?this.record:this.field,e.valuePath,r):(0,Da.Z)("record"===a?this.record.attributes:this.field.valueObject,e.name,r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(sl),t.\u0275\u0275directiveInject(er),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),ta=(()=>{class n extends Vy{constructor(e,r,o,a){super(e,r,o,a),this.typeFormatter=e,this.registry=r,this.recordManager=o,this.logic=a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(sl),t.\u0275\u0275directiveInject(er),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-composite-field"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill","align-self-start",4,"ngFor","ngForOf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],[1,"field-group-label","pt-2","pr-1"],["class","field-group-field pr-1 pb-1 composite-field",4,"ngIf"],[3,"labelKey","module"],[1,"field-group-field","pr-1","pb-1","composite-field"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,uO,2,0,"ng-container",0),t.\u0275\u0275template(1,mO,3,4,"ng-container",0)),2&e&&(t.\u0275\u0275property("ngIf",!r.isConfigured()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isConfigured()))},directives:[_.NgIf,gn,_.NgForOf,Va],encapsulation:2}),n})(),$y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,dn,$a]]}),n})();const zy=[...Dy,Fy,$y],p4=[...Iy,Yo,ta],gu=Object.assign(Object.assign({},tu),{"grouped-field.list":Yo,"grouped-field.detail":Yo,"grouped-field.edit":Yo,"grouped-field.filter":Yo,"composite.list":ta,"composite.detail":ta,"composite.edit":ta,"composite.filter":ta});let ul=(()=>{class n extends _i{constructor(){super()}getDefaultMap(){return gu}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),yi=(()=>{class n{constructor(e){this.registry=e,this.record=null,this.klass=null,this.class="field",this.map=gu}ngOnInit(){this.setHostClass()}get componentMode(){let e=this.mode;return"create"===e&&(e="edit"),"edit"===e&&this.field.display&&"readonly"===this.field.display&&(e="detail"),e}get componentType(){return this.registry.getDisplayType(this.record&&this.record.module||"default",this.type,this.field.definition&&this.field.definition.displayType||"",this.componentMode)}setHostClass(){const e=[];e.push("field"),this.mode&&e.push("field-mode-"+this.mode),this.type&&e.push("field-type-"+this.type),this.field&&this.field.name&&e.push("field-name-"+this.field.name),this.class=e.join(" ")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ul))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-field"]],hostVars:2,hostBindings:function(e,r){2&e&&t.\u0275\u0275classMap(r.class)},inputs:{record:"record",klass:"klass",mode:"mode",type:"type",field:"field"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type",4,"ngIf"],[3,"field","klass","mode","record","parent",4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"field","klass","mode","record","parent"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,vO,3,2,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.field&&"none"!==r.field.display)},directives:function(){return[_.NgIf,Va,Wy]},encapsulation:2}),n})(),Gy=(()=>{class n extends Dn{constructor(e,r,o,a,s){super(e,a),this.typeFormatter=e,this.registry=r,this.recordManager=o,this.logic=a,this.fieldManager=s}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,r){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,r&&r.displayType||"",this.getMode())}getItems(){this.field.items=this.field.items||[];const e=this.field&&this.field.definition&&this.field.definition.lineItems||{},r=this.field.items||[];return(r&&r.filter(a=>!(a&&a.attributes&&a.attributes.deleted))).forEach((a,s)=>{let l=!0;e.labelOnFirstLine&&s>0&&(l=!1),this.setAttributeLabelDisplay(a,l)}),this.field.items}getItemFields(e){const r=e.fields||{};return Object.keys(r).map(o=>r[o])}removeItem(e){this.fieldManager.removeLineItem(this.field,e),this.updateItems(this.field.items),this.triggerLineActionEvents(D.LineActionEvent.onLineItemRemove)}addEmptyItem(){this.fieldManager.addLineItem(this.field.definition.lineItems&&this.field.definition.lineItems.definition||{},this.record,this.field),this.triggerLineActionEvents(D.LineActionEvent.onLineItemAdd)}updateItems(e){this.field.items=e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasItemConfig()}isEditable(){return(0,D.isEditable)(this.mode)}showLabel(e){const r=e.definition||null,o=r.showLabel||null;return!(!r||!o)&&(o.includes("*")||o.includes(this.mode))}getMessageContext(e,r){const o=e&&e.message&&e.message.context||{};return o.module=r&&r.module||"",o}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}hasItemConfig(){return!(!this.field.definition.lineItems||!this.field.definition.lineItems.definition)}initUpdateParentSubscription(){!this.field.attributes||Object.keys(this.field.attributes).forEach(e=>{const r=this.field.attributes[e];!r.valueChanges$||this.subs.push(r.valueChanges$.subscribe(o=>{this.setValueOnParent(r,o.valueObject||o.valueList||o.value)}))})}setValueOnParent(e,r){e.valuePath?(0,Da.Z)(this.field,e.valuePath,r):(0,Da.Z)(this.field.valueObject,e.name,r)}setAttributeLabelDisplay(e,r){const o=e.fields||{};Object.keys(o).forEach(a=>{const s=o[a];if("composite"!==s.type)return;const l=s.attributes||{};Object.keys(l).forEach(c=>{const f=l[c],u=f.metadata||{};u.labelDisplay=r?"default":"hide",f.metadata=u})})}triggerLineActionEvents(e){var r;const o=(null===(r=this.field)||void 0===r?void 0:r.logic)||{};(0,D.emptyObject)(o)||Object.keys(o).forEach(a=>{var s,l;const c=o[a]||null,f=null===(l=null===(s=null==c?void 0:c.params)||void 0===s?void 0:s.triggerOnEvents)||void 0===l?void 0:l[e];(0,D.isTrue)(f)&&this.logic.runLogic(this.field,this.mode,this.record)})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(ul),t.\u0275\u0275directiveInject(er),t.\u0275\u0275directiveInject(Nt),t.\u0275\u0275directiveInject(Yn))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),Wy=(()=>{class n extends Gy{constructor(e,r,o,a,s){super(e,r,o,a,s),this.typeFormatter=e,this.registry=r,this.recordManager=o,this.logic=a,this.fieldManager=s}getAddItemButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"plus",onClick:()=>{this.addEmptyItem()}}}getRemoveItemButton(e,r){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"minimise",onClick:()=>{this.removeItem(r)}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(ul),t.\u0275\u0275directiveInject(er),t.\u0275\u0275directiveInject(Nt),t.\u0275\u0275directiveInject(Yn))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-line-items-field"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_LINE_ITEMS_FIELD_CONFIG"],[4,"ngFor","ngForOf"],[1,"line-item-buttons","d-flex","justify-content-end","mt-1"],[3,"config",4,"ngIf"],["class","d-flex flex-row line-item-entry w-100 align-items-end",4,"ngIf"],[1,"d-flex","flex-row","line-item-entry","w-100","align-items-end"],[1,"flex-grow-1","line-item-entry-composite"],[3,"class",4,"ngFor","ngForOf"],[1,"line-item-entry-buttons","mb-1"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"config"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,_O,2,0,"ng-container",0),t.\u0275\u0275template(1,DO,7,10,"ng-container",0)),2&e&&(t.\u0275\u0275property("ngIf",!r.isConfigured()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isConfigured()))},directives:[_.NgIf,gn,_.NgForOf,Va,ir,Ra],pipes:[_.KeyValuePipe],encapsulation:2}),n})(),Ky=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,dn,$a,Sn,Oa]]}),n})(),cr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[...zy,_.CommonModule,$a,Ky]]}),n})(),vo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn,cr,dn]]}),n})(),Hy=(()=>{class n extends wc{constructor(e){super(e),this.breakpointObserver=e,this.baseColClass={col:!0,"form-group":!0,"m-1":!1,"m-0":!0,"pl-3":!0,"pb-2":!0,"pr-3":!0,"d-flex":!0,"flex-column":!0,"justify-content-between":!0},this.baseRowClass={"form-row":!0,"align-items-stretch":!0}}ngOnInit(){this.subscriptions.push(this.dataSource.getConfig().subscribe(e=>{this.config=Object.assign({},e)})),this.subscriptions.push(this.dataSource.getLayout().subscribe(e=>{this.layout=Object.assign({},e)})),this.subscriptions.push(this.dataSource.getFields().subscribe(e=>{this.fields=Object.assign({},e)})),this.subscriptions.push(this.dataSource.getRecord().subscribe(e=>{this.record=Object.assign({},e)})),super.ngOnInit()}buildGrid(){const e=[];this.fields&&0!==Object.keys(this.fields).length?(this.layout.rows.forEach(r=>{let o={cols:[]};r.cols.forEach((a,s)=>{const c=this.fields[a.name]||null;c?(o.cols.push({field:c}),1===this.colNumber&&s<r.cols.length-1&&(e.push(o),o={cols:[]})):o.cols.push({})}),o.cols.length<this.colNumber&&this.fillRow(o),e.push(o)}),this.addSpecialSlots(e),this.fieldGrid=e):this.fieldGrid=[]}get colNumber(){return 1===this.sizeMap[this.currentSize]?1:this.config.maxColumns}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-field-layout"]],inputs:{dataSource:"dataSource"},features:[t.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:PO,decls:2,vars:4,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"field-column-bordered","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["class","field-separation mt-2",4,"ngIf"],[1,"label-container"],[1,"d-flex","flex-grow-1"],[1,"flex-grow-1","text-break"],[3,"type","mode","klass","field","record"],["type","button","class","record-action-button",3,"click",4,"ngIf"],[1,"required"],["type","button",1,"record-action-button",3,"click"],["image","pencil",1,"sicon"],[1,"field-separation","mt-2"]],template:function(e,r){1&e&&(t.\u0275\u0275projectionDef(BO),t.\u0275\u0275elementStart(0,"form"),t.\u0275\u0275template(1,jO,2,2,"div",0),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275classMapInterpolate1("field-layout ",r.config.mode,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.fieldGrid))},directives:[_.NgForOf,_.NgClass,_.NgIf,yi,An],pipes:[_.UpperCasePipe],encapsulation:2}),n})(),vu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,cr,vo,En]]}),n})(),m4=(()=>{class n{constructor(e){this.modalService=e,this.filterModal=!0,this.modalTitle="Quick Filter",this.quickFilter=!0,this.advancedFilter=!1}toggleQuickFilter(){this.modalTitle="Quick Filter",this.advancedFilter=!this.advancedFilter,this.quickFilter=!this.quickFilter}toggleAdvancedFilter(){this.modalTitle="Advanced Filter",this.advancedFilter=!this.advancedFilter,this.quickFilter=!this.quickFilter}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"filter-modal"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){return e===be.ModalDismissReasons.ESC?"by pressing ESC":e===be.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(be.NgbModal))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-filter-ui"]],decls:5,vars:0,consts:[["filtermodal",""],["type","button",1,"settings-button",3,"click"],["image","filter",1,"sicon"],[1,"filter-modal"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close Filter Modal",1,"close",3,"click"],["image","close_modal",1,"sicon"],[1,"modal-body"],[3,"ngIf"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-lg-3"],[1,"col-lg-9"],[1,"modal-buttons"],["type","button","data-dismiss","modal",1,"btn","modal-button-cancel"],["type","button",1,"btn","modal-button-save"],[1,"row"],[1,"col-lg-12"],[1,"modal-label"],["type","text","placeholder","Lorem Ipsum",1,"modal-input"],[1,"filter-checkbox-container"],["type","filter-checkbox"],[1,"filter-checkmark"],[1,"quick-filter-options"],["type","text","placeholder","Lorem Ipsum",1,"modal-input","modal-input-large"],[1,"relate-input-group"],["type","button",1,"create-popup-button","create-popup-arrow"],["image","cursor",1,"sicon"],["type","button",1,"create-popup-button","create-popup-cross"],["image","cross",1,"sicon"],[1,"select"],["type","text","placeholder","0",1,"modal-input","modal-input-small"],[1,"col-lg-8"],[1,"col-lg-4"],["type","text","placeholder","dd/mm/yy",1,"modal-input","modal-date-input"],["type","button",1,"create-popup-button","create-popup-calendar"],["image","calendar",1,"sicon"],[1,"save-filter-button"],["type","button",1,"modal-button-save","dropdown-toggle"],["type","button",1,"btn","modal-button-save",3,"click"]],template:function(e,r){if(1&e){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275template(0,GO,21,6,"ng-template",null,0,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementStart(2,"button",1),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275reference(1);return r.open(s)}),t.\u0275\u0275element(3,"scrm-image",2),t.\u0275\u0275text(4," Filter\n"),t.\u0275\u0275elementEnd()}},directives:[An,_.NgIf],encapsulation:2}),n})(),h4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En]]}),n})();const Zy={tabs:[],groupedTabs:[],modules:{},userActionMenu:[],maxTabs:0};let dl=(0,D.deepClone)(Zy),na=null,tr=(()=>{class n{constructor(e){this.recordGQL=e,this.store=new w.BehaviorSubject(dl),this.state$=this.store.asObservable(),this.resourceName="navbar",this.fieldsMetadata={fields:["tabs","groupedTabs","modules","userActionMenu","maxTabs"]},this.tabs$=this.state$.pipe((0,v.map)(r=>r.tabs),(0,v.distinctUntilChanged)()),this.groupedTabs$=this.state$.pipe((0,v.map)(r=>r.groupedTabs),(0,v.distinctUntilChanged)()),this.modules$=this.state$.pipe((0,v.map)(r=>r.modules),(0,v.distinctUntilChanged)()),this.userActionMenu$=this.state$.pipe((0,v.map)(r=>r.userActionMenu),(0,v.distinctUntilChanged)()),this.maxTabs$=this.state$.pipe((0,v.map)(r=>r.maxTabs),(0,v.distinctUntilChanged)()),this.vm$=(0,w.combineLatest)([this.tabs$,this.groupedTabs$,this.modules$,this.userActionMenu$,this.maxTabs$]).pipe((0,v.map)(([r,o,a,s,l])=>({tabs:r,groupedTabs:o,modules:a,userActionMenu:s,maxTabs:l})))}clear(){na=null,this.updateState((0,D.deepClone)(Zy))}clearAuthBased(){this.clear()}load(){return this.getNavigation().pipe((0,v.tap)(e=>{this.updateState(Object.assign(Object.assign({},dl),{tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs}))}))}isCached(){return null!==na}set(e){na=(0,w.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},dl),{tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs}))}updateState(e){this.store.next(dl=e)}getNavigation(){return null===na&&(na=this.fetch("1").pipe((0,v.shareReplay)(1))),na}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/navbars/${e}`,this.fieldsMetadata).pipe((0,v.map)(({data:r})=>{let o=null;return r&&r.navbar&&(o={tabs:r.navbar.tabs,groupedTabs:r.navbar.groupedTabs,userActionMenu:r.navbar.userActionMenu,modules:r.navbar.modules,maxTabs:r.navbar.maxTabs}),o}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Zr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Zr))},token:n,providedIn:"root"}),n})();const qy={systemConfig:!1,userPreferences:!1,appStrings:!1,appListStrings:!1,modStrings:!1,themeImages:!1,navigation:!1,moduleMetadata:!1};let _o=(0,D.deepClone)(qy),fl=null,Qr=(()=>{class n{constructor(e,r,o,a,s,l,c,f){this.recordGQL=e,this.appState=r,this.metadata=o,this.language=a,this.themeImages=s,this.config=l,this.preferences=c,this.navigation=f,this.store=new w.BehaviorSubject(_o),this.state$=this.store.asObservable(),this.resourceName="appMetadata",this.fieldsMetadata={fields:["id","_id"]},this.types=["systemConfig","userPreferences","language","themeImages","navigation","moduleMetadata"],this.metadata$=this.state$}clear(){fl=null,this.updateState((0,D.deepClone)(qy))}clearAuthBased(){this.clear()}get(){return _o}load(e="login",r=[],o=!0){const a=this.getNotLoadedTypes();return o=o&&a.length<1,(!r||r.length<1)&&(r=a).push("minimalModuleMetadata"),this.getMetadata(e,r,o).pipe((0,v.tap)(s=>{this.updateState(s)}))}loadModuleMetadata(e="login",r=!0){var o;let a=null!==(o=null==_o?void 0:_o.moduleMetadata)&&void 0!==o&&o;return this.getMetadata(e,["moduleMetadata"],r=r&&a).pipe((0,v.tap)(s=>{this.updateState(s)}))}getMetadata(e="app",r=[],o=!0){return(!r||r.length<1)&&(r=[...this.types]),(null==fl||!0!==o)&&(fl=this.fetch(e,r).pipe((0,v.shareReplay)(1))),fl}getNotLoadedTypes(){const e=[];return this.isNavigationLoaded()||e.push("navigation"),this.arePreferencesLoaded()||e.push("userPreferences"),this.areSystemConfigsLoaded()||e.push("systemConfig"),this.areAllLanguageStringsLoaded()||e.push("language"),this.areThemeImagesLoaded()||e.push("themeImages"),e}areAllLanguageStringsLoaded(){return this.language.areAllCached()}arePreferencesLoaded(){return this.preferences.isCached()}areSystemConfigsLoaded(){return this.config.isCached()}areThemeImagesLoaded(){return this.themeImages.isCached()}isNavigationLoaded(){return this.navigation.isCached()}updateState(e){this.store.next(_o=e)}fetch(e,r=[]){const o={fields:[...this.fieldsMetadata.fields,...r]};return this.recordGQL.fetch(this.resourceName,`/api/app-metadata/${e}`,o).pipe((0,v.catchError)(()=>(0,w.of)({})),(0,v.map)(({data:a})=>{const s=null==a?void 0:a.appMetadata,l=Object.assign({},_o);return(0,D.emptyObject)(s)||(this.setConfig(l,s),this.setPreferences(l,s),this.setThemeImages(l,s),this.setNavigation(l,s),this.setLanguages(l,s),this.setModuleMetadata(l,s)),l}))}setModuleMetadata(e,r){var o,a;let s=null!==(o=null==r?void 0:r.moduleMetadata)&&void 0!==o?o:{},l="moduleMetadata";(0,D.emptyObject)(s)&&(s=null!==(a=null==r?void 0:r.minimalModuleMetadata)&&void 0!==a?a:{},l="minimalModuleMetadata"),(0,D.emptyObject)(s)||(e[l]=!0,Object.keys(s).forEach(c=>{var f;const u=null!==(f=s[c])&&void 0!==f?f:{};if(!(0,D.emptyObject)(u)){const d=this.metadata.mapMetadata(c,s[c]);this.metadata.getModule()!==c?this.metadata.setModuleMetadata(c,d):this.metadata.isCached(c)||this.metadata.set(c,d)}}))}setLanguages(e,r){var o,a,s,l,c,f,u,d;const p=null!==(o=null==r?void 0:r.language)&&void 0!==o?o:{};if(!(0,D.emptyObject)(p)){const h={};h.languageKey=null!==(a=p.id)&&void 0!==a?a:"",h.appStrings=null!==(l=null===(s=null==p?void 0:p.appStrings)||void 0===s?void 0:s.items)&&void 0!==l?l:{},h.appListStrings=null!==(f=null===(c=null==p?void 0:p.appListStrings)||void 0===c?void 0:c.items)&&void 0!==f?f:{},h.modStrings=null!==(d=null===(u=null==p?void 0:p.modStrings)||void 0===u?void 0:u.items)&&void 0!==d?d:{},e.appStrings=!(0,D.emptyObject)(h.appStrings),e.appListStrings=!(0,D.emptyObject)(h.appListStrings),e.modStrings=!(0,D.emptyObject)(h.modStrings),this.language.set(h.languageKey,h)}}setNavigation(e,r){var o;const a=null!==(o=null==r?void 0:r.navigation)&&void 0!==o?o:{};(0,D.emptyObject)(a)||(e.navigation=!0,this.navigation.set(a))}setThemeImages(e,r){var o,a;const s=null!==(o=null==r?void 0:r.themeImages)&&void 0!==o?o:{},l=null!==(a=null==s?void 0:s.items)&&void 0!==a?a:{};(0,D.emptyObject)(s)||(0,D.emptyObject)(l)||(e.themeImages=!0,this.themeImages.set(s.id,l))}setPreferences(e,r){var o;const a=null!==(o=null==r?void 0:r.userPreferences)&&void 0!==o?o:{};if(!(0,D.emptyObject)(a)){e.userPreferences=!0;const s=this.mapPreferences(a);this.preferences.set(s)}}setConfig(e,r){var o;const a=null!==(o=null==r?void 0:r.systemConfig)&&void 0!==o?o:{};(0,D.emptyObject)(a)||(e.systemConfig=!0,this.config.set(a))}mapPreferences(e){const r={};return Object.keys(e).forEach(o=>{!e[o].items||Object.keys(e[o].items).forEach(a=>{r[a]=e[o].items[a]})}),r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Zr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(tr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Zr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(tr))},token:n,providedIn:"root"}),n})(),za=(()=>{class n{constructor(e,r,o,a,s,l,c,f){this.appStore=e,this.languageStore=r,this.metadataStore=o,this.navigationStore=a,this.systemConfigStore=s,this.themeImagesStore=l,this.userPreferenceStore=c,this.appMetadataStore=f,this.stateStores={},this.stateStores.appStore=this.buildMapEntry(e,!1),this.stateStores.navigationStore=this.buildMapEntry(a,!0),this.stateStores.languageStore=this.buildMapEntry(r,!0),this.stateStores.metadataStore=this.buildMapEntry(o,!1),this.stateStores.systemConfigStore=this.buildMapEntry(s,!1),this.stateStores.themeImagesStore=this.buildMapEntry(l,!1),this.stateStores.userPreferenceStore=this.buildMapEntry(c,!0),this.stateStores.appMetadataStore=this.buildMapEntry(f,!0)}clear(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].store.clear()})}clearAuthBased(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].authBased&&this.stateStores[e].store.clearAuthBased()})}buildMapEntry(e,r){return{store:e,authBased:r}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(St),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(Qr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(St),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(Qr))},token:n,providedIn:"root"}),n})(),_u=(()=>{class n{constructor(){}calculateRoute(e){const r=window.location.pathname;return r.includes("index.php")&&(e=`${r}/${e}`),e}appendNativeAuth(e){return window.location.pathname.includes("auth")&&(e=`auth/${e}`),e}removeNativeAuth(){let e=window.location.pathname;return e.includes("/auth")&&(e=e.replace("/auth","/")),e=e.replace("//","/"),e}isNativeAuth(){return window.location.pathname.includes("auth")}getNativeOutLogoutUrl(){return"auth/logout"}isLoggedOutPath(){return window.location.pathname.includes("logged-out")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Rn=(()=>{class n{constructor(e,r,o,a,s,l,c,f,u,d){this.http=e,this.router=r,this.message=o,this.stateManager=a,this.languageStore=s,this.bnIdle=l,this.appStateStore=c,this.localStorage=f,this.configs=u,this.baseRoute=d,this.isUserLoggedIn=new w.BehaviorSubject(!1),this.defaultTimeout="3600",this.timerSet=!1,this.currentUserSubject=new w.BehaviorSubject({}),this.currentUser$=this.currentUserSubject.asObservable().pipe((0,v.distinctUntilChanged)())}isLoggedIn(){return this.isUserLoggedIn.value}getCurrentUser(){return this.currentUserSubject.value}setCurrentUser(e){this.currentUserSubject.next(e),this.isUserLoggedIn.next(!0)}doLogin(e,r,o,a){let s="login";s=this.baseRoute.appendNativeAuth(s),s=this.baseRoute.calculateRoute(s);const l=new ii.HttpHeaders({"Content-Type":"application/json"});return this.http.post(s,{username:e,password:r},{headers:l}).subscribe(c=>{this.baseRoute.isNativeAuth()&&(window.location.href=this.baseRoute.removeNativeAuth()),this.appStateStore.updateInitialAppLoading(!0),o(c),this.isUserLoggedIn.next(!0),this.setCurrentUser(c);const f=c.duration;0===f||"0"===f||(f&&(this.defaultTimeout=f),this.bnIdle.startWatching(this.defaultTimeout).subscribe(u=>{u&&!0===this.isUserLoggedIn.value&&(this.message.removeMessages(),this.logout("LBL_SESSION_EXPIRED"))}),this.timerSet=!0)},c=>{a(c)})}logout(e="LBL_LOGOUT_SUCCESS",r=!0){var o,a,s;this.appStateStore.updateLoading("logout",!0,!1);const l=null!==(o=this.configs.getConfigValue("logout"))&&void 0!==o?o:[];let c=null!==(a=null==l?void 0:l.path)&&void 0!==a?a:"logout";const f=(0,D.isTrue)(null!==(s=null==l?void 0:l.redirect)&&void 0!==s&&s);this.baseRoute.isNativeAuth()&&(c=this.baseRoute.getNativeOutLogoutUrl()),c=this.baseRoute.calculateRoute(c);const u=new ii.HttpParams,d=(new ii.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");this.appStateStore.getActiveRequests()<1?this.callLogout(c,u,d,r,e,f):this.appStateStore.activeRequests$.pipe((0,v.filter)(p=>p<1),(0,v.take)(1)).subscribe(()=>{this.callLogout(c,u,d,r,e,f)})}callLogout(e,r,o,a,s,l){this.resetState(),l?window.location.href=e:this.http.post(e,r.toString(),{headers:o,responseType:"text"}).pipe((0,v.take)(1),(0,v.catchError)(c=>(this.message.log("Logout failed"),(0,w.throwError)(c))),(0,v.finalize)(()=>{this.appStateStore.updateInitialAppLoading(!0),this.appStateStore.updateLoading("logout",!1,!1),this.stateManager.clearAuthBased(),this.configs.clear(),!0===a&&this.router.navigate(["/Login"]).finally()})).subscribe(()=>{this.timerSet&&(this.bnIdle.resetTimer(),this.bnIdle.stopTimer(),this.timerSet=!1),this.message.log("Logout success"),(0,D.isEmptyString)(s)||this.message.addSuccessMessageByKey(s)},()=>{this.message.log("Error on logout"),(0,D.isEmptyString)(s)||this.message.addSuccessMessageByKey(s)})}resetState(){this.stateManager.clearAuthBased(),this.localStorage.clear(),this.isUserLoggedIn.next(!1)}fetchSessionStatus(){let e="session-status";e=this.baseRoute.appendNativeAuth(e),e=this.baseRoute.calculateRoute(e);const r=(new ii.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");return this.http.get(e,{headers:r})}getSessionExpiredRoute(){var e,r;const o=null!==(e=this.configs.getConfigValue("session-expired"))&&void 0!==e?e:[];return null!==(r=null==o?void 0:o.path)&&void 0!==r?r:"Login"}handleInvalidSession(e){this.sessionExpiredRedirect()?this.handleSessionExpiredRedirect():this.logout(e)}handleSessionExpiredRedirect(){window.location.href=this.getSessionExpiredRoute()}sessionExpiredRedirect(){var e,r;const o=null!==(e=this.configs.getConfigValue("session-expired"))&&void 0!==e?e:[];return(0,D.isTrue)(null!==(r=null==o?void 0:o.redirect)&&void 0!==r&&r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(ii.HttpClient),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(it),t.\u0275\u0275inject(za),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Wv.BnNgIdleService),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Fr),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(_u))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(ii.HttpClient),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(it),t.\u0275\u0275inject(za),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Wv.BnNgIdleService),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Fr),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(_u))},token:n,providedIn:"root"}),n})(),g4=(()=>{class n{constructor(e,r){this.modalService=e,this.authService=r}openSugarCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}openSuiteCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){return e===be.ModalDismissReasons.ESC?"by pressing ESC":e===be.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}ngOnInit(){this.authSub=this.authService.isUserLoggedIn.subscribe(e=>{this.isUserLoggedIn=e})}ngOnDestroy(){this.authSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(be.NgbModal),t.\u0275\u0275directiveInject(Rn))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-footer-ui"]],decls:12,vars:1,consts:[[1,"footer"],[1,"copyright-links"],["data-toggle","modal","data-target",".copyright-suitecrm",1,"footer-link",3,"click"],["data-toggle","modal","data-target",".copyright-sugarcrm",1,"footer-link",3,"click"],[4,"ngIf"],[1,"copyright"],["sugarcopyright",""],["suitecopyright",""],[1,"back-to-top"],[1,"footer-link",3,"click"],["image","arrow_up_filled",1,"sicon","back-top-icon"],["role","dialog","aria-hidden","true",1,"copyright-sugarcrm"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["image","icon_modal_close",1,"sicon"],[1,"modal-body"],["role","dialog","aria-hidden","true",1,"copyright-suitecrm"]],template:function(e,r){if(1&e){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"a",2),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275reference(11);return r.openSuiteCopyright(s)}),t.\u0275\u0275text(3," \xa9 Supercharged by SuiteCRM "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"a",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const s=t.\u0275\u0275reference(9);return r.openSugarCopyright(s)}),t.\u0275\u0275text(5," \xa9 Powered By SugarCRM "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,WO,6,0,"ng-container",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",5),t.\u0275\u0275template(8,KO,13,0,"ng-template",null,6,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(10,HO,13,0,"ng-template",null,7,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()}2&e&&(t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",r.isUserLoggedIn))},directives:[_.NgIf,An],encapsulation:2}),n})(),Jy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En]]}),n})(),v4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-full-page-spinner"]],decls:20,vars:0,consts:[[1,"app-overlay"],["id","overlay-spinner"],[1,"app-loading"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275element(4,"div",4),t.\u0275\u0275element(5,"div",4),t.\u0275\u0275element(6,"div",5),t.\u0275\u0275element(7,"div",6),t.\u0275\u0275element(8,"div",7),t.\u0275\u0275element(9,"div",7),t.\u0275\u0275element(10,"div",8),t.\u0275\u0275element(11,"div",9),t.\u0275\u0275element(12,"div",10),t.\u0275\u0275element(13,"div",10),t.\u0275\u0275element(14,"div",11),t.\u0275\u0275element(15,"div",12),t.\u0275\u0275element(16,"div",10),t.\u0275\u0275element(17,"div",10),t.\u0275\u0275element(18,"div",11),t.\u0275\u0275element(19,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())},styles:[".app-overlay[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:#fff9;z-index:4000;cursor:default}.app-loading[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{height:200px;width:200px;-webkit-animation:scaleIn 4s linear infinite;animation:scaleIn 4s linear infinite;transform-origin:center center;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1,200;stroke-dashoffset:0;-webkit-animation:dash 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite;stroke-linecap:round;stroke:#ddd}.sk-cube-primary[_ngcontent-%COMP%]{background-color:#276ecd}.sk-cube-secondary[_ngcontent-%COMP%]{background-color:#4e5063}.sk-cube-grid[_ngcontent-%COMP%]{width:100px;height:100px}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;-webkit-animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out;animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{-webkit-animation-delay:.4s;animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{-webkit-animation-delay:0s;animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}@keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}"]}),n})(),_4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,O.AngularSvgIconModule]]}),n})(),mr=(()=>{class n{constructor(e){this.apollo=e}fetch(e,r){const o={query:q()`
            query getBatchedStatistics($module: String!, $queries: Iterable!){
              getBatchedStatistics(module: $module, queries: $queries) {
                  _id
                  id
                  items
              }
            }
        `,variables:{module:e,queries:r}};return this.apollo.query(o).pipe((0,v.map)(a=>{const s={},c=(a.data&&a.data.getBatchedStatistics||{}).items||{},f=Object.keys(c);return f&&f.length&&f.forEach(u=>{const d=c[u];s[u||d._id]={id:d._id,data:d.data,metadata:d.metadata}}),s}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})();const y4={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let pl=(()=>{class n{constructor(e){this.fetchGQL=e,this.cache$=null,this.internalState=(0,D.deepClone)(y4),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(r=>r.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(r=>r.loading),(0,v.distinctUntilChanged)())}clear(){this.store.unsubscribe(),this.cache$=null}clearAuthBased(){this.clear()}getQuery(){return(0,D.deepClone)(this.internalState.query)}get context(){return this.internalState.query.context}set context(e){const r=(0,D.deepClone)(this.internalState.query);r.context=e,this.updateState(Object.assign(Object.assign({},this.internalState),{query:r}))}init(e,r,o=!0){return this.internalState.module=e,this.updateState(Object.assign(Object.assign({},this.internalState),{module:e,query:r})),!1===o?null:this.load()}load(e=!0){return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.fetchStatistics(this.internalState.module,this.getQuery(),e).pipe((0,v.map)(r=>this.mapStatistics(r)),(0,v.tap)(r=>{this.addNewState(r)}))}setLoading(e){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:e}))}setStatistic(e,r,o=!1){if(this.addNewState(r),!o)return;const a={};a[e]=r,this.cache$=(0,w.of)(a).pipe((0,v.shareReplay)(1))}addNewState(e){this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,loading:!1}))}mapStatistics(e){const r=Object.keys(e),o=r&&r.length&&r[0];let a={id:"",data:{}};return o&&(a=e[o]),a}updateState(e){this.store.next(this.internalState=e)}fetchStatistics(e,r,o=!0){const a={};return a[r.key]=r,(null==this.cache$||!1===o)&&(this.cache$=this.fetchGQL.fetch(e,a).pipe((0,v.shareReplay)(1))),this.cache$}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();const b4={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let Qy=(()=>{class n extends pl{constructor(e,r){super(e),this.fetchGQL=e,this.fieldManager=r,this.cache$=null,this.internalState=(0,D.deepClone)(b4),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(o=>o.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(o=>o.loading),(0,v.distinctUntilChanged)())}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;const r=this.fieldManager.buildShallowField(e.metadata.dataType,e.data.value);r.metadata={digits:0},this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,field:r,loading:!1}))}updateState(e){super.updateState(e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr),t.\u0275\u0275inject(Yn))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),ra=(()=>{class n{constructor(e,r){this.fetchGQL=e,this.fieldManager=r}create(){return new Qy(this.fetchGQL,this.fieldManager)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr),t.\u0275\u0275inject(Yn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(mr),t.\u0275\u0275inject(Yn))},token:n,providedIn:"root"}),n})(),yu=(()=>{class n{constructor(e,r){this.language=e,this.factory=r,this.loading=!0,this.subs=[],this.statistics={}}ngOnInit(){!this.validateConfig()||(this.gridWidgetInput=this.config,this.buildStatistics(),this.setupLoading$(),this.setupVM(),this.setupReload())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}validateConfig(){return this.config&&this.config.layout?this.config.queryArgs.context&&this.config.queryArgs.module?this.config.widgetConfig?!(!this.config.layout||!this.config.layout.rows)||(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1):(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1)}getRowClass(){return this.gridWidgetInput.rowClass}getColClass(){return this.gridWidgetInput.columnClass}getContextModule(){return this.gridWidgetInput.queryArgs.context.module}getMessageContext(){const e=this.getContextModule();return e?{module:e}:{}}getMessageFields(e){if(!e||!Object.keys(e).length)return{};const r={};return Object.keys(e).forEach(o=>{r[o]=e[o].field}),r}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let r="font-weight-normal";return e&&(0,D.isTrue)(e)&&(r="font-weight-bolder"),r}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||"justify-content-center"}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||"align-items-center"}getLayoutRowClass(e){let r="";return e&&e.class&&(r=e.class),r}getClass(e){let r="";return e&&(r=e.class),r=r+" "+this.getSizeClass(e.size)+" "+this.getFontWeight(e.bold)+" "+this.getColor(e.color),r}isEmptyFieldValue(e){return"string"==typeof e&&(e=e.trim()),null==e||void 0===e||""===e||0===e.length}getLabel(e,r){let o="";return e&&e[r]&&(o=this.language.getFieldLabel(e[r])),o}getLayout(){return this.gridWidgetInput.layout.rows}buildStatistics(){this.gridWidgetInput.layout.rows.forEach(e=>{!e.cols||!e.cols.length||e.cols.forEach(r=>{if(r.statistic){if(r.store)return void(this.statistics[r.statistic]={type:r.statistic,store:r.store});this.statistics[r.statistic]={type:r.statistic,store:this.factory.create()},this.statistics[r.statistic].store.init(this.gridWidgetInput.queryArgs.module,{key:r.statistic,context:Object.assign({},this.gridWidgetInput.queryArgs.context),params:Object.assign({},this.gridWidgetInput.queryArgs.params)}).pipe((0,v.take)(1)).subscribe()}})})}setupLoading$(){const e=[];Object.keys(this.statistics).forEach(r=>e.push(this.statistics[r].store.loading$)),this.loading$=(0,w.combineLatest)(e).pipe((0,v.map)(r=>{if(!r||r.length<1)return this.loading=!1,!1;let o=!0;return r.forEach(a=>{o=o&&a}),this.loading=o,o})),this.subs.push(this.loading$.subscribe())}setupReload(){this.gridWidgetInput.widgetConfig.reload$&&this.subs.push(this.gridWidgetInput.widgetConfig.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,Object.keys(this.statistics).forEach(e=>{const r=this.statistics[e];!r.store||r.store.load(!1).pipe((0,v.take)(1)).subscribe()}))}))}setupVM(){let e=(0,w.of)([]).pipe((0,v.shareReplay)());const r=(0,w.of)(this.getLayout()).pipe((0,v.shareReplay)());if(this.statistics&&Object.keys(this.statistics).length>0){const o=[];Object.keys(this.statistics).forEach(a=>o.push(this.statistics[a].store.state$)),e=(0,w.combineLatest)(o)}this.vm$=(0,w.combineLatest)([e,r]).pipe((0,v.map)(([o,a])=>{const s={},l=[],c=[];return o.forEach(f=>{s[f.query.key]=f;const u=this.getLabel(f.statistic.metadata,"tooltip_title_key");u&&l.push(u);const d=this.getLabel(f.statistic.metadata,"descriptionKey");d&&c.push(d)}),{layout:a,statistics:s,tooltipTitleText:l.join(" | "),description:c.join(" | ")}}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(ra))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-grid-widget"]],inputs:{config:"config"},decls:3,vars:4,consts:[["class","p-3 widget-message",4,"ngIf"],["class","grid-widget d-flex flex-column","placement","auto","container","body",3,"ngbTooltip",4,"ngIf"],[1,"p-3","widget-message"],[3,"labelKey"],["placement","auto","container","body",1,"grid-widget","d-flex","flex-column",3,"ngbTooltip"],[4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"widget-entry-icon"],[3,"image","klass"],["class","widget-entry-value",4,"ngIf"],["class","widget-entry-loading",4,"ngIf"],[1,"widget-entry-value"],["mode","list",3,"type","field"],[1,"widget-entry-loading"],[1,"widget-entry-label","text-truncate"],[3,"labelKey","module"],[1,"text-truncate","widget-entry-label"],["class","widget-entry-dynamic-label",4,"ngIf"],[1,"widget-entry-dynamic-label"],[3,"context","fields","labelKey"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,ZO,2,1,"div",0),t.\u0275\u0275template(1,lj,2,2,"div",1),t.\u0275\u0275pipe(2,"async")),2&e&&(t.\u0275\u0275property("ngIf",r.messageLabelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.messageLabelKey&&t.\u0275\u0275pipeBind1(2,2,r.vm$)))},directives:[_.NgIf,gn,be.NgbTooltip,_.NgForOf,An,yi,Hc,Ra],pipes:[_.AsyncPipe],encapsulation:2}),n})(),Ga=(()=>{class n{constructor(e){this.languageStore=e,this.title="",this.mode="none",this.displayContent=!0}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-widget-panel"]],inputs:{title:"title",mode:"mode"},ngContentSelectors:dj,decls:5,vars:3,consts:[[1,"accordion","widget-panel","mr-0","shadow-sm"],["bodyPadding","0",3,"mode","title"],["panel-header-button",""],["panel-body",""],["class","widget collapse show open-close-container","data-parent",".widget-panel",4,"ngIf"],["data-parent",".widget-panel",1,"widget","collapse","show","open-close-container"]],template:function(e,r){1&e&&(t.\u0275\u0275projectionDef(uj),t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"scrm-panel",1),t.\u0275\u0275element(2,"span",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275template(4,cj,2,1,"div",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("mode",r.mode)("title",r.title),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.displayContent))},directives:function(){return[ia,_.NgIf]},encapsulation:2,data:{animation:[(0,Xt.trigger)("widgetFade",[(0,Xt.transition)("void => *",[(0,Xt.style)({transform:"translateX(100%)",opacity:0}),(0,Xt.animate)("500ms",(0,Xt.style)({transform:"translateX(0)",opacity:1}))]),(0,Xt.transition)("* => void",[(0,Xt.style)({transform:"translateX(0)",opacity:1}),(0,Xt.animate)("500ms",(0,Xt.style)({transform:"translateX(100%)",opacity:0}))])]),(0,Xt.trigger)("widgetContentFade",[(0,Xt.transition)("void => *",[(0,Xt.style)({transform:"translateY(-5%)",opacity:0}),(0,Xt.animate)("500ms",(0,Xt.style)({transform:"translateY(0)",opacity:1}))]),(0,Xt.transition)("* => void",[(0,Xt.style)({transform:"translateY(0)",opacity:1}),(0,Xt.animate)("500ms",(0,Xt.style)({transform:"translateY(-5%)",opacity:0}))])])]}}),n})(),ia=(()=>{class n{constructor(){this.klass="",this.bodyPadding=2,this.mode="closable",this.close={klass:["btn","btn-outline-light","btn-sm"]},this.isCollapsed=!1,this.buttonClasses=["btn","btn-outline-light","btn-sm"],this.subs=[]}ngOnInit(){this.isCollapsed$&&this.subs.push(this.isCollapsed$.subscribe(e=>{this.isCollapsed=e,this.initMinimiseButton()})),this.initMinimiseButton()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getCloseButton(){if(!this.close)return null;const e=D.Button.fromButton(this.close);return e.addClasses(this.buttonClasses),this.close=e,e}isClosable(){return"closable"===this.mode}isCollapsible(){return"collapsible"===this.mode}initMinimiseButton(){this.minimiseButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.isCollapsed=!this.isCollapsed,this.initMinimiseStatus()}},this.initMinimiseStatus()}initMinimiseStatus(){this.minimiseStatus=this.isCollapsed?"minimised":"maximised"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-panel"]],inputs:{klass:"klass",bodyPadding:"bodyPadding",mode:"mode",close:"close",title:"title",titleKey:"titleKey",isCollapsed$:"isCollapsed$"},ngContentSelectors:vj,decls:13,vars:13,consts:[[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"flex-grow-1","align-items-center","d-flex"],[1,"d-flex","align-items-center"],[3,"config",4,"ngIf"],[3,"config","status",4,"ngIf"],["class","pl-1 panel-title",4,"ngIf"],[1,"panel-buttons","float-right"],[3,"ngbCollapse"],[3,"config"],[3,"config","status"],[1,"pl-1","panel-title"],[3,"labelKey"]],template:function(e,r){1&e&&(t.\u0275\u0275projectionDef(gj),t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"div",0),t.\u0275\u0275elementStart(2,"div",1),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275template(4,fj,1,1,"scrm-close-button",3),t.\u0275\u0275template(5,pj,1,2,"scrm-minimise-button",4),t.\u0275\u0275projection(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,mj,2,1,"div",5),t.\u0275\u0275template(8,hj,2,1,"div",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",6),t.\u0275\u0275projection(10,1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",7),t.\u0275\u0275projection(12,2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275classMapInterpolate1("card panel-card ",r.klass,""),t.\u0275\u0275classProp("collapsed",r.isCollapsed),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",r.isClosable()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isCollapsible()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.title),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.titleKey),t.\u0275\u0275advance(3),t.\u0275\u0275classMapInterpolate1("card-body p-",r.bodyPadding,""),t.\u0275\u0275property("ngbCollapse",r.isCollapsed))},directives:function(){return[_.NgIf,be.NgbCollapse,xc,Xy,gn]},encapsulation:2}),n})(),Xy=(()=>{class n{constructor(){this.status="maximised",this.buttonClasses=["minimise-button"]}ngOnInit(){this.buildButton()}ngOnChanges(e){e.config&&this.buildButton()}buildButton(){const e=D.Button.fromButton(this.config);e.addClasses(this.buttonClasses),e.icon=this.getIcon(),e.onClick=()=>{this.config.onClick(),this.toggleStatus()},this.internalConfig=e}toggleStatus(){let e="minimised";"minimised"===this.status&&(e="maximised"),this.status=e,this.buildButton()}getIcon(){return"minimised"===this.status?"plus_thin":"minimise"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-minimise-button"]],inputs:{status:"status",config:"config"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"config"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,_j,2,1,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.internalConfig)},directives:[_.NgIf,ir],encapsulation:2}),n})(),Yy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn]]}),n})(),Gi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn,Ta,be.NgbModule,Yy,dn]]}),n})(),Wi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En,Gi]]}),n})(),bu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,cr,go,Wi,dn,En,Oa,be.NgbTooltipModule]]}),n})(),eb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-home-ui"]],decls:3,vars:0,consts:[[2,"margin","70px"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"h1"),t.\u0275\u0275text(2,"Home Page"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())},encapsulation:2}),n})();const tb=[{path:"",component:eb}];class nb{constructor(){this.url="",this.md5="",this.width=0,this.height=0}}var yo=(()=>{return(n=yo||(yo={})).none="",n.blank="_blank",n.parent="_parent",n.self="_self",n.top="_top",yo;var n})();class rb{constructor(i,e,r,o,a){this.routeConverter=i,this.moduleNavigation=e,this.preferences=r,this.language=o,this.appState=a,this.authenticated=!0,this.logo=new nb,this.useGroupTabs=!1,this.globalActions=[],this.currentUser={id:"",firstName:"",lastName:""},this.all={modules:[],extra:[]},this.menu=[]}resetMenu(){this.menu=[],this.globalActions=[],this.all.modules=[],this.all.extra=[],this.current=null,this.currentUser={}}buildUserActionMenu(i,e){this.currentUser.id=e.id,this.currentUser.firstName=e.firstName,this.currentUser.lastName=e.lastName,i&&i.forEach(r=>{var o;const a=r.name;let s=r.url;if("logout"===a)return;let l=yo.none;"training"===a?l=yo.blank:s=this.routeConverter.toFrontEndLink(s);const c=null!==(o=this.language.getAppString(r.labelKey))&&void 0!==o?o:"";this.globalActions.push({link:{url:s,label:c,target:l}})})}build(i,e,r){this.buildUserActionMenu(i.userActionMenu,e);const o=this.preferences.getUserPreference("navigation_paradigm"),a="on"===this.preferences.getUserPreference("sort_modules_by_name");"m"!==o?"gm"!==o||this.buildGroupedNavigation(i,r,a):this.buildModuleNavigation(i,r,a)}buildGroupTabMenu(i,e,r,o,a){const s=[],l=[];i&&i.length>0&&(i.forEach(f=>{l.push(this.buildTabMenuItem(f,e[f]))}),a&&this.sortMenuItems(l));let c=0;o.forEach(f=>{c<=r&&s.push(this.buildTabGroupedMenuItem(f.labelKey,f.modules,e,a)),c++}),this.menu=s,this.all.modules=l}buildModuleNavigation(i,e,r){!(0,D.ready)([i.tabs,i.modules])||(this.buildTabMenu(i.tabs,i.modules,e,r),this.buildSelectedModule(i))}buildGroupedNavigation(i,e,r){!(0,D.ready)([i.tabs,i.modules,i.groupedTabs])||(this.buildGroupTabMenu(i.tabs,i.modules,e,i.groupedTabs,r),this.buildSelectedModule(i))}buildSelectedModule(i){var e;const r=null!==(e=this.appState.getModule())&&void 0!==e?e:"";""===r||"home"===r||!i.modules[r]||(this.current=this.buildTabMenuItem(r,i.modules[r]))}buildTabMenu(i,e,r,o){const a=[],s=[];if(!i||0===i.length)return this.menu=a,void(this.all.modules=s);let l=0;i.forEach(c=>{const f=this.buildTabMenuItem(c,e[c]);"home"===c||this.appState.getModule()===c||l>=r?s.push(f):a.push(f),l++}),o&&(this.sortMenuItems(a),this.sortMenuItems(s)),this.menu=a,this.all.modules=s}buildTabGroupedMenuItem(i,e,r,o){return{link:{label:this.language.getAppString(i)||i,url:"",route:null,params:null},icon:"",submenu:this.buildGroupedMenu(e,r,o)}}buildGroupedMenu(i,e,r){const o=[];let a=null;return i.forEach(s=>{const l=e[s];if(!l)return;const c=this.buildTabMenuItem(s,l);"home"!==s?o.push(c):a=c}),r&&this.sortMenuItems(o),a&&o.unshift(a),o}buildTabMenuItem(i,e){var r,o;const a=this.moduleNavigation.getModuleRoute(e),s={link:{label:this.moduleNavigation.getModuleLabel(e,null!==(o=null===(r=this.language.getLanguageStrings())||void 0===r?void 0:r.appListStrings)&&void 0!==o?o:{}),url:a.url,route:a.route,params:null},icon:"home"===i?"home":"",submenu:[],module:null!=i?i:null};return e&&e.menu.forEach(l=>{const c=this.moduleNavigation.getActionRoute(l);s.submenu.push({link:{label:this.moduleNavigation.getActionLabel(i,l,this.language.getLanguageStrings()),url:c.url,route:c.route,params:c.params},icon:l.icon,submenu:[]})}),s}sortMenuItems(i){i.sort((e,r)=>{const o=e.link.label.toUpperCase(),a=r.link.label.toUpperCase();return o<a?-1:o>a?1:0})}}let Tr=(()=>{class n{constructor(e,r,o){this.moduleNameMapper=e,this.actionNameMapper=r,this.systemConfigStore=o}toFrontEndLink(e){return"#/"+this.toFrontEndRoute(e)}toFrontEndRoute(e){if(e&&e.includes("/#/")){const a=e.split("/#/");return a.length<2?"/":a[1]}const r=this.parse(e);if(!r)return"/";let o=this.buildRoute(r.module,r.action,r.record);return o+=this.buildQueryString(r.params,["module","action","record"]),o}toLegacy(e,r){let o="./legacy/index.php";const a=Object.assign({},r);return e.module&&(a.module=this.moduleNameMapper.toLegacy(e.module)),e.action&&(a.action=this.actionNameMapper.toLegacy(e.action)),e.record&&(a.record=e.record),o+=this.buildQueryString(a),o}parse(e){const r=new z.DefaultUrlSerializer,a=e.replace("/legacy","").split("?");if(a.length<2)return null;const s=r.parse("/?"+a[1]),l=s.queryParamMap;return{module:l.get("module")||"",action:l.get("action")||"",record:l.get("record")||"",params:s.queryParams}}parseRouteURL(e){var r,o,a,s,l,c;return{module:null!==(o=null===(r=e[0])||void 0===r?void 0:r.path)&&void 0!==o?o:"",action:null!==(s=null===(a=e[1])||void 0===a?void 0:a.path)&&void 0!==s?s:"index",record:null!==(c=null===(l=e[2])||void 0===l?void 0:l.path)&&void 0!==c?c:""}}parseRouteInfoFromUrlTree(e){return this.parseRouteURL(e.root.children[z.PRIMARY_OUTLET].segments)}isClassicViewRoute(e){const r=this.systemConfigStore.getConfigValue("module_routing"),o=this.parseRouteInfoFromUrlTree(e),a=o.module;return!r[a]||!r[a][o.action]}matchesActiveRoute(e,r){let a=!0;return[{name:"module",map:s=>s&&this.mapModuleToFrontend(s)},{name:"action",map:s=>s&&this.mapActionToFrontEnd(s)},{name:"record",map:s=>s}].forEach(s=>{!e.snapshot.params[s.name]&&!r[s.name]||(a=a&&e.snapshot.params[s.name]===s.map(r[s.name]))}),a}buildRoute(e,r,o){let s=`${this.mapModuleToFrontend(e)}`;return r&&(s+=`/${this.mapActionToFrontEnd(r)}`),o&&(s+=`/${o}`),s}buildQueryString(e,r=[]){let o=new ii.HttpParams;return Object.keys(e).forEach(a=>{r.includes(a)||(o=o.set(a,e[a]))}),o.keys().length>0?"?"+o.toString():""}mapModuleToFrontend(e){return this.moduleNameMapper.toFrontend(e)}mapActionToFrontEnd(e){return this.actionNameMapper.toFrontend(e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(on),t.\u0275\u0275inject(Jr),t.\u0275\u0275inject(yt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(on),t.\u0275\u0275inject(Jr),t.\u0275\u0275inject(yt))},token:n,providedIn:"root"}),n})(),ib=(()=>{class n{constructor(e,r,o,a,s,l,c,f){this.navigationStore=e,this.languageStore=r,this.userPreferenceStore=o,this.systemConfigStore=a,this.appState=s,this.authService=l,this.moduleNavigation=c,this.screenSize=f,this.loaded=!0,this.mainNavCollapse=!0,this.subNavCollapse=!0,this.mobileNavbar=!1,this.mobileSubNav=!1,this.backLink=!1,this.mainNavLink=!0,this.submenu=[],this.moduleNameMapper=new on(this.systemConfigStore),this.actionNameMapper=new Jr(this.systemConfigStore),this.routeConverter=new Tr(this.moduleNameMapper,this.actionNameMapper,this.systemConfigStore),this.maxTabs=8,this.screen=Xn.Medium,this.languages$=this.languageStore.vm$,this.userPreferences$=this.userPreferenceStore.userPreferences$,this.currentUser$=this.authService.currentUser$,this.appState$=this.appState.vm$,this.navigation$=this.navigationStore.vm$,this.vm$=(0,w.combineLatest)([this.navigation$,this.userPreferences$,this.currentUser$,this.appState$,this.screenSize.screenSize$,this.languages$]).pipe((0,v.map)(([u,d,p,h,m,g])=>(m&&(this.screen=m),this.calculateMaxTabs(u),this.navbar.resetMenu(),(0,D.ready)([g.appStrings,g.modStrings,g.appListStrings,d,p])&&this.navbar.build(u,p,this.maxTabs),{navigation:u,userPreferences:d,appState:h})))}onResize(e){this.mobileNavbar=e.target.innerWidth<=768}ngOnInit(){const e=new rb(this.routeConverter,this.moduleNavigation,this.userPreferenceStore,this.languageStore,this.appState);this.setNavbar(e),this.authService.isUserLoggedIn.subscribe(r=>{this.isUserLoggedIn=r}),window.dispatchEvent(new Event("resize"))}ngOnDestroy(){this.authService.isUserLoggedIn.unsubscribe()}changeSubNav(e,r){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.submenu=r}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getHomePage(){return this.systemConfigStore.getHomePage()}getCloseCallBack(e){return()=>e.close()}setNavbar(e){this.navbar=e,this.loaded=!0}isLoaded(){return this.loaded}calculateMaxTabs(e){const r=this.systemConfigStore.getConfigValue("navigation_tab_limits");if(this.screen&&r){let o=r[this.screen];(!o||e.maxTabs&&e.maxTabs<o)&&(o=e.maxTabs),this.maxTabs=o}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(tr),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(Vt),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(At),t.\u0275\u0275directiveInject(Rn),t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(lo))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-navbar"]],hostBindings:function(e,r){1&e&&t.\u0275\u0275listener("resize",function(a){return r.onResize(a)},!1,t.\u0275\u0275resolveWindow)},decls:2,vars:3,consts:[["class","top-panel fixed-top",4,"ngIf"],[1,"top-panel","fixed-top"],[3,"ngIf"],[4,"ngIf"],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","collapse","order-4","order-md-0","collapsenav"],[1,"navbar-nav"],[1,"top-nav","nav-item"],[1,"navbar","ml-0","pl-0"],[1,"navbar-collapse"],[1,"pl-0"],[1,"navbar","mobile-nav-block","mobilenavbar"],["ngbDropdown","",1,"position-static",3,"autoClose"],["myDrop","ngbDropdown"],["aria-controls","navbar","aria-expanded","false","aria-label","Toggle navigation","ngbDropdownToggle","","type","button",1,"navbar-toggler"],["image","hamburger",1,"responsive-menu-toggler"],["ngbDropdownMenu","",1,"mobile-nav-dropdown","w-100"],["ngbDropdown","",1,"global-links"],[1,"global-link-item",3,"click"],["ngbDropdownToggle","",1,"nav-link","primary-global-link","dropdown-toggle"],["mobileGlobalLinkTitle",""],["image","user",1,"global-action-icon","sicon-2x"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown"],[3,"all","current","items","navigationType","onClose"],["class","dropdown-item global-links-sublink","ngbDropdownItem","",3,"href","target",4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"dropdown-item","global-links-sublink",3,"href","target"],[1,"navbar","navbar-expand-md","navbar-1"],[1,"navbar-collapse","collapse","collapsenav",3,"ngbCollapse"],[3,"active","route"],[1,"global-link-item"],["globalLinkTitle",""],[1,"global-user-name"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","dropdown-menu-right"],[1,"navbar-nav","grouped"],["class","top-nav nav-item dropdown non-grouped active",4,"ngIf"],["class","top-nav nav-item dropdown main-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_TABGROUP_ALL",3,"items"],[1,"top-nav","nav-item","dropdown","non-grouped","active"],[3,"item"],[1,"top-nav","nav-item","dropdown","main-grouped"],[3,"item","subNavCollapse"],["class","top-nav nav-item dropdown non-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_MORE",3,"items"],[1,"top-nav","nav-item","dropdown","non-grouped"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,Oj,3,2,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:function(){return[_.NgIf,be.NgbNavbar,ml,be.NgbDropdown,be.NgbDropdownToggle,An,be.NgbDropdownMenu,ab,c_,Eb,_.NgForOf,be.NgbDropdownItem,be.NgbCollapse,bb,hb,Sb,fb]},pipes:function(){return[_.AsyncPipe]},encapsulation:2,data:{animation:[(0,Xt.trigger)("mobileNavFade",[(0,Xt.transition)(":enter",(0,Xt.useAnimation)(As.fadeIn,{params:{timing:.5,delay:0}}))])]}}),n.instances=[],n})(),ob=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",ib)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),M4=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ob))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-navbar-ui"]],decls:1,vars:1,consts:[[3,"ndcDynamicComponent"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ndcDynamicComponent",r.getType)},directives:[Gt],encapsulation:2}),n})(),ml=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-logo-ui"]],decls:1,vars:0,consts:[["image","company_logo",1,"logo"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"scrm-image",0)},directives:[An],encapsulation:2}),n})(),hl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En]]}),n})(),ab=(()=>{class n{constructor(e,r){this.auth=e,this.languageStore=r,this.logout={logoutAction:{label:"LBL_LOGOUT"}},this.languages$=this.languageStore.vm$,this.vm$=(0,w.combineLatest)([this.languages$]).pipe((0,v.map)(([o])=>({appStrings:o.appStrings||{},appListStrings:o.appListStrings||{}})))}doLogout(){this.auth.logout()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Rn),t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-logout-ui"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dropdown-item","global-links-sublink",3,"click"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,jj,3,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf],pipes:[_.AsyncPipe],encapsulation:2}),n})(),sb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),lb=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:2,vars:2,consts:[[3,"ngClass","queryParams","routerLink",4,"ngIf"],[3,"href","ngClass",4,"ngIf"],[3,"ngClass","queryParams","routerLink"],[3,"image",4,"ngIf"],[3,"image"],[3,"href","ngClass"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,Pj,3,5,"a",0),t.\u0275\u0275template(1,Uj,3,4,"a",1)),2&e&&(t.\u0275\u0275property("ngIf",r.link.route),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.link.route))},directives:[_.NgIf,z.RouterLinkWithHref,_.NgClass,An],encapsulation:2}),n})(),cb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",lb)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Ki=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(cb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,$j,1,6,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),ub=(()=>{class n{constructor(){this.showDropdown=!0}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:5,vars:2,consts:[["data-target",".navbar-collapse","data-toggle","collapse"],["data-toggle","dropdown",1,"top-nav-link","nav-link-grouped","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu main",3,"ngbCollapse","click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","main",3,"ngbCollapse","click"],["class","nav-item dropdown-submenu submenu",4,"ngFor","ngForOf"],[1,"nav-item","dropdown-submenu","submenu"],[3,"link"],["class","dropdown-menu submenu",3,"rounded-0",4,"ngIf"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(e,r){1&e&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",0),t.\u0275\u0275elementStart(2,"a",1),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,Zj,2,2,"ul",2),t.\u0275\u0275elementContainerEnd()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",r.item.link.label," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.showDropdown))},directives:function(){return[_.NgIf,be.NgbCollapse,_.NgForOf,Ki,Cu,xu]},encapsulation:2}),n})(),db=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",ub)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),fb=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(db))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,Jj,1,5,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),pb=(()=>{class n{constructor(){this.showDropdown=!0}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[["class","navbar-nav nav-collapsed-items",4,"ngIf"],[1,"navbar-nav","nav-collapsed-items"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"nav-link-nongrouped","dropdown-toggle"],[3,"labelKey"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu more-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","more-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,Yj,5,2,"ul",0),2&e&&t.\u0275\u0275property("ngIf",r.items&&r.items.length>0)},directives:[_.NgIf,gn,_.NgForOf,Ki],encapsulation:2}),n})(),mb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",pb)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),hb=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(mb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,tB,1,5,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),gb=(()=>{class n{constructor(e,r,o,a){this.navigation=e,this.nameMapper=r,this.configs=o,this.metadata=a,this.collapsible=!1,this.maxDisplayed=5,this.collapsed=!1,this.subs=[]}ngOnInit(){var e,r;const o=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(r=parseInt(o.navigation_max_module_recently_viewed))&&void 0!==r?r:5,this.initMetadata$(),this.collapsed=!!this.collapsible}ngOnDestroy(){this.clear()}ngOnChanges(e){var r,o,a,s,l;null!==(null!==(r=null==e?void 0:e.module)&&void 0!==r?r:null)&&(null!==(a=null===(o=null==e?void 0:e.module)||void 0===o?void 0:o.previousValue)&&void 0!==a?a:"")!==(null!==(l=null===(s=null==e?void 0:e.module)||void 0===s?void 0:s.currentValue)&&void 0!==l?l:"")&&(this.clear(),this.initMetadata$())}buildRoute(e){var r,o,a;const s=null!==(r=e.attributes.module_name)&&void 0!==r?r:"",l=null!==(o=this.nameMapper.toFrontend(s))&&void 0!==o?o:"",c=null!==(a=e.attributes.item_id)&&void 0!==a?a:"";return this.navigation.getRecordRouterLink(l,c)}toggleCollapse(){!this.collapsible||(this.collapsed=!this.collapsed)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(r=>{var o;return null!==(o=r[this.module])&&void 0!==o?o:null}));this.subs.push(e.subscribe(r=>{var o;this.records=null!==(o=null==r?void 0:r.recentlyViewed)&&void 0!==o?o:null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(St))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-menu-recently-viewed"]],inputs:{collapsible:"collapsible",module:"module",onClick:"onClick"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"recently-viewed-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_LAST_VIEWED"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,iB,4,1,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.records&&r.records.length)},directives:[_.NgIf,gn,_.NgForOf,z.RouterLinkWithHref],pipes:[_.SlicePipe],encapsulation:2}),n})(),vb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",gb)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Mu=(()=>{class n{constructor(e){this.registry=e,this.collapsible=!1}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-menu-recently-viewed"]],inputs:{collapsible:"collapsible",module:"module",onClick:"onClick"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,oB,1,6,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),_b=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-home-menu-item"]],inputs:{route:"route",active:"active"},decls:4,vars:3,consts:[[1,"navbar-nav","home-nav"],[1,"nav-item"],[1,"home-nav-link",3,"routerLink"],["image","home",1,"home-icon"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"ul",0),t.\u0275\u0275elementStart(1,"li",1),t.\u0275\u0275elementStart(2,"a",2),t.\u0275\u0275element(3,"scrm-image",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275classProp("active",r.active),t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",r.route))},directives:[z.RouterLinkWithHref,An],encapsulation:2}),n})(),yb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",_b)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),bb=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(yb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-home-menu-item"]],inputs:{route:"route",active:"active"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,sB,1,5,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),Mb=(()=>{class n{constructor(){this.showDropdown=!0}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-menu-item"]],inputs:{item:"item"},decls:4,vars:6,consts:[["data-target",".navbar-collapse","data-toggle","collapse"],[3,"link"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(e,r){1&e&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",0),t.\u0275\u0275element(2,"scrm-menu-item-link",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,uB,3,2,"div",2),t.\u0275\u0275elementContainerEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275classMap(t.\u0275\u0275pureFunction1(4,dB,r.item.submenu.length)),t.\u0275\u0275property("link",r.item.link),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.item.submenu.length&&r.showDropdown))},directives:function(){return[Ki,_.NgIf,_.NgForOf,Cu,xu]},encapsulation:2}),n})(),Cb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Mb)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Sb=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Cb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-menu-item"]],inputs:{item:"item"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,pB,1,4,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),xb=(()=>{class n{constructor(){this.navigationType="",this.submenu=[],this.subNavigationType="mm",this.backLink=!1,this.mobileSubNav=!1,this.mainNavLink=!0}ngOnInit(){this.mainItems=this.items,"gm"!==this.navigationType&&this.current&&(this.mainItems=[this.current,...this.items])}changeSubNav(e,r,o,a){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.subNavItem=a,this.submenu=r,this.subNavigationType=o}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getItems(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-mobile-menu"]],inputs:{navigationType:"navigationType",current:"current",items:"items",all:"all",onClose:"onClose"},decls:7,vars:2,consts:[[4,"ngIf"],[1,"mobile-nav-close","clicable","pl-3","pr-3","pt-2","pb-2","w-100",3,"click"],["image","cross_bold",1,"sicon","mobile-nav-close"],[1,"nav-close-text"],["labelKey","LBL_CLOSE_MENU"],[1,"d-flex","align-items-center","mobile-back-row",3,"click"],["image","arrow_left_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[1,"mobile-back-link","pl-1","pr-3","pt-2","pb-2"],["labelKey","LBL_BACK"],[1,"mobile-menu-items"],["class"," d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",3,"click"],[1,"flex-grow-1","mobile-nav-link","pl-3","pr-3","pt-2","pb-2"],["labelKey","LBL_MORE"],["image","arrow_right_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[3,"items","onClose"],[1,""],[3,"collapsible","module","onClick"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,mB,5,0,"ng-container",0),t.\u0275\u0275template(1,MB,3,2,"ng-container",0),t.\u0275\u0275elementStart(2,"li"),t.\u0275\u0275elementStart(3,"a",1),t.\u0275\u0275listener("click",function(){return r.onClose&&r.onClose()}),t.\u0275\u0275element(4,"scrm-image",2),t.\u0275\u0275elementStart(5,"span",3),t.\u0275\u0275element(6,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("ngIf",r.backLink),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.mainItems&&r.mainItems.length))},directives:function(){return[_.NgIf,An,gn,_.NgForOf,Tb,Mu,wu,Fb]},encapsulation:2}),n})(),wb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",xb)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Eb=(()=>{class n{constructor(e){this.registry=e,this.navigationType=""}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(wb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-mobile-menu"]],inputs:{navigationType:"navigationType",current:"current",items:"items",all:"all",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,SB,1,8,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),Db=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:3,vars:2,consts:[[1,"mobile-menu-items"],[3,"closeOthers"],[4,"ngFor","ngForOf"],[3,"cardClass","disabled",4,"ngIf"],["cardClass","mobile-nav-group-item",3,"title",4,"ngIf"],[3,"cardClass","disabled"],["ngbPanelHeader",""],[1,"",3,"click"],[3,"icon","link"],["cardClass","mobile-nav-group-item",3,"title"],["ngbPanelContent",""],["class","ml-4",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ml-4",3,"click"],[3,"collapsible","module","onClick"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"ngb-accordion",1),t.\u0275\u0275template(2,AB,3,2,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("closeOthers",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.items))},directives:function(){return[be.NgbAccordion,_.NgForOf,_.NgIf,be.NgbPanel,be.NgbPanelHeader,Ki,be.NgbPanelContent,Mu,wu]},encapsulation:2}),n})(),Ib=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Db)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Fb=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ib))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,NB,1,5,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),Ab=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mobile-menu-items"],[1,"",3,"click"],[3,"icon","link"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,TB,4,4,"ng-container",0),2&e&&t.\u0275\u0275property("ngForOf",r.items)},directives:[_.NgForOf,Ki],encapsulation:2}),n})(),Nb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Ab)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Tb=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Nb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,LB,1,5,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),Lb=(()=>{class n{constructor(e,r,o,a){this.navigation=e,this.nameMapper=r,this.configs=o,this.metadata=a,this.maxDisplayed=5,this.subs=[]}ngOnInit(){var e,r;const o=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(r=parseInt(o.navigation_max_module_recently_viewed))&&void 0!==r?r:5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){var r,o,a,s,l;null!==(null!==(r=null==e?void 0:e.module)&&void 0!==r?r:null)&&(null!==(a=null===(o=null==e?void 0:e.module)||void 0===o?void 0:o.previousValue)&&void 0!==a?a:"")!==(null!==(l=null===(s=null==e?void 0:e.module)||void 0===s?void 0:s.currentValue)&&void 0!==l?l:"")&&(this.clear(),this.initMetadata$())}buildRoute(e){var r,o,a;const s=null!==(r=e.attributes.module_name)&&void 0!==r?r:"",l=null!==(o=this.nameMapper.toFrontend(s))&&void 0!==o?o:"",c=null!==(a=e.attributes.item_id)&&void 0!==a?a:"";return this.navigation.getRecordRouterLink(l,c)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(r=>{var o;return null!==(o=r[this.module])&&void 0!==o?o:null}));this.subs.push(e.subscribe(r=>{var o;this.records=null!==(o=null==r?void 0:r.recentlyViewed)&&void 0!==o?o:null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(St))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-sub-menu-recently-viewed"]],inputs:{module:"module"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","clock"],["labelKey","LBL_LAST_VIEWED"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,OB,8,5,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.records&&r.records.length)},directives:[_.NgIf,An,gn,_.NgForOf,Ki],pipes:[_.SlicePipe],encapsulation:2}),n})(),Rb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Lb)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Cu=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Rb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-sub-menu-recently-viewed"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,jB,1,4,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),Su=(()=>{class n{constructor(e,r,o,a){this.navigation=e,this.nameMapper=r,this.configs=o,this.metadata=a,this.maxDisplayed=5,this.subs=[]}ngOnInit(){var e,r;const o=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(r=parseInt(o.navigation_max_module_favorites))&&void 0!==r?r:5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){var r,o,a,s,l;null!==(null!==(r=null==e?void 0:e.module)&&void 0!==r?r:null)&&(null!==(a=null===(o=null==e?void 0:e.module)||void 0===o?void 0:o.previousValue)&&void 0!==a?a:"")!==(null!==(l=null===(s=null==e?void 0:e.module)||void 0===s?void 0:s.currentValue)&&void 0!==l?l:"")&&(this.clear(),this.initMetadata$())}buildRoute(e){var r,o,a;const s=null!==(r=e.attributes.parent_type)&&void 0!==r?r:"",l=null!==(o=this.nameMapper.toFrontend(s))&&void 0!==o?o:"",c=null!==(a=e.attributes.parent_id)&&void 0!==a?a:"";return this.navigation.getRecordRouterLink(l,c)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(r=>{var o;return null!==(o=r[this.module])&&void 0!==o?o:null}));this.subs.push(e.subscribe(r=>{var o;this.records=null!==(o=null==r?void 0:r.favorites)&&void 0!==o?o:null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(St))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],inputs:{module:"module"},features:[t.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),Ob=(()=>{class n extends Su{constructor(e,r,o,a){super(e,r,o,a),this.navigation=e,this.nameMapper=r,this.configs=o,this.metadata=a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(St))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-sub-menu-favorites"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","star"],["labelKey","LBL_FAVORITES"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,PB,8,5,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.records&&r.records.length)},directives:[_.NgIf,An,gn,_.NgForOf,Ki],pipes:[_.SlicePipe],encapsulation:2}),n})(),jb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Ob)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),xu=(()=>{class n{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(jb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-sub-menu-favorites"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,kB,1,4,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),Bb=(()=>{class n extends Su{constructor(e,r,o,a){super(e,r,o,a),this.navigation=e,this.nameMapper=r,this.configs=o,this.metadata=a,this.collapsible=!1,this.collapsed=!1}ngOnInit(){super.ngOnInit(),this.collapsed=!!this.collapsible}toggleCollapse(){!this.collapsible||(this.collapsed=!this.collapsed)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(on),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(St))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-base-menu-favorites"]],inputs:{collapsible:"collapsible",onClick:"onClick"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"favorite-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_FAVORITES"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,$B,4,1,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.records&&r.records.length)},directives:[_.NgIf,gn,_.NgForOf,z.RouterLinkWithHref],pipes:[_.SlicePipe],encapsulation:2}),n})(),Pb=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",Bb)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),wu=(()=>{class n{constructor(e){this.registry=e,this.collapsible=!1}get getType(){return this.registry.get("default","default")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Pb))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-menu-favorites"]],inputs:{collapsible:"collapsible",module:"module",onClick:"onClick"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,zB,1,6,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.getType)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),kb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,hl,sb,d_,be.NgbModule,z.RouterModule,En,Jt,dn]]}),n})(),C4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[z.RouterModule.forChild(tb),kb,Jy,_.CommonModule]]}),n})();const Wa={success:{alertClass:"alert-success",alertIcon:"info-circle"},error:{alertClass:"alert-danger",alertIcon:"exclamation-circle"},warning:{alertClass:"alert-warning",alertIcon:"exclamation-triangle"},info:{alertClass:"alert-info",alertIcon:"info-circle"},light:{alertClass:"alert-light",alertIcon:"exclamation-circle"}};let Eu=(()=>{class n{constructor(e,r,o){this.appState=e,this.languageStore=r,this.modal=o,this.titleKey="LBL_CHECKSYS_TITLE"}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_CHECKSYS_TITLE")}getColumnLabel(e){const r=this.languageStore.getFieldLabel(e,this.appState.getModule());return(0,D.isEmptyString)(r)?e:r}ngOnInit(){console.log(this.errors),this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}}}getAlertType(e){return"error"===e.status?Wa[e.type].alertClass:Wa[e.status].alertClass}getAlertIcon(e){return"error"===e.status?Wa[e.type].alertIcon:Wa[e.status].alertIcon}returnZero(){return 0}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(At),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(be.NgbActiveModal))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-install-error-modal"]],inputs:{errors:"errors"},decls:8,vars:11,consts:[[3,"closable","close","title","titleKey","headerKlass","bodyKlass"],["modal-body",""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"list-style-none"],[4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"alert-desc"],["role","alert"],[3,"image"],[2,"margin-left","2px"],["style","float:right",4,"ngIf"],[4,"ngIf"],["class","alert alert-light","role","alert",4,"ngIf"],[2,"float","right"],["role","alert",1,"alert","alert-light"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"scrm-modal",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementContainerStart(2),t.\u0275\u0275template(3,GB,6,2,"div",2),t.\u0275\u0275elementStart(4,"div"),t.\u0275\u0275elementStart(5,"ul",3),t.\u0275\u0275template(6,qB,10,8,"li",4),t.\u0275\u0275pipe(7,"keyvalue"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("closable",!0)("close",r.closeButtonIcon)("title",r.getHeaderLabel())("titleKey",r.titleKey)("headerKlass","alert-header")("bodyKlass","alert-body"),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.errors.hasValidationError&&!0===r.errors.hasValidationError),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind2(7,8,r.errors.data,r.returnZero)))},directives:[Ko,_.NgIf,_.NgForOf,An],pipes:[_.KeyValuePipe],encapsulation:2}),n})(),S4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n,bootstrap:function(){return[Eu]}}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,no,Ta,uo,dn,Sn,be.NgbModule,be.NgbAlertModule,En]]}),n})();class gl extends D.ActionHandler{}let Du=(()=>{class n extends gl{constructor(e,r){super(),this.moduleNameMapper=e,this.router=r,this.key="create",this.modes=["list"]}run(e){var r,o;const l=`/${e.module}/${null!==(o=null===(r=null==e?void 0:e.action)||void 0===r?void 0:r.moduleAction)&&void 0!==o?o:"edit"}`,c={return_module:this.moduleNameMapper.toLegacy(e.parentModule),return_action:"DetailView",return_id:e.parentId||""};this.addAdditionalFields(e,c),this.addParams(e,c),this.router.navigate([l],{queryParams:c}).then()}shouldDisplay(){return!0}addAdditionalFields(e,r){var o;const a=e.store.parentRecord&&e.store.parentRecord.attributes||{};if(!a&&!Object.keys(a).length)return;const s=null!==(o=e.action.additionalFields)&&void 0!==o?o:{};(Object.keys(s)||[]).forEach(c=>{if(!c||!s[c])return;const u=(0,On.Z)(a,s[c],null);(0,D.isVoid)(u)||(r[c]=u)})}addParams(e,r){var o;const a=null!==(o=e.action.extraParams)&&void 0!==o?o:{};(Object.keys(a)||[]).forEach(l=>{!l||!a[l]||(r[l]=a[l])})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(on),t.\u0275\u0275inject(z.Router))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(on),t.\u0275\u0275inject(z.Router))},token:n,providedIn:"root"}),n})();class Ka{}let Iu=(()=>{class n extends Ka{constructor(e,r){super(),this.router=e,this.message=r,this.key="redirect"}run(e){if(!e||!e.route)return void this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE");const r={queryParams:{}};e.queryParams&&(r.queryParams=e.queryParams),this.router.navigate([e.route],r).then()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(it))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(it))},token:n,providedIn:"root"}),n})(),Fu=(()=>{class n extends Ka{constructor(e){super(),this.message=e,this.key="export"}run(e){e&&e.url&&e.formData?this.download(e.url,e.formData):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}download(e,r){const o=document.createElement("form");o.setAttribute("id","export-download"),o.setAttribute("method","post"),o.setAttribute("action",e),o.setAttribute("target","_self"),o.setAttribute("style","display: none;"),Object.keys(r).forEach(a=>{const s=document.createElement("input");s.setAttribute("name",a),s.setAttribute("value",r[a]),o.appendChild(s)}),document.body.appendChild(o),o.submit(),document.body.removeChild(o)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it))},token:n,providedIn:"root"}),n})(),Au=(()=>{class n extends Ka{constructor(){super(),this.key="noop"}run(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})();class Nu{constructor(){}init(i){this.iframe=i,this.initialSizeAdjustment(),this.addBodyResizeListener()}destroy(){this.observer&&this.observer.disconnect(),this.iframe=null,this.observer=null}initialSizeAdjustment(){setTimeout(this.onResize.bind(this),200)}addBodyResizeListener(){const i={document:this.iframe.contentWindow.document,element:this.iframe.contentWindow.document.body,height:this.iframe.contentWindow.document.body.scrollHeight,watched:[{getHeight:()=>{const e=i.document.getElementsByClassName("modal in"),r=e&&e[0],o=r&&r.firstElementChild;return o&&o.scrollHeight+200||-1}},{getHeight:()=>{const e=i.document.getElementById("bootstrap-container"),r=e&&e.scrollHeight+150||-1;return r>0?r:i.element.scrollHeight+50}}]};this.observer=(new vL.MutationObserverFactory).create(()=>{const e=[];i.watched.forEach(a=>{const s=a.getHeight();s>0&&e.push(s)}),e.sort((a,s)=>a-s);const r=e.pop(),o=this.calculateResizing(i.height,r);o.resized&&(i.height=o.height)}),this.observer.observe(this.iframe.contentWindow.document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}calculateResizing(i,e){const r=window.innerHeight-50;return e<r&&(e=r),i===e?{resized:!1}:i<e-20||this.iframe.scrollHeight>e?(this.resizeIFrame(e),{resized:!0,height:e}):{resized:!1}}onResize(){this.calculateResizing(this.iframe.offsetHeight,this.iframe.contentWindow.document.body.scrollHeight+120)}resizeIFrame(i){this.iframe.style.height=i+1+"px"}}class Tu{constructor(i,e=null,r=null,o=null){this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.unloadListener=null,this.loadListener=null,this.iframe=i,this.changeCallback=e,this.loadCallback=r,this.unLoadCallback=o}init(){this.loadListener=this.loadHandler.bind(this),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("load",this.loadListener),this.iframe.contentWindow.removeEventListener("unload",this.unloadListener)}destroy(){const i=this.iframe&&this.iframe.contentWindow;i&&(i.removeEventListener("unload",this.unloadListener),i.removeEventListener("load",this.loadListener)),this.iframe=null,this.lastDispatched=null,this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.loadListener=null,this.unloadListener=null}loadHandler(){this.loadCallback(),this.bindUnload()}bindUnload(){this.iframe.contentWindow.removeEventListener("unload",this.unloadListener),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("unload",this.unloadListener)}unloadHandler(){this.unLoadCallback(),setTimeout(this.triggerPageChange.bind(this),0)}triggerPageChange(){const i=this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.location.href;i&&i!==this.lastDispatched&&(this.lastDispatched=i,this.changeCallback(i))}}let Ub=(()=>{class n{constructor(e,r){this.languageStore=e,this.activeModal=r,this.url="",this.titleKey="",this.asyncActionCallback=null,this.iframe=null}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",null!==this.asyncActionCallback&&this.asyncActionCallback(this.iframe),this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new Tu(this.iframe,null,this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new Nu}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(be.NgbActiveModal))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-classic-modal"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(t_,7),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.dataContainer=o.first)}},inputs:{url:"url",titleKey:"titleKey",asyncActionCallback:"asyncActionCallback"},decls:5,vars:3,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","klass","classic-view-modal",3,"closable","close","titleKey"],["modal-body",""],[1,"classic-view-container"],["dataContainer",""]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"scrm-modal",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2,3),t.\u0275\u0275element(4,"iframe"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275property("closable",!0)("close",r.closeButton)("titleKey",r.titleKey)},directives:[Ko],encapsulation:2,data:{animation:[(0,Xt.trigger)("modalFade",[(0,Xt.transition)("void <=> *",[(0,Xt.animate)("800ms")])])]}}),n})(),Lu=(()=>{class n extends Ka{constructor(e,r,o){super(),this.router=e,this.modalService=r,this.message=o,this.key="audit"}run(e){e&&e.url?this.showClassicViewModal(e.url):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}changeLogLegacyContentFormatter(e){if(!e)return;const r=e.contentDocument.getElementsByClassName("moduleTitle")[0];!r||(r.innerText="")}showClassicViewModal(e){const r=this.modalService.open(Ub,{size:"xl",centered:!0,scrollable:!0});r.componentInstance.titleKey="LBL_CHANGE_LOG",r.componentInstance.url=e,r.componentInstance.asyncActionCallback=this.changeLogLegacyContentFormatter.bind(this)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(it))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(it))},token:n,providedIn:"root"}),n})(),tn=(()=>{class n{constructor(e,r,o,a,s,l,c){this.processService=e,this.appStateStore=r,this.message=o,this.redirectAction=a,this.exportAction=s,this.noopAction=l,this.changelogAction=c,this.actions={},this.registerHandler(a),this.registerHandler(s),this.registerHandler(l),this.registerHandler(c)}registerHandler(e){this.actions[e.key]=e}run(e,r,o=null){const a=Object.assign({},r);return this.appStateStore.updateLoading(e,!0),this.processService.submit(e,a).pipe((0,v.take)(1),(0,v.tap)(s=>{this.appStateStore.updateLoading(e,!1);let l="addSuccessMessageByKey";if("error"===s.status&&(l="addDangerMessageByKey"),s.messages&&s.messages.forEach(u=>{u&&this.message[l](u)}),"error"===s.status)return;const c=o||s.data&&s.data.handler||null;if(!c)return;const f=this.actions[c];f?f.run(s.data.params):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER")}),(0,v.catchError)(s=>{var l;throw"Access Denied."===(null!==(l=null==s?void 0:s.message)&&void 0!==l?l:"")?(this.appStateStore.updateLoading(e,!1),s):(this.message.addDangerMessageByKey("LBL_ACTION_ERROR"),this.appStateStore.updateLoading(e,!1),s)}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ar),t.\u0275\u0275inject(At),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Iu),t.\u0275\u0275inject(Fu),t.\u0275\u0275inject(Au),t.\u0275\u0275inject(Lu))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ar),t.\u0275\u0275inject(At),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Iu),t.\u0275\u0275inject(Fu),t.\u0275\u0275inject(Au),t.\u0275\u0275inject(Lu))},token:n,providedIn:"root"}),n})(),Ru=(()=>{class n extends gl{constructor(e,r,o){super(),this.modalService=e,this.message=r,this.asyncActionService=o,this.key="select",this.modes=["list"]}shouldDisplay(e){return!0}run(e){this.showSelectModal(e)}showSelectModal(e){var r;const o=this.modalService.open(ka,{size:"xl",scrollable:!0}),a=e.module;o.componentInstance.module=a,o.componentInstance.parentModule=null!==(r=null==e?void 0:e.parentModule)&&void 0!==r?r:"",o.componentInstance.multiSelect=!0,o.componentInstance.multiSelectButtonLabel="LBL_LINK",o.result.then(s=>{var l,c,f;if(!s||!s.selection||!s.selection.selected)return;const u=this.getSelectedIds(s);let d=e.subpanelMeta.get_subpanel_data;const p=null!==(c=null===(l=e.subpanelMeta)||void 0===l?void 0:l.collection_list)&&void 0!==c?c:null;p&&(null===(f=null==p?void 0:p[a])||void 0===f?void 0:f.get_subpanel_data)&&(d=p[a].get_subpanel_data),this.runAsyncAction({action:"record-select",module:e.store.parentModule,id:e.store.parentId||"",payload:{baseModule:e.parentModule,baseRecordId:e.parentId,linkField:d,relateModule:a,relateRecordIds:u}},e)})}getSelectedIds(e){const r=[];return Object.keys(e.selection.selected).forEach(o=>{o&&r.push(o)}),r}runAsyncAction(e,r){this.message.removeMessages(),this.asyncActionService.run("record-select",e).pipe((0,v.take)(1)).subscribe(()=>{r.store.load(!1).pipe((0,v.take)(1)).subscribe(),r.store.loadAllStatistics(!1).pipe((0,v.take)(1)).subscribe()})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(it),t.\u0275\u0275inject(tn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(it),t.\u0275\u0275inject(tn))},token:n,providedIn:"root"}),n})(),Ou=(()=>{class n extends gl{constructor(){super(),this.key="async-process",this.modes=D.ALL_VIEW_MODES}run(e){}shouldDisplay(e){return!0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),ju=(()=>{class n{constructor(e,r,o){this.create=e,this.select=r,this.async=o,this.actions={},this.actions[e.key]=e,this.actions[r.key]=r,this.actions[o.key]=o}run(e,r){this.actions[e].run(r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Du),t.\u0275\u0275inject(Ru),t.\u0275\u0275inject(Ou))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Du),t.\u0275\u0275inject(Ru),t.\u0275\u0275inject(Ou))},token:n,providedIn:"root"}),n})(),Vb=(()=>{class n{constructor(e,r,o,a,s){this.languageStore=e,this.actionManager=r,this.languages=o,this.screenSize=a,this.systemConfigStore=s,this.klass="",this.limitConfigKey="listview_line_actions_limits",this.configState=new w.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.buttonClass="line-action-item line-action",this.buttonGroupClass="float-right",this.subs=[],this.screen=Xn.Medium,this.defaultBreakpoint=3}ngOnInit(){this.subs.push((0,w.combineLatest)([this.config.getActions({record:this.record}),this.screenSize.screenSize$,this.languages.vm$]).pipe((0,v.map)(([e,r,o])=>{r&&(this.screen=r),this.configState.next(this.getButtonGroupConfig(e)),this.actions=e})).subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getButtonGroupConfig(e){const r=[],o=[];e.forEach(l=>{const c=this.buildButton(l);l.params&&l.params.expanded?r.push(c):o.push(c)});let a=this.getBreakpoint();r.length<a&&(a=r.length);const s=r.concat(o);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:a,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupClass]},buttons:s}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue(this.limitConfigKey);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){var r,o;const a={titleKey:e.labelKey||"",klass:this.buttonClass,icon:e.icon||"",onClick:()=>{this.config.runAction(e,{module:this.record&&this.record.module||"",record:this.record})}};e.icon&&(a.icon=e.icon);const s=null!==(o=null===(r=null==e?void 0:e.params)||void 0===r?void 0:r.debounceClick)&&void 0!==o?o:null;return a.debounceClick=!0,(0,D.isFalse)(s)&&(a.debounceClick=!1),e.status&&D.Button.appendClasses(a,[e.status]),a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(ju),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(lo),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-line-action-menu"]],inputs:{klass:"klass",limitConfigKey:"limitConfigKey",record:"record",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["id","line-action-div",1,"line-action","float-right"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,QB,4,4,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.actions)},directives:[_.NgIf,co],encapsulation:2}),n})(),$b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,be.NgbModule,En,z.RouterModule,Vi]]}),n})(),oa=(()=>{class n{constructor(){this.overlay=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-loading-spinner"]],inputs:{overlay:"overlay"},decls:19,vars:2,consts:[[1,"loading-spinner"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"div",0),t.\u0275\u0275elementStart(2,"div",1),t.\u0275\u0275element(3,"div",2),t.\u0275\u0275element(4,"div",2),t.\u0275\u0275element(5,"div",3),t.\u0275\u0275element(6,"div",4),t.\u0275\u0275element(7,"div",5),t.\u0275\u0275element(8,"div",5),t.\u0275\u0275element(9,"div",6),t.\u0275\u0275element(10,"div",7),t.\u0275\u0275element(11,"div",8),t.\u0275\u0275element(12,"div",8),t.\u0275\u0275element(13,"div",9),t.\u0275\u0275element(14,"div",10),t.\u0275\u0275element(15,"div",8),t.\u0275\u0275element(16,"div",8),t.\u0275\u0275element(17,"div",9),t.\u0275\u0275element(18,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275classProp("overlay",r.overlay)},styles:[".sk-cube-grid[_ngcontent-%COMP%]{width:6.25em;height:6.25em}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;-webkit-animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out;animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{-webkit-animation-delay:.4s;animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{-webkit-animation-delay:0s;animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}@keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}"]}),n})(),aa=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),x4=(()=>{class n{constructor(e,r){this.messageService=e,this.languages=r,this.appStrings$=r.appStrings$}ngOnInit(){this.messages$=this.messageService.messages$}close(e){this.messageService.contains(e,!0)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(it),t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-message-ui"]],decls:2,vars:3,consts:[["class","container-fluid alert-fixed message-wrapper",4,"ngIf"],[1,"container-fluid","alert-fixed","message-wrapper"],["class","d-flex justify-content-center flex-column align-items-center message-container",4,"ngIf"],[1,"d-flex","justify-content-center","flex-column","align-items-center","message-container"],["role","alert",3,"class","click",4,"ngFor","ngForOf"],["role","alert",3,"click"],[4,"ngIf"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,nP,3,3,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.appStrings$))},directives:[_.NgIf,_.NgForOf],pipes:[_.AsyncPipe],encapsulation:2,data:{animation:[(0,Xt.trigger)("fade",[(0,Xt.transition)(":enter",(0,Xt.useAnimation)(As.fadeIn,{params:{timing:.5,delay:0}})),(0,Xt.transition)(":leave",(0,Xt.useAnimation)(As.fadeOut,{params:{timing:.5,delay:0}}))])]}}),n})(),w4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),E4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,uo]]}),n})(),Ha=(()=>{class n{constructor(e){this.activeModal=e,this.buttons=[]}ngOnInit(){this.buttonGroup$=(0,w.of)({buttons:this.buttons}),this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(be.NgbActiveModal))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-message-modal"]],inputs:{buttons:"buttons",titleKey:"titleKey",textKey:"textKey"},decls:6,vars:6,consts:[["klass","message-modal",3,"closable","close","title"],["modal-body","",1,"p-3"],[3,"labelKey"],["modal-footer",""],[3,"activeModal","config$"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"scrm-modal",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"span"),t.\u0275\u0275element(3,"scrm-label",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275element(5,"scrm-modal-button-group",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("closable",!0)("close",r.closeButton)("title",r.titleKey||""),t.\u0275\u0275advance(3),t.\u0275\u0275property("labelKey",r.textKey),t.\u0275\u0275advance(2),t.\u0275\u0275property("activeModal",r.activeModal)("config$",r.buttonGroup$))},directives:function(){return[Ko,gn,zb]},encapsulation:2,data:{animation:[(0,Xt.trigger)("modalFade",[(0,Xt.transition)("void <=> *",[(0,Xt.animate)("800ms")])])]}}),n})(),zb=(()=>{class n{constructor(e,r){this.buttonUtils=e,this.config=r,this.activeModal=null,this.defaultButtonGroup={breakpoint:4,wrapperKlass:["modal-buttons"],buttonKlass:["modal-button","btn","btn-sm"],buttons:[]};const o=this.config.getConfigValue("ui");o&&o.modal_button_group_breakpoint&&(this.defaultButtonGroup.breakpoint=o.modal_buttons_collapse_breakpoint)}ngOnInit(){this.config$&&(this.buttonGroup$=this.config$.pipe((0,v.map)(e=>this.mapButtonGroup(e))))}mapButtonGroup(e){const r=(0,_L.Z)(Object.assign({},e),(0,D.deepClone)(this.defaultButtonGroup));return this.mapButtons(r),r}mapButtons(e){const r=e.buttons||[];e.buttons=[],r.length>0&&r.forEach(o=>{const a=this.buttonUtils.addOnClickPartial(o,this.activeModal);e.buttons.push(a)})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(m_),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-modal-button-group"]],inputs:{activeModal:"activeModal",config$:"config$"},decls:1,vars:1,consts:[[3,"config$"]],template:function(e,r){1&e&&t.\u0275\u0275element(0,"scrm-button-group",0),2&e&&t.\u0275\u0275property("config$",r.buttonGroup$)},directives:[co],encapsulation:2}),n})(),Gb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Vi]]}),n})(),D4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,uo,Vi,dn,Gb,be.NgbModule]]}),n})(),Bu=(()=>{class n{constructor(){this.title=""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-module-title"]],inputs:{title:"title"},decls:2,vars:3,template:function(e,r){1&e&&(t.\u0275\u0275text(0),t.\u0275\u0275pipe(1,"uppercase")),2&e&&t.\u0275\u0275textInterpolate1("\n",t.\u0275\u0275pipeBind1(1,1,r.title),"\n")},pipes:[_.UpperCasePipe],encapsulation:2}),n})(),Za=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})();class I4{constructor(){this.target=yo.none}}let Pu=(()=>{class n{constructor(e){this.languageStore=e,this.appStrings$=this.languageStore.appStrings$,this.vm$=null}ngOnInit(){const e=this.state.getPaginationCount();this.vm$=(0,w.combineLatest)([this.appStrings$,e]).pipe((0,v.map)(([r,o])=>({appStrings:r,pageCount:o})))}first(){this.state.changePage(D.PageSelection.FIRST)}previous(){this.state.changePage(D.PageSelection.PREVIOUS)}next(){this.state.changePage(D.PageSelection.NEXT)}last(){this.state.changePage(D.PageSelection.LAST)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-pagination"]],inputs:{state:"state"},decls:2,vars:3,consts:[["class","bulk-action float-right",4,"ngIf"],[1,"bulk-action","float-right"],["aria-label","Navigate to first page",1,"pagination-button","pagination-first",3,"click"],["image","paginate_first",1,"sicon-2x","pagination-icons"],["aria-label","Previous page",1,"pagination-button","pagination-previous",3,"click"],["image","paginate_previous",1,"sicon-2x","pagination-icons"],[1,"pagination-count",3,"ngClass"],["aria-label","Navigate to last page",1,"pagination-button","pagination-next",3,"click"],["image","paginate_next",1,"sicon-2x","pagination-icons"],["aria-label","Next page",1,"pagination-button","pagination-last",3,"click"],["image","paginate_last",1,"sicon-2x","pagination-icons"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,iP,11,7,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,An,_.NgClass],pipes:[_.AsyncPipe],encapsulation:2}),n})(),ku=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En]]}),n})(),Uu=(()=>{class n{constructor(e){this.language=e,this.config={},this.active=1,this.subs=[]}ngOnInit(){this.subs.push(this.dataSource.getDisplayConfig().subscribe(e=>{this.config=Object.assign({},e)})),this.subs.push(this.dataSource.getPanels().subscribe(e=>{this.panels=[...e]})),this.subs.push(this.dataSource.getRecord().subscribe(e=>{this.record=Object.assign({},e),this.fields=e.fields}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getLayoutDataSource(e){return{inlineEdit:!0,getConfig:()=>this.dataSource.getDisplayConfig().pipe((0,v.map)(r=>({mode:r.mode,maxColumns:r.maxColumns}))),getLayout:()=>(0,w.of)(e).pipe((0,v.shareReplay)(1)),getFields:()=>this.dataSource.getRecord().pipe((0,v.map)(r=>r.fields)),getRecord:()=>this.dataSource.getRecord(),getEditAction:()=>this.dataSource.getEditAction()}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-content"]],inputs:{dataSource:"dataSource"},decls:1,vars:1,consts:[[4,"ngIf"],["class","record-content panel-layout container-fluid pl-0 pr-0",4,"ngIf"],["class","record-content tabs-layout container-fluid pl-0 pr-0",4,"ngIf"],[1,"record-content","panel-layout","container-fluid","pl-0","pr-0"],["class","row no-gutters mb-3",4,"ngFor","ngForOf"],[1,"row","no-gutters","mb-3"],[1,"col"],["mode","collapsible",3,"title"],["panel-body",""],[3,"dataSource"],[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],["class","tab",3,"ngbNavItem",4,"ngFor","ngForOf"],[1,"p-2","pt-3","rounded-right","rounded-bottom",3,"ngbNavOutlet"],[1,"tab",3,"ngbNavItem"],["ngbNavLink","",1,"tab-link"],["ngbNavContent",""]],template:function(e,r){1&e&&t.\u0275\u0275template(0,uP,3,2,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.dataSource)},directives:[_.NgIf,_.NgForOf,ia,Hy,be.NgbNav,be.NgbNavOutlet,be.NgbNavItem,be.NgbNavLink,be.NgbNavContent],encapsulation:2}),n})(),Vu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Gi,be.NgbModule,vu]]}),n})(),Wb=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-content-skeleton"]],decls:138,vars:0,consts:[[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0","record-content-skeleton"],[1,"nav-tabs","nav"],[1,"tab","nav-item"],["href","",1,"tab-link","nav-link","active","pl-5","pr-5","h-100","box-loading"],["href","",1,"tab-link","nav-link","pl-5","pr-5","h-100","box-loading"],[1,"p-2","pt-3","rounded-right","rounded-bottom","tab-content"],[1,"tab-pane","fade","active","show"],[1,""],[1,"detail","field-layout"],[1,"form-row","align-items-center","pt-1","pb-1"],[1,"field-column-bordered","col","form-group","m-0","pl-3","pb-2","pr-3"],[1,"label-container"],[1,"col-form-label-sm","mb-0","pb-3","pl-5","pr-5","h-100","rounded","box-loading"],[1,"d-flex"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["type","button",1,"record-action-button"],["image","pencil"],[1,"field-separation","mt-2"],[1,"col","form-group","m-0","pl-3","pb-2","pr-3"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"ul",1),t.\u0275\u0275elementStart(2,"li",2),t.\u0275\u0275element(3,"a",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"li",2),t.\u0275\u0275element(5,"a",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"li",2),t.\u0275\u0275element(7,"a",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",5),t.\u0275\u0275elementStart(9,"div",6),t.\u0275\u0275elementStart(10,"div",7),t.\u0275\u0275elementStart(11,"form",8),t.\u0275\u0275elementStart(12,"div",9),t.\u0275\u0275elementStart(13,"div",10),t.\u0275\u0275elementStart(14,"div",11),t.\u0275\u0275elementStart(15,"strong"),t.\u0275\u0275element(16,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",13),t.\u0275\u0275element(18,"div",14),t.\u0275\u0275elementStart(19,"div"),t.\u0275\u0275elementStart(20,"button",15),t.\u0275\u0275element(21,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(22,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",18),t.\u0275\u0275elementStart(24,"div",11),t.\u0275\u0275elementStart(25,"strong"),t.\u0275\u0275element(26,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"div",13),t.\u0275\u0275element(28,"div",14),t.\u0275\u0275elementStart(29,"div"),t.\u0275\u0275elementStart(30,"button",15),t.\u0275\u0275element(31,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(32,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"div",9),t.\u0275\u0275elementStart(34,"div",10),t.\u0275\u0275elementStart(35,"div",11),t.\u0275\u0275elementStart(36,"strong"),t.\u0275\u0275element(37,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(38,"div",13),t.\u0275\u0275element(39,"div",14),t.\u0275\u0275elementStart(40,"div"),t.\u0275\u0275elementStart(41,"button",15),t.\u0275\u0275element(42,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(43,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(44,"div",18),t.\u0275\u0275elementStart(45,"div",11),t.\u0275\u0275elementStart(46,"strong"),t.\u0275\u0275element(47,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(48,"div",13),t.\u0275\u0275element(49,"div",14),t.\u0275\u0275elementStart(50,"div"),t.\u0275\u0275elementStart(51,"button",15),t.\u0275\u0275element(52,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(53,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(54,"div",9),t.\u0275\u0275elementStart(55,"div",10),t.\u0275\u0275elementStart(56,"div",11),t.\u0275\u0275elementStart(57,"strong"),t.\u0275\u0275element(58,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(59,"div",13),t.\u0275\u0275element(60,"div",14),t.\u0275\u0275elementStart(61,"div"),t.\u0275\u0275elementStart(62,"button",15),t.\u0275\u0275element(63,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(64,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(65,"div",18),t.\u0275\u0275elementStart(66,"div",11),t.\u0275\u0275elementStart(67,"strong"),t.\u0275\u0275element(68,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(69,"div",13),t.\u0275\u0275element(70,"div",14),t.\u0275\u0275elementStart(71,"div"),t.\u0275\u0275elementStart(72,"button",15),t.\u0275\u0275element(73,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(74,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(75,"div",9),t.\u0275\u0275elementStart(76,"div",10),t.\u0275\u0275elementStart(77,"div",11),t.\u0275\u0275elementStart(78,"strong"),t.\u0275\u0275element(79,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(80,"div",13),t.\u0275\u0275element(81,"div",14),t.\u0275\u0275elementStart(82,"div"),t.\u0275\u0275elementStart(83,"button",15),t.\u0275\u0275element(84,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(85,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(86,"div",18),t.\u0275\u0275elementStart(87,"div",11),t.\u0275\u0275elementStart(88,"strong"),t.\u0275\u0275element(89,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(90,"div",13),t.\u0275\u0275element(91,"div",14),t.\u0275\u0275elementStart(92,"div"),t.\u0275\u0275elementStart(93,"button",15),t.\u0275\u0275element(94,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(95,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(96,"div",9),t.\u0275\u0275elementStart(97,"div",10),t.\u0275\u0275elementStart(98,"div",11),t.\u0275\u0275elementStart(99,"strong"),t.\u0275\u0275element(100,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(101,"div",13),t.\u0275\u0275element(102,"div",14),t.\u0275\u0275elementStart(103,"div"),t.\u0275\u0275elementStart(104,"button",15),t.\u0275\u0275element(105,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(106,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(107,"div",18),t.\u0275\u0275elementStart(108,"div",11),t.\u0275\u0275elementStart(109,"strong"),t.\u0275\u0275element(110,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(111,"div",13),t.\u0275\u0275element(112,"div",14),t.\u0275\u0275elementStart(113,"div"),t.\u0275\u0275elementStart(114,"button",15),t.\u0275\u0275element(115,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(116,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(117,"div",9),t.\u0275\u0275elementStart(118,"div",10),t.\u0275\u0275elementStart(119,"div",11),t.\u0275\u0275elementStart(120,"strong"),t.\u0275\u0275element(121,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(122,"div",13),t.\u0275\u0275element(123,"div",14),t.\u0275\u0275elementStart(124,"div"),t.\u0275\u0275elementStart(125,"button",15),t.\u0275\u0275element(126,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(127,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(128,"div",18),t.\u0275\u0275elementStart(129,"div",11),t.\u0275\u0275elementStart(130,"strong"),t.\u0275\u0275element(131,"label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(132,"div",13),t.\u0275\u0275element(133,"div",14),t.\u0275\u0275elementStart(134,"div"),t.\u0275\u0275elementStart(135,"button",15),t.\u0275\u0275element(136,"scrm-image",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(137,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())},directives:[An],encapsulation:2}),n})(),Kb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En]]}),n})(),Hb=(()=>{class n{constructor(){this.mode="detail",this.maxColumns=4,this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.subs=[]}ngOnInit(){if(!this.config)return;const e=this.config;e.record$&&this.subs.push(e.record$.subscribe(r=>{this.record=null!=r?r:null})),e.mode$&&this.subs.push(e.mode$.subscribe(r=>{this.mode=null!=r?r:"detail"})),e.layout$&&this.subs.push(e.layout$.subscribe(r=>{this.layout=null!=r?r:null}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getRowClass(){return this.config.rowClass}getColClass(){return this.config.colClass}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let r="font-weight-normal";return e&&(0,D.isTrue)(e)&&(r="font-weight-bolder"),r}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||""}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||""}getLayoutRowClass(e){return e&&e.class||""}getClass(e){if(!e)return"";const r=[];return r.push(e.class||""),e.size&&r.push(this.getSizeClass(e.size)||""),e.bold&&r.push(this.getFontWeight(e.bold)||""),e.color&&r.push(this.getColor(e.color)||""),r.join(" ")}getLabelDisplay(e,r){return this.shouldLabelDisplayInMode(e,r)?e.labelDisplay||this.config&&this.config.labelDisplay||"inline":"none"}getField(e,r){return r&&r.name&&e&&e.fields&&e.fields[r.name]||null}getFieldClass(e){let r=this.config.inputClass||{};return e.inputClass&&(r[e.inputClass]=!0),r}getLabelClass(e){let r=this.config.labelClass||{};return e.labelClass&&(r[e.labelClass]=!0),r}shouldDisplay(e,r,o){if(!this.shouldFieldDisplayInMode(e,o))return!1;if(!e.hideIfEmpty)return!0;let s=!1;return s=s||!!r.value,s=s||!(!r.valueList||!r.valueList.length),s=s||!(!r.valueObject||!Object.keys(r.valueObject).length),s}shouldColDisplayInMode(e,r){return this.shouldFieldDisplayInMode(e,r)||this.shouldLabelDisplayInMode(e,r)}shouldFieldDisplayInMode(e,r){var o;const a=null!==(o=null==e?void 0:e.modes)&&void 0!==o?o:null;return!(a&&a.length&&!a.includes(r))}shouldLabelDisplayInMode(e,r){var o;const a=null!==(o=null==e?void 0:e.labelModes)&&void 0!==o?o:null;return!(a&&a.length&&!a.includes(r))}getDisplay(e){return e.display||""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-flexbox"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"d-flex"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","ngClass"],[3,"field","klass","mode","type"],[3,"buttonClass","config"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,xP,2,4,"div",0),2&e&&t.\u0275\u0275property("ngIf",r.config)},directives:[_.NgIf,_.NgForOf,_.NgClass,gn,yi,Aa],encapsulation:2}),n})(),Zb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn,cr,dn,Na]]}),n})(),$u=(()=>{class n{constructor(){this.gridButtons=[],this.mode="detail",this.maxColumns=4,this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.fields=[],this.special=[]}ngOnInit(){if(!this.config)return;const e=this.config;this.vm$=(0,w.combineLatest)([e.record$,e.mode$,e.fields$,e.maxColumns$,e.sizeMap$]).pipe((0,v.map)(([r,o,a,s,l])=>(this.mode=o,this.maxColumns=s,this.sizeMap=l,this.fields=this.getFields(r,a),{record:r,mode:o,fields:a,maxColumns:s})))}getFields(e,r){if(!e||!r||!e.fields)return[];const o=[];return r.forEach(a=>{!e.fields[a]||o.push(e.fields[a])}),o}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-grid"]],inputs:{config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngIf"],[3,"actions","appendActions","colClass","fieldMode","fields","inputClass","labelClass","labelDisplay","maxColumns","rowClass","sizeMap"],["class","float-right","field-grid-actions","",4,"ngIf"],["field-grid-actions","",1,"float-right"],[3,"buttonClass","config"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,DP,3,3,"ng-container",0),2&e&&t.\u0275\u0275property("ngIf",r.config)},directives:[_.NgIf,Ec,Aa],pipes:[_.AsyncPipe],encapsulation:2}),n})(),qa=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,vo,Na]]}),n})(),qb=(()=>{class n{constructor(){this.statusIcons={NONE:"sort",ASC:"sort_ascend",DESC:"sort_descend"},this.nextDirection={NONE:D.SortDirection.DESC,ASC:D.SortDirection.NONE,DESC:D.SortDirection.ASC}}ngOnInit(){this.direction$=this.state.getSortDirection()}getStatusIcon(e){return this.statusIcons[e]}changeSorting(e){this.state.changeSortDirection(this.nextDirection[e])}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-sort-button"]],inputs:{state:"state"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-sm","p-0","sort-button",3,"click"],[1,"sort-icon","sicon",3,"image"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,IP,3,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.direction$))},directives:[_.NgIf,An],pipes:[_.AsyncPipe],encapsulation:2}),n})(),Jb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,En]]}),n})(),Xr=(()=>{class n{constructor(e){this.apollo=e}save(e){const r={module:e.module,attributes:(0,D.deepClone)(e.attributes)};e.id&&(r._id=e.id);const o={mutation:q()`
                mutation saveRecord($input: saveRecordInput!) {
                    saveRecord(input: $input) {
                        record {
                            attributes
                            id
                            _id
                            module
                            acls
                        }
                    }
                }
            `,variables:{input:r}};return this.apollo.mutate(o).pipe((0,v.map)(a=>this.mapToRecord(a)))}mapToRecord(e){var r,o,a,s,l,c,f,u,d,p,h,m,g,x,C,A;return e.data&&e.data.saveRecord&&e.data.saveRecord.record?{id:e.data.saveRecord.record._id,type:null!==(s=null===(a=null===(o=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.saveRecord)||void 0===o?void 0:o.record)||void 0===a?void 0:a.type)&&void 0!==s?s:"",module:null!==(u=null===(f=null===(c=null===(l=null==e?void 0:e.data)||void 0===l?void 0:l.saveRecord)||void 0===c?void 0:c.record)||void 0===f?void 0:f.module)&&void 0!==u?u:"",attributes:null!==(m=null===(h=null===(p=null===(d=null==e?void 0:e.data)||void 0===d?void 0:d.saveRecord)||void 0===p?void 0:p.record)||void 0===h?void 0:h.attributes)&&void 0!==m?m:[],acls:null!==(A=null===(C=null===(x=null===(g=null==e?void 0:e.data)||void 0===g?void 0:g.saveRecord)||void 0===x?void 0:x.record)||void 0===C?void 0:C.acls)&&void 0!==A?A:[]}:null}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})(),Ja=(()=>{class n{constructor(e,r,o){this.listStoreFactory=e,this.languageStore=r,this.statisticsStoreFactory=o,this.show=!1,this.subs=[],this.recordList=e.create(),this.statistics={},this.metadataState=new w.BehaviorSubject({}),this.metadata$=this.metadataState.asObservable(),this.loading$=this.recordList.loading$}getTitle(){let e=this.languageStore.getFieldLabel(this.metadata.title_key,this.parentModule);if(!e){const r=this.languageStore.getAppListString("moduleList");e=r&&r[this.metadata.title_key]||""}return e}getIcon(){return this.metadata.icon}clear(){this.metadataState.unsubscribe(),this.metadataState=null,this.recordList.clear(),this.recordList=null,this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.recordList.clearAuthBased()}init(e,r,o,a=null){this.parentModule=e,this.parentId=r,this.metadata=o,this.metadataState.next(this.metadata),this.recordList.init(o.module,!1,"list_max_entries_per_subpanel"),this.initStatistics(o,e,r),this.initSearchCriteria(e,r,o.name),a&&(this.parentRecord$=a,this.parentRecord$.subscribe(s=>this.parentRecord=s))}load(e=!0){return this.recordList.load(e)}getStatistic(e){return this.statistics[e]?this.statistics[e]:null}loadStatistics(e,r=!0){return this.statistics[e]?this.statistics[e].load(r):null}loadAllStatistics(e=!0){if(!this.statistics||!Object.keys(this.statistics).length)return null;const r={};return Object.keys(this.statistics).forEach(o=>{!this.statistics[o]||(r[o]=this.loadStatistics(o,e))}),(0,w.forkJoin)(r)}shouldBatchStatistic(){const e=this.metadata||{};return!(e.insightWidget&&e.insightWidget.batch&&!1===e.insightWidget.batch)}setStatisticsLoading(e,r){!this.statistics[e]||this.statistics[e].setLoading(r)}setAllStatisticsLoading(e){!this.statistics||!Object.keys(this.statistics).length||Object.keys(this.statistics).forEach(r=>{!this.statistics[r]||this.setStatisticsLoading(r,e)})}setStatistics(e,r,o=!1){!this.statistics[e]||this.statistics[e].setStatistic(e,r,o)}getStatisticQuery(e){return this.statistics[e].getQuery()}getAllStatisticQuery(){if(!this.statistics||!Object.keys(this.statistics).length)return{};const e={};return Object.keys(this.statistics).forEach(r=>{!this.statistics[r]||(e[r]=this.getStatisticQuery(r))}),e}getWidgetLayout(){const e=this.metadata;if(!(e&&e.insightWidget&&e.insightWidget.options&&e.insightWidget.options.insightWidget))return{rows:[]};const r=(0,D.deepClone)(e.insightWidget.options.insightWidget);return(!r.rows||!r.rows.length)&&(r.rows={}),r}initSearchCriteria(e,r,o){this.recordList.criteria={preset:{type:"subpanel",params:{subpanel:o,parentModule:e,parentId:r}}}}initStatistics(e,r,o){this.getWidgetLayout().rows.forEach(s=>{!s.cols||!s.cols.length||s.cols.forEach(l=>{!l.statistic||"string"!=typeof l.statistic||(this.initStatistic(l.statistic,e,r,o),l.store=this.statistics[l.statistic])})})}initStatistic(e,r,o,a){this.statistics[e]=this.statisticsStoreFactory.create(),this.statistics[e].init(r.module,{key:e,context:{module:o,id:a},params:{subpanel:r.name}},!1)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(ra))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),zu=(()=>{class n{constructor(e,r,o){this.listStoreFactory=e,this.languageStore=r,this.statisticsStoreFactory=o}create(){return new Ja(this.listStoreFactory,this.languageStore,this.statisticsStoreFactory)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(ra))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(ra))},token:n,providedIn:"root"}),n})(),Gu=(()=>{class n{constructor(e,r,o,a,s){this.appStateStore=e,this.languageStore=r,this.navigationStore=o,this.moduleNavigation=a,this.metadataStore=s,this.appState$=this.appStateStore.vm$,this.language$=this.languageStore.vm$,this.navigation$=this.navigationStore.vm$,this.module$=(0,w.combineLatest)([this.appState$,this.navigationStore.vm$]).pipe((0,v.map)(([l,c])=>this.moduleNavigation.getModuleInfo(l.module,c))),this.appData$=(0,w.combineLatest)([this.appState$,this.module$,this.language$,this.navigation$]).pipe((0,v.map)(([l,c,f,u])=>(this.appData={appState:l,module:c,language:f,navigation:u},this.appData))),this.metadata$=s.metadata$.pipe((0,v.tap)(l=>{this.metadata=l}))}clear(){}clearAuthBased(){this.clear()}get appState(){return this.appData.appState?this.appData.appState:{}}get module(){return this.appData.module}get language(){return this.appData.language?this.appData.language:{appStrings:{},appListStrings:{},modStrings:{},languageKey:""}}get appStrings(){return this.language.appStrings}get appListStrings(){return this.language.appListStrings}get modStrings(){return this.language.modStrings}get navigation(){return this.appData.navigation}get searchMeta(){return this.metadata.search?this.metadata.search:{layout:{basic:{},advanced:{}}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(xn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),kr=(()=>{class n{constructor(e){this.apollo=e}fetch(e,r,o){const a=o.fields,s={query:q()`
            query getRecord($module: String!, $record: String!) {
                getRecord(module: $module, record: $record) {
                    ${a.join("\n")}
                }
            }
        `,variables:{module:e,record:r}};return this.apollo.query(s)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})(),Wu=(()=>{class n{constructor(e){this.fetchGQL=e}fetch(e,r){return this.fetchGQL.fetch(e,r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(mr))},token:n,providedIn:"root"}),n})();const Qb={id:"",type:"",module:"",attributes:{},acls:[]};class Ku{constructor(i,e,r,o,a,s){this.definitions$=i,this.recordSaveGQL=e,this.recordFetchGQL=r,this.message=o,this.recordManager=a,this.recordMappers=s,this.cache$=null,this.internalState=(0,D.deepClone)(Qb),this.stagingState=(0,D.deepClone)(Qb),this.store=new w.BehaviorSubject(this.internalState),this.staging=new w.BehaviorSubject(this.stagingState),this.definitions=[],this.subs=[],this.fieldsMetadata={fields:["_id","id","attributes","module","type","acls","favorite"]},this.state$=this.store.asObservable().pipe((0,v.distinctUntilChanged)()),this.staging$=this.staging.asObservable(),this.subs.push(this.state$.subscribe(l=>{this.updateStaging(l)})),this.subs.push(i.subscribe(l=>{this.definitions=l,this.init(this.internalState)}))}init(i){const e=Object.assign({},i);this.initRecord(e),this.updateState(e)}getStaging(){return this.stagingState?this.stagingState:null}setStaging(i){this.initRecord(i),this.staging.next(this.stagingState=i)}setRecord(i){this.initRecord(i),this.updateState(i)}save(){return this.mapStagingFields(),this.recordSaveGQL.save(this.stagingState).pipe((0,v.tap)(i=>{this.initRecord(i),this.updateState(i)}))}validate(){return this.stagingState.formGroup.markAllAsTouched(),this.stagingState.formGroup.statusChanges.pipe((0,v.startWith)(this.stagingState.formGroup.status),(0,v.filter)(i=>"PENDING"!==i),(0,v.take)(1),(0,v.map)(i=>"VALID"===i))}resetStaging(){this.updateStaging(this.internalState)}destroy(){this.subs.forEach(i=>i.unsubscribe())}getBaseRecord(){return this.internalState?(0,D.deepClone)({id:this.internalState.id,type:this.internalState.type,module:this.internalState.module,attributes:this.internalState.attributes,acls:this.internalState.acls}):null}getBaseStaging(){return this.stagingState?(this.mapStagingFields(),(0,D.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,attributes:this.stagingState.attributes,acls:this.stagingState.acls})):null}extractBaseRecord(i){const o=(0,B._T)(i,["fields","formGroup"]);return Object.assign({},o)}isDirty(){return!(!this.stagingState||!this.stagingState.formGroup)&&this.stagingState.formGroup.dirty}retrieveRecord(i,e,r=!0){return(null==this.cache$||!1===r)&&(this.cache$=this.fetch(i,e).pipe((0,v.tap)(o=>this.init(o)),(0,v.shareReplay)(1))),this.cache$}updateState(i){this.store.next(this.internalState=i)}updateStaging(i){const e=(0,D.deepClone)(this.extractBaseRecord(i));this.initRecord(e),this.staging.next(this.stagingState=e)}mapStagingFields(){const i=this.recordMappers.get(this.stagingState.module);Object.keys(i).forEach(e=>{i[e].map(this.stagingState)})}initRecord(i){i.module&&this.definitions&&this.definitions.length>0&&(i.fields=this.recordManager.initFields(i,this.definitions))}fetch(i,e){return this.recordFetchGQL.fetch(i,e,this.fieldsMetadata).pipe((0,v.map)(({data:r})=>{var o,a;const s={type:"",module:"",attributes:{},acls:[]};if(!r)return s;const l=r.getRecord.attributes.id;return l?(s.id=l,s.module=i,s.type=r.getRecord.attributes&&r.getRecord.attributes.object_name,s.attributes=r.getRecord.attributes,s.acls=r.getRecord.acls,s.favorite=null!==(a=null===(o=null==r?void 0:r.getRecord)||void 0===o?void 0:o.favorite)&&void 0!==a&&a,s):(this.message.addDangerMessageByKey("LBL_RECORD_DOES_NOT_EXIST"),s)}),(0,v.catchError)(r=>(0,w.throwError)(r)))}}let bo=(()=>{class n{getKey(){return"base"}map(e){!e.fields||!Object.keys(e.fields).length||Object.keys(e.fields).forEach(r=>{const o=e.fields[r],a=o.type||"",s=o.definition.source||"",l=o.definition.rname||"name",c=o.definition.id_name||"";if("relate"!==a||"non-db"!==s||c!==r){if("relate"===a&&"non-db"===s&&""!==l&&o.valueObject){const f=e.attributes[r]||{};return f[l]=o.valueObject[l],f.id=o.valueObject.id,e.attributes[r]=f,void(e.attributes[c]=o.valueObject.id)}if(!o.valueObject)return o.items?(e.attributes[r]=[],void o.items.forEach(f=>{e.attributes[r].push({id:f.id,module:f.module,attributes:(0,D.deepClone)(f.attributes)})})):void(e.attributes[r]=o.valueObjectArray?o.valueObjectArray:o.valueList?o.valueList:o.value);e.attributes[r]=o.valueObject}else e.attributes[r]=o.value})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Hi=(()=>{class n{constructor(e,r,o,a,s,l){this.recordFetchGQL=e,this.recordSaveGQL=r,this.message=o,this.recordManager=a,this.recordMappers=s,this.baseMapper=l,s.register("default",l.getKey(),l)}create(e){return new Ku(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(D.RecordMapperRegistry),t.\u0275\u0275inject(bo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(D.RecordMapperRegistry),t.\u0275\u0275inject(bo))},token:n,providedIn:"root"}),n})();const Xb={module:"",recordID:"",loading:!1,widgets:!1,showSidebarWidgets:!1,showTopWidget:!1,showSubpanels:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let Lr=(()=>{class n extends Gu{constructor(e,r,o,a,s,l,c,f,u,d,p,h,m,g){super(o,a,s,l,c),this.recordFetchGQL=e,this.recordSaveGQL=r,this.appStateStore=o,this.languageStore=a,this.navigationStore=s,this.moduleNavigation=l,this.metadataStore=c,this.localStorage=f,this.message=u,this.subpanelFactory=d,this.recordManager=p,this.statisticsBatch=h,this.recordStoreFactory=m,this.preferences=g,this.cache$=null,this.internalState=(0,D.deepClone)(Xb),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subpanelReloadSubject=new w.BehaviorSubject({}),this.subpanelReloadSub=[],this.subs=[],this.recordStore=m.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(C=>C.loading)),this.widgets$=this.state$.pipe((0,v.map)(C=>C.widgets)),this.showSidebarWidgets$=this.state$.pipe((0,v.map)(C=>C.showSidebarWidgets)),this.showTopWidget$=this.state$.pipe((0,v.map)(C=>C.showTopWidget)),this.showSubpanels$=this.state$.pipe((0,v.map)(C=>C.showSubpanels)),this.mode$=this.state$.pipe((0,v.map)(C=>C.mode)),this.subpanelReload$=this.subpanelReloadSubject.asObservable();const x=(0,w.combineLatest)([this.record$,this.loading$]).pipe((0,v.map)(([C,A])=>(this.data={record:C,loading:A},this.data)));this.vm$=(0,w.combineLatest)([x,this.appData$,this.metadata$]).pipe((0,v.map)(([C,A,S])=>(this.vm={data:C,appData:A,metadata:S},this.vm))),this.subpanelsState=new w.BehaviorSubject({}),this.subpanels$=this.subpanelsState.asObservable(),this.viewContext$=this.record$.pipe((0,v.map)(()=>this.getViewContext()))}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState(Object.assign(Object.assign({},this.internalState),{widgets:e}))}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState(Object.assign(Object.assign({},this.internalState),{showSidebarWidgets:e}))}get showTopWidget(){return this.internalState.showTopWidget}set showTopWidget(e){this.updateState(Object.assign(Object.assign({},this.internalState),{showTopWidget:e}))}get showSubpanels(){return this.internalState.showTopWidget}set showSubpanels(e){this.updateState(Object.assign(Object.assign({},this.internalState),{showSubpanels:e}))}get params(){return this.internalState.params||{}}set params(e){this.updateState(Object.assign(Object.assign({},this.internalState),{params:e}))}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId(),record:this.getBaseRecord()}}getSubpanels(){return this.subpanels}destroy(){this.clear()}init(e,r,o="detail",a={}){return this.internalState.module=e,this.internalState.recordID=r,this.setMode(o),this.initSubpanels(e,r),this.calculateShowWidgets(),this.load().pipe((0,v.tap)(()=>{this.showTopWidget=!0,this.loadSubpanelStatistics(e),this.parseParams(a)}))}clear(){this.cache$=null,this.clearSubpanels(),this.subpanelsState.unsubscribe(),this.updateState((0,D.deepClone)(Xb))}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,w.of)({}))),(0,v.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1),this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!1})),("cb2b_pmsprofiles"===this.getModuleName().toLowerCase()||"opportunities"===this.getModuleName().toLowerCase())&&window.location.reload()}))}load(e=!0){return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,v.tap)(r=>{this.updateState(Object.assign(Object.assign({},this.internalState),{recordID:r.id,module:r.module,loading:!1}))}))}getSummaryTemplate(){return(((this.metadata||{}).recordView||{}).summaryTemplates||{})[this.getMode()]||""}parseParams(e={}){if(!e)return;const r=Object.assign({},this.internalState.params);Object.keys(e).forEach(o=>{(0,D.isVoid)(r[o])||(r[o]=e[o])}),this.params=e}loadSubpanelStatistics(e){const r=this.subpanelsState.value;if(!r)return;const o={};Object.keys(r).forEach(a=>{const s=r[a],l=s.statistics;if(!l||!Object.keys(l).length)return;if(!1===s.shouldBatchStatistic())return void s.loadAllStatistics().pipe((0,v.take)(1)).subscribe();const c=s.getAllStatisticQuery();Object.keys(c).forEach(f=>{const u=this.buildStatKey(a,f);o[u]=c[f]}),s.setAllStatisticsLoading(!0)}),this.statisticsBatch.fetch(e,o).pipe((0,v.take)(1)).subscribe(a=>{Object.keys(r).forEach(s=>{const l=r[s],c=l.getAllStatisticQuery();Object.keys(c).forEach(f=>{const u=this.buildStatKey(s,f),d=a[u];!d||l.setStatistics(f,d,!0)}),l.setAllStatisticsLoading(!1)})})}buildStatKey(e,r){return(e=e.replace(/_/g,"-"))+"-"+r.replace(/_/g,"-")}updateState(e){this.store.next(this.internalState=e)}initSubpanels(e,r){this.showSubpanels=!0,this.metadataStore.subPanelMetadata$.subscribe(o=>{this.clearSubpanels(),Object.keys(o).forEach(a=>{this.subpanels[a]=this.subpanelFactory.create(),this.subpanels[a].init(e,r,o[a],this.record$)}),this.subpanelsState.next(this.subpanels),Object.keys(this.subpanels).forEach(a=>{this.subpanelReloadSub.push(this.subpanels[a].recordList.records$.pipe((0,v.tap)(()=>{const l={};l[a]=!0,this.subpanelReloadSubject.next(l)})).subscribe())})})}clearSubpanels(){this.subpanels&&Object.keys(this.subpanels).forEach(e=>{this.subpanels[e].clear()}),this.subpanelReloadSub.length&&(this.subpanelReloadSub.forEach(e=>e.unsubscribe()),this.subpanelReloadSub=[]),this.subpanels={}}calculateShowWidgets(){var e;let r=!1;const a=this.getRecordViewMetadata().sidebarWidgets||[];a&&a.length>0&&(r=!0);const s=null!==(e=this.loadPreference(this.getModuleName(),"show-sidebar-widgets"))&&void 0!==e?e:null;this.showSidebarWidgets=null!==s?s:r,this.widgets=r}getRecordViewMetadata(){return(this.metadataStore.get()||{}).recordView||{}}getVardefs(){return this.getRecordViewMetadata().vardefs||{}}getViewFieldsObservable(){return this.metadataStore.recordViewMetadata$.pipe((0,v.map)(e=>{const r=[];return e.panels.forEach(o=>{o.rows.forEach(a=>{a.cols.forEach(s=>{r.push(s)})})}),r}))}getPreferenceKey(e){return"recordview-"+e}savePreference(e,r,o){this.preferences.setUi(e,this.getPreferenceKey(r),o)}loadPreference(e,r){return this.preferences.getUi(e,this.getPreferenceKey(r))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(xn),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Fr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(zu),t.\u0275\u0275inject(er),t.\u0275\u0275inject(Wu),t.\u0275\u0275inject(Hi),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Hu=(()=>{class n{constructor(e,r){this.recordViewStore=e,this.moduleNavigation=r,this.displayResponsiveTable=!1}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Lr),t.\u0275\u0275directiveInject(xn))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-status-bar"]],decls:4,vars:2,consts:[[1,"record-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"w-100"],[1,"col"],[1,"order-2"],[1,"row","mr-0"],[1,"col-md-4"]],template:function(e,r){1&e&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",0),t.\u0275\u0275template(2,FP,8,0,"ng-container",1),t.\u0275\u0275template(3,AP,4,0,"ng-template",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.displayResponsiveTable),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.displayResponsiveTable))},directives:[_.NgIf],encapsulation:2}),n})(),vl=(()=>{class n extends Pa{constructor(e){super(e),this.apollo=e}get(e,r,o,a){return super.get(e,r,o,a)}mapRecord(e){if(!e)return e;e.key=e.id||e.attributes&&e.attributes.id||"";const r=e.attributes&&e.attributes&&e.attributes.contents||null;if(r){const o=Object.assign({},e);return o.criteria=r,o}return e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})(),Yb=(()=>{class n extends zc{constructor(e,r,o,a,s,l,c,f){super(e,r,o,a,s,l),this.listGQL=e,this.configs=r,this.preferences=o,this.appState=a,this.language=s,this.message=l,this.auth=c,this.moduleNameMapper=f,this.moduleName="saved-search",this.filterFields={module:"search_module",user:"assigned_user_id"}}init(e){const r=super.init(this.moduleName,!1);return this.initCriteria(e),r}load(e=!0){return super.load(e)}getFilters(){return this.records}addFilter(e){let r=!0;const a=[];this.records.forEach(s=>{if(s.id===e.id)return a.push(e),void(r=!1);a.push(s)}),r&&a.push(e),this.updateState(Object.assign(Object.assign({},this.internalState),{records:a}))}removeFilter(e){if(!e||!e.id)return;const o=[];this.records.forEach(a=>{a.id!==e.id&&o.push(a)}),this.updateState(Object.assign(Object.assign({},this.internalState),{records:o}))}initCriteria(e){const r=this.criteria;r.filters[this.filterFields.module]={field:this.filterFields.module,operator:"=",values:[this.moduleNameMapper.toLegacy(e)]},r.filters[this.filterFields.user]={field:this.filterFields.user,operator:"=",values:[this.auth.getCurrentUser().id]},this.updateSearchCriteria(r,!1)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(vl),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(on))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),e0=(()=>{class n{constructor(e,r,o,a,s,l,c,f){this.listGQL=e,this.configs=r,this.preferences=o,this.appState=a,this.language=s,this.message=l,this.auth=c,this.moduleNameMapper=f}create(){return new Yb(this.listGQL,this.configs,this.preferences,this.appState,this.language,this.message,this.auth,this.moduleNameMapper)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(vl),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(on))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(vl),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(on))},token:n,providedIn:"root"}),n})(),In=(()=>{class n{constructor(e){this.modalService=e}showModal(e,r){const o=this.modalService.open(Ha);o.componentInstance.textKey=null!=e?e:"LBL_GENERIC_CONFIRMATION",o.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:a=>a.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:a=>{r(),a.close()}}]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(be.NgbModal))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(be.NgbModal))},token:n,providedIn:"root"}),n})();const Zu={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},t0={default:(0,D.deepClone)(Zu)},n0={module:"",widgets:!0,actionPanel:"",showSidebarWidgets:!1,recordPanelConfig:{},activeFilters:(0,D.deepClone)(t0),openFilter:(0,D.deepClone)(Zu)};let br=(()=>{class n extends Gu{constructor(e,r,o,a,s,l,c,f,u,d,p,h){super(e,r,o,a,s),this.appStateStore=e,this.languageStore=r,this.navigationStore=o,this.moduleNavigation=a,this.metadataStore=s,this.localStorage=l,this.message=c,this.listStoreFactory=f,this.modalService=u,this.filterListStoreFactory=d,this.confirmation=p,this.preferences=h,this.cache$=null,this.internalState=(0,D.deepClone)(n0),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.recordList=this.listStoreFactory.create(),this.columns$=s.listViewColumns$,this.lineActions$=s.listViewLineActions$,this.records$=this.recordList.records$,this.criteria$=this.recordList.criteria$,this.context$=this.recordList.criteria$.pipe((0,v.map)(()=>this.getViewContext())),this.sort$=this.recordList.sort$,this.pagination$=this.recordList.pagination$,this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$,this.loading$=this.recordList.loading$,this.moduleName$=this.state$.pipe((0,v.map)(g=>g.module),(0,v.distinctUntilChanged)()),this.widgets$=this.state$.pipe((0,v.map)(g=>g.widgets),(0,v.distinctUntilChanged)()),this.showSidebarWidgets$=this.state$.pipe((0,v.map)(g=>g.showSidebarWidgets)),this.displayFilters$=this.state$.pipe((0,v.map)(g=>"filters"===g.actionPanel),(0,v.distinctUntilChanged)()),this.actionPanel$=this.state$.pipe((0,v.map)(g=>g.actionPanel),(0,v.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,v.map)(g=>g.activeFilters),(0,v.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,v.map)(g=>g.openFilter),(0,v.distinctUntilChanged)());const m=(0,w.combineLatest)([this.records$,this.criteria$,this.pagination$,this.selection$,this.loading$]).pipe((0,v.map)(([g,x,C,A,S])=>(this.data={records:g,criteria:x,pagination:C,selection:A,loading:S},this.data)));this.vm$=(0,w.combineLatest)([m,this.appData$,this.metadata$]).pipe((0,v.map)(([g,x,C])=>(this.vm={data:g,appData:x,metadata:C},this.vm))),this.columns=new w.BehaviorSubject([]),this.columns$=this.columns.asObservable(),this.initDataUpdateState(),this.initDataSetUpdatedState(),this.filterList=this.filterListStoreFactory.create()}get actionPanel(){return this.internalState.actionPanel}get showFilters(){return"filters"===this.internalState.actionPanel}set showFilters(e){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:e?"filters":""}))}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState(Object.assign(Object.assign({},this.internalState),{widgets:e}))}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState(Object.assign(Object.assign({},this.internalState),{showSidebarWidgets:e}))}get recordPanelConfig(){return this.internalState.recordPanelConfig}isRecordPanelOpen(){return"recordPanel"===this.internalState.actionPanel}openRecordPanel(e){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:"recordPanel",recordPanelConfig:e}))}closeRecordPanel(){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:"",recordPanelConfig:{}}))}getModuleName(){return this.internalState.module}getViewContext(){const e={module:this.getModuleName()};return e.criteria=this.recordList.criteria,e.sort=this.recordList.sort,e}destroy(){this.clear(),this.subs.forEach(e=>e.unsubscribe())}get activeFilters(){return(0,D.deepClone)(this.internalState.activeFilters)}clear(){this.cache$=null,this.updateState((0,D.deepClone)(n0)),this.recordList.clear()}clearAuthBased(){this.clear(),this.recordList.clearAuthBased()}init(e){var r,o,a,s,l,c;return this.internalState.module=e,this.recordList.init(e,!1),this.filterList.init(e),this.filterList.load(!1).pipe((0,v.take)(1)).subscribe(),this.calculateShowWidgets(),this.recordList.sort={orderBy:null!==(a=null===(o=null===(r=null==this?void 0:this.metadata)||void 0===r?void 0:r.listView)||void 0===o?void 0:o.orderBy)&&void 0!==a?a:"",sortOrder:null!==(c=null===(l=null===(s=null==this?void 0:this.metadata)||void 0===s?void 0:s.listView)||void 0===l?void 0:l.sortOrder)&&void 0!==c?c:"NONE"},this.loadCurrentFilter(e),this.loadCurrentSort(e),this.loadCurrentDisplayedColumns(),this.load()}setOpenFilter(e){this.updateState(Object.assign(Object.assign({},this.internalState),{openFilter:(0,D.deepClone)(e)}))}setFilters(e,r=!0,o=null){var a,s;const c=e[Object.keys(e).shift()];if(this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,D.deepClone)(e),openFilter:(0,D.deepClone)(c)})),c.criteria){let f=null!==(a=c.criteria.orderBy)&&void 0!==a?a:"";const u=null!==(s=c.criteria.sortOrder)&&void 0!==s?s:"";let d=this.recordList.mapSortOrder(u);null!==o&&(f=o.orderBy,d=o.sortOrder),this.recordList.updateSorting(f,d,!1),this.updateSortLocalStorage()}this.updateSearchCriteria(r)}addSavedFilter(e){const r=Object.assign({},this.internalState),o=this.activeFilters;e.key&&o[e.key]&&(o[e.key]=e,r.activeFilters=o),r.openFilter=e,this.filterList.addFilter(e),this.updateState(r)}removeSavedFilter(e){if(!e||!e.key)return;this.filterList.removeFilter(e);const r=Object.assign({},this.internalState);r.openFilter&&r.openFilter.key===e.key&&this.resetFilters(!0)}resetFilters(e=!0){this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,D.deepClone)(t0),openFilter:(0,D.deepClone)(Zu)})),this.recordList.clearSort(),this.updateSortLocalStorage(),this.updateSearchCriteria(e)}updateSearchCriteria(e=!0){const r=Object.assign({},this.internalState.activeFilters),o=Object.keys(r).shift();this.recordList.updateSearchCriteria(r[o].criteria,e),this.updateFilterLocalStorage()}updateFilterLocalStorage(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}updateSortLocalStorage(){this.savePreference(this.internalState.module,"current-sort",this.recordList.sort)}updateDisplayedColumnsPreference(e){this.savePreference(this.internalState.module,"displayed-columns",e)}getDisplayedColumnsPreference(){const r=this.loadPreference(this.internalState.module,"displayed-columns");return(0,ie.isArray)(r)&&r&&r.length?r:null}triggerDataUpdate(){this.dataUpdateState.next(!0)}load(e=!0){const r=this.internalState.module;return this.savePreference(r,"current-filters",this.internalState.activeFilters),this.savePreference(r,"current-sort",this.recordList.sort),this.recordList.load(e)}updateState(e){this.store.next(this.internalState=e)}openColumnChooserDialog(){const e=this.modalService.open(w_,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"column-chooser-modal"}),r=this.columns.getValue().filter(function(a){return!a.hasOwnProperty("default")||a.hasOwnProperty("default")&&!0===a.default}),o=this.columns.getValue().filter(function(a){return a.hasOwnProperty("default")&&!1===a.default});e.componentInstance.displayed=r,e.componentInstance.hidden=o,e.result.then(a=>{if(!a.displayed||!a.hidden)return;let s=[];const l=a.displayed,c=a.hidden;l.forEach(function(u){u.default=!0}),c.forEach(function(u){u.default=!1}),s.push(...l,...c),this.columns.next(s);const f=l.map(u=>u.name);this.updateDisplayedColumnsPreference(f)})}calculateShowWidgets(){var e;let r=!1;const s=((this.metadataStore.get()||{}).listView||{}).sidebarWidgets||[];s&&s.length>0&&(r=!0);const l=null!==(e=this.loadPreference(this.getModuleName(),"show-sidebar-widgets"))&&void 0!==e?e:null;this.showSidebarWidgets=null!==l?l:r,this.widgets=r}getPreferenceKey(e){return"listview-"+e}savePreference(e,r,o){this.preferences.setUi(e,this.getPreferenceKey(r),o)}loadPreference(e,r){return this.preferences.getUi(e,this.getPreferenceKey(r))}loadCurrentFilter(e){var r;const o=null!==(r=this.loadPreference(e,"current-filters"))&&void 0!==r?r:{};if(!o||(0,D.emptyObject)(o))return;let a=this.loadPreference(e,"current-sort");!a&&(0,D.emptyObject)(a)&&(a=null),this.setFilters(o,!1,a)}loadCurrentSort(e){const r=this.loadPreference(e,"current-sort");!r||(0,D.emptyObject)(r)||(this.recordList.sort=r)}loadCurrentDisplayedColumns(){this.metadataStore.listViewColumns$.pipe((0,v.take)(1)).subscribe(e=>{const r=this.getDisplayedColumnsPreference();if(!r||!e)return void this.columns.next(e);const o={};r.forEach(c=>{o[c]=!0});const a={},s=[];e.forEach(c=>{var f;c.default=null!==(f=o[c.name])&&void 0!==f&&f,c.default?a[c.name]=c:s.push(c)});const l=r.filter(c=>!!a[c]).map(c=>a[c]);this.columns.next([...l,...s])})}initDataUpdateState(){this.dataUpdateState=new w.BehaviorSubject(!0),this.dataUpdate$=this.dataUpdateState.asObservable()}initDataSetUpdatedState(){this.dataSetUpdate$=(0,w.combineLatest)([this.criteria$,this.dataUpdate$]).pipe((0,v.map)(()=>!0))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(xn),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Fr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(lr),t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(e0),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),r0=(()=>{class n{constructor(e,r,o,a){this.listStore=e,this.actionHandler=r,this.screenSize=o,this.systemConfigs=a,this.configState=new w.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.vm$=(0,w.combineLatest)([this.screenSize.screenSize$]).pipe((0,v.map)(([s])=>(s&&(this.screen=s),this.configState.next(this.getButtonGroupConfig()),{screenSize:s}))),this.screen=Xn.Medium,this.defaultBreakpoint=3}ngOnInit(){this.configState.next(this.getButtonGroupConfig())}getButtonGroupConfig(){const e=this.actions,r={buttonKlass:["action-button"],dropdownLabel:this.listStore.appStrings.LBL_MORE||"",buttons:[],dropdownOptions:{placement:["bottom-right"]},breakpoint:this.getBreakpoint()};return e.forEach(o=>{const a=this.getButtonConfig(o);a&&a.klass&&r.buttons.push(a)}),r}getBreakpoint(){const e=this.systemConfigs&&this.systemConfigs.getConfigValue("listview_actions_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}get actions(){return this.listStore.vm.appData.module&&this.listStore.vm.appData.module.menu?this.listStore.vm.appData.module.menu.filter(e=>!("List"===e.name||"View"===e.name)):[]}getButtonConfig(e){if(!this.listStore.vm.appData.appState.module)return{};if(!this.listStore.vm.appData.language)return{};let a="";return e.actionLabelKey&&(a=e.actionLabelKey),{klass:"action-button",label:this.actionHandler.getActionLabel(this.listStore.vm.appData.appState.module,e,this.listStore.vm.appData.language,a),onClick:()=>{this.actionHandler.navigate(e).then()}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(br),t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(lo),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-action-menu"]],decls:2,vars:3,consts:[["class","list-view-actions float-right",4,"ngIf"],[1,"list-view-actions","float-right"],[3,"config$"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,NP,2,1,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,co],pipes:[_.AsyncPipe],encapsulation:2}),n})(),qu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,uo,Sn,O.AngularSvgIconModule,Vi]]}),n})(),i0=(()=>{class n{constructor(e,r,o,a){this.listStore=e,this.modalService=r,this.screenSize=o,this.systemConfigStore=a,this.configState=new w.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.vm$=(0,w.combineLatest)([this.listStore.widgets$,this.listStore.displayFilters$,this.listStore.criteria$,this.screenSize.screenSize$,this.listStore.showSidebarWidgets$,this.listStore.filterList.records$]).pipe((0,v.map)(([s,l,c,f,u,d])=>(f&&(this.screen=f),this.configState.next(this.getButtonGroupConfig()),{widgets:s,displayFilters:l,criteria:c,screenSize:f,showSidebarWidgets:u,savedFilters:d}))),this.screen=Xn.Medium,this.defaultBreakpoint=5}ngOnInit(){this.configState.next(this.getButtonGroupConfig())}getButtonGroupConfig(){const e=[{show:()=>this.listStore.filterList.getFilters()&&this.listStore.filterList.getFilters().length>=1,button:this.getMyFiltersButton()},{button:this.getFilterButton()},{show:()=>this.isAnyFilterApplied(),button:this.getClearButton()},{button:this.getColumnChooserButton()},{show:()=>this.listStore.widgets,button:this.getChartsButton()}],r={buttonKlass:["settings-button"],dropdownLabel:this.listStore.appStrings.LBL_OPTIONS||"",breakpoint:this.getBreakpoint(),dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary"]},buttons:[]};return e.forEach(o=>{o.show?o.show()&&r.buttons.push(o.button):r.buttons.push(o.button)}),r}getFilters(){var e,r,o,a;return null!==(a=null===(o=null===(r=null===(e=null==this?void 0:this.listStore)||void 0===e?void 0:e.recordList)||void 0===r?void 0:r.criteria)||void 0===o?void 0:o.filters)&&void 0!==a?a:{}}getCurrentCriteria(){var e,r,o;return null!==(o=null===(r=null===(e=null==this?void 0:this.listStore)||void 0===e?void 0:e.recordList)||void 0===r?void 0:r.criteria)&&void 0!==o?o:{}}hasActiveFilter(){var e;const r=this.listStore.activeFilters;if(!r)return!1;const o=null!==(e=Object.keys(r))&&void 0!==e?e:[];if(!o||!o.length)return!1;if(o.length>1)return!0;const a=r[o[0]];return a.key&&""!==a.key&&"default"!==a.key}areAllCurrentCriteriaFilterEmpty(){var e;return Object.keys(null!==(e=this.getFilters())&&void 0!==e?e:{}).every(r=>""===this.getFilters()[r].operator)}isAnyFilterApplied(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}getBreakpoint(){const e=this.systemConfigStore.getConfigValue("listview_settings_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}getFilterButton(){const e={label:this.listStore.appStrings.LBL_FILTER||"",klass:{"filter-settings-button":!0,active:this.isAnyFilterApplied()},onClick:()=>{this.listStore.showFilters=!this.listStore.showFilters}};return this.isAnyFilterApplied()&&(e.icon="filter"),e}getMyFiltersButton(){const e=this.listStore.filterList.getFilters(),r={label:this.listStore.appStrings.LBL_SAVED_FILTER_SHORTCUT||"",klass:["dropdown-toggle"],wrapperKlass:["filter-action-group"],items:[]},o=this.listStore.activeFilters;let a=!1;return e.forEach(s=>{const l=Object.keys(o).some(f=>f===s.key);a=a||l;const c={label:s.attributes.name,onClick:()=>{if(this.listStore.showFilters=!1,l)this.listStore.resetFilters();else{this.listStore.setOpenFilter(s);const f={};f[s.key]=s,this.listStore.setFilters(f)}}};l&&(c.icon="filter",c.iconKlass="small",c.klass=["active"]),r.items.push(c)}),a&&(r.klass=["dropdown-toggle","active"]),r}getClearButton(){return{label:this.listStore.appStrings.LBL_CLEAR_FILTER||"",onClick:()=>{this.listStore.showFilters=!1,this.listStore.resetFilters()}}}getChartsButton(){return{label:this.listStore.appStrings.LBL_INSIGHTS||"",klass:{active:this.listStore.showSidebarWidgets},icon:"pie",onClick:()=>{this.listStore.showSidebarWidgets=!this.listStore.showSidebarWidgets}}}getDisplayAsButton(){return{label:"Display As",klass:{},items:[]}}getColumnChooserButton(){return{label:this.listStore.appStrings.LBL_COLUMNS||"",klass:{"column-chooser-button":!0},icon:"column_chooser",onClick:()=>{this.listStore.openColumnChooserDialog()}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(br),t.\u0275\u0275directiveInject(be.NgbModal),t.\u0275\u0275directiveInject(lo),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-settings-menu"]],decls:2,vars:3,consts:[["class","list-view-settings float-right",4,"ngIf"],[1,"list-view-settings","float-right"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,LP,2,1,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,co],pipes:[_.AsyncPipe],encapsulation:2}),n})(),Ju=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,E_,En,Sn,Ui,be.NgbModule,Vi]]}),n})(),Qu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Za,qu,Ju,O.AngularSvgIconModule]]}),n})(),_l=(()=>{class n{showHeader(){return this.config.showHeader}showFooter(){return this.config.showFooter}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-table"]],inputs:{config:"config"},decls:4,vars:6,consts:[[3,"selection","bulkActions","pagination",4,"ngIf"],[3,"config"],[3,"selection","bulkActions","pagination"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,RP,1,3,"scrm-table-header",0),t.\u0275\u0275element(2,"scrm-table-body",1),t.\u0275\u0275template(3,OP,1,3,"scrm-table-footer",0),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275classMap(r.config&&r.config.klass||""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.showHeader()),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.config),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.showFooter()))},directives:function(){return[_.NgIf,s0,o0,c0]},encapsulation:2}),n})(),o0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-table-header"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination"},decls:5,vars:2,consts:[[1,"list-view-tableactions","table-header"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"state",4,"ngIf"],[3,"selectionSource","actionSource"],[3,"state"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275template(2,jP,1,2,"scrm-bulk-action-menu",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275template(4,BP,1,1,"scrm-pagination",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.selection&&r.bulkActions),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.pagination))},directives:[_.NgIf,Mc,Pu],encapsulation:2}),n})(),a0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,ku,Cc,O.AngularSvgIconModule]]}),n})(),s0=(()=>{class n{constructor(e,r){this.fieldManager=e,this.loadingBufferFactory=r,this.maxColumns=4,this.subs=[],this.loadingBuffer=this.loadingBufferFactory.create("table_loading_display_delay")}ngOnInit(){const e=this.config.selection$||(0,w.of)(null).pipe((0,v.shareReplay)(1));let r=this.initLoading();this.vm$=(0,w.combineLatest)([this.config.columns,e,this.config.maxColumns$,this.config.dataSource.connect(null),r]).pipe((0,v.map)(([o,a,s,l,c])=>{const f=[];a&&f.push("checkbox"),this.maxColumns=s;const u=this.buildDisplayColumns(o);return f.push(...u),f.push("line-actions"),{columns:o,selection:a,selected:a&&a.selected||{},selectionStatus:a&&a.status||D.SelectionStatus.NONE,displayedColumns:f,records:l||[],loading:c}}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}toggleSelection(e){this.config.toggleRecordSelection(e)}allSelected(e){return e===D.SelectionStatus.ALL}buildDisplayColumns(e){let r=0,o=!1;const a=[],s=e.filter(function(l){return!l.hasOwnProperty("default")||l.hasOwnProperty("default")&&!0===l.default});for(;r<this.maxColumns&&r<s.length;)a.push(s[r].name),o=o||s[r].link,r++;if(!o&&this.maxColumns<s.length)for(r=this.maxColumns;r<s.length;r++)if(s[r].link){a.splice(-1,1),a.push(s[r].name);break}return a}getFieldSort(e){return{getSortDirection:()=>this.config.sort$.pipe((0,v.map)(r=>{let o=D.SortDirection.NONE;return r.orderBy===e.name&&(o=r.sortOrder),o})),changeSortDirection:r=>{this.config.updateSorting(e.name,r)}}}getField(e,r){return e&&r?this.fieldManager.addField(r,e):null}initLoading(){let e=(0,w.of)(!1).pipe((0,v.shareReplay)(1));return this.config.loading$&&(this.subs.push(this.config.loading$.subscribe(r=>{this.loadingBuffer.updateLoading(r)})),e=this.loadingBuffer.loading$),e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Yn),t.\u0275\u0275directiveInject(Ns))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-table-body"]],inputs:{config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"position-relative","d-flex","flex-column"],["cdk-table","","aria-describedby","table-body",1,"list-view-table","striped-table","table",3,"dataSource"],["cdkColumnDef","checkbox",4,"ngIf"],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["cdkColumnDef","line-actions"],["cdk-header-cell","","scope","col","class","primary-table-header",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],[3,"m-5",4,"ngIf"],["cdkColumnDef","checkbox"],["cdk-header-cell","","scope","col",1,"primary-table-header"],["cdk-cell",""],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","disabled","change"],[1,"checkmark"],[3,"cdkColumnDef"],[3,"labelKey","module"],[3,"state",4,"ngIf"],[3,"state"],[3,"mode","type","field","record"],[3,"config","record",4,"ngIf"],[3,"config","record"],["cdk-header-row",""],["cdk-row",""],[1,"lead","text-center","pt-3"],["labelKey","MSG_LIST_VIEW_NO_RESULTS_BASIC"],[3,"overlay"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,XP,12,7,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,Hr.CdkTable,_.NgForOf,Hr.CdkColumnDef,Hr.CdkHeaderCellDef,Hr.CdkCellDef,Hr.CdkHeaderRowDef,Hr.CdkRowDef,Hr.CdkHeaderCell,Hr.CdkCell,gn,qb,yi,Vb,Hr.CdkHeaderRow,Hr.CdkRow,oa],pipes:[_.AsyncPipe],encapsulation:2}),n})(),l0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,O.AngularSvgIconModule,Hr.CdkTableModule,cr,Jb,$b,aa,dn]]}),n})(),c0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-table-footer"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination"},decls:5,vars:2,consts:[[1,"list-view-tableactions","table-footer"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"state",4,"ngIf"],[3,"selectionSource","actionSource"],[3,"state"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275template(2,YP,1,2,"scrm-bulk-action-menu",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275template(4,e3,1,1,"scrm-pagination",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.selection&&r.bulkActions),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.pagination))},directives:[_.NgIf,Mc,Pu],encapsulation:2}),n})(),u0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,ku,Cc,O.AngularSvgIconModule]]}),n})(),yl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,a0,l0,u0,O.AngularSvgIconModule]]}),n})();class Xu extends D.ActionHandler{checkRecordAccess(i,e=[]){var r,o,a;const l=null!==(o=(null!==(r=i.record)&&void 0!==r?r:{}).acls)&&void 0!==o?o:[];if(!l||!l.length)return!1;const c=null!==(a=i.action)&&void 0!==a?a:null;return this.checkAccess(c,l,e)}}let Yu=(()=>{class n extends Xu{constructor(e,r){super(),this.moduleNameMapper=e,this.router=r,this.key="create",this.modes=["list"]}run(e,r=null){const o=r.params.create||{},a={};a.return_module=o.legacyModuleName,a.return_action=o.returnAction,a.return_id=e.record.id,a[o.mapping.moduleName]=o.legacyModuleName,a[o.mapping.name]=e.record.attributes.name,a[o.mapping.id]=e.record.id,this.router.navigate(["/"+o.module+"/"+o.action],{queryParams:a}).then()}shouldDisplay(e){return!0}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(on),t.\u0275\u0275inject(z.Router))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(on),t.\u0275\u0275inject(z.Router))},token:n,providedIn:"root"}),n})(),ed=(()=>{class n extends Xu{constructor(){super(),this.key="async-process",this.modes=D.ALL_VIEW_MODES}run(e){}shouldDisplay(e){var r,o;const a=null!==(o=null===(r=null==e?void 0:e.action)||void 0===r?void 0:r.acl)&&void 0!==o?o:[];return!a.length||this.checkRecordAccess(e,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),bl=(()=>{class n extends vi{constructor(e,r){super(),this.createRelated=e,this.async=r,e.modes.forEach(o=>this.actions[o][e.key]=e),r.modes.forEach(o=>this.actions[o][r.key]=r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Yu),t.\u0275\u0275inject(ed))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Yu),t.\u0275\u0275inject(ed))},token:n,providedIn:"root"}),n})();class d0{constructor(i,e,r,o,a,s,l){this.actionManager=i,this.asyncActionService=e,this.message=r,this.confirmation=o,this.language=a,this.selectModalService=s,this.metadata=l,this.defaultActions={detail:[],list:[],edit:[],create:[],massupdate:[]}}runAction(i,e=null){const r=i&&i.params||{},s=i.params&&i.params.selectModal,l=s&&s.module;r.displayConfirmation?this.confirmation.showModal(r.confirmationLabel||"",()=>{l?this.showSelectModal(s.module,i,e):this.callAction(i,e)}):l?this.showSelectModal(s.module,i,e):this.callAction(i,e)}showSelectModal(i,e,r=null){this.selectModalService.showSelectModal(i,o=>{if(o){const l=(0,B._T)(o,["fields","formGroup"]);e.params.modalRecord=l}this.callAction(e,r)})}getActionName(i){return`${i.key}`}parseModeActions(i,e,r=null){if(!i)return[];const o={list:[],detail:[],edit:[],create:[],massupdate:[]};i&&i.length&&i.forEach(s=>{!s.modes||!s.modes.length||s.modes.forEach(l=>{!o[l]&&!s.asyncProcess||o[l].push(s)})}),o.detail=o.detail.concat(this.defaultActions.detail),o.list=o.list.concat(this.defaultActions.list),o.edit=o.edit.concat(this.defaultActions.edit),o.create=o.create.concat(this.defaultActions.create),o.massupdate=o.massupdate.concat(this.defaultActions.massupdate);const a=[];return o[e].forEach(s=>{if(this.actionManager.getHandler(s,e)){const u=this.actionManager.getHandler(s,e),d=this.buildActionData(s,r);if(!this.shouldDisplay(u,d))return;s.status=u.getStatus(d)||""}const f=this.language.getFieldLabel(s.labelKey,r&&r.module||"");a.push(Object.assign(Object.assign({},s),{label:f}))}),a}shouldDisplay(i,e){return i&&i.shouldDisplay(e)}callAction(i,e=null){i.asyncProcess?this.runAsyncAction(i,e):this.runFrontEndAction(i,e)}runAsyncAction(i,e=null){const r=this.getActionName(i),o=this.getModuleName(e);this.message.removeMessages();const a=this.buildActionInput(i,r,o,e);this.asyncActionService.run(r,a).pipe((0,v.take)(1)).subscribe(s=>{this.afterAsyncAction(r,o,a,s,i,e)})}afterAsyncAction(i,e,r,o,a,s){this.shouldReload(o)&&this.reload(a,o,s),this.reloadMetadata(e,a,o,s)}reloadMetadata(i,e,r,o){const a=[];this.shouldReloadRecentlyViewed(r)&&a.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(r)&&a.push(this.metadata.typeKeys.favorites),a&&a.length&&this.metadata.reloadModuleMetadata(i,a,!1).pipe((0,v.take)(1)).subscribe()}shouldReloadRecentlyViewed(i){return!(!i.data||!i.data.reloadRecentlyViewed)}shouldReloadFavorites(i){return!(!i.data||!i.data.reloadFavorites)}shouldReload(i){return!(!i.data||!i.data.reload)}runFrontEndAction(i,e=null){const r=this.buildActionData(i,e);this.actionManager.run(i,this.getMode(),r)}}let Pn=(()=>{class n{constructor(e,r,o){this.languageStore=e,this.message=r,this.modalService=o}showSelectModal(e,r=null){const o=this.modalService.open(ka,{size:"xl",scrollable:!0});o.componentInstance.module=e,o.result.then(a=>{if(!a||!a.selection||!a.selection.selected)return;const s=this.getSelectedRecord(a);if(s.id)null!==r&&r(s);else{let l=this.languageStore.getFieldLabel("ERROR_NO_RECORD");this.message.addDangerMessage(l)}})}getSelectedRecord(e){let r="";Object.keys(e.selection.selected).some(a=>(r=a,!0));let o=null;return e.records.some(a=>{if(a&&a.id===r)return o=a,!0}),o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(it),t.\u0275\u0275inject(be.NgbModal))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(it),t.\u0275\u0275inject(be.NgbModal))},token:n,providedIn:"root"}),n})(),Zi=(()=>{class n extends d0{constructor(e,r,o,a,s,l,c){super(e,r,o,a,s,l,c),this.actionManager=e,this.asyncActionService=r,this.message=o,this.confirmation=a,this.language=s,this.selectModalService=l,this.metadata=c}getActionName(e){return`record-${e.key}`}buildActionInput(e,r,o,a=null){return{action:r,module:o,id:a&&a.record&&a.record.id||"",params:e&&e.params||[]}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(void 0),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),f0=(()=>{class n extends Zi{constructor(e,r,o,a,s,l,c){super(e,r,o,a,s,l,c),this.actionManager=e,this.asyncActionService=r,this.message=o,this.confirmation=a,this.language=s,this.selectModalService=l,this.metadata=c}buildActionData(e,r){return{record:r&&r.record||null,action:e}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(bl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),F4=(()=>{class n{constructor(e){this.http=e,this.model=null}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ii.HttpClient))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-user-action-menu-ui"]],decls:5,vars:3,template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1," user-action-menu works!\n"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"pre"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"json"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,1,r.model)))},pipes:[_.JsonPipe],encapsulation:2}),n})(),A4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,O.AngularSvgIconModule]]}),n})(),p0=(()=>{class n{constructor(e,r){this.metadata=e,this.processService=r}build(e,r){return(0,D.deepClone)({module:"Favorite",type:"Favorite",attributes:{parent_id:r,parent_type:e}})}add(e,r){this.update(e,r,"add")}remove(e,r){this.update(e,r,"remove")}update(e,r,o){const s={favorite:r,action:o};setTimeout(()=>{this.processService.submit("update-favorite",s).pipe((0,v.take)(1)).subscribe(l=>{var c,f;const u=null!==(f=null===(c=null==l?void 0:l.data)||void 0===c?void 0:c.favorite)&&void 0!==f?f:null;null!==u?this.addFavoriteToMetadata(u,e):this.removeFavoriteFromMetadata(e,r)})},100)}addFavoriteToMetadata(e,r){var o,a,s,l,c,f;const u={id:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:"",module:null!==(a=null==e?void 0:e.module)&&void 0!==a?a:"",attributes:Object.assign({},null!==(s=null==e?void 0:e.attributes)&&void 0!==s?s:{})},d=null!==(c=null===(l=null==e?void 0:e.attributes)||void 0===l?void 0:l.parent_id)&&void 0!==c?c:"",p=this.metadata.getModuleMeta(r),h=null!==(f=null==p?void 0:p.favorites)&&void 0!==f?f:null;if(h){let m=h.filter(g=>{var x,C;return(null!==(C=null===(x=null==g?void 0:g.attributes)||void 0===x?void 0:x.parent_id)&&void 0!==C?C:"")!==d});m.unshift(u),p.favorites=m}this.metadata.setModuleMetadata(r,p)}removeFavoriteFromMetadata(e,r){var o,a,s;const l=this.metadata.getModuleMeta(e),c=null!==(o=null==l?void 0:l.favorites)&&void 0!==o?o:null,f=null!==(s=null===(a=null==r?void 0:r.attributes)||void 0===a?void 0:a.parent_id)&&void 0!==s?s:null;!c||!c.length||!f||(l.favorites=c.filter(u=>{var d,p;return(null!==(p=null===(d=null==u?void 0:u.attributes)||void 0===d?void 0:d.parent_id)&&void 0!==p?p:"")!==f}),this.metadata.setModuleMetadata(e,l))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ar))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ar))},token:n,providedIn:"root"}),n})(),m0=(()=>{class n{constructor(){this.buffer=new w.Subject,this.buffer$=this.buffer.asObservable(),this.enabled=!0,this.subs=[],this.debounceTime=1e3}init(e=1e3){this.debounceTime=e,this.subs.push(this.buffer$.pipe((0,v.debounceTime)(this.debounceTime)).subscribe(()=>{this.enabled=!0}))}destroy(){this.subs.forEach(e=>e.unsubscribe())}debounce(e){!e||!this.enabled||(this.enabled=!1,e(),this.buffer.next(!0))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),h0=(()=>{class n{constructor(e){this.handler=e,this.favorite=!1}ngOnInit(){var e,r;!this.record||(this.debounceService=new m0,this.debounceService.init(),this.favorite=null!==(r=null===(e=null==this?void 0:this.record)||void 0===e?void 0:e.favorite)&&void 0!==r&&r,this.addButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-off"],onClick:()=>{this.debounceService.debounce(()=>{this.add()})},icon:"star"},this.removeButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-on"],onClick:()=>{this.debounceService.debounce(()=>{this.remove()})},icon:"star"})}ngOnDestroy(){this.debounceService.destroy()}add(){this.record.favorite=!0,this.favorite=!0;const e=this.handler.build(this.record.module,this.record.id);this.handler.add(this.record.module,e)}remove(){this.record.favorite=!1,this.favorite=!1;const e=this.handler.build(this.record.module,this.record.id);this.handler.remove(this.record.module,e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(p0))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-favorite-toggle"]],inputs:{record:"record"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"config"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,t3,2,1,"ng-container",0),t.\u0275\u0275template(1,n3,2,1,"ng-container",0)),2&e&&(t.\u0275\u0275property("ngIf",!r.favorite),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.favorite))},directives:[_.NgIf,ir],encapsulation:2}),n})(),g0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn]]}),n})();class td extends D.ActionHandler{}let nd=(()=>{class n extends td{constructor(e){super(),this.message=e,this.key="save",this.modes=["edit"]}run(e){e.store.validate().pipe((0,v.take)(1)).subscribe(r=>{r?e.store.save().pipe((0,v.take)(1)).subscribe(o=>{e.listFilterStore.config.addSavedFilter(e.store.recordStore.extractBaseRecord(o)),e.listFilterStore.applyFilter(),this.message.addSuccessMessageByKey("LBL_SAVED_FILTER_SAVED")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it))},token:n,providedIn:"root"}),n})(),rd=(()=>{class n extends td{constructor(e,r){super(),this.message=e,this.asyncActionService=r,this.key="delete",this.modes=["edit","detail"]}run(e){const r=`record-${this.key}`,o=e.store.getBaseRecord()||{};o.id?(this.message.removeMessages(),this.asyncActionService.run(r,{action:r,module:o.module,id:o.id},"noop").pipe((0,v.take)(1)).subscribe(()=>{e.listFilterStore.config.removeSavedFilter(o)})):this.message.addWarningMessageByKey("LBL_FILTER_ID_NOT_DEFINED")}shouldDisplay(e){const r=e&&e.store;return!!(r&&r.recordStore.getBaseRecord()||{}).id}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(tn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(tn))},token:n,providedIn:"root"}),n})(),Ml=(()=>{class n extends vi{constructor(e,r){super(),e.modes.forEach(o=>this.actions[o][e.key]=e),r.modes.forEach(o=>this.actions[o][r.key]=r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(nd),t.\u0275\u0275inject(rd))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(nd),t.\u0275\u0275inject(rd))},token:n,providedIn:"root"}),n})();const v0={id:"",type:"",module:"",attributes:{}};class _0 extends Ku{constructor(i,e,r,o,a,s,l,c){super(i,e,r,o,a,s),this.definitions$=i,this.recordSaveGQL=e,this.recordFetchGQL=r,this.message=o,this.recordManager=a,this.recordMappers=s,this.fieldManager=l,this.language=c,this.internalState=(0,D.deepClone)(v0),this.stagingState=(0,D.deepClone)(v0),this.store=new w.BehaviorSubject(this.internalState),this.staging=new w.BehaviorSubject(this.stagingState),this.searchFields={},this.listColumns=[],this.state$=this.store.asObservable().pipe((0,v.tap)(f=>{this.updateStaging(f)})),this.staging$=this.staging.asObservable()}getSearchFields(){return this.searchFields}setSearchFields(i){this.searchFields=i}getListColumns(){return this.listColumns}setListColumns(i){this.listColumns=i}getBaseRecord(){return this.stagingState?(this.mapStagingFields(),(0,D.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,key:this.stagingState.key,searchModule:this.stagingState.searchModule,criteria:this.stagingState.criteria,attributes:this.stagingState.attributes})):null}extractBaseRecord(i){var e;if(!i)return null;let r=null!==(e=i.criteria)&&void 0!==e?e:{};return Array.isArray(r)&&!r.length&&(r={}),(0,D.deepClone)({id:i.id,type:i.type,module:i.module,key:i.key,searchModule:i.searchModule,criteria:r,attributes:i.attributes})}initRecord(i){var e,r,o;i.attributes=i.attributes||{},i.attributes.search_module=i.searchModule;const a=null!==(o=null===(r=null===(e=null==i?void 0:i.attributes)||void 0===e?void 0:e.contents)||void 0===r?void 0:r.filters)&&void 0!==o?o:{};i.attributes.contents=i.attributes.contents||{filters:{}},i.attributes.contents.filters=Array.isArray(a)&&!a.length?{}:a,i.criteria=this.getCriteria(i),this.initCriteriaFields(i,this.getSearchFields()),i.module&&this.definitions&&this.definitions.length>0&&(i.fields=this.recordManager.initFields(i,this.definitions)),this.initOrderByOptions(i)}initOrderByOptions(i){if(!i.fields||!i.fields.orderBy)return;i.fields.orderBy.metadata=i.fields.orderBy.metadata||{};const e=[];this.getListColumns().forEach(r=>{if(!r.default||!0!==r.default)return;const a=this.language.getFieldLabel(r.label||r.fieldDefinition.vname||"",i.searchModule);e.push({value:r.fieldDefinition.name||r.name,label:a})}),i.fields.orderBy.metadata.options$=(0,w.of)(e).pipe((0,v.shareReplay)())}getCriteria(i){return i&&i.criteria?i.criteria.filters?Array.isArray(i.criteria.filters)&&!i.criteria.filters.length?Object.assign(Object.assign({},i.criteria),{filters:{}}):(0,D.deepClone)(i.criteria):Object.assign(Object.assign({},i.criteria),{filters:{}}):{filters:{}}}initCriteriaFields(i,e){i.criteriaFields=i.criteriaFields||{},i.criteriaFormGroup||(i.criteriaFormGroup=new y.FormGroup({})),e&&Object.keys(e).forEach(r=>{this.buildField(i,e[r])})}buildField(i,e){const o=e.type,a={name:e.name,label:e.label,type:o,fieldDefinition:{}};e.fieldDefinition&&(a.fieldDefinition=e.fieldDefinition),("bool"===o||"boolean"===o)&&(a.fieldDefinition.options="dom_int_bool"),this.fieldManager.addFilterField(i,a,this.language)}}let id=(()=>{class n{constructor(e,r,o,a,s,l,c,f){this.recordFetchGQL=e,this.recordSaveGQL=r,this.message=o,this.recordManager=a,this.recordMappers=s,this.baseMapper=l,this.fieldManager=c,this.language=f,s.register("default",l.getKey(),l)}create(e){return new _0(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers,this.fieldManager,this.language)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(D.RecordMapperRegistry),t.\u0275\u0275inject(bo),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Ke))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(D.RecordMapperRegistry),t.\u0275\u0275inject(bo),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Ke))},token:n,providedIn:"root"}),n})();const y0={module:"",searchModule:"",recordID:"",loading:!1,mode:"detail"};let od=(()=>{class n{constructor(e,r,o,a,s,l){this.appStateStore=e,this.meta=r,this.message=o,this.fieldManager=a,this.language=s,this.savedFilterStoreFactory=l,this.cache$=null,this.internalState=(0,D.deepClone)(y0),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.metadataLoadingState=new w.BehaviorSubject(!1),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.meta$=this.meta.getMetadata("saved-search",["recordView"]).pipe((0,v.tap)(()=>this.metadataLoadingState.next(!1)),(0,v.map)(c=>c.recordView)),this.recordStore=l.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)(),(0,v.map)(c=>c)),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)(),(0,v.map)(c=>c)),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading)),this.mode$=this.state$.pipe((0,v.map)(c=>c.mode)),this.vm$=(0,w.combineLatest)([this.stagingRecord$,this.mode$]).pipe((0,v.map)(([c,f])=>(this.vm={record:c,mode:f},this.vm)))}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}destroy(){this.clear()}init(e,r="detail"){this.internalState.module="saved-search",this.internalState.recordID=e,this.setMode(r),this.metadataLoadingState.next(!0);const o={$meta:this.meta$,record:this.load()};return(0,w.forkJoin)(o).pipe((0,v.map)(({record:l})=>l))}initRecord(e,r,o,a,s="detail"){this.updateState(Object.assign(Object.assign({},this.internalState),{recordID:r.id,module:"saved-search",searchModule:e,mode:s})),this.metadataLoadingState.next(!0),this.meta$.pipe((0,v.take)(1),(0,v.tap)(()=>{this.metadataLoadingState.next(!1),this.initStaging(e,r,o,a)})).subscribe()}initStaging(e,r,o,a){const s=(0,D.deepClone)(this.recordStore.extractBaseRecord(r));s.searchModule=e,this.recordStore.setSearchFields(o),this.recordStore.setListColumns(a),this.recordStore.setStaging(s)}clear(){this.cache$=null,this.updateState((0,D.deepClone)(y0)),this.metadataLoadingState.unsubscribe(),this.metadataLoadingState=null,this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,w.of)({}))),(0,v.finalize)(()=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1)}))}validate(){return(0,w.forkJoin)({fields:this.recordStore.validate(),criteria:this.validateCriteria()}).pipe((0,v.map)(({fields:e,criteria:r})=>e&&r))}validateCriteria(){const r=this.recordStore.getStaging().criteriaFormGroup;return r.markAllAsTouched(),r.statusChanges.pipe((0,v.startWith)(r.status),(0,v.filter)(o=>"PENDING"!==o),(0,v.take)(1),(0,v.map)(o=>"VALID"===o))}load(e=!0){return this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,v.tap)(r=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!1),this.updateState(Object.assign(Object.assign({},this.internalState),{recordID:r.id,module:r.module}))}))}getViewFieldsKeys$(){return this.meta$.pipe((0,v.map)(e=>{const r=[];return e.panels.forEach(o=>{o.rows.forEach(a=>{a.cols.forEach(s=>{r.push(s.name)})})}),r}))}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>{const r=[];return e.panels.forEach(o=>{o.rows.forEach(a=>{a.cols.forEach(s=>{r.push(s)})})}),r}))}updateState(e){this.store.next(this.internalState=e)}getMetadata(){return(this.meta.get()||{}).recordView||{}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(At),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(id))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),ad=(()=>{class n extends Xr{constructor(e){super(e),this.apollo=e}save(e){return super.save(e)}mapToRecord(e){if(!e.data||!e.data.saveRecord||!e.data.saveRecord.record)return null;const r={id:e.data.saveRecord.record._id,type:e.data.saveRecord.record.type||"",module:e.data.saveRecord.record.module||"",attributes:e.data.saveRecord.record.attributes||null};r.key=r.id||r.attributes&&r.attributes.id||"";const o=r.attributes&&r.attributes.contents||null;return o&&(r.criteria=o),r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(W.Apollo))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(W.Apollo))},token:n,providedIn:"root"}),n})(),sd=(()=>{class n{getKey(){return"criteria"}map(e){var r,o,a,s;const l=e;if(l.criteria){const f=null!==(o=null===(r=null==l?void 0:l.attributes)||void 0===r?void 0:r.contents)&&void 0!==o?o:{},u=null!==(s=null===(a=null==l?void 0:l.criteria)||void 0===a?void 0:a.filters)&&void 0!==s?s:{};f.filters=(0,D.deepClone)(u),e.fields.name&&(f.name=e.fields.name.value,l.criteria.name=f.name),e.fields.orderBy&&(f.orderBy=e.fields.orderBy.value,l.criteria.orderBy=f.orderBy),e.fields.sortOrder&&(f.sortOrder=e.fields.sortOrder.value,l.criteria.sortOrder=f.sortOrder),e.attributes.search_module&&(f.searchModule=e.attributes.search_module,l.criteria.searchModule=f.searchModule),l.attributes.contents=f}let c=l.key||"";"default"===c&&(c=""),l.id=c,l.attributes.id=c}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Cl=(()=>{class n{constructor(e,r,o,a,s,l,c,f,u,d,p){this.recordFetchGQL=e,this.recordSaveGQL=r,this.appStateStore=o,this.languageStore=a,this.metadataStore=s,this.message=l,this.recordManager=c,this.fieldManager=f,this.recordMappers=u,this.baseMapper=d,this.savedSearchMapper=p,this.savedFilterStoreFactory=new id(e,r,l,c,u,d,f,a),this.recordMappers.register("saved-search",this.savedSearchMapper.getKey(),this.savedSearchMapper)}create(){return new od(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.savedFilterStoreFactory)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(ad),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(D.RecordMapperRegistry),t.\u0275\u0275inject(bo),t.\u0275\u0275inject(sd))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(ad),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(D.RecordMapperRegistry),t.\u0275\u0275inject(bo),t.\u0275\u0275inject(sd))},token:n,providedIn:"root"}),n})(),ld=(()=>{class n{constructor(e,r){this.message=e,this.savedFilterStoreFactory=r,this.panelMode="closable",this.mode="filter",this.gridButtons=null,this.fields=[],this.special=[],this.savedFilters=[],this.subs=[],this.filterStore=r.create()}init(e){this.config=e,this.initSearchFields(),this.initConfigUpdatesSubscription(),this.vm$=(0,w.combineLatest)([this.filterStore.stagingRecord$]).pipe((0,v.tap)(([r])=>{this.reset(),this.splitCriteriaFields(r),this.initDisplayFields(),this.initGridButtons(),this.initHeaderButtons(),this.initMyFiltersButton(this.savedFilters)})),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new w.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,D.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed),this.reset(),this.initGridButtons(),this.initHeaderButtons()}clear(){this.subs.forEach(e=>e.unsubscribe()),this.reset(),this.filterStore.clear(),this.filterStore=null,this.collapse.unsubscribe()}clearAuthBased(){this.clear()}reset(){this.fields=[],this.special=[]}applyFilter(){this.filterStore.validateCriteria().pipe((0,v.take)(1)).subscribe(e=>{if(e)return"collapsible"===this.config.panelMode&&this.config.collapseOnSearch&&this.collapse.next(!0),this.config.onSearch(),void this.config.updateFilter(this.filterStore.getBaseRecord());this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}clearFilter(){this.config.resetFilter(!1)}initConfigUpdatesSubscription(){this.subs.push((0,w.combineLatest)([this.config.filter$,this.config.searchFields$]).pipe((0,v.tap)(([e,r])=>{this.reset(),this.filterStore.initRecord(this.config.module,e,r,this.config.listFields,"edit")})).subscribe()),this.subs.push((0,w.combineLatest)([this.config.savedFilters$]).pipe((0,v.tap)(([e])=>{this.savedFilters=e,this.initMyFiltersButton(e)})).subscribe())}splitCriteriaFields(e){!e||!e.criteriaFields||Object.keys(e.criteriaFields).forEach(r=>{const o=e.criteriaFields[r];(o.name||r).includes("_only")?this.special.push(o):this.fields.push(o)})}initSearchFields(){this.subs.push(this.config.searchFields$.subscribe(e=>{this.searchFields=e}))}initDisplayFields(){(!this.searchFields||(0,D.emptyObject)(this.searchFields)||!this.fields)&&(this.displayFields=[]);const e=[];this.fields.forEach(r=>{!this.searchFields[r.name]||e.push(r)}),this.displayFields=e}initGridButtons(){this.gridButtons=[{labelKey:"LBL_CLEAR_BUTTON_LABEL",klass:["clear-filters-button","btn","btn-outline-danger","btn-sm"],onClick:this.clearFilter.bind(this)},{labelKey:"LBL_SEARCH_BUTTON_LABEL",klass:["filter-button","btn","btn-danger","btn-sm"],onClick:this.applyFilter.bind(this)}]}initHeaderButtons(){this.closeButton={onClick:()=>{this.config.onClose()}}}initMyFiltersButton(e){if(!e||e.length<1)return void(this.myFilterButton=null);const r={wrapperKlass:["filter-select"],labelKey:"LBL_SAVED_FILTER_SHORTCUT",klass:["btn","btn-outline-light","btn-sm"],items:[]},o=this.filterStore.getRecordId();e.forEach(a=>{const s={label:a.attributes.name,onClick:()=>{this.config.setOpenFilter(a)}};a.key===o&&(r.label=a.attributes.name,r.labelKey="",s.icon="filter",s.iconKlass="small",s.klass="active"),r.items.push(s)}),this.myFilterButton=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(Cl))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),b0=(()=>{class n extends Zi{constructor(e,r,o,a,s,l,c,f,u){super(a,s,l,c,o,f,u),this.store=e,this.listFilterStore=r,this.language=o,this.actionManager=a,this.asyncActionService=s,this.message=l,this.confirmation=c,this.selectModalService=f,this.metadata=u}getActions(e){return(0,w.combineLatest)([this.store.meta$,this.store.mode$,this.store.stagingRecord$,this.language.vm$]).pipe((0,v.map)(([r,o])=>o&&r?this.parseModeActions(r.actions,o):[]))}buildActionData(e,r){return{store:this.store,listFilterStore:this.listFilterStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,r,o){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(od),t.\u0275\u0275inject(ld),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Ml),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),M0=(()=>{class n{constructor(e,r,o,a,s,l,c){this.language=e,this.actionManager=r,this.asyncActionService=o,this.message=a,this.confimation=s,this.selectModalService=l,this.metadata=c}create(e,r){return new b0(e,r,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Ml),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Ml),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},token:n,providedIn:"root"}),n})(),C0=(()=>{class n{constructor(e,r){this.message=e,this.savedFilterStoreFactory=r}create(){return new ld(this.message,this.savedFilterStoreFactory)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(Cl))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(Cl))},token:n,providedIn:"root"}),n})(),cd=(()=>{class n{constructor(e,r){this.storeFactory=e,this.actionAdapterFactory=r,this.store=e.create(),this.filterActionsAdapter=r.create(this.store.filterStore,this.store)}ngOnInit(){this.store.init(this.config),this.vm$=this.store.vm$.pipe((0,v.map)(([e])=>{const r=Object.assign({},e);return r.fields=e.criteriaFields,r}))}ngOnDestroy(){this.store.clear(),this.store=null}getGridConfig(){return{record$:this.store.filterStore.stagingRecord$,mode$:this.store.filterStore.mode$,fields$:this.store.filterStore.getViewFieldsKeys$(),actions:this.filterActionsAdapter,appendActions:!0,klass:"mt-2 p-2 saved-search-container rounded",buttonClass:"btn btn-outline-danger btn-sm",labelDisplay:"inline",maxColumns$:(0,w.of)(4).pipe((0,v.shareReplay)(1)),sizeMap$:(0,w.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,v.shareReplay)(1))}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(C0),t.\u0275\u0275directiveInject(M0))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-list-filter"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"titleKey","close","isCollapsed$","mode","klass",4,"ngIf"],[3,"titleKey","close","isCollapsed$","mode","klass"],["panel-header-button","",4,"ngIf"],["panel-body","",1,"p-3","filter-body"],[3,"actions","appendActions","fieldMode","fields","record","special",4,"ngIf"],[4,"ngIf"],["panel-header-button",""],[3,"config"],[3,"actions","appendActions","fieldMode","fields","record","special"],["class","float-right mt-4","field-grid-special","",4,"ngIf"],["class","mt-4 align-self-end","field-grid-actions","",4,"ngIf"],["field-grid-special","",1,"float-right","mt-4"],["class","d-inline-block form-check mb-2 mr-sm-2",4,"ngFor","ngForOf"],[1,"d-inline-block","form-check","mb-2","mr-sm-2"],["type","checkbox",1,"form-check-input",3,"value"],[1,"form-check-label"],[3,"labelKey"],["field-grid-actions","",1,"mt-4","align-self-end"],[3,"config",4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,u3,5,8,"scrm-panel",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,ia,Ls,Ec,_.NgForOf,gn,ir,$u],pipes:[_.AsyncPipe],encapsulation:2}),n})(),ud=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn,Gi,vo,Ui,dn,qa,Sn]]}),n})(),N4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,uo,yl,dn,aa,ud,Sn]]}),n})(),S0=(()=>{class n{constructor(){this.panelMode="closable"}ngOnInit(){this.vm$=this.config.store.vm$,this.initCloseButton(),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new w.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,D.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed)}ngOnDestroy(){}getGridConfig(){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,fields$:this.config.store.getViewFieldsKeys$(),actions:this.config.actions,klass:"mt-2 rounded shadow-sm",buttonClass:"btn btn-outline-danger btn-sm",maxColumns$:(0,w.of)(4).pipe((0,v.shareReplay)(1)),sizeMap$:(0,w.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,v.shareReplay)(1))}}initCloseButton(){this.closeButton={onClick:()=>{this.config.onClose()}}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-panel"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"close","isCollapsed$","mode","titleKey","klass",4,"ngIf"],[3,"close","isCollapsed$","mode","titleKey","klass"],["panel-body","",1,"pl-2","pr-2"],[4,"ngIf"],[3,"config"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,f3,3,6,"scrm-panel",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,ia,$u],pipes:[_.AsyncPipe],encapsulation:2}),n})();class x0 extends D.ActionHandler{}let w0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn,Gi,vo,Ui,dn,Sn,qa]]}),n})();const E0={module:"",recordId:"",loading:{data:!1,metadata:!1},mode:"detail"};class dd{constructor(i,e,r,o,a,s){this.appStateStore=i,this.meta=e,this.message=r,this.fieldManager=o,this.language=a,this.storeFactory=s,this.internalState=(0,D.deepClone)(E0),this.metadataState=(0,D.deepClone)({}),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.metadataStore=new w.BehaviorSubject({}),this.metadataState$=this.metadataStore.asObservable(),this.subs=[],this.meta$=this.metadataState$,this.recordStore=s.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(l=>l.loading.data||l.loading.metadata)),this.mode$=this.state$.pipe((0,v.map)(l=>l.mode)),this.vm$=this.state$}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordId}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}init(i,e,r="detail"){this.baseInit(i,e,r),this.setMetadataLoading(!0);const o={$meta:this.loadMetadata(),record:this.load()};return(0,w.forkJoin)(o).pipe((0,v.map)(({record:l})=>l))}initRecord(i,e="detail",r=!0){this.baseInit(i.module,i.id,e),r&&this.loadMetadata().pipe((0,v.take)(1),(0,v.tap)(()=>{this.setRecord(i)})).subscribe()}initStaging(i){const e=(0,D.deepClone)(this.recordStore.extractBaseRecord(i));this.recordStore.setStaging(e)}setRecord(i){const e=(0,D.deepClone)(this.recordStore.extractBaseRecord(i));this.recordStore.setRecord(e)}setMetadata(i){this.updateMetadataState(i),this.setMetadataLoading(!1)}destroy(){this.clear()}clear(){this.updateState((0,D.deepClone)(E0)),this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(i){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:i}))}setDataLoading(i){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:Object.assign(Object.assign({},this.internalState.loading),{data:i})}))}setMetadataLoading(i){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:Object.assign(Object.assign({},this.internalState.loading),{metadata:i})}))}save(){return this.setDataLoading(!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,w.of)({}))),(0,v.finalize)(()=>{this.setDataLoading(!1)}))}validate(){return this.recordStore.validate()}load(i=!0){return this.setDataLoading(!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordId,i).pipe((0,v.tap)(e=>{this.updateState(Object.assign(Object.assign({},this.internalState),{recordId:e.id,module:e.module}))}),(0,v.finalize)(()=>{this.setDataLoading(!1)}))}loadMetadata(i=!0){return this.setMetadataLoading(!0),this.meta.getMetadata(this.internalState.module).pipe((0,v.map)(e=>e.recordView),(0,v.tap)(e=>{this.updateMetadataState(e)}),(0,v.finalize)(()=>{this.setMetadataLoading(!1)}))}updateState(i){this.store.next(this.internalState=i)}updateMetadataState(i){this.metadataStore.next(this.metadataState=i)}getMetadata(){return(0,D.deepClone)(this.metadataState)}baseInit(i,e,r="detail"){this.updateState(Object.assign(Object.assign({},this.internalState),{module:i,recordId:e,mode:r}))}}let fd=(()=>{class n extends dd{getViewFields$(){return this.meta$.pipe((0,v.map)(e=>e.fields))}getViewFieldsKeys$(){return this.meta$.pipe((0,v.map)(e=>{if(!e.fields||!e.fields.length)return[];const r=[];return e.fields.forEach(o=>{r.push(o.name)}),r}))}initRecord(e,r="detail",o=!0){super.initRecord(e,r,o),this.setRecord(e)}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=t.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),D0=(()=>{class n{constructor(e,r,o,a,s,l,c,f,u){this.recordFetchGQL=e,this.recordSaveGQL=r,this.appStateStore=o,this.languageStore=a,this.metadataStore=s,this.message=l,this.recordManager=c,this.fieldManager=f,this.recordStoreFactory=u}create(){return new fd(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.recordStoreFactory)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Hi))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Hi))},token:n,providedIn:"root"}),n})();class Qa extends D.ActionHandler{checkRecordAccess(i,e=[]){var r,o;const s=null!==(r=i.itemStore.recordStore.getBaseRecord().acls)&&void 0!==r?r:[];if(!s||!s.length)return!1;const l=null!==(o=i.action)&&void 0!==o?o:null;return this.checkAccess(l,s,e)}navigateBack(i,e,r,o,a){let s=i.getReturnModule(e),l=i.getReturnAction(e),c=i.getReturnId(e);r!==c&&(s===o&&"record"===l&&c!==r||!s||!l||i.navigateBack(a,o,e))}}let pd=(()=>{class n extends Qa{constructor(){super(),this.key="async-process",this.modes=D.ALL_VIEW_MODES}run(e){}shouldDisplay(e){var r,o;const a=null!==(o=null===(r=null==e?void 0:e.action)||void 0===r?void 0:r.acl)&&void 0!==o?o:[];return!a.length||this.checkRecordAccess(e,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),md=(()=>{class n extends Qa{constructor(e,r){super(),this.modalService=e,this.navigation=r,this.key="cancel",this.modes=["edit","detail"]}run(e){e.itemStore.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){e.itemStore.recordStore.resetStaging(),e.itemStore.setMode("detail")}showConfirmationModal(e){const r=this.modalService.open(Ha);r.componentInstance.textKey="WARN_UNSAVED_CHANGES",r.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:o=>o.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:o=>{this.cancel(e),o.close()}}]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(xn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(xn))},token:n,providedIn:"root"}),n})(),hd=(()=>{class n extends Qa{constructor(){super(),this.key="edit",this.modes=["detail"]}run(e){e.itemStore.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),gd=(()=>{class n extends Qa{constructor(e,r){super(),this.message=e,this.navigation=r,this.key="save",this.modes=["edit"]}run(e){e.itemStore.recordStore.validate().pipe((0,v.take)(1)).subscribe(r=>{r?e.itemStore.save().pipe((0,v.take)(1)).subscribe(o=>{e.itemStore.setMode("detail")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(xn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(xn))},token:n,providedIn:"root"}),n})(),Sl=(()=>{class n extends vi{constructor(e,r,o,a){super(),this.async=e,this.cancel=r,this.edit=o,this.save=a,e.modes.forEach(s=>this.actions[s][e.key]=e),o.modes.forEach(s=>this.actions[s][o.key]=o),a.modes.forEach(s=>this.actions[s][a.key]=a),r.modes.forEach(s=>this.actions[s][r.key]=r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(pd),t.\u0275\u0275inject(md),t.\u0275\u0275inject(hd),t.\u0275\u0275inject(gd))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(pd),t.\u0275\u0275inject(md),t.\u0275\u0275inject(hd),t.\u0275\u0275inject(gd))},token:n,providedIn:"root"}),n})(),vd=(()=>{class n extends dd{getViewFields$(){return this.meta$.pipe((0,v.map)(e=>{const r=[];return e.headerLayout&&e.headerLayout.rows&&e.headerLayout.rows.forEach(o=>{o.cols.forEach(a=>{a.field&&r.push(a.field)})}),e.bodyLayout&&e.bodyLayout.rows&&e.bodyLayout.rows.forEach(o=>{o.cols.forEach(a=>{a.field&&r.push(a.field)})}),r}))}initRecord(e,r="detail",o=!0){super.initRecord(e,r,o),this.setRecord(e)}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=t.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),I0=(()=>{class n{constructor(e,r){this.listStoreFactory=e,this.recordStoreFactory=r,this.subs=[],this.stores=[],this.storeSubject=new w.BehaviorSubject([]),this.state$=this.storeSubject.asObservable(),this.recordList=e.create(),this.stores$=this.state$,this.storesMap$=this.stores$.pipe((0,v.map)(o=>this.getStoreMap(o)))}clear(){this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}getMetadata(){return null}init(e,r=!0){const o=this.recordList.init(e,r,"list_max_entries_per_subpanel");this.subs.push(this.recordList.records$.subscribe(a=>{this.initStores(a)})),o&&o.pipe((0,v.tap)(a=>{this.initStores(a.records)})).pipe((0,v.take)(1)).subscribe()}load(e=!0){return this.recordList.load(e).pipe((0,v.tap)(r=>{this.initStores(r.records)}))}initStores(e){if(!e)return;const r={},o=[],a=this.getStoreMap(this.stores);e.forEach(l=>{if(!l||!l.id)return;const c=l.id;if(a[c]){const f=a[c];return f.setRecord(l),r[c]=f,void o.push(f)}r[c]=this.recordStoreFactory.create(),this.getMetadata()&&r[c].setMetadata(this.getMetadata()),r[c].initRecord(l,"detail",!1),o.push(r[c])}),Object.keys(a).forEach(l=>{r[l]||a[l].destroy()}),this.updateState(o)}updateState(e){this.storeSubject.next(this.stores=e)}getStoreMap(e){const r={};return!e||!e.length||e.forEach(o=>{r[o.getBaseRecord().id]=o}),r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(void 0))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Xa=(()=>{class n{constructor(e,r,o,a,s,l){this.appStateStore=e,this.meta=r,this.message=o,this.fieldManager=a,this.language=s,this.storeFactory=l}create(){return new vd(this.appStateStore,this.meta,this.message,this.fieldManager,this.language,this.storeFactory)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(At),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Hi))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(At),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Yn),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Hi))},token:n,providedIn:"root"}),n})(),_d=(()=>{class n extends I0{constructor(e,r){super(e,r),this.listStoreFactory=e,this.recordStoreFactory=r,this.$loading=this.recordList.loading$}init(e,r=!0){super.init(e,r)}setFilters(e){let r=this.recordList.criteria;if(r=Object.assign(Object.assign({},r),e),e&&e.orderBy){let o=D.SortDirection.DESC;e.sortOrder&&"ASC"===String(e.sortOrder).toUpperCase()&&(o=D.SortDirection.ASC),this.recordList.updateSorting(e.orderBy,o,!1)}return this.recordList.updateSearchCriteria(r,!1),this.load(!1).pipe((0,v.map)(o=>o.records))}getMetadata(){return this.metadata}setMetadata(e){return this.metadata=e}allLoaded(){const e=this.recordList.getPagination();return!!e&&e.pageSize>=e.total}loadMore(e=10){let a=(this.recordList.getPagination().pageSize||0)+e;this.recordList.setPageSize(a),this.recordList.updatePagination(0)}reload(){this.recordList.updatePagination(0)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(Xa))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),F0=(()=>{class n extends Zi{constructor(e,r,o,a,s,l,c,f,u){super(a,s,l,c,o,f,u),this.itemStore=e,this.threadStore=r,this.language=o,this.actionManager=a,this.asyncActionService=s,this.message=l,this.confirmation=c,this.selectModalService=f,this.metadata=u,this.defaultActions={detail:[],edit:[],create:[]}}getActions(e){return(0,w.combineLatest)([this.itemStore.meta$,this.itemStore.mode$]).pipe((0,v.map)(([r,o])=>o&&r?this.parseModeActions(r.actions,o,this.itemStore.getViewContext()):[]))}getActionName(e){return`record-thread-item-${e.key}`}buildActionData(e,r){return{itemStore:this.itemStore,threadStore:this.threadStore,action:e}}buildActionInput(e,r,o,a=null){const s=this.itemStore.getBaseRecord();return this.message.removeMessages(),{action:r,module:s.module,id:s.id,params:e&&e.params||[]}}getMode(){return this.itemStore.getMode()}getModuleName(e){return this.itemStore.getModuleName()}reload(e,r,o){var a,s,l,c;const f=null!==(s=null===(a=null==r?void 0:r.data)||void 0===a?void 0:a.reload)&&void 0!==s&&s,u=null!==(c=null===(l=null==r?void 0:r.data)||void 0===l?void 0:l.reloadThread)&&void 0!==c&&c;(0,D.isTrue)(f)&&this.itemStore.load(!1).pipe((0,v.take)(1)).subscribe(),(0,D.isTrue)(u)&&this.threadStore.reload()}shouldReload(e){var r,o,a,s;const l=null!==(o=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.reload)&&void 0!==o&&o,c=null!==(s=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.reloadThread)&&void 0!==s&&s;return(0,D.isTrue)(l)||(0,D.isTrue)(c)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(vd),t.\u0275\u0275inject(_d),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Sl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),A0=(()=>{class n{constructor(e,r,o,a,s,l,c){this.language=e,this.actionManager=r,this.asyncActionService=o,this.message=a,this.confirmation=s,this.selectModalService=l,this.metadata=c}create(e,r){return new F0(e,r,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Sl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Sl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},token:n,providedIn:"root"}),n})(),N0=(()=>{class n{constructor(e,r){this.recordListFactory=e,this.recordStoreFactory=r}create(){return new _d(this.recordListFactory,this.recordStoreFactory)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(Xa))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(lr),t.\u0275\u0275inject(Xa))},token:n,providedIn:"root"}),n})(),T0=(()=>{class n{constructor(e,r,o,a){this.storeFactory=e,this.itemFactory=r,this.recordManager=o,this.message=a,this.loading=!1,this.maxHeight=400,this.direction="asc",this.shouldResetScroll=!1,this.subs=[]}ngOnInit(){(0,D.isVoid)(this.config.maxListHeight)||(this.maxHeight=this.config.maxListHeight),this.config.store||(this.store=this.storeFactory.create()),this.config.module&&(this.direction=this.config.direction||this.direction,this.store.setMetadata(this.config.itemConfig.metadata),this.store.init(this.config.module,!1),this.initCreate(),this.initDataSubscription(),this.config.filters$?this.subs.push(this.config.filters$.subscribe(e=>{this.store.setFilters(e).pipe((0,v.take)(1)).subscribe()})):this.store.load(!1),this.initLoading())}ngAfterViewInit(){this.shouldResetScroll=!0,this.resetScroll()}ngOnDestroy(){this.store.clear(),this.store=null,this.subs.forEach(e=>e.unsubscribe())}buildItem(e,r){let o="record-thread-list-item";return this.config.itemConfig.klass&&(o+=" "+this.config.itemConfig.klass),Object.assign(Object.assign({},this.config.itemConfig),{store:e,threadStore:this.store,klass:o,expanded:()=>{this.scrollToItem(r)},collapsed:()=>{this.scrollToItem(r)}})}getLoadMoreButton(){return{klass:"load-more-button btn btn-link btn-sm",labelKey:"LBL_LOAD_MORE",onClick:()=>{this.store.loadMore()}}}buildCreateItem(){return Object.assign(Object.assign({},this.config.createConfig),{store:this.createStore,rowClass:{"pt-1":!0},klass:"record-thread-create-item"})}getCreateButton(){return{klass:"create-thread-item-button btn btn-danger btn-sm",labelKey:"LBL_SUBMIT_BUTTON_LABEL",onClick:()=>{this.createStore.validate().pipe((0,v.take)(1)).subscribe(e=>{e?this.createStore.save().pipe((0,v.take)(1)).subscribe(()=>{this.store.reload(),this.initRecord(),this.shouldResetScroll=!0,this.message.addSuccessMessageByKey("LBL_ACTION_SUCCESS")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}}}allLoaded(){return!(!this.store||!this.store.allLoaded())}getMaxHeight(){return 0==this.maxHeight?null:{"max-height.px":this.maxHeight,"overflow-y":"auto"}}initRecord(){const e=this.recordManager.buildEmptyRecord(this.config.module);this.addPresetFields(e);let r="edit";this.config.createConfig&&this.config.createConfig.initialMode&&(r=this.config.createConfig.initialMode),this.createStore.initRecord(e,r,!1)}scrollToEnd(){!this.listContainer||!this.listContainer.nativeElement||this.scrollTo(this.listContainer.nativeElement.scrollHeight)}scrollToTop(){this.scrollTo(0)}scrollTo(e){try{this.listContainer.nativeElement.scrollTop=e}catch(r){}}scrollToItem(e){e&&this.listContainer&&this.listContainer.nativeElement&&this.scrollTo(e.offsetTop-this.listContainer.nativeElement.offsetTop)}resetScroll(){!1!==this.shouldResetScroll&&("asc"===this.direction?this.scrollToEnd():this.scrollToTop(),this.shouldResetScroll=!1)}scheduleScrollReset(){setTimeout(()=>{this.resetScroll()},500)}initCreate(){!this.config.create||(this.createStore=this.itemFactory.create(),this.createStore.setMetadata(this.config.createConfig.metadata),this.initRecord(),this.initPresetFieldsMapping())}initPresetFieldsMapping(){!this.config.presetFields$||this.subs.push(this.config.presetFields$.subscribe(e=>{if(!e||!Object.keys(e).length)return;this.presetFieldValues=e;const r=this.createStore.recordStore.getBaseRecord();this.addPresetFields(r),this.createStore.recordStore.setRecord(r)}))}addPresetFields(e){!this.presetFieldValues||(e.attributes=Object.assign(Object.assign({},this.presetFieldValues),e.attributes||{}))}initDataSubscription(){this.subs.push(this.store.stores$.subscribe(e=>{if((!this.records||!this.records.length)&&(this.shouldResetScroll=!0),"asc"===this.direction)return this.records=e.reverse(),void this.scheduleScrollReset();this.records=e,this.scheduleScrollReset()}))}initLoading(){const e=[this.store.$loading];this.createStore&&this.createStore.loading$&&e.push(this.createStore.loading$);const r=(0,w.combineLatest)(e);this.subs.push(r.subscribe(o=>{if(!o||!o.length)return void(this.loading=!1);let a=!1;o.forEach(s=>{a=a||s}),this.loading=a}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(N0),t.\u0275\u0275directiveInject(Xa),t.\u0275\u0275directiveInject(er),t.\u0275\u0275directiveInject(it))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-thread"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(p3,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.listContainer=o.first)}},inputs:{config:"config"},decls:5,vars:7,consts:[["class","d-flex record-thread-no-data justify-content-center h3",4,"ngIf"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["class","record-thread-list",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"d-flex","record-thread-no-data","justify-content-center","h3"],["labelKey","LBL_NO_DATA"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],[1,"record-thread-list",3,"ngStyle"],["list",""],["class","record-thread-load-more d-flex justify-content-center flex-grow-1",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"record-thread-load-more","d-flex","justify-content-center","flex-grow-1"],[3,"config"],["item",""],["class","d-flex flex-column record-thread-create-container",4,"ngIf"],[1,"d-flex","flex-column","record-thread-create-container"],[1,"flex-grow-1"],[1,"flex-grow-1","d-flex","justify-content-start","pt-1","record-thread-create-buttons"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,m3,2,0,"div",0),t.\u0275\u0275template(2,h3,2,1,"div",1),t.\u0275\u0275template(3,y3,5,4,"div",2),t.\u0275\u0275template(4,M3,2,1,"ng-container",3),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275classMapInterpolate1("record-thread ",r.config&&r.config.klass||"",""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.loading&&!r.records&&!r.records.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.records&&r.records.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.create&&r.createStore))},directives:function(){return[_.NgIf,gn,oa,_.NgStyle,_.NgForOf,ir,L0]},encapsulation:2}),n})(),L0=(()=>{class n{constructor(e){this.actionAdapterFactory=e,this.collapsed=!1,this.collapsible=!1,this.collapseLimit=300,this.dynamicClass="",this.subs=[]}ngOnInit(){this.actionAdapter=this.actionAdapterFactory.create(this.config.store,this.config.threadStore),this.initDynamicClass()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngAfterViewInit(){!this.config||!this.config.collapsible||setTimeout(()=>{(this.bodyEl.nativeElement.offsetHeight||this.bodyEl.nativeElement.height)>(this.config.collapseLimit||this.collapseLimit)&&(this.collapsible=!0,this.collapsed=!0)},2e3)}buildConfig(e){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,layout$:(0,w.of)(e).pipe((0,v.shareReplay)(1)),inputClass:Object.assign(Object.assign({},this.config.inputClass||{}),{"form-control form-control-sm":!0}),buttonClass:this.config.buttonClass||"",labelClass:this.config.labelClass||{},rowClass:this.config.rowClass||{},colClass:this.config.colClass||{},actions:this.actionAdapter}}getCollapseButton(){return{klass:"collapse-button btn btn-link btn-sm",labelKey:this.collapsed?"LBL_SHOW_MORE":"LBL_SHOW_LESS",onClick:()=>{this.collapsed=!this.collapsed,this.collapsed?this.config&&this.config.collapsed():this.config&&this.config.expanded()}}}initDynamicClass(){!this.config||!this.config.dynamicClass||!this.config.dynamicClass.length||this.subs.push(this.config.store.stagingRecord$.subscribe(e=>{const r=[];!e||!e.fields||!Object.keys(e.fields).length||(this.config.dynamicClass.forEach(o=>{if(!o||!e.fields[o]&&!e.attributes[o])return;const a=o+"-";let s=[];if(e.fields[o]?(e.fields[o].value&&s.push(e.fields[o].value),e.fields[o].valueList&&e.fields[o].valueList.length&&(s=s.concat(e.fields[o].valueList))):Array.isArray(e.attributes[o])?s=s.concat(e.attributes[o]):"object"!=typeof e.attributes[o]&&s.push(e.attributes[o]),!s||!s.length)return;const l=a+s.join(" "+a);r.push(l)}),this.dynamicClass=r.join(" "))}))}getBodyClass(){var e,r,o,a;return null!==(a=null===(o=null===(r=null===(e=this.config)||void 0===e?void 0:e.metadata)||void 0===r?void 0:r.bodyLayout)||void 0===o?void 0:o.class)&&void 0!==a?a:""}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(A0))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-thread-item"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(C3,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.bodyEl=o.first)}},inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"record-thread-item-header","flex-grow-1"],[4,"ngIf"],["body",""],["class","fadeout",4,"ngIf"],["class","record-thread-item-collapse d-flex justify-content-center flex-grow-1",4,"ngIf"],[3,"config"],[1,"fadeout"],[1,"record-thread-item-collapse","d-flex","justify-content-center","flex-grow-1"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,D3,8,15,"div",0),2&e&&t.\u0275\u0275property("ngIf",r.config)},directives:[_.NgIf,Hb,ir],encapsulation:2}),n})(),yd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn,Gi,vo,Ui,dn,qa,vu,Zb]]}),n})(),R0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Sn,Gi,vo,Ui,dn,qa,Sn,yd,aa]]}),n})();const T4={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let bd=(()=>{class n extends pl{constructor(e){super(e),this.fetchGQL=e,this.cache$=null,this.internalState=(0,D.deepClone)(T4),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(r=>r.statistic),(0,v.distinctUntilChanged)())}updateState(e){super.updateState(e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Md=(()=>{class n{traverse(e,r,o){e.singleSeries&&e.singleSeries.forEach(a=>{r.visit(a,o)}),e.multiSeries&&e.multiSeries.forEach(a=>{a.series.forEach(s=>{r.visit(s,o)})})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Cd=(()=>{class n{constructor(e,r){this.currencyService=e,this.preferences=r}toUserFormat(e,r=null){const o=parseFloat(e);if(!isFinite(o))return e;const a=this.currencyService.getUserCurrency();return this.currencyService.baseToCurrency(a.id,o).toString()}toInternalFormat(e){const r=parseFloat(e);if(!isFinite(r))return e;const o=this.currencyService.getUserCurrency();return this.currencyService.currencyToBase(o.id,r).toString()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject($i),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject($i),t.\u0275\u0275inject(Vt))},token:n,providedIn:"root"}),n})(),Sd=(()=>{class n{constructor(e){this.currencyUnitConverter=e,this.map={},this.addUnitConverter("currency",e)}addUnitConverter(e,r){this.map[e]=r}toUserFormat(e,r,o){if(!e)return r;const a=this.map[e];return a?a.toUserFormat(r,o):r}toInternalFormat(e,r){if(!e)return r;const o=this.map[e];return o?o.toInternalFormat(r):r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Cd))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Cd))},token:n,providedIn:"root"}),n})(),xd=(()=>{class n{constructor(e){this.converter=e}visit(e,r){var o,a;const s=null!==(o=null==r?void 0:r.dataType)&&void 0!==o?o:null,l=null!==(a=null==r?void 0:r.direction)&&void 0!==a?a:"user-unit";if(!s)return;const c=parseFloat(e.value.toString());if(isFinite(c)){if("user-unit"===l)return void(e.value=this.converter.toUserFormat(s,c.toString()));e.value=this.converter.toInternalFormat(s,c.toString())}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Sd))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Sd))},token:n,providedIn:"root"}),n})(),xl=(()=>{class n{constructor(e,r){this.traverser=e,this.dataTypeMapper=r,this.registry={},this.addMapper("data-type-unit-converter",r)}addMapper(e,r){this.registry[e]=r}map(e,r,o){var a;const s=null!==(a=null==this?void 0:this.registry[r])&&void 0!==a?a:null;!s||this.traverser.traverse(e,s,o)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Md),t.\u0275\u0275inject(xd))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Md),t.\u0275\u0275inject(xd))},token:n,providedIn:"root"}),n})();const L4={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let O0=(()=>{class n extends bd{constructor(e,r,o){super(e),this.fetchGQL=e,this.formatter=r,this.seriesMapper=o,this.internalState=(0,D.deepClone)(L4),this.store=new w.BehaviorSubject(this.internalState),this.defaultOptions={},this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(a=>a.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(a=>a.loading),(0,v.distinctUntilChanged)())}setDefaultOptions(e){this.defaultOptions=e}getDataSource(){return this.internalState.dataSource}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;this.injectDefaultValues(e);const r=this.buildCharDataSource(e);this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,dataSource:r,loading:!1}))}injectDefaultValues(e){e.metadata.chartOptions?Object.keys(this.defaultOptions).forEach(r=>{r in e.metadata.chartOptions||(e.metadata.chartOptions[r]=this.defaultOptions[r])}):e.metadata.chartOptions=(0,D.deepClone)(this.defaultOptions)}buildCharDataSource(e){const r=e.metadata.dataType||"";let o=null;const a=e.metadata&&e.metadata.digits||null;return null!==a&&(o={digits:a}),{options:e.metadata.chartOptions||{},getResults:()=>(0,w.of)(this.buildSeriesResult(e)).pipe((0,v.shareReplay)(1)),tickFormatting:s=>this.formatter.toUserFormat(r,s,o),tooltipFormatting:s=>this.formatter.toUserFormat(r,s,o)}}buildSeriesResult(e){const r=e.metadata.dataType||"",o={},a=e.data.singleSeries||null;a&&(o.singleSeries=a);const s=e.data.multiSeries||null;return s&&(o.multiSeries=s),this.seriesMapper.map(o,"data-type-unit-converter",{dataType:r}),o}updateState(e){super.updateState(e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr),t.\u0275\u0275inject(vt),t.\u0275\u0275inject(xl))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),j0=(()=>{class n{constructor(e,r,o){this.fetchGQL=e,this.formatter=r,this.seriesMapper=o}create(){return new O0(this.fetchGQL,this.formatter,this.seriesMapper)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr),t.\u0275\u0275inject(vt),t.\u0275\u0275inject(xl))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(mr),t.\u0275\u0275inject(vt),t.\u0275\u0275inject(xl))},token:n,providedIn:"root"}),n})(),qi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],inputs:{config:"config",context:"context",context$:"context$"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})(),B0=(()=>{class n extends qi{constructor(e,r){super(),this.language=e,this.factory=r,this.charts={},this.titleLabelKey="LBL_INSIGHTS",this.title="",this.messageLabelKey="LBL_CHART_NOT_FOUND",this.selectedChart="",this.chartType="",this.loading=!0,this.subs=[]}ngOnInit(){if(this.appStrings$=this.language.appStrings$,!1===this.validateConfig())return;this.context$&&this.subs.push(this.context$.subscribe(o=>{this.context=o,Object.keys(this.charts).forEach(a=>{this.charts[a].store.context=o})}));const e=this.config.options,r=e.charts;e.defaultChart&&(this.selectedChart=e.defaultChart||""),this.setupCharts(r),this.setHeaderTitle(e),this.reloadSelectedChart(),this.setupLoading(),this.setupVM(),this.setupReload()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get configuredCharts(){return this.chartOptions.charts||[]}get chartOptions(){return this.config.options||{}}isConfigured(){return!(!this.config.options.charts||!this.config.options.charts.length)}getLabelKey(e){return e.statistic.metadata&&e.statistic.metadata.labelKey||this.charts[e.query.key].labelKey}getKey(e){return e.chartKey||e.statisticsType||""}validateConfig(){if(!this.context||!this.context.module)return this.messageLabelKey="LBL_BAD_CONFIG_BAD_CONTEXT",!1;if(!this.config)return this.messageLabelKey="LBL_BAD_CONFIG_NO_CONFIG",!1;const e=this.config.options;return!!(e&&e.charts&&e.charts.length)||(this.messageLabelKey="LBL_BAD_CONFIG_NO_STATISTICS_KEY",!1)}setupCharts(e){this.selectedChart="",e.forEach(r=>{const o=this.getKey(r);!o||(this.selectedChart||(this.selectedChart=o||"",this.chartType=r.chartType),this.buildChartInfo(o,r),this.initChartStore(o,r))})}buildChartInfo(e,r){this.charts[e]={key:e,labelKey:r.labelKey||"",chartType:r.chartType,statisticsType:r.statisticsType,store:this.factory.create(),reload:!0}}initChartStore(e,r){this.charts[e].store.init(this.context.module,{key:r.statisticsType,context:Object.assign({},this.context)},!1),this.charts[e].store.setDefaultOptions(r.chartOptions)}setHeaderTitle(e){if(this.config.labelKey&&(this.titleLabelKey=this.config.labelKey),e.headerTitle){if(!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].labelKey)return;this.titleLabelKey=this.charts[this.selectedChart].labelKey}this.title=this.language.getFieldLabel(this.titleLabelKey)}onChartSelect(){this.dataSource=null,this.chartType=this.charts[this.selectedChart].chartType,this.reloadSelectedChart(!1)}setupVM(){const e=[];Object.keys(this.charts).forEach(r=>e.push(this.charts[r].store.state$)),this.vm$=(0,w.combineLatest)([(0,w.combineLatest)(e),this.language.appStrings$]).pipe((0,v.map)(([r,o])=>({statistics:this.mapChartData(r),appStrings:o})))}mapChartData(e){const r={};return e.forEach(o=>{!o.query.key||(r[o.query.key]=o,this.charts[o.query.key].labelKey=this.getLabelKey(o))}),r}setupReload(){!this.config.reload$||this.subs.push(this.config.reload$.subscribe(()=>{!0!==this.loading&&(this.loading=!0,Object.keys(this.charts).forEach(e=>{this.charts[e].reload=!0}),this.reloadSelectedChart())}))}setupLoading(){const e=[];Object.keys(this.charts).forEach(r=>e.push(this.charts[r].store.loading$)),this.loading$=(0,w.combineLatest)(e).pipe((0,v.map)(r=>{if(!r||r.length<1)return this.loading=!1,!1;let o=!1;return r.forEach(a=>{o=o||a}),this.loading=o,o})),this.subs.push(this.loading$.subscribe())}reloadSelectedChart(e=!1){!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].store||this.charts[this.selectedChart].store.load(e=e&&!this.charts[this.selectedChart].reload).pipe((0,v.take)(1),(0,v.tap)(()=>{var r,o,a;this.dataSource=null!==(a=null===(o=null===(r=this.charts[this.selectedChart])||void 0===r?void 0:r.store)||void 0===o?void 0:o.getDataSource())&&void 0!==a?a:null,this.charts[this.selectedChart].reload=!1})).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(j0))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["chart-sidebar-widget"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"title",4,"ngIf"],[3,"title"],["widget-body",""],[1,"widget-background","chart-sidebar-widget"],[1,"mb-2","ml-1","mr-1"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row","mt-3","chart-widget"],[1,"col","pl-0","pr-0","pb-1","pt-1","d-flex","justify-content-center"],[1,"flex-grow-1"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["class","lead text-center pt-3",4,"ngIf"],[1,"row"],[1,"col","pr-2","pl-2"],[1,"login-form","mb-0","mt-2","w-100"],["name","chart",1,"m-0","w-100",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource","type",4,"ngIf"],[3,"dataSource","type"],[1,"chart-loading"],[3,"overlay"],[1,"lead","text-center","pt-3"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,R3,12,5,"scrm-widget-panel",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,Ga,y.\u0275NgNoValidate,y.NgControlStatusGroup,y.NgForm,y.SelectControlValueAccessor,y.NgControlStatus,y.NgModel,_.NgForOf,y.NgSelectOption,y.\u0275NgSelectMultipleOption,S_,oa],pipes:[_.AsyncPipe],encapsulation:2}),n})(),P0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Wi,y.FormsModule,x_,aa]]}),n})(),k0=(()=>{class n{constructor(e){this.listStoreFactory=e,this.recordList=e.create()}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e){this.recordList.init("history",!1,"list_max_entries_per_subpanel"),this.initViewContext(e)}load(e=!0){return this.recordList.load(e)}initSearchCriteria(e,r){this.recordList.criteria={preset:{type:"history-timeline",params:{parentModule:this.viewContext.module,parentId:this.viewContext.id,offset:e,limit:r}}}}initViewContext(e){this.viewContext=e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),wl=(()=>{class n{constructor(e){this.listStoreFactory=e}create(){return new k0(this.listStoreFactory)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(lr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(lr))},token:n,providedIn:"root"}),n})(),wd=(()=>{class n{constructor(e){this.historyTimelineStoreFactory=e,this.loading=!1,this.cache=[],this.dataStream=new w.BehaviorSubject(this.cache),this.dataStream$=this.dataStream.asObservable(),this.defaultPageSize=10}init(e){this.store=this.historyTimelineStoreFactory.create(),this.store.init(e)}fetchTimelineEntries(e){if(!0!==this.loading)return!0===e&&(this.cache.length=0),this.store.initSearchCriteria(this.cache.length,this.defaultPageSize),this.loading=!0,this.store.load(!1).pipe((0,v.take)(1)).subscribe(r=>{this.loading=!1;const o=r.records;(0,D.emptyObject)(o)||Object.keys(o).forEach(a=>{this.cache.push(this.buildTimelineEntry(o[a]))}),this.dataStream.next([...this.cache])}),this.dataStream$}getActivityGridColor(e){return{calls:"yellow",tasks:"green",meetings:"blue",notes:"orange",audit:"purple",history:"purple"}[e]||"yellow"}buildTimelineEntry(e){const r=e.module;let o=e.attributes.module_name;"audit"===r&&(o="History");const s={module:r,icon:o,color:this.getActivityGridColor(e.module),title:{type:"varchar",value:e.attributes.name},user:{type:"varchar",value:e.attributes.assigned_user_name.user_name},date:{type:"datetime",value:e.attributes.date_end},record:e};return"audit"===r&&(s.description={type:"html",value:e.attributes.description}),s}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(wl))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),U0=(()=>{class n{constructor(e){this.historyTimelineStoreFactory=e}create(){return new wd(this.historyTimelineStoreFactory)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(wl))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(wl))},token:n,providedIn:"root"}),n})(),V0=(()=>{class n extends qi{constructor(e,r,o){super(),this.historyTimelineAdapterFactory=e,this.languageStore=r,this.navigation=o,this.subscription=new w.Subscription}ngOnInit(){this.adapter=this.historyTimelineAdapterFactory.create(),this.adapter.init(this.context)}ngAfterViewInit(){const e=[];e.push(this.config.reload$),e.push(this.config.subpanelReload$);const r=["history","activities"],a=(0,w.combineLatest)(e).pipe((0,v.map)(([s,l])=>s||!!l&&r.some(c=>!!l[c]))).pipe((0,v.debounce)(()=>(0,w.timer)(1e3)));this.subscription.add(a.subscribe(s=>{s&&this.adapter.fetchTimelineEntries(!0)}))}ngOnDestroy(){this.subscription.unsubscribe()}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_QUICK_HISTORY")}onScroll(){if(!this.adapter)return;const e=this.virtualScroll.measureScrollOffset("bottom");0===(0,ie.floor)(e)&&this.adapter.fetchTimelineEntries(!1)}redirectLink(e,r){if("audit"!==e)return this.navigation.getRecordRouterLink(e,r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(U0),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(xn))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-history-timeline-widget"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(pt.N7,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.virtualScroll=o.first)}},features:[t.\u0275\u0275ProvidersFeature([wd]),t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"title"],["widget-body","",4,"ngIf"],["widget-body",""],[1,"widget-background","history-timeline","p-2","pt-2"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["itemSize","100",1,"history-timeline-viewport",3,"ngClass","scroll"],["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],["labelKey","LBL_NO_DATA"],[3,"class",4,"ngIf"],[1,""],[1,"circle"],[1,"d-flex","justify-content-center","align-items-center","h-100","history-timeline-image"],[3,"image"],[1,"d-flex","justify-content-center","h-100"],[1,"connector","mt-3"],[1,"flex-grow-1"],[1,"card"],[1,"card-body","p-1","pr-2","pl-2"],[1,"card-title","text-break","history-timeline-entry-title"],[3,"routerLink",4,"ngIf"],[4,"ngIf"],["class","card-text history-timeline-entry-description",4,"ngIf"],[1,"card-text","history-timeline-entry-user","text-uppercase"],[1,"text-break"],["mode","list",3,"type","field","record"],[1,"card-text","text-break","history-timeline-entry-date"],[1,"font-italic"],[3,"routerLink"],[1,"card-text","history-timeline-entry-description"],["mode","detail",3,"type","field","record"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"scrm-widget-panel",0),t.\u0275\u0275template(1,$3,6,6,"div",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("title",r.getHeaderLabel()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,2,null==r.adapter?null:r.adapter.dataStream$)))},directives:[Ga,_.NgIf,pt.N7,pt.xd,_.NgClass,_.NgForOf,oa,Go,An,yi,z.RouterLinkWithHref],pipes:[_.AsyncPipe],encapsulation:2}),n})(),$0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,pt.Cl,En,cr,Wi,aa,dn,Wo,z.RouterModule]]}),n})(),z0=(()=>{class n extends qi{constructor(e,r){super(),this.language=e,this.sytemConfig=r,this.panelMode="none",this.subs=[]}ngOnInit(){this.options=(this.config.options||{}).recordThread||null,this.options&&(this.initPanelMode(),this.initFilters$(),this.initPresetFields$(),this.context$&&this.context$.subscribe()&&this.subs.push(this.context$.subscribe(r=>{this.context=r})),this.recordThreadConfig=this.getConfig())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getConfig(){var e;const r={filters$:this.filters$,presetFields$:this.presetFields$,module:this.options.module,klass:this.options.class||"",maxListHeight:null!==(e=this.options.maxListHeight)&&void 0!==e?e:350,direction:this.options.direction||"asc",create:!!this.options.create,itemConfig:{collapsible:this.options.item.collapsible||!1,collapseLimit:this.options.item.collapseLimit||null,klass:this.options.item.itemClass||"",dynamicClass:this.options.item.dynamicClass||[],metadata:{}},createConfig:{collapsible:!1,metadata:{}}};return this.setupItemMetadata(r.itemConfig.metadata,this.options.item.layout),this.setupItemMetadata(r.createConfig.metadata,this.options.create.layout),r}setupItemMetadata(e,r){r&&r.header&&(e.headerLayout=(0,D.deepClone)(r.header)),r&&r.body&&(e.bodyLayout=(0,D.deepClone)(r.body)),r&&r.actions&&(e.actions=(0,D.deepClone)(r.actions))}initPanelMode(){var e,r,o,a;const s=this.sytemConfig.getConfigValue("ui"),l=null!==(r=null===(e=null==s?void 0:s.widget)||void 0===e?void 0:e.allowCollapse)&&void 0!==r?r:null,c=null!==(a=null===(o=null==this?void 0:this.config)||void 0===o?void 0:o.allowCollapse)&&void 0!==a?a:null;let f="none";null!==l&&((0,D.isTrue)(l)?f="collapsible":(0,D.isFalse)(l)&&(f="none")),null!==c&&((0,D.isTrue)(c)?f="collapsible":(0,D.isFalse)(c)&&(f="none")),this.panelMode=f}initFilters$(){if(!this.options||!this.options.filters||!this.context$)return;const e=this.options.filters.parentFilters||{};let r=(0,w.of)({}).pipe((0,v.shareReplay)());Object.keys(e).length>0&&(r=this.context$.pipe((0,v.filter)(o=>{const a=o&&o.record||{};return!(!a.attributes||!Object.keys(a.attributes).length)}))),this.filters$=r.pipe((0,v.map)(o=>{const a={filters:{}};this.initParentFilters(o,a);const s=this.options.filters.static||{};return a.filters=Object.assign(Object.assign({},a.filters),s),this.options.filters.orderBy&&(a.orderBy=this.options.filters.orderBy),this.options.filters.sortOrder&&(a.sortOrder=this.options.filters.sortOrder),a}),(0,v.distinctUntilChanged)())}initPresetFields$(){!this.options||!this.options.create||!this.options.create.presetFields||!this.context$||(this.presetFields$=this.context$.pipe((0,v.map)(e=>{const r=this.initParentValues(e),o=this.options.create.presetFields.static||{};return Object.assign(Object.assign({},r),o)}),(0,v.distinctUntilChanged)()))}initParentFilters(e,r){const o=this.options.filters.parentFilters||{};!e||!e.record||!o||Object.keys(o).forEach(a=>{const l=e.record.attributes[a]||"";!l||(r.filters[o[a]]={field:o,operator:"=",values:[l]})})}initParentValues(e){const r=this.options.create.presetFields.parentValues||{};if(!e||!e.record||!r)return;const o={};return Object.keys(r).forEach(a=>{const l=e.record.attributes[a]||"";!l||(o[r[a]]=l)}),o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-thread-sidebar-widget"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"mode","title"],["widget-body","",1,"record-thread-sidebar-widget"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"scrm-widget-panel",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275template(2,z3,3,0,"ng-container",2),t.\u0275\u0275template(3,G3,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("mode",r.panelMode)("title",r.getHeaderLabel()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.options),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.options))},directives:[Ga,_.NgIf,gn,T0],encapsulation:2}),n})(),R4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,cr,Wi,dn,R0,yd]]}),n})(),G0=(()=>{class n extends qi{constructor(e){super(),this.language=e,this.subs=[]}ngOnInit(){this.options=(this.config.options||{}).sidebarStatistic||null,this.context$&&this.subs.push(this.context$.subscribe(r=>{this.context=r}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getGridConfig(){return{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:this.options,widgetConfig:{reload$:this.config.reload$},queryArgs:{module:this.context.module,context:this.context,params:{}}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-statistics-sidebar-widget"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"title"],["widget-body","",1,"p-3"],[3,"config"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"scrm-widget-panel",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"scrm-grid-widget",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("title",r.getHeaderLabel()),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.getGridConfig()))},directives:[Ga,yu],encapsulation:2}),n})(),W0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,cr,go,Wi,bu,dn]]}),n})();const K0=[$0,P0,W0],Ed={"history-timeline":V0,chart:B0,statistics:G0,"record-thread":z0};let H0=(()=>{class n extends D.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(Ed).forEach(e=>{this.register("default",e,Ed[e])})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Dd=(()=>{class n extends qi{constructor(e){super(),this.registry=e}get componentType(){var e;const r=null!==(e=this.context.module)&&void 0!==e?e:"default";return this.registry.get(r,this.type)}getErrorMessage(){return this.type&&this.config?this.componentType?"LBL_BAD_CONFIG":"LBL_WIDGET_NOT_FOUND":"LBL_CONFIG_NO_CONFIG"}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(H0))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-sidebar-widget"]],inputs:{type:"type"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["class","d-flex mb-4 mt-4 justify-content-center",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[1,"d-flex","mb-4","mt-4","justify-content-center"],[1,"lead"],[3,"labelKey"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,W3,3,1,"div",0),t.\u0275\u0275template(1,H3,1,6,"ndc-dynamic",1)),2&e&&(t.\u0275\u0275property("ngIf",!(r.type&&r.config&&r.componentType)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.type&&r.config&&r.componentType))},directives:[_.NgIf,gn,Gt,Lt],encapsulation:2}),n})(),Id=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,...K0,Jt,dn]]}),n})();class Z0 extends D.ActionHandler{checkRecordAccess(i,e=[]){var r,o,a;const l=null!==(o=(null!==(r=i.record)&&void 0!==r?r:{}).acls)&&void 0!==o?o:[];if(!l||!l.length)return!1;const c=null!==(a=i.action)&&void 0!==a?a:null;return this.checkAccess(c,l,e)}}let Fd=(()=>{class n extends Z0{constructor(){super(),this.key="async-process",this.modes=D.ALL_VIEW_MODES}run(e){}shouldDisplay(e){var r,o;const a=null!==(o=null===(r=null==e?void 0:e.action)||void 0===r?void 0:r.acl)&&void 0!==o?o:[];return!a.length||this.checkRecordAccess(e,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Ya=(()=>{class n extends vi{constructor(e){super(),this.async=e,e.modes.forEach(r=>this.actions[r][e.key]=e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Fd))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Fd))},token:n,providedIn:"root"}),n})(),q0=(()=>{class n extends Zi{constructor(e,r,o,a,s,l,c,f){super(r,o,a,s,l,c,f),this.store=e,this.actionManager=r,this.asyncActionService=o,this.message=a,this.confirmation=s,this.language=l,this.selectModalService=c,this.metadata=f}getActions(e=null){return(0,w.combineLatest)([this.store.metadata$.pipe((0,v.map)(r=>r.lineActions)),(0,w.of)("list").pipe((0,v.shareReplay)())]).pipe((0,v.map)(([r,o])=>this.parseModeActions(r,o,e)))}buildActionData(e,r){return{record:r&&r.record||null,store:this.store,action:e}}getMode(){return"list"}getModuleName(e){return this.store.metadata.module}reload(e,r,o){this.store.load(!1).pipe((0,v.take)(1)).subscribe(),this.store.loadAllStatistics(!1).pipe((0,v.take)(1)).subscribe()}buildActionInput(e,r,o,a=null){const s=this.store.metadata,l=s.collection_list||null,c=a&&a.module||o;let f=s.get_subpanel_data;return l&&l[c]&&l[c].get_subpanel_data&&(f=l[c].get_subpanel_data),f&&e&&e.params&&e.params.linkFieldMapping&&Object.keys(e.params.linkFieldMapping).some(u=>{if(f.includes(u))return f=e.params.linkFieldMapping[u],!0}),{action:r,module:o,id:a&&a.record&&a.record.id||"",payload:{baseModule:this.store.parentModule,baseRecordId:this.store.parentId,linkField:f,recordModule:c,relateModule:this.store.metadata.module,relateRecordId:a&&a.record&&a.record.id||""}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ja),t.\u0275\u0275inject(Ya),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ja),t.\u0275\u0275inject(Ya),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},token:n,providedIn:"root"}),n})(),El=(()=>{class n{constructor(e,r,o,a,s,l,c){this.actionManager=e,this.asyncActionService=r,this.message=o,this.confirmation=a,this.language=s,this.selectModalService=l,this.metadata=c}create(e){return new q0(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ya),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ya),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},token:n,providedIn:"root"}),n})(),Ad=(()=>{class n{constructor(e,r,o){this.store=e,this.lineActionsAdapterFactory=r,this.preferences=o}getTable(){return{showHeader:!1,showFooter:!0,module:this.store.metadata.headerModule,columns:this.getColumns(),lineActions:this.getLineActions(),sort$:this.store.recordList.sort$,maxColumns$:(0,w.of)(5),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,pagination:this.store.recordList,toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,r)=>{this.store.recordList.updateSorting(e,r);const o=this.store.parentModule,a=this.store.recordList.getModule();this.preferences.setUi(o,a+"-subpanel-sort",{orderBy:e,sortOrder:r})}}}getColumns(){return this.store.metadata$.pipe((0,v.map)(e=>e.columns))}getLineActions(){return this.lineActionsAdapterFactory.create(this.store)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ja),t.\u0275\u0275inject(El),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),J0=(()=>{class n{constructor(e,r){this.lineActionsAdapterFactory=e,this.preferences=r}create(e){return new Ad(e,this.lineActionsAdapterFactory,this.preferences)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(El),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(El),t.\u0275\u0275inject(Vt))},token:n,providedIn:"root"}),n})(),Q0=(()=>{class n{constructor(e,r,o,a){this.actionManager=e,this.languages=r,this.tableAdapterFactory=o,this.preferences=a}ngOnInit(){this.adapter=this.tableAdapterFactory.create(this.store),this.tableConfig=this.adapter.getTable(),this.maxColumns$&&(this.tableConfig.maxColumns$=this.maxColumns$);const e=this.store.parentModule,r=this.store.recordList.getModule(),o=this.preferences.getUi(e,r+"-subpanel-sort");o&&this.store.recordList.updateSorting(o.orderBy,o.sortOrder),this.config$=(0,w.of)(this.getButtonGroupConfig(this.buildAction())).pipe((0,v.shareReplay)(1)),this.closeButton={onClick:()=>{this.onClose&&this.onClose()}}}buildAction(){const e=[];return this.store.metadata&&this.store.metadata.top_buttons&&this.store.metadata.top_buttons.forEach(r=>{const o=this.languages.getFieldLabel(r.labelKey,r.module);e.push(Object.assign(Object.assign({},r),{label:o,params:{module:r.module}}))}),e}getButtonGroupConfig(e){const r=[];e.forEach(s=>{r.push(this.buildButton(s))});let o=1;r&&r.length>1&&(o=-1);const a=this.languages.getAppString("LBL_ACTIONS");return{buttons:r,breakpoint:o,dropdownLabel:a,buttonKlass:["btn","btn-sm","btn-outline-light"]}}buildButton(e){var r,o;const a={label:e.label||"",klass:"btn btn-sm btn-outline-light",onClick:()=>{this.actionManager.run(e.key,{subpanelMeta:this.store.metadata,module:e.params.module||this.store.metadata.module,parentModule:this.store.parentModule,parentId:this.store.parentId,store:this.store,action:e})}},s=null!==(o=null===(r=null==e?void 0:e.params)||void 0===r?void 0:r.debounceClick)&&void 0!==o?o:null;return a.debounceClick=!0,(0,D.isFalse)(s)&&(a.debounceClick=!1),a}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ju),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(J0),t.\u0275\u0275directiveInject(Vt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-subpanel"]],inputs:{store:"store",maxColumns$:"maxColumns$",onClose:"onClose"},features:[t.\u0275\u0275ProvidersFeature([Ad])],decls:8,vars:5,consts:[["mode","closable","bodyPadding","0",3,"title","close"],["panel-icon-area","",1,"subpanel-icon","pl-1"],[3,"image"],["panel-header-button",""],[3,"config$",4,"ngIf"],["panel-body",""],[3,"config"],[3,"config$"]],template:function(e,r){1&e&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"scrm-panel",0),t.\u0275\u0275elementStart(2,"span",1),t.\u0275\u0275element(3,"scrm-image",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",3),t.\u0275\u0275template(5,Z3,1,1,"scrm-button-group",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275element(7,"scrm-table",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("title",r.store.getTitle())("close",r.closeButton),t.\u0275\u0275advance(2),t.\u0275\u0275property("image",r.store.getIcon()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.config$),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.tableConfig))},directives:[ia,An,_.NgIf,_l,co],encapsulation:2}),n})(),Dl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,be.NgbModule,En,Gi,z.RouterModule,Vi,yl]]}),n})(),X0=(()=>{class n{constructor(e,r,o,a){this.languageStore=e,this.maxColumnCalculator=r,this.localStorage=o,this.preferences=a,this.isCollapsed=!1,this.toggleIcon="arrow_down_filled",this.languages$=this.languageStore.vm$,this.openSubpanels=[]}ngOnInit(){var e,r,o,a;const s=null!==(r=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.parentModule)&&void 0!==r?r:"default";this.isCollapsed=(0,D.isTrue)(null!==(o=this.preferences.getUi(s,"subpanel-container-collapse"))&&void 0!==o&&o),this.openSubpanels=null!==(a=this.preferences.getUi(s,"subpanel-container-open-subpanels"))&&void 0!==a?a:[],this.vm$=this.config.subpanels$.pipe((0,v.map)(l=>({subpanels:l})),(0,v.tap)(l=>{!l||!Object.keys(l).length||!this.openSubpanels||this.openSubpanels.length<1||this.openSubpanels.forEach(c=>{const f=l.subpanels[c];!f||f.show||(f.show=!0,f.load().pipe((0,v.take)(1)).subscribe())})})),this.maxColumns$=this.getMaxColumns()}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.config.sidebarActive$)}toggleSubPanels(){var e,r;this.isCollapsed=!this.isCollapsed,this.toggleIcon=this.isCollapsed?"arrow_up_filled":"arrow_down_filled";const o=null!==(r=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.parentModule)&&void 0!==r?r:"default";this.preferences.setUi(o,"subpanel-container-collapse",this.isCollapsed)}showSubpanel(e,r){var o,a;r.show=!r.show,r.show?(this.openSubpanels.includes(e)||this.openSubpanels.push(e),r.load().pipe((0,v.take)(1)).subscribe()):this.openSubpanels=this.openSubpanels.filter(l=>l!=e);const s=null!==(a=null===(o=null==this?void 0:this.config)||void 0===o?void 0:o.parentModule)&&void 0!==a?a:"default";this.preferences.setUi(s,"subpanel-container-open-subpanels",this.openSubpanels)}getCloseCallBack(e,r){return()=>this.showSubpanel(e,r)}getGridConfig(e){if(!e.metadata||!e.metadata.insightWidget)return{layout:null};const r=e.getWidgetLayout();return r.rows.forEach(o=>{!o.cols||!o.cols.length||o.cols.forEach(a=>{if(!a.statistic)return;const s=e.getStatistic(a.statistic);s&&(a.store=s)})}),{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:r,widgetConfig:{},queryArgs:{module:e.metadata.name,context:{module:e.parentModule,id:e.parentId},params:{subpanel:e.metadata.name}}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(ho),t.\u0275\u0275directiveInject(Fr),t.\u0275\u0275directiveInject(Vt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-subpanel-container"]],inputs:{config:"config"},features:[t.\u0275\u0275ProvidersFeature([ho])],decls:2,vars:3,consts:[[4,"ngIf"],["activeIds","sub-panel-buttons",1,"sub-panel-banner"],["accordion","ngbAccordion"],["id","sub-panel-buttons"],["ngbPanelHeader",""],["ngbPanelContent",""],["id","sub-panels"],[4,"ngFor","ngForOf"],[1,"clickable",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],["labelKey","LBL_SELECT_SUBPANEL_BANNER"],["aria-controls","collapseShowSubPanels",1,"float-right",3,"image"],["id","collapseShowSubPanels",3,"ngbCollapse"],[1,"row","insight-panel"],["class","col-xs-6 col-sm-3 col-md-2 insight-panel-card border-insight",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-xs-6","col-sm-3","col-md-2","insight-panel-card","border-insight",3,"ngClass","click"],[3,"config"],["class","sub-panel",3,"maxColumns$","store","onClose",4,"ngIf"],[1,"sub-panel",3,"maxColumns$","store","onClose"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,nk,8,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,be.NgbAccordion,be.NgbPanel,be.NgbPanelHeader,be.NgbPanelContent,_.NgForOf,gn,An,be.NgbCollapse,_.NgClass,yu,Q0],pipes:[_.AsyncPipe,_.KeyValuePipe],encapsulation:2}),n})(),Y0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,be.NgbModule,En,z.RouterModule,Dl,go,cr,bu,dn]]}),n})(),eM=(()=>{class n extends qi{constructor(e,r){super(),this.language=e,this.factory=r,this.statistics={},this.loading=!0,this.subs=[]}ngOnInit(){if(!this.context||!this.context.module)return void(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT");if(!this.config)return void(this.messageLabelKey="LBL_CONFIG_NO_CONFIG");if(!this.config.options||!this.config.options.statistics||!this.config.options.statistics.length)return void(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY");this.context$&&this.subs.push(this.context$.subscribe(o=>{this.context=o}));const e=[],r=[];this.config.options.statistics.forEach(o=>{!o.type||(this.statistics[o.type]={labelKey:o.labelKey||"",endLabelKey:o.endLabelKey||"",hideValueIfEmpty:o.hideValueIfEmpty||!1,type:o.type,store:this.factory.create()},this.statistics[o.type].store.init(this.context.module,{key:o.type,context:Object.assign({},this.context)}).pipe((0,v.take)(1)).subscribe(),e.push(this.statistics[o.type].store.state$),r.push(this.statistics[o.type].store.loading$))}),this.loading$=(0,w.combineLatest)(r).pipe((0,v.map)(o=>{if(!o||o.length<1)return this.loading=!1,!1;let a=!0;return o.forEach(s=>{a=a&&s}),this.loading=a,a})),this.subs.push(this.loading$.subscribe()),this.vm$=(0,w.combineLatest)([(0,w.combineLatest)(e),this.language.appStrings$]).pipe((0,v.map)(([o,a])=>{const s={};return o.forEach(l=>{s[l.query.key]=l,this.statistics[l.query.key].labelKey=this.getMetadataEntry(l,"labelKey"),this.statistics[l.query.key].endLabelKey=this.getMetadataEntry(l,"endLabelKey")}),{statistics:s,appStrings:a}})),this.config.reload$&&this.subs.push(this.config.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,this.config.options.statistics.forEach(o=>{!o.type||!this.statistics[o.type]||!this.statistics[o.type].store||this.statistics[o.type].store.load(!1).pipe((0,v.take)(1)).subscribe()}))}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}shouldHide(e,r){return this.hasLoaded(e)&&this.isValueEmpty(e)&&!0===r.hideIfEmpty}hasLoaded(e){return!e.loading}isValueEmpty(e){var r,o,a,s,l;const c=null!==(a=null===(o=null===(r=null==e?void 0:e.statistic)||void 0===r?void 0:r.metadata)||void 0===o?void 0:o.emptyValueString)&&void 0!==a?a:null;if(null!==c)return!0;const f=null!==(l=null===(s=null==e?void 0:e.field)||void 0===s?void 0:s.value)&&void 0!==l?l:null;return!f&&c===f}getMetadataEntry(e,r){const o=e.statistic.metadata&&e.statistic.metadata[r];return null!=o?o:this.statistics[e.query.key][r]}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(ra))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-statistics-top-widget"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["class","d-flex justify-content-center widget-bar rounded",4,"ngIf"],[1,"d-flex","justify-content-center","widget-bar","rounded"],["class","p-2 widget-bar-entry-message",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-2","widget-bar-entry-message"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[4,"ngIf"],["class","pl-1 pr-1 widget-bar-entry-loading",4,"ngIf"],["class","pr-1 widget-bar-entry-label",4,"ngIf"],[1,"pr-1","widget-bar-entry-label"],["class","pl-1 pr-1 widget-bar-entry-value",4,"ngIf"],[1,"pl-1","pr-1","widget-bar-entry-value"],["mode","list",3,"type","field"],[1,"pl-1","pr-1","widget-bar-entry-loading"],["class","pl-1 widget-bar-entry-end-label",4,"ngIf"],[1,"pl-1","widget-bar-entry-end-label"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,gk,4,4,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,_.NgForOf,yi,Hc],pipes:[_.AsyncPipe,_.KeyValuePipe,_.UpperCasePipe],encapsulation:2}),n})(),tM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,cr,go]]}),n})();const nM=[tM],rM={statistics:eM};let iM=(()=>{class n extends qi{constructor(){super(...arguments),this.map=rM}get componentType(){return this.map[this.type]}ngOnInit(){this.component=this.componentType,this.inputs={config:this.config,context:this.context}}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=t.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-top-widget"]],inputs:{type:"type"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,r){1&e&&t.\u0275\u0275template(0,_k,1,5,"ndc-dynamic",0),2&e&&t.\u0275\u0275property("ngIf",r.type&&r.config)},directives:[_.NgIf,Gt,Lt],encapsulation:2}),n})(),oM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,...nM,Jt]]}),n})(),O4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Jt]]}),n})(),j4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),B4=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-dynamicenum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,r){1&e&&t.\u0275\u0275text(0),2&e&&t.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2}),n})(),P4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,y.FormsModule]]}),n})(),k4=(()=>{class n extends qr{constructor(e,r,o){super(e,r,o),this.languages=e,this.typeFormatter=r,this.logic=o}ngOnInit(){super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-dynamicenum-edit"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(so,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"tag-input",0,1),t.\u0275\u0275listener("ngModelChange",function(a){return r.selectedValues=a})("onAdd",function(a){return r.onAdd(a)})("onRemove",function(){return r.onRemove()}),t.\u0275\u0275element(2,"tag-input-dropdown",2),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),t.\u0275\u0275advance(2),t.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},directives:[Vn.TagInputComponent,y.NgControlStatus,y.NgModel,Vn.TagInputDropdown],encapsulation:2}),n})(),U4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Vn.TagInputModule,y.FormsModule]]}),n})(),V4=(()=>{class n extends Dn{constructor(e,r){super(e,r),this.typeFormatter=e,this.logic=r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(vt),t.\u0275\u0275directiveInject(Nt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-email-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,r){1&e&&t.\u0275\u0275text(0),2&e&&t.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2}),n})(),$4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),z4=(()=>{class n{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.sanitize(t.SecurityContext.HTML,e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(qv.H7,16))},n.\u0275pipe=t.\u0275\u0275definePipe({name:"htmlSanitize",type:n,pure:!0}),n})(),G4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),W4=(()=>{class n{constructor(e,r,o,a,s,l,c,f){this.message=e,this.router=r,this.authService=o,this.preferences=a,this.asyncActionService=s,this.appState=l,this.routeConverter=c,this.configs=f}canActivate(e,r){return this.authorizeUser(e,r)}authorizeUser(e,r){return(0,w.forkJoin)({session:this.authorizeUserSession(e,r),acl:this.authorizeUserACL(e)}).pipe((0,v.map)(({session:o,acl:a})=>o instanceof z.UrlTree?o:(a instanceof z.UrlTree||o)&&a))}authorizeUserACL(e){var r,o;const a=this.routeConverter.parseRouteURL(e.url),s=null!==(r=this.appState.getRouteUrl())&&void 0!==r?r:"";if(!a.module||"home"===a.module)return(0,w.of)(!0);const c=this.router.parseUrl(""),f="user-acl",u={action:f,module:a.module,payload:{routeAction:a.action,record:a.record,routeURL:s,queryParams:null!==(o=null==e?void 0:e.queryParams)&&void 0!==o?o:[]}};return this.asyncActionService.run(f,u).pipe((0,v.take)(1),(0,v.map)(d=>{if(d.data&&!0===d.data.result)return!0;if((0,D.isEmptyString)(s))return c;const p=this.router.parseUrl(this.router.url);return!!this.routeConverter.isClassicViewRoute(p)&&p}),(0,v.catchError)(()=>(0,w.of)(c)),(0,v.tap)(d=>d))}authorizeUserSession(e,r){if(this.authService.isUserLoggedIn.value&&!0!==e.data.checkSession)return(0,w.of)(!0);let o=this.authService.getSessionExpiredRoute();const a=this.authService.sessionExpiredRedirect(),s=this.router.parseUrl(o);return this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(l=>l&&!1===l.appStatus.installed?this.router.parseUrl("install"):l&&!0===l.active?(this.authService.setCurrentUser(l),!0):(this.appState.setPreLoginUrl(r.url),this.authService.resetState(),a?(this.authService.handleSessionExpiredRedirect(),!1):s)),(0,v.catchError)(()=>a?(this.authService.handleSessionExpiredRedirect(),(0,w.of)(!1)):(this.authService.logout("LBL_SESSION_EXPIRED",!1),(0,w.of)(s))),(0,v.tap)(l=>{!0===l&&this.authService.isUserLoggedIn.next(!0)}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(yt))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(yt))},token:n,providedIn:"root"}),n})(),K4=(()=>{class n{intercept(e,r){return r.handle(e).pipe((0,v.catchError)(o=>(0,w.throwError)(o)))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),H4=(()=>{class n{constructor(e,r,o,a,s,l){this.systemConfigStore=e,this.authService=r,this.router=o,this.routeConverter=a,this.asyncActionService=s,this.message=l}canActivate(e){return this.canActivateWebInstallation(e)}canActivateWebInstallation(e){const r=this.systemConfigStore.getHomePage(),o=this.router.parseUrl(r);return this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(a=>a&&!0===a.appStatus.locked&&!0===a.appStatus.installed?(this.message.addDangerMessageByKey("LBL_DISABLED_TITLE_2"),!(!a||!1!==a.active)&&o):(a&&!0===a.active&&(this.authService.logout("",!1),this.authService.isUserLoggedIn.next(!1)),!0)),(0,v.catchError)(()=>(0,w.of)(!0)))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it))},token:n,providedIn:"root"}),n})(),Z4=(()=>{class n{constructor(e,r,o,a,s){this.router=e,this.authService=r,this.systemConfigStore=o,this.appStateStore=a,this.message=s}canActivate(){const e=this.systemConfigStore.getHomePage(),r=this.router.parseUrl(e);return this.authService.isUserLoggedIn.value?r:this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(o=>o&&!1===o.appStatus.installed?this.router.parseUrl("install"):!o||!0!==o.active||(this.authService.setCurrentUser(o),r)),(0,v.catchError)(()=>(0,w.of)(!0)))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(At),t.\u0275\u0275inject(it))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(yt),t.\u0275\u0275inject(At),t.\u0275\u0275inject(it))},token:n,providedIn:"root"}),n})(),q4=(()=>{class n{constructor(e,r){this.systemConfigStore=e,this.compiler=r}load(e){const r=this.systemConfigStore.getConfigValue("extensions"),o={};return Object.keys(r).forEach(a=>{if(!r[a])return;const s=r[a];!s.remoteEntry||!s.remoteName||!s.enabled||(0,D.isFalse)(s.enabled)||(o[a]=this.loadExtension(s,e))}),Object.keys(o).length<1?(0,w.of)({}):(0,w.forkJoin)(o)}loadExtension(e,r){return this.loadModuleFactory(()=>CL({remoteEntry:e.remoteEntry,remoteName:e.remoteName,exposedModule:"./Module"}).then(a=>a.ExtensionModule)).pipe((0,v.map)(a=>a.create(r)))}isPromise(e){return!!e&&"function"==typeof e.then}wrapIntoObservable(e){return(0,w.isObservable)(e)?e:this.isPromise(e)?(0,w.from)(Promise.resolve(e)):(0,w.of)(e)}loadModuleFactory(e){return this.wrapIntoObservable(e()).pipe((0,v.mergeMap)(r=>r instanceof t.NgModuleFactory?(0,w.of)(r):(0,w.from)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(t.Compiler))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(t.Compiler))},token:n,providedIn:"root"}),n})(),Nd=(()=>{class n{constructor(e,r,o,a,s,l,c,f,u,d){this.systemConfigStore=e,this.languageStore=r,this.navigationStore=o,this.userPreferenceStore=a,this.themeImagesStore=s,this.appState=l,this.moduleNameMapper=c,this.messageService=f,this.appMetadata=u,this.auth=d}resolve(e){const r=this.calculateActiveModule(e);return this.appMetadata.load(r).pipe((0,v.tap)(()=>{this.auth.isLoggedIn()&&setTimeout(()=>{this.appMetadata.loadModuleMetadata(r).pipe((0,v.take)(1)).subscribe()},0)}))}sequentialLoad(e){const r={};if(this.isToLoadNavigation(e)&&(r.navigation=this.navigationStore.load()),this.isToLoadConfigs(e)){let a=this.systemConfigStore.load();if(this.isToLoadLanguageStrings(e)){const s=this.getLanguagesToLoad(e);a=a.pipe((0,v.map)(l=>{let c=l.default_language.value;const f=this.languageStore.getCurrentLanguage();return f&&(c=f),this.languageStore.load(c,s)}),(0,v.concatAll)(),(0,v.toArray)())}r.configs=a}return this.isToLoadUserPreferences(e)&&(r.preferences=this.userPreferenceStore.load()),(0,w.forkJoin)(r).pipe((0,v.map)(a=>{let s=null;return this.systemConfigStore.getConfigValue("default_theme")&&(s=this.systemConfigStore.getConfigValue("default_theme")),this.userPreferenceStore.getUserPreference("user_theme")&&(s=this.userPreferenceStore.getUserPreference("user_theme")),this.themeImagesStore.getTheme()&&(s=this.themeImagesStore.getTheme()),null!==s?this.themeImagesStore.load(s):a}),(0,v.concatAll)(),(0,v.toArray)(),(0,v.tap)(()=>this.appState.setLoaded(!0)))}getLanguagesToLoad(e){let r=this.languageStore.getAvailableStringsTypes();return this.isToLoadNavigation(e)?r:e.data&&e.data.load?(Array.isArray(e.data.load.languageStrings)&&(r=e.data.load.languageStrings),r):[]}isToLoadLanguageStrings(e){return!!this.isToLoadNavigation(e)||!(!e.data||!e.data.load)&&(Array.isArray(e.data.load.languageStrings)||!0===e.data.load.languageStrings)}isToLoadConfigs(e){return!e.data||!e.data.load||!1!==e.data.load.configs}isToLoadNavigation(e){return!e.data||!e.data.load||!1!==e.data.load.navigation}isToLoadUserPreferences(e){return!e.data||!e.data.load||!1!==e.data.load.preferences}addMetadataLoadErrorMessage(){let e=this.languageStore.getAppString("LBL_ERROR_FETCHING_METADATA");e||(e="Error occurred while fetching metadata"),this.messageService.addDangerMessage(e)}calculateActiveModule(e){var r,o;let a=e.params.module;a||(a=e.data.module);const s=null!==(o=null===(r=null==e?void 0:e.url[0])||void 0===r?void 0:r.path)&&void 0!==o?o:"";!a&&""!==s&&(a=s);const l=this.getParentModuleMap()[a]||"",c=e.queryParams[l]||"";return c&&(a=this.moduleNameMapper.toFrontend(c)),a}getParentModuleMap(){return{"merge-records":"return_module",import:"import_module"}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(At),t.\u0275\u0275inject(on),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Qr),t.\u0275\u0275inject(Rn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(At),t.\u0275\u0275inject(on),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Qr),t.\u0275\u0275inject(Rn))},token:n,providedIn:"root"}),n})(),aM=(()=>{class n extends Nd{constructor(e,r,o,a,s,l,c,f,u,d,p,h){super(e,r,o,a,s,c,l,u,p,h),this.systemConfigStore=e,this.languageStore=r,this.navigationStore=o,this.userPreferenceStore=a,this.themeImagesStore=s,this.moduleNameMapper=l,this.appStateStore=c,this.metadataStore=f,this.messageService=u,this.routeConverter=d,this.appMetadata=p,this.auth=h}resolve(e){let r=e.params.module;return r||(r=e.data.module),super.resolve(e).pipe((0,v.concatMap)(()=>(0,w.forkJoin)({metadata:this.metadataStore.load(r,this.metadataStore.getMetadataTypes()),savedSearchMeta:this.metadataStore.getMetadata("saved-search",["recordView"])})),(0,v.map)(o=>{var a,s,l;return{base:null!==(a=o[0])&&void 0!==a?a:{},metadata:null!==(s=o[1])&&void 0!==s?s:{},savedSearchMeta:null!==(l=o[2])&&void 0!==l?l:{}}}),(0,v.tap)(()=>{var o;if(r){const l=this.calculateActiveModule(e);this.appStateStore.setModule(l)}const s=null!==(o=this.routeConverter.parseRouteURL(e.url).action)&&void 0!==o?o:"index";this.appStateStore.setView(s)},()=>{this.addMetadataLoadErrorMessage()}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(on),t.\u0275\u0275inject(At),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(Qr),t.\u0275\u0275inject(Rn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(on),t.\u0275\u0275inject(At),t.\u0275\u0275inject(St),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(Qr),t.\u0275\u0275inject(Rn))},token:n,providedIn:"root"}),n})(),es=(()=>{class n{constructor(e,r){this.metadata=e,this.processService=r}onNavigationAdd(e,r){var o,a;let s="detail";const l=r&&r.data||{};l.mode&&(s=l.mode);const c=null!==(a=null===(o=null==r?void 0:r.params)||void 0===o?void 0:o.record)&&void 0!==a?a:null;if(c&&"create"!==s){const f=this.buildRecentlyViewed(e,c);this.addRecentlyViewed(e,f)}}buildRecentlyViewed(e,r,o="detailview"){return(0,D.deepClone)({module:"Tracker",type:"Tracker",attributes:{module_name:null!=e?e:"",item_id:null!=r?r:"",action:null!=o?o:""}})}addRecentlyViewed(e,r){this.saveRecentlyViewed(e,r)}saveRecentlyViewed(e,r){const a={recentlyViewed:r};setTimeout(()=>{this.processService.submit("add-recently-viewed",a).pipe((0,v.take)(1)).subscribe(s=>{var l,c,f,u,d,p,h,m;const g={id:null!==(l=r.id)&&void 0!==l?l:"",module:null!==(c=r.module)&&void 0!==c?c:"",attributes:Object.assign({},null!==(f=r.attributes)&&void 0!==f?f:{})},x=null!==(d=null===(u=null==s?void 0:s.data)||void 0===u?void 0:u.tracker)&&void 0!==d?d:null;if(null===x)return;g.attributes.item_summary=x.item_summary;const C=null!==(h=null===(p=null==g?void 0:g.attributes)||void 0===p?void 0:p.item_id)&&void 0!==h?h:"",A=this.metadata.getModuleMeta(e),S=null!==(m=null==A?void 0:A.recentlyViewed)&&void 0!==m?m:null;if(S){let E=S.filter(F=>{var b,k;return(null!==(k=null===(b=null==F?void 0:F.attributes)||void 0===b?void 0:b.item_id)&&void 0!==k?k:"")!==C});E.unshift(g),A.recentlyViewed=E}this.metadata.setModuleMetadata(e,A)})},500)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ar))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ar))},token:n,providedIn:"root"}),n})(),J4=(()=>{class n extends aM{constructor(e,r,o,a,s,l,c,f,u,d,p,h,m,g,x){super(e,r,o,s,l,c,u,a,d,p,m,g),this.systemConfigStore=e,this.languageStore=r,this.navigationStore=o,this.metadataStore=a,this.userPreferenceStore=s,this.themeImagesStore=l,this.moduleNameMapper=c,this.actionNameMapper=f,this.appStateStore=u,this.messageService=d,this.routeConverter=p,this.router=h,this.appMetadata=m,this.auth=g,this.recentlyViewed=x}resolve(e){let r=e.params.module;return r||(r=e.data.module),super.resolve(e).pipe((0,v.concatMap)(()=>(0,w.forkJoin)({metadata:this.metadataStore.load(r,this.metadataStore.getMetadataTypes())})),(0,v.tap)(()=>{this.auth.isLoggedIn()&&this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(on),t.\u0275\u0275inject(Jr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(Qr),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(es))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(on),t.\u0275\u0275inject(Jr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(it),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(Qr),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(es))},token:n,providedIn:"root"}),n})(),sM=(()=>{class n{constructor(e,r){this.processService=e,this.appStateStore=r,this.processType="recover-password"}run(e,r){const o={username:e,useremail:r};return this.appStateStore.updateLoading("recover-password",!0,!1),this.processService.submit(this.processType,o).pipe((0,v.tap)(()=>this.appStateStore.updateLoading("recover-password",!1,!1)),(0,v.catchError)(a=>{throw this.appStateStore.updateLoading("recover-password",!1,!1),a}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ar),t.\u0275\u0275inject(At))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ar),t.\u0275\u0275inject(At))},token:n,providedIn:"root"}),n})(),Q4=(()=>{class n{constructor(e,r){this.systemConfig=e,this.docElement=r}setSystemName(e){(!e||e.length<1)&&(e="SuiteCRM"),this.docElement.documentElement.childNodes.item(0).childNodes.forEach(o=>{"TITLE"===o.nodeName&&(o.textContent=e)})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(_.DOCUMENT))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(_.DOCUMENT))},token:n,providedIn:"root"}),n})(),X4=(()=>{class n{constructor(e){this.http=e}getAll(){return this.http.get("users")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(ii.HttpClient))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(ii.HttpClient))},token:n,providedIn:"root"}),n})(),Y4=(()=>{class n{constructor(e){this.fetchGQL=e}create(){return new bd(this.fetchGQL)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(mr))},token:n,providedIn:"root"}),n})(),eU=(()=>{class n{constructor(e){this.fetchGQL=e}create(){return new pl(this.fetchGQL)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(mr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(mr))},token:n,providedIn:"root"}),n})(),tU=(()=>{class n{constructor(e,r,o,a,s,l,c){this.route=e,this.router=r,this.sanitizer=o,this.routeConverter=a,this.auth=s,this.ngZone=l,this.systemConfigs=c,this.iframe=null}ngOnInit(){this.url=this.route.snapshot.data.legacyUrl}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onPageChange(e){if(!1===this.shouldRedirect(e))return this.iframe.style.display="block",this.cleanObservers(),void this.initObservers();const r=this.routeConverter.toFrontEndRoute(e);"/users/login"!==r?this.ngZone.run(()=>this.router.navigateByUrl(r).then()).then():this.auth.logout("LBL_SESSION_EXPIRED")}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new Tu(this.iframe,this.onPageChange.bind(this),this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new Nu}shouldRedirect(e){if(e&&e.includes("/#/"))return!0;const r=this.routeConverter.parse(e);return!(!r||!r.module||!0===this.routeConverter.matchesActiveRoute(this.route,r))&&(!r.action||this.toExclude(r))}toExclude(e){const r=this.systemConfigs.getConfigValue("classicview_routing_exclusions");if(!r||0===Object.keys(r).length)return!0;if(r.any&&r.any.includes(e.action))return!1;if(!r[e.module])return!0;const o=r[e.module];return!(o&&o.includes(e.action))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(z.ActivatedRoute),t.\u0275\u0275directiveInject(z.Router),t.\u0275\u0275directiveInject(qv.H7),t.\u0275\u0275directiveInject(Tr),t.\u0275\u0275directiveInject(Rn),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-classic-view-ui"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(t_,7),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.dataContainer=o.first)}},decls:3,vars:0,consts:[[1,"classic-view-container"],["dataContainer",""]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0,1),t.\u0275\u0275element(2,"iframe"),t.\u0275\u0275elementEnd())},encapsulation:2}),n})(),nU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule]]}),n})(),rU=(()=>{class n extends Nd{constructor(e,r,o,a,s,l,c,f,u,d,p,h,m){super(e,r,o,a,s,u,l,f,d,p),this.systemConfigStore=e,this.languageStore=r,this.navigationStore=o,this.userPreferenceStore=a,this.themeImagesStore=s,this.moduleNameMapper=l,this.routeConverter=c,this.messageService=f,this.appStateStore=u,this.appMetadata=d,this.auth=p,this.recentlyViewed=h,this.metadataStore=m}resolve(e){const r=this.calculateActiveModule(e);return super.resolve(e).pipe((0,v.concatMap)(()=>(0,w.forkJoin)({metadata:this.metadataStore.load(r,this.metadataStore.getMetadataTypes())})),(0,v.map)(()=>this.routeConverter.toLegacy(e.params,e.queryParams)),(0,v.tap)(()=>{var o;if(e.params.module){const l=this.calculateActiveModule(e);this.appStateStore.setModule(l)}const s=null!==(o=this.routeConverter.parseRouteURL(e.url).action)&&void 0!==o?o:"index";this.appStateStore.setView(s),this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)},()=>{this.addMetadataLoadErrorMessage()}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(on),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Qr),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(es),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(yt),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(Vt),t.\u0275\u0275inject(_r),t.\u0275\u0275inject(on),t.\u0275\u0275inject(Tr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Qr),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(es),t.\u0275\u0275inject(St))},token:n,providedIn:"root"}),n})(),Il=(()=>{class n extends Lr{constructor(e,r,o,a,s,l,c,f,u,d,p,h,m,g,x){super(e,r,o,a,s,l,c,f,u,d,p,h,g,x),this.recordFetchGQL=e,this.recordSaveGQL=r,this.appStateStore=o,this.languageStore=a,this.navigationStore=s,this.moduleNavigation=l,this.metadataStore=c,this.localStorage=f,this.message=u,this.subpanelFactory=d,this.recordManager=p,this.statisticsBatch=h,this.auth=m,this.recordStoreFactory=g,this.preferences=x}init(e,r,o="detail",a={}){var s,l;this.internalState.module=e,this.internalState.recordID=r,this.setMode(o),this.parseParams(a),this.calculateShowWidgets(),this.showTopWidget=!1,this.showSubpanels=!1;const c=null!==(s=this.params.isDuplicate)&&void 0!==s&&s,f=null!==(l=this.params.originalDuplicateId)&&void 0!==l&&l;return!c&&!f&&this.initRecord(a),this.load()}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,w.of)({}))),(0,v.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!1)}))}initRecord(e={}){const r=this.auth.getCurrentUser(),o={id:"",type:"",module:this.internalState.module,attributes:{assigned_user_id:r.id,assigned_user_name:{id:r.id,user_name:r.userName}}};this.recordManager.injectParamFields(e,o,this.getVardefs()),this.recordStore.init(o)}load(){var e,r;return null!==(e=this.params.isDuplicate)&&void 0!==e&&e&&null!==(r=this.params.originalDuplicateId)&&void 0!==r&&r?(this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.recordStore.retrieveRecord(this.internalState.module,this.params.originalDuplicateId,!1).pipe((0,v.tap)(o=>{o.id="",o.attributes.id="",o.attributes.date_entered="",this.recordManager.injectParamFields(this.params,o,this.getVardefs()),this.recordStore.setRecord(o),this.updateState(Object.assign(Object.assign({},this.internalState),{module:o.module,loading:!1}))}))):(0,w.of)(this.recordStore.getBaseRecord()).pipe((0,v.shareReplay)())}calculateShowWidgets(){this.showSidebarWidgets=!1,this.widgets=!1}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(At),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(tr),t.\u0275\u0275inject(xn),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Fr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(zu),t.\u0275\u0275inject(er),t.\u0275\u0275inject(Wu),t.\u0275\u0275inject(Rn),t.\u0275\u0275inject(Hi),t.\u0275\u0275inject(Vt))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),iU=(()=>{class n{constructor(e,r,o){this.appState=e,this.recordStore=r,this.route=o,this.vm$=null,this.showStatusBar=!1}ngOnInit(){let e="detail";const r=this.route.snapshot&&this.route.snapshot.data||{};r.mode&&(e=r.mode);let o=this.route.snapshot&&this.route.snapshot.queryParams||{};o=Object.assign({},o);let a=this.route.snapshot.params.record;!0===r.duplicate&&(o.originalDuplicateId=a,o.isDuplicate=!0,a=""),this.recordSub=this.recordStore.init(this.appState.getModule(),a,e,o).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.recordStore.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(At),t.\u0275\u0275directiveInject(Il),t.\u0275\u0275directiveInject(z.ActivatedRoute))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-create-record"]],features:[t.\u0275\u0275ProvidersFeature([Il,{provide:Lr,useExisting:Il}])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,bk,6,1,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:function(){return[_.NgIf,Zd,Wd,Hu]},pipes:function(){return[_.AsyncPipe]},encapsulation:2}),n})(),Td=(()=>{class n{constructor(e,r){this.store=e,this.metadata=r,this.config$=(0,w.combineLatest)([this.metadata.recordViewMetadata$,this.store.showSidebarWidgets$]).pipe((0,v.map)(([o,a])=>(o.sidebarWidgets&&o.sidebarWidgets.length&&o.sidebarWidgets.forEach(s=>{s&&"data-update"===s.refreshOn&&(s.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),s&&(s.subpanelReload$=this.store.subpanelReload$)}),{widgets:o.sidebarWidgets||[],show:a})))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Lr),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();class bi extends D.ActionHandler{checkRecordAccess(i,e=[]){var r,o;const s=null!==(r=i.store.recordStore.getBaseRecord().acls)&&void 0!==r?r:[];if(!s||!s.length)return!1;const l=null!==(o=i.action)&&void 0!==o?o:null;return this.checkAccess(l,s,e)}navigateBack(i,e,r,o,a){let s=i.getReturnModule(e),l=i.getReturnAction(e),c=i.getReturnId(e);r!==c&&(s===o&&"record"===l&&c!==r||!s||!l||i.navigateBack(a,o,e))}}let Ld=(()=>{class n extends bi{constructor(e,r){super(),this.modalService=e,this.navigation=r,this.key="cancel",this.modes=["edit","detail"]}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const r=e.store.params,o=e.store.getModuleName(),a=e.store.getRecordId(),s=e.store.getBaseRecord();this.navigateBack(this.navigation,r,a,o,s),e.store.recordStore.resetStaging(),e.store.setMode("detail")}showConfirmationModal(e){const r=this.modalService.open(Ha);r.componentInstance.textKey="WARN_UNSAVED_CHANGES",r.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:o=>o.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:o=>{this.cancel(e),o.close()}}]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(xn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(xn))},token:n,providedIn:"root"}),n})(),Rd=(()=>{class n extends bi{constructor(e,r){super(),this.message=e,this.navigation=r,this.key="save",this.modes=["edit"]}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(r=>{r?e.store.save().pipe((0,v.take)(1)).subscribe(o=>{const a=e.store.params,s=e.store.getModuleName();this.navigateBack(this.navigation,a,o.id,s,o)}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(xn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(xn))},token:n,providedIn:"root"}),n})(),Od=(()=>{class n extends bi{constructor(){super(),this.key="toggle-widgets",this.modes=["detail","edit"]}run(e){e.store.showSidebarWidgets=!e.store.showSidebarWidgets}shouldDisplay(e){return e.store.widgets}getStatus(e){return e.store.showSidebarWidgets?"active":""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),jd=(()=>{class n extends bi{constructor(){super(),this.key="edit",this.modes=["detail"]}run(e){e.store.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Bd=(()=>{class n extends bi{constructor(e,r){super(),this.moduleNameMapper=e,this.router=r,this.key="create",this.modes=["detail"]}run(e){const r=e.store,o=r.getBaseRecord(),a="/"+r.vm.appData.module.name+"/edit",s=this.moduleNameMapper.toLegacy(r.vm.appData.module.name);this.router.navigate([a],{queryParams:{return_module:s,return_action:"DetailView",return_record:o&&o.id||""}}).then()}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(on),t.\u0275\u0275inject(z.Router))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(on),t.\u0275\u0275inject(z.Router))},token:n,providedIn:"root"}),n})(),Pd=(()=>{class n extends bi{constructor(e,r){super(),this.message=e,this.navigation=r,this.key="saveNew",this.modes=["create"]}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(r=>{r?e.store.save().pipe((0,v.take)(1)).subscribe(o=>{const a=e.store,s=a.params,l=a.getModuleName();this.navigation.navigateBack(o,l,s)}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(xn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(xn))},token:n,providedIn:"root"}),n})(),kd=(()=>{class n extends bi{constructor(e,r,o,a){super(),this.modalService=e,this.router=r,this.moduleNameMapper=o,this.actionNameMapper=a,this.key="cancelCreate",this.modes=["create"]}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const r=e.store;let o=r.getModuleName();r.params.return_module&&(o=this.moduleNameMapper.toFrontend(r.params.return_module));let a=r.params.return_action||"";const s=r.params.return_id||"";let l="/"+o;a&&(a=this.actionNameMapper.toFrontend(a),("record"!==a||s)&&(l+="/"+a)),s&&(l+="/"+s),this.router.navigate([l]).then()}showConfirmationModal(e){const r=this.modalService.open(Ha);r.componentInstance.textKey="WARN_UNSAVED_CHANGES",r.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:o=>o.dismiss()},{labelKey:"LBL_OK",klass:["btn-main"],onClick:o=>{this.cancel(e),o.close()}}]}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(on),t.\u0275\u0275inject(Jr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(on),t.\u0275\u0275inject(Jr))},token:n,providedIn:"root"}),n})(),Ud=(()=>{class n extends bi{constructor(){super(),this.key="async-process",this.modes=D.ALL_VIEW_MODES}run(e){}shouldDisplay(e){var r,o;const a=null!==(o=null===(r=null==e?void 0:e.action)||void 0===r?void 0:r.acl)&&void 0!==o?o:[];return!a.length||this.checkRecordAccess(e,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Vd=(()=>{class n extends vi{constructor(e,r,o,a,s,l,c,f){super(),this.edit=e,this.create=r,this.toggleWidgets=o,this.cancel=a,this.cancelCreate=s,this.save=l,this.saveNew=c,this.async=f,e.modes.forEach(u=>this.actions[u][e.key]=e),r.modes.forEach(u=>this.actions[u][r.key]=r),o.modes.forEach(u=>this.actions[u][o.key]=o),a.modes.forEach(u=>this.actions[u][a.key]=a),l.modes.forEach(u=>this.actions[u][l.key]=l),c.modes.forEach(u=>this.actions[u][c.key]=c),s.modes.forEach(u=>this.actions[u][s.key]=s),f.modes.forEach(u=>this.actions[u][f.key]=f)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(jd),t.\u0275\u0275inject(Bd),t.\u0275\u0275inject(Od),t.\u0275\u0275inject(Ld),t.\u0275\u0275inject(kd),t.\u0275\u0275inject(Rd),t.\u0275\u0275inject(Pd),t.\u0275\u0275inject(Ud))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(jd),t.\u0275\u0275inject(Bd),t.\u0275\u0275inject(Od),t.\u0275\u0275inject(Ld),t.\u0275\u0275inject(kd),t.\u0275\u0275inject(Rd),t.\u0275\u0275inject(Pd),t.\u0275\u0275inject(Ud))},token:n,providedIn:"root"}),n})(),$d=(()=>{class n{constructor(e,r,o,a){this.store=e,this.metadata=r,this.language=o,this.actions=a}getEditAction(){const e={store:this.store};this.actions.run({key:"edit"},this.store.getMode(),e)}getDisplayConfig(){return(0,w.combineLatest)([this.metadata.recordViewMetadata$,this.store.mode$]).pipe((0,v.map)(([e,r])=>({layout:this.getLayout(e),mode:r,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return(0,w.combineLatest)([this.metadata.recordViewMetadata$,this.store.stagingRecord$,this.language.vm$]).pipe((0,v.map)(([e,r,o])=>{const a=[],s=r&&r.module||"";return e.panels.forEach(l=>{const f={label:this.language.getFieldLabel(l.key.toUpperCase(),s,o),key:l.key,rows:[]};l.rows.forEach(u=>{const d={cols:[]};u.cols.forEach(p=>{d.cols.push(Object.assign({},p))}),f.rows.push(d)}),a.push(f)}),a}))}getRecord(){return this.store.stagingRecord$}getLayout(e){let r="panels";return e.templateMeta.useTabs&&(r="tabs"),r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Lr),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Vd))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),zd=(()=>{class n{constructor(e,r){this.store=e,this.metadata=r,this.config$=(0,w.combineLatest)([this.metadata.recordViewMetadata$,this.store.showTopWidget$]).pipe((0,v.map)(([o,a])=>(o.topWidget&&"data-update"===o.topWidget.refreshOn&&(o.topWidget.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),{widget:o.topWidget,show:a})))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Lr),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Gd=(()=>{class n{constructor(e,r){this.store=e,this.metadata=r,this.config$=(0,w.combineLatest)([this.metadata.recordViewMetadata$,this.store.widgets$]).pipe((0,v.map)(([o,a])=>(o.bottomWidgets&&o.bottomWidgets.length&&o.bottomWidgets.forEach(s=>{s&&"data-update"===s.refreshOn&&(s.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),s&&(s.subpanelReload$=this.store.subpanelReload$)}),{widgets:o.bottomWidgets||[],show:a})))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Lr),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Wd=(()=>{class n{constructor(e,r,o,a,s,l,c){this.recordViewStore=e,this.language=r,this.metadata=o,this.contentAdapter=a,this.topWidgetAdapter=s,this.sidebarWidgetAdapter=l,this.bottomWidgetAdapter=c,this.loading=!0,this.language$=this.language.vm$,this.vm$=(0,w.combineLatest)([this.language$,this.sidebarWidgetAdapter.config$,this.bottomWidgetAdapter.config$,this.topWidgetAdapter.config$,this.recordViewStore.showSubpanels$]).pipe((0,v.map)(([f,u,d,p,h])=>({language:f,sidebarWidgetConfig:u,bottomWidgetConfig:d,topWidgetConfig:p,showSubpanels:h}))),this.subs=[]}ngOnInit(){this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getContentAdapter(){return this.contentAdapter}getSubpanelsConfig(){return{parentModule:this.recordViewStore.getModuleName(),subpanels$:this.recordViewStore.subpanels$,sidebarActive$:this.recordViewStore.widgets$}}getViewContext(){return this.recordViewStore.getViewContext()}getViewContext$(){return this.recordViewStore.viewContext$}hasTopWidgetMetadata(e){return!(!e||!e.type)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Lr),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(St),t.\u0275\u0275directiveInject($d),t.\u0275\u0275directiveInject(zd),t.\u0275\u0275directiveInject(Td),t.\u0275\u0275directiveInject(Gd))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-container"]],features:[t.\u0275\u0275ProvidersFeature([$d,zd,Td,Gd])],decls:2,vars:3,consts:[["class","record-view-container view-container container-fluid pt-3 pb-3 small-font",4,"ngIf"],[1,"record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row"],[1,"col-lg-9",3,"ngClass"],[1,"container-fluid","pl-0","pr-0"],["class","row no-gutters",4,"ngIf"],[4,"ngIf"],[1,"row","no-gutters"],[1,"col"],["class","row no-gutters mt-4",4,"ngIf"],["class","row no-gutters pt-1 pb-4",4,"ngIf"],["class","col-lg-3 record-widget-container pl-0",4,"ngIf"],[1,"col","pb-3"],[1,"d-flex","justify-content-center","widget-bar","rounded","pb-1","pt-3","box-loading"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[3,"config","context","type"],[3,"dataSource"],[1,"row","no-gutters","mt-4"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context$","context","type"],[1,"row","no-gutters","pt-1","pb-4"],[3,"config"],[1,"col-lg-3","record-widget-container","pl-0"],[3,"type","context","context$","config"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,Nk,13,10,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,_.NgClass,iM,Wb,Uu,_.NgForOf,Dd,X0],pipes:[_.AsyncPipe],encapsulation:2}),n})(),Kd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Wi,O.AngularSvgIconModule,Y0,Vu,oM,Id,Kb]]}),n})(),Hd=(()=>{class n extends Zi{constructor(e,r,o,a,s,l,c,f){super(a,s,l,c,o,f,r),this.store=e,this.metadata=r,this.language=o,this.actionManager=a,this.asyncActionService=s,this.message=l,this.confirmation=c,this.selectModalService=f,this.defaultActions={detail:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}],edit:[{key:"cancel",labelKey:"LBL_CANCEL",params:{expanded:!0},acl:[]},{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}],create:[{key:"cancelCreate",labelKey:"LBL_CANCEL",params:{expanded:!0},acl:[]}]}}getActions(e){return(0,w.combineLatest)([this.metadata.recordViewMetadata$,this.store.mode$,this.store.record$,this.store.language$,this.store.widgets$]).pipe((0,v.map)(([r,o])=>o&&r?this.parseModeActions(r.actions,o,this.store.getViewContext()):[]))}buildActionData(e,r){return{store:this.store,action:e}}buildActionInput(e,r,o,a=null){const s=this.store.getBaseRecord();return this.message.removeMessages(),{action:r,module:s.module,id:s.id,params:e&&e.params||[]}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,r,o){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Lr),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Vd),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Zd=(()=>{class n{constructor(e,r,o){this.actionsAdapter=e,this.recordViewStore=r,this.moduleNavigation=o,this.displayResponsiveTable=!1,this.mode="detail",this.loading=!0,this.subs=[]}ngOnInit(){this.mode=this.recordViewStore.getMode(),this.subs.push(this.recordViewStore.mode$.subscribe(e=>{this.mode=e})),this.subs.push(this.recordViewStore.record$.subscribe(e=>{this.record=e})),this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.recordViewStore.vm.appData.module,this.recordViewStore.vm.appData.language.appListStrings)}getSummaryTemplate(){return this.recordViewStore.getSummaryTemplate()}getActionContext(e){return e?{module:e.module||"",record:e}:{}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Hd),t.\u0275\u0275directiveInject(Lr),t.\u0275\u0275directiveInject(xn))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record-header"]],features:[t.\u0275\u0275ProvidersFeature([Hd])],decls:4,vars:2,consts:[[1,"record-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"col"],[1,"order-3"],[1,"w-100"],[1,"order-2"],[1,"record-view-title",3,"title"],[1,"record-view-name","d-flex"],[3,"fields","labelKey",4,"ngIf"],["class","pl-1 d-flex align-items-top",4,"ngIf"],["class","order-1",4,"ngIf"],[3,"fields","labelKey"],[1,"pl-1","d-flex","align-items-top"],[3,"record"],[1,"order-1"],["klass","record-view-actions float-right",3,"config"],["class","row mr-0",4,"ngIf"],[1,"row","mr-0"],[1,"col-md-4"],[1,"record-view-name","pt-3","pb-3"],[1,"col-md-8"],[1,"row","mr-1","ml-1"],["class","w-100",4,"ngIf"],["klass","record-view-actions float-right","buttonClass","settings-button",3,"config","actionContext"]],template:function(e,r){1&e&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",0),t.\u0275\u0275template(2,Ok,15,4,"ng-container",1),t.\u0275\u0275template(3,Vk,2,2,"ng-template",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.displayResponsiveTable),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.displayResponsiveTable))},directives:[_.NgIf,Bu,Ra,h0,Aa],encapsulation:2}),n})(),qd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Za,Oa,Na,g0]]}),n})(),oU=(()=>{class n{constructor(e,r,o){this.appState=e,this.recordStore=r,this.route=o,this.vm$=null,this.showStatusBar=!1}ngOnInit(){let e="detail";const r=this.route.snapshot&&this.route.snapshot.data||{};r.mode&&(e=r.mode);const o=this.route.snapshot&&this.route.snapshot.queryParams||{};this.recordSub=this.recordStore.init(this.appState.getModule(),this.route.snapshot.params.record,e,o).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.recordStore.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(At),t.\u0275\u0275directiveInject(Lr),t.\u0275\u0275directiveInject(z.ActivatedRoute))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-record"]],features:[t.\u0275\u0275ProvidersFeature([Lr])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,zk,6,1,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,Zd,Wd,Hu],pipes:[_.AsyncPipe],encapsulation:2}),n})(),lM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,cr,Kd,qd,Qu,Dl]]}),n})(),aU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,cr,lM,Kd,qd,Qu,Dl]]}),n})();class cM extends D.ActionHandler{}let Jd=(()=>{class n extends cM{constructor(e,r,o,a,s,l){super(),this.message=e,this.asyncActionService=r,this.router=o,this.modalService=a,this.state=s,this.localStorage=l,this.key="install",this.modes=["edit"]}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(r=>{if(r){const o=e.store.recordStore.getStaging();this.runInstall(o)}else this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}runInstall(e){const r=`suitecrm-app-${this.key}`;this.message.removeMessages(),this.asyncActionService.run(r,{action:r,module:e.module,id:e.id,payload:e.formGroup.value}).pipe((0,v.take)(1)).subscribe(a=>{3===a.data.statusCode&&this.openErrorModalDialog(a.data.errors),0===a.data.statusCode&&(this.state.clear(),this.localStorage.clear(),this.router.navigate(["/"],{}).then())})}openErrorModalDialog(e){this.modalService.open(Eu,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"custom-modal",modalDialogClass:"custom-modal"}).componentInstance.errors=e}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(za),t.\u0275\u0275inject(Fr))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(z.Router),t.\u0275\u0275inject(be.NgbModal),t.\u0275\u0275inject(za),t.\u0275\u0275inject(Fr))},token:n,providedIn:"root"}),n})(),Qd=(()=>{class n extends vi{constructor(e){super(),this.save=e,e.modes.forEach(r=>this.actions[r][e.key]=e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Jd))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Jd))},token:n,providedIn:"root"}),n})();const uM={loading:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let sa=(()=>{class n{constructor(e,r,o,a,s,l){this.recordFetchGQL=e,this.recordSaveGQL=r,this.message=o,this.recordManager=a,this.recordStoreFactory=s,this.language=l,this.cache$=null,this.internalState=(0,D.deepClone)(uM),this.store=new w.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.recordStore=s.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading)),this.mode$=this.state$.pipe((0,v.map)(c=>c.mode)),this.vm$=(0,w.combineLatest)([this.record$,this.loading$]).pipe((0,v.map)(([c,f])=>(this.vm={record:c,loading:f},this.vm))),this.viewContext$=this.record$.pipe((0,v.map)(()=>this.getViewContext()))}get params(){return this.internalState.params||{}}set params(e){this.updateState(Object.assign(Object.assign({},this.internalState),{params:e}))}getViewContext(){return{record:this.getBaseRecord()}}getActions(){return(0,w.of)([])}init(e="edit",r={}){this.setMode(e),this.recordStore.init({id:"",module:"install",attributes:{}})}clear(){this.cache$=null,this.updateState((0,D.deepClone)(uM))}clearAuthBased(){this.clear()}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}getLicenseText(){return this.language.getFieldLabel("SUITE8_LICENSE_CONTENT")}getMetadata(){return{actions:[],templateMeta:{maxColumns:2,useTabs:!0,tabDefs:{LBL_CONFIG:{newTab:!0,panelDefault:"expanded"}}},panels:[{key:"LBL_CONFIG",rows:[{cols:[{name:"site_host",label:"LBL_SITECFG_URL",type:"varchar",fieldDefinition:{name:"site_host",vname:"LBL_SITECFG_URL",type:"varchar",required:!0}},{name:"demoData",label:"LBL_DBCONF_DEMO_DATA",type:"enum",fieldDefinition:{name:"demoData",vname:"LBL_DBCONF_DEMO_DATA",type:"enum",options:"__no_options__",required:!0,metadata:{extraOptions:[{value:"yes",labelKey:"LBL_YES"},{value:"no",labelKey:"LBL_NO"}]}}}]},{cols:[{name:"db_config",label:"LBL_DBCONF_TITLE",type:"grouped-field",fieldDefinition:{name:"db_config",vname:"LBL_DBCONF_TITLE",type:"grouped-field",layout:["db_username","db_password","db_host","db_name","db_port"],display:"vertical",groupFields:{db_username:{name:"db_username",type:"varchar",vname:"LBL_DBCONF_SUITE_DB_USER",labelKey:"LBL_DBCONF_SUITE_DB_USER",label:"LBL_DBCONF_SUITE_DB_USER",showLabel:["*"],required:!0},db_password:{name:"db_password",type:"password",vname:"LBL_DBCONF_DB_PASSWORD",labelKey:"LBL_DBCONF_DB_PASSWORD",showLabel:["*"],required:!0},db_host:{name:"db_host",type:"varchar",vname:"LBL_DBCONF_HOST_NAME",labelKey:"LBL_DBCONF_HOST_NAME",showLabel:["*"],required:!0},db_name:{name:"db_name",type:"varchar",vname:"LBL_DBCONF_DB_NAME",labelKey:"LBL_DBCONF_DB_NAME",showLabel:["*"],required:!0},db_port:{name:"db_port",type:"varchar",vname:"LBL_DBCONF_DB_PORT",labelKey:"LBL_DBCONF_DB_PORT",showLabel:["*"],required:!1}},showLabel:{edit:["*"]}}},{name:"admin_config",label:"LBL_SITECFG_TITLE",type:"grouped-field",fieldDefinition:{name:"admin_config",vname:"LBL_SITECFG_TITLE",type:"grouped-field",layout:["site_username","site_password"],display:"vertical",groupFields:{site_username:{name:"site_username",type:"varchar",vname:"LBL_SITECFG_ADMIN_Name",labelKey:"LBL_SITECFG_ADMIN_Name",showLabel:["edit"],required:!0},site_password:{name:"site_password",type:"password",vname:"LBL_SITECFG_ADMIN_PASS",labelKey:"LBL_SITECFG_ADMIN_PASS",showLabel:["edit"],required:!0}},showLabel:{edit:["*"]}}}]}]}]}}getMetadata$(){return(0,w.of)(this.getMetadata())}getModuleName(){return"install"}parseParams(e={}){if(!e)return;const r=Object.assign({},this.internalState.params);Object.keys(e).forEach(o=>{(0,D.isVoid)(r[o])||(r[o]=e[o])}),this.params=e}updateState(e){this.store.next(this.internalState=e)}getIgnoreSystemChecksField(){return this.recordStore.getStaging().fields.sys_check_option}getViewFieldsObservable(){return this.getMetadata$().pipe((0,v.map)(e=>{const r=[];return e.panels.forEach(o=>{o.rows.forEach(a=>{a.cols.forEach(s=>{r.push(s)})})}),r.push({name:"sys_check_option",type:"boolean",fieldDefinition:{name:"sys_check_option",type:"boolean",vname:"LBL_SYS_CHECK_WARNING",labelKey:"LBL_SYS_CHECK_WARNING",showLabel:["edit"],required:!1,value:"false",default:"false"}}),r}))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(kr),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(it),t.\u0275\u0275inject(er),t.\u0275\u0275inject(Hi),t.\u0275\u0275inject(Ke))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Xd=(()=>{class n extends Zi{constructor(e,r,o,a,s,l,c,f){super(a,s,l,c,o,f,r),this.store=e,this.metadata=r,this.language=o,this.actionManager=a,this.asyncActionService=s,this.message=l,this.confirmation=c,this.selectModalService=f,this.defaultActions={detail:[],edit:[{key:"install",labelKey:"LBL_PROCEED",params:{expanded:!0},acl:[]}],create:[]}}getActions(e){return(0,w.combineLatest)([this.store.getActions(),this.store.mode$,this.store.stagingRecord$]).pipe((0,v.map)(([r,o])=>o?this.parseModeActions(r,o,this.store.getViewContext()):[]))}buildActionData(e,r){return{store:this.store}}buildActionInput(e,r,o,a=null){const s=this.store.getBaseRecord();return this.message.removeMessages(),{action:r,module:s.module,id:s.id,record:s}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,r,o){}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(sa),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Qd),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Yd=(()=>{class n{constructor(e,r,o,a){this.store=e,this.metadata=r,this.language=o,this.actions=a}getEditAction(){}getDisplayConfig(){return(0,w.combineLatest)([this.store.getMetadata$(),this.store.mode$]).pipe((0,v.map)(([e,r])=>({layout:this.getLayout(e),mode:r,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return(0,w.combineLatest)([this.store.getMetadata$(),this.store.stagingRecord$,this.language.vm$]).pipe((0,v.map)(([e,r,o])=>{const a=[],s=r&&r.module||"";return e.panels.forEach(l=>{const f={label:this.language.getFieldLabel(l.key.toUpperCase(),s,o),key:l.key,rows:[]};l.rows.forEach(u=>{const d={cols:[]};u.cols.forEach(p=>{d.cols.push(Object.assign({},p))}),f.rows.push(d)}),a.push(f)}),a}))}getRecord(){return this.store.stagingRecord$}getLayout(e){let r="panels";return e.templateMeta.useTabs&&(r="tabs"),r}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(sa),t.\u0275\u0275inject(St),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Qd))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),dM=(()=>{class n{constructor(e,r){this.metadata=e,this.contentAdapter=r}getContentAdapter(){return this.contentAdapter}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(St),t.\u0275\u0275directiveInject(Yd))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-install-container"]],features:[t.\u0275\u0275ProvidersFeature([Yd])],decls:4,vars:1,consts:[[1,"install-view-container","record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row","no-gutters"],[1,"col"],[3,"dataSource"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"scrm-record-content",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("dataSource",r.getContentAdapter()))},directives:[Uu],encapsulation:2}),n})(),fM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,O.AngularSvgIconModule,Vu]]}),n})(),pM=(()=>{class n{constructor(e,r){this.actionsAdapter=e,this.store=r,this.vm$=(0,w.combineLatest)([this.store.record$]).pipe((0,v.map)(([o])=>({record:o})))}getActionContext(e){return e?{module:e.module||"",record:e}:{}}getTitle(){}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(Xd),t.\u0275\u0275directiveInject(sa))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-install-header"]],features:[t.\u0275\u0275ProvidersFeature([Xd])],decls:2,vars:3,consts:[[4,"ngIf"],[1,"install-view-header"],[1,"row","mr-0"],[1,"col-md-4","install-header-title-col"],[1,"install-view-title","record-view-name"],["labelKey","LBL_WELCOME","module","install"],[1,"install-view-subtitle","record-view-title"],["labelKey","LBL_INSTALL","module","install"],[1,"col-md-8","install-header-buttons-col"],[1,"row","mr-1","ml-1"],[1,"w-100","d-flex","justify-content-end","align-items-center"],[1,"w-100","install-header-options","d-flex","justify-content-end","align-items-center","pr-5"],[1,"label-container","pr-2"],[1,"m-0","small"],[3,"labelKey"],[1,"d-flex"],[1,"flex-grow-1","text-break"],[3,"field","mode","record","type"],["buttonClass","settings-button","klass","install-view-actions float-right",3,"actionContext","config"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,Gk,21,7,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,gn,yi,Aa],pipes:[_.AsyncPipe],encapsulation:2}),n})(),mM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Za,Na,dn,cr]]}),n})(),sU=(()=>{class n{constructor(e,r){this.store=e,this.route=r,this.vm$=null,this.showStatusBar=!1}ngOnInit(){let e="edit";const r=this.route.snapshot&&this.route.snapshot.data||{};r.mode&&(e=r.mode),this.store.init(e),this.vm$=this.store.vm$}ngOnDestroy(){this.store.clear()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(sa),t.\u0275\u0275directiveInject(z.ActivatedRoute))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-install-view"]],features:[t.\u0275\u0275ProvidersFeature([sa])],decls:2,vars:3,consts:[["class","install-view",4,"ngIf"],[1,"install-view"],[1,"record-view-hr-container"],[1,"record-view-hr"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,Wk,5,0,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,pM,dM],pipes:[_.AsyncPipe],encapsulation:2}),n})(),lU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,cr,mM,fM]]}),n})();class ef extends x0{}let tf=(()=>{class n extends ef{constructor(){super(),this.key="cancel",this.modes=["detail","edit","list","create","massupdate"]}run(e){e.listStore.closeRecordPanel()}shouldDisplay(){return!0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n})(),nf=(()=>{class n extends ef{constructor(e,r,o,a){super(),this.message=e,this.asyncActionService=r,this.confirmation=o,this.asyncAction=a,this.key="bulk-action",this.modes=["detail","edit","list","create","massupdate"]}run(e){const r=e.action,o=e.listStore.recordList.selection,a=r&&r.params||{};if((0,D.isFalse)(a.allowAll)&&o.all)this.message.addDangerMessage(e.listStore.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);else{if(a.min&&o.count<a.min){let s=e.listStore.appStrings.LBL_TOO_FEW_SELECTED;return s=s.replace("{min}",a.min),void this.message.addDangerMessage(s)}if(a.max&&o.count>a.max){let s=e.listStore.appStrings.LBL_TOO_MANY_SELECTED;return s=s.replace("{max}",a.max),void this.message.addDangerMessage(s)}this.runBulkAction(e)}}shouldDisplay(){return!0}runBulkAction(e){const r=`bulk-${e.action.params.bulkAction}`,o=this.buildActionInput(r,e);this.asyncAction.run(r,o).subscribe(a=>{this.handleProcessResult(a,e)})}buildActionInput(e,r){const o=[];r.listStore.metadata.listView.fields.forEach(l=>{o.push(l.name)});const a={action:e,module:r.listStore.getModuleName(),criteria:null,sort:null,ids:null,fields:o,payload:{panelRecord:r.store.recordStore.getBaseStaging()}},s=r.listStore.recordList.selection;return s.all&&s.count>r.listStore.recordList.records.length&&(a.criteria=r.listStore.recordList.criteria,a.sort=r.listStore.recordList.sort),s.all&&s.count<=r.listStore.recordList.records.length&&(a.ids=[],r.listStore.recordList.records.forEach(l=>{r.ids.push(l.id)})),s.all||(a.ids=Object.keys(s.selected)),a}handleProcessResult(e,r){e.data&&e.data.reload&&(r.listStore.recordList.clearSelection(),r.listStore.load(!1).pipe((0,v.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&r.listStore.triggerDataUpdate(),r.listStore.closeRecordPanel()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(In),t.\u0275\u0275inject(tn))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(In),t.\u0275\u0275inject(tn))},token:n,providedIn:"root"}),n})(),Fl=(()=>{class n extends vi{constructor(e,r){super(),e.modes.forEach(o=>this.actions[o][e.key]=e),r.modes.forEach(o=>this.actions[o][r.key]=r)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(nf),t.\u0275\u0275inject(tf))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(nf),t.\u0275\u0275inject(tf))},token:n,providedIn:"root"}),n})(),hM=(()=>{class n{constructor(e,r,o,a,s,l){this.store=e,this.message=r,this.confirmation=o,this.selectModalService=a,this.asyncAction=s,this.metadata=l}getBulkActions(){return this.store.metadata$.pipe((0,v.map)(e=>e.listView.bulkActions))}executeBulkAction(e){const r=this.store.recordList.selection,o=this.store.metadata.listView.bulkActions[e],a=`bulk-${e}`;if(this.message.removeMessages(),(0,D.isFalse)(o.params.allowAll)&&r.all)return void this.message.addDangerMessage(this.store.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);if(o.params.min&&r.count<o.params.min){let m=this.store.appStrings.LBL_TOO_FEW_SELECTED;return m=m.replace("{min}",o.params.min),void this.message.addDangerMessage(m)}if(o.params.max&&r.count>o.params.max){let m=this.store.appStrings.LBL_TOO_MANY_SELECTED;return m=m.replace("{max}",o.params.max),void this.message.addDangerMessage(m)}const s=[];this.store.metadata.listView.fields.forEach(m=>{s.push(m.name)});const l={action:a,module:this.store.getModuleName(),criteria:null,sort:null,ids:null,fields:s};r.all&&r.count>this.store.recordList.records.length&&(l.criteria=this.store.recordList.criteria,l.sort=this.store.recordList.sort),r.all&&r.count<=this.store.recordList.records.length&&(l.ids=[],this.store.recordList.records.forEach(m=>{l.ids.push(m.id)})),r.all||(l.ids=Object.keys(r.selected));const c=o&&o.params||{},f=c.displayConfirmation||!1,u=c.confirmationLabel||"",d=o.params&&o.params.selectModal,p=d&&d.module,h=o.params&&o.params.recordPanel;h?this.store.openRecordPanel(h):f?this.confirmation.showModal(u,()=>{p?this.showSelectModal(d.module,a,l):this.runBulkAction(a,l)}):p?this.showSelectModal(d.module,a,l):this.runBulkAction(a,l)}showSelectModal(e,r,o){this.selectModalService.showSelectModal(e,a=>{if(a){const c=(0,B._T)(a,["fields","formGroup"]);o.modalRecord=c}this.runBulkAction(r,o)})}runBulkAction(e,r){this.asyncAction.run(e,r).subscribe(o=>{this.handleProcessResult(o)})}handleProcessResult(e){e.data&&e.data.reload&&(this.store.recordList.clearSelection(),this.store.load(!1).pipe((0,v.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&this.store.triggerDataUpdate(),this.reloadMetadata(this.store.getModuleName(),e)}reloadMetadata(e,r){const o=[];this.shouldReloadRecentlyViewed(r)&&o.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(r)&&o.push(this.metadata.typeKeys.favorites),o&&o.length&&this.metadata.reloadModuleMetadata(e,o,!1).pipe((0,v.take)(1)).subscribe()}shouldReloadRecentlyViewed(e){return!(!e.data||!e.data.reloadRecentlyViewed)}shouldReloadFavorites(e){return!(!e.data||!e.data.reloadFavorites)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(br),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),gM=(()=>{class n{constructor(e,r,o,a,s){this.message=e,this.confirmation=r,this.selectModalService=o,this.asyncAction=a,this.metadata=s}create(e){return new hM(e,this.message,this.confirmation,this.selectModalService,this.asyncAction,this.metadata)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(St))},token:n,providedIn:"root"}),n})(),rf=(()=>{class n{constructor(e){this.store=e}getConfig(){return{savedFilterEdit:!0,module:this.store.getModuleName(),filter$:this.store.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.metadata$.pipe((0,v.map)(e=>{if(!e||!e.search)return{};const r=e.search;let o="advanced";return r.layout.advanced||(o="basic"),r.layout[o]})),listFields:this.store.metadata.listView.fields,onClose:()=>{this.store.showFilters=!1},onSearch:()=>{this.store.showFilters=!1},updateFilter:(e,r=!0)=>{const o={};o[e.key]=e,this.store.setFilters(o,r)},resetFilter:e=>{this.store.resetFilters(e)},addSavedFilter:e=>{this.store.addSavedFilter(e)},removeSavedFilter:e=>{this.store.removeSavedFilter(e)},setOpenFilter:e=>{this.store.setOpenFilter(e)}}}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(br))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),vM=(()=>{class n extends f0{constructor(e,r,o,a,s,l,c,f){super(r,o,a,s,l,c,f),this.store=e,this.actionManager=r,this.asyncActionService=o,this.message=a,this.confirmation=s,this.language=l,this.selectModalService=c,this.metadata=f}getActions(e=null){return(0,w.combineLatest)([this.store.lineActions$,(0,w.of)("list").pipe((0,v.shareReplay)())]).pipe((0,v.map)(([r,o])=>this.parseModeActions(r,o,e)))}getModuleName(e){return this.store.getModuleName()}reload(e,r,o){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}getMode(){return"list"}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(br),t.\u0275\u0275inject(bl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),_M=(()=>{class n extends Zi{constructor(e,r,o,a,s,l,c,f,u){super(a,s,l,c,o,f,u),this.store=e,this.listStore=r,this.language=o,this.actionManager=a,this.asyncActionService=s,this.message=l,this.confirmation=c,this.selectModalService=f,this.metadata=u}getActions(e){return(0,w.combineLatest)([this.store.meta$,this.store.mode$,this.store.stagingRecord$,this.language.vm$]).pipe((0,v.map)(([r,o])=>o&&r?this.parseModeActions(r.actions,o):[]))}buildActionData(e,r){return{store:this.store,listStore:this.listStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,r,o){this.listStore.load(!1).pipe((0,v.take)(1)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(fd),t.\u0275\u0275inject(br),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Fl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),yM=(()=>{class n{constructor(e,r,o,a,s,l,c){this.language=e,this.actionManager=r,this.asyncActionService=o,this.message=a,this.confirmation=s,this.selectModalService=l,this.metadata=c}create(e,r){return new _M(e,r,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Fl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new n(t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(Fl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Pn),t.\u0275\u0275inject(St))},token:n,providedIn:"root"}),n})(),of=(()=>{class n{constructor(e,r,o,a){this.store=e,this.recordPanelStoreFactory=r,this.actionAdapterFactory=o,this.recordManager=a}getConfig(){const e=this.createStore();return{module:this.getModule(),title:this.store.recordPanelConfig&&this.store.recordPanelConfig.title||"",store:e,meta:this.store.recordPanelConfig,actions:this.createActionAdapter(e),onClose:()=>{this.store.closeRecordPanel()}}}getModule(){return this.store.recordPanelConfig.module||this.store.getModuleName()}getViewMode(){return this.store.recordPanelConfig.mode||"edit"}createStore(){const e=this.recordPanelStoreFactory.create(),r=this.recordManager.buildEmptyRecord(this.getModule());return e.setMetadata(this.store.recordPanelConfig),e.initRecord(r,this.getViewMode(),!1),e}createActionAdapter(e){return this.actionAdapterFactory.create(e,this.store)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(br),t.\u0275\u0275inject(D0),t.\u0275\u0275inject(yM),t.\u0275\u0275inject(er))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),af=(()=>{class n{constructor(e,r){this.store=e,this.metadata=r,this.config$=(0,w.combineLatest)([this.metadata.listMetadata$,this.store.showSidebarWidgets$,this.store.widgets$]).pipe((0,v.map)(([o,a,s])=>(o.sidebarWidgets&&o.sidebarWidgets.length&&o.sidebarWidgets.forEach(l=>{l&&"data-update"===l.refreshOn?l.reload$=this.store.dataSetUpdate$.pipe((0,v.map)(()=>!0)):l&&"data-reload"===l.refreshOn&&(l.reload$=this.store.records$.pipe((0,v.map)(()=>!0)))}),{widgets:o.sidebarWidgets||[],show:a,widgetsEnabled:s})))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(br),t.\u0275\u0275inject(St))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),sf=(()=>{class n{constructor(e,r,o,a,s,l,c,f,u){this.store=e,this.metadata=r,this.actionManager=o,this.asyncActionService=a,this.message=s,this.confirmation=l,this.language=c,this.bulkActionsAdapterFactory=f,this.selectModalService=u}getTable(){return{showHeader:!0,showFooter:!0,module:this.store.getModuleName(),columns:this.store.columns$,lineActions:this.getLineActionsDataSource(),selection$:this.store.selection$,sort$:this.store.sort$,maxColumns$:(0,w.of)(4),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,selection:this.store.recordList,bulkActions:this.getBulkActionsDataSource(this.store),pagination:this.store.recordList,toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,r)=>{this.store.recordList.updateSorting(e,r),this.store.updateSortLocalStorage()}}}getLineActionsDataSource(){return new vM(this.store,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}getBulkActionsDataSource(e){return this.bulkActionsAdapterFactory.create(e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(br),t.\u0275\u0275inject(St),t.\u0275\u0275inject(bl),t.\u0275\u0275inject(tn),t.\u0275\u0275inject(it),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Ke),t.\u0275\u0275inject(gM),t.\u0275\u0275inject(Pn))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),bM=(()=>{class n{constructor(e,r,o,a,s){this.store=e,this.adapter=r,this.maxColumnCalculator=o,this.languageStore=a,this.sidebarWidgetAdapter=s,this.screen=Xn.Medium,this.maxColumns=5,this.vm$=(0,w.combineLatest)([this.sidebarWidgetAdapter.config$]).pipe((0,v.map)(([l])=>({sidebarWidgetConfig:l})))}ngOnInit(){this.tableConfig=this.adapter.getTable(),this.tableConfig.maxColumns$=this.getMaxColumns()}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.store.widgets$)}getDisplayWidgets(){return this.store.widgets&&this.store.showSidebarWidgets}getDisplay(e){let r="none";return e&&(r="block"),r}getViewContext(){return this.store.getViewContext()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(br),t.\u0275\u0275directiveInject(sf),t.\u0275\u0275directiveInject(ho),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(af))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-list-container"]],inputs:{module:"module"},features:[t.\u0275\u0275ProvidersFeature([sf,ho,af])],decls:2,vars:3,consts:[["class","list-view-container container-fluid pt-2",4,"ngIf"],[1,"list-view-container","container-fluid","pt-2"],[1,"row"],[1,"col-lg-9",3,"ngClass"],[3,"config"],[4,"ngIf"],[1,"col-lg-3","list-widget-container","pl-0"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context","context$","type"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,Zk,5,5,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,_.NgClass,_l,_.NgForOf,Dd],pipes:[_.AsyncPipe],encapsulation:2}),n})(),MM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,yl,Wi,O.AngularSvgIconModule,Id]]}),n})(),CM=(()=>{class n{constructor(e,r,o,a){this.filterAdapter=e,this.listStore=r,this.moduleNavigation=o,this.recordPanelAdapter=a,this.displayResponsiveTable=!1,this.actionPanel="",this.subs=[]}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.listStore.vm.appData.module,this.listStore.vm.appData.language.appListStrings)}ngOnInit(){this.listStore.actionPanel$.subscribe(e=>{this.actionPanel=e,this.recordPanelConfig="recordPanel"===this.actionPanel?this.recordPanelAdapter.getConfig():null})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.recordPanelConfig=null}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(rf),t.\u0275\u0275directiveInject(br),t.\u0275\u0275directiveInject(xn),t.\u0275\u0275directiveInject(of))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-list-header"]],features:[t.\u0275\u0275ProvidersFeature([rf,of])],decls:4,vars:2,consts:[[1,"list-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"col"],[1,"order-3"],[1,"w-100"],[1,"order-2"],[1,"list-view-title",3,"title"],[1,"order-1"],[1,"row","mr-0","align-items-center"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","mr-0","ml-1"],[1,"list-view-hr-container"],[1,"list-view-hr"],["class","container-fluid pt-2 small-font",4,"ngIf"],[1,"container-fluid","pt-2","small-font"],[3,"config"]],template:function(e,r){1&e&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",0),t.\u0275\u0275template(2,qk,14,1,"ng-container",1),t.\u0275\u0275template(3,Xk,13,3,"ng-template",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.displayResponsiveTable),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.displayResponsiveTable))},directives:[_.NgIf,r0,Bu,i0,cd,S0],encapsulation:2}),n})(),SM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,Za,qu,Ju,O.AngularSvgIconModule,ud,w0]]}),n})(),cU=(()=>{class n{constructor(e,r){this.appState=e,this.listStore=r,this.vm$=null}ngOnInit(){this.listSub=this.listStore.init(this.appState.getModule()).subscribe(),this.vm$=this.listStore.vm$}ngOnDestroy(){this.listSub&&this.listSub.unsubscribe(),this.listStore.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(At),t.\u0275\u0275directiveInject(br))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-list"]],features:[t.\u0275\u0275ProvidersFeature([br])],decls:2,vars:3,consts:[["class","list-view",4,"ngIf"],[1,"list-view"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,Yk,3,0,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,CM,bM],pipes:[_.AsyncPipe],encapsulation:2}),n})(),uU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,SM,MM,cr]]}),n})(),xM=(()=>{class n{constructor(e,r,o,a,s,l,c){this.router=e,this.auth=r,this.message=o,this.configs=a,this.languageStore=s,this.recoverPasswordService=l,this.appState=c,this.hidden=!0,this.loading=!1,this.error="",this.uname="",this.passw="",this.email="",this.cardState="front",this.systemConfigs$=this.configs.configs$,this.appStrings$=this.languageStore.appStrings$,this.language=null,this.vm$=(0,w.combineLatest)([this.systemConfigs$,this.appStrings$]).pipe((0,v.map)(([f,u])=>{let d=!1,p=!1;return f.languages&&f.languages.items&&(d=Object.keys(f.languages.items).length>1),f.passwordsetting&&f.passwordsetting.items&&(p=[!0,"1","true"].includes(f.passwordsetting.items.forgotpasswordON)),{systemConfigs:f,appStrings:u,showLanguages:d,showForgotPassword:p}})),this.loading=!1,this.hidden=!1,this.language=null}ngOnInit(){this.setCurrentLanguage()}onLanguageSelect(e){!e||e!==this.language&&this.changeLanguage(e)}changeLanguage(e){this.language=e,this.languageStore.changeLanguage(e,!0)}getEnabledLanguages(){return this.languageStore.getEnabledLanguages()}getEnabledLanguagesKeys(){var e,r;return null!==(r=Object.keys(null!==(e=this.languageStore.getEnabledLanguages())&&void 0!==e?e:{}))&&void 0!==r?r:[]}flipCard(){this.cardState="front"===this.cardState?"back":"front"}doLogin(){this.loading=!0,this.auth.doLogin(this.uname,this.passw,this.onLoginSuccess.bind(this),this.onLoginError.bind(this))}recoverPassword(){this.recoverPasswordService.run(this.uname,this.email).subscribe(e=>{this.message.log("Recover Password Status: "+e.status);let r="addSuccessMessageByKey";"error"===e.status&&(r="addDangerMessageByKey"),e.messages&&e.messages.forEach(o=>{this.message[r](o)})},()=>{this.message.log("Recover Password failed"),this.message.addDangerMessageByKey("ERR_AJAX_LOAD_FAILURE")})}onLoginSuccess(e){this.loading=!1,this.message.log("Login success"),this.message.removeMessages(),this.languageStore.setSessionLanguage().pipe((0,v.catchError)(()=>(0,w.of)({}))).subscribe(()=>{if(e&&e.redirect)return void this.router.navigate([e.redirect]).then();if(this.appState.getPreLoginUrl())return void this.router.navigateByUrl(this.appState.getPreLoginUrl()).then(()=>{this.appState.setPreLoginUrl("")});const r=this.configs.getHomePage();this.router.navigate(["/"+r]).then()})}onLoginError(e){var r,o;this.loading=!1,this.message.log("Login failed");let l=this.languageStore.getFieldLabel("LOGIN_INCORRECT");"Too many failed login attempts, please try again in 1 minute."===(null!==(o=null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.error)&&void 0!==o?o:"")&&(l=this.getTooManyFailedMessage("Too many failed login attempts, please try again later.")),l||(l="Login credentials incorrect, please try again."),this.message.addDangerMessage(l)}getTooManyFailedMessage(e){let r=this.languageStore.getFieldLabel("LOGIN_TOO_MANY_FAILED");return r||(r=e),r}setCurrentLanguage(){var e,r;let o=null!==(e=this.languageStore.getSelectedLanguage())&&void 0!==e?e:"";const a=this.languageStore.getActiveLanguage();if(o||(o=a),this.languageStore.isLanguageEnabled(o)||(o=""),this.language&&o===this.language)return;const s=null!==(r=this.configs.getConfigValue("default_language"))&&void 0!==r?r:"en_us";o||(o=s),this.languageStore.isLanguageEnabled(o)||(o=this.languageStore.getFirstLanguage()),this.language=o,this.changeLanguage(o)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(z.Router),t.\u0275\u0275directiveInject(Rn),t.\u0275\u0275directiveInject(it),t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(Ke),t.\u0275\u0275directiveInject(sM),t.\u0275\u0275directiveInject(At))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-login-ui"]],decls:2,vars:3,consts:[["class","login-view full-height-view d-flex align-items-center",4,"ngIf"],[1,"login-view","full-height-view","d-flex","align-items-center"],["name","login",1,"login-form"],["loginForm","ngForm"],[1,"form-row","form-group"],[1,"col"],["class","form-row",4,"ngIf"],[1,"form-row","fade-card"],["class","fade-card-front col",4,"ngIf"],["class","fade-card-back col",4,"ngIf"],[1,"form-row"],["for","languages",1,""],[1,"w-100"],[1,"inner-addon","left-addon"],["id","languages",3,"change"],["languageSelect",""],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"fade-card-front","col"],["image","login_user"],["type","text","name","username","aria-label","Username","required","",3,"ngModel","placeholder","ngModelChange"],["username","ngModel"],["class","invalid-feedback",4,"ngIf"],["image","login_password"],["type","password","name","password","aria-label","Password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],["id","login-button",1,"login-button",3,"scrm-button-loading","click"],["class","forgotten-password",4,"ngIf"],[1,"invalid-feedback"],[1,"forgotten-password"],[1,"forgotten-password-link",3,"click"],[1,"fade-card-back","col"],["image","email"],["type","email","name","email","aria-label","Email","required","",3,"ngModel","placeholder","ngModelChange"],["mail","ngModel"],["scrm-button-loading","",1,"submit-button","login-button",3,"click"],[1,"back-link","forgotten-password-link",3,"click"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,c4,10,3,"div",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},directives:[_.NgIf,y.\u0275NgNoValidate,y.NgControlStatusGroup,y.NgForm,ml,_.NgForOf,y.NgSelectOption,y.\u0275NgSelectMultipleOption,An,y.DefaultValueAccessor,y.RequiredValidator,y.NgControlStatus,y.NgModel,yc],pipes:[_.AsyncPipe],encapsulation:2,data:{animation:[(0,Xt.trigger)("fade",[(0,Xt.transition)(":enter",(0,Xt.useAnimation)(As.fadeIn,{params:{timing:.5,delay:0}}))])]}}),n})();const wM=[{path:"",component:xM}];let dU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[y.FormsModule,hl,z.RouterModule.forChild(wM),_.CommonModule,O.AngularSvgIconModule,En,bc]]}),n})(),fU=(()=>{class n{constructor(e){this.configs=e}getLoginURL(){return"./"}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(yt))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["scrm-logout"]],decls:11,vars:1,consts:[[1,"logged-out-view","full-height-view","d-flex","flex-column","align-items-center","justify-content-center"],[1,"logo-row","full-height-view-row"],[1,"mt-3","mb-1","page-title","full-height-view-row"],["labelKey","LBL_LOGGED_OUT_MESSAGE"],[1,"page-subtitle","full-height-view-row"],["labelKey","LBL_LOGIN_AGAIN"],[1,"text-lowercase",3,"href"],["labelKey","LBL_CLICK_HERE"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"scrm-logo-ui"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275elementStart(4,"h2"),t.\u0275\u0275element(5,"scrm-label",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",4),t.\u0275\u0275elementStart(7,"h5"),t.\u0275\u0275element(8,"scrm-label",5),t.\u0275\u0275elementStart(9,"a",6),t.\u0275\u0275element(10,"scrm-label",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(9),t.\u0275\u0275property("href",r.getLoginURL(),t.\u0275\u0275sanitizeUrl))},directives:[ml,gn],encapsulation:2}),n})(),pU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[_.CommonModule,dn,hl]]}),n})()},6794:(je,ce,I)=>{"use strict";I.d(ce,{vT:()=>z,Is:()=>D});var t=I(4468),v=I(1090);const X=new t.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,t.inject)(v.DOCUMENT)}});let D=(()=>{class _{constructor(O){if(this.value="ltr",this.change=new t.EventEmitter,O){const de=O.documentElement?O.documentElement.dir:null,le=(O.body?O.body.dir:null)||de;this.value="ltr"===le||"rtl"===le?le:"ltr"}}ngOnDestroy(){this.change.complete()}}return _.\u0275fac=function(O){return new(O||_)(t.\u0275\u0275inject(X,8))},_.\u0275prov=(0,t.\u0275\u0275defineInjectable)({factory:function(){return new _((0,t.\u0275\u0275inject)(X,8))},token:_,providedIn:"root"}),_})(),z=(()=>{class _{}return _.\u0275fac=function(O){return new(O||_)},_.\u0275mod=t.\u0275\u0275defineNgModule({type:_}),_.\u0275inj=t.\u0275\u0275defineInjector({}),_})()},9490:(je,ce,I)=>{"use strict";I.d(ce,{Eq:()=>q,Ig:()=>v,fI:()=>ie,su:()=>W});var t=I(4468);function v(_){return null!=_&&"false"!=`${_}`}function W(_,y=0){return function(_){return!isNaN(parseFloat(_))&&!isNaN(Number(_))}(_)?Number(_):y}function q(_){return Array.isArray(_)?_:[_]}function ie(_){return _ instanceof t.ElementRef?_.nativeElement:_}},3296:(je,ce,I)=>{"use strict";I.d(ce,{P3:()=>D,o2:()=>X,yy:()=>ie,eX:()=>z,k:()=>B,Z9:()=>q});var t=I(1180),v=I(4468);class X{}function q(de){return de&&"function"==typeof de.connect}class D extends X{constructor(le){super(),this._data=le}connect(){return(0,t.isObservable)(this._data)?this._data:(0,t.of)(this._data)}disconnect(){}}class ie{applyChanges(le,Ee,re,Ce,xe){le.forEachOperation((Me,Fe,ke)=>{let et,ut;if(null==Me.previousIndex){const be=re(Me,Fe,ke);et=Ee.createEmbeddedView(be.templateRef,be.context,be.index),ut=1}else null==ke?(Ee.remove(Fe),ut=3):(et=Ee.get(Fe),Ee.move(et,ke),ut=2);xe&&xe({context:null==et?void 0:et.context,operation:ut,record:Me})})}detach(){}}class z{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(le,Ee,re,Ce,xe){le.forEachOperation((Me,Fe,ke)=>{let et,ut;null==Me.previousIndex?(et=this._insertView(()=>re(Me,Fe,ke),ke,Ee,Ce(Me)),ut=et?1:0):null==ke?(this._detachAndCacheView(Fe,Ee),ut=3):(et=this._moveView(Fe,ke,Ee,Ce(Me)),ut=2),xe&&xe({context:null==et?void 0:et.context,operation:ut,record:Me})})}detach(){for(const le of this._viewCache)le.destroy();this._viewCache=[]}_insertView(le,Ee,re,Ce){const xe=this._insertViewFromCache(Ee,re);if(xe)return void(xe.context.$implicit=Ce);const Me=le();return re.createEmbeddedView(Me.templateRef,Me.context,Me.index)}_detachAndCacheView(le,Ee){const re=Ee.detach(le);this._maybeCacheView(re,Ee)}_moveView(le,Ee,re,Ce){const xe=re.get(le);return re.move(xe,Ee),xe.context.$implicit=Ce,xe}_maybeCacheView(le,Ee){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(le);else{const re=Ee.indexOf(le);-1===re?le.destroy():Ee.remove(re)}}_insertViewFromCache(le,Ee){const re=this._viewCache.pop();return re&&Ee.insert(re,le),re||null}}const B=new v.InjectionToken("_ViewRepeater")},9642:(je,ce,I)=>{"use strict";I.d(ce,{t4:()=>q,ud:()=>D,kV:()=>Me,_i:()=>re,i$:()=>B,Mq:()=>Ee});var t=I(4468),v=I(1090);let X;try{X="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Fe){X=!1}let y,de,le,Ce,q=(()=>{class Fe{constructor(et){this._platformId=et,this.isBrowser=this._platformId?(0,v.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!X)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Fe.\u0275fac=function(et){return new(et||Fe)(t.\u0275\u0275inject(t.PLATFORM_ID))},Fe.\u0275prov=(0,t.\u0275\u0275defineInjectable)({factory:function(){return new Fe((0,t.\u0275\u0275inject)(t.PLATFORM_ID))},token:Fe,providedIn:"root"}),Fe})(),D=(()=>{class Fe{}return Fe.\u0275fac=function(et){return new(et||Fe)},Fe.\u0275mod=t.\u0275\u0275defineNgModule({type:Fe}),Fe.\u0275inj=t.\u0275\u0275defineInjector({}),Fe})();function B(Fe){return function(){if(null==y&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>y=!0}))}finally{y=y||!1}return y}()?Fe:!!Fe.capture}function Ee(){if(null==le){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return le=!1,le;if("scrollBehavior"in document.documentElement.style)le=!0;else{const Fe=Element.prototype.scrollTo;le=!!Fe&&!/\{\s*\[native code\]\s*\}/.test(Fe.toString())}}return le}function re(){if("object"!=typeof document||!document)return 0;if(null==de){const Fe=document.createElement("div"),ke=Fe.style;Fe.dir="rtl",ke.width="1px",ke.overflow="auto",ke.visibility="hidden",ke.pointerEvents="none",ke.position="absolute";const et=document.createElement("div"),ut=et.style;ut.width="2px",ut.height="1px",Fe.appendChild(et),document.body.appendChild(Fe),de=0,0===Fe.scrollLeft&&(Fe.scrollLeft=1,de=0===Fe.scrollLeft?1:2),Fe.parentNode.removeChild(Fe)}return de}function Me(Fe){if(function(){if(null==Ce){const Fe="undefined"!=typeof document?document.head:null;Ce=!(!Fe||!Fe.createShadowRoot&&!Fe.attachShadow)}return Ce}()){const ke=Fe.getRootNode?Fe.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&ke instanceof ShadowRoot)return ke}return null}},7544:(je,ce,I)=>{"use strict";I.d(ce,{xd:()=>Ce,ZD:()=>qt,N7:()=>He,mF:()=>Me,Cl:()=>Oe,rL:()=>et});var t=I(9490),w=I(4468),W=I(1180),q=I(2343),ie=I(9642),z=I(1090),y=I(6794);I(3296);const B=["contentWrapper"],de=["*"],le=new w.InjectionToken("VIRTUAL_SCROLL_STRATEGY");class Ee{constructor(dt,Y,Ue){this._scrolledIndexChange=new W.Subject,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,q.distinctUntilChanged)()),this._viewport=null,this._itemSize=dt,this._minBufferPx=Y,this._maxBufferPx=Ue}attach(dt){this._viewport=dt,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(dt,Y,Ue){this._itemSize=dt,this._minBufferPx=Y,this._maxBufferPx=Ue,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(dt,Y){this._viewport&&this._viewport.scrollToOffset(dt*this._itemSize,Y)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const dt=this._viewport.getRenderedRange(),Y={start:dt.start,end:dt.end},Ue=this._viewport.getViewportSize(),at=this._viewport.getDataLength();let Qe=this._viewport.measureScrollOffset(),Ye=this._itemSize>0?Qe/this._itemSize:0;if(Y.end>at){const kt=Math.ceil(Ue/this._itemSize),lt=Math.max(0,Math.min(Ye,at-kt));Ye!=lt&&(Ye=lt,Qe=lt*this._itemSize,Y.start=Math.floor(Ye)),Y.end=Math.max(0,Math.min(at,Y.start+kt))}const Bt=Qe-Y.start*this._itemSize;if(Bt<this._minBufferPx&&0!=Y.start){const kt=Math.ceil((this._maxBufferPx-Bt)/this._itemSize);Y.start=Math.max(0,Y.start-kt),Y.end=Math.min(at,Math.ceil(Ye+(Ue+this._minBufferPx)/this._itemSize))}else{const kt=Y.end*this._itemSize-(Qe+Ue);if(kt<this._minBufferPx&&Y.end!=at){const lt=Math.ceil((this._maxBufferPx-kt)/this._itemSize);lt>0&&(Y.end=Math.min(at,Y.end+lt),Y.start=Math.max(0,Math.floor(Ye-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(Y),this._viewport.setRenderedContentOffset(this._itemSize*Y.start),this._scrolledIndexChange.next(Math.floor(Ye))}}function re(qe){return qe._scrollStrategy}let Ce=(()=>{class qe{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new Ee(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(Y){this._itemSize=(0,t.su)(Y)}get minBufferPx(){return this._minBufferPx}set minBufferPx(Y){this._minBufferPx=(0,t.su)(Y)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(Y){this._maxBufferPx=(0,t.su)(Y)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return qe.\u0275fac=function(Y){return new(Y||qe)},qe.\u0275dir=w.\u0275\u0275defineDirective({type:qe,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[w.\u0275\u0275ProvidersFeature([{provide:le,useFactory:re,deps:[(0,w.forwardRef)(()=>qe)]}]),w.\u0275\u0275NgOnChangesFeature]}),qe})(),Me=(()=>{class qe{constructor(Y,Ue,at){this._ngZone=Y,this._platform=Ue,this._scrolled=new W.Subject,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=at}register(Y){this.scrollContainers.has(Y)||this.scrollContainers.set(Y,Y.elementScrolled().subscribe(()=>this._scrolled.next(Y)))}deregister(Y){const Ue=this.scrollContainers.get(Y);Ue&&(Ue.unsubscribe(),this.scrollContainers.delete(Y))}scrolled(Y=20){return this._platform.isBrowser?new W.Observable(Ue=>{this._globalSubscription||this._addGlobalListener();const at=Y>0?this._scrolled.pipe((0,q.auditTime)(Y)).subscribe(Ue):this._scrolled.subscribe(Ue);return this._scrolledCount++,()=>{at.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,W.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Y,Ue)=>this.deregister(Ue)),this._scrolled.complete()}ancestorScrolled(Y,Ue){const at=this.getAncestorScrollContainers(Y);return this.scrolled(Ue).pipe((0,q.filter)(Qe=>!Qe||at.indexOf(Qe)>-1))}getAncestorScrollContainers(Y){const Ue=[];return this.scrollContainers.forEach((at,Qe)=>{this._scrollableContainsElement(Qe,Y)&&Ue.push(Qe)}),Ue}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Y,Ue){let at=(0,t.fI)(Ue),Qe=Y.getElementRef().nativeElement;do{if(at==Qe)return!0}while(at=at.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Y=this._getWindow();return(0,W.fromEvent)(Y.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return qe.\u0275fac=function(Y){return new(Y||qe)(w.\u0275\u0275inject(w.NgZone),w.\u0275\u0275inject(ie.t4),w.\u0275\u0275inject(z.DOCUMENT,8))},qe.\u0275prov=(0,w.\u0275\u0275defineInjectable)({factory:function(){return new qe((0,w.\u0275\u0275inject)(w.NgZone),(0,w.\u0275\u0275inject)(ie.t4),(0,w.\u0275\u0275inject)(z.DOCUMENT,8))},token:qe,providedIn:"root"}),qe})(),Fe=(()=>{class qe{constructor(Y,Ue,at,Qe){this.elementRef=Y,this.scrollDispatcher=Ue,this.ngZone=at,this.dir=Qe,this._destroyed=new W.Subject,this._elementScrolled=new W.Observable(Ye=>this.ngZone.runOutsideAngular(()=>(0,W.fromEvent)(this.elementRef.nativeElement,"scroll").pipe((0,q.takeUntil)(this._destroyed)).subscribe(Ye)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Y){const Ue=this.elementRef.nativeElement,at=this.dir&&"rtl"==this.dir.value;null==Y.left&&(Y.left=at?Y.end:Y.start),null==Y.right&&(Y.right=at?Y.start:Y.end),null!=Y.bottom&&(Y.top=Ue.scrollHeight-Ue.clientHeight-Y.bottom),at&&0!=(0,ie._i)()?(null!=Y.left&&(Y.right=Ue.scrollWidth-Ue.clientWidth-Y.left),2==(0,ie._i)()?Y.left=Y.right:1==(0,ie._i)()&&(Y.left=Y.right?-Y.right:Y.right)):null!=Y.right&&(Y.left=Ue.scrollWidth-Ue.clientWidth-Y.right),this._applyScrollToOptions(Y)}_applyScrollToOptions(Y){const Ue=this.elementRef.nativeElement;(0,ie.Mq)()?Ue.scrollTo(Y):(null!=Y.top&&(Ue.scrollTop=Y.top),null!=Y.left&&(Ue.scrollLeft=Y.left))}measureScrollOffset(Y){const Ue="left",Qe=this.elementRef.nativeElement;if("top"==Y)return Qe.scrollTop;if("bottom"==Y)return Qe.scrollHeight-Qe.clientHeight-Qe.scrollTop;const Ye=this.dir&&"rtl"==this.dir.value;return"start"==Y?Y=Ye?"right":Ue:"end"==Y&&(Y=Ye?Ue:"right"),Ye&&2==(0,ie._i)()?Y==Ue?Qe.scrollWidth-Qe.clientWidth-Qe.scrollLeft:Qe.scrollLeft:Ye&&1==(0,ie._i)()?Y==Ue?Qe.scrollLeft+Qe.scrollWidth-Qe.clientWidth:-Qe.scrollLeft:Y==Ue?Qe.scrollLeft:Qe.scrollWidth-Qe.clientWidth-Qe.scrollLeft}}return qe.\u0275fac=function(Y){return new(Y||qe)(w.\u0275\u0275directiveInject(w.ElementRef),w.\u0275\u0275directiveInject(Me),w.\u0275\u0275directiveInject(w.NgZone),w.\u0275\u0275directiveInject(y.Is,8))},qe.\u0275dir=w.\u0275\u0275defineDirective({type:qe,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),qe})(),et=(()=>{class qe{constructor(Y,Ue,at){this._platform=Y,this._change=new W.Subject,this._changeListener=Qe=>{this._change.next(Qe)},this._document=at,Ue.runOutsideAngular(()=>{if(Y.isBrowser){const Qe=this._getWindow();Qe.addEventListener("resize",this._changeListener),Qe.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const Y=this._getWindow();Y.removeEventListener("resize",this._changeListener),Y.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Y={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Y}getViewportRect(){const Y=this.getViewportScrollPosition(),{width:Ue,height:at}=this.getViewportSize();return{top:Y.top,left:Y.left,bottom:Y.top+at,right:Y.left+Ue,height:at,width:Ue}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Y=this._document,Ue=this._getWindow(),at=Y.documentElement,Qe=at.getBoundingClientRect();return{top:-Qe.top||Y.body.scrollTop||Ue.scrollY||at.scrollTop||0,left:-Qe.left||Y.body.scrollLeft||Ue.scrollX||at.scrollLeft||0}}change(Y=20){return Y>0?this._change.pipe((0,q.auditTime)(Y)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Y=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Y.innerWidth,height:Y.innerHeight}:{width:0,height:0}}}return qe.\u0275fac=function(Y){return new(Y||qe)(w.\u0275\u0275inject(ie.t4),w.\u0275\u0275inject(w.NgZone),w.\u0275\u0275inject(z.DOCUMENT,8))},qe.\u0275prov=(0,w.\u0275\u0275defineInjectable)({factory:function(){return new qe((0,w.\u0275\u0275inject)(ie.t4),(0,w.\u0275\u0275inject)(w.NgZone),(0,w.\u0275\u0275inject)(z.DOCUMENT,8))},token:qe,providedIn:"root"}),qe})();const be="undefined"!=typeof requestAnimationFrame?W.animationFrameScheduler:W.asapScheduler;let He=(()=>{class qe extends Fe{constructor(Y,Ue,at,Qe,Ye,Bt,kt){super(Y,Bt,at,Ye),this.elementRef=Y,this._changeDetectorRef=Ue,this._scrollStrategy=Qe,this._detachedSubject=new W.Subject,this._renderedRangeSubject=new W.Subject,this._orientation="vertical",this.scrolledIndexChange=new W.Observable(lt=>this._scrollStrategy.scrolledIndexChange.subscribe(Mt=>Promise.resolve().then(()=>this.ngZone.run(()=>lt.next(Mt))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=W.Subscription.EMPTY,this._viewportChanges=kt.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(Y){this._orientation!==Y&&(this._orientation=Y,this._calculateSpacerSize())}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe((0,q.startWith)(null),(0,q.auditTime)(0,be)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(Y){this.ngZone.runOutsideAngular(()=>{this._forOf=Y,this._forOf.dataStream.pipe((0,q.takeUntil)(this._detachedSubject)).subscribe(Ue=>{const at=Ue.length;at!==this._dataLength&&(this._dataLength=at,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(Y){this._totalContentSize!==Y&&(this._totalContentSize=Y,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(Y){(function(qe,dt){return qe.start==dt.start&&qe.end==dt.end})(this._renderedRange,Y)||(this._renderedRangeSubject.next(this._renderedRange=Y),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(Y,Ue="to-start"){const Qe="horizontal"==this.orientation,Ye=Qe?"X":"Y";let kt=`translate${Ye}(${Number((Qe&&this.dir&&"rtl"==this.dir.value?-1:1)*Y)}px)`;this._renderedContentOffset=Y,"to-end"===Ue&&(kt+=` translate${Ye}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=kt&&(this._renderedContentTransform=kt,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(Y,Ue="auto"){const at={behavior:Ue};"horizontal"===this.orientation?at.start=Y:at.top=Y,this.scrollTo(at)}scrollToIndex(Y,Ue="auto"){this._scrollStrategy.scrollToIndex(Y,Ue)}measureScrollOffset(Y){return super.measureScrollOffset(Y||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const Y=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?Y.offsetWidth:Y.offsetHeight}measureRangeSize(Y){return this._forOf?this._forOf.measureRangeSize(Y,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const Y=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?Y.clientWidth:Y.clientHeight}_markChangeDetectionNeeded(Y){Y&&this._runAfterChangeDetection.push(Y),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const Y=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const Ue of Y)Ue()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return qe.\u0275fac=function(Y){return new(Y||qe)(w.\u0275\u0275directiveInject(w.ElementRef),w.\u0275\u0275directiveInject(w.ChangeDetectorRef),w.\u0275\u0275directiveInject(w.NgZone),w.\u0275\u0275directiveInject(le,8),w.\u0275\u0275directiveInject(y.Is,8),w.\u0275\u0275directiveInject(Me),w.\u0275\u0275directiveInject(et))},qe.\u0275cmp=w.\u0275\u0275defineComponent({type:qe,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(Y,Ue){if(1&Y&&w.\u0275\u0275viewQuery(B,7),2&Y){let at;w.\u0275\u0275queryRefresh(at=w.\u0275\u0275loadQuery())&&(Ue._contentWrapper=at.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(Y,Ue){2&Y&&w.\u0275\u0275classProp("cdk-virtual-scroll-orientation-horizontal","horizontal"===Ue.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==Ue.orientation)},inputs:{orientation:"orientation"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[w.\u0275\u0275ProvidersFeature([{provide:Fe,useExisting:qe}]),w.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:de,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(Y,Ue){1&Y&&(w.\u0275\u0275projectionDef(),w.\u0275\u0275elementStart(0,"div",0,1),w.\u0275\u0275projection(2),w.\u0275\u0275elementEnd(),w.\u0275\u0275element(3,"div",2)),2&Y&&(w.\u0275\u0275advance(3),w.\u0275\u0275styleProp("width",Ue._totalContentWidth)("height",Ue._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),qe})(),qt=(()=>{class qe{}return qe.\u0275fac=function(Y){return new(Y||qe)},qe.\u0275mod=w.\u0275\u0275defineNgModule({type:qe}),qe.\u0275inj=w.\u0275\u0275defineInjector({}),qe})(),Oe=(()=>{class qe{}return qe.\u0275fac=function(Y){return new(Y||qe)},qe.\u0275mod=w.\u0275\u0275defineNgModule({type:qe}),qe.\u0275inj=w.\u0275\u0275defineInjector({imports:[[y.vT,ie.ud,qt],y.vT,qt]}),qe})()},1211:(je,ce,I)=>{"use strict";I.d(ce,{b2:()=>Gr,H7:()=>Vr,q6:()=>Ii});var t=I(1090),v=I(4468);class X extends t.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class q extends X{static makeCurrent(){(0,t.\u0275setRootDomAdapter)(new q)}onAndCancel(ee,Z,he){return ee.addEventListener(Z,he,!1),()=>{ee.removeEventListener(Z,he,!1)}}dispatchEvent(ee,Z){ee.dispatchEvent(Z)}remove(ee){ee.parentNode&&ee.parentNode.removeChild(ee)}createElement(ee,Z){return(Z=Z||this.getDefaultDocument()).createElement(ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ee){return ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(ee){return ee instanceof DocumentFragment}getGlobalEventTarget(ee,Z){return"window"===Z?window:"document"===Z?ee:"body"===Z?ee.body:null}getBaseHref(ee){const Z=(D=D||document.querySelector("base"),D?D.getAttribute("href"):null);return null==Z?null:function(J){z=z||document.createElement("a"),z.setAttribute("href",J);const ee=z.pathname;return"/"===ee.charAt(0)?ee:`/${ee}`}(Z)}resetBaseElement(){D=null}getUserAgent(){return window.navigator.userAgent}getCookie(ee){return(0,t.\u0275parseCookieValue)(document.cookie,ee)}}let z,D=null;const y=new v.InjectionToken("TRANSITION_ID"),B=[{provide:v.APP_INITIALIZER,useFactory:function(J,ee,Z){return()=>{Z.get(v.ApplicationInitStatus).donePromise.then(()=>{const he=(0,t.\u0275getDOM)();Array.prototype.slice.apply(ee.querySelectorAll("style[ng-transition]")).filter(mt=>mt.getAttribute("ng-transition")===J).forEach(mt=>he.remove(mt))})}},deps:[y,t.DOCUMENT,v.Injector],multi:!0}];class de{static init(){(0,v.setTestabilityGetter)(new de)}addToWindow(ee){v.\u0275global.getAngularTestability=(he,Ve=!0)=>{const mt=ee.findTestabilityInTree(he,Ve);if(null==mt)throw new Error("Could not find testability for element.");return mt},v.\u0275global.getAllAngularTestabilities=()=>ee.getAllTestabilities(),v.\u0275global.getAllAngularRootElements=()=>ee.getAllRootElements(),v.\u0275global.frameworkStabilizers||(v.\u0275global.frameworkStabilizers=[]),v.\u0275global.frameworkStabilizers.push(he=>{const Ve=v.\u0275global.getAllAngularTestabilities();let mt=Ve.length,Pt=!1;const Ut=function(mn){Pt=Pt||mn,mt--,0==mt&&he(Pt)};Ve.forEach(function(mn){mn.whenStable(Ut)})})}findTestabilityInTree(ee,Z,he){if(null==Z)return null;const Ve=ee.getTestability(Z);return null!=Ve?Ve:he?(0,t.\u0275getDOM)().isShadowRoot(Z)?this.findTestabilityInTree(ee,Z.host,!0):this.findTestabilityInTree(ee,Z.parentElement,!0):null}}let le=(()=>{class J{build(){return new XMLHttpRequest}}return J.\u0275fac=function(Z){return new(Z||J)},J.\u0275prov=v.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();const qe=new v.InjectionToken("EventManagerPlugins");let dt=(()=>{class J{constructor(Z,he){this._zone=he,this._eventNameToPlugin=new Map,Z.forEach(Ve=>Ve.manager=this),this._plugins=Z.slice().reverse()}addEventListener(Z,he,Ve){return this._findPluginFor(he).addEventListener(Z,he,Ve)}addGlobalEventListener(Z,he,Ve){return this._findPluginFor(he).addGlobalEventListener(Z,he,Ve)}getZone(){return this._zone}_findPluginFor(Z){const he=this._eventNameToPlugin.get(Z);if(he)return he;const Ve=this._plugins;for(let mt=0;mt<Ve.length;mt++){const Pt=Ve[mt];if(Pt.supports(Z))return this._eventNameToPlugin.set(Z,Pt),Pt}throw new Error(`No event manager plugin found for event ${Z}`)}}return J.\u0275fac=function(Z){return new(Z||J)(v.\u0275\u0275inject(qe),v.\u0275\u0275inject(v.NgZone))},J.\u0275prov=v.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();class Y{constructor(ee){this._doc=ee}addGlobalEventListener(ee,Z,he){const Ve=(0,t.\u0275getDOM)().getGlobalEventTarget(this._doc,ee);if(!Ve)throw new Error(`Unsupported event target ${Ve} for event ${Z}`);return this.addEventListener(Ve,Z,he)}}let Ue=(()=>{class J{constructor(){this._stylesSet=new Set}addStyles(Z){const he=new Set;Z.forEach(Ve=>{this._stylesSet.has(Ve)||(this._stylesSet.add(Ve),he.add(Ve))}),this.onStylesAdded(he)}onStylesAdded(Z){}getAllStyles(){return Array.from(this._stylesSet)}}return J.\u0275fac=function(Z){return new(Z||J)},J.\u0275prov=v.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})(),at=(()=>{class J extends Ue{constructor(Z){super(),this._doc=Z,this._hostNodes=new Map,this._hostNodes.set(Z.head,[])}_addStylesToHost(Z,he,Ve){Z.forEach(mt=>{const Pt=this._doc.createElement("style");Pt.textContent=mt,Ve.push(he.appendChild(Pt))})}addHost(Z){const he=[];this._addStylesToHost(this._stylesSet,Z,he),this._hostNodes.set(Z,he)}removeHost(Z){const he=this._hostNodes.get(Z);he&&he.forEach(Qe),this._hostNodes.delete(Z)}onStylesAdded(Z){this._hostNodes.forEach((he,Ve)=>{this._addStylesToHost(Z,Ve,he)})}ngOnDestroy(){this._hostNodes.forEach(Z=>Z.forEach(Qe))}}return J.\u0275fac=function(Z){return new(Z||J)(v.\u0275\u0275inject(t.DOCUMENT))},J.\u0275prov=v.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();function Qe(J){(0,t.\u0275getDOM)().remove(J)}const Ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bt=/%COMP%/g;function vn(J,ee,Z){for(let he=0;he<ee.length;he++){let Ve=ee[he];Array.isArray(Ve)?vn(J,Ve,Z):(Ve=Ve.replace(Bt,J),Z.push(Ve))}return Z}function Yt(J){return ee=>{if("__ngUnwrap__"===ee)return J;!1===J(ee)&&(ee.preventDefault(),ee.returnValue=!1)}}let rn=(()=>{class J{constructor(Z,he,Ve){this.eventManager=Z,this.sharedStylesHost=he,this.appId=Ve,this.rendererByCompId=new Map,this.defaultRenderer=new Gt(Z)}createRenderer(Z,he){if(!Z||!he)return this.defaultRenderer;switch(he.encapsulation){case v.ViewEncapsulation.Emulated:{let Ve=this.rendererByCompId.get(he.id);return Ve||(Ve=new $n(this.eventManager,this.sharedStylesHost,he,this.appId),this.rendererByCompId.set(he.id,Ve)),Ve.applyToHost(Z),Ve}case 1:case v.ViewEncapsulation.ShadowDom:return new or(this.eventManager,this.sharedStylesHost,Z,he);default:if(!this.rendererByCompId.has(he.id)){const Ve=vn(he.id,he.styles,[]);this.sharedStylesHost.addStyles(Ve),this.rendererByCompId.set(he.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return J.\u0275fac=function(Z){return new(Z||J)(v.\u0275\u0275inject(dt),v.\u0275\u0275inject(at),v.\u0275\u0275inject(v.APP_ID))},J.\u0275prov=v.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();class Gt{constructor(ee){this.eventManager=ee,this.data=Object.create(null)}destroy(){}createElement(ee,Z){return Z?document.createElementNS(Ye[Z]||Z,ee):document.createElement(ee)}createComment(ee){return document.createComment(ee)}createText(ee){return document.createTextNode(ee)}appendChild(ee,Z){ee.appendChild(Z)}insertBefore(ee,Z,he){ee&&ee.insertBefore(Z,he)}removeChild(ee,Z){ee&&ee.removeChild(Z)}selectRootElement(ee,Z){let he="string"==typeof ee?document.querySelector(ee):ee;if(!he)throw new Error(`The selector "${ee}" did not match any elements`);return Z||(he.textContent=""),he}parentNode(ee){return ee.parentNode}nextSibling(ee){return ee.nextSibling}setAttribute(ee,Z,he,Ve){if(Ve){Z=Ve+":"+Z;const mt=Ye[Ve];mt?ee.setAttributeNS(mt,Z,he):ee.setAttribute(Z,he)}else ee.setAttribute(Z,he)}removeAttribute(ee,Z,he){if(he){const Ve=Ye[he];Ve?ee.removeAttributeNS(Ve,Z):ee.removeAttribute(`${he}:${Z}`)}else ee.removeAttribute(Z)}addClass(ee,Z){ee.classList.add(Z)}removeClass(ee,Z){ee.classList.remove(Z)}setStyle(ee,Z,he,Ve){Ve&(v.RendererStyleFlags2.DashCase|v.RendererStyleFlags2.Important)?ee.style.setProperty(Z,he,Ve&v.RendererStyleFlags2.Important?"important":""):ee.style[Z]=he}removeStyle(ee,Z,he){he&v.RendererStyleFlags2.DashCase?ee.style.removeProperty(Z):ee.style[Z]=""}setProperty(ee,Z,he){ee[Z]=he}setValue(ee,Z){ee.nodeValue=Z}listen(ee,Z,he){return"string"==typeof ee?this.eventManager.addGlobalEventListener(ee,Z,Yt(he)):this.eventManager.addEventListener(ee,Z,Yt(he))}}class $n extends Gt{constructor(ee,Z,he,Ve){super(ee),this.component=he;const mt=vn(Ve+"-"+he.id,he.styles,[]);Z.addStyles(mt),this.contentAttr="_ngcontent-%COMP%".replace(Bt,Ve+"-"+he.id),this.hostAttr="_nghost-%COMP%".replace(Bt,Ve+"-"+he.id)}applyToHost(ee){super.setAttribute(ee,this.hostAttr,"")}createElement(ee,Z){const he=super.createElement(ee,Z);return super.setAttribute(he,this.contentAttr,""),he}}class or extends Gt{constructor(ee,Z,he,Ve){super(ee),this.sharedStylesHost=Z,this.hostEl=he,this.shadowRoot=he.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const mt=vn(Ve.id,Ve.styles,[]);for(let Pt=0;Pt<mt.length;Pt++){const Ut=document.createElement("style");Ut.textContent=mt[Pt],this.shadowRoot.appendChild(Ut)}}nodeOrShadowRoot(ee){return ee===this.hostEl?this.shadowRoot:ee}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ee,Z){return super.appendChild(this.nodeOrShadowRoot(ee),Z)}insertBefore(ee,Z,he){return super.insertBefore(this.nodeOrShadowRoot(ee),Z,he)}removeChild(ee,Z){return super.removeChild(this.nodeOrShadowRoot(ee),Z)}parentNode(ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ee)))}}let dr=(()=>{class J extends Y{constructor(Z){super(Z)}supports(Z){return!0}addEventListener(Z,he,Ve){return Z.addEventListener(he,Ve,!1),()=>this.removeEventListener(Z,he,Ve)}removeEventListener(Z,he,Ve){return Z.removeEventListener(he,Ve)}}return J.\u0275fac=function(Z){return new(Z||J)(v.\u0275\u0275inject(t.DOCUMENT))},J.\u0275prov=v.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();const $t=["alt","control","meta","shift"],kn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yr={alt:J=>J.altKey,control:J=>J.ctrlKey,meta:J=>J.metaKey,shift:J=>J.shiftKey};let Ur=(()=>{class J extends Y{constructor(Z){super(Z)}supports(Z){return null!=J.parseEventName(Z)}addEventListener(Z,he,Ve){const mt=J.parseEventName(he),Pt=J.eventCallback(mt.fullKey,Ve,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,t.\u0275getDOM)().onAndCancel(Z,mt.domEventName,Pt))}static parseEventName(Z){const he=Z.toLowerCase().split("."),Ve=he.shift();if(0===he.length||"keydown"!==Ve&&"keyup"!==Ve)return null;const mt=J._normalizeKey(he.pop());let Pt="";if($t.forEach(mn=>{const Ai=he.indexOf(mn);Ai>-1&&(he.splice(Ai,1),Pt+=mn+".")}),Pt+=mt,0!=he.length||0===mt.length)return null;const Ut={};return Ut.domEventName=Ve,Ut.fullKey=Pt,Ut}static getEventFullKey(Z){let he="",Ve=function(J){let ee=J.key;if(null==ee){if(ee=J.keyIdentifier,null==ee)return"Unidentified";ee.startsWith("U+")&&(ee=String.fromCharCode(parseInt(ee.substring(2),16)),3===J.location&&Zn.hasOwnProperty(ee)&&(ee=Zn[ee]))}return kn[ee]||ee}(Z);return Ve=Ve.toLowerCase()," "===Ve?Ve="space":"."===Ve&&(Ve="dot"),$t.forEach(mt=>{mt!=Ve&&Yr[mt](Z)&&(he+=mt+".")}),he+=Ve,he}static eventCallback(Z,he,Ve){return mt=>{J.getEventFullKey(mt)===Z&&Ve.runGuarded(()=>he(mt))}}static _normalizeKey(Z){switch(Z){case"esc":return"escape";default:return Z}}}return J.\u0275fac=function(Z){return new(Z||J)(v.\u0275\u0275inject(t.DOCUMENT))},J.\u0275prov=v.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})(),Vr=(()=>{class J{}return J.\u0275fac=function(Z){return new(Z||J)},J.\u0275prov=(0,v.\u0275\u0275defineInjectable)({factory:function(){return(0,v.\u0275\u0275inject)($r)},token:J,providedIn:"root"}),J})(),$r=(()=>{class J extends Vr{constructor(Z){super(),this._doc=Z}sanitize(Z,he){if(null==he)return null;switch(Z){case v.SecurityContext.NONE:return he;case v.SecurityContext.HTML:return(0,v.\u0275allowSanitizationBypassAndThrow)(he,"HTML")?(0,v.\u0275unwrapSafeValue)(he):(0,v.\u0275_sanitizeHtml)(this._doc,String(he)).toString();case v.SecurityContext.STYLE:return(0,v.\u0275allowSanitizationBypassAndThrow)(he,"Style")?(0,v.\u0275unwrapSafeValue)(he):he;case v.SecurityContext.SCRIPT:if((0,v.\u0275allowSanitizationBypassAndThrow)(he,"Script"))return(0,v.\u0275unwrapSafeValue)(he);throw new Error("unsafe value used in a script context");case v.SecurityContext.URL:return(0,v.\u0275getSanitizationBypassType)(he),(0,v.\u0275allowSanitizationBypassAndThrow)(he,"URL")?(0,v.\u0275unwrapSafeValue)(he):(0,v.\u0275_sanitizeUrl)(String(he));case v.SecurityContext.RESOURCE_URL:if((0,v.\u0275allowSanitizationBypassAndThrow)(he,"ResourceURL"))return(0,v.\u0275unwrapSafeValue)(he);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Z} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Z){return(0,v.\u0275bypassSanitizationTrustHtml)(Z)}bypassSecurityTrustStyle(Z){return(0,v.\u0275bypassSanitizationTrustStyle)(Z)}bypassSecurityTrustScript(Z){return(0,v.\u0275bypassSanitizationTrustScript)(Z)}bypassSecurityTrustUrl(Z){return(0,v.\u0275bypassSanitizationTrustUrl)(Z)}bypassSecurityTrustResourceUrl(Z){return(0,v.\u0275bypassSanitizationTrustResourceUrl)(Z)}}return J.\u0275fac=function(Z){return new(Z||J)(v.\u0275\u0275inject(t.DOCUMENT))},J.\u0275prov=(0,v.\u0275\u0275defineInjectable)({factory:function(){return function(J){return new $r(J.get(t.DOCUMENT))}((0,v.\u0275\u0275inject)(v.INJECTOR))},token:J,providedIn:"root"}),J})();const Ii="main"==I.j?(0,v.createPlatformFactory)(v.platformCore,"browser",[{provide:v.PLATFORM_ID,useValue:t.\u0275PLATFORM_BROWSER_ID},{provide:v.PLATFORM_INITIALIZER,useValue:function(){q.makeCurrent(),de.init()},multi:!0},{provide:t.DOCUMENT,useFactory:function(){return(0,v.\u0275setDocument)(document),document},deps:[]}]):null,ei=[[],{provide:v.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:v.ErrorHandler,useFactory:function(){return new v.ErrorHandler},deps:[]},{provide:qe,useClass:dr,multi:!0,deps:[t.DOCUMENT,v.NgZone,v.PLATFORM_ID]},{provide:qe,useClass:Ur,multi:!0,deps:[t.DOCUMENT]},[],{provide:rn,useClass:rn,deps:[dt,at,v.APP_ID]},{provide:v.RendererFactory2,useExisting:rn},{provide:Ue,useExisting:at},{provide:at,useClass:at,deps:[t.DOCUMENT]},{provide:v.Testability,useClass:v.Testability,deps:[v.NgZone]},{provide:dt,useClass:dt,deps:[qe,v.NgZone]},{provide:t.XhrFactory,useClass:le,deps:[]},[]];let Gr=(()=>{class J{constructor(Z){if(Z)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Z){return{ngModule:J,providers:[{provide:v.APP_ID,useValue:Z.appId},{provide:y,useExisting:v.APP_ID},B]}}}return J.\u0275fac=function(Z){return new(Z||J)(v.\u0275\u0275inject(J,12))},J.\u0275mod=v.\u0275\u0275defineNgModule({type:J}),J.\u0275inj=v.\u0275\u0275defineInjector({providers:ei,imports:[t.CommonModule,v.ApplicationModule]}),J})();"undefined"!=typeof window&&window},5635:function(je,ce){var t;!function(w){"use strict";var v=function(y){return.5*(Math.exp(y)+Math.exp(-y))},W=function(y){return.5*(Math.exp(y)-Math.exp(-y))},D=function(){throw SyntaxError("Invalid Param")};function ie(y,O){var B=Math.abs(y),de=Math.abs(O);return 0===y?Math.log(de):0===O?Math.log(B):B<3e3&&de<3e3?.5*Math.log(y*y+O*O):Math.log(y/Math.cos(Math.atan2(O,y)))}function _(y,O){if(!(this instanceof _))return new _(y,O);var B=function(y,O){var B={re:0,im:0};if(null==y)B.re=B.im=0;else if(void 0!==O)B.re=y,B.im=O;else switch(typeof y){case"object":if("im"in y&&"re"in y)B.re=y.re,B.im=y.im;else if("abs"in y&&"arg"in y){if(!Number.isFinite(y.abs)&&Number.isFinite(y.arg))return _.INFINITY;B.re=y.abs*Math.cos(y.arg),B.im=y.abs*Math.sin(y.arg)}else if("r"in y&&"phi"in y){if(!Number.isFinite(y.r)&&Number.isFinite(y.phi))return _.INFINITY;B.re=y.r*Math.cos(y.phi),B.im=y.r*Math.sin(y.phi)}else 2===y.length?(B.re=y[0],B.im=y[1]):D();break;case"string":B.im=B.re=0;var de=y.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),le=1,Ee=0;null===de&&D();for(var re=0;re<de.length;re++){var Ce=de[re];" "===Ce||"\t"===Ce||"\n"===Ce||("+"===Ce?le++:"-"===Ce?Ee++:"i"===Ce||"I"===Ce?(le+Ee===0&&D()," "===de[re+1]||isNaN(de[re+1])?B.im+=parseFloat((Ee%2?"-":"")+"1"):(B.im+=parseFloat((Ee%2?"-":"")+de[re+1]),re++),le=Ee=0):((le+Ee===0||isNaN(Ce))&&D(),"i"===de[re+1]||"I"===de[re+1]?(B.im+=parseFloat((Ee%2?"-":"")+Ce),re++):B.re+=parseFloat((Ee%2?"-":"")+Ce),le=Ee=0))}le+Ee>0&&D();break;case"number":B.im=0,B.re=y;break;default:D()}return isNaN(B.re)||isNaN(B.im),B}(y,O);this.re=B.re,this.im=B.im}_.prototype={re:0,im:0,sign:function(){var y=this.abs();return new _(this.re/y,this.im/y)},add:function(y,O){var B=new _(y,O);return this.isInfinite()&&B.isInfinite()?_.NAN:this.isInfinite()||B.isInfinite()?_.INFINITY:new _(this.re+B.re,this.im+B.im)},sub:function(y,O){var B=new _(y,O);return this.isInfinite()&&B.isInfinite()?_.NAN:this.isInfinite()||B.isInfinite()?_.INFINITY:new _(this.re-B.re,this.im-B.im)},mul:function(y,O){var B=new _(y,O);return this.isInfinite()&&B.isZero()||this.isZero()&&B.isInfinite()?_.NAN:this.isInfinite()||B.isInfinite()?_.INFINITY:0===B.im&&0===this.im?new _(this.re*B.re,0):new _(this.re*B.re-this.im*B.im,this.re*B.im+this.im*B.re)},div:function(y,O){var B=new _(y,O);if(this.isZero()&&B.isZero()||this.isInfinite()&&B.isInfinite())return _.NAN;if(this.isInfinite()||B.isZero())return _.INFINITY;if(this.isZero()||B.isInfinite())return _.ZERO;y=this.re,O=this.im;var Ee,re,de=B.re,le=B.im;return 0===le?new _(y/de,O/de):Math.abs(de)<Math.abs(le)?new _((y*(re=de/le)+O)/(Ee=de*re+le),(O*re-y)/Ee):new _((y+O*(re=le/de))/(Ee=le*re+de),(O-y*re)/Ee)},pow:function(y,O){var B=new _(y,O);if(y=this.re,O=this.im,B.isZero())return _.ONE;if(0===B.im){if(0===O&&y>0)return new _(Math.pow(y,B.re),0);if(0===y)switch((B.re%4+4)%4){case 0:return new _(Math.pow(O,B.re),0);case 1:return new _(0,Math.pow(O,B.re));case 2:return new _(-Math.pow(O,B.re),0);case 3:return new _(0,-Math.pow(O,B.re))}}if(0===y&&0===O&&B.re>0&&B.im>=0)return _.ZERO;var de=Math.atan2(O,y),le=ie(y,O);return y=Math.exp(B.re*le-B.im*de),O=B.im*le+B.re*de,new _(y*Math.cos(O),y*Math.sin(O))},sqrt:function(){var de,le,y=this.re,O=this.im,B=this.abs();if(y>=0){if(0===O)return new _(Math.sqrt(y),0);de=.5*Math.sqrt(2*(B+y))}else de=Math.abs(O)/Math.sqrt(2*(B-y));return le=y<=0?.5*Math.sqrt(2*(B-y)):Math.abs(O)/Math.sqrt(2*(B+y)),new _(de,O<0?-le:le)},exp:function(){var y=Math.exp(this.re);return new _(y*Math.cos(this.im),y*Math.sin(this.im))},expm1:function(){var y=this.re,O=this.im;return new _(Math.expm1(y)*Math.cos(O)+function(y){var O=Math.PI/4;if(-O>y||y>O)return Math.cos(y)-1;var B=y*y;return B*(B*(B*(B*(B*(B*(B*(B/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(O),Math.exp(y)*Math.sin(O))},log:function(){var y=this.re,O=this.im;return new _(ie(y,O),Math.atan2(O,y))},abs:function(){return y=this.re,O=this.im,B=Math.abs(y),de=Math.abs(O),B<3e3&&de<3e3?Math.sqrt(B*B+de*de):(B<de?(B=de,de=y/O):de=O/y,B*Math.sqrt(1+de*de));var y,O,B,de},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var y=this.re,O=this.im;return new _(Math.sin(y)*v(O),Math.cos(y)*W(O))},cos:function(){var y=this.re,O=this.im;return new _(Math.cos(y)*v(O),-Math.sin(y)*W(O))},tan:function(){var y=2*this.re,O=2*this.im,B=Math.cos(y)+v(O);return new _(Math.sin(y)/B,W(O)/B)},cot:function(){var y=2*this.re,O=2*this.im,B=Math.cos(y)-v(O);return new _(-Math.sin(y)/B,W(O)/B)},sec:function(){var y=this.re,O=this.im,B=.5*v(2*O)+.5*Math.cos(2*y);return new _(Math.cos(y)*v(O)/B,Math.sin(y)*W(O)/B)},csc:function(){var y=this.re,O=this.im,B=.5*v(2*O)-.5*Math.cos(2*y);return new _(Math.sin(y)*v(O)/B,-Math.cos(y)*W(O)/B)},asin:function(){var y=this.re,O=this.im,B=new _(O*O-y*y+1,-2*y*O).sqrt(),de=new _(B.re-O,B.im+y).log();return new _(de.im,-de.re)},acos:function(){var y=this.re,O=this.im,B=new _(O*O-y*y+1,-2*y*O).sqrt(),de=new _(B.re-O,B.im+y).log();return new _(Math.PI/2-de.im,de.re)},atan:function(){var y=this.re,O=this.im;if(0===y){if(1===O)return new _(0,1/0);if(-1===O)return new _(0,-1/0)}var B=y*y+(1-O)*(1-O),de=new _((1-O*O-y*y)/B,-2*y/B).log();return new _(-.5*de.im,.5*de.re)},acot:function(){var y=this.re,O=this.im;if(0===O)return new _(Math.atan2(1,y),0);var B=y*y+O*O;return 0!==B?new _(y/B,-O/B).atan():new _(0!==y?y/0:0,0!==O?-O/0:0).atan()},asec:function(){var y=this.re,O=this.im;if(0===y&&0===O)return new _(0,1/0);var B=y*y+O*O;return 0!==B?new _(y/B,-O/B).acos():new _(0!==y?y/0:0,0!==O?-O/0:0).acos()},acsc:function(){var y=this.re,O=this.im;if(0===y&&0===O)return new _(Math.PI/2,1/0);var B=y*y+O*O;return 0!==B?new _(y/B,-O/B).asin():new _(0!==y?y/0:0,0!==O?-O/0:0).asin()},sinh:function(){var y=this.re,O=this.im;return new _(W(y)*Math.cos(O),v(y)*Math.sin(O))},cosh:function(){var y=this.re,O=this.im;return new _(v(y)*Math.cos(O),W(y)*Math.sin(O))},tanh:function(){var y=2*this.re,O=2*this.im,B=v(y)+Math.cos(O);return new _(W(y)/B,Math.sin(O)/B)},coth:function(){var y=2*this.re,O=2*this.im,B=v(y)-Math.cos(O);return new _(W(y)/B,-Math.sin(O)/B)},csch:function(){var y=this.re,O=this.im,B=Math.cos(2*O)-v(2*y);return new _(-2*W(y)*Math.cos(O)/B,2*v(y)*Math.sin(O)/B)},sech:function(){var y=this.re,O=this.im,B=Math.cos(2*O)+v(2*y);return new _(2*v(y)*Math.cos(O)/B,-2*W(y)*Math.sin(O)/B)},asinh:function(){var y=this.im;this.im=-this.re,this.re=y;var O=this.asin();return this.re=-this.im,this.im=y,y=O.re,O.re=-O.im,O.im=y,O},acosh:function(){var y=this.acos();if(y.im<=0){var O=y.re;y.re=-y.im,y.im=O}else O=y.im,y.im=-y.re,y.re=O;return y},atanh:function(){var y=this.re,O=this.im,B=y>1&&0===O,de=1-y,le=1+y,Ee=de*de+O*O,re=0!==Ee?new _((le*de-O*O)/Ee,(O*de+le*O)/Ee):new _(-1!==y?y/0:0,0!==O?O/0:0),Ce=re.re;return re.re=ie(re.re,re.im)/2,re.im=Math.atan2(re.im,Ce)/2,B&&(re.im=-re.im),re},acoth:function(){var y=this.re,O=this.im;if(0===y&&0===O)return new _(0,Math.PI/2);var B=y*y+O*O;return 0!==B?new _(y/B,-O/B).atanh():new _(0!==y?y/0:0,0!==O?-O/0:0).atanh()},acsch:function(){var y=this.re,O=this.im;if(0===O)return new _(0!==y?Math.log(y+Math.sqrt(y*y+1)):1/0,0);var B=y*y+O*O;return 0!==B?new _(y/B,-O/B).asinh():new _(0!==y?y/0:0,0!==O?-O/0:0).asinh()},asech:function(){var y=this.re,O=this.im;if(this.isZero())return _.INFINITY;var B=y*y+O*O;return 0!==B?new _(y/B,-O/B).acosh():new _(0!==y?y/0:0,0!==O?-O/0:0).acosh()},inverse:function(){if(this.isZero())return _.INFINITY;if(this.isInfinite())return _.ZERO;var y=this.re,O=this.im,B=y*y+O*O;return new _(y/B,-O/B)},conjugate:function(){return new _(this.re,-this.im)},neg:function(){return new _(-this.re,-this.im)},ceil:function(y){return y=Math.pow(10,y||0),new _(Math.ceil(this.re*y)/y,Math.ceil(this.im*y)/y)},floor:function(y){return y=Math.pow(10,y||0),new _(Math.floor(this.re*y)/y,Math.floor(this.im*y)/y)},round:function(y){return y=Math.pow(10,y||0),new _(Math.round(this.re*y)/y,Math.round(this.im*y)/y)},equals:function(y,O){var B=new _(y,O);return Math.abs(B.re-this.re)<=_.EPSILON&&Math.abs(B.im-this.im)<=_.EPSILON},clone:function(){return new _(this.re,this.im)},toString:function(){var y=this.re,O=this.im,B="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(y)<_.EPSILON&&(y=0),Math.abs(O)<_.EPSILON&&(O=0),0===O?B+y:(0!==y?(B+=y,B+=" ",O<0?(O=-O,B+="-"):B+="+",B+=" "):O<0&&(O=-O,B+="-"),1!==O&&(B+=O),B+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},_.ZERO=new _(0,0),_.ONE=new _(1,0),_.I=new _(0,1),_.PI=new _(Math.PI,0),_.E=new _(Math.E,0),_.INFINITY=new _(1/0,1/0),_.NAN=new _(NaN,NaN),_.EPSILON=1e-15,void 0!==(t=function(){return _}.apply(ce,[]))&&(je.exports=t)}()},1071:function(je,ce,I){var t;!function(w){"use strict";var z,_,O,v=9e15,W=1e9,X="0123456789abcdef",q="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",D="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ie={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-v,maxE:v,crypto:!1},B=!0,de="[DecimalError] ",le=de+"Invalid argument: ",Ee=de+"Precision limit exceeded",re=de+"crypto unavailable",Ce="[object Decimal]",xe=Math.floor,Me=Math.pow,Fe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ke=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,et=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,ut=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,be=1e7,Ze=q.length-1,qt=D.length-1,Oe={toStringTag:Ce};function qe(M){var N,L,j,V=M.length-1,$="",oe=M[0];if(V>0){for($+=oe,N=1;N<V;N++)(L=7-(j=M[N]+"").length)&&($+=Ct(L)),$+=j;(L=7-(j=(oe=M[N])+"").length)&&($+=Ct(L))}else if(0===oe)return"0";for(;oe%10==0;)oe/=10;return $+oe}function dt(M,N,L){if(M!==~~M||M<N||M>L)throw Error(le+M)}function Y(M,N,L,j){var V,$,oe,pe;for($=M[0];$>=10;$/=10)--N;return--N<0?(N+=7,V=0):(V=Math.ceil((N+1)/7),N%=7),$=Me(10,7-N),pe=M[V]%$|0,null==j?N<3?(0==N?pe=pe/100|0:1==N&&(pe=pe/10|0),oe=L<4&&99999==pe||L>3&&49999==pe||5e4==pe||0==pe):oe=(L<4&&pe+1==$||L>3&&pe+1==$/2)&&(M[V+1]/$/100|0)==Me(10,N-2)-1||(pe==$/2||0==pe)&&0==(M[V+1]/$/100|0):N<4?(0==N?pe=pe/1e3|0:1==N?pe=pe/100|0:2==N&&(pe=pe/10|0),oe=(j||L<4)&&9999==pe||!j&&L>3&&4999==pe):oe=((j||L<4)&&pe+1==$||!j&&L>3&&pe+1==$/2)&&(M[V+1]/$/1e3|0)==Me(10,N-3)-1,oe}function Ue(M,N,L){for(var j,$,V=[0],oe=0,pe=M.length;oe<pe;){for($=V.length;$--;)V[$]*=N;for(V[0]+=X.indexOf(M.charAt(oe++)),j=0;j<V.length;j++)V[j]>L-1&&(void 0===V[j+1]&&(V[j+1]=0),V[j+1]+=V[j]/L|0,V[j]%=L)}return V.reverse()}Oe.absoluteValue=Oe.abs=function(){var M=new this.constructor(this);return M.s<0&&(M.s=1),Ye(M)},Oe.ceil=function(){return Ye(new this.constructor(this),this.e+1,2)},Oe.clampedTo=Oe.clamp=function(M,N){var j=this,V=j.constructor;if(M=new V(M),N=new V(N),!M.s||!N.s)return new V(NaN);if(M.gt(N))throw Error(le+N);return j.cmp(M)<0?M:j.cmp(N)>0?N:new V(j)},Oe.comparedTo=Oe.cmp=function(M){var N,L,j,V,$=this,oe=$.d,pe=(M=new $.constructor(M)).d,Se=$.s,ye=M.s;if(!oe||!pe)return Se&&ye?Se!==ye?Se:oe===pe?0:!oe^Se<0?1:-1:NaN;if(!oe[0]||!pe[0])return oe[0]?Se:pe[0]?-ye:0;if(Se!==ye)return Se;if($.e!==M.e)return $.e>M.e^Se<0?1:-1;for(N=0,L=(j=oe.length)<(V=pe.length)?j:V;N<L;++N)if(oe[N]!==pe[N])return oe[N]>pe[N]^Se<0?1:-1;return j===V?0:j>V^Se<0?1:-1},Oe.cosine=Oe.cos=function(){var M,N,L=this,j=L.constructor;return L.d?L.d[0]?(N=j.rounding,j.precision=(M=j.precision)+Math.max(L.e,L.sd())+7,j.rounding=1,L=function(M,N){var L,j,V;if(N.isZero())return N;(j=N.d.length)<32?V=(1/or(4,L=Math.ceil(j/3))).toString():(L=16,V="2.3283064365386962890625e-10"),M.precision+=L,N=$n(M,1,N.times(V),new M(1));for(var $=L;$--;){var oe=N.times(N);N=oe.times(oe).minus(oe).times(8).plus(1)}return M.precision-=L,N}(j,dr(j,L)),j.precision=M,j.rounding=N,Ye(2==O||3==O?L.neg():L,M,N,!0)):new j(1):new j(NaN)},Oe.cubeRoot=Oe.cbrt=function(){var M,N,L,j,V,$,oe,pe,Se,ye,Ne=this,Be=Ne.constructor;if(!Ne.isFinite()||Ne.isZero())return new Be(Ne);for(B=!1,($=Ne.s*Me(Ne.s*Ne,1/3))&&Math.abs($)!=1/0?j=new Be($.toString()):(L=qe(Ne.d),($=((M=Ne.e)-L.length+1)%3)&&(L+=1==$||-2==$?"0":"00"),$=Me(L,1/3),M=xe((M+1)/3)-(M%3==(M<0?-1:2)),(j=new Be(L=$==1/0?"5e"+M:(L=$.toExponential()).slice(0,L.indexOf("e")+1)+M)).s=Ne.s),oe=(M=Be.precision)+3;;)if(ye=(Se=(pe=j).times(pe).times(pe)).plus(Ne),j=Qe(ye.plus(Ne).times(pe),ye.plus(Se),oe+2,1),qe(pe.d).slice(0,oe)===(L=qe(j.d)).slice(0,oe)){if("9999"!=(L=L.slice(oe-3,oe+1))&&(V||"4999"!=L)){(!+L||!+L.slice(1)&&"5"==L.charAt(0))&&(Ye(j,M+1,1),N=!j.times(j).times(j).eq(Ne));break}if(!V&&(Ye(pe,M+1,0),pe.times(pe).times(pe).eq(Ne))){j=pe;break}oe+=4,V=1}return B=!0,Ye(j,M,Be.rounding,N)},Oe.decimalPlaces=Oe.dp=function(){var M,N=this.d,L=NaN;if(N){if(L=7*((M=N.length-1)-xe(this.e/7)),M=N[M])for(;M%10==0;M/=10)L--;L<0&&(L=0)}return L},Oe.dividedBy=Oe.div=function(M){return Qe(this,new this.constructor(M))},Oe.dividedToIntegerBy=Oe.divToInt=function(M){var L=this.constructor;return Ye(Qe(this,new L(M),0,1,1),L.precision,L.rounding)},Oe.equals=Oe.eq=function(M){return 0===this.cmp(M)},Oe.floor=function(){return Ye(new this.constructor(this),this.e+1,3)},Oe.greaterThan=Oe.gt=function(M){return this.cmp(M)>0},Oe.greaterThanOrEqualTo=Oe.gte=function(M){var N=this.cmp(M);return 1==N||0===N},Oe.hyperbolicCosine=Oe.cosh=function(){var M,N,L,j,V,$=this,oe=$.constructor,pe=new oe(1);if(!$.isFinite())return new oe($.s?1/0:NaN);if($.isZero())return pe;j=oe.rounding,oe.precision=(L=oe.precision)+Math.max($.e,$.sd())+4,oe.rounding=1,(V=$.d.length)<32?N=(1/or(4,M=Math.ceil(V/3))).toString():(M=16,N="2.3283064365386962890625e-10"),$=$n(oe,1,$.times(N),new oe(1),!0);for(var Se,ye=M,Ne=new oe(8);ye--;)Se=$.times($),$=pe.minus(Se.times(Ne.minus(Se.times(Ne))));return Ye($,oe.precision=L,oe.rounding=j,!0)},Oe.hyperbolicSine=Oe.sinh=function(){var M,N,L,j,V=this,$=V.constructor;if(!V.isFinite()||V.isZero())return new $(V);if(L=$.rounding,$.precision=(N=$.precision)+Math.max(V.e,V.sd())+4,$.rounding=1,(j=V.d.length)<3)V=$n($,2,V,V,!0);else{M=1.4*Math.sqrt(j),V=$n($,2,V=V.times(1/or(5,M=M>16?16:0|M)),V,!0);for(var oe,pe=new $(5),Se=new $(16),ye=new $(20);M--;)oe=V.times(V),V=V.times(pe.plus(oe.times(Se.times(oe).plus(ye))))}return $.precision=N,$.rounding=L,Ye(V,N,L,!0)},Oe.hyperbolicTangent=Oe.tanh=function(){var M,N,L=this,j=L.constructor;return L.isFinite()?L.isZero()?new j(L):(N=j.rounding,j.precision=(M=j.precision)+7,j.rounding=1,Qe(L.sinh(),L.cosh(),j.precision=M,j.rounding=N)):new j(L.s)},Oe.inverseCosine=Oe.acos=function(){var M,N=this,L=N.constructor,j=N.abs().cmp(1),V=L.precision,$=L.rounding;return-1!==j?0===j?N.isNeg()?Mt(L,V,$):new L(0):new L(NaN):N.isZero()?Mt(L,V+4,$).times(.5):(L.precision=V+6,L.rounding=1,N=N.asin(),M=Mt(L,V+4,$).times(.5),L.precision=V,L.rounding=$,M.minus(N))},Oe.inverseHyperbolicCosine=Oe.acosh=function(){var M,N,L=this,j=L.constructor;return L.lte(1)?new j(L.eq(1)?0:NaN):L.isFinite()?(N=j.rounding,j.precision=(M=j.precision)+Math.max(Math.abs(L.e),L.sd())+4,j.rounding=1,B=!1,L=L.times(L).minus(1).sqrt().plus(L),B=!0,j.precision=M,j.rounding=N,L.ln()):new j(L)},Oe.inverseHyperbolicSine=Oe.asinh=function(){var M,N,L=this,j=L.constructor;return!L.isFinite()||L.isZero()?new j(L):(N=j.rounding,j.precision=(M=j.precision)+2*Math.max(Math.abs(L.e),L.sd())+6,j.rounding=1,B=!1,L=L.times(L).plus(1).sqrt().plus(L),B=!0,j.precision=M,j.rounding=N,L.ln())},Oe.inverseHyperbolicTangent=Oe.atanh=function(){var M,N,L,j,V=this,$=V.constructor;return V.isFinite()?V.e>=0?new $(V.abs().eq(1)?V.s/0:V.isZero()?V:NaN):(M=$.precision,N=$.rounding,j=V.sd(),Math.max(j,M)<2*-V.e-1?Ye(new $(V),M,N,!0):($.precision=L=j-V.e,V=Qe(V.plus(1),new $(1).minus(V),L+M,1),$.precision=M+4,$.rounding=1,V=V.ln(),$.precision=M,$.rounding=N,V.times(.5))):new $(NaN)},Oe.inverseSine=Oe.asin=function(){var M,N,L,j,V=this,$=V.constructor;return V.isZero()?new $(V):(N=V.abs().cmp(1),L=$.precision,j=$.rounding,-1!==N?0===N?((M=Mt($,L+4,j).times(.5)).s=V.s,M):new $(NaN):($.precision=L+6,$.rounding=1,V=V.div(new $(1).minus(V.times(V)).sqrt().plus(1)).atan(),$.precision=L,$.rounding=j,V.times(2)))},Oe.inverseTangent=Oe.atan=function(){var M,N,L,j,V,$,oe,pe,Se,ye=this,Ne=ye.constructor,Be=Ne.precision,J=Ne.rounding;if(ye.isFinite()){if(ye.isZero())return new Ne(ye);if(ye.abs().eq(1)&&Be+4<=qt)return(oe=Mt(Ne,Be+4,J).times(.25)).s=ye.s,oe}else{if(!ye.s)return new Ne(NaN);if(Be+4<=qt)return(oe=Mt(Ne,Be+4,J).times(.5)).s=ye.s,oe}for(Ne.precision=pe=Be+10,Ne.rounding=1,M=L=Math.min(28,pe/7+2|0);M;--M)ye=ye.div(ye.times(ye).plus(1).sqrt().plus(1));for(B=!1,N=Math.ceil(pe/7),j=1,Se=ye.times(ye),oe=new Ne(ye),V=ye;-1!==M;)if(V=V.times(Se),$=oe.minus(V.div(j+=2)),V=V.times(Se),void 0!==(oe=$.plus(V.div(j+=2))).d[N])for(M=N;oe.d[M]===$.d[M]&&M--;);return L&&(oe=oe.times(2<<L-1)),B=!0,Ye(oe,Ne.precision=Be,Ne.rounding=J,!0)},Oe.isFinite=function(){return!!this.d},Oe.isInteger=Oe.isInt=function(){return!!this.d&&xe(this.e/7)>this.d.length-2},Oe.isNaN=function(){return!this.s},Oe.isNegative=Oe.isNeg=function(){return this.s<0},Oe.isPositive=Oe.isPos=function(){return this.s>0},Oe.isZero=function(){return!!this.d&&0===this.d[0]},Oe.lessThan=Oe.lt=function(M){return this.cmp(M)<0},Oe.lessThanOrEqualTo=Oe.lte=function(M){return this.cmp(M)<1},Oe.logarithm=Oe.log=function(M){var N,L,j,V,$,oe,pe,Se,ye=this,Ne=ye.constructor,Be=Ne.precision,J=Ne.rounding;if(null==M)M=new Ne(10),N=!0;else{if(L=(M=new Ne(M)).d,M.s<0||!L||!L[0]||M.eq(1))return new Ne(NaN);N=M.eq(10)}if(L=ye.d,ye.s<0||!L||!L[0]||ye.eq(1))return new Ne(L&&!L[0]?-1/0:1!=ye.s?NaN:L?0:1/0);if(N)if(L.length>1)$=!0;else{for(V=L[0];V%10==0;)V/=10;$=1!==V}if(B=!1,oe=rn(ye,pe=Be+5),j=N?lt(Ne,pe+10):rn(M,pe),Y((Se=Qe(oe,j,pe,1)).d,V=Be,J))do{if(oe=rn(ye,pe+=10),j=N?lt(Ne,pe+10):rn(M,pe),Se=Qe(oe,j,pe,1),!$){+qe(Se.d).slice(V+1,V+15)+1==1e14&&(Se=Ye(Se,Be+1,0));break}}while(Y(Se.d,V+=10,J));return B=!0,Ye(Se,Be,J)},Oe.minus=Oe.sub=function(M){var N,L,j,V,$,oe,pe,Se,ye,Ne,Be,J,ee=this,Z=ee.constructor;if(M=new Z(M),!ee.d||!M.d)return ee.s&&M.s?ee.d?M.s=-M.s:M=new Z(M.d||ee.s!==M.s?ee:NaN):M=new Z(NaN),M;if(ee.s!=M.s)return M.s=-M.s,ee.plus(M);if(J=M.d,pe=Z.precision,Se=Z.rounding,!(ye=ee.d)[0]||!J[0]){if(J[0])M.s=-M.s;else{if(!ye[0])return new Z(3===Se?-0:0);M=new Z(ee)}return B?Ye(M,pe,Se):M}if(L=xe(M.e/7),Ne=xe(ee.e/7),ye=ye.slice(),$=Ne-L){for((Be=$<0)?(N=ye,$=-$,oe=J.length):(N=J,L=Ne,oe=ye.length),$>(j=Math.max(Math.ceil(pe/7),oe)+2)&&($=j,N.length=1),N.reverse(),j=$;j--;)N.push(0);N.reverse()}else{for((Be=(j=ye.length)<(oe=J.length))&&(oe=j),j=0;j<oe;j++)if(ye[j]!=J[j]){Be=ye[j]<J[j];break}$=0}for(Be&&(N=ye,ye=J,J=N,M.s=-M.s),j=J.length-(oe=ye.length);j>0;--j)ye[oe++]=0;for(j=J.length;j>$;){if(ye[--j]<J[j]){for(V=j;V&&0===ye[--V];)ye[V]=be-1;--ye[V],ye[j]+=be}ye[j]-=J[j]}for(;0===ye[--oe];)ye.pop();for(;0===ye[0];ye.shift())--L;return ye[0]?(M.d=ye,M.e=kt(ye,L),B?Ye(M,pe,Se):M):new Z(3===Se?-0:0)},Oe.modulo=Oe.mod=function(M){var N,L=this,j=L.constructor;return M=new j(M),!L.d||!M.s||M.d&&!M.d[0]?new j(NaN):!M.d||L.d&&!L.d[0]?Ye(new j(L),j.precision,j.rounding):(B=!1,9==j.modulo?(N=Qe(L,M.abs(),0,3,1)).s*=M.s:N=Qe(L,M,0,j.modulo,1),N=N.times(M),B=!0,L.minus(N))},Oe.naturalExponential=Oe.exp=function(){return Lt(this)},Oe.naturalLogarithm=Oe.ln=function(){return rn(this)},Oe.negated=Oe.neg=function(){var M=new this.constructor(this);return M.s=-M.s,Ye(M)},Oe.plus=Oe.add=function(M){var N,L,j,V,$,oe,pe,Se,ye,Ne,Be=this,J=Be.constructor;if(M=new J(M),!Be.d||!M.d)return Be.s&&M.s?Be.d||(M=new J(M.d||Be.s===M.s?Be:NaN)):M=new J(NaN),M;if(Be.s!=M.s)return M.s=-M.s,Be.minus(M);if(Ne=M.d,pe=J.precision,Se=J.rounding,!(ye=Be.d)[0]||!Ne[0])return Ne[0]||(M=new J(Be)),B?Ye(M,pe,Se):M;if($=xe(Be.e/7),j=xe(M.e/7),ye=ye.slice(),V=$-j){for(V<0?(L=ye,V=-V,oe=Ne.length):(L=Ne,j=$,oe=ye.length),V>(oe=($=Math.ceil(pe/7))>oe?$+1:oe+1)&&(V=oe,L.length=1),L.reverse();V--;)L.push(0);L.reverse()}for((oe=ye.length)-(V=Ne.length)<0&&(V=oe,L=Ne,Ne=ye,ye=L),N=0;V;)N=(ye[--V]=ye[V]+Ne[V]+N)/be|0,ye[V]%=be;for(N&&(ye.unshift(N),++j),oe=ye.length;0==ye[--oe];)ye.pop();return M.d=ye,M.e=kt(ye,j),B?Ye(M,pe,Se):M},Oe.precision=Oe.sd=function(M){var N,L=this;if(void 0!==M&&M!==!!M&&1!==M&&0!==M)throw Error(le+M);return L.d?(N=hn(L.d),M&&L.e+1>N&&(N=L.e+1)):N=NaN,N},Oe.round=function(){var M=this,N=M.constructor;return Ye(new N(M),M.e+1,N.rounding)},Oe.sine=Oe.sin=function(){var M,N,L=this,j=L.constructor;return L.isFinite()?L.isZero()?new j(L):(N=j.rounding,j.precision=(M=j.precision)+Math.max(L.e,L.sd())+7,j.rounding=1,L=function(M,N){var L,j=N.d.length;if(j<3)return N.isZero()?N:$n(M,2,N,N);L=1.4*Math.sqrt(j),N=$n(M,2,N=N.times(1/or(5,L=L>16?16:0|L)),N);for(var V,$=new M(5),oe=new M(16),pe=new M(20);L--;)V=N.times(N),N=N.times($.plus(V.times(oe.times(V).minus(pe))));return N}(j,dr(j,L)),j.precision=M,j.rounding=N,Ye(O>2?L.neg():L,M,N,!0)):new j(NaN)},Oe.squareRoot=Oe.sqrt=function(){var M,N,L,j,V,$,oe=this,pe=oe.d,Se=oe.e,ye=oe.s,Ne=oe.constructor;if(1!==ye||!pe||!pe[0])return new Ne(!ye||ye<0&&(!pe||pe[0])?NaN:pe?oe:1/0);for(B=!1,0==(ye=Math.sqrt(+oe))||ye==1/0?(((N=qe(pe)).length+Se)%2==0&&(N+="0"),ye=Math.sqrt(N),Se=xe((Se+1)/2)-(Se<0||Se%2),j=new Ne(N=ye==1/0?"5e"+Se:(N=ye.toExponential()).slice(0,N.indexOf("e")+1)+Se)):j=new Ne(ye.toString()),L=(Se=Ne.precision)+3;;)if(j=($=j).plus(Qe(oe,$,L+2,1)).times(.5),qe($.d).slice(0,L)===(N=qe(j.d)).slice(0,L)){if("9999"!=(N=N.slice(L-3,L+1))&&(V||"4999"!=N)){(!+N||!+N.slice(1)&&"5"==N.charAt(0))&&(Ye(j,Se+1,1),M=!j.times(j).eq(oe));break}if(!V&&(Ye($,Se+1,0),$.times($).eq(oe))){j=$;break}L+=4,V=1}return B=!0,Ye(j,Se,Ne.rounding,M)},Oe.tangent=Oe.tan=function(){var M,N,L=this,j=L.constructor;return L.isFinite()?L.isZero()?new j(L):(N=j.rounding,j.precision=(M=j.precision)+10,j.rounding=1,(L=L.sin()).s=1,L=Qe(L,new j(1).minus(L.times(L)).sqrt(),M+10,0),j.precision=M,j.rounding=N,Ye(2==O||4==O?L.neg():L,M,N,!0)):new j(NaN)},Oe.times=Oe.mul=function(M){var N,L,j,V,$,oe,pe,Se,ye,Be=this.constructor,J=this.d,ee=(M=new Be(M)).d;if(M.s*=this.s,!(J&&J[0]&&ee&&ee[0]))return new Be(!M.s||J&&!J[0]&&!ee||ee&&!ee[0]&&!J?NaN:J&&ee?0*M.s:M.s/0);for(L=xe(this.e/7)+xe(M.e/7),(Se=J.length)<(ye=ee.length)&&($=J,J=ee,ee=$,oe=Se,Se=ye,ye=oe),$=[],j=oe=Se+ye;j--;)$.push(0);for(j=ye;--j>=0;){for(N=0,V=Se+j;V>j;)pe=$[V]+ee[j]*J[V-j-1]+N,$[V--]=pe%be|0,N=pe/be|0;$[V]=($[V]+N)%be|0}for(;!$[--oe];)$.pop();return N?++L:$.shift(),M.d=$,M.e=kt($,L),B?Ye(M,Be.precision,Be.rounding):M},Oe.toBinary=function(M,N){return me(this,2,M,N)},Oe.toDecimalPlaces=Oe.toDP=function(M,N){var L=this,j=L.constructor;return L=new j(L),void 0===M?L:(dt(M,0,W),void 0===N?N=j.rounding:dt(N,0,8),Ye(L,M+L.e+1,N))},Oe.toExponential=function(M,N){var L,j=this,V=j.constructor;return void 0===M?L=Bt(j,!0):(dt(M,0,W),void 0===N?N=V.rounding:dt(N,0,8),L=Bt(j=Ye(new V(j),M+1,N),!0,M+1)),j.isNeg()&&!j.isZero()?"-"+L:L},Oe.toFixed=function(M,N){var L,j,V=this,$=V.constructor;return void 0===M?L=Bt(V):(dt(M,0,W),void 0===N?N=$.rounding:dt(N,0,8),L=Bt(j=Ye(new $(V),M+V.e+1,N),!1,M+j.e+1)),V.isNeg()&&!V.isZero()?"-"+L:L},Oe.toFraction=function(M){var N,L,j,V,$,oe,pe,Se,ye,Ne,Be,J,ee=this,Z=ee.d,he=ee.constructor;if(!Z)return new he(ee);if(ye=L=new he(1),j=Se=new he(0),$=(N=new he(j)).e=hn(Z)-ee.e-1,N.d[0]=Me(10,(oe=$%7)<0?7+oe:oe),null==M)M=$>0?N:ye;else{if(!(pe=new he(M)).isInt()||pe.lt(ye))throw Error(le+pe);M=pe.gt(N)?$>0?N:ye:pe}for(B=!1,pe=new he(qe(Z)),Ne=he.precision,he.precision=$=7*Z.length*2;Be=Qe(pe,N,0,1,1),1!=(V=L.plus(Be.times(j))).cmp(M);)L=j,j=V,ye=Se.plus(Be.times(V=ye)),Se=V,N=pe.minus(Be.times(V=N)),pe=V;return V=Qe(M.minus(L),j,0,1,1),Se=Se.plus(V.times(ye)),L=L.plus(V.times(j)),Se.s=ye.s=ee.s,J=Qe(ye,j,$,1).minus(ee).abs().cmp(Qe(Se,L,$,1).minus(ee).abs())<1?[ye,j]:[Se,L],he.precision=Ne,B=!0,J},Oe.toHexadecimal=Oe.toHex=function(M,N){return me(this,16,M,N)},Oe.toNearest=function(M,N){var L=this,j=L.constructor;if(L=new j(L),null==M){if(!L.d)return L;M=new j(1),N=j.rounding}else{if(M=new j(M),void 0===N?N=j.rounding:dt(N,0,8),!L.d)return M.s?L:M;if(!M.d)return M.s&&(M.s=L.s),M}return M.d[0]?(B=!1,L=Qe(L,M,0,N,1).times(M),B=!0,Ye(L)):(M.s=L.s,L=M),L},Oe.toNumber=function(){return+this},Oe.toOctal=function(M,N){return me(this,8,M,N)},Oe.toPower=Oe.pow=function(M){var N,L,j,V,$,oe,pe=this,Se=pe.constructor,ye=+(M=new Se(M));if(!(pe.d&&M.d&&pe.d[0]&&M.d[0]))return new Se(Me(+pe,ye));if((pe=new Se(pe)).eq(1))return pe;if(j=Se.precision,$=Se.rounding,M.eq(1))return Ye(pe,j,$);if((N=xe(M.e/7))>=M.d.length-1&&(L=ye<0?-ye:ye)<=9007199254740991)return V=Tt(Se,pe,L,j),M.s<0?new Se(1).div(V):Ye(V,j,$);if((oe=pe.s)<0){if(N<M.d.length-1)return new Se(NaN);if(0==(1&M.d[N])&&(oe=1),0==pe.e&&1==pe.d[0]&&1==pe.d.length)return pe.s=oe,pe}return(N=0!=(L=Me(+pe,ye))&&isFinite(L)?new Se(L+"").e:xe(ye*(Math.log("0."+qe(pe.d))/Math.LN10+pe.e+1)))>Se.maxE+1||N<Se.minE-1?new Se(N>0?oe/0:0):(B=!1,Se.rounding=pe.s=1,L=Math.min(12,(N+"").length),(V=Lt(M.times(rn(pe,j+L)),j)).d&&Y((V=Ye(V,j+5,1)).d,j,$)&&+qe((V=Ye(Lt(M.times(rn(pe,(N=j+10)+L)),N),N+5,1)).d).slice(j+1,j+15)+1==1e14&&(V=Ye(V,j+1,0)),V.s=oe,B=!0,Se.rounding=$,Ye(V,j,$))},Oe.toPrecision=function(M,N){var L,j=this,V=j.constructor;return void 0===M?L=Bt(j,j.e<=V.toExpNeg||j.e>=V.toExpPos):(dt(M,1,W),void 0===N?N=V.rounding:dt(N,0,8),L=Bt(j=Ye(new V(j),M,N),M<=j.e||j.e<=V.toExpNeg,M)),j.isNeg()&&!j.isZero()?"-"+L:L},Oe.toSignificantDigits=Oe.toSD=function(M,N){var j=this.constructor;return void 0===M?(M=j.precision,N=j.rounding):(dt(M,1,W),void 0===N?N=j.rounding:dt(N,0,8)),Ye(new j(this),M,N)},Oe.toString=function(){var M=this,N=M.constructor,L=Bt(M,M.e<=N.toExpNeg||M.e>=N.toExpPos);return M.isNeg()&&!M.isZero()?"-"+L:L},Oe.truncated=Oe.trunc=function(){return Ye(new this.constructor(this),this.e+1,1)},Oe.valueOf=Oe.toJSON=function(){var M=this,N=M.constructor,L=Bt(M,M.e<=N.toExpNeg||M.e>=N.toExpPos);return M.isNeg()?"-"+L:L};var Qe=function(){function M(j,V,$){var oe,pe=0,Se=j.length;for(j=j.slice();Se--;)j[Se]=(oe=j[Se]*V+pe)%$|0,pe=oe/$|0;return pe&&j.unshift(pe),j}function N(j,V,$,oe){var pe,Se;if($!=oe)Se=$>oe?1:-1;else for(pe=Se=0;pe<$;pe++)if(j[pe]!=V[pe]){Se=j[pe]>V[pe]?1:-1;break}return Se}function L(j,V,$,oe){for(var pe=0;$--;)j[$]-=pe,j[$]=(pe=j[$]<V[$]?1:0)*oe+j[$]-V[$];for(;!j[0]&&j.length>1;)j.shift()}return function(j,V,$,oe,pe,Se){var ye,Ne,Be,J,ee,Z,he,Ve,mt,Pt,Ut,mn,Ai,Rr,ns,eo,Do,ca,Sr,to,no=j.constructor,ti=j.s==V.s?1:-1,On=j.d,an=V.d;if(!(On&&On[0]&&an&&an[0]))return new no(j.s&&V.s&&(On?!an||On[0]!=an[0]:an)?On&&0==On[0]||!an?0*ti:ti/0:NaN);for(Se?(ee=1,Ne=j.e-V.e):(Se=be,Ne=xe(j.e/(ee=7))-xe(V.e/ee)),Sr=an.length,Do=On.length,Pt=(mt=new no(ti)).d=[],Be=0;an[Be]==(On[Be]||0);Be++);if(an[Be]>(On[Be]||0)&&Ne--,null==$?(Rr=$=no.precision,oe=no.rounding):Rr=pe?$+(j.e-V.e)+1:$,Rr<0)Pt.push(1),Z=!0;else{if(Rr=Rr/ee+2|0,Be=0,1==Sr){for(J=0,an=an[0],Rr++;(Be<Do||J)&&Rr--;Be++)Pt[Be]=(ns=J*Se+(On[Be]||0))/an|0,J=ns%an|0;Z=J||Be<Do}else{for((J=Se/(an[0]+1)|0)>1&&(an=M(an,J,Se),On=M(On,J,Se),Sr=an.length,Do=On.length),eo=Sr,mn=(Ut=On.slice(0,Sr)).length;mn<Sr;)Ut[mn++]=0;(to=an.slice()).unshift(0),ca=an[0],an[1]>=Se/2&&++ca;do{J=0,(ye=N(an,Ut,Sr,mn))<0?(Ai=Ut[0],Sr!=mn&&(Ai=Ai*Se+(Ut[1]||0)),(J=Ai/ca|0)>1?(J>=Se&&(J=Se-1),1==(ye=N(he=M(an,J,Se),Ut,Ve=he.length,mn=Ut.length))&&(J--,L(he,Sr<Ve?to:an,Ve,Se))):(0==J&&(ye=J=1),he=an.slice()),(Ve=he.length)<mn&&he.unshift(0),L(Ut,he,mn,Se),-1==ye&&(ye=N(an,Ut,Sr,mn=Ut.length))<1&&(J++,L(Ut,Sr<mn?to:an,mn,Se)),mn=Ut.length):0===ye&&(J++,Ut=[0]),Pt[Be++]=J,ye&&Ut[0]?Ut[mn++]=On[eo]||0:(Ut=[On[eo]],mn=1)}while((eo++<Do||void 0!==Ut[0])&&Rr--);Z=void 0!==Ut[0]}Pt[0]||Pt.shift()}if(1==ee)mt.e=Ne,_=Z;else{for(Be=1,J=Pt[0];J>=10;J/=10)Be++;mt.e=Be+Ne*ee-1,Ye(mt,pe?$+mt.e+1:$,oe,Z)}return mt}}();function Ye(M,N,L,j){var V,$,oe,pe,Se,ye,Ne,Be,J,ee=M.constructor;e:if(null!=N){if(!(Be=M.d))return M;for(V=1,pe=Be[0];pe>=10;pe/=10)V++;if(($=N-V)<0)$+=7,Se=(Ne=Be[J=0])/Me(10,V-(oe=N)-1)%10|0;else if((J=Math.ceil(($+1)/7))>=(pe=Be.length)){if(!j)break e;for(;pe++<=J;)Be.push(0);Ne=Se=0,V=1,oe=($%=7)-7+1}else{for(Ne=pe=Be[J],V=1;pe>=10;pe/=10)V++;Se=(oe=($%=7)-7+V)<0?0:Ne/Me(10,V-oe-1)%10|0}if(j=j||N<0||void 0!==Be[J+1]||(oe<0?Ne:Ne%Me(10,V-oe-1)),ye=L<4?(Se||j)&&(0==L||L==(M.s<0?3:2)):Se>5||5==Se&&(4==L||j||6==L&&($>0?oe>0?Ne/Me(10,V-oe):0:Be[J-1])%10&1||L==(M.s<0?8:7)),N<1||!Be[0])return Be.length=0,ye?(Be[0]=Me(10,(7-(N-=M.e+1)%7)%7),M.e=-N||0):Be[0]=M.e=0,M;if(0==$?(Be.length=J,pe=1,J--):(Be.length=J+1,pe=Me(10,7-$),Be[J]=oe>0?(Ne/Me(10,V-oe)%Me(10,oe)|0)*pe:0),ye)for(;;){if(0==J){for($=1,oe=Be[0];oe>=10;oe/=10)$++;for(oe=Be[0]+=pe,pe=1;oe>=10;oe/=10)pe++;$!=pe&&(M.e++,Be[0]==be&&(Be[0]=1));break}if(Be[J]+=pe,Be[J]!=be)break;Be[J--]=0,pe=1}for($=Be.length;0===Be[--$];)Be.pop()}return B&&(M.e>ee.maxE?(M.d=null,M.e=NaN):M.e<ee.minE&&(M.e=0,M.d=[0])),M}function Bt(M,N,L){if(!M.isFinite())return Gt(M);var j,V=M.e,$=qe(M.d),oe=$.length;return N?(L&&(j=L-oe)>0?$=$.charAt(0)+"."+$.slice(1)+Ct(j):oe>1&&($=$.charAt(0)+"."+$.slice(1)),$=$+(M.e<0?"e":"e+")+M.e):V<0?($="0."+Ct(-V-1)+$,L&&(j=L-oe)>0&&($+=Ct(j))):V>=oe?($+=Ct(V+1-oe),L&&(j=L-V-1)>0&&($=$+"."+Ct(j))):((j=V+1)<oe&&($=$.slice(0,j)+"."+$.slice(j)),L&&(j=L-oe)>0&&(V+1===oe&&($+="."),$+=Ct(j))),$}function kt(M,N){var L=M[0];for(N*=7;L>=10;L/=10)N++;return N}function lt(M,N,L){if(N>Ze)throw B=!0,L&&(M.precision=L),Error(Ee);return Ye(new M(q),N,1,!0)}function Mt(M,N,L){if(N>qt)throw Error(Ee);return Ye(new M(D),N,L,!0)}function hn(M){var N=M.length-1,L=7*N+1;if(N=M[N]){for(;N%10==0;N/=10)L--;for(N=M[0];N>=10;N/=10)L++}return L}function Ct(M){for(var N="";M--;)N+="0";return N}function Tt(M,N,L,j){var V,$=new M(1),oe=Math.ceil(j/7+4);for(B=!1;;){if(L%2&&Ae(($=$.times(N)).d,oe)&&(V=!0),0===(L=xe(L/2))){L=$.d.length-1,V&&0===$.d[L]&&++$.d[L];break}Ae((N=N.times(N)).d,oe)}return B=!0,$}function vn(M){return 1&M.d[M.d.length-1]}function Yt(M,N,L){for(var j,V=new M(N[0]),$=0;++$<N.length;){if(!(j=new M(N[$])).s){V=j;break}V[L](j)&&(V=j)}return V}function Lt(M,N){var L,j,V,$,oe,pe,Se,ye=0,Ne=0,Be=0,J=M.constructor,ee=J.rounding,Z=J.precision;if(!M.d||!M.d[0]||M.e>17)return new J(M.d?M.d[0]?M.s<0?0:1/0:1:M.s?M.s<0?0:M:NaN);for(null==N?(B=!1,Se=Z):Se=N,pe=new J(.03125);M.e>-2;)M=M.times(pe),Be+=5;for(Se+=j=Math.log(Me(2,Be))/Math.LN10*2+5|0,L=$=oe=new J(1),J.precision=Se;;){if($=Ye($.times(M),Se,1),L=L.times(++Ne),qe((pe=oe.plus(Qe($,L,Se,1))).d).slice(0,Se)===qe(oe.d).slice(0,Se)){for(V=Be;V--;)oe=Ye(oe.times(oe),Se,1);if(null!=N)return J.precision=Z,oe;if(!(ye<3&&Y(oe.d,Se-j,ee,ye)))return Ye(oe,J.precision=Z,ee,B=!0);J.precision=Se+=10,L=$=pe=new J(1),Ne=0,ye++}oe=pe}}function rn(M,N){var L,j,V,$,oe,pe,Se,ye,Ne,Be,J,ee=1,he=M,Ve=he.d,mt=he.constructor,Pt=mt.rounding,Ut=mt.precision;if(he.s<0||!Ve||!Ve[0]||!he.e&&1==Ve[0]&&1==Ve.length)return new mt(Ve&&!Ve[0]?-1/0:1!=he.s?NaN:Ve?0:he);if(null==N?(B=!1,Ne=Ut):Ne=N,mt.precision=Ne+=10,j=(L=qe(Ve)).charAt(0),!(Math.abs($=he.e)<15e14))return ye=lt(mt,Ne+2,Ut).times($+""),he=rn(new mt(j+"."+L.slice(1)),Ne-10).plus(ye),mt.precision=Ut,null==N?Ye(he,Ut,Pt,B=!0):he;for(;j<7&&1!=j||1==j&&L.charAt(1)>3;)j=(L=qe((he=he.times(M)).d)).charAt(0),ee++;for($=he.e,j>1?(he=new mt("0."+L),$++):he=new mt(j+"."+L.slice(1)),Be=he,Se=oe=he=Qe(he.minus(1),he.plus(1),Ne,1),J=Ye(he.times(he),Ne,1),V=3;;){if(oe=Ye(oe.times(J),Ne,1),qe((ye=Se.plus(Qe(oe,new mt(V),Ne,1))).d).slice(0,Ne)===qe(Se.d).slice(0,Ne)){if(Se=Se.times(2),0!==$&&(Se=Se.plus(lt(mt,Ne+2,Ut).times($+""))),Se=Qe(Se,new mt(ee),Ne,1),null!=N)return mt.precision=Ut,Se;if(!Y(Se.d,Ne-10,Pt,pe))return Ye(Se,mt.precision=Ut,Pt,B=!0);mt.precision=Ne+=10,ye=oe=he=Qe(Be.minus(1),Be.plus(1),Ne,1),J=Ye(he.times(he),Ne,1),V=pe=1}Se=ye,V+=2}}function Gt(M){return String(M.s*M.s/0)}function Jt(M,N){var L,j,V;for((L=N.indexOf("."))>-1&&(N=N.replace(".","")),(j=N.search(/e/i))>0?(L<0&&(L=j),L+=+N.slice(j+1),N=N.substring(0,j)):L<0&&(L=N.length),j=0;48===N.charCodeAt(j);j++);for(V=N.length;48===N.charCodeAt(V-1);--V);if(N=N.slice(j,V)){if(V-=j,M.e=L=L-j-1,M.d=[],j=(L+1)%7,L<0&&(j+=7),j<V){for(j&&M.d.push(+N.slice(0,j)),V-=7;j<V;)M.d.push(+N.slice(j,j+=7));j=7-(N=N.slice(j)).length}else j-=V;for(;j--;)N+="0";M.d.push(+N),B&&(M.e>M.constructor.maxE?(M.d=null,M.e=NaN):M.e<M.constructor.minE&&(M.e=0,M.d=[0]))}else M.e=0,M.d=[0];return M}function $n(M,N,L,j,V){var $,oe,pe,Se,Ne=M.precision,Be=Math.ceil(Ne/7);for(B=!1,Se=L.times(L),pe=new M(j);;){if(oe=Qe(pe.times(Se),new M(N++*N++),Ne,1),pe=V?j.plus(oe):j.minus(oe),j=Qe(oe.times(Se),new M(N++*N++),Ne,1),void 0!==(oe=pe.plus(j)).d[Be]){for($=Be;oe.d[$]===pe.d[$]&&$--;);if(-1==$)break}$=pe,pe=j,j=oe,oe=$}return B=!0,oe.d.length=Be+1,oe}function or(M,N){for(var L=M;--N;)L*=M;return L}function dr(M,N){var L,j=N.s<0,V=Mt(M,M.precision,1),$=V.times(.5);if((N=N.abs()).lte($))return O=j?4:1,N;if((L=N.divToInt(V)).isZero())O=j?3:2;else{if((N=N.minus(L.times(V))).lte($))return O=vn(L)?j?2:3:j?4:1,N;O=vn(L)?j?1:4:j?3:2}return N.minus(V).abs()}function me(M,N,L,j){var V,$,oe,pe,Se,ye,Ne,Be,J,ee=M.constructor,Z=void 0!==L;if(Z?(dt(L,1,W),void 0===j?j=ee.rounding:dt(j,0,8)):(L=ee.precision,j=ee.rounding),M.isFinite()){for(Z?(V=2,16==N?L=4*L-3:8==N&&(L=3*L-2)):V=N,(oe=(Ne=Bt(M)).indexOf("."))>=0&&(Ne=Ne.replace(".",""),(J=new ee(1)).e=Ne.length-oe,J.d=Ue(Bt(J),10,V),J.e=J.d.length),$=Se=(Be=Ue(Ne,10,V)).length;0==Be[--Se];)Be.pop();if(Be[0]){if(oe<0?$--:((M=new ee(M)).d=Be,M.e=$,Be=(M=Qe(M,J,L,j,0,V)).d,$=M.e,ye=_),oe=Be[L],pe=V/2,ye=ye||void 0!==Be[L+1],ye=j<4?(void 0!==oe||ye)&&(0===j||j===(M.s<0?3:2)):oe>pe||oe===pe&&(4===j||ye||6===j&&1&Be[L-1]||j===(M.s<0?8:7)),Be.length=L,ye)for(;++Be[--L]>V-1;)Be[L]=0,L||(++$,Be.unshift(1));for(Se=Be.length;!Be[Se-1];--Se);for(oe=0,Ne="";oe<Se;oe++)Ne+=X.charAt(Be[oe]);if(Z){if(Se>1)if(16==N||8==N){for(oe=16==N?4:3,--Se;Se%oe;Se++)Ne+="0";for(Se=(Be=Ue(Ne,V,N)).length;!Be[Se-1];--Se);for(oe=1,Ne="1.";oe<Se;oe++)Ne+=X.charAt(Be[oe])}else Ne=Ne.charAt(0)+"."+Ne.slice(1);Ne=Ne+($<0?"p":"p+")+$}else if($<0){for(;++$;)Ne="0"+Ne;Ne="0."+Ne}else if(++$>Se)for($-=Se;$--;)Ne+="0";else $<Se&&(Ne=Ne.slice(0,$)+"."+Ne.slice($))}else Ne=Z?"0p+0":"0";Ne=(16==N?"0x":2==N?"0b":8==N?"0o":"")+Ne}else Ne=Gt(M);return M.s<0?"-"+Ne:Ne}function Ae(M,N){if(M.length>N)return M.length=N,!0}function Pe(M){return new this(M).abs()}function Te(M){return new this(M).acos()}function _t(M){return new this(M).acosh()}function Dt(M,N){return new this(M).plus(N)}function Rt(M){return new this(M).asin()}function xt(M){return new this(M).asinh()}function pt(M){return new this(M).atan()}function $t(M){return new this(M).atanh()}function Hn(M,N){M=new this(M),N=new this(N);var L,j=this.precision,V=this.rounding,$=j+4;return M.s&&N.s?M.d||N.d?!N.d||M.isZero()?(L=N.s<0?Mt(this,j,V):new this(0)).s=M.s:!M.d||N.isZero()?(L=Mt(this,$,1).times(.5)).s=M.s:N.s<0?(this.precision=$,this.rounding=1,L=this.atan(Qe(M,N,$,1)),N=Mt(this,$,1),this.precision=j,this.rounding=V,L=M.s<0?L.minus(N):L.plus(N)):L=this.atan(Qe(M,N,$,1)):(L=Mt(this,$,1).times(N.s>0?.25:.75)).s=M.s:L=new this(NaN),L}function kn(M){return new this(M).cbrt()}function Zn(M){return Ye(M=new this(M),M.e+1,2)}function ui(M,N,L){return new this(M).clamp(N,L)}function So(M){if(!M||"object"!=typeof M)throw Error(de+"Object expected");var N,L,j,V=!0===M.defaults,$=["precision",1,W,"rounding",0,8,"toExpNeg",-v,0,"toExpPos",0,v,"maxE",0,v,"minE",-v,0,"modulo",0,9];for(N=0;N<$.length;N+=3)if(L=$[N],V&&(this[L]=ie[L]),void 0!==(j=M[L])){if(!(xe(j)===j&&j>=$[N+1]&&j<=$[N+2]))throw Error(le+L+": "+j);this[L]=j}if(L="crypto",V&&(this[L]=ie[L]),void 0!==(j=M[L])){if(!0!==j&&!1!==j&&0!==j&&1!==j)throw Error(le+L+": "+j);if(j){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(re);this[L]=!0}else this[L]=!1}return this}function Mi(M){return new this(M).cos()}function Ci(M){return new this(M).cosh()}function Ur(M,N){return new this(M).div(N)}function Si(M){return new this(M).exp()}function Vr(M){return Ye(M=new this(M),M.e+1,3)}function xi(){var M,N,L=new this(0);for(B=!1,M=0;M<arguments.length;)if((N=new this(arguments[M++])).d)L.d&&(L=L.plus(N.times(N)));else{if(N.s)return B=!0,new this(1/0);L=N}return B=!0,L.sqrt()}function $r(M){return M instanceof z||M&&M.toStringTag===Ce||!1}function Ji(M){return new this(M).ln()}function hr(M,N){return new this(M).log(N)}function wi(M){return new this(M).log(2)}function Ei(M){return new this(M).log(10)}function Di(){return Yt(this,arguments,"lt")}function xo(){return Yt(this,arguments,"gt")}function wo(M,N){return new this(M).mod(N)}function zr(M,N){return new this(M).mul(N)}function Ii(M,N){return new this(M).pow(N)}function ei(M){var N,L,j,V,$=0,oe=new this(1),pe=[];if(void 0===M?M=this.precision:dt(M,1,W),j=Math.ceil(M/7),this.crypto)if(crypto.getRandomValues)for(N=crypto.getRandomValues(new Uint32Array(j));$<j;)(V=N[$])>=429e7?N[$]=crypto.getRandomValues(new Uint32Array(1))[0]:pe[$++]=V%1e7;else{if(!crypto.randomBytes)throw Error(re);for(N=crypto.randomBytes(j*=4);$<j;)(V=N[$]+(N[$+1]<<8)+(N[$+2]<<16)+((127&N[$+3])<<24))>=214e7?crypto.randomBytes(4).copy(N,$):(pe.push(V%1e7),$+=4);$=j/4}else for(;$<j;)pe[$++]=1e7*Math.random()|0;for(M%=7,(j=pe[--$])&&M&&(V=Me(10,7-M),pe[$]=(j/V|0)*V);0===pe[$];$--)pe.pop();if($<0)L=0,pe=[0];else{for(L=-1;0===pe[0];L-=7)pe.shift();for(j=1,V=pe[0];V>=10;V/=10)j++;j<7&&(L-=7-j)}return oe.e=L,oe.d=pe,oe}function Gr(M){return Ye(M=new this(M),M.e+1,this.rounding)}function Eo(M){return(M=new this(M)).d?M.d[0]?M.s:0*M.s:M.s||NaN}function Fi(M){return new this(M).sin()}function Qi(M){return new this(M).sinh()}function Xi(M){return new this(M).sqrt()}function Yi(M,N){return new this(M).sub(N)}function Mr(){var M=0,N=arguments,L=new this(N[M]);for(B=!1;L.s&&++M<N.length;)L=L.plus(N[M]);return B=!0,Ye(L,this.precision,this.rounding)}function Cr(M){return new this(M).tan()}function pn(M){return new this(M).tanh()}function Fn(M){return Ye(M=new this(M),M.e+1,1)}(z=function Yr(M){var N,L,j;function V($){var oe,pe,Se,ye=this;if(!(ye instanceof V))return new V($);if(ye.constructor=V,$r($))return ye.s=$.s,void(B?!$.d||$.e>V.maxE?(ye.e=NaN,ye.d=null):$.e<V.minE?(ye.e=0,ye.d=[0]):(ye.e=$.e,ye.d=$.d.slice()):(ye.e=$.e,ye.d=$.d?$.d.slice():$.d));if("number"==(Se=typeof $)){if(0===$)return ye.s=1/$<0?-1:1,ye.e=0,void(ye.d=[0]);if($<0?($=-$,ye.s=-1):ye.s=1,$===~~$&&$<1e7){for(oe=0,pe=$;pe>=10;pe/=10)oe++;return void(B?oe>V.maxE?(ye.e=NaN,ye.d=null):oe<V.minE?(ye.e=0,ye.d=[0]):(ye.e=oe,ye.d=[$]):(ye.e=oe,ye.d=[$]))}return 0*$!=0?($||(ye.s=NaN),ye.e=NaN,void(ye.d=null)):Jt(ye,$.toString())}if("string"!==Se)throw Error(le+$);return 45===(pe=$.charCodeAt(0))?($=$.slice(1),ye.s=-1):(43===pe&&($=$.slice(1)),ye.s=1),ut.test($)?Jt(ye,$):function(M,N){var L,j,V,$,oe,pe,Se,ye,Ne;if(N.indexOf("_")>-1){if(N=N.replace(/(\d)_(?=\d)/g,"$1"),ut.test(N))return Jt(M,N)}else if("Infinity"===N||"NaN"===N)return+N||(M.s=NaN),M.e=NaN,M.d=null,M;if(ke.test(N))L=16,N=N.toLowerCase();else if(Fe.test(N))L=2;else{if(!et.test(N))throw Error(le+N);L=8}for(($=N.search(/p/i))>0?(Se=+N.slice($+1),N=N.substring(2,$)):N=N.slice(2),$=N.indexOf("."),j=M.constructor,(oe=$>=0)&&($=(pe=(N=N.replace(".","")).length)-$,V=Tt(j,new j(L),$,2*$)),$=Ne=(ye=Ue(N,L,be)).length-1;0===ye[$];--$)ye.pop();return $<0?new j(0*M.s):(M.e=kt(ye,Ne),M.d=ye,B=!1,oe&&(M=Qe(M,V,4*pe)),Se&&(M=M.times(Math.abs(Se)<54?Me(2,Se):z.pow(2,Se))),B=!0,M)}(ye,$)}if(V.prototype=Oe,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=So,V.clone=Yr,V.isDecimal=$r,V.abs=Pe,V.acos=Te,V.acosh=_t,V.add=Dt,V.asin=Rt,V.asinh=xt,V.atan=pt,V.atanh=$t,V.atan2=Hn,V.cbrt=kn,V.ceil=Zn,V.clamp=ui,V.cos=Mi,V.cosh=Ci,V.div=Ur,V.exp=Si,V.floor=Vr,V.hypot=xi,V.ln=Ji,V.log=hr,V.log10=Ei,V.log2=wi,V.max=Di,V.min=xo,V.mod=wo,V.mul=zr,V.pow=Ii,V.random=ei,V.round=Gr,V.sign=Eo,V.sin=Fi,V.sinh=Qi,V.sqrt=Xi,V.sub=Yi,V.sum=Mr,V.tan=Cr,V.tanh=pn,V.trunc=Fn,void 0===M&&(M={}),M&&!0!==M.defaults)for(j=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],N=0;N<j.length;)M.hasOwnProperty(L=j[N++])||(M[L]=this[L]);return V.config(M),V}(ie)).prototype.constructor=z,z.default=z.Decimal=z,q=new z(q),D=new z(D),void 0!==(t=function(){return z}.call(ce,I,ce,je))&&(je.exports=t)}()},9597:function(je,ce){var t;!function(w){"use strict";var W={s:1,n:0,d:1};function X(re){function Ce(){var Me=Error.apply(this,arguments);Me.name=this.name=re,this.stack=Me.stack,this.message=Me.message}function xe(){}return xe.prototype=Error.prototype,Ce.prototype=new xe,Ce}var q=Ee.DivisionByZero=X("DivisionByZero"),D=Ee.InvalidParameter=X("InvalidParameter");function ie(re,Ce){return isNaN(re=parseInt(re,10))&&z(),re*Ce}function z(){throw new D}function _(re){for(var Ce={},xe=re,Me=2,Fe=4;Fe<=xe;){for(;xe%Me==0;)xe/=Me,Ce[Me]=(Ce[Me]||0)+1;Fe+=1+2*Me++}return xe!==re?xe>1&&(Ce[xe]=(Ce[xe]||0)+1):Ce[re]=(Ce[re]||0)+1,Ce}var y=function(re,Ce){var dt,xe=0,Me=1,Fe=1,ke=0,et=0,ut=0,be=1,He=1,tt=0,Ze=1,qt=1,Oe=1,qe=1e7;if(null!=re)if(void 0!==Ce)Fe=(xe=re)*(Me=Ce);else switch(typeof re){case"object":"d"in re&&"n"in re?(xe=re.n,Me=re.d,"s"in re&&(xe*=re.s)):0 in re?(xe=re[0],1 in re&&(Me=re[1])):z(),Fe=xe*Me;break;case"number":if(re<0&&(Fe=re,re=-re),re%1==0)xe=re;else if(re>0){for(re>=1&&(re/=He=Math.pow(10,Math.floor(1+Math.log(re)/Math.LN10)));Ze<=qe&&Oe<=qe;){if(re===(dt=(tt+qt)/(Ze+Oe))){Ze+Oe<=qe?(xe=tt+qt,Me=Ze+Oe):Oe>Ze?(xe=qt,Me=Oe):(xe=tt,Me=Ze);break}re>dt?(tt+=qt,Ze+=Oe):(qt+=tt,Oe+=Ze),Ze>qe?(xe=qt,Me=Oe):(xe=tt,Me=Ze)}xe*=He}else(isNaN(re)||isNaN(Ce))&&(Me=xe=NaN);break;case"string":if(null===(Ze=re.match(/\d+|./g))&&z(),"-"===Ze[tt]?(Fe=-1,tt++):"+"===Ze[tt]&&tt++,Ze.length===tt+1?et=ie(Ze[tt++],Fe):"."===Ze[tt+1]||"."===Ze[tt]?("."!==Ze[tt]&&(ke=ie(Ze[tt++],Fe)),(1+ ++tt===Ze.length||"("===Ze[tt+1]&&")"===Ze[tt+3]||"'"===Ze[tt+1]&&"'"===Ze[tt+3])&&(et=ie(Ze[tt],Fe),be=Math.pow(10,Ze[tt].length),tt++),("("===Ze[tt]&&")"===Ze[tt+2]||"'"===Ze[tt]&&"'"===Ze[tt+2])&&(ut=ie(Ze[tt+1],Fe),He=Math.pow(10,Ze[tt+1].length)-1,tt+=3)):"/"===Ze[tt+1]||":"===Ze[tt+1]?(et=ie(Ze[tt],Fe),be=ie(Ze[tt+2],1),tt+=3):"/"===Ze[tt+3]&&" "===Ze[tt+1]&&(ke=ie(Ze[tt],Fe),et=ie(Ze[tt+2],Fe),be=ie(Ze[tt+4],1),tt+=5),Ze.length<=tt){Fe=xe=ut+(Me=be*He)*ke+He*et;break}default:z()}if(0===Me)throw new q;W.s=Fe<0?-1:1,W.n=Math.abs(xe),W.d=Math.abs(Me)};function le(re,Ce){if(!re)return Ce;if(!Ce)return re;for(;;){if(!(re%=Ce))return Ce;if(!(Ce%=re))return re}}function Ee(re,Ce){if(!(this instanceof Ee))return new Ee(re,Ce);y(re,Ce),re=Ee.REDUCE?le(W.d,W.n):1,this.s=W.s,this.n=W.n/re,this.d=W.d/re}Ee.REDUCE=1,Ee.prototype={s:1,n:0,d:1,abs:function(){return new Ee(this.n,this.d)},neg:function(){return new Ee(-this.s*this.n,this.d)},add:function(re,Ce){return y(re,Ce),new Ee(this.s*this.n*W.d+W.s*this.d*W.n,this.d*W.d)},sub:function(re,Ce){return y(re,Ce),new Ee(this.s*this.n*W.d-W.s*this.d*W.n,this.d*W.d)},mul:function(re,Ce){return y(re,Ce),new Ee(this.s*W.s*this.n*W.n,this.d*W.d)},div:function(re,Ce){return y(re,Ce),new Ee(this.s*W.s*this.n*W.d,this.d*W.n)},clone:function(){return new Ee(this)},mod:function(re,Ce){return isNaN(this.n)||isNaN(this.d)?new Ee(NaN):void 0===re?new Ee(this.s*this.n%this.d,1):(y(re,Ce),0===W.n&&0===this.d&&Ee(0,0),new Ee(this.s*(W.d*this.n)%(W.n*this.d),W.d*this.d))},gcd:function(re,Ce){return y(re,Ce),new Ee(le(W.n,this.n)*le(W.d,this.d),W.d*this.d)},lcm:function(re,Ce){return y(re,Ce),0===W.n&&0===this.n?new Ee:new Ee(W.n*this.n,le(W.n,this.n)*le(W.d,this.d))},ceil:function(re){return re=Math.pow(10,re||0),isNaN(this.n)||isNaN(this.d)?new Ee(NaN):new Ee(Math.ceil(re*this.s*this.n/this.d),re)},floor:function(re){return re=Math.pow(10,re||0),isNaN(this.n)||isNaN(this.d)?new Ee(NaN):new Ee(Math.floor(re*this.s*this.n/this.d),re)},round:function(re){return re=Math.pow(10,re||0),isNaN(this.n)||isNaN(this.d)?new Ee(NaN):new Ee(Math.round(re*this.s*this.n/this.d),re)},inverse:function(){return new Ee(this.s*this.d,this.n)},pow:function(re,Ce){if(y(re,Ce),1===W.d)return W.s<0?new Ee(Math.pow(this.s*this.d,W.n),Math.pow(this.n,W.n)):new Ee(Math.pow(this.s*this.n,W.n),Math.pow(this.d,W.n));if(this.s<0)return null;var xe=_(this.n),Me=_(this.d),Fe=1,ke=1;for(var et in xe)if("1"!==et){if("0"===et){Fe=0;break}if(xe[et]*=W.n,xe[et]%W.d!=0)return null;xe[et]/=W.d,Fe*=Math.pow(et,xe[et])}for(var et in Me)if("1"!==et){if(Me[et]*=W.n,Me[et]%W.d!=0)return null;Me[et]/=W.d,ke*=Math.pow(et,Me[et])}return W.s<0?new Ee(ke,Fe):new Ee(Fe,ke)},equals:function(re,Ce){return y(re,Ce),this.s*this.n*W.d==W.s*W.n*this.d},compare:function(re,Ce){y(re,Ce);var xe=this.s*this.n*W.d-W.s*W.n*this.d;return(0<xe)-(xe<0)},simplify:function(re){if(isNaN(this.n)||isNaN(this.d))return this;var Ce=this.abs().toContinued();function xe(ke){return 1===ke.length?new Ee(ke[0]):xe(ke.slice(1)).inverse().add(ke[0])}re=re||.001;for(var Me=0;Me<Ce.length;Me++){var Fe=xe(Ce.slice(0,Me+1));if(Fe.sub(this.abs()).abs().valueOf()<re)return Fe.mul(this.s)}return this},divisible:function(re,Ce){return y(re,Ce),!(!(W.n*this.d)||this.n*W.d%(W.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(re){var Ce,xe="",Me=this.n,Fe=this.d;return this.s<0&&(xe+="-"),1===Fe?xe+=Me:(re&&(Ce=Math.floor(Me/Fe))>0&&(xe+=Ce,xe+=" ",Me%=Fe),xe+=Me,xe+="/",xe+=Fe),xe},toLatex:function(re){var Ce,xe="",Me=this.n,Fe=this.d;return this.s<0&&(xe+="-"),1===Fe?xe+=Me:(re&&(Ce=Math.floor(Me/Fe))>0&&(xe+=Ce,Me%=Fe),xe+="\\frac{",xe+=Me,xe+="}{",xe+=Fe,xe+="}"),xe},toContinued:function(){var re,Ce=this.n,xe=this.d,Me=[];if(isNaN(Ce)||isNaN(xe))return Me;do{Me.push(Math.floor(Ce/xe)),re=Ce%xe,Ce=xe,xe=re}while(1!==Ce);return Me},toString:function(re){var Ce,xe=this.n,Me=this.d;if(isNaN(xe)||isNaN(Me))return"NaN";Ee.REDUCE||(xe/=Ce=le(xe,Me),Me/=Ce),re=re||15;var Fe=function(re,Ce){for(;Ce%2==0;Ce/=2);for(;Ce%5==0;Ce/=5);if(1===Ce)return 0;for(var xe=10%Ce,Me=1;1!==xe;Me++)if(xe=10*xe%Ce,Me>2e3)return 0;return Me}(0,Me),ke=function(re,Ce,xe){for(var Me=1,Fe=function(re,Ce,xe){for(var Me=1;Ce>0;re=re*re%xe,Ce>>=1)1&Ce&&(Me=Me*re%xe);return Me}(10,xe,Ce),ke=0;ke<300;ke++){if(Me===Fe)return ke;Me=10*Me%Ce,Fe=10*Fe%Ce}return 0}(0,Me,Fe),et=-1===this.s?"-":"";if(et+=xe/Me|0,xe%=Me,(xe*=10)&&(et+="."),Fe){for(var ut=ke;ut--;)et+=xe/Me|0,xe%=Me,xe*=10;for(et+="(",ut=Fe;ut--;)et+=xe/Me|0,xe%=Me,xe*=10;et+=")"}else for(ut=re;xe&&ut--;)et+=xe/Me|0,xe%=Me,xe*=10;return et}},void 0!==(t=function(){return Ee}.apply(ce,[]))&&(je.exports=t)}()},5555:je=>{je.exports=function ce(I,t){"use strict";var de,le,w=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,v=/(^[ ]*|[ ]*$)/g,W=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,X=/^0x[0-9a-f]+$/i,q=/^0/,D=function(Ce){return ce.insensitive&&(""+Ce).toLowerCase()||""+Ce},ie=D(I).replace(v,"")||"",z=D(t).replace(v,"")||"",_=ie.replace(w,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=z.replace(w,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),O=parseInt(ie.match(X),16)||1!==_.length&&ie.match(W)&&Date.parse(ie),B=parseInt(z.match(X),16)||O&&z.match(W)&&Date.parse(z)||null;if(B){if(O<B)return-1;if(O>B)return 1}for(var Ee=0,re=Math.max(_.length,y.length);Ee<re;Ee++){if(de=!(_[Ee]||"").match(q)&&parseFloat(_[Ee])||_[Ee]||0,le=!(y[Ee]||"").match(q)&&parseFloat(y[Ee])||y[Ee]||0,isNaN(de)!==isNaN(le))return isNaN(de)?1:-1;if(typeof de!=typeof le&&(de+="",le+=""),de<le)return-1;if(de>le)return 1}return 0}},4901:(je,ce,I)=>{var t=I(3366),w=I(9678),v=I(5278),W=I(5457),X=I(7594),q=I(9035),D=I(8507);D.alea=t,D.xor128=w,D.xorwow=v,D.xorshift7=W,D.xor4096=X,D.tychei=q,je.exports=D},3366:function(je,ce,I){var t;!function(w,v,W){function X(z){var _=this,y=function(){var z=4022871197;return function(y){y=String(y);for(var O=0;O<y.length;O++){var B=.02519603282416938*(z+=y.charCodeAt(O));B-=z=B>>>0,z=(B*=z)>>>0,z+=4294967296*(B-=z)}return 2.3283064365386963e-10*(z>>>0)}}();_.next=function(){var O=2091639*_.s0+2.3283064365386963e-10*_.c;return _.s0=_.s1,_.s1=_.s2,_.s2=O-(_.c=0|O)},_.c=1,_.s0=y(" "),_.s1=y(" "),_.s2=y(" "),_.s0-=y(z),_.s0<0&&(_.s0+=1),_.s1-=y(z),_.s1<0&&(_.s1+=1),_.s2-=y(z),_.s2<0&&(_.s2+=1),y=null}function q(z,_){return _.c=z.c,_.s0=z.s0,_.s1=z.s1,_.s2=z.s2,_}function D(z,_){var y=new X(z),O=_&&_.state,B=y.next;return B.int32=function(){return 4294967296*y.next()|0},B.double=function(){return B()+11102230246251565e-32*(2097152*B()|0)},B.quick=B,O&&("object"==typeof O&&q(O,y),B.state=function(){return q(y,{})}),B}v&&v.exports?v.exports=D:I.amdD&&I.amdO?void 0!==(t=function(){return D}.call(ce,I,ce,v))&&(v.exports=t):this.alea=D}(0,je=I.nmd(je))},9035:function(je,ce,I){var t;!function(w,v,W){function X(ie){var z=this,_="";z.next=function(){var O=z.b,B=z.c,de=z.d,le=z.a;return O=O<<25^O>>>7^B,B=B-de|0,de=de<<24^de>>>8^le,le=le-O|0,z.b=O=O<<20^O>>>12^B,z.c=B=B-de|0,z.d=de<<16^B>>>16^le,z.a=le-O|0},z.a=0,z.b=0,z.c=-1640531527,z.d=1367130551,ie===Math.floor(ie)?(z.a=ie/4294967296|0,z.b=0|ie):_+=ie;for(var y=0;y<_.length+20;y++)z.b^=0|_.charCodeAt(y),z.next()}function q(ie,z){return z.a=ie.a,z.b=ie.b,z.c=ie.c,z.d=ie.d,z}function D(ie,z){var _=new X(ie),y=z&&z.state,O=function(){return(_.next()>>>0)/4294967296};return O.double=function(){do{var le=((_.next()>>>11)+(_.next()>>>0)/4294967296)/(1<<21)}while(0===le);return le},O.int32=_.next,O.quick=O,y&&("object"==typeof y&&q(y,_),O.state=function(){return q(_,{})}),O}v&&v.exports?v.exports=D:I.amdD&&I.amdO?void 0!==(t=function(){return D}.call(ce,I,ce,v))&&(v.exports=t):this.tychei=D}(0,je=I.nmd(je))},9678:function(je,ce,I){var t;!function(w,v,W){function X(ie){var z=this,_="";z.x=0,z.y=0,z.z=0,z.w=0,z.next=function(){var O=z.x^z.x<<11;return z.x=z.y,z.y=z.z,z.z=z.w,z.w^=z.w>>>19^O^O>>>8},ie===(0|ie)?z.x=ie:_+=ie;for(var y=0;y<_.length+64;y++)z.x^=0|_.charCodeAt(y),z.next()}function q(ie,z){return z.x=ie.x,z.y=ie.y,z.z=ie.z,z.w=ie.w,z}function D(ie,z){var _=new X(ie),y=z&&z.state,O=function(){return(_.next()>>>0)/4294967296};return O.double=function(){do{var le=((_.next()>>>11)+(_.next()>>>0)/4294967296)/(1<<21)}while(0===le);return le},O.int32=_.next,O.quick=O,y&&("object"==typeof y&&q(y,_),O.state=function(){return q(_,{})}),O}v&&v.exports?v.exports=D:I.amdD&&I.amdO?void 0!==(t=function(){return D}.call(ce,I,ce,v))&&(v.exports=t):this.xor128=D}(0,je=I.nmd(je))},7594:function(je,ce,I){var t;!function(w,v,W){function X(ie){var z=this;z.next=function(){var de,le,y=z.w,O=z.X,B=z.i;return z.w=y=y+1640531527|0,le=O[B+34&127],de=O[B=B+1&127],le^=le<<13,de^=de<<17,le=O[B]=(le^=le>>>15)^(de^=de>>>12),z.i=B,le+(y^y>>>16)|0},function(y,O){var B,de,le,Ee,re,Ce=[],xe=128;for(O===(0|O)?(de=O,O=null):(O+="\0",de=0,xe=Math.max(xe,O.length)),le=0,Ee=-32;Ee<xe;++Ee)O&&(de^=O.charCodeAt((Ee+32)%O.length)),0===Ee&&(re=de),de^=de<<10,de^=de>>>15,de^=de<<4,de^=de>>>13,Ee>=0&&(le=0==(B=Ce[127&Ee]^=de+(re=re+1640531527|0))?le+1:0);for(le>=128&&(Ce[127&(O&&O.length||0)]=-1),le=127,Ee=512;Ee>0;--Ee)de=Ce[le+34&127],B=Ce[le=le+1&127],de^=de<<13,B^=B<<17,Ce[le]=(de^=de>>>15)^(B^=B>>>12);y.w=re,y.X=Ce,y.i=le}(z,ie)}function q(ie,z){return z.i=ie.i,z.w=ie.w,z.X=ie.X.slice(),z}function D(ie,z){null==ie&&(ie=+new Date);var _=new X(ie),y=z&&z.state,O=function(){return(_.next()>>>0)/4294967296};return O.double=function(){do{var le=((_.next()>>>11)+(_.next()>>>0)/4294967296)/(1<<21)}while(0===le);return le},O.int32=_.next,O.quick=O,y&&(y.X&&q(y,_),O.state=function(){return q(_,{})}),O}v&&v.exports?v.exports=D:I.amdD&&I.amdO?void 0!==(t=function(){return D}.call(ce,I,ce,v))&&(v.exports=t):this.xor4096=D}(0,je=I.nmd(je))},5457:function(je,ce,I){var t;!function(w,v,W){function X(ie){var z=this;z.next=function(){var B,de,y=z.x,O=z.i;return B=y[O],de=(B^=B>>>7)^B<<24,de^=(B=y[O+1&7])^B>>>10,de^=(B=y[O+3&7])^B>>>3,de^=(B=y[O+4&7])^B<<7,B=y[O+7&7],y[O]=de^=(B^=B<<13)^B<<9,z.i=O+1&7,de},function(y,O){var B,le=[];if(O===(0|O))le[0]=O;else for(O=""+O,B=0;B<O.length;++B)le[7&B]=le[7&B]<<15^O.charCodeAt(B)+le[B+1&7]<<13;for(;le.length<8;)le.push(0);for(B=0;B<8&&0===le[B];++B);for(8==B&&(le[7]=-1),y.x=le,y.i=0,B=256;B>0;--B)y.next()}(z,ie)}function q(ie,z){return z.x=ie.x.slice(),z.i=ie.i,z}function D(ie,z){null==ie&&(ie=+new Date);var _=new X(ie),y=z&&z.state,O=function(){return(_.next()>>>0)/4294967296};return O.double=function(){do{var le=((_.next()>>>11)+(_.next()>>>0)/4294967296)/(1<<21)}while(0===le);return le},O.int32=_.next,O.quick=O,y&&(y.x&&q(y,_),O.state=function(){return q(_,{})}),O}v&&v.exports?v.exports=D:I.amdD&&I.amdO?void 0!==(t=function(){return D}.call(ce,I,ce,v))&&(v.exports=t):this.xorshift7=D}(0,je=I.nmd(je))},5278:function(je,ce,I){var t;!function(w,v,W){function X(ie){var z=this,_="";z.next=function(){var O=z.x^z.x>>>2;return z.x=z.y,z.y=z.z,z.z=z.w,z.w=z.v,(z.d=z.d+362437|0)+(z.v=z.v^z.v<<4^O^O<<1)|0},z.x=0,z.y=0,z.z=0,z.w=0,z.v=0,ie===(0|ie)?z.x=ie:_+=ie;for(var y=0;y<_.length+64;y++)z.x^=0|_.charCodeAt(y),y==_.length&&(z.d=z.x<<10^z.x>>>4),z.next()}function q(ie,z){return z.x=ie.x,z.y=ie.y,z.z=ie.z,z.w=ie.w,z.v=ie.v,z.d=ie.d,z}function D(ie,z){var _=new X(ie),y=z&&z.state,O=function(){return(_.next()>>>0)/4294967296};return O.double=function(){do{var le=((_.next()>>>11)+(_.next()>>>0)/4294967296)/(1<<21)}while(0===le);return le},O.int32=_.next,O.quick=O,y&&("object"==typeof y&&q(y,_),O.state=function(){return q(_,{})}),O}v&&v.exports?v.exports=D:I.amdD&&I.amdO?void 0!==(t=function(){return D}.call(ce,I,ce,v))&&(v.exports=t):this.xorwow=D}(0,je=I.nmd(je))},8507:function(je,ce,I){var t;!function(w,v,W){var B,X=256,z=W.pow(X,6),_=W.pow(2,52),y=2*_,O=255;function de(Fe,ke,et){var ut=[],be=Ce(re((ke=1==ke?{entropy:!0}:ke||{}).entropy?[Fe,Me(v)]:null==Fe?function(){try{var Fe;return B&&(Fe=B.randomBytes)?Fe=Fe(X):(Fe=new Uint8Array(X),(w.crypto||w.msCrypto).getRandomValues(Fe)),Me(Fe)}catch(ut){var ke=w.navigator,et=ke&&ke.plugins;return[+new Date,w,et,w.screen,Me(v)]}}():Fe,3),ut),He=new le(ut),tt=function(){for(var Ze=He.g(6),qt=z,Oe=0;Ze<_;)Ze=(Ze+Oe)*X,qt*=X,Oe=He.g(1);for(;Ze>=y;)Ze/=2,qt/=2,Oe>>>=1;return(Ze+Oe)/qt};return tt.int32=function(){return 0|He.g(4)},tt.quick=function(){return He.g(4)/4294967296},tt.double=tt,Ce(Me(He.S),v),(ke.pass||et||function(Ze,qt,Oe,qe){return qe&&(qe.S&&Ee(qe,He),Ze.state=function(){return Ee(He,{})}),Oe?(W.random=Ze,qt):Ze})(tt,be,"global"in ke?ke.global:this==W,ke.state)}function le(Fe){var ke,et=Fe.length,ut=this,be=0,He=ut.i=ut.j=0,tt=ut.S=[];for(et||(Fe=[et++]);be<X;)tt[be]=be++;for(be=0;be<X;be++)tt[be]=tt[He=O&He+Fe[be%et]+(ke=tt[be])],tt[He]=ke;(ut.g=function(Ze){for(var qt,Oe=0,qe=ut.i,dt=ut.j,Y=ut.S;Ze--;)qt=Y[qe=O&qe+1],Oe=Oe*X+Y[O&(Y[qe]=Y[dt=O&dt+qt])+(Y[dt]=qt)];return ut.i=qe,ut.j=dt,Oe})(X)}function Ee(Fe,ke){return ke.i=Fe.i,ke.j=Fe.j,ke.S=Fe.S.slice(),ke}function re(Fe,ke){var be,et=[],ut=typeof Fe;if(ke&&"object"==ut)for(be in Fe)try{et.push(re(Fe[be],ke-1))}catch(He){}return et.length?et:"string"==ut?Fe:Fe+"\0"}function Ce(Fe,ke){for(var ut,et=Fe+"",be=0;be<et.length;)ke[O&be]=O&(ut^=19*ke[O&be])+et.charCodeAt(be++);return Me(ke)}function Me(Fe){return String.fromCharCode.apply(0,Fe)}if(Ce(W.random(),v),je.exports){je.exports=de;try{B=I(5042)}catch(Fe){}}else void 0!==(t=function(){return de}.call(ce,I,ce,je))&&(je.exports=t)}("undefined"!=typeof self?self:this,[],Math)},6898:function(je,ce){"use strict";var I,w;void 0!==(w="function"==typeof(I=function(){function v(){return!0}function W(){return!1}function X(){}return function q(){var D=[{name:"number",test:function(me){return"number"==typeof me}},{name:"string",test:function(me){return"string"==typeof me}},{name:"boolean",test:function(me){return"boolean"==typeof me}},{name:"Function",test:function(me){return"function"==typeof me}},{name:"Array",test:Array.isArray},{name:"Date",test:function(me){return me instanceof Date}},{name:"RegExp",test:function(me){return me instanceof RegExp}},{name:"Object",test:function(me){return"object"==typeof me&&null!==me&&me.constructor===Object}},{name:"null",test:function(me){return null===me}},{name:"undefined",test:function(me){return void 0===me}}],ie={name:"any",test:v},z=[],_=[],y={types:D,conversions:_,ignore:z};function O(me){var Ae=yn(y.types,function(Te){return Te.name===me});if(Ae)return Ae;if("any"===me)return ie;var Pe=yn(y.types,function(Te){return Te.name.toLowerCase()===me.toLowerCase()});throw new TypeError('Unknown type "'+me+'"'+(Pe?'. Did you mean "'+Pe.name+'"?':""))}function B(me){return me===ie?999:y.types.indexOf(me)}function de(me){var Ae=yn(y.types,function(Pe){return Pe.test(me)});if(Ae)return Ae.name;throw new TypeError("Value has unknown type. Value: "+me)}function re(me){return me.map(function(Ae){var Pe=Ae.types.map(He);return(Ae.restParam?"...":"")+Pe.join("|")}).join(",")}function Ce(me,Ae){var Pe=0===me.indexOf("..."),_t=(Pe?me.length>3?me.slice(3):"any":me).split("|").map(hn).filter(Ct).filter(Mt),Dt=function(me,Ae){var Pe={};return me.forEach(function(Te){-1===Ae.indexOf(Te.from)&&-1!==Ae.indexOf(Te.to)&&!Pe[Te.from]&&(Pe[Te.from]=Te)}),Object.keys(Pe).map(function(Te){return Pe[Te]})}(Ae,_t),Rt=_t.map(function(pt){var $t=O(pt);return{name:pt,typeIndex:B($t),test:$t.test,conversion:null,conversionIndex:-1}}),xt=Dt.map(function(pt){var $t=O(pt.from);return{name:pt.from,typeIndex:B($t),test:$t.test,conversion:pt,conversionIndex:Ae.indexOf(pt)}});return{types:Rt.concat(xt),restParam:Pe}}function Me(me){var Ae=Lt(me);return!!Ae&&Ae.restParam}function Fe(me){return me.types.some(function(Ae){return null!=Ae.conversion})}function ke(me){if(!me||0===me.types.length)return v;if(1===me.types.length)return O(me.types[0].name).test;if(2===me.types.length){var Ae=O(me.types[0].name).test,Pe=O(me.types[1].name).test;return function(Dt){return Ae(Dt)||Pe(Dt)}}var Te=me.types.map(function(_t){return O(_t.name).test});return function(Dt){for(var Rt=0;Rt<Te.length;Rt++)if(Te[Rt](Dt))return!0;return!1}}function et(me){var Ae,Pe,Te;if(Me(me)){var _t=(Ae=function(me){return me.slice(0,me.length-1)}(me).map(ke)).length,Dt=ke(Lt(me));return function(pt){for(var $t=0;$t<Ae.length;$t++)if(!Ae[$t](pt[$t]))return!1;return function(xt){for(var pt=_t;pt<xt.length;pt++)if(!Dt(xt[pt]))return!1;return!0}(pt)&&pt.length>=_t+1}}return 0===me.length?function(pt){return 0===pt.length}:1===me.length?(Pe=ke(me[0]),function(pt){return Pe(pt[0])&&1===pt.length}):2===me.length?(Pe=ke(me[0]),Te=ke(me[1]),function(pt){return Pe(pt[0])&&Te(pt[1])&&2===pt.length}):(Ae=me.map(ke),function(pt){for(var $t=0;$t<Ae.length;$t++)if(!Ae[$t](pt[$t]))return!1;return pt.length===Ae.length})}function ut(me,Ae){return Ae<me.params.length?me.params[Ae]:Me(me.params)?Lt(me.params):null}function be(me,Ae,Pe){var Te=ut(me,Ae);return(Te?Pe?Te.types.filter(tt):Te.types:[]).map(He)}function He(me){return me.name}function tt(me){return null==me.conversion}function Ze(me,Ae){var Pe=function(me){for(var Ae={},Pe=0;Pe<me.length;Pe++)Ae[me[Pe]]=!0;return Object.keys(Ae)}($n(me,function(Te){return be(Te,Ae,!1)}));return-1!==Pe.indexOf("any")?["any"]:Pe}function qt(me,Ae,Pe){var Te,_t,xt,Dt=me||"unnamed",Rt=Pe;for(xt=0;xt<Ae.length;xt++){var pt=Rt.filter(function(Zn){var ui=ke(ut(Zn,xt));return(xt<Zn.params.length||Me(Zn.params))&&ui(Ae[xt])});if(0===pt.length){if((_t=Ze(Rt,xt)).length>0){var $t=de(Ae[xt]);return(Te=new TypeError("Unexpected type of argument in function "+Dt+" (expected: "+_t.join(" or ")+", actual: "+$t+", index: "+xt+")")).data={category:"wrongType",fn:Dt,index:xt,actual:$t,expected:_t},Te}}else Rt=pt}var Hn=Rt.map(function(Zn){return Me(Zn.params)?1/0:Zn.params.length});if(Ae.length<Math.min.apply(null,Hn))return _t=Ze(Rt,xt),(Te=new TypeError("Too few arguments in function "+Dt+" (expected: "+_t.join(" or ")+", index: "+Ae.length+")")).data={category:"tooFewArgs",fn:Dt,index:Ae.length,expected:_t},Te;var kn=Math.max.apply(null,Hn);return Ae.length>kn?((Te=new TypeError("Too many arguments in function "+Dt+" (expected: "+kn+", actual: "+Ae.length+")")).data={category:"tooManyArgs",fn:Dt,index:Ae.length,expectedLength:kn},Te):((Te=new TypeError('Arguments of type "'+Ae.join(", ")+'" do not match any of the defined signatures of function '+Dt+".")).data={category:"mismatch",actual:Ae.map(de)},Te)}function Oe(me){for(var Ae=999,Pe=0;Pe<me.types.length;Pe++)tt(me.types[Pe])&&(Ae=Math.min(Ae,me.types[Pe].typeIndex));return Ae}function qe(me){for(var Ae=999,Pe=0;Pe<me.types.length;Pe++)tt(me.types[Pe])||(Ae=Math.min(Ae,me.types[Pe].conversionIndex));return Ae}function dt(me,Ae){var Pe;return 0!=(Pe=me.restParam-Ae.restParam)||0!=(Pe=Fe(me)-Fe(Ae))||0!=(Pe=Oe(me)-Oe(Ae))?Pe:qe(me)-qe(Ae)}function Y(me,Ae){var Te,_t,Pe=Math.min(me.params.length,Ae.params.length);if(0!=(_t=me.params.some(Fe)-Ae.params.some(Fe)))return _t;for(Te=0;Te<Pe;Te++)if(0!=(_t=Fe(me.params[Te])-Fe(Ae.params[Te])))return _t;for(Te=0;Te<Pe;Te++)if(0!==(_t=dt(me.params[Te],Ae.params[Te])))return _t;return me.params.length-Ae.params.length}function Qe(me){var Ae,Pe,Te,_t,Dt=[],Rt=[];switch(me.types.forEach(function(xt){xt.conversion&&(Dt.push(O(xt.conversion.from).test),Rt.push(xt.conversion.convert))}),Rt.length){case 0:return function(pt){return pt};case 1:return Ae=Dt[0],Te=Rt[0],function(pt){return Ae(pt)?Te(pt):pt};case 2:return Ae=Dt[0],Pe=Dt[1],Te=Rt[0],_t=Rt[1],function(pt){return Ae(pt)?Te(pt):Pe(pt)?_t(pt):pt};default:return function(pt){for(var $t=0;$t<Rt.length;$t++)if(Dt[$t](pt))return Rt[$t](pt);return pt}}}function Bt(me,Ae){return function Pe(Te,_t,Dt){if(_t<Te.length){var pt,Rt=Te[_t],xt=Ae?Rt.types.filter(tt):Rt.types;if(Rt.restParam){var $t=xt.filter(tt);pt=$t.length<xt.length?[$t,xt]:[xt]}else pt=xt.map(function(kn){return[kn]});return $n(pt,function(kn){return Pe(Te,_t+1,Dt.concat([kn]))})}return[Dt.map(function(kn,Zn){return{types:kn,restParam:Zn===Te.length-1&&Me(Te)}})]}(me,0,[])}function lt(me,Ae){if(0===Object.keys(Ae).length)throw new SyntaxError("No signatures provided");var Pe=[];Object.keys(Ae).map(function(pn){return function(me,Ae,Pe){var Te=[];return""!==me.trim()&&(Te=me.split(",").map(hn).map(function(_t,Dt,Rt){var xt=Ce(_t,Pe);if(xt.restParam&&Dt!==Rt.length-1)throw new SyntaxError('Unexpected rest parameter "'+_t+'": only allowed for the last parameter');return xt})),Te.some(vn)?null:{params:Te,fn:Ae}}(pn,Ae[pn],y.conversions)}).filter(Tt).forEach(function(pn){var Fn=yn(Pe,function(M){return function(me,Ae){for(var Pe=Math.max(me.params.length,Ae.params.length),Te=0;Te<Pe;Te++)if(!Jt(be(me,Te,!0),be(Ae,Te,!0)))return!1;var Rt=me.params.length,xt=Ae.params.length,pt=Me(me.params),$t=Me(Ae.params);return pt?$t?Rt===xt:xt>=Rt:$t?Rt>=xt:Rt===xt}(M,pn)});if(Fn)throw new TypeError('Conflicting signatures "'+re(Fn.params)+'" and "'+re(pn.params)+'".');Pe.push(pn)});var Te=$n(Pe,function(pn){return(pn?Bt(pn.params,!1):[]).map(function(M){return{params:M,fn:pn.fn}})}).filter(Tt);Te.sort(Y);var _t=Te[0]&&Te[0].params.length<=2&&!Me(Te[0].params),Dt=Te[1]&&Te[1].params.length<=2&&!Me(Te[1].params),Rt=Te[2]&&Te[2].params.length<=2&&!Me(Te[2].params),xt=Te[3]&&Te[3].params.length<=2&&!Me(Te[3].params),pt=Te[4]&&Te[4].params.length<=2&&!Me(Te[4].params),$t=Te[5]&&Te[5].params.length<=2&&!Me(Te[5].params),Hn=_t&&Dt&&Rt&&xt&&pt&&$t,kn=Te.map(function(pn){return et(pn.params)}),Zn=_t?ke(Te[0].params[0]):W,ui=Dt?ke(Te[1].params[0]):W,So=Rt?ke(Te[2].params[0]):W,Mi=xt?ke(Te[3].params[0]):W,Ci=pt?ke(Te[4].params[0]):W,Yr=$t?ke(Te[5].params[0]):W,Ur=_t?ke(Te[0].params[1]):W,Si=Dt?ke(Te[1].params[1]):W,Vr=Rt?ke(Te[2].params[1]):W,xi=xt?ke(Te[3].params[1]):W,$r=pt?ke(Te[4].params[1]):W,Ji=$t?ke(Te[5].params[1]):W,hr=Te.map(function(pn){return function(me,Ae){var Pe=Ae;if(me.some(Fe)){var Te=Me(me),_t=me.map(Qe);Pe=function(){for(var pt=[],$t=Te?arguments.length-1:arguments.length,Hn=0;Hn<$t;Hn++)pt[Hn]=_t[Hn](arguments[Hn]);return Te&&(pt[$t]=arguments[$t].map(_t[$t])),Ae.apply(this,pt)}}var Dt=Pe;if(Me(me)){var Rt=me.length-1;Dt=function(){return Pe.apply(this,rn(arguments,0,Rt).concat([rn(arguments,Rt)]))}}return Dt}(pn.params,pn.fn)}),wi=_t?hr[0]:X,Ei=Dt?hr[1]:X,Di=Rt?hr[2]:X,xo=xt?hr[3]:X,wo=pt?hr[4]:X,zr=$t?hr[5]:X,Ii=_t?Te[0].params.length:-1,ei=Dt?Te[1].params.length:-1,Gr=Rt?Te[2].params.length:-1,Eo=xt?Te[3].params.length:-1,Fi=pt?Te[4].params.length:-1,Qi=$t?Te[5].params.length:-1,Xi=Hn?6:0,Yi=Te.length,Mr=function(){for(var Fn=Xi;Fn<Yi;Fn++)if(kn[Fn](arguments))return hr[Fn].apply(this,arguments);throw qt(me,arguments,Te)},Cr=function pn(Fn,M){return arguments.length===Ii&&Zn(Fn)&&Ur(M)?wi.apply(pn,arguments):arguments.length===ei&&ui(Fn)&&Si(M)?Ei.apply(pn,arguments):arguments.length===Gr&&So(Fn)&&Vr(M)?Di.apply(pn,arguments):arguments.length===Eo&&Mi(Fn)&&xi(M)?xo.apply(pn,arguments):arguments.length===Fi&&Ci(Fn)&&$r(M)?wo.apply(pn,arguments):arguments.length===Qi&&Yr(Fn)&&Ji(M)?zr.apply(pn,arguments):Mr.apply(pn,arguments)};try{Object.defineProperty(Cr,"name",{value:me})}catch(pn){}return Cr.signatures=function(me){var Ae={};return me.forEach(function(Pe){Pe.params.some(Fe)||Bt(Pe.params,!0).forEach(function(Te){Ae[re(Te)]=Pe.fn})}),Ae}(Te),Cr}function Mt(me){return-1===y.ignore.indexOf(me)}function hn(me){return me.trim()}function Ct(me){return!!me}function Tt(me){return null!==me}function vn(me){return 0===me.types.length}function Lt(me){return me[me.length-1]}function rn(me,Ae,Pe){return Array.prototype.slice.call(me,Ae,Pe)}function Gt(me,Ae){return-1!==me.indexOf(Ae)}function Jt(me,Ae){for(var Pe=0;Pe<me.length;Pe++)if(Gt(Ae,me[Pe]))return!0;return!1}function yn(me,Ae){for(var Pe=0;Pe<me.length;Pe++)if(Ae(me[Pe]))return me[Pe]}function $n(me,Ae){return Array.prototype.concat.apply([],me.map(Ae))}function or(me){for(var Ae="",Pe=0;Pe<me.length;Pe++){var Te=me[Pe];if(("object"==typeof Te.signatures||"string"==typeof Te.signature)&&""!==Te.name)if(""===Ae)Ae=Te.name;else if(Ae!==Te.name){var _t=new Error("Function names do not match (expected: "+Ae+", actual: "+Te.name+")");throw _t.data={actual:Te.name,expected:Ae},_t}}return Ae}function dr(me){var Ae,Pe={};function Te(xt,pt){if(Pe.hasOwnProperty(xt)&&pt!==Pe[xt])throw(Ae=new Error('Signature "'+xt+'" is defined twice')).data={signature:xt},Ae}for(var _t=0;_t<me.length;_t++){var Dt=me[_t];if("object"==typeof Dt.signatures)for(var Rt in Dt.signatures)Dt.signatures.hasOwnProperty(Rt)&&(Te(Rt,Dt.signatures[Rt]),Pe[Rt]=Dt.signatures[Rt]);else{if("string"!=typeof Dt.signature)throw(Ae=new TypeError("Function is no typed-function (index: "+_t+")")).data={index:_t},Ae;Te(Dt.signature,Dt),Pe[Dt.signature]=Dt}}return Pe}return(y=lt("typed",{"string, Object":lt,Object:function(me){var Ae=[];for(var Pe in me)me.hasOwnProperty(Pe)&&Ae.push(me[Pe]);return lt(or(Ae),me)},"...Function":function(me){return lt(or(me),dr(me))},"string, ...Function":function(me,Ae){return lt(me,dr(Ae))}})).create=q,y.types=D,y.conversions=_,y.ignore=z,y.convert=function(me,Ae){var Pe=de(me);if(Ae===Pe)return me;for(var Te=0;Te<y.conversions.length;Te++){var _t=y.conversions[Te];if(_t.from===Pe&&_t.to===Ae)return _t.convert(me)}throw new Error("Cannot convert from "+Pe+" to "+Ae)},y.find=function(me,Ae){if(!me.signatures)throw new TypeError("Function is no typed-function");var Pe;if("string"==typeof Ae){Pe=Ae.split(",");for(var Te=0;Te<Pe.length;Te++)Pe[Te]=Pe[Te].trim()}else{if(!Array.isArray(Ae))throw new TypeError("String array or a comma separated string expected");Pe=Ae}var _t=Pe.join(","),Dt=me.signatures[_t];if(Dt)return Dt;throw new TypeError("Signature not found (signature: "+(me.name||"unnamed")+"("+Pe.join(", ")+"))")},y.addType=function(me,Ae){if(!me||"string"!=typeof me.name||"function"!=typeof me.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==Ae)for(var Pe=0;Pe<y.types.length;Pe++)if("Object"===y.types[Pe].name)return void y.types.splice(Pe,0,me);y.types.push(me)},y.addConversion=function(me){if(!me||"string"!=typeof me.from||"string"!=typeof me.to||"function"!=typeof me.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");y.conversions.push(me)},y}()})?I.apply(ce,[]):I)&&(je.exports=w)},5042:()=>{},6828:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>X});var t=I(1172),w=I(1027);function W(q){this.__wrapped__=q,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(W.prototype=(0,t.Z)(w.Z.prototype)).constructor=W;const X=W},4968:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>re});var v=I(6224);const X=function(Ce,xe){for(var Me=Ce.length;Me--;)if((0,v.Z)(Ce[Me][0],xe))return Me;return-1};var D=Array.prototype.splice;function Ee(Ce){var xe=-1,Me=null==Ce?0:Ce.length;for(this.clear();++xe<Me;){var Fe=Ce[xe];this.set(Fe[0],Fe[1])}}Ee.prototype.clear=function(){this.__data__=[],this.size=0},Ee.prototype.delete=function(Ce){var xe=this.__data__,Me=X(xe,Ce);return!(Me<0||(Me==xe.length-1?xe.pop():D.call(xe,Me,1),--this.size,0))},Ee.prototype.get=function(Ce){var xe=this.__data__,Me=X(xe,Ce);return Me<0?void 0:xe[Me][1]},Ee.prototype.has=function(Ce){return X(this.__data__,Ce)>-1},Ee.prototype.set=function(Ce,xe){var Me=this.__data__,Fe=X(Me,Ce);return Fe<0?(++this.size,Me.push([Ce,xe])):Me[Fe][1]=xe,this};const re=Ee},4059:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(1172),w=I(1027);function v(X,q){this.__wrapped__=X,this.__actions__=[],this.__chain__=!!q,this.__index__=0,this.__values__=void 0}(v.prototype=(0,t.Z)(w.Z.prototype)).constructor=v;const W=v},4673:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(1987),w=I(309);const W=(0,t.Z)(w.Z,"Map")},2868:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>kt});const v=(0,I(1987).Z)(Object,"create");var _=Object.prototype.hasOwnProperty;var de=Object.prototype.hasOwnProperty;function Me(lt){var Mt=-1,hn=null==lt?0:lt.length;for(this.clear();++Mt<hn;){var Ct=lt[Mt];this.set(Ct[0],Ct[1])}}Me.prototype.clear=function(){this.__data__=v?v(null):{},this.size=0},Me.prototype.delete=function(lt){var Mt=this.has(lt)&&delete this.__data__[lt];return this.size-=Mt?1:0,Mt},Me.prototype.get=function(lt){var Mt=this.__data__;if(v){var hn=Mt[lt];return"__lodash_hash_undefined__"===hn?void 0:hn}return _.call(Mt,lt)?Mt[lt]:void 0},Me.prototype.has=function(lt){var Mt=this.__data__;return v?void 0!==Mt[lt]:de.call(Mt,lt)},Me.prototype.set=function(lt,Mt){var hn=this.__data__;return this.size+=this.has(lt)?0:1,hn[lt]=v&&void 0===Mt?"__lodash_hash_undefined__":Mt,this};const Fe=Me;var ke=I(4968),et=I(4673);const qt=function(lt,Mt){var hn=lt.__data__;return function(lt){var Mt=typeof lt;return"string"==Mt||"number"==Mt||"symbol"==Mt||"boolean"==Mt?"__proto__"!==lt:null===lt}(Mt)?hn["string"==typeof Mt?"string":"hash"]:hn.map};function Bt(lt){var Mt=-1,hn=null==lt?0:lt.length;for(this.clear();++Mt<hn;){var Ct=lt[Mt];this.set(Ct[0],Ct[1])}}Bt.prototype.clear=function(){this.size=0,this.__data__={hash:new Fe,map:new(et.Z||ke.Z),string:new Fe}},Bt.prototype.delete=function(lt){var Mt=qt(this,lt).delete(lt);return this.size-=Mt?1:0,Mt},Bt.prototype.get=function(lt){return qt(this,lt).get(lt)},Bt.prototype.has=function(lt){return qt(this,lt).has(lt)},Bt.prototype.set=function(lt,Mt){var hn=qt(this,lt),Ct=hn.size;return hn.set(lt,Mt),this.size+=hn.size==Ct?0:1,this};const kt=Bt},5037:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});const v=I(309).Z.Symbol},6958:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(1987),w=I(309);const W=(0,t.Z)(w.Z,"WeakMap")},7740:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v,W,X){switch(X.length){case 0:return v.call(W);case 1:return v.call(W,X[0]);case 2:return v.call(W,X[0],X[1]);case 3:return v.call(W,X[0],X[1],X[2])}return v.apply(W,X)}},5584:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v,W){for(var X=-1,q=null==v?0:v.length;++X<q&&!1!==W(v[X],X,v););return v}},9072:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=I(2349);const v=function(W,X){return!(null==W||!W.length)&&(0,t.Z)(W,X,0)>-1}},8132:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>_});var t=I(8008),w=I(4452),v=I(4654),W=I(6195),X=I(8078),q=I(5486),ie=Object.prototype.hasOwnProperty;const _=function(y,O){var B=(0,v.Z)(y),de=!B&&(0,w.Z)(y),le=!B&&!de&&(0,W.Z)(y),Ee=!B&&!de&&!le&&(0,q.Z)(y),re=B||de||le||Ee,Ce=re?(0,t.Z)(y.length,String):[],xe=Ce.length;for(var Me in y)(O||ie.call(y,Me))&&(!re||!("length"==Me||le&&("offset"==Me||"parent"==Me)||Ee&&("buffer"==Me||"byteLength"==Me||"byteOffset"==Me)||(0,X.Z)(Me,xe)))&&Ce.push(Me);return Ce}},9982:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v,W){for(var X=-1,q=null==v?0:v.length,D=Array(q);++X<q;)D[X]=W(v[X],X,v);return D}},5427:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>q});var t=I(2951),w=I(6224),W=Object.prototype.hasOwnProperty;const q=function(D,ie,z){var _=D[ie];(!W.call(D,ie)||!(0,w.Z)(_,z)||void 0===z&&!(ie in D))&&(0,t.Z)(D,ie,z)}},2951:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=I(9567);const v=function(W,X,q){"__proto__"==X&&t.Z?(0,t.Z)(W,X,{configurable:!0,enumerable:!0,value:q,writable:!0}):W[X]=q}},1172:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(4214),w=Object.create;const W=function(){function X(){}return function(q){if(!(0,t.Z)(q))return{};if(w)return w(q);X.prototype=q;var D=new X;return X.prototype=void 0,D}}()},4564:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v,W,X,q){for(var D=v.length,ie=X+(q?1:-1);q?ie--:++ie<D;)if(W(v[ie],ie,v))return ie;return-1}},8576:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(4605),w=I(2753);const W=function(X,q){for(var D=0,ie=(q=(0,t.Z)(q,X)).length;null!=X&&D<ie;)X=X[(0,w.Z)(q[D++])];return D&&D==ie?X:void 0}},782:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>Ee});var t=I(5037),w=Object.prototype,v=w.hasOwnProperty,W=w.toString,X=t.Z?t.Z.toStringTag:void 0;var z=Object.prototype.toString;var de=t.Z?t.Z.toStringTag:void 0;const Ee=function(re){return null==re?void 0===re?"[object Undefined]":"[object Null]":de&&de in Object(re)?function(re){var Ce=v.call(re,X),xe=re[X];try{re[X]=void 0;var Me=!0}catch(ke){}var Fe=W.call(re);return Me&&(Ce?re[X]=xe:delete re[X]),Fe}(re):function(re){return z.call(re)}(re)}},2349:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>q});var t=I(4564),w=I(6822);const q=function(D,ie,z){return ie==ie?function(D,ie,z){for(var _=z-1,y=D.length;++_<y;)if(D[_]===ie)return _;return-1}(D,ie,z):(0,t.Z)(D,w.Z,z)}},6822:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v){return v!=v}},5793:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>Ee});var re,t=I(8209),w=I(7170),v=(re=/[^.]+$/.exec(w.Z&&w.Z.keys&&w.Z.keys.IE_PROTO||""))?"Symbol(src)_1."+re:"";var q=I(4214),D=I(2035),z=/^\[object .+?Constructor\]$/,de=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ee=function(re){return!(!(0,q.Z)(re)||function(re){return!!v&&v in re}(re))&&((0,t.Z)(re)?de:z).test((0,D.Z)(re))}},1027:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(){}},2137:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>X});var t=I(34),w=I(8643),v=I(9862);const X=function(q,D){return(0,v.Z)((0,w.Z)(q,D,t.Z),q+"")}},6218:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>D});var t=I(5427),w=I(4605),v=I(8078),W=I(4214),X=I(2753);const D=function(ie,z,_,y){if(!(0,W.Z)(ie))return ie;for(var O=-1,B=(z=(0,w.Z)(z,ie)).length,de=B-1,le=ie;null!=le&&++O<B;){var Ee=(0,X.Z)(z[O]),re=_;if("__proto__"===Ee||"constructor"===Ee||"prototype"===Ee)return ie;if(O!=de){var Ce=le[Ee];void 0===(re=y?y(Ce,Ee,le):void 0)&&(re=(0,W.Z)(Ce)?Ce:(0,v.Z)(z[O+1])?[]:{})}(0,t.Z)(le,Ee,re),le=le[Ee]}return ie}},1368:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(34),w=I(1747);const W=w.Z?function(X,q){return w.Z.set(X,q),X}:t.Z},8008:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v,W){for(var X=-1,q=Array(v);++X<v;)q[X]=W(X);return q}},2980:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>z});var t=I(5037),w=I(9982),v=I(4654),W=I(3982),q=t.Z?t.Z.prototype:void 0,D=q?q.toString:void 0;const z=function ie(_){if("string"==typeof _)return _;if((0,v.Z)(_))return(0,w.Z)(_,ie)+"";if((0,W.Z)(_))return D?D.call(_):"";var y=_+"";return"0"==y&&1/_==-1/0?"-0":y}},1684:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(6162),w=/^\s+/;const W=function(X){return X&&X.slice(0,(0,t.Z)(X)+1).replace(w,"")}},1162:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v){return function(W){return v(W)}}},4605:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>q});var t=I(4654),w=I(5264),v=I(2210),W=I(4019);const q=function(D,ie){return(0,t.Z)(D)?D:(0,w.Z)(D,ie)?[D]:(0,v.Z)((0,W.Z)(D))}},3314:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=Math.max;const v=function(W,X,q,D){for(var ie=-1,z=W.length,_=q.length,y=-1,O=X.length,B=t(z-_,0),de=Array(O+B),le=!D;++y<O;)de[y]=X[y];for(;++ie<_;)(le||ie<z)&&(de[q[ie]]=W[ie]);for(;B--;)de[y++]=W[ie++];return de}},3830:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=Math.max;const v=function(W,X,q,D){for(var ie=-1,z=W.length,_=-1,y=q.length,O=-1,B=X.length,de=t(z-y,0),le=Array(de+B),Ee=!D;++ie<de;)le[ie]=W[ie];for(var re=ie;++O<B;)le[re+O]=X[O];for(;++_<y;)(Ee||ie<z)&&(le[re+q[_]]=W[ie++]);return le}},6889:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v,W){var X=-1,q=v.length;for(W||(W=Array(q));++X<q;)W[X]=v[X];return W}},7170:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});const v=I(309).Z["__core-js_shared__"]},7519:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(1172),w=I(4214);const W=function(X){return function(){var q=arguments;switch(q.length){case 0:return new X;case 1:return new X(q[0]);case 2:return new X(q[0],q[1]);case 3:return new X(q[0],q[1],q[2]);case 4:return new X(q[0],q[1],q[2],q[3]);case 5:return new X(q[0],q[1],q[2],q[3],q[4]);case 6:return new X(q[0],q[1],q[2],q[3],q[4],q[5]);case 7:return new X(q[0],q[1],q[2],q[3],q[4],q[5],q[6])}var D=(0,t.Z)(X.prototype),ie=X.apply(D,q);return(0,w.Z)(ie)?ie:D}}},4360:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>ke});var t=I(3314),w=I(3830);const W=function(et,ut){for(var be=et.length,He=0;be--;)et[be]===ut&&++He;return He};var X=I(7519),q=I(4565),D=I(8903),ie=I(6889),z=I(8078),_=Math.min;const O=function(et,ut){for(var be=et.length,He=_(ut.length,be),tt=(0,ie.Z)(et);He--;){var Ze=ut[He];et[He]=(0,z.Z)(Ze,be)?tt[Ze]:void 0}return et};var B=I(6123),de=I(309);const ke=function Fe(et,ut,be,He,tt,Ze,qt,Oe,qe,dt){var Y=128&ut,Ue=1&ut,at=2&ut,Qe=24&ut,Ye=512&ut,Bt=at?void 0:(0,X.Z)(et);return function kt(){for(var lt=arguments.length,Mt=Array(lt),hn=lt;hn--;)Mt[hn]=arguments[hn];if(Qe)var Ct=(0,D.Z)(kt),Tt=W(Mt,Ct);if(He&&(Mt=(0,t.Z)(Mt,He,tt,Qe)),Ze&&(Mt=(0,w.Z)(Mt,Ze,qt,Qe)),lt-=Tt,Qe&&lt<dt){var vn=(0,B.Z)(Mt,Ct);return(0,q.Z)(et,ut,Fe,kt.placeholder,be,Mt,vn,Oe,qe,dt-lt)}var Yt=Ue?be:this,Lt=at?Yt[et]:et;return lt=Mt.length,Oe?Mt=O(Mt,Oe):Ye&&lt>1&&Mt.reverse(),Y&&qe<lt&&(Mt.length=qe),this&&this!==de.Z&&this instanceof kt&&(Lt=Bt||(0,X.Z)(Lt)),Lt.apply(Yt,Mt)}}},4565:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>y});var t=I(3682),w=I(8829),v=I(1293);const y=function(O,B,de,le,Ee,re,Ce,xe,Me,Fe){var ke=8&B;B|=ke?32:64,4&(B&=~(ke?64:32))||(B&=-4);var tt=[O,B,Ee,ke?re:void 0,ke?Ce:void 0,ke?void 0:re,ke?void 0:Ce,xe,Me,Fe],Ze=de.apply(void 0,tt);return(0,t.Z)(O)&&(0,w.Z)(Ze,tt),Ze.placeholder=le,(0,v.Z)(Ze,O,B)}},1421:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>hn});var t=I(1368),w=I(7519),v=I(309);var D=I(7740),ie=I(4360),z=I(4565),_=I(8903),y=I(6123);var re=I(195),Ce=I(3314),xe=I(3830),Me="__lodash_placeholder__",tt=Math.min;var Oe=I(8829),qe=I(1293),dt=I(8214),lt=Math.max;const hn=function(Ct,Tt,vn,Yt,Lt,rn,Gt,Jt){var yn=2&Tt;if(!yn&&"function"!=typeof Ct)throw new TypeError("Expected a function");var Kn=Yt?Yt.length:0;if(Kn||(Tt&=-97,Yt=Lt=void 0),Gt=void 0===Gt?Gt:lt((0,dt.Z)(Gt),0),Jt=void 0===Jt?Jt:(0,dt.Z)(Jt),Kn-=Lt?Lt.length:0,64&Tt){var $n=Yt,or=Lt;Yt=Lt=void 0}var dr=yn?void 0:(0,re.Z)(Ct),me=[Ct,Tt,vn,Yt,Lt,$n,or,rn,Gt,Jt];if(dr&&function(Ct,Tt){var vn=Ct[1],Yt=Tt[1],Lt=vn|Yt;if(!(Lt<131||128==Yt&&8==vn||128==Yt&&256==vn&&Ct[7].length<=Tt[8]||384==Yt&&Tt[7].length<=Tt[8]&&8==vn))return Ct;1&Yt&&(Ct[2]=Tt[2],Lt|=1&vn?0:4);var Jt=Tt[3];if(Jt){var yn=Ct[3];Ct[3]=yn?(0,Ce.Z)(yn,Jt,Tt[4]):Jt,Ct[4]=yn?(0,y.Z)(Ct[3],Me):Tt[4]}(Jt=Tt[5])&&(Ct[5]=(yn=Ct[5])?(0,xe.Z)(yn,Jt,Tt[6]):Jt,Ct[6]=yn?(0,y.Z)(Ct[5],Me):Tt[6]),(Jt=Tt[7])&&(Ct[7]=Jt),128&Yt&&(Ct[8]=null==Ct[8]?Tt[8]:tt(Ct[8],Tt[8])),null==Ct[9]&&(Ct[9]=Tt[9]),Ct[0]=Tt[0],Ct[1]=Lt}(me,dr),Ct=me[0],Tt=me[1],vn=me[2],Yt=me[3],Lt=me[4],!(Jt=me[9]=void 0===me[9]?yn?0:Ct.length:lt(me[9]-Kn,0))&&24&Tt&&(Tt&=-25),Tt&&1!=Tt)Ae=8==Tt||16==Tt?function(Ct,Tt,vn){var Yt=(0,w.Z)(Ct);return function Lt(){for(var rn=arguments.length,Gt=Array(rn),Jt=rn,yn=(0,_.Z)(Lt);Jt--;)Gt[Jt]=arguments[Jt];var Kn=rn<3&&Gt[0]!==yn&&Gt[rn-1]!==yn?[]:(0,y.Z)(Gt,yn);return(rn-=Kn.length)<vn?(0,z.Z)(Ct,Tt,ie.Z,Lt.placeholder,void 0,Gt,Kn,void 0,void 0,vn-rn):(0,D.Z)(this&&this!==v.Z&&this instanceof Lt?Yt:Ct,this,Gt)}}(Ct,Tt,Jt):32!=Tt&&33!=Tt||Lt.length?ie.Z.apply(void 0,me):function(Ct,Tt,vn,Yt){var Lt=1&Tt,rn=(0,w.Z)(Ct);return function Gt(){for(var Jt=-1,yn=arguments.length,Kn=-1,$n=Yt.length,or=Array($n+yn),dr=this&&this!==v.Z&&this instanceof Gt?rn:Ct;++Kn<$n;)or[Kn]=Yt[Kn];for(;yn--;)or[Kn++]=arguments[++Jt];return(0,D.Z)(dr,Lt?vn:this,or)}}(Ct,Tt,vn,Yt);else var Ae=function(Ct,Tt,vn){var Yt=1&Tt,Lt=(0,w.Z)(Ct);return function rn(){return(this&&this!==v.Z&&this instanceof rn?Lt:Ct).apply(Yt?vn:this,arguments)}}(Ct,Tt,vn);return(0,qe.Z)((dr?t.Z:Oe.Z)(Ae,me),Ct,Tt)}},9567:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=I(1987);const v=function(){try{var W=(0,t.Z)(Object,"defineProperty");return W({},"",{}),W}catch(X){}}()},7746:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w="object"==typeof global&&global&&global.Object===Object&&global},195:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(1747),w=I(7319);const W=t.Z?function(X){return t.Z.get(X)}:w.Z},3352:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>X});var t=I(3920),v=Object.prototype.hasOwnProperty;const X=function(q){for(var D=q.name+"",ie=t.Z[D],z=v.call(t.Z,D)?ie.length:0;z--;){var _=ie[z],y=_.func;if(null==y||y==q)return _.name}return D}},8903:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v){return v.placeholder}},1987:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>X});var t=I(5793);const X=function(q,D){var ie=function(q,D){return null==q?void 0:q[D]}(q,D);return(0,t.Z)(ie)?ie:void 0}},8078:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var w=/^(?:0|[1-9]\d*)$/;const W=function(X,q){var D=typeof X;return!!(q=null==q?9007199254740991:q)&&("number"==D||"symbol"!=D&&w.test(X))&&X>-1&&X%1==0&&X<q}},9094:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>q});var t=I(6224),w=I(8402),v=I(8078),W=I(4214);const q=function(D,ie,z){if(!(0,W.Z)(z))return!1;var _=typeof ie;return!!("number"==_?(0,w.Z)(z)&&(0,v.Z)(ie,z.length):"string"==_&&ie in z)&&(0,t.Z)(z[ie],D)}},5264:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>q});var t=I(4654),w=I(3982),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/;const q=function(D,ie){if((0,t.Z)(D))return!1;var z=typeof D;return!("number"!=z&&"symbol"!=z&&"boolean"!=z&&null!=D&&!(0,w.Z)(D))||W.test(D)||!v.test(D)||null!=ie&&D in Object(ie)}},3682:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>q});var t=I(6828),w=I(195),v=I(3352),W=I(1233);const q=function(D){var ie=(0,v.Z)(D),z=W.Z[ie];if("function"!=typeof z||!(ie in t.Z.prototype))return!1;if(D===z)return!0;var _=(0,w.Z)(z);return!!_&&D===_[0]}},1550:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=Object.prototype;const v=function(W){var X=W&&W.constructor;return W===("function"==typeof X&&X.prototype||t)}},1747:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=I(6958);const v=t.Z&&new t.Z},8514:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>D});var t=I(7746),w="object"==typeof exports&&exports&&!exports.nodeType&&exports,v=w&&"object"==typeof module&&module&&!module.nodeType&&module,X=v&&v.exports===w&&t.Z.process;const D=function(){try{return v&&v.require&&v.require("util").types||X&&X.binding&&X.binding("util")}catch(z){}}()},8643:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(7740),w=Math.max;const W=function(X,q,D){return q=w(void 0===q?X.length-1:q,0),function(){for(var ie=arguments,z=-1,_=w(ie.length-q,0),y=Array(_);++z<_;)y[z]=ie[q+z];z=-1;for(var O=Array(q+1);++z<q;)O[z]=ie[z];return O[q]=D(y),(0,t.Z)(X,this,O)}}},3920:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w={}},6123:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t="__lodash_placeholder__";const v=function(W,X){for(var q=-1,D=W.length,ie=0,z=[];++q<D;){var _=W[q];(_===X||_===t)&&(W[q]=t,z[ie++]=q)}return z}},309:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(7746),w="object"==typeof self&&self&&self.Object===Object&&self;const W=t.Z||w||Function("return this")()},8829:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(1368);const W=(0,I(2311).Z)(t.Z)},9862:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>ie});var t=I(4140),w=I(9567),v=I(34);const X=w.Z?function(z,_){return(0,w.Z)(z,"toString",{configurable:!0,enumerable:!1,value:(0,t.Z)(_),writable:!0})}:v.Z,ie=(0,I(2311).Z)(X)},1293:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>ut});var t=/\{\n\/\* \[wrapped with (.+)\] \*/,w=/,? & /;var X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var ie=I(9862),z=I(5584),_=I(9072),Me=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const ut=function(be,He,tt){var Ze=He+"";return(0,ie.Z)(be,function(be,He){var tt=He.length;if(!tt)return be;var Ze=tt-1;return He[Ze]=(tt>1?"& ":"")+He[Ze],He=He.join(tt>2?", ":" "),be.replace(X,"{\n/* [wrapped with "+He+"] */\n")}(Ze,function(be,He){return(0,z.Z)(Me,function(tt){var Ze="_."+tt[0];He&tt[1]&&!(0,_.Z)(be,Ze)&&be.push(Ze)}),be.sort()}(function(be){var He=be.match(t);return He?He[1].split(w):[]}(Ze),tt)))}},2311:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>X});var v=Date.now;const X=function(q){var D=0,ie=0;return function(){var z=v(),_=16-(z-ie);if(ie=z,_>0){if(++D>=800)return arguments[0]}else D=0;return q.apply(void 0,arguments)}}},2210:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>ie});var t=I(6819),X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/\\(\\)?/g;const ie=(_=(0,t.Z)(function(z){var _=[];return 46===z.charCodeAt(0)&&_.push(""),z.replace(X,function(y,O,B,de){_.push(B?de.replace(q,"$1"):O||y)}),_},function(O){return 500===y.size&&y.clear(),O}),y=_.cache,_);var _,y},2753:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(3982);const W=function(X){if("string"==typeof X||(0,t.Z)(X))return X;var q=X+"";return"0"==q&&1/X==-1/0?"-0":q}},2035:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var w=Function.prototype.toString;const W=function(X){if(null!=X){try{return w.call(X)}catch(q){}try{return X+""}catch(q){}}return""}},6162:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=/\s/;const v=function(W){for(var X=W.length;X--&&t.test(W.charAt(X)););return X}},8253:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>X});var t=I(6828),w=I(4059),v=I(6889);const X=function(q){if(q instanceof t.Z)return q.clone();var D=new w.Z(q.__wrapped__,q.__chain__);return D.__actions__=(0,v.Z)(q.__actions__),D.__index__=q.__index__,D.__values__=q.__values__,D}},4140:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v){return function(){return v}}},4960:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>ie});var t=I(2137),w=I(6224),v=I(9094),W=I(4078),X=Object.prototype,q=X.hasOwnProperty;const ie=(0,t.Z)(function(z,_){z=Object(z);var y=-1,O=_.length,B=O>2?_[2]:void 0;for(B&&(0,v.Z)(_[0],_[1],B)&&(O=1);++y<O;)for(var de=_[y],le=(0,W.Z)(de),Ee=-1,re=le.length;++Ee<re;){var Ce=le[Ee],xe=z[Ce];(void 0===xe||(0,w.Z)(xe,X[Ce])&&!q.call(z,Ce))&&(z[Ce]=de[Ce])}return z})},6224:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v,W){return v===W||v!=v&&W!=W}},271:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=I(8576);const v=function(W,X,q){var D=null==W?void 0:(0,t.Z)(W,X);return void 0===D?q:D}},34:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v){return v}},4452:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>_});var t=I(782),w=I(6539);const X=function(y){return(0,w.Z)(y)&&"[object Arguments]"==(0,t.Z)(y)};var q=Object.prototype,D=q.hasOwnProperty,ie=q.propertyIsEnumerable;const _=X(function(){return arguments}())?X:function(y){return(0,w.Z)(y)&&D.call(y,"callee")&&!ie.call(y,"callee")}},4654:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=Array.isArray},8402:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(8209),w=I(9238);const W=function(X){return null!=X&&(0,w.Z)(X.length)&&!(0,t.Z)(X)}},6195:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>z});var t=I(309),w=I(6939),v="object"==typeof exports&&exports&&!exports.nodeType&&exports,W=v&&"object"==typeof module&&module&&!module.nodeType&&module,q=W&&W.exports===v?t.Z.Buffer:void 0;const z=(q?q.isBuffer:void 0)||w.Z},8209:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>ie});var t=I(782),w=I(4214);const ie=function(z){if(!(0,w.Z)(z))return!1;var _=(0,t.Z)(z);return"[object Function]"==_||"[object GeneratorFunction]"==_||"[object AsyncFunction]"==_||"[object Proxy]"==_}},9238:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});const v=function(W){return"number"==typeof W&&W>-1&&W%1==0&&W<=9007199254740991}},4214:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v){var W=typeof v;return null!=v&&("object"==W||"function"==W)}},6539:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(v){return null!=v&&"object"==typeof v}},3982:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>X});var t=I(782),w=I(6539);const X=function(q){return"symbol"==typeof q||(0,w.Z)(q)&&"[object Symbol]"==(0,t.Z)(q)}},5486:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>at});var t=I(782),w=I(9238),v=I(6539),Ze={};Ze["[object Float32Array]"]=Ze["[object Float64Array]"]=Ze["[object Int8Array]"]=Ze["[object Int16Array]"]=Ze["[object Int32Array]"]=Ze["[object Uint8Array]"]=Ze["[object Uint8ClampedArray]"]=Ze["[object Uint16Array]"]=Ze["[object Uint32Array]"]=!0,Ze["[object Arguments]"]=Ze["[object Array]"]=Ze["[object ArrayBuffer]"]=Ze["[object Boolean]"]=Ze["[object DataView]"]=Ze["[object Date]"]=Ze["[object Error]"]=Ze["[object Function]"]=Ze["[object Map]"]=Ze["[object Number]"]=Ze["[object Object]"]=Ze["[object RegExp]"]=Ze["[object Set]"]=Ze["[object String]"]=Ze["[object WeakMap]"]=!1;var qe=I(1162),dt=I(8514),Y=dt.Z&&dt.Z.isTypedArray;const at=Y?(0,qe.Z)(Y):function(Qe){return(0,v.Z)(Qe)&&(0,w.Z)(Qe.length)&&!!Ze[(0,t.Z)(Qe)]}},4078:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>O});var t=I(8132),w=I(4214),v=I(1550);var D=Object.prototype.hasOwnProperty;const z=function(B){if(!(0,w.Z)(B))return function(B){var de=[];if(null!=B)for(var le in Object(B))de.push(le);return de}(B);var de=(0,v.Z)(B),le=[];for(var Ee in B)"constructor"==Ee&&(de||!D.call(B,Ee))||le.push(Ee);return le};var _=I(8402);const O=function(B){return(0,_.Z)(B)?(0,t.Z)(B,!0):z(B)}},6819:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>W});var t=I(2868);function v(X,q){if("function"!=typeof X||null!=q&&"function"!=typeof q)throw new TypeError("Expected a function");var D=function(){var ie=arguments,z=q?q.apply(this,ie):ie[0],_=D.cache;if(_.has(z))return _.get(z);var y=X.apply(this,ie);return D.cache=_.set(z,y)||_,y};return D.cache=new(v.Cache||t.Z),D}v.Cache=t.Z;const W=v},7319:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(){}},6013:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>D});var t=I(2137),w=I(1421),v=I(8903),W=I(6123),q=(0,t.Z)(function(ie,z){var _=(0,W.Z)(z,(0,v.Z)(q));return(0,w.Z)(ie,32,void 0,z,_)});q.placeholder={};const D=q},7376:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=I(6218);const v=function(W,X,q){return null==W?W:(0,t.Z)(W,X,q)}},6939:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>w});const w=function(){return!1}},846:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>X});var t=I(4485),w=1/0;const X=function(q){return q?(q=(0,t.Z)(q))===w||q===-w?17976931348623157e292*(q<0?-1:1):q==q?q:0:0===q?q:0}},8214:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=I(846);const v=function(W){var X=(0,t.Z)(W),q=X%1;return X==X?q?X-q:X:0}},4485:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>_});var t=I(1684),w=I(4214),v=I(3982),X=/^[-+]0x[0-9a-f]+$/i,q=/^0b[01]+$/i,D=/^0o[0-7]+$/i,ie=parseInt;const _=function(y){if("number"==typeof y)return y;if((0,v.Z)(y))return NaN;if((0,w.Z)(y)){var O="function"==typeof y.valueOf?y.valueOf():y;y=(0,w.Z)(O)?O+"":O}if("string"!=typeof y)return 0===y?y:+y;y=(0,t.Z)(y);var B=q.test(y);return B||D.test(y)?ie(y.slice(2),B?2:8):X.test(y)?NaN:+y}},4019:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>v});var t=I(2980);const v=function(W){return null==W?"":(0,t.Z)(W)}},1233:(je,ce,I)=>{"use strict";I.d(ce,{Z:()=>_});var t=I(6828),w=I(4059),v=I(1027),W=I(4654),X=I(6539),q=I(8253),ie=Object.prototype.hasOwnProperty;function z(y){if((0,X.Z)(y)&&!(0,W.Z)(y)&&!(y instanceof t.Z)){if(y instanceof w.Z)return y;if(ie.call(y,"__wrapped__"))return(0,q.Z)(y)}return new w.Z(y)}(z.prototype=v.Z.prototype).constructor=z;const _=z}}]);